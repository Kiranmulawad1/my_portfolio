var dm=r=>{throw TypeError(r)};var yu=(r,t,e)=>t.has(r)||dm("Cannot "+e);var Ht=(r,t,e)=>(yu(r,t,"read from private field"),e?e.call(r):t.get(r)),Dn=(r,t,e)=>t.has(r)?dm("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,e),ze=(r,t,e,n)=>(yu(r,t,"write to private field"),n?n.call(r,e):t.set(r,e),e),In=(r,t,e)=>(yu(r,t,"access private method"),e);var fm=(r,t,e,n)=>({set _(s){ze(r,t,s,e)},get _(){return Ht(r,t,n)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function e(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=e(s);fetch(s.href,a)}})();function Eh(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var vu={exports:{}},Vr={},wu={exports:{}},Ct={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pm;function jx(){if(pm)return Ct;pm=1;var r=Symbol.for("react.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.iterator;function y(N){return N===null||typeof N!="object"?null:(N=m&&N[m]||N["@@iterator"],typeof N=="function"?N:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,x={};function E(N,z,nt){this.props=N,this.context=z,this.refs=x,this.updater=nt||w}E.prototype.isReactComponent={},E.prototype.setState=function(N,z){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,z,"setState")},E.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function b(){}b.prototype=E.prototype;function C(N,z,nt){this.props=N,this.context=z,this.refs=x,this.updater=nt||w}var _=C.prototype=new b;_.constructor=C,A(_,E.prototype),_.isPureReactComponent=!0;var R=Array.isArray,P=Object.prototype.hasOwnProperty,D={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function j(N,z,nt){var dt,wt={},yt=null,ut=null;if(z!=null)for(dt in z.ref!==void 0&&(ut=z.ref),z.key!==void 0&&(yt=""+z.key),z)P.call(z,dt)&&!I.hasOwnProperty(dt)&&(wt[dt]=z[dt]);var Et=arguments.length-2;if(Et===1)wt.children=nt;else if(1<Et){for(var Pt=Array(Et),Tt=0;Tt<Et;Tt++)Pt[Tt]=arguments[Tt+2];wt.children=Pt}if(N&&N.defaultProps)for(dt in Et=N.defaultProps,Et)wt[dt]===void 0&&(wt[dt]=Et[dt]);return{$$typeof:r,type:N,key:yt,ref:ut,props:wt,_owner:D.current}}function H(N,z){return{$$typeof:r,type:N.type,key:z,ref:N.ref,props:N.props,_owner:N._owner}}function G(N){return typeof N=="object"&&N!==null&&N.$$typeof===r}function Q(N){var z={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(nt){return z[nt]})}var ht=/\/+/g;function lt(N,z){return typeof N=="object"&&N!==null&&N.key!=null?Q(""+N.key):z.toString(36)}function et(N,z,nt,dt,wt){var yt=typeof N;(yt==="undefined"||yt==="boolean")&&(N=null);var ut=!1;if(N===null)ut=!0;else switch(yt){case"string":case"number":ut=!0;break;case"object":switch(N.$$typeof){case r:case t:ut=!0}}if(ut)return ut=N,wt=wt(ut),N=dt===""?"."+lt(ut,0):dt,R(wt)?(nt="",N!=null&&(nt=N.replace(ht,"$&/")+"/"),et(wt,z,nt,"",function(Tt){return Tt})):wt!=null&&(G(wt)&&(wt=H(wt,nt+(!wt.key||ut&&ut.key===wt.key?"":(""+wt.key).replace(ht,"$&/")+"/")+N)),z.push(wt)),1;if(ut=0,dt=dt===""?".":dt+":",R(N))for(var Et=0;Et<N.length;Et++){yt=N[Et];var Pt=dt+lt(yt,Et);ut+=et(yt,z,nt,Pt,wt)}else if(Pt=y(N),typeof Pt=="function")for(N=Pt.call(N),Et=0;!(yt=N.next()).done;)yt=yt.value,Pt=dt+lt(yt,Et++),ut+=et(yt,z,nt,Pt,wt);else if(yt==="object")throw z=String(N),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.");return ut}function bt(N,z,nt){if(N==null)return N;var dt=[],wt=0;return et(N,dt,"","",function(yt){return z.call(nt,yt,wt++)}),dt}function q(N){if(N._status===-1){var z=N._result;z=z(),z.then(function(nt){(N._status===0||N._status===-1)&&(N._status=1,N._result=nt)},function(nt){(N._status===0||N._status===-1)&&(N._status=2,N._result=nt)}),N._status===-1&&(N._status=0,N._result=z)}if(N._status===1)return N._result.default;throw N._result}var U={current:null},$={transition:null},J={ReactCurrentDispatcher:U,ReactCurrentBatchConfig:$,ReactCurrentOwner:D};function Z(){throw Error("act(...) is not supported in production builds of React.")}return Ct.Children={map:bt,forEach:function(N,z,nt){bt(N,function(){z.apply(this,arguments)},nt)},count:function(N){var z=0;return bt(N,function(){z++}),z},toArray:function(N){return bt(N,function(z){return z})||[]},only:function(N){if(!G(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Ct.Component=E,Ct.Fragment=e,Ct.Profiler=s,Ct.PureComponent=C,Ct.StrictMode=n,Ct.Suspense=h,Ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J,Ct.act=Z,Ct.cloneElement=function(N,z,nt){if(N==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+N+".");var dt=A({},N.props),wt=N.key,yt=N.ref,ut=N._owner;if(z!=null){if(z.ref!==void 0&&(yt=z.ref,ut=D.current),z.key!==void 0&&(wt=""+z.key),N.type&&N.type.defaultProps)var Et=N.type.defaultProps;for(Pt in z)P.call(z,Pt)&&!I.hasOwnProperty(Pt)&&(dt[Pt]=z[Pt]===void 0&&Et!==void 0?Et[Pt]:z[Pt])}var Pt=arguments.length-2;if(Pt===1)dt.children=nt;else if(1<Pt){Et=Array(Pt);for(var Tt=0;Tt<Pt;Tt++)Et[Tt]=arguments[Tt+2];dt.children=Et}return{$$typeof:r,type:N.type,key:wt,ref:yt,props:dt,_owner:ut}},Ct.createContext=function(N){return N={$$typeof:l,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},N.Provider={$$typeof:a,_context:N},N.Consumer=N},Ct.createElement=j,Ct.createFactory=function(N){var z=j.bind(null,N);return z.type=N,z},Ct.createRef=function(){return{current:null}},Ct.forwardRef=function(N){return{$$typeof:c,render:N}},Ct.isValidElement=G,Ct.lazy=function(N){return{$$typeof:p,_payload:{_status:-1,_result:N},_init:q}},Ct.memo=function(N,z){return{$$typeof:d,type:N,compare:z===void 0?null:z}},Ct.startTransition=function(N){var z=$.transition;$.transition={};try{N()}finally{$.transition=z}},Ct.unstable_act=Z,Ct.useCallback=function(N,z){return U.current.useCallback(N,z)},Ct.useContext=function(N){return U.current.useContext(N)},Ct.useDebugValue=function(){},Ct.useDeferredValue=function(N){return U.current.useDeferredValue(N)},Ct.useEffect=function(N,z){return U.current.useEffect(N,z)},Ct.useId=function(){return U.current.useId()},Ct.useImperativeHandle=function(N,z,nt){return U.current.useImperativeHandle(N,z,nt)},Ct.useInsertionEffect=function(N,z){return U.current.useInsertionEffect(N,z)},Ct.useLayoutEffect=function(N,z){return U.current.useLayoutEffect(N,z)},Ct.useMemo=function(N,z){return U.current.useMemo(N,z)},Ct.useReducer=function(N,z,nt){return U.current.useReducer(N,z,nt)},Ct.useRef=function(N){return U.current.useRef(N)},Ct.useState=function(N){return U.current.useState(N)},Ct.useSyncExternalStore=function(N,z,nt){return U.current.useSyncExternalStore(N,z,nt)},Ct.useTransition=function(){return U.current.useTransition()},Ct.version="18.3.1",Ct}var mm;function _h(){return mm||(mm=1,wu.exports=jx()),wu.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gm;function Bx(){if(gm)return Vr;gm=1;var r=_h(),t=Symbol.for("react.element"),e=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(c,h,d){var p,m={},y=null,w=null;d!==void 0&&(y=""+d),h.key!==void 0&&(y=""+h.key),h.ref!==void 0&&(w=h.ref);for(p in h)n.call(h,p)&&!a.hasOwnProperty(p)&&(m[p]=h[p]);if(c&&c.defaultProps)for(p in h=c.defaultProps,h)m[p]===void 0&&(m[p]=h[p]);return{$$typeof:t,type:c,key:y,ref:w,props:m,_owner:s.current}}return Vr.Fragment=e,Vr.jsx=l,Vr.jsxs=l,Vr}var ym;function Vx(){return ym||(ym=1,vu.exports=Bx()),vu.exports}var k=Vx(),V=_h();const zx=Eh(V);var za={},xu={exports:{}},He={},Au={exports:{}},Su={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vm;function Hx(){return vm||(vm=1,(function(r){function t($,J){var Z=$.length;$.push(J);t:for(;0<Z;){var N=Z-1>>>1,z=$[N];if(0<s(z,J))$[N]=J,$[Z]=z,Z=N;else break t}}function e($){return $.length===0?null:$[0]}function n($){if($.length===0)return null;var J=$[0],Z=$.pop();if(Z!==J){$[0]=Z;t:for(var N=0,z=$.length,nt=z>>>1;N<nt;){var dt=2*(N+1)-1,wt=$[dt],yt=dt+1,ut=$[yt];if(0>s(wt,Z))yt<z&&0>s(ut,wt)?($[N]=ut,$[yt]=Z,N=yt):($[N]=wt,$[dt]=Z,N=dt);else if(yt<z&&0>s(ut,Z))$[N]=ut,$[yt]=Z,N=yt;else break t}}return J}function s($,J){var Z=$.sortIndex-J.sortIndex;return Z!==0?Z:$.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;r.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();r.unstable_now=function(){return l.now()-c}}var h=[],d=[],p=1,m=null,y=3,w=!1,A=!1,x=!1,E=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _($){for(var J=e(d);J!==null;){if(J.callback===null)n(d);else if(J.startTime<=$)n(d),J.sortIndex=J.expirationTime,t(h,J);else break;J=e(d)}}function R($){if(x=!1,_($),!A)if(e(h)!==null)A=!0,q(P);else{var J=e(d);J!==null&&U(R,J.startTime-$)}}function P($,J){A=!1,x&&(x=!1,b(j),j=-1),w=!0;var Z=y;try{for(_(J),m=e(h);m!==null&&(!(m.expirationTime>J)||$&&!Q());){var N=m.callback;if(typeof N=="function"){m.callback=null,y=m.priorityLevel;var z=N(m.expirationTime<=J);J=r.unstable_now(),typeof z=="function"?m.callback=z:m===e(h)&&n(h),_(J)}else n(h);m=e(h)}if(m!==null)var nt=!0;else{var dt=e(d);dt!==null&&U(R,dt.startTime-J),nt=!1}return nt}finally{m=null,y=Z,w=!1}}var D=!1,I=null,j=-1,H=5,G=-1;function Q(){return!(r.unstable_now()-G<H)}function ht(){if(I!==null){var $=r.unstable_now();G=$;var J=!0;try{J=I(!0,$)}finally{J?lt():(D=!1,I=null)}}else D=!1}var lt;if(typeof C=="function")lt=function(){C(ht)};else if(typeof MessageChannel<"u"){var et=new MessageChannel,bt=et.port2;et.port1.onmessage=ht,lt=function(){bt.postMessage(null)}}else lt=function(){E(ht,0)};function q($){I=$,D||(D=!0,lt())}function U($,J){j=E(function(){$(r.unstable_now())},J)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function($){$.callback=null},r.unstable_continueExecution=function(){A||w||(A=!0,q(P))},r.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<$?Math.floor(1e3/$):5},r.unstable_getCurrentPriorityLevel=function(){return y},r.unstable_getFirstCallbackNode=function(){return e(h)},r.unstable_next=function($){switch(y){case 1:case 2:case 3:var J=3;break;default:J=y}var Z=y;y=J;try{return $()}finally{y=Z}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function($,J){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var Z=y;y=$;try{return J()}finally{y=Z}},r.unstable_scheduleCallback=function($,J,Z){var N=r.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?N+Z:N):Z=N,$){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=Z+z,$={id:p++,callback:J,priorityLevel:$,startTime:Z,expirationTime:z,sortIndex:-1},Z>N?($.sortIndex=Z,t(d,$),e(h)===null&&$===e(d)&&(x?(b(j),j=-1):x=!0,U(R,Z-N))):($.sortIndex=z,t(h,$),A||w||(A=!0,q(P))),$},r.unstable_shouldYield=Q,r.unstable_wrapCallback=function($){var J=y;return function(){var Z=y;y=J;try{return $.apply(this,arguments)}finally{y=Z}}}})(Su)),Su}var wm;function Ux(){return wm||(wm=1,Au.exports=Hx()),Au.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xm;function $x(){if(xm)return He;xm=1;var r=_h(),t=Ux();function e(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function a(i,o){l(i,o),l(i+"Capture",o)}function l(i,o){for(s[i]=o,i=0;i<o.length;i++)n.add(o[i])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},m={};function y(i){return h.call(m,i)?!0:h.call(p,i)?!1:d.test(i)?m[i]=!0:(p[i]=!0,!1)}function w(i,o,u,f){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return f?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function A(i,o,u,f){if(o===null||typeof o>"u"||w(i,o,u,f))return!0;if(f)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function x(i,o,u,f,g,v,S){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=f,this.attributeNamespace=g,this.mustUseProperty=u,this.propertyName=i,this.type=o,this.sanitizeURL=v,this.removeEmptyString=S}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){E[i]=new x(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];E[o]=new x(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){E[i]=new x(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){E[i]=new x(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){E[i]=new x(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){E[i]=new x(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){E[i]=new x(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){E[i]=new x(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){E[i]=new x(i,5,!1,i.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function C(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(b,C);E[o]=new x(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(b,C);E[o]=new x(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(b,C);E[o]=new x(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){E[i]=new x(i,1,!1,i.toLowerCase(),null,!1,!1)}),E.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){E[i]=new x(i,1,!1,i.toLowerCase(),null,!0,!0)});function _(i,o,u,f){var g=E.hasOwnProperty(o)?E[o]:null;(g!==null?g.type!==0:f||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(A(o,u,g,f)&&(u=null),f||g===null?y(o)&&(u===null?i.removeAttribute(o):i.setAttribute(o,""+u)):g.mustUseProperty?i[g.propertyName]=u===null?g.type===3?!1:"":u:(o=g.attributeName,f=g.attributeNamespace,u===null?i.removeAttribute(o):(g=g.type,u=g===3||g===4&&u===!0?"":""+u,f?i.setAttributeNS(f,o,u):i.setAttribute(o,u))))}var R=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,P=Symbol.for("react.element"),D=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),G=Symbol.for("react.provider"),Q=Symbol.for("react.context"),ht=Symbol.for("react.forward_ref"),lt=Symbol.for("react.suspense"),et=Symbol.for("react.suspense_list"),bt=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),U=Symbol.for("react.offscreen"),$=Symbol.iterator;function J(i){return i===null||typeof i!="object"?null:(i=$&&i[$]||i["@@iterator"],typeof i=="function"?i:null)}var Z=Object.assign,N;function z(i){if(N===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);N=o&&o[1]||""}return`
`+N+i}var nt=!1;function dt(i,o){if(!i||nt)return"";nt=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(B){var f=B}Reflect.construct(i,[],o)}else{try{o.call()}catch(B){f=B}i.call(o.prototype)}else{try{throw Error()}catch(B){f=B}i()}}catch(B){if(B&&f&&typeof B.stack=="string"){for(var g=B.stack.split(`
`),v=f.stack.split(`
`),S=g.length-1,T=v.length-1;1<=S&&0<=T&&g[S]!==v[T];)T--;for(;1<=S&&0<=T;S--,T--)if(g[S]!==v[T]){if(S!==1||T!==1)do if(S--,T--,0>T||g[S]!==v[T]){var M=`
`+g[S].replace(" at new "," at ");return i.displayName&&M.includes("<anonymous>")&&(M=M.replace("<anonymous>",i.displayName)),M}while(1<=S&&0<=T);break}}}finally{nt=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?z(i):""}function wt(i){switch(i.tag){case 5:return z(i.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return i=dt(i.type,!1),i;case 11:return i=dt(i.type.render,!1),i;case 1:return i=dt(i.type,!0),i;default:return""}}function yt(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case I:return"Fragment";case D:return"Portal";case H:return"Profiler";case j:return"StrictMode";case lt:return"Suspense";case et:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case Q:return(i.displayName||"Context")+".Consumer";case G:return(i._context.displayName||"Context")+".Provider";case ht:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case bt:return o=i.displayName||null,o!==null?o:yt(i.type)||"Memo";case q:o=i._payload,i=i._init;try{return yt(i(o))}catch{}}return null}function ut(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return yt(o);case 8:return o===j?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Et(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Pt(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Tt(i){var o=Pt(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),f=""+i[o];if(!i.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,v=u.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return g.call(this)},set:function(S){f=""+S,v.call(this,S)}}),Object.defineProperty(i,o,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(S){f=""+S},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Ne(i){i._valueTracker||(i._valueTracker=Tt(i))}function tn(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var u=o.getValue(),f="";return i&&(f=Pt(i)?i.checked?"true":"false":i.value),i=f,i!==u?(o.setValue(i),!0):!1}function kt(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Nt(i,o){var u=o.checked;return Z({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function qt(i,o){var u=o.defaultValue==null?"":o.defaultValue,f=o.checked!=null?o.checked:o.defaultChecked;u=Et(o.value!=null?o.value:u),i._wrapperState={initialChecked:f,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Zt(i,o){o=o.checked,o!=null&&_(i,"checked",o,!1)}function Tn(i,o){Zt(i,o);var u=Et(o.value),f=o.type;if(u!=null)f==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(f==="submit"||f==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?Li(i,o.type,u):o.hasOwnProperty("defaultValue")&&Li(i,o.type,Et(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function ri(i,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var f=o.type;if(!(f!=="submit"&&f!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,u||o===i.value||(i.value=o),i.defaultValue=o}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function Li(i,o,u){(o!=="number"||kt(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var Di=Array.isArray;function pn(i,o,u,f){if(i=i.options,o){o={};for(var g=0;g<u.length;g++)o["$"+u[g]]=!0;for(u=0;u<i.length;u++)g=o.hasOwnProperty("$"+i[u].value),i[u].selected!==g&&(i[u].selected=g),g&&f&&(i[u].defaultSelected=!0)}else{for(u=""+Et(u),o=null,g=0;g<i.length;g++){if(i[g].value===u){i[g].selected=!0,f&&(i[g].defaultSelected=!0);return}o!==null||i[g].disabled||(o=i[g])}o!==null&&(o.selected=!0)}}function nr(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(e(91));return Z({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Ro(i,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(e(92));if(Di(u)){if(1<u.length)throw Error(e(93));u=u[0]}o=u}o==null&&(o=""),u=o}i._wrapperState={initialValue:Et(u)}}function Mo(i,o){var u=Et(o.value),f=Et(o.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),o.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),f!=null&&(i.defaultValue=""+f)}function Lo(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function Do(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function en(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?Do(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var mn,gn=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,f,g){MSApp.execUnsafeLocalFunction(function(){return i(o,u,f,g)})}:i})(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(mn=mn||document.createElement("div"),mn.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=mn.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function $n(i,o){if(o){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=o;return}}i.textContent=o}var ir={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Hv=["Webkit","ms","Moz","O"];Object.keys(ir).forEach(function(i){Hv.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),ir[o]=ir[i]})});function Cd(i,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||ir.hasOwnProperty(i)&&ir[i]?(""+o).trim():o+"px"}function Td(i,o){i=i.style;for(var u in o)if(o.hasOwnProperty(u)){var f=u.indexOf("--")===0,g=Cd(u,o[u],f);u==="float"&&(u="cssFloat"),f?i.setProperty(u,g):i[u]=g}}var Uv=Z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kl(i,o){if(o){if(Uv[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(e(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(e(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(e(61))}if(o.style!=null&&typeof o.style!="object")throw Error(e(62))}}function Rl(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ml=null;function Ll(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Dl=null,us=null,hs=null;function Pd(i){if(i=_r(i)){if(typeof Dl!="function")throw Error(e(280));var o=i.stateNode;o&&(o=na(o),Dl(i.stateNode,i.type,o))}}function kd(i){us?hs?hs.push(i):hs=[i]:us=i}function Rd(){if(us){var i=us,o=hs;if(hs=us=null,Pd(i),o)for(i=0;i<o.length;i++)Pd(o[i])}}function Md(i,o){return i(o)}function Ld(){}var Il=!1;function Dd(i,o,u){if(Il)return i(o,u);Il=!0;try{return Md(i,o,u)}finally{Il=!1,(us!==null||hs!==null)&&(Ld(),Rd())}}function sr(i,o){var u=i.stateNode;if(u===null)return null;var f=na(u);if(f===null)return null;u=f[o];t:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break t;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(e(231,o,typeof u));return u}var Nl=!1;if(c)try{var rr={};Object.defineProperty(rr,"passive",{get:function(){Nl=!0}}),window.addEventListener("test",rr,rr),window.removeEventListener("test",rr,rr)}catch{Nl=!1}function $v(i,o,u,f,g,v,S,T,M){var B=Array.prototype.slice.call(arguments,3);try{o.apply(u,B)}catch(X){this.onError(X)}}var or=!1,Io=null,No=!1,Fl=null,Wv={onError:function(i){or=!0,Io=i}};function Gv(i,o,u,f,g,v,S,T,M){or=!1,Io=null,$v.apply(Wv,arguments)}function Xv(i,o,u,f,g,v,S,T,M){if(Gv.apply(this,arguments),or){if(or){var B=Io;or=!1,Io=null}else throw Error(e(198));No||(No=!0,Fl=B)}}function Ii(i){var o=i,u=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(u=o.return),i=o.return;while(i)}return o.tag===3?u:null}function Id(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function Nd(i){if(Ii(i)!==i)throw Error(e(188))}function Kv(i){var o=i.alternate;if(!o){if(o=Ii(i),o===null)throw Error(e(188));return o!==i?null:i}for(var u=i,f=o;;){var g=u.return;if(g===null)break;var v=g.alternate;if(v===null){if(f=g.return,f!==null){u=f;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===u)return Nd(g),i;if(v===f)return Nd(g),o;v=v.sibling}throw Error(e(188))}if(u.return!==f.return)u=g,f=v;else{for(var S=!1,T=g.child;T;){if(T===u){S=!0,u=g,f=v;break}if(T===f){S=!0,f=g,u=v;break}T=T.sibling}if(!S){for(T=v.child;T;){if(T===u){S=!0,u=v,f=g;break}if(T===f){S=!0,f=v,u=g;break}T=T.sibling}if(!S)throw Error(e(189))}}if(u.alternate!==f)throw Error(e(190))}if(u.tag!==3)throw Error(e(188));return u.stateNode.current===u?i:o}function Fd(i){return i=Kv(i),i!==null?Od(i):null}function Od(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=Od(i);if(o!==null)return o;i=i.sibling}return null}var jd=t.unstable_scheduleCallback,Bd=t.unstable_cancelCallback,qv=t.unstable_shouldYield,Yv=t.unstable_requestPaint,Jt=t.unstable_now,Qv=t.unstable_getCurrentPriorityLevel,Ol=t.unstable_ImmediatePriority,Vd=t.unstable_UserBlockingPriority,Fo=t.unstable_NormalPriority,Zv=t.unstable_LowPriority,zd=t.unstable_IdlePriority,Oo=null,Pn=null;function Jv(i){if(Pn&&typeof Pn.onCommitFiberRoot=="function")try{Pn.onCommitFiberRoot(Oo,i,void 0,(i.current.flags&128)===128)}catch{}}var yn=Math.clz32?Math.clz32:nw,tw=Math.log,ew=Math.LN2;function nw(i){return i>>>=0,i===0?32:31-(tw(i)/ew|0)|0}var jo=64,Bo=4194304;function ar(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Vo(i,o){var u=i.pendingLanes;if(u===0)return 0;var f=0,g=i.suspendedLanes,v=i.pingedLanes,S=u&268435455;if(S!==0){var T=S&~g;T!==0?f=ar(T):(v&=S,v!==0&&(f=ar(v)))}else S=u&~g,S!==0?f=ar(S):v!==0&&(f=ar(v));if(f===0)return 0;if(o!==0&&o!==f&&(o&g)===0&&(g=f&-f,v=o&-o,g>=v||g===16&&(v&4194240)!==0))return o;if((f&4)!==0&&(f|=u&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=f;0<o;)u=31-yn(o),g=1<<u,f|=i[u],o&=~g;return f}function iw(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sw(i,o){for(var u=i.suspendedLanes,f=i.pingedLanes,g=i.expirationTimes,v=i.pendingLanes;0<v;){var S=31-yn(v),T=1<<S,M=g[S];M===-1?((T&u)===0||(T&f)!==0)&&(g[S]=iw(T,o)):M<=o&&(i.expiredLanes|=T),v&=~T}}function jl(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Hd(){var i=jo;return jo<<=1,(jo&4194240)===0&&(jo=64),i}function Bl(i){for(var o=[],u=0;31>u;u++)o.push(i);return o}function lr(i,o,u){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-yn(o),i[o]=u}function rw(i,o){var u=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var f=i.eventTimes;for(i=i.expirationTimes;0<u;){var g=31-yn(u),v=1<<g;o[g]=0,f[g]=-1,i[g]=-1,u&=~v}}function Vl(i,o){var u=i.entangledLanes|=o;for(i=i.entanglements;u;){var f=31-yn(u),g=1<<f;g&o|i[f]&o&&(i[f]|=o),u&=~g}}var It=0;function Ud(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var $d,zl,Wd,Gd,Xd,Hl=!1,zo=[],oi=null,ai=null,li=null,cr=new Map,ur=new Map,ci=[],ow="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Kd(i,o){switch(i){case"focusin":case"focusout":oi=null;break;case"dragenter":case"dragleave":ai=null;break;case"mouseover":case"mouseout":li=null;break;case"pointerover":case"pointerout":cr.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":ur.delete(o.pointerId)}}function hr(i,o,u,f,g,v){return i===null||i.nativeEvent!==v?(i={blockedOn:o,domEventName:u,eventSystemFlags:f,nativeEvent:v,targetContainers:[g]},o!==null&&(o=_r(o),o!==null&&zl(o)),i):(i.eventSystemFlags|=f,o=i.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),i)}function aw(i,o,u,f,g){switch(o){case"focusin":return oi=hr(oi,i,o,u,f,g),!0;case"dragenter":return ai=hr(ai,i,o,u,f,g),!0;case"mouseover":return li=hr(li,i,o,u,f,g),!0;case"pointerover":var v=g.pointerId;return cr.set(v,hr(cr.get(v)||null,i,o,u,f,g)),!0;case"gotpointercapture":return v=g.pointerId,ur.set(v,hr(ur.get(v)||null,i,o,u,f,g)),!0}return!1}function qd(i){var o=Ni(i.target);if(o!==null){var u=Ii(o);if(u!==null){if(o=u.tag,o===13){if(o=Id(u),o!==null){i.blockedOn=o,Xd(i.priority,function(){Wd(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Ho(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var u=$l(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var f=new u.constructor(u.type,u);Ml=f,u.target.dispatchEvent(f),Ml=null}else return o=_r(u),o!==null&&zl(o),i.blockedOn=u,!1;o.shift()}return!0}function Yd(i,o,u){Ho(i)&&u.delete(o)}function lw(){Hl=!1,oi!==null&&Ho(oi)&&(oi=null),ai!==null&&Ho(ai)&&(ai=null),li!==null&&Ho(li)&&(li=null),cr.forEach(Yd),ur.forEach(Yd)}function dr(i,o){i.blockedOn===o&&(i.blockedOn=null,Hl||(Hl=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,lw)))}function fr(i){function o(g){return dr(g,i)}if(0<zo.length){dr(zo[0],i);for(var u=1;u<zo.length;u++){var f=zo[u];f.blockedOn===i&&(f.blockedOn=null)}}for(oi!==null&&dr(oi,i),ai!==null&&dr(ai,i),li!==null&&dr(li,i),cr.forEach(o),ur.forEach(o),u=0;u<ci.length;u++)f=ci[u],f.blockedOn===i&&(f.blockedOn=null);for(;0<ci.length&&(u=ci[0],u.blockedOn===null);)qd(u),u.blockedOn===null&&ci.shift()}var ds=R.ReactCurrentBatchConfig,Uo=!0;function cw(i,o,u,f){var g=It,v=ds.transition;ds.transition=null;try{It=1,Ul(i,o,u,f)}finally{It=g,ds.transition=v}}function uw(i,o,u,f){var g=It,v=ds.transition;ds.transition=null;try{It=4,Ul(i,o,u,f)}finally{It=g,ds.transition=v}}function Ul(i,o,u,f){if(Uo){var g=$l(i,o,u,f);if(g===null)ac(i,o,f,$o,u),Kd(i,f);else if(aw(g,i,o,u,f))f.stopPropagation();else if(Kd(i,f),o&4&&-1<ow.indexOf(i)){for(;g!==null;){var v=_r(g);if(v!==null&&$d(v),v=$l(i,o,u,f),v===null&&ac(i,o,f,$o,u),v===g)break;g=v}g!==null&&f.stopPropagation()}else ac(i,o,f,null,u)}}var $o=null;function $l(i,o,u,f){if($o=null,i=Ll(f),i=Ni(i),i!==null)if(o=Ii(i),o===null)i=null;else if(u=o.tag,u===13){if(i=Id(o),i!==null)return i;i=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return $o=i,null}function Qd(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qv()){case Ol:return 1;case Vd:return 4;case Fo:case Zv:return 16;case zd:return 536870912;default:return 16}default:return 16}}var ui=null,Wl=null,Wo=null;function Zd(){if(Wo)return Wo;var i,o=Wl,u=o.length,f,g="value"in ui?ui.value:ui.textContent,v=g.length;for(i=0;i<u&&o[i]===g[i];i++);var S=u-i;for(f=1;f<=S&&o[u-f]===g[v-f];f++);return Wo=g.slice(i,1<f?1-f:void 0)}function Go(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Xo(){return!0}function Jd(){return!1}function Ge(i){function o(u,f,g,v,S){this._reactName=u,this._targetInst=g,this.type=f,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var T in i)i.hasOwnProperty(T)&&(u=i[T],this[T]=u?u(v):v[T]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Xo:Jd,this.isPropagationStopped=Jd,this}return Z(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Xo)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Xo)},persist:function(){},isPersistent:Xo}),o}var fs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gl=Ge(fs),pr=Z({},fs,{view:0,detail:0}),hw=Ge(pr),Xl,Kl,mr,Ko=Z({},pr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yl,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==mr&&(mr&&i.type==="mousemove"?(Xl=i.screenX-mr.screenX,Kl=i.screenY-mr.screenY):Kl=Xl=0,mr=i),Xl)},movementY:function(i){return"movementY"in i?i.movementY:Kl}}),tf=Ge(Ko),dw=Z({},Ko,{dataTransfer:0}),fw=Ge(dw),pw=Z({},pr,{relatedTarget:0}),ql=Ge(pw),mw=Z({},fs,{animationName:0,elapsedTime:0,pseudoElement:0}),gw=Ge(mw),yw=Z({},fs,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),vw=Ge(yw),ww=Z({},fs,{data:0}),ef=Ge(ww),xw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Aw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bw(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=Sw[i])?!!o[i]:!1}function Yl(){return bw}var Ew=Z({},pr,{key:function(i){if(i.key){var o=xw[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Go(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Aw[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yl,charCode:function(i){return i.type==="keypress"?Go(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Go(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),_w=Ge(Ew),Cw=Z({},Ko,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nf=Ge(Cw),Tw=Z({},pr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yl}),Pw=Ge(Tw),kw=Z({},fs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rw=Ge(kw),Mw=Z({},Ko,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Lw=Ge(Mw),Dw=[9,13,27,32],Ql=c&&"CompositionEvent"in window,gr=null;c&&"documentMode"in document&&(gr=document.documentMode);var Iw=c&&"TextEvent"in window&&!gr,sf=c&&(!Ql||gr&&8<gr&&11>=gr),rf=" ",of=!1;function af(i,o){switch(i){case"keyup":return Dw.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lf(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ps=!1;function Nw(i,o){switch(i){case"compositionend":return lf(o);case"keypress":return o.which!==32?null:(of=!0,rf);case"textInput":return i=o.data,i===rf&&of?null:i;default:return null}}function Fw(i,o){if(ps)return i==="compositionend"||!Ql&&af(i,o)?(i=Zd(),Wo=Wl=ui=null,ps=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return sf&&o.locale!=="ko"?null:o.data;default:return null}}var Ow={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cf(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!Ow[i.type]:o==="textarea"}function uf(i,o,u,f){kd(f),o=Jo(o,"onChange"),0<o.length&&(u=new Gl("onChange","change",null,u,f),i.push({event:u,listeners:o}))}var yr=null,vr=null;function jw(i){Pf(i,0)}function qo(i){var o=ws(i);if(tn(o))return i}function Bw(i,o){if(i==="change")return o}var hf=!1;if(c){var Zl;if(c){var Jl="oninput"in document;if(!Jl){var df=document.createElement("div");df.setAttribute("oninput","return;"),Jl=typeof df.oninput=="function"}Zl=Jl}else Zl=!1;hf=Zl&&(!document.documentMode||9<document.documentMode)}function ff(){yr&&(yr.detachEvent("onpropertychange",pf),vr=yr=null)}function pf(i){if(i.propertyName==="value"&&qo(vr)){var o=[];uf(o,vr,i,Ll(i)),Dd(jw,o)}}function Vw(i,o,u){i==="focusin"?(ff(),yr=o,vr=u,yr.attachEvent("onpropertychange",pf)):i==="focusout"&&ff()}function zw(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return qo(vr)}function Hw(i,o){if(i==="click")return qo(o)}function Uw(i,o){if(i==="input"||i==="change")return qo(o)}function $w(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var vn=typeof Object.is=="function"?Object.is:$w;function wr(i,o){if(vn(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var u=Object.keys(i),f=Object.keys(o);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var g=u[f];if(!h.call(o,g)||!vn(i[g],o[g]))return!1}return!0}function mf(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function gf(i,o){var u=mf(i);i=0;for(var f;u;){if(u.nodeType===3){if(f=i+u.textContent.length,i<=o&&f>=o)return{node:u,offset:o-i};i=f}t:{for(;u;){if(u.nextSibling){u=u.nextSibling;break t}u=u.parentNode}u=void 0}u=mf(u)}}function yf(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?yf(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function vf(){for(var i=window,o=kt();o instanceof i.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)i=o.contentWindow;else break;o=kt(i.document)}return o}function tc(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function Ww(i){var o=vf(),u=i.focusedElem,f=i.selectionRange;if(o!==u&&u&&u.ownerDocument&&yf(u.ownerDocument.documentElement,u)){if(f!==null&&tc(u)){if(o=f.start,i=f.end,i===void 0&&(i=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(i,u.value.length);else if(i=(o=u.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var g=u.textContent.length,v=Math.min(f.start,g);f=f.end===void 0?v:Math.min(f.end,g),!i.extend&&v>f&&(g=f,f=v,v=g),g=gf(u,v);var S=gf(u,f);g&&S&&(i.rangeCount!==1||i.anchorNode!==g.node||i.anchorOffset!==g.offset||i.focusNode!==S.node||i.focusOffset!==S.offset)&&(o=o.createRange(),o.setStart(g.node,g.offset),i.removeAllRanges(),v>f?(i.addRange(o),i.extend(S.node,S.offset)):(o.setEnd(S.node,S.offset),i.addRange(o)))}}for(o=[],i=u;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)i=o[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var Gw=c&&"documentMode"in document&&11>=document.documentMode,ms=null,ec=null,xr=null,nc=!1;function wf(i,o,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;nc||ms==null||ms!==kt(f)||(f=ms,"selectionStart"in f&&tc(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),xr&&wr(xr,f)||(xr=f,f=Jo(ec,"onSelect"),0<f.length&&(o=new Gl("onSelect","select",null,o,u),i.push({event:o,listeners:f}),o.target=ms)))}function Yo(i,o){var u={};return u[i.toLowerCase()]=o.toLowerCase(),u["Webkit"+i]="webkit"+o,u["Moz"+i]="moz"+o,u}var gs={animationend:Yo("Animation","AnimationEnd"),animationiteration:Yo("Animation","AnimationIteration"),animationstart:Yo("Animation","AnimationStart"),transitionend:Yo("Transition","TransitionEnd")},ic={},xf={};c&&(xf=document.createElement("div").style,"AnimationEvent"in window||(delete gs.animationend.animation,delete gs.animationiteration.animation,delete gs.animationstart.animation),"TransitionEvent"in window||delete gs.transitionend.transition);function Qo(i){if(ic[i])return ic[i];if(!gs[i])return i;var o=gs[i],u;for(u in o)if(o.hasOwnProperty(u)&&u in xf)return ic[i]=o[u];return i}var Af=Qo("animationend"),Sf=Qo("animationiteration"),bf=Qo("animationstart"),Ef=Qo("transitionend"),_f=new Map,Cf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hi(i,o){_f.set(i,o),a(o,[i])}for(var sc=0;sc<Cf.length;sc++){var rc=Cf[sc],Xw=rc.toLowerCase(),Kw=rc[0].toUpperCase()+rc.slice(1);hi(Xw,"on"+Kw)}hi(Af,"onAnimationEnd"),hi(Sf,"onAnimationIteration"),hi(bf,"onAnimationStart"),hi("dblclick","onDoubleClick"),hi("focusin","onFocus"),hi("focusout","onBlur"),hi(Ef,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ar="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ar));function Tf(i,o,u){var f=i.type||"unknown-event";i.currentTarget=u,Xv(f,o,void 0,i),i.currentTarget=null}function Pf(i,o){o=(o&4)!==0;for(var u=0;u<i.length;u++){var f=i[u],g=f.event;f=f.listeners;t:{var v=void 0;if(o)for(var S=f.length-1;0<=S;S--){var T=f[S],M=T.instance,B=T.currentTarget;if(T=T.listener,M!==v&&g.isPropagationStopped())break t;Tf(g,T,B),v=M}else for(S=0;S<f.length;S++){if(T=f[S],M=T.instance,B=T.currentTarget,T=T.listener,M!==v&&g.isPropagationStopped())break t;Tf(g,T,B),v=M}}}if(No)throw i=Fl,No=!1,Fl=null,i}function Bt(i,o){var u=o[fc];u===void 0&&(u=o[fc]=new Set);var f=i+"__bubble";u.has(f)||(kf(o,i,2,!1),u.add(f))}function oc(i,o,u){var f=0;o&&(f|=4),kf(u,i,f,o)}var Zo="_reactListening"+Math.random().toString(36).slice(2);function Sr(i){if(!i[Zo]){i[Zo]=!0,n.forEach(function(u){u!=="selectionchange"&&(qw.has(u)||oc(u,!1,i),oc(u,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Zo]||(o[Zo]=!0,oc("selectionchange",!1,o))}}function kf(i,o,u,f){switch(Qd(o)){case 1:var g=cw;break;case 4:g=uw;break;default:g=Ul}u=g.bind(null,o,u,i),g=void 0,!Nl||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),f?g!==void 0?i.addEventListener(o,u,{capture:!0,passive:g}):i.addEventListener(o,u,!0):g!==void 0?i.addEventListener(o,u,{passive:g}):i.addEventListener(o,u,!1)}function ac(i,o,u,f,g){var v=f;if((o&1)===0&&(o&2)===0&&f!==null)t:for(;;){if(f===null)return;var S=f.tag;if(S===3||S===4){var T=f.stateNode.containerInfo;if(T===g||T.nodeType===8&&T.parentNode===g)break;if(S===4)for(S=f.return;S!==null;){var M=S.tag;if((M===3||M===4)&&(M=S.stateNode.containerInfo,M===g||M.nodeType===8&&M.parentNode===g))return;S=S.return}for(;T!==null;){if(S=Ni(T),S===null)return;if(M=S.tag,M===5||M===6){f=v=S;continue t}T=T.parentNode}}f=f.return}Dd(function(){var B=v,X=Ll(u),K=[];t:{var W=_f.get(i);if(W!==void 0){var tt=Gl,rt=i;switch(i){case"keypress":if(Go(u)===0)break t;case"keydown":case"keyup":tt=_w;break;case"focusin":rt="focus",tt=ql;break;case"focusout":rt="blur",tt=ql;break;case"beforeblur":case"afterblur":tt=ql;break;case"click":if(u.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":tt=tf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":tt=fw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":tt=Pw;break;case Af:case Sf:case bf:tt=gw;break;case Ef:tt=Rw;break;case"scroll":tt=hw;break;case"wheel":tt=Lw;break;case"copy":case"cut":case"paste":tt=vw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":tt=nf}var ot=(o&4)!==0,te=!ot&&i==="scroll",F=ot?W!==null?W+"Capture":null:W;ot=[];for(var L=B,O;L!==null;){O=L;var Y=O.stateNode;if(O.tag===5&&Y!==null&&(O=Y,F!==null&&(Y=sr(L,F),Y!=null&&ot.push(br(L,Y,O)))),te)break;L=L.return}0<ot.length&&(W=new tt(W,rt,null,u,X),K.push({event:W,listeners:ot}))}}if((o&7)===0){t:{if(W=i==="mouseover"||i==="pointerover",tt=i==="mouseout"||i==="pointerout",W&&u!==Ml&&(rt=u.relatedTarget||u.fromElement)&&(Ni(rt)||rt[Wn]))break t;if((tt||W)&&(W=X.window===X?X:(W=X.ownerDocument)?W.defaultView||W.parentWindow:window,tt?(rt=u.relatedTarget||u.toElement,tt=B,rt=rt?Ni(rt):null,rt!==null&&(te=Ii(rt),rt!==te||rt.tag!==5&&rt.tag!==6)&&(rt=null)):(tt=null,rt=B),tt!==rt)){if(ot=tf,Y="onMouseLeave",F="onMouseEnter",L="mouse",(i==="pointerout"||i==="pointerover")&&(ot=nf,Y="onPointerLeave",F="onPointerEnter",L="pointer"),te=tt==null?W:ws(tt),O=rt==null?W:ws(rt),W=new ot(Y,L+"leave",tt,u,X),W.target=te,W.relatedTarget=O,Y=null,Ni(X)===B&&(ot=new ot(F,L+"enter",rt,u,X),ot.target=O,ot.relatedTarget=te,Y=ot),te=Y,tt&&rt)e:{for(ot=tt,F=rt,L=0,O=ot;O;O=ys(O))L++;for(O=0,Y=F;Y;Y=ys(Y))O++;for(;0<L-O;)ot=ys(ot),L--;for(;0<O-L;)F=ys(F),O--;for(;L--;){if(ot===F||F!==null&&ot===F.alternate)break e;ot=ys(ot),F=ys(F)}ot=null}else ot=null;tt!==null&&Rf(K,W,tt,ot,!1),rt!==null&&te!==null&&Rf(K,te,rt,ot,!0)}}t:{if(W=B?ws(B):window,tt=W.nodeName&&W.nodeName.toLowerCase(),tt==="select"||tt==="input"&&W.type==="file")var at=Bw;else if(cf(W))if(hf)at=Uw;else{at=zw;var ft=Vw}else(tt=W.nodeName)&&tt.toLowerCase()==="input"&&(W.type==="checkbox"||W.type==="radio")&&(at=Hw);if(at&&(at=at(i,B))){uf(K,at,u,X);break t}ft&&ft(i,W,B),i==="focusout"&&(ft=W._wrapperState)&&ft.controlled&&W.type==="number"&&Li(W,"number",W.value)}switch(ft=B?ws(B):window,i){case"focusin":(cf(ft)||ft.contentEditable==="true")&&(ms=ft,ec=B,xr=null);break;case"focusout":xr=ec=ms=null;break;case"mousedown":nc=!0;break;case"contextmenu":case"mouseup":case"dragend":nc=!1,wf(K,u,X);break;case"selectionchange":if(Gw)break;case"keydown":case"keyup":wf(K,u,X)}var pt;if(Ql)t:{switch(i){case"compositionstart":var xt="onCompositionStart";break t;case"compositionend":xt="onCompositionEnd";break t;case"compositionupdate":xt="onCompositionUpdate";break t}xt=void 0}else ps?af(i,u)&&(xt="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(xt="onCompositionStart");xt&&(sf&&u.locale!=="ko"&&(ps||xt!=="onCompositionStart"?xt==="onCompositionEnd"&&ps&&(pt=Zd()):(ui=X,Wl="value"in ui?ui.value:ui.textContent,ps=!0)),ft=Jo(B,xt),0<ft.length&&(xt=new ef(xt,i,null,u,X),K.push({event:xt,listeners:ft}),pt?xt.data=pt:(pt=lf(u),pt!==null&&(xt.data=pt)))),(pt=Iw?Nw(i,u):Fw(i,u))&&(B=Jo(B,"onBeforeInput"),0<B.length&&(X=new ef("onBeforeInput","beforeinput",null,u,X),K.push({event:X,listeners:B}),X.data=pt))}Pf(K,o)})}function br(i,o,u){return{instance:i,listener:o,currentTarget:u}}function Jo(i,o){for(var u=o+"Capture",f=[];i!==null;){var g=i,v=g.stateNode;g.tag===5&&v!==null&&(g=v,v=sr(i,u),v!=null&&f.unshift(br(i,v,g)),v=sr(i,o),v!=null&&f.push(br(i,v,g))),i=i.return}return f}function ys(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Rf(i,o,u,f,g){for(var v=o._reactName,S=[];u!==null&&u!==f;){var T=u,M=T.alternate,B=T.stateNode;if(M!==null&&M===f)break;T.tag===5&&B!==null&&(T=B,g?(M=sr(u,v),M!=null&&S.unshift(br(u,M,T))):g||(M=sr(u,v),M!=null&&S.push(br(u,M,T)))),u=u.return}S.length!==0&&i.push({event:o,listeners:S})}var Yw=/\r\n?/g,Qw=/\u0000|\uFFFD/g;function Mf(i){return(typeof i=="string"?i:""+i).replace(Yw,`
`).replace(Qw,"")}function ta(i,o,u){if(o=Mf(o),Mf(i)!==o&&u)throw Error(e(425))}function ea(){}var lc=null,cc=null;function uc(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var hc=typeof setTimeout=="function"?setTimeout:void 0,Zw=typeof clearTimeout=="function"?clearTimeout:void 0,Lf=typeof Promise=="function"?Promise:void 0,Jw=typeof queueMicrotask=="function"?queueMicrotask:typeof Lf<"u"?function(i){return Lf.resolve(null).then(i).catch(tx)}:hc;function tx(i){setTimeout(function(){throw i})}function dc(i,o){var u=o,f=0;do{var g=u.nextSibling;if(i.removeChild(u),g&&g.nodeType===8)if(u=g.data,u==="/$"){if(f===0){i.removeChild(g),fr(o);return}f--}else u!=="$"&&u!=="$?"&&u!=="$!"||f++;u=g}while(u);fr(o)}function di(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function Df(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return i;o--}else u==="/$"&&o++}i=i.previousSibling}return null}var vs=Math.random().toString(36).slice(2),kn="__reactFiber$"+vs,Er="__reactProps$"+vs,Wn="__reactContainer$"+vs,fc="__reactEvents$"+vs,ex="__reactListeners$"+vs,nx="__reactHandles$"+vs;function Ni(i){var o=i[kn];if(o)return o;for(var u=i.parentNode;u;){if(o=u[Wn]||u[kn]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(i=Df(i);i!==null;){if(u=i[kn])return u;i=Df(i)}return o}i=u,u=i.parentNode}return null}function _r(i){return i=i[kn]||i[Wn],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function ws(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(e(33))}function na(i){return i[Er]||null}var pc=[],xs=-1;function fi(i){return{current:i}}function Vt(i){0>xs||(i.current=pc[xs],pc[xs]=null,xs--)}function jt(i,o){xs++,pc[xs]=i.current,i.current=o}var pi={},Se=fi(pi),Fe=fi(!1),Fi=pi;function As(i,o){var u=i.type.contextTypes;if(!u)return pi;var f=i.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===o)return f.__reactInternalMemoizedMaskedChildContext;var g={},v;for(v in u)g[v]=o[v];return f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=g),g}function Oe(i){return i=i.childContextTypes,i!=null}function ia(){Vt(Fe),Vt(Se)}function If(i,o,u){if(Se.current!==pi)throw Error(e(168));jt(Se,o),jt(Fe,u)}function Nf(i,o,u){var f=i.stateNode;if(o=o.childContextTypes,typeof f.getChildContext!="function")return u;f=f.getChildContext();for(var g in f)if(!(g in o))throw Error(e(108,ut(i)||"Unknown",g));return Z({},u,f)}function sa(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||pi,Fi=Se.current,jt(Se,i),jt(Fe,Fe.current),!0}function Ff(i,o,u){var f=i.stateNode;if(!f)throw Error(e(169));u?(i=Nf(i,o,Fi),f.__reactInternalMemoizedMergedChildContext=i,Vt(Fe),Vt(Se),jt(Se,i)):Vt(Fe),jt(Fe,u)}var Gn=null,ra=!1,mc=!1;function Of(i){Gn===null?Gn=[i]:Gn.push(i)}function ix(i){ra=!0,Of(i)}function mi(){if(!mc&&Gn!==null){mc=!0;var i=0,o=It;try{var u=Gn;for(It=1;i<u.length;i++){var f=u[i];do f=f(!0);while(f!==null)}Gn=null,ra=!1}catch(g){throw Gn!==null&&(Gn=Gn.slice(i+1)),jd(Ol,mi),g}finally{It=o,mc=!1}}return null}var Ss=[],bs=0,oa=null,aa=0,nn=[],sn=0,Oi=null,Xn=1,Kn="";function ji(i,o){Ss[bs++]=aa,Ss[bs++]=oa,oa=i,aa=o}function jf(i,o,u){nn[sn++]=Xn,nn[sn++]=Kn,nn[sn++]=Oi,Oi=i;var f=Xn;i=Kn;var g=32-yn(f)-1;f&=~(1<<g),u+=1;var v=32-yn(o)+g;if(30<v){var S=g-g%5;v=(f&(1<<S)-1).toString(32),f>>=S,g-=S,Xn=1<<32-yn(o)+g|u<<g|f,Kn=v+i}else Xn=1<<v|u<<g|f,Kn=i}function gc(i){i.return!==null&&(ji(i,1),jf(i,1,0))}function yc(i){for(;i===oa;)oa=Ss[--bs],Ss[bs]=null,aa=Ss[--bs],Ss[bs]=null;for(;i===Oi;)Oi=nn[--sn],nn[sn]=null,Kn=nn[--sn],nn[sn]=null,Xn=nn[--sn],nn[sn]=null}var Xe=null,Ke=null,zt=!1,wn=null;function Bf(i,o){var u=ln(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=i,o=i.deletions,o===null?(i.deletions=[u],i.flags|=16):o.push(u)}function Vf(i,o){switch(i.tag){case 5:var u=i.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,Xe=i,Ke=di(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,Xe=i,Ke=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=Oi!==null?{id:Xn,overflow:Kn}:null,i.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=ln(18,null,null,0),u.stateNode=o,u.return=i,i.child=u,Xe=i,Ke=null,!0):!1;default:return!1}}function vc(i){return(i.mode&1)!==0&&(i.flags&128)===0}function wc(i){if(zt){var o=Ke;if(o){var u=o;if(!Vf(i,o)){if(vc(i))throw Error(e(418));o=di(u.nextSibling);var f=Xe;o&&Vf(i,o)?Bf(f,u):(i.flags=i.flags&-4097|2,zt=!1,Xe=i)}}else{if(vc(i))throw Error(e(418));i.flags=i.flags&-4097|2,zt=!1,Xe=i}}}function zf(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Xe=i}function la(i){if(i!==Xe)return!1;if(!zt)return zf(i),zt=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!uc(i.type,i.memoizedProps)),o&&(o=Ke)){if(vc(i))throw Hf(),Error(e(418));for(;o;)Bf(i,o),o=di(o.nextSibling)}if(zf(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(e(317));t:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(o===0){Ke=di(i.nextSibling);break t}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}i=i.nextSibling}Ke=null}}else Ke=Xe?di(i.stateNode.nextSibling):null;return!0}function Hf(){for(var i=Ke;i;)i=di(i.nextSibling)}function Es(){Ke=Xe=null,zt=!1}function xc(i){wn===null?wn=[i]:wn.push(i)}var sx=R.ReactCurrentBatchConfig;function Cr(i,o,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(e(309));var f=u.stateNode}if(!f)throw Error(e(147,i));var g=f,v=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===v?o.ref:(o=function(S){var T=g.refs;S===null?delete T[v]:T[v]=S},o._stringRef=v,o)}if(typeof i!="string")throw Error(e(284));if(!u._owner)throw Error(e(290,i))}return i}function ca(i,o){throw i=Object.prototype.toString.call(o),Error(e(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function Uf(i){var o=i._init;return o(i._payload)}function $f(i){function o(F,L){if(i){var O=F.deletions;O===null?(F.deletions=[L],F.flags|=16):O.push(L)}}function u(F,L){if(!i)return null;for(;L!==null;)o(F,L),L=L.sibling;return null}function f(F,L){for(F=new Map;L!==null;)L.key!==null?F.set(L.key,L):F.set(L.index,L),L=L.sibling;return F}function g(F,L){return F=bi(F,L),F.index=0,F.sibling=null,F}function v(F,L,O){return F.index=O,i?(O=F.alternate,O!==null?(O=O.index,O<L?(F.flags|=2,L):O):(F.flags|=2,L)):(F.flags|=1048576,L)}function S(F){return i&&F.alternate===null&&(F.flags|=2),F}function T(F,L,O,Y){return L===null||L.tag!==6?(L=hu(O,F.mode,Y),L.return=F,L):(L=g(L,O),L.return=F,L)}function M(F,L,O,Y){var at=O.type;return at===I?X(F,L,O.props.children,Y,O.key):L!==null&&(L.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===q&&Uf(at)===L.type)?(Y=g(L,O.props),Y.ref=Cr(F,L,O),Y.return=F,Y):(Y=Da(O.type,O.key,O.props,null,F.mode,Y),Y.ref=Cr(F,L,O),Y.return=F,Y)}function B(F,L,O,Y){return L===null||L.tag!==4||L.stateNode.containerInfo!==O.containerInfo||L.stateNode.implementation!==O.implementation?(L=du(O,F.mode,Y),L.return=F,L):(L=g(L,O.children||[]),L.return=F,L)}function X(F,L,O,Y,at){return L===null||L.tag!==7?(L=Gi(O,F.mode,Y,at),L.return=F,L):(L=g(L,O),L.return=F,L)}function K(F,L,O){if(typeof L=="string"&&L!==""||typeof L=="number")return L=hu(""+L,F.mode,O),L.return=F,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case P:return O=Da(L.type,L.key,L.props,null,F.mode,O),O.ref=Cr(F,null,L),O.return=F,O;case D:return L=du(L,F.mode,O),L.return=F,L;case q:var Y=L._init;return K(F,Y(L._payload),O)}if(Di(L)||J(L))return L=Gi(L,F.mode,O,null),L.return=F,L;ca(F,L)}return null}function W(F,L,O,Y){var at=L!==null?L.key:null;if(typeof O=="string"&&O!==""||typeof O=="number")return at!==null?null:T(F,L,""+O,Y);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case P:return O.key===at?M(F,L,O,Y):null;case D:return O.key===at?B(F,L,O,Y):null;case q:return at=O._init,W(F,L,at(O._payload),Y)}if(Di(O)||J(O))return at!==null?null:X(F,L,O,Y,null);ca(F,O)}return null}function tt(F,L,O,Y,at){if(typeof Y=="string"&&Y!==""||typeof Y=="number")return F=F.get(O)||null,T(L,F,""+Y,at);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case P:return F=F.get(Y.key===null?O:Y.key)||null,M(L,F,Y,at);case D:return F=F.get(Y.key===null?O:Y.key)||null,B(L,F,Y,at);case q:var ft=Y._init;return tt(F,L,O,ft(Y._payload),at)}if(Di(Y)||J(Y))return F=F.get(O)||null,X(L,F,Y,at,null);ca(L,Y)}return null}function rt(F,L,O,Y){for(var at=null,ft=null,pt=L,xt=L=0,me=null;pt!==null&&xt<O.length;xt++){pt.index>xt?(me=pt,pt=null):me=pt.sibling;var Dt=W(F,pt,O[xt],Y);if(Dt===null){pt===null&&(pt=me);break}i&&pt&&Dt.alternate===null&&o(F,pt),L=v(Dt,L,xt),ft===null?at=Dt:ft.sibling=Dt,ft=Dt,pt=me}if(xt===O.length)return u(F,pt),zt&&ji(F,xt),at;if(pt===null){for(;xt<O.length;xt++)pt=K(F,O[xt],Y),pt!==null&&(L=v(pt,L,xt),ft===null?at=pt:ft.sibling=pt,ft=pt);return zt&&ji(F,xt),at}for(pt=f(F,pt);xt<O.length;xt++)me=tt(pt,F,xt,O[xt],Y),me!==null&&(i&&me.alternate!==null&&pt.delete(me.key===null?xt:me.key),L=v(me,L,xt),ft===null?at=me:ft.sibling=me,ft=me);return i&&pt.forEach(function(Ei){return o(F,Ei)}),zt&&ji(F,xt),at}function ot(F,L,O,Y){var at=J(O);if(typeof at!="function")throw Error(e(150));if(O=at.call(O),O==null)throw Error(e(151));for(var ft=at=null,pt=L,xt=L=0,me=null,Dt=O.next();pt!==null&&!Dt.done;xt++,Dt=O.next()){pt.index>xt?(me=pt,pt=null):me=pt.sibling;var Ei=W(F,pt,Dt.value,Y);if(Ei===null){pt===null&&(pt=me);break}i&&pt&&Ei.alternate===null&&o(F,pt),L=v(Ei,L,xt),ft===null?at=Ei:ft.sibling=Ei,ft=Ei,pt=me}if(Dt.done)return u(F,pt),zt&&ji(F,xt),at;if(pt===null){for(;!Dt.done;xt++,Dt=O.next())Dt=K(F,Dt.value,Y),Dt!==null&&(L=v(Dt,L,xt),ft===null?at=Dt:ft.sibling=Dt,ft=Dt);return zt&&ji(F,xt),at}for(pt=f(F,pt);!Dt.done;xt++,Dt=O.next())Dt=tt(pt,F,xt,Dt.value,Y),Dt!==null&&(i&&Dt.alternate!==null&&pt.delete(Dt.key===null?xt:Dt.key),L=v(Dt,L,xt),ft===null?at=Dt:ft.sibling=Dt,ft=Dt);return i&&pt.forEach(function(Ox){return o(F,Ox)}),zt&&ji(F,xt),at}function te(F,L,O,Y){if(typeof O=="object"&&O!==null&&O.type===I&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case P:t:{for(var at=O.key,ft=L;ft!==null;){if(ft.key===at){if(at=O.type,at===I){if(ft.tag===7){u(F,ft.sibling),L=g(ft,O.props.children),L.return=F,F=L;break t}}else if(ft.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===q&&Uf(at)===ft.type){u(F,ft.sibling),L=g(ft,O.props),L.ref=Cr(F,ft,O),L.return=F,F=L;break t}u(F,ft);break}else o(F,ft);ft=ft.sibling}O.type===I?(L=Gi(O.props.children,F.mode,Y,O.key),L.return=F,F=L):(Y=Da(O.type,O.key,O.props,null,F.mode,Y),Y.ref=Cr(F,L,O),Y.return=F,F=Y)}return S(F);case D:t:{for(ft=O.key;L!==null;){if(L.key===ft)if(L.tag===4&&L.stateNode.containerInfo===O.containerInfo&&L.stateNode.implementation===O.implementation){u(F,L.sibling),L=g(L,O.children||[]),L.return=F,F=L;break t}else{u(F,L);break}else o(F,L);L=L.sibling}L=du(O,F.mode,Y),L.return=F,F=L}return S(F);case q:return ft=O._init,te(F,L,ft(O._payload),Y)}if(Di(O))return rt(F,L,O,Y);if(J(O))return ot(F,L,O,Y);ca(F,O)}return typeof O=="string"&&O!==""||typeof O=="number"?(O=""+O,L!==null&&L.tag===6?(u(F,L.sibling),L=g(L,O),L.return=F,F=L):(u(F,L),L=hu(O,F.mode,Y),L.return=F,F=L),S(F)):u(F,L)}return te}var _s=$f(!0),Wf=$f(!1),ua=fi(null),ha=null,Cs=null,Ac=null;function Sc(){Ac=Cs=ha=null}function bc(i){var o=ua.current;Vt(ua),i._currentValue=o}function Ec(i,o,u){for(;i!==null;){var f=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),i===u)break;i=i.return}}function Ts(i,o){ha=i,Ac=Cs=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(je=!0),i.firstContext=null)}function rn(i){var o=i._currentValue;if(Ac!==i)if(i={context:i,memoizedValue:o,next:null},Cs===null){if(ha===null)throw Error(e(308));Cs=i,ha.dependencies={lanes:0,firstContext:i}}else Cs=Cs.next=i;return o}var Bi=null;function _c(i){Bi===null?Bi=[i]:Bi.push(i)}function Gf(i,o,u,f){var g=o.interleaved;return g===null?(u.next=u,_c(o)):(u.next=g.next,g.next=u),o.interleaved=u,qn(i,f)}function qn(i,o){i.lanes|=o;var u=i.alternate;for(u!==null&&(u.lanes|=o),u=i,i=i.return;i!==null;)i.childLanes|=o,u=i.alternate,u!==null&&(u.childLanes|=o),u=i,i=i.return;return u.tag===3?u.stateNode:null}var gi=!1;function Cc(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Xf(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Yn(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function yi(i,o,u){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(Lt&2)!==0){var g=f.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),f.pending=o,qn(i,u)}return g=f.interleaved,g===null?(o.next=o,_c(f)):(o.next=g.next,g.next=o),f.interleaved=o,qn(i,u)}function da(i,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var f=o.lanes;f&=i.pendingLanes,u|=f,o.lanes=u,Vl(i,u)}}function Kf(i,o){var u=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var g=null,v=null;if(u=u.firstBaseUpdate,u!==null){do{var S={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};v===null?g=v=S:v=v.next=S,u=u.next}while(u!==null);v===null?g=v=o:v=v.next=o}else g=v=o;u={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:f.shared,effects:f.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=o:i.next=o,u.lastBaseUpdate=o}function fa(i,o,u,f){var g=i.updateQueue;gi=!1;var v=g.firstBaseUpdate,S=g.lastBaseUpdate,T=g.shared.pending;if(T!==null){g.shared.pending=null;var M=T,B=M.next;M.next=null,S===null?v=B:S.next=B,S=M;var X=i.alternate;X!==null&&(X=X.updateQueue,T=X.lastBaseUpdate,T!==S&&(T===null?X.firstBaseUpdate=B:T.next=B,X.lastBaseUpdate=M))}if(v!==null){var K=g.baseState;S=0,X=B=M=null,T=v;do{var W=T.lane,tt=T.eventTime;if((f&W)===W){X!==null&&(X=X.next={eventTime:tt,lane:0,tag:T.tag,payload:T.payload,callback:T.callback,next:null});t:{var rt=i,ot=T;switch(W=o,tt=u,ot.tag){case 1:if(rt=ot.payload,typeof rt=="function"){K=rt.call(tt,K,W);break t}K=rt;break t;case 3:rt.flags=rt.flags&-65537|128;case 0:if(rt=ot.payload,W=typeof rt=="function"?rt.call(tt,K,W):rt,W==null)break t;K=Z({},K,W);break t;case 2:gi=!0}}T.callback!==null&&T.lane!==0&&(i.flags|=64,W=g.effects,W===null?g.effects=[T]:W.push(T))}else tt={eventTime:tt,lane:W,tag:T.tag,payload:T.payload,callback:T.callback,next:null},X===null?(B=X=tt,M=K):X=X.next=tt,S|=W;if(T=T.next,T===null){if(T=g.shared.pending,T===null)break;W=T,T=W.next,W.next=null,g.lastBaseUpdate=W,g.shared.pending=null}}while(!0);if(X===null&&(M=K),g.baseState=M,g.firstBaseUpdate=B,g.lastBaseUpdate=X,o=g.shared.interleaved,o!==null){g=o;do S|=g.lane,g=g.next;while(g!==o)}else v===null&&(g.shared.lanes=0);Hi|=S,i.lanes=S,i.memoizedState=K}}function qf(i,o,u){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var f=i[o],g=f.callback;if(g!==null){if(f.callback=null,f=u,typeof g!="function")throw Error(e(191,g));g.call(f)}}}var Tr={},Rn=fi(Tr),Pr=fi(Tr),kr=fi(Tr);function Vi(i){if(i===Tr)throw Error(e(174));return i}function Tc(i,o){switch(jt(kr,o),jt(Pr,i),jt(Rn,Tr),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:en(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=en(o,i)}Vt(Rn),jt(Rn,o)}function Ps(){Vt(Rn),Vt(Pr),Vt(kr)}function Yf(i){Vi(kr.current);var o=Vi(Rn.current),u=en(o,i.type);o!==u&&(jt(Pr,i),jt(Rn,u))}function Pc(i){Pr.current===i&&(Vt(Rn),Vt(Pr))}var Wt=fi(0);function pa(i){for(var o=i;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var kc=[];function Rc(){for(var i=0;i<kc.length;i++)kc[i]._workInProgressVersionPrimary=null;kc.length=0}var ma=R.ReactCurrentDispatcher,Mc=R.ReactCurrentBatchConfig,zi=0,Gt=null,ue=null,fe=null,ga=!1,Rr=!1,Mr=0,rx=0;function be(){throw Error(e(321))}function Lc(i,o){if(o===null)return!1;for(var u=0;u<o.length&&u<i.length;u++)if(!vn(i[u],o[u]))return!1;return!0}function Dc(i,o,u,f,g,v){if(zi=v,Gt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,ma.current=i===null||i.memoizedState===null?cx:ux,i=u(f,g),Rr){v=0;do{if(Rr=!1,Mr=0,25<=v)throw Error(e(301));v+=1,fe=ue=null,o.updateQueue=null,ma.current=hx,i=u(f,g)}while(Rr)}if(ma.current=wa,o=ue!==null&&ue.next!==null,zi=0,fe=ue=Gt=null,ga=!1,o)throw Error(e(300));return i}function Ic(){var i=Mr!==0;return Mr=0,i}function Mn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fe===null?Gt.memoizedState=fe=i:fe=fe.next=i,fe}function on(){if(ue===null){var i=Gt.alternate;i=i!==null?i.memoizedState:null}else i=ue.next;var o=fe===null?Gt.memoizedState:fe.next;if(o!==null)fe=o,ue=i;else{if(i===null)throw Error(e(310));ue=i,i={memoizedState:ue.memoizedState,baseState:ue.baseState,baseQueue:ue.baseQueue,queue:ue.queue,next:null},fe===null?Gt.memoizedState=fe=i:fe=fe.next=i}return fe}function Lr(i,o){return typeof o=="function"?o(i):o}function Nc(i){var o=on(),u=o.queue;if(u===null)throw Error(e(311));u.lastRenderedReducer=i;var f=ue,g=f.baseQueue,v=u.pending;if(v!==null){if(g!==null){var S=g.next;g.next=v.next,v.next=S}f.baseQueue=g=v,u.pending=null}if(g!==null){v=g.next,f=f.baseState;var T=S=null,M=null,B=v;do{var X=B.lane;if((zi&X)===X)M!==null&&(M=M.next={lane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),f=B.hasEagerState?B.eagerState:i(f,B.action);else{var K={lane:X,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null};M===null?(T=M=K,S=f):M=M.next=K,Gt.lanes|=X,Hi|=X}B=B.next}while(B!==null&&B!==v);M===null?S=f:M.next=T,vn(f,o.memoizedState)||(je=!0),o.memoizedState=f,o.baseState=S,o.baseQueue=M,u.lastRenderedState=f}if(i=u.interleaved,i!==null){g=i;do v=g.lane,Gt.lanes|=v,Hi|=v,g=g.next;while(g!==i)}else g===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function Fc(i){var o=on(),u=o.queue;if(u===null)throw Error(e(311));u.lastRenderedReducer=i;var f=u.dispatch,g=u.pending,v=o.memoizedState;if(g!==null){u.pending=null;var S=g=g.next;do v=i(v,S.action),S=S.next;while(S!==g);vn(v,o.memoizedState)||(je=!0),o.memoizedState=v,o.baseQueue===null&&(o.baseState=v),u.lastRenderedState=v}return[v,f]}function Qf(){}function Zf(i,o){var u=Gt,f=on(),g=o(),v=!vn(f.memoizedState,g);if(v&&(f.memoizedState=g,je=!0),f=f.queue,Oc(ep.bind(null,u,f,i),[i]),f.getSnapshot!==o||v||fe!==null&&fe.memoizedState.tag&1){if(u.flags|=2048,Dr(9,tp.bind(null,u,f,g,o),void 0,null),pe===null)throw Error(e(349));(zi&30)!==0||Jf(u,o,g)}return g}function Jf(i,o,u){i.flags|=16384,i={getSnapshot:o,value:u},o=Gt.updateQueue,o===null?(o={lastEffect:null,stores:null},Gt.updateQueue=o,o.stores=[i]):(u=o.stores,u===null?o.stores=[i]:u.push(i))}function tp(i,o,u,f){o.value=u,o.getSnapshot=f,np(o)&&ip(i)}function ep(i,o,u){return u(function(){np(o)&&ip(i)})}function np(i){var o=i.getSnapshot;i=i.value;try{var u=o();return!vn(i,u)}catch{return!0}}function ip(i){var o=qn(i,1);o!==null&&bn(o,i,1,-1)}function sp(i){var o=Mn();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Lr,lastRenderedState:i},o.queue=i,i=i.dispatch=lx.bind(null,Gt,i),[o.memoizedState,i]}function Dr(i,o,u,f){return i={tag:i,create:o,destroy:u,deps:f,next:null},o=Gt.updateQueue,o===null?(o={lastEffect:null,stores:null},Gt.updateQueue=o,o.lastEffect=i.next=i):(u=o.lastEffect,u===null?o.lastEffect=i.next=i:(f=u.next,u.next=i,i.next=f,o.lastEffect=i)),i}function rp(){return on().memoizedState}function ya(i,o,u,f){var g=Mn();Gt.flags|=i,g.memoizedState=Dr(1|o,u,void 0,f===void 0?null:f)}function va(i,o,u,f){var g=on();f=f===void 0?null:f;var v=void 0;if(ue!==null){var S=ue.memoizedState;if(v=S.destroy,f!==null&&Lc(f,S.deps)){g.memoizedState=Dr(o,u,v,f);return}}Gt.flags|=i,g.memoizedState=Dr(1|o,u,v,f)}function op(i,o){return ya(8390656,8,i,o)}function Oc(i,o){return va(2048,8,i,o)}function ap(i,o){return va(4,2,i,o)}function lp(i,o){return va(4,4,i,o)}function cp(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function up(i,o,u){return u=u!=null?u.concat([i]):null,va(4,4,cp.bind(null,o,i),u)}function jc(){}function hp(i,o){var u=on();o=o===void 0?null:o;var f=u.memoizedState;return f!==null&&o!==null&&Lc(o,f[1])?f[0]:(u.memoizedState=[i,o],i)}function dp(i,o){var u=on();o=o===void 0?null:o;var f=u.memoizedState;return f!==null&&o!==null&&Lc(o,f[1])?f[0]:(i=i(),u.memoizedState=[i,o],i)}function fp(i,o,u){return(zi&21)===0?(i.baseState&&(i.baseState=!1,je=!0),i.memoizedState=u):(vn(u,o)||(u=Hd(),Gt.lanes|=u,Hi|=u,i.baseState=!0),o)}function ox(i,o){var u=It;It=u!==0&&4>u?u:4,i(!0);var f=Mc.transition;Mc.transition={};try{i(!1),o()}finally{It=u,Mc.transition=f}}function pp(){return on().memoizedState}function ax(i,o,u){var f=Ai(i);if(u={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null},mp(i))gp(o,u);else if(u=Gf(i,o,u,f),u!==null){var g=Me();bn(u,i,f,g),yp(u,o,f)}}function lx(i,o,u){var f=Ai(i),g={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null};if(mp(i))gp(o,g);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=o.lastRenderedReducer,v!==null))try{var S=o.lastRenderedState,T=v(S,u);if(g.hasEagerState=!0,g.eagerState=T,vn(T,S)){var M=o.interleaved;M===null?(g.next=g,_c(o)):(g.next=M.next,M.next=g),o.interleaved=g;return}}catch{}finally{}u=Gf(i,o,g,f),u!==null&&(g=Me(),bn(u,i,f,g),yp(u,o,f))}}function mp(i){var o=i.alternate;return i===Gt||o!==null&&o===Gt}function gp(i,o){Rr=ga=!0;var u=i.pending;u===null?o.next=o:(o.next=u.next,u.next=o),i.pending=o}function yp(i,o,u){if((u&4194240)!==0){var f=o.lanes;f&=i.pendingLanes,u|=f,o.lanes=u,Vl(i,u)}}var wa={readContext:rn,useCallback:be,useContext:be,useEffect:be,useImperativeHandle:be,useInsertionEffect:be,useLayoutEffect:be,useMemo:be,useReducer:be,useRef:be,useState:be,useDebugValue:be,useDeferredValue:be,useTransition:be,useMutableSource:be,useSyncExternalStore:be,useId:be,unstable_isNewReconciler:!1},cx={readContext:rn,useCallback:function(i,o){return Mn().memoizedState=[i,o===void 0?null:o],i},useContext:rn,useEffect:op,useImperativeHandle:function(i,o,u){return u=u!=null?u.concat([i]):null,ya(4194308,4,cp.bind(null,o,i),u)},useLayoutEffect:function(i,o){return ya(4194308,4,i,o)},useInsertionEffect:function(i,o){return ya(4,2,i,o)},useMemo:function(i,o){var u=Mn();return o=o===void 0?null:o,i=i(),u.memoizedState=[i,o],i},useReducer:function(i,o,u){var f=Mn();return o=u!==void 0?u(o):o,f.memoizedState=f.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},f.queue=i,i=i.dispatch=ax.bind(null,Gt,i),[f.memoizedState,i]},useRef:function(i){var o=Mn();return i={current:i},o.memoizedState=i},useState:sp,useDebugValue:jc,useDeferredValue:function(i){return Mn().memoizedState=i},useTransition:function(){var i=sp(!1),o=i[0];return i=ox.bind(null,i[1]),Mn().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,u){var f=Gt,g=Mn();if(zt){if(u===void 0)throw Error(e(407));u=u()}else{if(u=o(),pe===null)throw Error(e(349));(zi&30)!==0||Jf(f,o,u)}g.memoizedState=u;var v={value:u,getSnapshot:o};return g.queue=v,op(ep.bind(null,f,v,i),[i]),f.flags|=2048,Dr(9,tp.bind(null,f,v,u,o),void 0,null),u},useId:function(){var i=Mn(),o=pe.identifierPrefix;if(zt){var u=Kn,f=Xn;u=(f&~(1<<32-yn(f)-1)).toString(32)+u,o=":"+o+"R"+u,u=Mr++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=rx++,o=":"+o+"r"+u.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},ux={readContext:rn,useCallback:hp,useContext:rn,useEffect:Oc,useImperativeHandle:up,useInsertionEffect:ap,useLayoutEffect:lp,useMemo:dp,useReducer:Nc,useRef:rp,useState:function(){return Nc(Lr)},useDebugValue:jc,useDeferredValue:function(i){var o=on();return fp(o,ue.memoizedState,i)},useTransition:function(){var i=Nc(Lr)[0],o=on().memoizedState;return[i,o]},useMutableSource:Qf,useSyncExternalStore:Zf,useId:pp,unstable_isNewReconciler:!1},hx={readContext:rn,useCallback:hp,useContext:rn,useEffect:Oc,useImperativeHandle:up,useInsertionEffect:ap,useLayoutEffect:lp,useMemo:dp,useReducer:Fc,useRef:rp,useState:function(){return Fc(Lr)},useDebugValue:jc,useDeferredValue:function(i){var o=on();return ue===null?o.memoizedState=i:fp(o,ue.memoizedState,i)},useTransition:function(){var i=Fc(Lr)[0],o=on().memoizedState;return[i,o]},useMutableSource:Qf,useSyncExternalStore:Zf,useId:pp,unstable_isNewReconciler:!1};function xn(i,o){if(i&&i.defaultProps){o=Z({},o),i=i.defaultProps;for(var u in i)o[u]===void 0&&(o[u]=i[u]);return o}return o}function Bc(i,o,u,f){o=i.memoizedState,u=u(f,o),u=u==null?o:Z({},o,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var xa={isMounted:function(i){return(i=i._reactInternals)?Ii(i)===i:!1},enqueueSetState:function(i,o,u){i=i._reactInternals;var f=Me(),g=Ai(i),v=Yn(f,g);v.payload=o,u!=null&&(v.callback=u),o=yi(i,v,g),o!==null&&(bn(o,i,g,f),da(o,i,g))},enqueueReplaceState:function(i,o,u){i=i._reactInternals;var f=Me(),g=Ai(i),v=Yn(f,g);v.tag=1,v.payload=o,u!=null&&(v.callback=u),o=yi(i,v,g),o!==null&&(bn(o,i,g,f),da(o,i,g))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var u=Me(),f=Ai(i),g=Yn(u,f);g.tag=2,o!=null&&(g.callback=o),o=yi(i,g,f),o!==null&&(bn(o,i,f,u),da(o,i,f))}};function vp(i,o,u,f,g,v,S){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,v,S):o.prototype&&o.prototype.isPureReactComponent?!wr(u,f)||!wr(g,v):!0}function wp(i,o,u){var f=!1,g=pi,v=o.contextType;return typeof v=="object"&&v!==null?v=rn(v):(g=Oe(o)?Fi:Se.current,f=o.contextTypes,v=(f=f!=null)?As(i,g):pi),o=new o(u,v),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=xa,i.stateNode=o,o._reactInternals=i,f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=g,i.__reactInternalMemoizedMaskedChildContext=v),o}function xp(i,o,u,f){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,f),o.state!==i&&xa.enqueueReplaceState(o,o.state,null)}function Vc(i,o,u,f){var g=i.stateNode;g.props=u,g.state=i.memoizedState,g.refs={},Cc(i);var v=o.contextType;typeof v=="object"&&v!==null?g.context=rn(v):(v=Oe(o)?Fi:Se.current,g.context=As(i,v)),g.state=i.memoizedState,v=o.getDerivedStateFromProps,typeof v=="function"&&(Bc(i,o,v,u),g.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(o=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),o!==g.state&&xa.enqueueReplaceState(g,g.state,null),fa(i,u,g,f),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308)}function ks(i,o){try{var u="",f=o;do u+=wt(f),f=f.return;while(f);var g=u}catch(v){g=`
Error generating stack: `+v.message+`
`+v.stack}return{value:i,source:o,stack:g,digest:null}}function zc(i,o,u){return{value:i,source:null,stack:u??null,digest:o??null}}function Hc(i,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var dx=typeof WeakMap=="function"?WeakMap:Map;function Ap(i,o,u){u=Yn(-1,u),u.tag=3,u.payload={element:null};var f=o.value;return u.callback=function(){Ta||(Ta=!0,iu=f),Hc(i,o)},u}function Sp(i,o,u){u=Yn(-1,u),u.tag=3;var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var g=o.value;u.payload=function(){return f(g)},u.callback=function(){Hc(i,o)}}var v=i.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(u.callback=function(){Hc(i,o),typeof f!="function"&&(wi===null?wi=new Set([this]):wi.add(this));var S=o.stack;this.componentDidCatch(o.value,{componentStack:S!==null?S:""})}),u}function bp(i,o,u){var f=i.pingCache;if(f===null){f=i.pingCache=new dx;var g=new Set;f.set(o,g)}else g=f.get(o),g===void 0&&(g=new Set,f.set(o,g));g.has(u)||(g.add(u),i=Cx.bind(null,i,o,u),o.then(i,i))}function Ep(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function _p(i,o,u,f,g){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=Yn(-1,1),o.tag=2,yi(u,o,1))),u.lanes|=1),i):(i.flags|=65536,i.lanes=g,i)}var fx=R.ReactCurrentOwner,je=!1;function Re(i,o,u,f){o.child=i===null?Wf(o,null,u,f):_s(o,i.child,u,f)}function Cp(i,o,u,f,g){u=u.render;var v=o.ref;return Ts(o,g),f=Dc(i,o,u,f,v,g),u=Ic(),i!==null&&!je?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~g,Qn(i,o,g)):(zt&&u&&gc(o),o.flags|=1,Re(i,o,f,g),o.child)}function Tp(i,o,u,f,g){if(i===null){var v=u.type;return typeof v=="function"&&!uu(v)&&v.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=v,Pp(i,o,v,f,g)):(i=Da(u.type,null,f,o,o.mode,g),i.ref=o.ref,i.return=o,o.child=i)}if(v=i.child,(i.lanes&g)===0){var S=v.memoizedProps;if(u=u.compare,u=u!==null?u:wr,u(S,f)&&i.ref===o.ref)return Qn(i,o,g)}return o.flags|=1,i=bi(v,f),i.ref=o.ref,i.return=o,o.child=i}function Pp(i,o,u,f,g){if(i!==null){var v=i.memoizedProps;if(wr(v,f)&&i.ref===o.ref)if(je=!1,o.pendingProps=f=v,(i.lanes&g)!==0)(i.flags&131072)!==0&&(je=!0);else return o.lanes=i.lanes,Qn(i,o,g)}return Uc(i,o,u,f,g)}function kp(i,o,u){var f=o.pendingProps,g=f.children,v=i!==null?i.memoizedState:null;if(f.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},jt(Ms,qe),qe|=u;else{if((u&1073741824)===0)return i=v!==null?v.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,jt(Ms,qe),qe|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=v!==null?v.baseLanes:u,jt(Ms,qe),qe|=f}else v!==null?(f=v.baseLanes|u,o.memoizedState=null):f=u,jt(Ms,qe),qe|=f;return Re(i,o,g,u),o.child}function Rp(i,o){var u=o.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function Uc(i,o,u,f,g){var v=Oe(u)?Fi:Se.current;return v=As(o,v),Ts(o,g),u=Dc(i,o,u,f,v,g),f=Ic(),i!==null&&!je?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~g,Qn(i,o,g)):(zt&&f&&gc(o),o.flags|=1,Re(i,o,u,g),o.child)}function Mp(i,o,u,f,g){if(Oe(u)){var v=!0;sa(o)}else v=!1;if(Ts(o,g),o.stateNode===null)Sa(i,o),wp(o,u,f),Vc(o,u,f,g),f=!0;else if(i===null){var S=o.stateNode,T=o.memoizedProps;S.props=T;var M=S.context,B=u.contextType;typeof B=="object"&&B!==null?B=rn(B):(B=Oe(u)?Fi:Se.current,B=As(o,B));var X=u.getDerivedStateFromProps,K=typeof X=="function"||typeof S.getSnapshotBeforeUpdate=="function";K||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(T!==f||M!==B)&&xp(o,S,f,B),gi=!1;var W=o.memoizedState;S.state=W,fa(o,f,S,g),M=o.memoizedState,T!==f||W!==M||Fe.current||gi?(typeof X=="function"&&(Bc(o,u,X,f),M=o.memoizedState),(T=gi||vp(o,u,T,f,W,M,B))?(K||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(o.flags|=4194308)):(typeof S.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=M),S.props=f,S.state=M,S.context=B,f=T):(typeof S.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{S=o.stateNode,Xf(i,o),T=o.memoizedProps,B=o.type===o.elementType?T:xn(o.type,T),S.props=B,K=o.pendingProps,W=S.context,M=u.contextType,typeof M=="object"&&M!==null?M=rn(M):(M=Oe(u)?Fi:Se.current,M=As(o,M));var tt=u.getDerivedStateFromProps;(X=typeof tt=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(T!==K||W!==M)&&xp(o,S,f,M),gi=!1,W=o.memoizedState,S.state=W,fa(o,f,S,g);var rt=o.memoizedState;T!==K||W!==rt||Fe.current||gi?(typeof tt=="function"&&(Bc(o,u,tt,f),rt=o.memoizedState),(B=gi||vp(o,u,B,f,W,rt,M)||!1)?(X||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(f,rt,M),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(f,rt,M)),typeof S.componentDidUpdate=="function"&&(o.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof S.componentDidUpdate!="function"||T===i.memoizedProps&&W===i.memoizedState||(o.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&W===i.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=rt),S.props=f,S.state=rt,S.context=M,f=B):(typeof S.componentDidUpdate!="function"||T===i.memoizedProps&&W===i.memoizedState||(o.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&W===i.memoizedState||(o.flags|=1024),f=!1)}return $c(i,o,u,f,v,g)}function $c(i,o,u,f,g,v){Rp(i,o);var S=(o.flags&128)!==0;if(!f&&!S)return g&&Ff(o,u,!1),Qn(i,o,v);f=o.stateNode,fx.current=o;var T=S&&typeof u.getDerivedStateFromError!="function"?null:f.render();return o.flags|=1,i!==null&&S?(o.child=_s(o,i.child,null,v),o.child=_s(o,null,T,v)):Re(i,o,T,v),o.memoizedState=f.state,g&&Ff(o,u,!0),o.child}function Lp(i){var o=i.stateNode;o.pendingContext?If(i,o.pendingContext,o.pendingContext!==o.context):o.context&&If(i,o.context,!1),Tc(i,o.containerInfo)}function Dp(i,o,u,f,g){return Es(),xc(g),o.flags|=256,Re(i,o,u,f),o.child}var Wc={dehydrated:null,treeContext:null,retryLane:0};function Gc(i){return{baseLanes:i,cachePool:null,transitions:null}}function Ip(i,o,u){var f=o.pendingProps,g=Wt.current,v=!1,S=(o.flags&128)!==0,T;if((T=S)||(T=i!==null&&i.memoizedState===null?!1:(g&2)!==0),T?(v=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(g|=1),jt(Wt,g&1),i===null)return wc(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(S=f.children,i=f.fallback,v?(f=o.mode,v=o.child,S={mode:"hidden",children:S},(f&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=S):v=Ia(S,f,0,null),i=Gi(i,f,u,null),v.return=o,i.return=o,v.sibling=i,o.child=v,o.child.memoizedState=Gc(u),o.memoizedState=Wc,i):Xc(o,S));if(g=i.memoizedState,g!==null&&(T=g.dehydrated,T!==null))return px(i,o,S,f,T,g,u);if(v){v=f.fallback,S=o.mode,g=i.child,T=g.sibling;var M={mode:"hidden",children:f.children};return(S&1)===0&&o.child!==g?(f=o.child,f.childLanes=0,f.pendingProps=M,o.deletions=null):(f=bi(g,M),f.subtreeFlags=g.subtreeFlags&14680064),T!==null?v=bi(T,v):(v=Gi(v,S,u,null),v.flags|=2),v.return=o,f.return=o,f.sibling=v,o.child=f,f=v,v=o.child,S=i.child.memoizedState,S=S===null?Gc(u):{baseLanes:S.baseLanes|u,cachePool:null,transitions:S.transitions},v.memoizedState=S,v.childLanes=i.childLanes&~u,o.memoizedState=Wc,f}return v=i.child,i=v.sibling,f=bi(v,{mode:"visible",children:f.children}),(o.mode&1)===0&&(f.lanes=u),f.return=o,f.sibling=null,i!==null&&(u=o.deletions,u===null?(o.deletions=[i],o.flags|=16):u.push(i)),o.child=f,o.memoizedState=null,f}function Xc(i,o){return o=Ia({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function Aa(i,o,u,f){return f!==null&&xc(f),_s(o,i.child,null,u),i=Xc(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function px(i,o,u,f,g,v,S){if(u)return o.flags&256?(o.flags&=-257,f=zc(Error(e(422))),Aa(i,o,S,f)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(v=f.fallback,g=o.mode,f=Ia({mode:"visible",children:f.children},g,0,null),v=Gi(v,g,S,null),v.flags|=2,f.return=o,v.return=o,f.sibling=v,o.child=f,(o.mode&1)!==0&&_s(o,i.child,null,S),o.child.memoizedState=Gc(S),o.memoizedState=Wc,v);if((o.mode&1)===0)return Aa(i,o,S,null);if(g.data==="$!"){if(f=g.nextSibling&&g.nextSibling.dataset,f)var T=f.dgst;return f=T,v=Error(e(419)),f=zc(v,f,void 0),Aa(i,o,S,f)}if(T=(S&i.childLanes)!==0,je||T){if(f=pe,f!==null){switch(S&-S){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(f.suspendedLanes|S))!==0?0:g,g!==0&&g!==v.retryLane&&(v.retryLane=g,qn(i,g),bn(f,i,g,-1))}return cu(),f=zc(Error(e(421))),Aa(i,o,S,f)}return g.data==="$?"?(o.flags|=128,o.child=i.child,o=Tx.bind(null,i),g._reactRetry=o,null):(i=v.treeContext,Ke=di(g.nextSibling),Xe=o,zt=!0,wn=null,i!==null&&(nn[sn++]=Xn,nn[sn++]=Kn,nn[sn++]=Oi,Xn=i.id,Kn=i.overflow,Oi=o),o=Xc(o,f.children),o.flags|=4096,o)}function Np(i,o,u){i.lanes|=o;var f=i.alternate;f!==null&&(f.lanes|=o),Ec(i.return,o,u)}function Kc(i,o,u,f,g){var v=i.memoizedState;v===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:g}:(v.isBackwards=o,v.rendering=null,v.renderingStartTime=0,v.last=f,v.tail=u,v.tailMode=g)}function Fp(i,o,u){var f=o.pendingProps,g=f.revealOrder,v=f.tail;if(Re(i,o,f.children,u),f=Wt.current,(f&2)!==0)f=f&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)t:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Np(i,u,o);else if(i.tag===19)Np(i,u,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break t;for(;i.sibling===null;){if(i.return===null||i.return===o)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}f&=1}if(jt(Wt,f),(o.mode&1)===0)o.memoizedState=null;else switch(g){case"forwards":for(u=o.child,g=null;u!==null;)i=u.alternate,i!==null&&pa(i)===null&&(g=u),u=u.sibling;u=g,u===null?(g=o.child,o.child=null):(g=u.sibling,u.sibling=null),Kc(o,!1,g,u,v);break;case"backwards":for(u=null,g=o.child,o.child=null;g!==null;){if(i=g.alternate,i!==null&&pa(i)===null){o.child=g;break}i=g.sibling,g.sibling=u,u=g,g=i}Kc(o,!0,u,null,v);break;case"together":Kc(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Sa(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function Qn(i,o,u){if(i!==null&&(o.dependencies=i.dependencies),Hi|=o.lanes,(u&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(e(153));if(o.child!==null){for(i=o.child,u=bi(i,i.pendingProps),o.child=u,u.return=o;i.sibling!==null;)i=i.sibling,u=u.sibling=bi(i,i.pendingProps),u.return=o;u.sibling=null}return o.child}function mx(i,o,u){switch(o.tag){case 3:Lp(o),Es();break;case 5:Yf(o);break;case 1:Oe(o.type)&&sa(o);break;case 4:Tc(o,o.stateNode.containerInfo);break;case 10:var f=o.type._context,g=o.memoizedProps.value;jt(ua,f._currentValue),f._currentValue=g;break;case 13:if(f=o.memoizedState,f!==null)return f.dehydrated!==null?(jt(Wt,Wt.current&1),o.flags|=128,null):(u&o.child.childLanes)!==0?Ip(i,o,u):(jt(Wt,Wt.current&1),i=Qn(i,o,u),i!==null?i.sibling:null);jt(Wt,Wt.current&1);break;case 19:if(f=(u&o.childLanes)!==0,(i.flags&128)!==0){if(f)return Fp(i,o,u);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),jt(Wt,Wt.current),f)break;return null;case 22:case 23:return o.lanes=0,kp(i,o,u)}return Qn(i,o,u)}var Op,qc,jp,Bp;Op=function(i,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},qc=function(){},jp=function(i,o,u,f){var g=i.memoizedProps;if(g!==f){i=o.stateNode,Vi(Rn.current);var v=null;switch(u){case"input":g=Nt(i,g),f=Nt(i,f),v=[];break;case"select":g=Z({},g,{value:void 0}),f=Z({},f,{value:void 0}),v=[];break;case"textarea":g=nr(i,g),f=nr(i,f),v=[];break;default:typeof g.onClick!="function"&&typeof f.onClick=="function"&&(i.onclick=ea)}kl(u,f);var S;u=null;for(B in g)if(!f.hasOwnProperty(B)&&g.hasOwnProperty(B)&&g[B]!=null)if(B==="style"){var T=g[B];for(S in T)T.hasOwnProperty(S)&&(u||(u={}),u[S]="")}else B!=="dangerouslySetInnerHTML"&&B!=="children"&&B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&B!=="autoFocus"&&(s.hasOwnProperty(B)?v||(v=[]):(v=v||[]).push(B,null));for(B in f){var M=f[B];if(T=g?.[B],f.hasOwnProperty(B)&&M!==T&&(M!=null||T!=null))if(B==="style")if(T){for(S in T)!T.hasOwnProperty(S)||M&&M.hasOwnProperty(S)||(u||(u={}),u[S]="");for(S in M)M.hasOwnProperty(S)&&T[S]!==M[S]&&(u||(u={}),u[S]=M[S])}else u||(v||(v=[]),v.push(B,u)),u=M;else B==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,T=T?T.__html:void 0,M!=null&&T!==M&&(v=v||[]).push(B,M)):B==="children"?typeof M!="string"&&typeof M!="number"||(v=v||[]).push(B,""+M):B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&(s.hasOwnProperty(B)?(M!=null&&B==="onScroll"&&Bt("scroll",i),v||T===M||(v=[])):(v=v||[]).push(B,M))}u&&(v=v||[]).push("style",u);var B=v;(o.updateQueue=B)&&(o.flags|=4)}},Bp=function(i,o,u,f){u!==f&&(o.flags|=4)};function Ir(i,o){if(!zt)switch(i.tailMode){case"hidden":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function Ee(i){var o=i.alternate!==null&&i.alternate.child===i.child,u=0,f=0;if(o)for(var g=i.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags&14680064,f|=g.flags&14680064,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=f,i.childLanes=u,o}function gx(i,o,u){var f=o.pendingProps;switch(yc(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ee(o),null;case 1:return Oe(o.type)&&ia(),Ee(o),null;case 3:return f=o.stateNode,Ps(),Vt(Fe),Vt(Se),Rc(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(i===null||i.child===null)&&(la(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,wn!==null&&(ou(wn),wn=null))),qc(i,o),Ee(o),null;case 5:Pc(o);var g=Vi(kr.current);if(u=o.type,i!==null&&o.stateNode!=null)jp(i,o,u,f,g),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!f){if(o.stateNode===null)throw Error(e(166));return Ee(o),null}if(i=Vi(Rn.current),la(o)){f=o.stateNode,u=o.type;var v=o.memoizedProps;switch(f[kn]=o,f[Er]=v,i=(o.mode&1)!==0,u){case"dialog":Bt("cancel",f),Bt("close",f);break;case"iframe":case"object":case"embed":Bt("load",f);break;case"video":case"audio":for(g=0;g<Ar.length;g++)Bt(Ar[g],f);break;case"source":Bt("error",f);break;case"img":case"image":case"link":Bt("error",f),Bt("load",f);break;case"details":Bt("toggle",f);break;case"input":qt(f,v),Bt("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!v.multiple},Bt("invalid",f);break;case"textarea":Ro(f,v),Bt("invalid",f)}kl(u,v),g=null;for(var S in v)if(v.hasOwnProperty(S)){var T=v[S];S==="children"?typeof T=="string"?f.textContent!==T&&(v.suppressHydrationWarning!==!0&&ta(f.textContent,T,i),g=["children",T]):typeof T=="number"&&f.textContent!==""+T&&(v.suppressHydrationWarning!==!0&&ta(f.textContent,T,i),g=["children",""+T]):s.hasOwnProperty(S)&&T!=null&&S==="onScroll"&&Bt("scroll",f)}switch(u){case"input":Ne(f),ri(f,v,!0);break;case"textarea":Ne(f),Lo(f);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(f.onclick=ea)}f=g,o.updateQueue=f,f!==null&&(o.flags|=4)}else{S=g.nodeType===9?g:g.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Do(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=S.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof f.is=="string"?i=S.createElement(u,{is:f.is}):(i=S.createElement(u),u==="select"&&(S=i,f.multiple?S.multiple=!0:f.size&&(S.size=f.size))):i=S.createElementNS(i,u),i[kn]=o,i[Er]=f,Op(i,o,!1,!1),o.stateNode=i;t:{switch(S=Rl(u,f),u){case"dialog":Bt("cancel",i),Bt("close",i),g=f;break;case"iframe":case"object":case"embed":Bt("load",i),g=f;break;case"video":case"audio":for(g=0;g<Ar.length;g++)Bt(Ar[g],i);g=f;break;case"source":Bt("error",i),g=f;break;case"img":case"image":case"link":Bt("error",i),Bt("load",i),g=f;break;case"details":Bt("toggle",i),g=f;break;case"input":qt(i,f),g=Nt(i,f),Bt("invalid",i);break;case"option":g=f;break;case"select":i._wrapperState={wasMultiple:!!f.multiple},g=Z({},f,{value:void 0}),Bt("invalid",i);break;case"textarea":Ro(i,f),g=nr(i,f),Bt("invalid",i);break;default:g=f}kl(u,g),T=g;for(v in T)if(T.hasOwnProperty(v)){var M=T[v];v==="style"?Td(i,M):v==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,M!=null&&gn(i,M)):v==="children"?typeof M=="string"?(u!=="textarea"||M!=="")&&$n(i,M):typeof M=="number"&&$n(i,""+M):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(s.hasOwnProperty(v)?M!=null&&v==="onScroll"&&Bt("scroll",i):M!=null&&_(i,v,M,S))}switch(u){case"input":Ne(i),ri(i,f,!1);break;case"textarea":Ne(i),Lo(i);break;case"option":f.value!=null&&i.setAttribute("value",""+Et(f.value));break;case"select":i.multiple=!!f.multiple,v=f.value,v!=null?pn(i,!!f.multiple,v,!1):f.defaultValue!=null&&pn(i,!!f.multiple,f.defaultValue,!0);break;default:typeof g.onClick=="function"&&(i.onclick=ea)}switch(u){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break t;case"img":f=!0;break t;default:f=!1}}f&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Ee(o),null;case 6:if(i&&o.stateNode!=null)Bp(i,o,i.memoizedProps,f);else{if(typeof f!="string"&&o.stateNode===null)throw Error(e(166));if(u=Vi(kr.current),Vi(Rn.current),la(o)){if(f=o.stateNode,u=o.memoizedProps,f[kn]=o,(v=f.nodeValue!==u)&&(i=Xe,i!==null))switch(i.tag){case 3:ta(f.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&ta(f.nodeValue,u,(i.mode&1)!==0)}v&&(o.flags|=4)}else f=(u.nodeType===9?u:u.ownerDocument).createTextNode(f),f[kn]=o,o.stateNode=f}return Ee(o),null;case 13:if(Vt(Wt),f=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(zt&&Ke!==null&&(o.mode&1)!==0&&(o.flags&128)===0)Hf(),Es(),o.flags|=98560,v=!1;else if(v=la(o),f!==null&&f.dehydrated!==null){if(i===null){if(!v)throw Error(e(318));if(v=o.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(e(317));v[kn]=o}else Es(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Ee(o),v=!1}else wn!==null&&(ou(wn),wn=null),v=!0;if(!v)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=u,o):(f=f!==null,f!==(i!==null&&i.memoizedState!==null)&&f&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(Wt.current&1)!==0?he===0&&(he=3):cu())),o.updateQueue!==null&&(o.flags|=4),Ee(o),null);case 4:return Ps(),qc(i,o),i===null&&Sr(o.stateNode.containerInfo),Ee(o),null;case 10:return bc(o.type._context),Ee(o),null;case 17:return Oe(o.type)&&ia(),Ee(o),null;case 19:if(Vt(Wt),v=o.memoizedState,v===null)return Ee(o),null;if(f=(o.flags&128)!==0,S=v.rendering,S===null)if(f)Ir(v,!1);else{if(he!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(S=pa(i),S!==null){for(o.flags|=128,Ir(v,!1),f=S.updateQueue,f!==null&&(o.updateQueue=f,o.flags|=4),o.subtreeFlags=0,f=u,u=o.child;u!==null;)v=u,i=f,v.flags&=14680066,S=v.alternate,S===null?(v.childLanes=0,v.lanes=i,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=S.childLanes,v.lanes=S.lanes,v.child=S.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=S.memoizedProps,v.memoizedState=S.memoizedState,v.updateQueue=S.updateQueue,v.type=S.type,i=S.dependencies,v.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return jt(Wt,Wt.current&1|2),o.child}i=i.sibling}v.tail!==null&&Jt()>Ls&&(o.flags|=128,f=!0,Ir(v,!1),o.lanes=4194304)}else{if(!f)if(i=pa(S),i!==null){if(o.flags|=128,f=!0,u=i.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),Ir(v,!0),v.tail===null&&v.tailMode==="hidden"&&!S.alternate&&!zt)return Ee(o),null}else 2*Jt()-v.renderingStartTime>Ls&&u!==1073741824&&(o.flags|=128,f=!0,Ir(v,!1),o.lanes=4194304);v.isBackwards?(S.sibling=o.child,o.child=S):(u=v.last,u!==null?u.sibling=S:o.child=S,v.last=S)}return v.tail!==null?(o=v.tail,v.rendering=o,v.tail=o.sibling,v.renderingStartTime=Jt(),o.sibling=null,u=Wt.current,jt(Wt,f?u&1|2:u&1),o):(Ee(o),null);case 22:case 23:return lu(),f=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==f&&(o.flags|=8192),f&&(o.mode&1)!==0?(qe&1073741824)!==0&&(Ee(o),o.subtreeFlags&6&&(o.flags|=8192)):Ee(o),null;case 24:return null;case 25:return null}throw Error(e(156,o.tag))}function yx(i,o){switch(yc(o),o.tag){case 1:return Oe(o.type)&&ia(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Ps(),Vt(Fe),Vt(Se),Rc(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return Pc(o),null;case 13:if(Vt(Wt),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(e(340));Es()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return Vt(Wt),null;case 4:return Ps(),null;case 10:return bc(o.type._context),null;case 22:case 23:return lu(),null;case 24:return null;default:return null}}var ba=!1,_e=!1,vx=typeof WeakSet=="function"?WeakSet:Set,it=null;function Rs(i,o){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(f){Yt(i,o,f)}else u.current=null}function Yc(i,o,u){try{u()}catch(f){Yt(i,o,f)}}var Vp=!1;function wx(i,o){if(lc=Uo,i=vf(),tc(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else t:{u=(u=i.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var g=f.anchorOffset,v=f.focusNode;f=f.focusOffset;try{u.nodeType,v.nodeType}catch{u=null;break t}var S=0,T=-1,M=-1,B=0,X=0,K=i,W=null;e:for(;;){for(var tt;K!==u||g!==0&&K.nodeType!==3||(T=S+g),K!==v||f!==0&&K.nodeType!==3||(M=S+f),K.nodeType===3&&(S+=K.nodeValue.length),(tt=K.firstChild)!==null;)W=K,K=tt;for(;;){if(K===i)break e;if(W===u&&++B===g&&(T=S),W===v&&++X===f&&(M=S),(tt=K.nextSibling)!==null)break;K=W,W=K.parentNode}K=tt}u=T===-1||M===-1?null:{start:T,end:M}}else u=null}u=u||{start:0,end:0}}else u=null;for(cc={focusedElem:i,selectionRange:u},Uo=!1,it=o;it!==null;)if(o=it,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,it=i;else for(;it!==null;){o=it;try{var rt=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(rt!==null){var ot=rt.memoizedProps,te=rt.memoizedState,F=o.stateNode,L=F.getSnapshotBeforeUpdate(o.elementType===o.type?ot:xn(o.type,ot),te);F.__reactInternalSnapshotBeforeUpdate=L}break;case 3:var O=o.stateNode.containerInfo;O.nodeType===1?O.textContent="":O.nodeType===9&&O.documentElement&&O.removeChild(O.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(e(163))}}catch(Y){Yt(o,o.return,Y)}if(i=o.sibling,i!==null){i.return=o.return,it=i;break}it=o.return}return rt=Vp,Vp=!1,rt}function Nr(i,o,u){var f=o.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var g=f=f.next;do{if((g.tag&i)===i){var v=g.destroy;g.destroy=void 0,v!==void 0&&Yc(o,u,v)}g=g.next}while(g!==f)}}function Ea(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&i)===i){var f=u.create;u.destroy=f()}u=u.next}while(u!==o)}}function Qc(i){var o=i.ref;if(o!==null){var u=i.stateNode;switch(i.tag){case 5:i=u;break;default:i=u}typeof o=="function"?o(i):o.current=i}}function zp(i){var o=i.alternate;o!==null&&(i.alternate=null,zp(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[kn],delete o[Er],delete o[fc],delete o[ex],delete o[nx])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Hp(i){return i.tag===5||i.tag===3||i.tag===4}function Up(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||Hp(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Zc(i,o,u){var f=i.tag;if(f===5||f===6)i=i.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(i,o):u.insertBefore(i,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(i,u)):(o=u,o.appendChild(i)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=ea));else if(f!==4&&(i=i.child,i!==null))for(Zc(i,o,u),i=i.sibling;i!==null;)Zc(i,o,u),i=i.sibling}function Jc(i,o,u){var f=i.tag;if(f===5||f===6)i=i.stateNode,o?u.insertBefore(i,o):u.appendChild(i);else if(f!==4&&(i=i.child,i!==null))for(Jc(i,o,u),i=i.sibling;i!==null;)Jc(i,o,u),i=i.sibling}var ve=null,An=!1;function vi(i,o,u){for(u=u.child;u!==null;)$p(i,o,u),u=u.sibling}function $p(i,o,u){if(Pn&&typeof Pn.onCommitFiberUnmount=="function")try{Pn.onCommitFiberUnmount(Oo,u)}catch{}switch(u.tag){case 5:_e||Rs(u,o);case 6:var f=ve,g=An;ve=null,vi(i,o,u),ve=f,An=g,ve!==null&&(An?(i=ve,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):ve.removeChild(u.stateNode));break;case 18:ve!==null&&(An?(i=ve,u=u.stateNode,i.nodeType===8?dc(i.parentNode,u):i.nodeType===1&&dc(i,u),fr(i)):dc(ve,u.stateNode));break;case 4:f=ve,g=An,ve=u.stateNode.containerInfo,An=!0,vi(i,o,u),ve=f,An=g;break;case 0:case 11:case 14:case 15:if(!_e&&(f=u.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){g=f=f.next;do{var v=g,S=v.destroy;v=v.tag,S!==void 0&&((v&2)!==0||(v&4)!==0)&&Yc(u,o,S),g=g.next}while(g!==f)}vi(i,o,u);break;case 1:if(!_e&&(Rs(u,o),f=u.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=u.memoizedProps,f.state=u.memoizedState,f.componentWillUnmount()}catch(T){Yt(u,o,T)}vi(i,o,u);break;case 21:vi(i,o,u);break;case 22:u.mode&1?(_e=(f=_e)||u.memoizedState!==null,vi(i,o,u),_e=f):vi(i,o,u);break;default:vi(i,o,u)}}function Wp(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new vx),o.forEach(function(f){var g=Px.bind(null,i,f);u.has(f)||(u.add(f),f.then(g,g))})}}function Sn(i,o){var u=o.deletions;if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];try{var v=i,S=o,T=S;t:for(;T!==null;){switch(T.tag){case 5:ve=T.stateNode,An=!1;break t;case 3:ve=T.stateNode.containerInfo,An=!0;break t;case 4:ve=T.stateNode.containerInfo,An=!0;break t}T=T.return}if(ve===null)throw Error(e(160));$p(v,S,g),ve=null,An=!1;var M=g.alternate;M!==null&&(M.return=null),g.return=null}catch(B){Yt(g,o,B)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Gp(o,i),o=o.sibling}function Gp(i,o){var u=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Sn(o,i),Ln(i),f&4){try{Nr(3,i,i.return),Ea(3,i)}catch(ot){Yt(i,i.return,ot)}try{Nr(5,i,i.return)}catch(ot){Yt(i,i.return,ot)}}break;case 1:Sn(o,i),Ln(i),f&512&&u!==null&&Rs(u,u.return);break;case 5:if(Sn(o,i),Ln(i),f&512&&u!==null&&Rs(u,u.return),i.flags&32){var g=i.stateNode;try{$n(g,"")}catch(ot){Yt(i,i.return,ot)}}if(f&4&&(g=i.stateNode,g!=null)){var v=i.memoizedProps,S=u!==null?u.memoizedProps:v,T=i.type,M=i.updateQueue;if(i.updateQueue=null,M!==null)try{T==="input"&&v.type==="radio"&&v.name!=null&&Zt(g,v),Rl(T,S);var B=Rl(T,v);for(S=0;S<M.length;S+=2){var X=M[S],K=M[S+1];X==="style"?Td(g,K):X==="dangerouslySetInnerHTML"?gn(g,K):X==="children"?$n(g,K):_(g,X,K,B)}switch(T){case"input":Tn(g,v);break;case"textarea":Mo(g,v);break;case"select":var W=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!v.multiple;var tt=v.value;tt!=null?pn(g,!!v.multiple,tt,!1):W!==!!v.multiple&&(v.defaultValue!=null?pn(g,!!v.multiple,v.defaultValue,!0):pn(g,!!v.multiple,v.multiple?[]:"",!1))}g[Er]=v}catch(ot){Yt(i,i.return,ot)}}break;case 6:if(Sn(o,i),Ln(i),f&4){if(i.stateNode===null)throw Error(e(162));g=i.stateNode,v=i.memoizedProps;try{g.nodeValue=v}catch(ot){Yt(i,i.return,ot)}}break;case 3:if(Sn(o,i),Ln(i),f&4&&u!==null&&u.memoizedState.isDehydrated)try{fr(o.containerInfo)}catch(ot){Yt(i,i.return,ot)}break;case 4:Sn(o,i),Ln(i);break;case 13:Sn(o,i),Ln(i),g=i.child,g.flags&8192&&(v=g.memoizedState!==null,g.stateNode.isHidden=v,!v||g.alternate!==null&&g.alternate.memoizedState!==null||(nu=Jt())),f&4&&Wp(i);break;case 22:if(X=u!==null&&u.memoizedState!==null,i.mode&1?(_e=(B=_e)||X,Sn(o,i),_e=B):Sn(o,i),Ln(i),f&8192){if(B=i.memoizedState!==null,(i.stateNode.isHidden=B)&&!X&&(i.mode&1)!==0)for(it=i,X=i.child;X!==null;){for(K=it=X;it!==null;){switch(W=it,tt=W.child,W.tag){case 0:case 11:case 14:case 15:Nr(4,W,W.return);break;case 1:Rs(W,W.return);var rt=W.stateNode;if(typeof rt.componentWillUnmount=="function"){f=W,u=W.return;try{o=f,rt.props=o.memoizedProps,rt.state=o.memoizedState,rt.componentWillUnmount()}catch(ot){Yt(f,u,ot)}}break;case 5:Rs(W,W.return);break;case 22:if(W.memoizedState!==null){qp(K);continue}}tt!==null?(tt.return=W,it=tt):qp(K)}X=X.sibling}t:for(X=null,K=i;;){if(K.tag===5){if(X===null){X=K;try{g=K.stateNode,B?(v=g.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(T=K.stateNode,M=K.memoizedProps.style,S=M!=null&&M.hasOwnProperty("display")?M.display:null,T.style.display=Cd("display",S))}catch(ot){Yt(i,i.return,ot)}}}else if(K.tag===6){if(X===null)try{K.stateNode.nodeValue=B?"":K.memoizedProps}catch(ot){Yt(i,i.return,ot)}}else if((K.tag!==22&&K.tag!==23||K.memoizedState===null||K===i)&&K.child!==null){K.child.return=K,K=K.child;continue}if(K===i)break t;for(;K.sibling===null;){if(K.return===null||K.return===i)break t;X===K&&(X=null),K=K.return}X===K&&(X=null),K.sibling.return=K.return,K=K.sibling}}break;case 19:Sn(o,i),Ln(i),f&4&&Wp(i);break;case 21:break;default:Sn(o,i),Ln(i)}}function Ln(i){var o=i.flags;if(o&2){try{t:{for(var u=i.return;u!==null;){if(Hp(u)){var f=u;break t}u=u.return}throw Error(e(160))}switch(f.tag){case 5:var g=f.stateNode;f.flags&32&&($n(g,""),f.flags&=-33);var v=Up(i);Jc(i,v,g);break;case 3:case 4:var S=f.stateNode.containerInfo,T=Up(i);Zc(i,T,S);break;default:throw Error(e(161))}}catch(M){Yt(i,i.return,M)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function xx(i,o,u){it=i,Xp(i)}function Xp(i,o,u){for(var f=(i.mode&1)!==0;it!==null;){var g=it,v=g.child;if(g.tag===22&&f){var S=g.memoizedState!==null||ba;if(!S){var T=g.alternate,M=T!==null&&T.memoizedState!==null||_e;T=ba;var B=_e;if(ba=S,(_e=M)&&!B)for(it=g;it!==null;)S=it,M=S.child,S.tag===22&&S.memoizedState!==null?Yp(g):M!==null?(M.return=S,it=M):Yp(g);for(;v!==null;)it=v,Xp(v),v=v.sibling;it=g,ba=T,_e=B}Kp(i)}else(g.subtreeFlags&8772)!==0&&v!==null?(v.return=g,it=v):Kp(i)}}function Kp(i){for(;it!==null;){var o=it;if((o.flags&8772)!==0){var u=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:_e||Ea(5,o);break;case 1:var f=o.stateNode;if(o.flags&4&&!_e)if(u===null)f.componentDidMount();else{var g=o.elementType===o.type?u.memoizedProps:xn(o.type,u.memoizedProps);f.componentDidUpdate(g,u.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var v=o.updateQueue;v!==null&&qf(o,v,f);break;case 3:var S=o.updateQueue;if(S!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}qf(o,S,u)}break;case 5:var T=o.stateNode;if(u===null&&o.flags&4){u=T;var M=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":M.autoFocus&&u.focus();break;case"img":M.src&&(u.src=M.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var B=o.alternate;if(B!==null){var X=B.memoizedState;if(X!==null){var K=X.dehydrated;K!==null&&fr(K)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(e(163))}_e||o.flags&512&&Qc(o)}catch(W){Yt(o,o.return,W)}}if(o===i){it=null;break}if(u=o.sibling,u!==null){u.return=o.return,it=u;break}it=o.return}}function qp(i){for(;it!==null;){var o=it;if(o===i){it=null;break}var u=o.sibling;if(u!==null){u.return=o.return,it=u;break}it=o.return}}function Yp(i){for(;it!==null;){var o=it;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{Ea(4,o)}catch(M){Yt(o,u,M)}break;case 1:var f=o.stateNode;if(typeof f.componentDidMount=="function"){var g=o.return;try{f.componentDidMount()}catch(M){Yt(o,g,M)}}var v=o.return;try{Qc(o)}catch(M){Yt(o,v,M)}break;case 5:var S=o.return;try{Qc(o)}catch(M){Yt(o,S,M)}}}catch(M){Yt(o,o.return,M)}if(o===i){it=null;break}var T=o.sibling;if(T!==null){T.return=o.return,it=T;break}it=o.return}}var Ax=Math.ceil,_a=R.ReactCurrentDispatcher,tu=R.ReactCurrentOwner,an=R.ReactCurrentBatchConfig,Lt=0,pe=null,oe=null,we=0,qe=0,Ms=fi(0),he=0,Fr=null,Hi=0,Ca=0,eu=0,Or=null,Be=null,nu=0,Ls=1/0,Zn=null,Ta=!1,iu=null,wi=null,Pa=!1,xi=null,ka=0,jr=0,su=null,Ra=-1,Ma=0;function Me(){return(Lt&6)!==0?Jt():Ra!==-1?Ra:Ra=Jt()}function Ai(i){return(i.mode&1)===0?1:(Lt&2)!==0&&we!==0?we&-we:sx.transition!==null?(Ma===0&&(Ma=Hd()),Ma):(i=It,i!==0||(i=window.event,i=i===void 0?16:Qd(i.type)),i)}function bn(i,o,u,f){if(50<jr)throw jr=0,su=null,Error(e(185));lr(i,u,f),((Lt&2)===0||i!==pe)&&(i===pe&&((Lt&2)===0&&(Ca|=u),he===4&&Si(i,we)),Ve(i,f),u===1&&Lt===0&&(o.mode&1)===0&&(Ls=Jt()+500,ra&&mi()))}function Ve(i,o){var u=i.callbackNode;sw(i,o);var f=Vo(i,i===pe?we:0);if(f===0)u!==null&&Bd(u),i.callbackNode=null,i.callbackPriority=0;else if(o=f&-f,i.callbackPriority!==o){if(u!=null&&Bd(u),o===1)i.tag===0?ix(Zp.bind(null,i)):Of(Zp.bind(null,i)),Jw(function(){(Lt&6)===0&&mi()}),u=null;else{switch(Ud(f)){case 1:u=Ol;break;case 4:u=Vd;break;case 16:u=Fo;break;case 536870912:u=zd;break;default:u=Fo}u=om(u,Qp.bind(null,i))}i.callbackPriority=o,i.callbackNode=u}}function Qp(i,o){if(Ra=-1,Ma=0,(Lt&6)!==0)throw Error(e(327));var u=i.callbackNode;if(Ds()&&i.callbackNode!==u)return null;var f=Vo(i,i===pe?we:0);if(f===0)return null;if((f&30)!==0||(f&i.expiredLanes)!==0||o)o=La(i,f);else{o=f;var g=Lt;Lt|=2;var v=tm();(pe!==i||we!==o)&&(Zn=null,Ls=Jt()+500,$i(i,o));do try{Ex();break}catch(T){Jp(i,T)}while(!0);Sc(),_a.current=v,Lt=g,oe!==null?o=0:(pe=null,we=0,o=he)}if(o!==0){if(o===2&&(g=jl(i),g!==0&&(f=g,o=ru(i,g))),o===1)throw u=Fr,$i(i,0),Si(i,f),Ve(i,Jt()),u;if(o===6)Si(i,f);else{if(g=i.current.alternate,(f&30)===0&&!Sx(g)&&(o=La(i,f),o===2&&(v=jl(i),v!==0&&(f=v,o=ru(i,v))),o===1))throw u=Fr,$i(i,0),Si(i,f),Ve(i,Jt()),u;switch(i.finishedWork=g,i.finishedLanes=f,o){case 0:case 1:throw Error(e(345));case 2:Wi(i,Be,Zn);break;case 3:if(Si(i,f),(f&130023424)===f&&(o=nu+500-Jt(),10<o)){if(Vo(i,0)!==0)break;if(g=i.suspendedLanes,(g&f)!==f){Me(),i.pingedLanes|=i.suspendedLanes&g;break}i.timeoutHandle=hc(Wi.bind(null,i,Be,Zn),o);break}Wi(i,Be,Zn);break;case 4:if(Si(i,f),(f&4194240)===f)break;for(o=i.eventTimes,g=-1;0<f;){var S=31-yn(f);v=1<<S,S=o[S],S>g&&(g=S),f&=~v}if(f=g,f=Jt()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*Ax(f/1960))-f,10<f){i.timeoutHandle=hc(Wi.bind(null,i,Be,Zn),f);break}Wi(i,Be,Zn);break;case 5:Wi(i,Be,Zn);break;default:throw Error(e(329))}}}return Ve(i,Jt()),i.callbackNode===u?Qp.bind(null,i):null}function ru(i,o){var u=Or;return i.current.memoizedState.isDehydrated&&($i(i,o).flags|=256),i=La(i,o),i!==2&&(o=Be,Be=u,o!==null&&ou(o)),i}function ou(i){Be===null?Be=i:Be.push.apply(Be,i)}function Sx(i){for(var o=i;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var f=0;f<u.length;f++){var g=u[f],v=g.getSnapshot;g=g.value;try{if(!vn(v(),g))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Si(i,o){for(o&=~eu,o&=~Ca,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var u=31-yn(o),f=1<<u;i[u]=-1,o&=~f}}function Zp(i){if((Lt&6)!==0)throw Error(e(327));Ds();var o=Vo(i,0);if((o&1)===0)return Ve(i,Jt()),null;var u=La(i,o);if(i.tag!==0&&u===2){var f=jl(i);f!==0&&(o=f,u=ru(i,f))}if(u===1)throw u=Fr,$i(i,0),Si(i,o),Ve(i,Jt()),u;if(u===6)throw Error(e(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,Wi(i,Be,Zn),Ve(i,Jt()),null}function au(i,o){var u=Lt;Lt|=1;try{return i(o)}finally{Lt=u,Lt===0&&(Ls=Jt()+500,ra&&mi())}}function Ui(i){xi!==null&&xi.tag===0&&(Lt&6)===0&&Ds();var o=Lt;Lt|=1;var u=an.transition,f=It;try{if(an.transition=null,It=1,i)return i()}finally{It=f,an.transition=u,Lt=o,(Lt&6)===0&&mi()}}function lu(){qe=Ms.current,Vt(Ms)}function $i(i,o){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,Zw(u)),oe!==null)for(u=oe.return;u!==null;){var f=u;switch(yc(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&ia();break;case 3:Ps(),Vt(Fe),Vt(Se),Rc();break;case 5:Pc(f);break;case 4:Ps();break;case 13:Vt(Wt);break;case 19:Vt(Wt);break;case 10:bc(f.type._context);break;case 22:case 23:lu()}u=u.return}if(pe=i,oe=i=bi(i.current,null),we=qe=o,he=0,Fr=null,eu=Ca=Hi=0,Be=Or=null,Bi!==null){for(o=0;o<Bi.length;o++)if(u=Bi[o],f=u.interleaved,f!==null){u.interleaved=null;var g=f.next,v=u.pending;if(v!==null){var S=v.next;v.next=g,f.next=S}u.pending=f}Bi=null}return i}function Jp(i,o){do{var u=oe;try{if(Sc(),ma.current=wa,ga){for(var f=Gt.memoizedState;f!==null;){var g=f.queue;g!==null&&(g.pending=null),f=f.next}ga=!1}if(zi=0,fe=ue=Gt=null,Rr=!1,Mr=0,tu.current=null,u===null||u.return===null){he=1,Fr=o,oe=null;break}t:{var v=i,S=u.return,T=u,M=o;if(o=we,T.flags|=32768,M!==null&&typeof M=="object"&&typeof M.then=="function"){var B=M,X=T,K=X.tag;if((X.mode&1)===0&&(K===0||K===11||K===15)){var W=X.alternate;W?(X.updateQueue=W.updateQueue,X.memoizedState=W.memoizedState,X.lanes=W.lanes):(X.updateQueue=null,X.memoizedState=null)}var tt=Ep(S);if(tt!==null){tt.flags&=-257,_p(tt,S,T,v,o),tt.mode&1&&bp(v,B,o),o=tt,M=B;var rt=o.updateQueue;if(rt===null){var ot=new Set;ot.add(M),o.updateQueue=ot}else rt.add(M);break t}else{if((o&1)===0){bp(v,B,o),cu();break t}M=Error(e(426))}}else if(zt&&T.mode&1){var te=Ep(S);if(te!==null){(te.flags&65536)===0&&(te.flags|=256),_p(te,S,T,v,o),xc(ks(M,T));break t}}v=M=ks(M,T),he!==4&&(he=2),Or===null?Or=[v]:Or.push(v),v=S;do{switch(v.tag){case 3:v.flags|=65536,o&=-o,v.lanes|=o;var F=Ap(v,M,o);Kf(v,F);break t;case 1:T=M;var L=v.type,O=v.stateNode;if((v.flags&128)===0&&(typeof L.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(wi===null||!wi.has(O)))){v.flags|=65536,o&=-o,v.lanes|=o;var Y=Sp(v,T,o);Kf(v,Y);break t}}v=v.return}while(v!==null)}nm(u)}catch(at){o=at,oe===u&&u!==null&&(oe=u=u.return);continue}break}while(!0)}function tm(){var i=_a.current;return _a.current=wa,i===null?wa:i}function cu(){(he===0||he===3||he===2)&&(he=4),pe===null||(Hi&268435455)===0&&(Ca&268435455)===0||Si(pe,we)}function La(i,o){var u=Lt;Lt|=2;var f=tm();(pe!==i||we!==o)&&(Zn=null,$i(i,o));do try{bx();break}catch(g){Jp(i,g)}while(!0);if(Sc(),Lt=u,_a.current=f,oe!==null)throw Error(e(261));return pe=null,we=0,he}function bx(){for(;oe!==null;)em(oe)}function Ex(){for(;oe!==null&&!qv();)em(oe)}function em(i){var o=rm(i.alternate,i,qe);i.memoizedProps=i.pendingProps,o===null?nm(i):oe=o,tu.current=null}function nm(i){var o=i;do{var u=o.alternate;if(i=o.return,(o.flags&32768)===0){if(u=gx(u,o,qe),u!==null){oe=u;return}}else{if(u=yx(u,o),u!==null){u.flags&=32767,oe=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{he=6,oe=null;return}}if(o=o.sibling,o!==null){oe=o;return}oe=o=i}while(o!==null);he===0&&(he=5)}function Wi(i,o,u){var f=It,g=an.transition;try{an.transition=null,It=1,_x(i,o,u,f)}finally{an.transition=g,It=f}return null}function _x(i,o,u,f){do Ds();while(xi!==null);if((Lt&6)!==0)throw Error(e(327));u=i.finishedWork;var g=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(e(177));i.callbackNode=null,i.callbackPriority=0;var v=u.lanes|u.childLanes;if(rw(i,v),i===pe&&(oe=pe=null,we=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Pa||(Pa=!0,om(Fo,function(){return Ds(),null})),v=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||v){v=an.transition,an.transition=null;var S=It;It=1;var T=Lt;Lt|=4,tu.current=null,wx(i,u),Gp(u,i),Ww(cc),Uo=!!lc,cc=lc=null,i.current=u,xx(u),Yv(),Lt=T,It=S,an.transition=v}else i.current=u;if(Pa&&(Pa=!1,xi=i,ka=g),v=i.pendingLanes,v===0&&(wi=null),Jv(u.stateNode),Ve(i,Jt()),o!==null)for(f=i.onRecoverableError,u=0;u<o.length;u++)g=o[u],f(g.value,{componentStack:g.stack,digest:g.digest});if(Ta)throw Ta=!1,i=iu,iu=null,i;return(ka&1)!==0&&i.tag!==0&&Ds(),v=i.pendingLanes,(v&1)!==0?i===su?jr++:(jr=0,su=i):jr=0,mi(),null}function Ds(){if(xi!==null){var i=Ud(ka),o=an.transition,u=It;try{if(an.transition=null,It=16>i?16:i,xi===null)var f=!1;else{if(i=xi,xi=null,ka=0,(Lt&6)!==0)throw Error(e(331));var g=Lt;for(Lt|=4,it=i.current;it!==null;){var v=it,S=v.child;if((it.flags&16)!==0){var T=v.deletions;if(T!==null){for(var M=0;M<T.length;M++){var B=T[M];for(it=B;it!==null;){var X=it;switch(X.tag){case 0:case 11:case 15:Nr(8,X,v)}var K=X.child;if(K!==null)K.return=X,it=K;else for(;it!==null;){X=it;var W=X.sibling,tt=X.return;if(zp(X),X===B){it=null;break}if(W!==null){W.return=tt,it=W;break}it=tt}}}var rt=v.alternate;if(rt!==null){var ot=rt.child;if(ot!==null){rt.child=null;do{var te=ot.sibling;ot.sibling=null,ot=te}while(ot!==null)}}it=v}}if((v.subtreeFlags&2064)!==0&&S!==null)S.return=v,it=S;else t:for(;it!==null;){if(v=it,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:Nr(9,v,v.return)}var F=v.sibling;if(F!==null){F.return=v.return,it=F;break t}it=v.return}}var L=i.current;for(it=L;it!==null;){S=it;var O=S.child;if((S.subtreeFlags&2064)!==0&&O!==null)O.return=S,it=O;else t:for(S=L;it!==null;){if(T=it,(T.flags&2048)!==0)try{switch(T.tag){case 0:case 11:case 15:Ea(9,T)}}catch(at){Yt(T,T.return,at)}if(T===S){it=null;break t}var Y=T.sibling;if(Y!==null){Y.return=T.return,it=Y;break t}it=T.return}}if(Lt=g,mi(),Pn&&typeof Pn.onPostCommitFiberRoot=="function")try{Pn.onPostCommitFiberRoot(Oo,i)}catch{}f=!0}return f}finally{It=u,an.transition=o}}return!1}function im(i,o,u){o=ks(u,o),o=Ap(i,o,1),i=yi(i,o,1),o=Me(),i!==null&&(lr(i,1,o),Ve(i,o))}function Yt(i,o,u){if(i.tag===3)im(i,i,u);else for(;o!==null;){if(o.tag===3){im(o,i,u);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(wi===null||!wi.has(f))){i=ks(u,i),i=Sp(o,i,1),o=yi(o,i,1),i=Me(),o!==null&&(lr(o,1,i),Ve(o,i));break}}o=o.return}}function Cx(i,o,u){var f=i.pingCache;f!==null&&f.delete(o),o=Me(),i.pingedLanes|=i.suspendedLanes&u,pe===i&&(we&u)===u&&(he===4||he===3&&(we&130023424)===we&&500>Jt()-nu?$i(i,0):eu|=u),Ve(i,o)}function sm(i,o){o===0&&((i.mode&1)===0?o=1:(o=Bo,Bo<<=1,(Bo&130023424)===0&&(Bo=4194304)));var u=Me();i=qn(i,o),i!==null&&(lr(i,o,u),Ve(i,u))}function Tx(i){var o=i.memoizedState,u=0;o!==null&&(u=o.retryLane),sm(i,u)}function Px(i,o){var u=0;switch(i.tag){case 13:var f=i.stateNode,g=i.memoizedState;g!==null&&(u=g.retryLane);break;case 19:f=i.stateNode;break;default:throw Error(e(314))}f!==null&&f.delete(o),sm(i,u)}var rm;rm=function(i,o,u){if(i!==null)if(i.memoizedProps!==o.pendingProps||Fe.current)je=!0;else{if((i.lanes&u)===0&&(o.flags&128)===0)return je=!1,mx(i,o,u);je=(i.flags&131072)!==0}else je=!1,zt&&(o.flags&1048576)!==0&&jf(o,aa,o.index);switch(o.lanes=0,o.tag){case 2:var f=o.type;Sa(i,o),i=o.pendingProps;var g=As(o,Se.current);Ts(o,u),g=Dc(null,o,f,i,g,u);var v=Ic();return o.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Oe(f)?(v=!0,sa(o)):v=!1,o.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,Cc(o),g.updater=xa,o.stateNode=g,g._reactInternals=o,Vc(o,f,i,u),o=$c(null,o,f,!0,v,u)):(o.tag=0,zt&&v&&gc(o),Re(null,o,g,u),o=o.child),o;case 16:f=o.elementType;t:{switch(Sa(i,o),i=o.pendingProps,g=f._init,f=g(f._payload),o.type=f,g=o.tag=Rx(f),i=xn(f,i),g){case 0:o=Uc(null,o,f,i,u);break t;case 1:o=Mp(null,o,f,i,u);break t;case 11:o=Cp(null,o,f,i,u);break t;case 14:o=Tp(null,o,f,xn(f.type,i),u);break t}throw Error(e(306,f,""))}return o;case 0:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:xn(f,g),Uc(i,o,f,g,u);case 1:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:xn(f,g),Mp(i,o,f,g,u);case 3:t:{if(Lp(o),i===null)throw Error(e(387));f=o.pendingProps,v=o.memoizedState,g=v.element,Xf(i,o),fa(o,f,null,u);var S=o.memoizedState;if(f=S.element,v.isDehydrated)if(v={element:f,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},o.updateQueue.baseState=v,o.memoizedState=v,o.flags&256){g=ks(Error(e(423)),o),o=Dp(i,o,f,u,g);break t}else if(f!==g){g=ks(Error(e(424)),o),o=Dp(i,o,f,u,g);break t}else for(Ke=di(o.stateNode.containerInfo.firstChild),Xe=o,zt=!0,wn=null,u=Wf(o,null,f,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Es(),f===g){o=Qn(i,o,u);break t}Re(i,o,f,u)}o=o.child}return o;case 5:return Yf(o),i===null&&wc(o),f=o.type,g=o.pendingProps,v=i!==null?i.memoizedProps:null,S=g.children,uc(f,g)?S=null:v!==null&&uc(f,v)&&(o.flags|=32),Rp(i,o),Re(i,o,S,u),o.child;case 6:return i===null&&wc(o),null;case 13:return Ip(i,o,u);case 4:return Tc(o,o.stateNode.containerInfo),f=o.pendingProps,i===null?o.child=_s(o,null,f,u):Re(i,o,f,u),o.child;case 11:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:xn(f,g),Cp(i,o,f,g,u);case 7:return Re(i,o,o.pendingProps,u),o.child;case 8:return Re(i,o,o.pendingProps.children,u),o.child;case 12:return Re(i,o,o.pendingProps.children,u),o.child;case 10:t:{if(f=o.type._context,g=o.pendingProps,v=o.memoizedProps,S=g.value,jt(ua,f._currentValue),f._currentValue=S,v!==null)if(vn(v.value,S)){if(v.children===g.children&&!Fe.current){o=Qn(i,o,u);break t}}else for(v=o.child,v!==null&&(v.return=o);v!==null;){var T=v.dependencies;if(T!==null){S=v.child;for(var M=T.firstContext;M!==null;){if(M.context===f){if(v.tag===1){M=Yn(-1,u&-u),M.tag=2;var B=v.updateQueue;if(B!==null){B=B.shared;var X=B.pending;X===null?M.next=M:(M.next=X.next,X.next=M),B.pending=M}}v.lanes|=u,M=v.alternate,M!==null&&(M.lanes|=u),Ec(v.return,u,o),T.lanes|=u;break}M=M.next}}else if(v.tag===10)S=v.type===o.type?null:v.child;else if(v.tag===18){if(S=v.return,S===null)throw Error(e(341));S.lanes|=u,T=S.alternate,T!==null&&(T.lanes|=u),Ec(S,u,o),S=v.sibling}else S=v.child;if(S!==null)S.return=v;else for(S=v;S!==null;){if(S===o){S=null;break}if(v=S.sibling,v!==null){v.return=S.return,S=v;break}S=S.return}v=S}Re(i,o,g.children,u),o=o.child}return o;case 9:return g=o.type,f=o.pendingProps.children,Ts(o,u),g=rn(g),f=f(g),o.flags|=1,Re(i,o,f,u),o.child;case 14:return f=o.type,g=xn(f,o.pendingProps),g=xn(f.type,g),Tp(i,o,f,g,u);case 15:return Pp(i,o,o.type,o.pendingProps,u);case 17:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:xn(f,g),Sa(i,o),o.tag=1,Oe(f)?(i=!0,sa(o)):i=!1,Ts(o,u),wp(o,f,g),Vc(o,f,g,u),$c(null,o,f,!0,i,u);case 19:return Fp(i,o,u);case 22:return kp(i,o,u)}throw Error(e(156,o.tag))};function om(i,o){return jd(i,o)}function kx(i,o,u,f){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ln(i,o,u,f){return new kx(i,o,u,f)}function uu(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Rx(i){if(typeof i=="function")return uu(i)?1:0;if(i!=null){if(i=i.$$typeof,i===ht)return 11;if(i===bt)return 14}return 2}function bi(i,o){var u=i.alternate;return u===null?(u=ln(i.tag,o,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=o,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,o=i.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function Da(i,o,u,f,g,v){var S=2;if(f=i,typeof i=="function")uu(i)&&(S=1);else if(typeof i=="string")S=5;else t:switch(i){case I:return Gi(u.children,g,v,o);case j:S=8,g|=8;break;case H:return i=ln(12,u,o,g|2),i.elementType=H,i.lanes=v,i;case lt:return i=ln(13,u,o,g),i.elementType=lt,i.lanes=v,i;case et:return i=ln(19,u,o,g),i.elementType=et,i.lanes=v,i;case U:return Ia(u,g,v,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case G:S=10;break t;case Q:S=9;break t;case ht:S=11;break t;case bt:S=14;break t;case q:S=16,f=null;break t}throw Error(e(130,i==null?i:typeof i,""))}return o=ln(S,u,o,g),o.elementType=i,o.type=f,o.lanes=v,o}function Gi(i,o,u,f){return i=ln(7,i,f,o),i.lanes=u,i}function Ia(i,o,u,f){return i=ln(22,i,f,o),i.elementType=U,i.lanes=u,i.stateNode={isHidden:!1},i}function hu(i,o,u){return i=ln(6,i,null,o),i.lanes=u,i}function du(i,o,u){return o=ln(4,i.children!==null?i.children:[],i.key,o),o.lanes=u,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function Mx(i,o,u,f,g){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bl(0),this.expirationTimes=Bl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bl(0),this.identifierPrefix=f,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function fu(i,o,u,f,g,v,S,T,M){return i=new Mx(i,o,u,T,M),o===1?(o=1,v===!0&&(o|=8)):o=0,v=ln(3,null,null,o),i.current=v,v.stateNode=i,v.memoizedState={element:f,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Cc(v),i}function Lx(i,o,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:D,key:f==null?null:""+f,children:i,containerInfo:o,implementation:u}}function am(i){if(!i)return pi;i=i._reactInternals;t:{if(Ii(i)!==i||i.tag!==1)throw Error(e(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break t;case 1:if(Oe(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break t}}o=o.return}while(o!==null);throw Error(e(171))}if(i.tag===1){var u=i.type;if(Oe(u))return Nf(i,u,o)}return o}function lm(i,o,u,f,g,v,S,T,M){return i=fu(u,f,!0,i,g,v,S,T,M),i.context=am(null),u=i.current,f=Me(),g=Ai(u),v=Yn(f,g),v.callback=o??null,yi(u,v,g),i.current.lanes=g,lr(i,g,f),Ve(i,f),i}function Na(i,o,u,f){var g=o.current,v=Me(),S=Ai(g);return u=am(u),o.context===null?o.context=u:o.pendingContext=u,o=Yn(v,S),o.payload={element:i},f=f===void 0?null:f,f!==null&&(o.callback=f),i=yi(g,o,S),i!==null&&(bn(i,g,S,v),da(i,g,S)),S}function Fa(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function cm(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<o?u:o}}function pu(i,o){cm(i,o),(i=i.alternate)&&cm(i,o)}function Dx(){return null}var um=typeof reportError=="function"?reportError:function(i){console.error(i)};function mu(i){this._internalRoot=i}Oa.prototype.render=mu.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(e(409));Na(i,o,null,null)},Oa.prototype.unmount=mu.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;Ui(function(){Na(null,i,null,null)}),o[Wn]=null}};function Oa(i){this._internalRoot=i}Oa.prototype.unstable_scheduleHydration=function(i){if(i){var o=Gd();i={blockedOn:null,target:i,priority:o};for(var u=0;u<ci.length&&o!==0&&o<ci[u].priority;u++);ci.splice(u,0,i),u===0&&qd(i)}};function gu(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function ja(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function hm(){}function Ix(i,o,u,f,g){if(g){if(typeof f=="function"){var v=f;f=function(){var B=Fa(S);v.call(B)}}var S=lm(o,f,i,0,null,!1,!1,"",hm);return i._reactRootContainer=S,i[Wn]=S.current,Sr(i.nodeType===8?i.parentNode:i),Ui(),S}for(;g=i.lastChild;)i.removeChild(g);if(typeof f=="function"){var T=f;f=function(){var B=Fa(M);T.call(B)}}var M=fu(i,0,!1,null,null,!1,!1,"",hm);return i._reactRootContainer=M,i[Wn]=M.current,Sr(i.nodeType===8?i.parentNode:i),Ui(function(){Na(o,M,u,f)}),M}function Ba(i,o,u,f,g){var v=u._reactRootContainer;if(v){var S=v;if(typeof g=="function"){var T=g;g=function(){var M=Fa(S);T.call(M)}}Na(o,S,i,g)}else S=Ix(u,o,i,g,f);return Fa(S)}$d=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var u=ar(o.pendingLanes);u!==0&&(Vl(o,u|1),Ve(o,Jt()),(Lt&6)===0&&(Ls=Jt()+500,mi()))}break;case 13:Ui(function(){var f=qn(i,1);if(f!==null){var g=Me();bn(f,i,1,g)}}),pu(i,1)}},zl=function(i){if(i.tag===13){var o=qn(i,134217728);if(o!==null){var u=Me();bn(o,i,134217728,u)}pu(i,134217728)}},Wd=function(i){if(i.tag===13){var o=Ai(i),u=qn(i,o);if(u!==null){var f=Me();bn(u,i,o,f)}pu(i,o)}},Gd=function(){return It},Xd=function(i,o){var u=It;try{return It=i,o()}finally{It=u}},Dl=function(i,o,u){switch(o){case"input":if(Tn(i,u),o=u.name,u.type==="radio"&&o!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var f=u[o];if(f!==i&&f.form===i.form){var g=na(f);if(!g)throw Error(e(90));tn(f),Tn(f,g)}}}break;case"textarea":Mo(i,u);break;case"select":o=u.value,o!=null&&pn(i,!!u.multiple,o,!1)}},Md=au,Ld=Ui;var Nx={usingClientEntryPoint:!1,Events:[_r,ws,na,kd,Rd,au]},Br={findFiberByHostInstance:Ni,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Fx={bundleType:Br.bundleType,version:Br.version,rendererPackageName:Br.rendererPackageName,rendererConfig:Br.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:R.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Fd(i),i===null?null:i.stateNode},findFiberByHostInstance:Br.findFiberByHostInstance||Dx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Va=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Va.isDisabled&&Va.supportsFiber)try{Oo=Va.inject(Fx),Pn=Va}catch{}}return He.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Nx,He.createPortal=function(i,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gu(o))throw Error(e(200));return Lx(i,o,null,u)},He.createRoot=function(i,o){if(!gu(i))throw Error(e(299));var u=!1,f="",g=um;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onRecoverableError!==void 0&&(g=o.onRecoverableError)),o=fu(i,1,!1,null,null,u,!1,f,g),i[Wn]=o.current,Sr(i.nodeType===8?i.parentNode:i),new mu(o)},He.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(e(188)):(i=Object.keys(i).join(","),Error(e(268,i)));return i=Fd(o),i=i===null?null:i.stateNode,i},He.flushSync=function(i){return Ui(i)},He.hydrate=function(i,o,u){if(!ja(o))throw Error(e(200));return Ba(null,i,o,!0,u)},He.hydrateRoot=function(i,o,u){if(!gu(i))throw Error(e(405));var f=u!=null&&u.hydratedSources||null,g=!1,v="",S=um;if(u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onRecoverableError!==void 0&&(S=u.onRecoverableError)),o=lm(o,null,i,1,u??null,g,!1,v,S),i[Wn]=o.current,Sr(i),f)for(i=0;i<f.length;i++)u=f[i],g=u._getVersion,g=g(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,g]:o.mutableSourceEagerHydrationData.push(u,g);return new Oa(o)},He.render=function(i,o,u){if(!ja(o))throw Error(e(200));return Ba(null,i,o,!1,u)},He.unmountComponentAtNode=function(i){if(!ja(i))throw Error(e(40));return i._reactRootContainer?(Ui(function(){Ba(null,null,i,!1,function(){i._reactRootContainer=null,i[Wn]=null})}),!0):!1},He.unstable_batchedUpdates=au,He.unstable_renderSubtreeIntoContainer=function(i,o,u,f){if(!ja(u))throw Error(e(200));if(i==null||i._reactInternals===void 0)throw Error(e(38));return Ba(i,o,u,!1,f)},He.version="18.3.1-next-f1338f8080-20240426",He}var Am;function Wx(){if(Am)return xu.exports;Am=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),xu.exports=$x(),xu.exports}var Sm;function Gx(){if(Sm)return za;Sm=1;var r=Wx();return za.createRoot=r.createRoot,za.hydrateRoot=r.hydrateRoot,za}var Xx=Gx();const Kx=Eh(Xx),Ch=V.createContext({});function Th(r){const t=V.useRef(null);return t.current===null&&(t.current=r()),t.current}const Ph=typeof window<"u",my=Ph?V.useLayoutEffect:V.useEffect,ml=V.createContext(null);function kh(r,t){r.indexOf(t)===-1&&r.push(t)}function Rh(r,t){const e=r.indexOf(t);e>-1&&r.splice(e,1)}const ei=(r,t,e)=>e>t?t:e<r?r:e;let Mh=()=>{};const ni={},gy=r=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(r);function yy(r){return typeof r=="object"&&r!==null}const vy=r=>/^0[^.\s]+$/u.test(r);function Lh(r){let t;return()=>(t===void 0&&(t=r()),t)}const fn=r=>r,qx=(r,t)=>e=>t(r(e)),go=(...r)=>r.reduce(qx),io=(r,t,e)=>{const n=t-r;return n===0?1:(e-r)/n};class Dh{constructor(){this.subscriptions=[]}add(t){return kh(this.subscriptions,t),()=>Rh(this.subscriptions,t)}notify(t,e,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,e,n);else for(let a=0;a<s;a++){const l=this.subscriptions[a];l&&l(t,e,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const zn=r=>r*1e3,Hn=r=>r/1e3;function wy(r,t){return t?r*(1e3/t):0}const xy=(r,t,e)=>(((1-3*e+3*t)*r+(3*e-6*t))*r+3*t)*r,Yx=1e-7,Qx=12;function Zx(r,t,e,n,s){let a,l,c=0;do l=t+(e-t)/2,a=xy(l,n,s)-r,a>0?e=l:t=l;while(Math.abs(a)>Yx&&++c<Qx);return l}function yo(r,t,e,n){if(r===t&&e===n)return fn;const s=a=>Zx(a,0,1,r,e);return a=>a===0||a===1?a:xy(s(a),t,n)}const Ay=r=>t=>t<=.5?r(2*t)/2:(2-r(2*(1-t)))/2,Sy=r=>t=>1-r(1-t),by=yo(.33,1.53,.69,.99),Ih=Sy(by),Ey=Ay(Ih),_y=r=>(r*=2)<1?.5*Ih(r):.5*(2-Math.pow(2,-10*(r-1))),Nh=r=>1-Math.sin(Math.acos(r)),Cy=Sy(Nh),Ty=Ay(Nh),Jx=yo(.42,0,1,1),tA=yo(0,0,.58,1),Py=yo(.42,0,.58,1),eA=r=>Array.isArray(r)&&typeof r[0]!="number",ky=r=>Array.isArray(r)&&typeof r[0]=="number",nA={linear:fn,easeIn:Jx,easeInOut:Py,easeOut:tA,circIn:Nh,circInOut:Ty,circOut:Cy,backIn:Ih,backInOut:Ey,backOut:by,anticipate:_y},iA=r=>typeof r=="string",bm=r=>{if(ky(r)){Mh(r.length===4);const[t,e,n,s]=r;return yo(t,e,n,s)}else if(iA(r))return nA[r];return r},Ha=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function sA(r,t){let e=new Set,n=new Set,s=!1,a=!1;const l=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function h(p){l.has(p)&&(d.schedule(p),r()),p(c)}const d={schedule:(p,m=!1,y=!1)=>{const A=y&&s?e:n;return m&&l.add(p),A.has(p)||A.add(p),p},cancel:p=>{n.delete(p),l.delete(p)},process:p=>{if(c=p,s){a=!0;return}s=!0,[e,n]=[n,e],e.forEach(h),e.clear(),s=!1,a&&(a=!1,d.process(p))}};return d}const rA=40;function Ry(r,t){let e=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>e=!0,l=Ha.reduce((_,R)=>(_[R]=sA(a),_),{}),{setup:c,read:h,resolveKeyframes:d,preUpdate:p,update:m,preRender:y,render:w,postRender:A}=l,x=()=>{const _=ni.useManualTiming?s.timestamp:performance.now();e=!1,ni.useManualTiming||(s.delta=n?1e3/60:Math.max(Math.min(_-s.timestamp,rA),1)),s.timestamp=_,s.isProcessing=!0,c.process(s),h.process(s),d.process(s),p.process(s),m.process(s),y.process(s),w.process(s),A.process(s),s.isProcessing=!1,e&&t&&(n=!1,r(x))},E=()=>{e=!0,n=!0,s.isProcessing||r(x)};return{schedule:Ha.reduce((_,R)=>{const P=l[R];return _[R]=(D,I=!1,j=!1)=>(e||E(),P.schedule(D,I,j)),_},{}),cancel:_=>{for(let R=0;R<Ha.length;R++)l[Ha[R]].cancel(_)},state:s,steps:l}}const{schedule:$t,cancel:Pi,state:xe,steps:bu}=Ry(typeof requestAnimationFrame<"u"?requestAnimationFrame:fn,!0);let tl;function oA(){tl=void 0}const We={now:()=>(tl===void 0&&We.set(xe.isProcessing||ni.useManualTiming?xe.timestamp:performance.now()),tl),set:r=>{tl=r,queueMicrotask(oA)}},My=r=>t=>typeof t=="string"&&t.startsWith(r),Fh=My("--"),aA=My("var(--"),Oh=r=>aA(r)?lA.test(r.split("/*")[0].trim()):!1,lA=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Zs={test:r=>typeof r=="number",parse:parseFloat,transform:r=>r},so={...Zs,transform:r=>ei(0,1,r)},Ua={...Zs,default:1},Yr=r=>Math.round(r*1e5)/1e5,jh=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function cA(r){return r==null}const uA=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Bh=(r,t)=>e=>!!(typeof e=="string"&&uA.test(e)&&e.startsWith(r)||t&&!cA(e)&&Object.prototype.hasOwnProperty.call(e,t)),Ly=(r,t,e)=>n=>{if(typeof n!="string")return n;const[s,a,l,c]=n.match(jh);return{[r]:parseFloat(s),[t]:parseFloat(a),[e]:parseFloat(l),alpha:c!==void 0?parseFloat(c):1}},hA=r=>ei(0,255,r),Eu={...Zs,transform:r=>Math.round(hA(r))},Qi={test:Bh("rgb","red"),parse:Ly("red","green","blue"),transform:({red:r,green:t,blue:e,alpha:n=1})=>"rgba("+Eu.transform(r)+", "+Eu.transform(t)+", "+Eu.transform(e)+", "+Yr(so.transform(n))+")"};function dA(r){let t="",e="",n="",s="";return r.length>5?(t=r.substring(1,3),e=r.substring(3,5),n=r.substring(5,7),s=r.substring(7,9)):(t=r.substring(1,2),e=r.substring(2,3),n=r.substring(3,4),s=r.substring(4,5),t+=t,e+=e,n+=n,s+=s),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const Xu={test:Bh("#"),parse:dA,transform:Qi.transform},vo=r=>({test:t=>typeof t=="string"&&t.endsWith(r)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${r}`}),_i=vo("deg"),Un=vo("%"),vt=vo("px"),fA=vo("vh"),pA=vo("vw"),Em={...Un,parse:r=>Un.parse(r)/100,transform:r=>Un.transform(r*100)},Fs={test:Bh("hsl","hue"),parse:Ly("hue","saturation","lightness"),transform:({hue:r,saturation:t,lightness:e,alpha:n=1})=>"hsla("+Math.round(r)+", "+Un.transform(Yr(t))+", "+Un.transform(Yr(e))+", "+Yr(so.transform(n))+")"},le={test:r=>Qi.test(r)||Xu.test(r)||Fs.test(r),parse:r=>Qi.test(r)?Qi.parse(r):Fs.test(r)?Fs.parse(r):Xu.parse(r),transform:r=>typeof r=="string"?r:r.hasOwnProperty("red")?Qi.transform(r):Fs.transform(r),getAnimatableNone:r=>{const t=le.parse(r);return t.alpha=0,le.transform(t)}},mA=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function gA(r){return isNaN(r)&&typeof r=="string"&&(r.match(jh)?.length||0)+(r.match(mA)?.length||0)>0}const Dy="number",Iy="color",yA="var",vA="var(",_m="${}",wA=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ro(r){const t=r.toString(),e=[],n={color:[],number:[],var:[]},s=[];let a=0;const c=t.replace(wA,h=>(le.test(h)?(n.color.push(a),s.push(Iy),e.push(le.parse(h))):h.startsWith(vA)?(n.var.push(a),s.push(yA),e.push(h)):(n.number.push(a),s.push(Dy),e.push(parseFloat(h))),++a,_m)).split(_m);return{values:e,split:c,indexes:n,types:s}}function Ny(r){return ro(r).values}function Fy(r){const{split:t,types:e}=ro(r),n=t.length;return s=>{let a="";for(let l=0;l<n;l++)if(a+=t[l],s[l]!==void 0){const c=e[l];c===Dy?a+=Yr(s[l]):c===Iy?a+=le.transform(s[l]):a+=s[l]}return a}}const xA=r=>typeof r=="number"?0:le.test(r)?le.getAnimatableNone(r):r;function AA(r){const t=Ny(r);return Fy(r)(t.map(xA))}const ki={test:gA,parse:Ny,createTransformer:Fy,getAnimatableNone:AA};function _u(r,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?r+(t-r)*6*e:e<1/2?t:e<2/3?r+(t-r)*(2/3-e)*6:r}function SA({hue:r,saturation:t,lightness:e,alpha:n}){r/=360,t/=100,e/=100;let s=0,a=0,l=0;if(!t)s=a=l=e;else{const c=e<.5?e*(1+t):e+t-e*t,h=2*e-c;s=_u(h,c,r+1/3),a=_u(h,c,r),l=_u(h,c,r-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(l*255),alpha:n}}function ol(r,t){return e=>e>0?t:r}const Kt=(r,t,e)=>r+(t-r)*e,Cu=(r,t,e)=>{const n=r*r,s=e*(t*t-n)+n;return s<0?0:Math.sqrt(s)},bA=[Xu,Qi,Fs],EA=r=>bA.find(t=>t.test(r));function Cm(r){const t=EA(r);if(!t)return!1;let e=t.parse(r);return t===Fs&&(e=SA(e)),e}const Tm=(r,t)=>{const e=Cm(r),n=Cm(t);if(!e||!n)return ol(r,t);const s={...e};return a=>(s.red=Cu(e.red,n.red,a),s.green=Cu(e.green,n.green,a),s.blue=Cu(e.blue,n.blue,a),s.alpha=Kt(e.alpha,n.alpha,a),Qi.transform(s))},Ku=new Set(["none","hidden"]);function _A(r,t){return Ku.has(r)?e=>e<=0?r:t:e=>e>=1?t:r}function CA(r,t){return e=>Kt(r,t,e)}function Vh(r){return typeof r=="number"?CA:typeof r=="string"?Oh(r)?ol:le.test(r)?Tm:kA:Array.isArray(r)?Oy:typeof r=="object"?le.test(r)?Tm:TA:ol}function Oy(r,t){const e=[...r],n=e.length,s=r.map((a,l)=>Vh(a)(a,t[l]));return a=>{for(let l=0;l<n;l++)e[l]=s[l](a);return e}}function TA(r,t){const e={...r,...t},n={};for(const s in e)r[s]!==void 0&&t[s]!==void 0&&(n[s]=Vh(r[s])(r[s],t[s]));return s=>{for(const a in n)e[a]=n[a](s);return e}}function PA(r,t){const e=[],n={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const a=t.types[s],l=r.indexes[a][n[a]],c=r.values[l]??0;e[s]=c,n[a]++}return e}const kA=(r,t)=>{const e=ki.createTransformer(t),n=ro(r),s=ro(t);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?Ku.has(r)&&!s.values.length||Ku.has(t)&&!n.values.length?_A(r,t):go(Oy(PA(n,s),s.values),e):ol(r,t)};function jy(r,t,e){return typeof r=="number"&&typeof t=="number"&&typeof e=="number"?Kt(r,t,e):Vh(r)(r,t)}const RA=r=>{const t=({timestamp:e})=>r(e);return{start:(e=!0)=>$t.update(t,e),stop:()=>Pi(t),now:()=>xe.isProcessing?xe.timestamp:We.now()}},By=(r,t,e=10)=>{let n="";const s=Math.max(Math.round(t/e),2);for(let a=0;a<s;a++)n+=Math.round(r(a/(s-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},al=2e4;function zh(r){let t=0;const e=50;let n=r.next(t);for(;!n.done&&t<al;)t+=e,n=r.next(t);return t>=al?1/0:t}function MA(r,t=100,e){const n=e({...r,keyframes:[0,t]}),s=Math.min(zh(n),al);return{type:"keyframes",ease:a=>n.next(s*a).value/t,duration:Hn(s)}}const LA=5;function Vy(r,t,e){const n=Math.max(t-LA,0);return wy(e-r(n),t-n)}const Qt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Tu=.001;function DA({duration:r=Qt.duration,bounce:t=Qt.bounce,velocity:e=Qt.velocity,mass:n=Qt.mass}){let s,a,l=1-t;l=ei(Qt.minDamping,Qt.maxDamping,l),r=ei(Qt.minDuration,Qt.maxDuration,Hn(r)),l<1?(s=d=>{const p=d*l,m=p*r,y=p-e,w=qu(d,l),A=Math.exp(-m);return Tu-y/w*A},a=d=>{const m=d*l*r,y=m*e+e,w=Math.pow(l,2)*Math.pow(d,2)*r,A=Math.exp(-m),x=qu(Math.pow(d,2),l);return(-s(d)+Tu>0?-1:1)*((y-w)*A)/x}):(s=d=>{const p=Math.exp(-d*r),m=(d-e)*r+1;return-Tu+p*m},a=d=>{const p=Math.exp(-d*r),m=(e-d)*(r*r);return p*m});const c=5/r,h=NA(s,a,c);if(r=zn(r),isNaN(h))return{stiffness:Qt.stiffness,damping:Qt.damping,duration:r};{const d=Math.pow(h,2)*n;return{stiffness:d,damping:l*2*Math.sqrt(n*d),duration:r}}}const IA=12;function NA(r,t,e){let n=e;for(let s=1;s<IA;s++)n=n-r(n)/t(n);return n}function qu(r,t){return r*Math.sqrt(1-t*t)}const FA=["duration","bounce"],OA=["stiffness","damping","mass"];function Pm(r,t){return t.some(e=>r[e]!==void 0)}function jA(r){let t={velocity:Qt.velocity,stiffness:Qt.stiffness,damping:Qt.damping,mass:Qt.mass,isResolvedFromDuration:!1,...r};if(!Pm(r,OA)&&Pm(r,FA))if(r.visualDuration){const e=r.visualDuration,n=2*Math.PI/(e*1.2),s=n*n,a=2*ei(.05,1,1-(r.bounce||0))*Math.sqrt(s);t={...t,mass:Qt.mass,stiffness:s,damping:a}}else{const e=DA(r);t={...t,...e,mass:Qt.mass},t.isResolvedFromDuration=!0}return t}function ll(r=Qt.visualDuration,t=Qt.bounce){const e=typeof r!="object"?{visualDuration:r,keyframes:[0,1],bounce:t}:r;let{restSpeed:n,restDelta:s}=e;const a=e.keyframes[0],l=e.keyframes[e.keyframes.length-1],c={done:!1,value:a},{stiffness:h,damping:d,mass:p,duration:m,velocity:y,isResolvedFromDuration:w}=jA({...e,velocity:-Hn(e.velocity||0)}),A=y||0,x=d/(2*Math.sqrt(h*p)),E=l-a,b=Hn(Math.sqrt(h/p)),C=Math.abs(E)<5;n||(n=C?Qt.restSpeed.granular:Qt.restSpeed.default),s||(s=C?Qt.restDelta.granular:Qt.restDelta.default);let _;if(x<1){const P=qu(b,x);_=D=>{const I=Math.exp(-x*b*D);return l-I*((A+x*b*E)/P*Math.sin(P*D)+E*Math.cos(P*D))}}else if(x===1)_=P=>l-Math.exp(-b*P)*(E+(A+b*E)*P);else{const P=b*Math.sqrt(x*x-1);_=D=>{const I=Math.exp(-x*b*D),j=Math.min(P*D,300);return l-I*((A+x*b*E)*Math.sinh(j)+P*E*Math.cosh(j))/P}}const R={calculatedDuration:w&&m||null,next:P=>{const D=_(P);if(w)c.done=P>=m;else{let I=P===0?A:0;x<1&&(I=P===0?zn(A):Vy(_,P,D));const j=Math.abs(I)<=n,H=Math.abs(l-D)<=s;c.done=j&&H}return c.value=c.done?l:D,c},toString:()=>{const P=Math.min(zh(R),al),D=By(I=>R.next(P*I).value,P,30);return P+"ms "+D},toTransition:()=>{}};return R}ll.applyToOptions=r=>{const t=MA(r,100,ll);return r.ease=t.ease,r.duration=zn(t.duration),r.type="keyframes",r};function Yu({keyframes:r,velocity:t=0,power:e=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:l,min:c,max:h,restDelta:d=.5,restSpeed:p}){const m=r[0],y={done:!1,value:m},w=j=>c!==void 0&&j<c||h!==void 0&&j>h,A=j=>c===void 0?h:h===void 0||Math.abs(c-j)<Math.abs(h-j)?c:h;let x=e*t;const E=m+x,b=l===void 0?E:l(E);b!==E&&(x=b-m);const C=j=>-x*Math.exp(-j/n),_=j=>b+C(j),R=j=>{const H=C(j),G=_(j);y.done=Math.abs(H)<=d,y.value=y.done?b:G};let P,D;const I=j=>{w(y.value)&&(P=j,D=ll({keyframes:[y.value,A(y.value)],velocity:Vy(_,j,y.value),damping:s,stiffness:a,restDelta:d,restSpeed:p}))};return I(0),{calculatedDuration:null,next:j=>{let H=!1;return!D&&P===void 0&&(H=!0,R(j),I(j)),P!==void 0&&j>=P?D.next(j-P):(!H&&R(j),y)}}}function BA(r,t,e){const n=[],s=e||ni.mix||jy,a=r.length-1;for(let l=0;l<a;l++){let c=s(r[l],r[l+1]);if(t){const h=Array.isArray(t)?t[l]||fn:t;c=go(h,c)}n.push(c)}return n}function VA(r,t,{clamp:e=!0,ease:n,mixer:s}={}){const a=r.length;if(Mh(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const l=r[0]===r[1];r[0]>r[a-1]&&(r=[...r].reverse(),t=[...t].reverse());const c=BA(t,n,s),h=c.length,d=p=>{if(l&&p<r[0])return t[0];let m=0;if(h>1)for(;m<r.length-2&&!(p<r[m+1]);m++);const y=io(r[m],r[m+1],p);return c[m](y)};return e?p=>d(ei(r[0],r[a-1],p)):d}function zA(r,t){const e=r[r.length-1];for(let n=1;n<=t;n++){const s=io(0,t,n);r.push(Kt(e,1,s))}}function HA(r){const t=[0];return zA(t,r.length-1),t}function UA(r,t){return r.map(e=>e*t)}function $A(r,t){return r.map(()=>t||Py).splice(0,r.length-1)}function Qr({duration:r=300,keyframes:t,times:e,ease:n="easeInOut"}){const s=eA(n)?n.map(bm):bm(n),a={done:!1,value:t[0]},l=UA(e&&e.length===t.length?e:HA(t),r),c=VA(l,t,{ease:Array.isArray(s)?s:$A(t,s)});return{calculatedDuration:r,next:h=>(a.value=c(h),a.done=h>=r,a)}}const WA=r=>r!==null;function Hh(r,{repeat:t,repeatType:e="loop"},n,s=1){const a=r.filter(WA),c=s<0||t&&e!=="loop"&&t%2===1?0:a.length-1;return!c||n===void 0?a[c]:n}const GA={decay:Yu,inertia:Yu,tween:Qr,keyframes:Qr,spring:ll};function zy(r){typeof r.type=="string"&&(r.type=GA[r.type])}class Uh{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,e){return this.finished.then(t,e)}}const XA=r=>r/100;class $h extends Uh{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:e}=this.options;e&&e.updatedAt!==We.now()&&this.tick(We.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;zy(t);const{type:e=Qr,repeat:n=0,repeatDelay:s=0,repeatType:a,velocity:l=0}=t;let{keyframes:c}=t;const h=e||Qr;h!==Qr&&typeof c[0]!="number"&&(this.mixKeyframes=go(XA,jy(c[0],c[1])),c=[0,100]);const d=h({...t,keyframes:c});a==="mirror"&&(this.mirroredGenerator=h({...t,keyframes:[...c].reverse(),velocity:-l})),d.calculatedDuration===null&&(d.calculatedDuration=zh(d));const{calculatedDuration:p}=d;this.calculatedDuration=p,this.resolvedDuration=p+s,this.totalDuration=this.resolvedDuration*(n+1)-s,this.generator=d}updateTime(t){const e=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=e}tick(t,e=!1){const{generator:n,totalDuration:s,mixKeyframes:a,mirroredGenerator:l,resolvedDuration:c,calculatedDuration:h}=this;if(this.startTime===null)return n.next(0);const{delay:d=0,keyframes:p,repeat:m,repeatType:y,repeatDelay:w,type:A,onUpdate:x,finalKeyframe:E}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),e?this.currentTime=t:this.updateTime(t);const b=this.currentTime-d*(this.playbackSpeed>=0?1:-1),C=this.playbackSpeed>=0?b<0:b>s;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let _=this.currentTime,R=n;if(m){const j=Math.min(this.currentTime,s)/c;let H=Math.floor(j),G=j%1;!G&&j>=1&&(G=1),G===1&&H--,H=Math.min(H,m+1),!!(H%2)&&(y==="reverse"?(G=1-G,w&&(G-=w/c)):y==="mirror"&&(R=l)),_=ei(0,1,G)*c}const P=C?{done:!1,value:p[0]}:R.next(_);a&&(P.value=a(P.value));let{done:D}=P;!C&&h!==null&&(D=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&D);return I&&A!==Yu&&(P.value=Hh(p,this.options,E,this.speed)),x&&x(P.value),I&&this.finish(),P}then(t,e){return this.finished.then(t,e)}get duration(){return Hn(this.calculatedDuration)}get time(){return Hn(this.currentTime)}set time(t){t=zn(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(We.now());const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=Hn(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=RA,startTime:e}=this.options;this.driver||(this.driver=t(s=>this.tick(s))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=e??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(We.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function KA(r){for(let t=1;t<r.length;t++)r[t]??(r[t]=r[t-1])}const Zi=r=>r*180/Math.PI,Qu=r=>{const t=Zi(Math.atan2(r[1],r[0]));return Zu(t)},qA={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:r=>(Math.abs(r[0])+Math.abs(r[3]))/2,rotate:Qu,rotateZ:Qu,skewX:r=>Zi(Math.atan(r[1])),skewY:r=>Zi(Math.atan(r[2])),skew:r=>(Math.abs(r[1])+Math.abs(r[2]))/2},Zu=r=>(r=r%360,r<0&&(r+=360),r),km=Qu,Rm=r=>Math.sqrt(r[0]*r[0]+r[1]*r[1]),Mm=r=>Math.sqrt(r[4]*r[4]+r[5]*r[5]),YA={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Rm,scaleY:Mm,scale:r=>(Rm(r)+Mm(r))/2,rotateX:r=>Zu(Zi(Math.atan2(r[6],r[5]))),rotateY:r=>Zu(Zi(Math.atan2(-r[2],r[0]))),rotateZ:km,rotate:km,skewX:r=>Zi(Math.atan(r[4])),skewY:r=>Zi(Math.atan(r[1])),skew:r=>(Math.abs(r[1])+Math.abs(r[4]))/2};function Ju(r){return r.includes("scale")?1:0}function th(r,t){if(!r||r==="none")return Ju(t);const e=r.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,s;if(e)n=YA,s=e;else{const c=r.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=qA,s=c}if(!s)return Ju(t);const a=n[t],l=s[1].split(",").map(ZA);return typeof a=="function"?a(l):l[a]}const QA=(r,t)=>{const{transform:e="none"}=getComputedStyle(r);return th(e,t)};function ZA(r){return parseFloat(r.trim())}const Js=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],tr=new Set(Js),Lm=r=>r===Zs||r===vt,JA=new Set(["x","y","z"]),t1=Js.filter(r=>!JA.has(r));function e1(r){const t=[];return t1.forEach(e=>{const n=r.getValue(e);n!==void 0&&(t.push([e,n.get()]),n.set(e.startsWith("scale")?1:0))}),t}const is={width:({x:r},{paddingLeft:t="0",paddingRight:e="0"})=>r.max-r.min-parseFloat(t)-parseFloat(e),height:({y:r},{paddingTop:t="0",paddingBottom:e="0"})=>r.max-r.min-parseFloat(t)-parseFloat(e),top:(r,{top:t})=>parseFloat(t),left:(r,{left:t})=>parseFloat(t),bottom:({y:r},{top:t})=>parseFloat(t)+(r.max-r.min),right:({x:r},{left:t})=>parseFloat(t)+(r.max-r.min),x:(r,{transform:t})=>th(t,"x"),y:(r,{transform:t})=>th(t,"y")};is.translateX=is.x;is.translateY=is.y;const ss=new Set;let eh=!1,nh=!1,ih=!1;function Hy(){if(nh){const r=Array.from(ss).filter(n=>n.needsMeasurement),t=new Set(r.map(n=>n.element)),e=new Map;t.forEach(n=>{const s=e1(n);s.length&&(e.set(n,s),n.render())}),r.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const s=e.get(n);s&&s.forEach(([a,l])=>{n.getValue(a)?.set(l)})}),r.forEach(n=>n.measureEndState()),r.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}nh=!1,eh=!1,ss.forEach(r=>r.complete(ih)),ss.clear()}function Uy(){ss.forEach(r=>{r.readKeyframes(),r.needsMeasurement&&(nh=!0)})}function n1(){ih=!0,Uy(),Hy(),ih=!1}class Wh{constructor(t,e,n,s,a,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=n,this.motionValue=s,this.element=a,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(ss.add(this),eh||(eh=!0,$t.read(Uy),$t.resolveKeyframes(Hy))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:n,motionValue:s}=this;if(t[0]===null){const a=s?.get(),l=t[t.length-1];if(a!==void 0)t[0]=a;else if(n&&e){const c=n.readValue(e,l);c!=null&&(t[0]=c)}t[0]===void 0&&(t[0]=l),s&&a===void 0&&s.set(t[0])}KA(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),ss.delete(this)}cancel(){this.state==="scheduled"&&(ss.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const i1=r=>r.startsWith("--");function s1(r,t,e){i1(t)?r.style.setProperty(t,e):r.style[t]=e}const r1=Lh(()=>window.ScrollTimeline!==void 0),o1={};function a1(r,t){const e=Lh(r);return()=>o1[t]??e()}const $y=a1(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Gr=([r,t,e,n])=>`cubic-bezier(${r}, ${t}, ${e}, ${n})`,Dm={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Gr([0,.65,.55,1]),circOut:Gr([.55,0,1,.45]),backIn:Gr([.31,.01,.66,-.59]),backOut:Gr([.33,1.53,.69,.99])};function Wy(r,t){if(r)return typeof r=="function"?$y()?By(r,t):"ease-out":ky(r)?Gr(r):Array.isArray(r)?r.map(e=>Wy(e,t)||Dm.easeOut):Dm[r]}function l1(r,t,e,{delay:n=0,duration:s=300,repeat:a=0,repeatType:l="loop",ease:c="easeOut",times:h}={},d=void 0){const p={[t]:e};h&&(p.offset=h);const m=Wy(c,s);Array.isArray(m)&&(p.easing=m);const y={delay:n,duration:s,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:a+1,direction:l==="reverse"?"alternate":"normal"};return d&&(y.pseudoElement=d),r.animate(p,y)}function Gy(r){return typeof r=="function"&&"applyToOptions"in r}function c1({type:r,...t}){return Gy(r)&&$y()?r.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class u1 extends Uh{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:e,name:n,keyframes:s,pseudoElement:a,allowFlatten:l=!1,finalKeyframe:c,onComplete:h}=t;this.isPseudoElement=!!a,this.allowFlatten=l,this.options=t,Mh(typeof t.type!="string");const d=c1(t);this.animation=l1(e,n,s,d,a),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const p=Hh(s,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(p):s1(e,n,p),this.animation.cancel()}h?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return Hn(Number(t))}get time(){return Hn(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=zn(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:e}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&r1()?(this.animation.timeline=t,fn):e(this)}}const Xy={anticipate:_y,backInOut:Ey,circInOut:Ty};function h1(r){return r in Xy}function d1(r){typeof r.ease=="string"&&h1(r.ease)&&(r.ease=Xy[r.ease])}const Im=10;class f1 extends u1{constructor(t){d1(t),zy(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:e,onUpdate:n,onComplete:s,element:a,...l}=this.options;if(!e)return;if(t!==void 0){e.set(t);return}const c=new $h({...l,autoplay:!1}),h=zn(this.finishedTime??this.time);e.setWithVelocity(c.sample(h-Im).value,c.sample(h).value,Im),c.stop()}}const Nm=(r,t)=>t==="zIndex"?!1:!!(typeof r=="number"||Array.isArray(r)||typeof r=="string"&&(ki.test(r)||r==="0")&&!r.startsWith("url("));function p1(r){const t=r[0];if(r.length===1)return!0;for(let e=0;e<r.length;e++)if(r[e]!==t)return!0}function m1(r,t,e,n){const s=r[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const a=r[r.length-1],l=Nm(s,t),c=Nm(a,t);return!l||!c?!1:p1(r)||(e==="spring"||Gy(e))&&n}function sh(r){r.duration=0,r.type}const g1=new Set(["opacity","clipPath","filter","transform"]),y1=Lh(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function v1(r){const{motionValue:t,name:e,repeatDelay:n,repeatType:s,damping:a,type:l}=r;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:d}=t.owner.getProps();return y1()&&e&&g1.has(e)&&(e!=="transform"||!d)&&!h&&!n&&s!=="mirror"&&a!==0&&l!=="inertia"}const w1=40;class x1 extends Uh{constructor({autoplay:t=!0,delay:e=0,type:n="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:l="loop",keyframes:c,name:h,motionValue:d,element:p,...m}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=We.now();const y={autoplay:t,delay:e,type:n,repeat:s,repeatDelay:a,repeatType:l,name:h,motionValue:d,element:p,...m},w=p?.KeyframeResolver||Wh;this.keyframeResolver=new w(c,(A,x,E)=>this.onKeyframesResolved(A,x,y,!E),h,d,p),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,e,n,s){this.keyframeResolver=void 0;const{name:a,type:l,velocity:c,delay:h,isHandoff:d,onUpdate:p}=n;this.resolvedAt=We.now(),m1(t,a,l,c)||((ni.instantAnimations||!h)&&p?.(Hh(t,n,e)),t[0]=t[t.length-1],sh(n),n.repeat=0);const y={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>w1?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:e,...n,keyframes:t},w=!d&&v1(y)?new f1({...y,element:y.motionValue.owner.current}):new $h(y);w.finished.then(()=>this.notifyFinished()).catch(fn),this.pendingTimeline&&(this.stopTimeline=w.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=w}get finished(){return this._animation?this.animation.finished:this._finished}then(t,e){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),n1()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const A1=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function S1(r){const t=A1.exec(r);if(!t)return[,];const[,e,n,s]=t;return[`--${e??n}`,s]}function Ky(r,t,e=1){const[n,s]=S1(r);if(!n)return;const a=window.getComputedStyle(t).getPropertyValue(n);if(a){const l=a.trim();return gy(l)?parseFloat(l):l}return Oh(s)?Ky(s,t,e+1):s}function Gh(r,t){return r?.[t]??r?.default??r}const qy=new Set(["width","height","top","left","right","bottom",...Js]),b1={test:r=>r==="auto",parse:r=>r},Yy=r=>t=>t.test(r),Qy=[Zs,vt,Un,_i,pA,fA,b1],Fm=r=>Qy.find(Yy(r));function E1(r){return typeof r=="number"?r===0:r!==null?r==="none"||r==="0"||vy(r):!0}const _1=new Set(["brightness","contrast","saturate","opacity"]);function C1(r){const[t,e]=r.slice(0,-1).split("(");if(t==="drop-shadow")return r;const[n]=e.match(jh)||[];if(!n)return r;const s=e.replace(n,"");let a=_1.has(t)?1:0;return n!==e&&(a*=100),t+"("+a+s+")"}const T1=/\b([a-z-]*)\(.*?\)/gu,rh={...ki,getAnimatableNone:r=>{const t=r.match(T1);return t?t.map(C1).join(" "):r}},Om={...Zs,transform:Math.round},P1={rotate:_i,rotateX:_i,rotateY:_i,rotateZ:_i,scale:Ua,scaleX:Ua,scaleY:Ua,scaleZ:Ua,skew:_i,skewX:_i,skewY:_i,distance:vt,translateX:vt,translateY:vt,translateZ:vt,x:vt,y:vt,z:vt,perspective:vt,transformPerspective:vt,opacity:so,originX:Em,originY:Em,originZ:vt},Xh={borderWidth:vt,borderTopWidth:vt,borderRightWidth:vt,borderBottomWidth:vt,borderLeftWidth:vt,borderRadius:vt,radius:vt,borderTopLeftRadius:vt,borderTopRightRadius:vt,borderBottomRightRadius:vt,borderBottomLeftRadius:vt,width:vt,maxWidth:vt,height:vt,maxHeight:vt,top:vt,right:vt,bottom:vt,left:vt,padding:vt,paddingTop:vt,paddingRight:vt,paddingBottom:vt,paddingLeft:vt,margin:vt,marginTop:vt,marginRight:vt,marginBottom:vt,marginLeft:vt,backgroundPositionX:vt,backgroundPositionY:vt,...P1,zIndex:Om,fillOpacity:so,strokeOpacity:so,numOctaves:Om},k1={...Xh,color:le,backgroundColor:le,outlineColor:le,fill:le,stroke:le,borderColor:le,borderTopColor:le,borderRightColor:le,borderBottomColor:le,borderLeftColor:le,filter:rh,WebkitFilter:rh},Zy=r=>k1[r];function Jy(r,t){let e=Zy(r);return e!==rh&&(e=ki),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const R1=new Set(["auto","none","0"]);function M1(r,t,e){let n=0,s;for(;n<r.length&&!s;){const a=r[n];typeof a=="string"&&!R1.has(a)&&ro(a).values.length&&(s=r[n]),n++}if(s&&e)for(const a of t)r[a]=Jy(e,s)}class L1 extends Wh{constructor(t,e,n,s,a){super(t,e,n,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:n}=this;if(!e||!e.current)return;super.readKeyframes();for(let h=0;h<t.length;h++){let d=t[h];if(typeof d=="string"&&(d=d.trim(),Oh(d))){const p=Ky(d,e.current);p!==void 0&&(t[h]=p),h===t.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!qy.has(n)||t.length!==2)return;const[s,a]=t,l=Fm(s),c=Fm(a);if(l!==c)if(Lm(l)&&Lm(c))for(let h=0;h<t.length;h++){const d=t[h];typeof d=="string"&&(t[h]=parseFloat(d))}else is[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,n=[];for(let s=0;s<t.length;s++)(t[s]===null||E1(t[s]))&&n.push(s);n.length&&M1(t,n,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=is[n](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const s=e[e.length-1];s!==void 0&&t.getValue(n,s).jump(s,!1)}measureEndState(){const{element:t,name:e,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const s=t.getValue(e);s&&s.jump(this.measuredOrigin,!1);const a=n.length-1,l=n[a];n[a]=is[e](t.measureViewportBox(),window.getComputedStyle(t.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,h])=>{t.getValue(c).set(h)}),this.resolveNoneKeyframes()}}function D1(r,t,e){if(r instanceof EventTarget)return[r];if(typeof r=="string"){let n=document;const s=e?.[r]??n.querySelectorAll(r);return s?Array.from(s):[]}return Array.from(r)}const t0=(r,t)=>t&&typeof r=="number"?t.transform(r):r;function e0(r){return yy(r)&&"offsetHeight"in r}const jm=30,I1=r=>!isNaN(parseFloat(r));class N1{constructor(t,e={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{const s=We.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=We.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=I1(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new Dh);const n=this.events[t].add(e);return t==="change"?()=>{n(),$t.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,e,n){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=We.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>jm)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,jm);return wy(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ks(r,t){return new N1(r,t)}const{schedule:Kh}=Ry(queueMicrotask,!1),En={x:!1,y:!1};function n0(){return En.x||En.y}function F1(r){return r==="x"||r==="y"?En[r]?null:(En[r]=!0,()=>{En[r]=!1}):En.x||En.y?null:(En.x=En.y=!0,()=>{En.x=En.y=!1})}function i0(r,t){const e=D1(r),n=new AbortController,s={passive:!0,...t,signal:n.signal};return[e,s,()=>n.abort()]}function Bm(r){return!(r.pointerType==="touch"||n0())}function O1(r,t,e={}){const[n,s,a]=i0(r,e),l=c=>{if(!Bm(c))return;const{target:h}=c,d=t(h,c);if(typeof d!="function"||!h)return;const p=m=>{Bm(m)&&(d(m),h.removeEventListener("pointerleave",p))};h.addEventListener("pointerleave",p,s)};return n.forEach(c=>{c.addEventListener("pointerenter",l,s)}),a}const s0=(r,t)=>t?r===t?!0:s0(r,t.parentElement):!1,qh=r=>r.pointerType==="mouse"?typeof r.button!="number"||r.button<=0:r.isPrimary!==!1,j1=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function B1(r){return j1.has(r.tagName)||r.tabIndex!==-1}const el=new WeakSet;function Vm(r){return t=>{t.key==="Enter"&&r(t)}}function Pu(r,t){r.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const V1=(r,t)=>{const e=r.currentTarget;if(!e)return;const n=Vm(()=>{if(el.has(e))return;Pu(e,"down");const s=Vm(()=>{Pu(e,"up")}),a=()=>Pu(e,"cancel");e.addEventListener("keyup",s,t),e.addEventListener("blur",a,t)});e.addEventListener("keydown",n,t),e.addEventListener("blur",()=>e.removeEventListener("keydown",n),t)};function zm(r){return qh(r)&&!n0()}function z1(r,t,e={}){const[n,s,a]=i0(r,e),l=c=>{const h=c.currentTarget;if(!zm(c))return;el.add(h);const d=t(h,c),p=(w,A)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",y),el.has(h)&&el.delete(h),zm(w)&&typeof d=="function"&&d(w,{success:A})},m=w=>{p(w,h===window||h===document||e.useGlobalTarget||s0(h,w.target))},y=w=>{p(w,!1)};window.addEventListener("pointerup",m,s),window.addEventListener("pointercancel",y,s)};return n.forEach(c=>{(e.useGlobalTarget?window:c).addEventListener("pointerdown",l,s),e0(c)&&(c.addEventListener("focus",d=>V1(d,s)),!B1(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),a}function r0(r){return yy(r)&&"ownerSVGElement"in r}function H1(r){return r0(r)&&r.tagName==="svg"}const ke=r=>!!(r&&r.getVelocity),U1=[...Qy,le,ki],$1=r=>U1.find(Yy(r)),Yh=V.createContext({transformPagePoint:r=>r,isStatic:!1,reducedMotion:"never"});class W1 extends V.Component{getSnapshotBeforeUpdate(t){const e=this.props.childRef.current;if(e&&t.isPresent&&!this.props.isPresent){const n=e.offsetParent,s=e0(n)&&n.offsetWidth||0,a=this.props.sizeRef.current;a.height=e.offsetHeight||0,a.width=e.offsetWidth||0,a.top=e.offsetTop,a.left=e.offsetLeft,a.right=s-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function G1({children:r,isPresent:t,anchorX:e,root:n}){const s=V.useId(),a=V.useRef(null),l=V.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=V.useContext(Yh);return V.useInsertionEffect(()=>{const{width:h,height:d,top:p,left:m,right:y}=l.current;if(t||!a.current||!h||!d)return;const w=e==="left"?`left: ${m}`:`right: ${y}`;a.current.dataset.motionPopId=s;const A=document.createElement("style");c&&(A.nonce=c);const x=n??document.head;return x.appendChild(A),A.sheet&&A.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${d}px !important;
            ${w}px !important;
            top: ${p}px !important;
          }
        `),()=>{x.contains(A)&&x.removeChild(A)}},[t]),k.jsx(W1,{isPresent:t,childRef:a,sizeRef:l,children:V.cloneElement(r,{ref:a})})}const X1=({children:r,initial:t,isPresent:e,onExitComplete:n,custom:s,presenceAffectsLayout:a,mode:l,anchorX:c,root:h})=>{const d=Th(K1),p=V.useId();let m=!0,y=V.useMemo(()=>(m=!1,{id:p,initial:t,isPresent:e,custom:s,onExitComplete:w=>{d.set(w,!0);for(const A of d.values())if(!A)return;n&&n()},register:w=>(d.set(w,!1),()=>d.delete(w))}),[e,d,n]);return a&&m&&(y={...y}),V.useMemo(()=>{d.forEach((w,A)=>d.set(A,!1))},[e]),V.useEffect(()=>{!e&&!d.size&&n&&n()},[e]),l==="popLayout"&&(r=k.jsx(G1,{isPresent:e,anchorX:c,root:h,children:r})),k.jsx(ml.Provider,{value:y,children:r})};function K1(){return new Map}function o0(r=!0){const t=V.useContext(ml);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:s}=t,a=V.useId();V.useEffect(()=>{if(r)return s(a)},[r]);const l=V.useCallback(()=>r&&n&&n(a),[a,n,r]);return!e&&n?[!1,l]:[!0]}const $a=r=>r.key||"";function Hm(r){const t=[];return V.Children.forEach(r,e=>{V.isValidElement(e)&&t.push(e)}),t}const Um=({children:r,custom:t,initial:e=!0,onExitComplete:n,presenceAffectsLayout:s=!0,mode:a="sync",propagate:l=!1,anchorX:c="left",root:h})=>{const[d,p]=o0(l),m=V.useMemo(()=>Hm(r),[r]),y=l&&!d?[]:m.map($a),w=V.useRef(!0),A=V.useRef(m),x=Th(()=>new Map),[E,b]=V.useState(m),[C,_]=V.useState(m);my(()=>{w.current=!1,A.current=m;for(let D=0;D<C.length;D++){const I=$a(C[D]);y.includes(I)?x.delete(I):x.get(I)!==!0&&x.set(I,!1)}},[C,y.length,y.join("-")]);const R=[];if(m!==E){let D=[...m];for(let I=0;I<C.length;I++){const j=C[I],H=$a(j);y.includes(H)||(D.splice(I,0,j),R.push(j))}return a==="wait"&&R.length&&(D=R),_(Hm(D)),b(m),null}const{forceRender:P}=V.useContext(Ch);return k.jsx(k.Fragment,{children:C.map(D=>{const I=$a(D),j=l&&!d?!1:m===C||y.includes(I),H=()=>{if(x.has(I))x.set(I,!0);else return;let G=!0;x.forEach(Q=>{Q||(G=!1)}),G&&(P?.(),_(A.current),l&&p?.(),n&&n())};return k.jsx(X1,{isPresent:j,initial:!w.current||e?void 0:!1,custom:t,presenceAffectsLayout:s,mode:a,root:h,onExitComplete:j?void 0:H,anchorX:c,children:D},I)})})},a0=V.createContext({strict:!1}),$m={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},qs={};for(const r in $m)qs[r]={isEnabled:t=>$m[r].some(e=>!!t[e])};function q1(r){for(const t in r)qs[t]={...qs[t],...r[t]}}const Y1=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function cl(r){return r.startsWith("while")||r.startsWith("drag")&&r!=="draggable"||r.startsWith("layout")||r.startsWith("onTap")||r.startsWith("onPan")||r.startsWith("onLayout")||Y1.has(r)}let l0=r=>!cl(r);function Q1(r){typeof r=="function"&&(l0=t=>t.startsWith("on")?!cl(t):r(t))}try{Q1(require("@emotion/is-prop-valid").default)}catch{}function Z1(r,t,e){const n={};for(const s in r)s==="values"&&typeof r.values=="object"||(l0(s)||e===!0&&cl(s)||!t&&!cl(s)||r.draggable&&s.startsWith("onDrag"))&&(n[s]=r[s]);return n}const gl=V.createContext({});function yl(r){return r!==null&&typeof r=="object"&&typeof r.start=="function"}function oo(r){return typeof r=="string"||Array.isArray(r)}const Qh=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Zh=["initial",...Qh];function vl(r){return yl(r.animate)||Zh.some(t=>oo(r[t]))}function c0(r){return!!(vl(r)||r.variants)}function J1(r,t){if(vl(r)){const{initial:e,animate:n}=r;return{initial:e===!1||oo(e)?e:void 0,animate:oo(n)?n:void 0}}return r.inherit!==!1?t:{}}function tS(r){const{initial:t,animate:e}=J1(r,V.useContext(gl));return V.useMemo(()=>({initial:t,animate:e}),[Wm(t),Wm(e)])}function Wm(r){return Array.isArray(r)?r.join(" "):r}const ao={};function eS(r){for(const t in r)ao[t]=r[t],Fh(t)&&(ao[t].isCSSVariable=!0)}function u0(r,{layout:t,layoutId:e}){return tr.has(r)||r.startsWith("origin")||(t||e!==void 0)&&(!!ao[r]||r==="opacity")}const nS={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},iS=Js.length;function sS(r,t,e){let n="",s=!0;for(let a=0;a<iS;a++){const l=Js[a],c=r[l];if(c===void 0)continue;let h=!0;if(typeof c=="number"?h=c===(l.startsWith("scale")?1:0):h=parseFloat(c)===0,!h||e){const d=t0(c,Xh[l]);if(!h){s=!1;const p=nS[l]||l;n+=`${p}(${d}) `}e&&(t[l]=d)}}return n=n.trim(),e?n=e(t,s?"":n):s&&(n="none"),n}function Jh(r,t,e){const{style:n,vars:s,transformOrigin:a}=r;let l=!1,c=!1;for(const h in t){const d=t[h];if(tr.has(h)){l=!0;continue}else if(Fh(h)){s[h]=d;continue}else{const p=t0(d,Xh[h]);h.startsWith("origin")?(c=!0,a[h]=p):n[h]=p}}if(t.transform||(l||e?n.transform=sS(t,r.transform,e):n.transform&&(n.transform="none")),c){const{originX:h="50%",originY:d="50%",originZ:p=0}=a;n.transformOrigin=`${h} ${d} ${p}`}}const td=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function h0(r,t,e){for(const n in t)!ke(t[n])&&!u0(n,e)&&(r[n]=t[n])}function rS({transformTemplate:r},t){return V.useMemo(()=>{const e=td();return Jh(e,t,r),Object.assign({},e.vars,e.style)},[t])}function oS(r,t){const e=r.style||{},n={};return h0(n,e,r),Object.assign(n,rS(r,t)),n}function aS(r,t){const e={},n=oS(r,t);return r.drag&&r.dragListener!==!1&&(e.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=r.drag===!0?"none":`pan-${r.drag==="x"?"y":"x"}`),r.tabIndex===void 0&&(r.onTap||r.onTapStart||r.whileTap)&&(e.tabIndex=0),e.style=n,e}const lS={offset:"stroke-dashoffset",array:"stroke-dasharray"},cS={offset:"strokeDashoffset",array:"strokeDasharray"};function uS(r,t,e=1,n=0,s=!0){r.pathLength=1;const a=s?lS:cS;r[a.offset]=vt.transform(-n);const l=vt.transform(t),c=vt.transform(e);r[a.array]=`${l} ${c}`}function d0(r,{attrX:t,attrY:e,attrScale:n,pathLength:s,pathSpacing:a=1,pathOffset:l=0,...c},h,d,p){if(Jh(r,c,d),h){r.style.viewBox&&(r.attrs.viewBox=r.style.viewBox);return}r.attrs=r.style,r.style={};const{attrs:m,style:y}=r;m.transform&&(y.transform=m.transform,delete m.transform),(y.transform||m.transformOrigin)&&(y.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),y.transform&&(y.transformBox=p?.transformBox??"fill-box",delete m.transformBox),t!==void 0&&(m.x=t),e!==void 0&&(m.y=e),n!==void 0&&(m.scale=n),s!==void 0&&uS(m,s,a,l,!1)}const f0=()=>({...td(),attrs:{}}),p0=r=>typeof r=="string"&&r.toLowerCase()==="svg";function hS(r,t,e,n){const s=V.useMemo(()=>{const a=f0();return d0(a,t,p0(n),r.transformTemplate,r.style),{...a.attrs,style:{...a.style}}},[t]);if(r.style){const a={};h0(a,r.style,r),s.style={...a,...s.style}}return s}const dS=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ed(r){return typeof r!="string"||r.includes("-")?!1:!!(dS.indexOf(r)>-1||/[A-Z]/u.test(r))}function fS(r,t,e,{latestValues:n},s,a=!1){const c=(ed(r)?hS:aS)(t,n,s,r),h=Z1(t,typeof r=="string",a),d=r!==V.Fragment?{...h,...c,ref:e}:{},{children:p}=t,m=V.useMemo(()=>ke(p)?p.get():p,[p]);return V.createElement(r,{...d,children:m})}function Gm(r){const t=[{},{}];return r?.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function nd(r,t,e,n){if(typeof t=="function"){const[s,a]=Gm(n);t=t(e!==void 0?e:r.custom,s,a)}if(typeof t=="string"&&(t=r.variants&&r.variants[t]),typeof t=="function"){const[s,a]=Gm(n);t=t(e!==void 0?e:r.custom,s,a)}return t}function nl(r){return ke(r)?r.get():r}function pS({scrapeMotionValuesFromProps:r,createRenderState:t},e,n,s){return{latestValues:mS(e,n,s,r),renderState:t()}}function mS(r,t,e,n){const s={},a=n(r,{});for(const y in a)s[y]=nl(a[y]);let{initial:l,animate:c}=r;const h=vl(r),d=c0(r);t&&d&&!h&&r.inherit!==!1&&(l===void 0&&(l=t.initial),c===void 0&&(c=t.animate));let p=e?e.initial===!1:!1;p=p||l===!1;const m=p?c:l;if(m&&typeof m!="boolean"&&!yl(m)){const y=Array.isArray(m)?m:[m];for(let w=0;w<y.length;w++){const A=nd(r,y[w]);if(A){const{transitionEnd:x,transition:E,...b}=A;for(const C in b){let _=b[C];if(Array.isArray(_)){const R=p?_.length-1:0;_=_[R]}_!==null&&(s[C]=_)}for(const C in x)s[C]=x[C]}}}return s}const m0=r=>(t,e)=>{const n=V.useContext(gl),s=V.useContext(ml),a=()=>pS(r,t,n,s);return e?a():Th(a)};function id(r,t,e){const{style:n}=r,s={};for(const a in n)(ke(n[a])||t.style&&ke(t.style[a])||u0(a,r)||e?.getValue(a)?.liveStyle!==void 0)&&(s[a]=n[a]);return s}const gS=m0({scrapeMotionValuesFromProps:id,createRenderState:td});function g0(r,t,e){const n=id(r,t,e);for(const s in r)if(ke(r[s])||ke(t[s])){const a=Js.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[a]=r[s]}return n}const yS=m0({scrapeMotionValuesFromProps:g0,createRenderState:f0}),vS=Symbol.for("motionComponentSymbol");function Os(r){return r&&typeof r=="object"&&Object.prototype.hasOwnProperty.call(r,"current")}function wS(r,t,e){return V.useCallback(n=>{n&&r.onMount&&r.onMount(n),t&&(n?t.mount(n):t.unmount()),e&&(typeof e=="function"?e(n):Os(e)&&(e.current=n))},[t])}const sd=r=>r.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),xS="framerAppearId",y0="data-"+sd(xS),v0=V.createContext({});function AS(r,t,e,n,s){const{visualElement:a}=V.useContext(gl),l=V.useContext(a0),c=V.useContext(ml),h=V.useContext(Yh).reducedMotion,d=V.useRef(null);n=n||l.renderer,!d.current&&n&&(d.current=n(r,{visualState:t,parent:a,props:e,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:h}));const p=d.current,m=V.useContext(v0);p&&!p.projection&&s&&(p.type==="html"||p.type==="svg")&&SS(d.current,e,s,m);const y=V.useRef(!1);V.useInsertionEffect(()=>{p&&y.current&&p.update(e,c)});const w=e[y0],A=V.useRef(!!w&&!window.MotionHandoffIsComplete?.(w)&&window.MotionHasOptimisedAnimation?.(w));return my(()=>{p&&(y.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),p.scheduleRenderMicrotask(),A.current&&p.animationState&&p.animationState.animateChanges())}),V.useEffect(()=>{p&&(!A.current&&p.animationState&&p.animationState.animateChanges(),A.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(w)}),A.current=!1),p.enteringChildren=void 0)}),p}function SS(r,t,e,n){const{layoutId:s,layout:a,drag:l,dragConstraints:c,layoutScroll:h,layoutRoot:d,layoutCrossfade:p}=t;r.projection=new e(r.latestValues,t["data-framer-portal-id"]?void 0:w0(r.parent)),r.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!l||c&&Os(c),visualElement:r,animationType:typeof a=="string"?a:"both",initialPromotionConfig:n,crossfade:p,layoutScroll:h,layoutRoot:d})}function w0(r){if(r)return r.options.allowProjection!==!1?r.projection:w0(r.parent)}function ku(r,{forwardMotionProps:t=!1}={},e,n){e&&q1(e);const s=ed(r)?yS:gS;function a(c,h){let d;const p={...V.useContext(Yh),...c,layoutId:bS(c)},{isStatic:m}=p,y=tS(c),w=s(c,m);if(!m&&Ph){ES();const A=_S(p);d=A.MeasureLayout,y.visualElement=AS(r,w,p,n,A.ProjectionNode)}return k.jsxs(gl.Provider,{value:y,children:[d&&y.visualElement?k.jsx(d,{visualElement:y.visualElement,...p}):null,fS(r,c,wS(w,y.visualElement,h),w,m,t)]})}a.displayName=`motion.${typeof r=="string"?r:`create(${r.displayName??r.name??""})`}`;const l=V.forwardRef(a);return l[vS]=r,l}function bS({layoutId:r}){const t=V.useContext(Ch).id;return t&&r!==void 0?t+"-"+r:r}function ES(r,t){V.useContext(a0).strict}function _S(r){const{drag:t,layout:e}=qs;if(!t&&!e)return{};const n={...t,...e};return{MeasureLayout:t?.isEnabled(r)||e?.isEnabled(r)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function CS(r,t){if(typeof Proxy>"u")return ku;const e=new Map,n=(a,l)=>ku(a,l,r,t),s=(a,l)=>n(a,l);return new Proxy(s,{get:(a,l)=>l==="create"?n:(e.has(l)||e.set(l,ku(l,void 0,r,t)),e.get(l))})}function x0({top:r,left:t,right:e,bottom:n}){return{x:{min:t,max:e},y:{min:r,max:n}}}function TS({x:r,y:t}){return{top:t.min,right:r.max,bottom:t.max,left:r.min}}function PS(r,t){if(!t)return r;const e=t({x:r.left,y:r.top}),n=t({x:r.right,y:r.bottom});return{top:e.y,left:e.x,bottom:n.y,right:n.x}}function Ru(r){return r===void 0||r===1}function oh({scale:r,scaleX:t,scaleY:e}){return!Ru(r)||!Ru(t)||!Ru(e)}function qi(r){return oh(r)||A0(r)||r.z||r.rotate||r.rotateX||r.rotateY||r.skewX||r.skewY}function A0(r){return Xm(r.x)||Xm(r.y)}function Xm(r){return r&&r!=="0%"}function ul(r,t,e){const n=r-e,s=t*n;return e+s}function Km(r,t,e,n,s){return s!==void 0&&(r=ul(r,s,n)),ul(r,e,n)+t}function ah(r,t=0,e=1,n,s){r.min=Km(r.min,t,e,n,s),r.max=Km(r.max,t,e,n,s)}function S0(r,{x:t,y:e}){ah(r.x,t.translate,t.scale,t.originPoint),ah(r.y,e.translate,e.scale,e.originPoint)}const qm=.999999999999,Ym=1.0000000000001;function kS(r,t,e,n=!1){const s=e.length;if(!s)return;t.x=t.y=1;let a,l;for(let c=0;c<s;c++){a=e[c],l=a.projectionDelta;const{visualElement:h}=a.options;h&&h.props.style&&h.props.style.display==="contents"||(n&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Bs(r,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),l&&(t.x*=l.x.scale,t.y*=l.y.scale,S0(r,l)),n&&qi(a.latestValues)&&Bs(r,a.latestValues))}t.x<Ym&&t.x>qm&&(t.x=1),t.y<Ym&&t.y>qm&&(t.y=1)}function js(r,t){r.min=r.min+t,r.max=r.max+t}function Qm(r,t,e,n,s=.5){const a=Kt(r.min,r.max,s);ah(r,t,e,a,n)}function Bs(r,t){Qm(r.x,t.x,t.scaleX,t.scale,t.originX),Qm(r.y,t.y,t.scaleY,t.scale,t.originY)}function b0(r,t){return x0(PS(r.getBoundingClientRect(),t))}function RS(r,t,e){const n=b0(r,e),{scroll:s}=t;return s&&(js(n.x,s.offset.x),js(n.y,s.offset.y)),n}const Zm=()=>({translate:0,scale:1,origin:0,originPoint:0}),Vs=()=>({x:Zm(),y:Zm()}),Jm=()=>({min:0,max:0}),ie=()=>({x:Jm(),y:Jm()}),lh={current:null},E0={current:!1};function MS(){if(E0.current=!0,!!Ph)if(window.matchMedia){const r=window.matchMedia("(prefers-reduced-motion)"),t=()=>lh.current=r.matches;r.addEventListener("change",t),t()}else lh.current=!1}const LS=new WeakMap;function DS(r,t,e){for(const n in t){const s=t[n],a=e[n];if(ke(s))r.addValue(n,s);else if(ke(a))r.addValue(n,Ks(s,{owner:r}));else if(a!==s)if(r.hasValue(n)){const l=r.getValue(n);l.liveStyle===!0?l.jump(s):l.hasAnimated||l.set(s)}else{const l=r.getStaticValue(n);r.addValue(n,Ks(l!==void 0?l:s,{owner:r}))}}for(const n in e)t[n]===void 0&&r.removeValue(n);return t}const tg=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class IS{scrapeMotionValuesFromProps(t,e,n){return{}}constructor({parent:t,props:e,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:a,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Wh,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=We.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,$t.render(this.render,!1,!0))};const{latestValues:h,renderState:d}=l;this.latestValues=h,this.baseTarget={...h},this.initialValues=e.initial?{...h}:{},this.renderState=d,this.parent=t,this.props=e,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=c,this.blockInitialAnimation=!!a,this.isControllingVariants=vl(e),this.isVariantNode=c0(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:p,...m}=this.scrapeMotionValuesFromProps(e,{},this);for(const y in m){const w=m[y];h[y]!==void 0&&ke(w)&&w.set(h[y])}}mount(t){this.current=t,LS.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,n)=>this.bindToMotionValue(n,e)),E0.current||MS(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:lh.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Pi(this.notifyUpdate),Pi(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,e){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=tr.has(t);n&&this.onBindTransform&&this.onBindTransform();const s=e.on("change",l=>{this.latestValues[t]=l,this.props.onUpdate&&$t.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{s(),a&&a(),e.owner&&e.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in qs){const e=qs[t];if(!e)continue;const{isEnabled:n,Feature:s}=e;if(!this.features[t]&&s&&n(this.props)&&(this.features[t]=new s(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ie()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let n=0;n<tg.length;n++){const s=tg[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,l=t[a];l&&(this.propEventSubscriptions[s]=this.on(s,l))}this.prevMotionValues=DS(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const n=this.values.get(t);e!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&e!==void 0&&(n=Ks(e===null?void 0:e,{owner:this}),this.addValue(t,n)),n}readValue(t,e){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(gy(n)||vy(n))?n=parseFloat(n):!$1(n)&&ki.test(e)&&(n=Jy(t,e)),this.setBaseTarget(t,ke(n)?n.get():n)),ke(n)?n.get():n}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){const{initial:e}=this.props;let n;if(typeof e=="string"||typeof e=="object"){const a=nd(this.props,e,this.presenceContext?.custom);a&&(n=a[t])}if(e&&n!==void 0)return n;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!ke(s)?s:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new Dh),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}scheduleRenderMicrotask(){Kh.render(this.render)}}class _0 extends IS{constructor(){super(...arguments),this.KeyframeResolver=L1}sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:n}){delete e[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;ke(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function C0(r,{style:t,vars:e},n,s){const a=r.style;let l;for(l in t)a[l]=t[l];s?.applyProjectionStyles(a,n);for(l in e)a.setProperty(l,e[l])}function NS(r){return window.getComputedStyle(r)}class FS extends _0{constructor(){super(...arguments),this.type="html",this.renderInstance=C0}readValueFromInstance(t,e){if(tr.has(e))return this.projection?.isProjecting?Ju(e):QA(t,e);{const n=NS(t),s=(Fh(e)?n.getPropertyValue(e):n[e])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:e}){return b0(t,e)}build(t,e,n){Jh(t,e,n.transformTemplate)}scrapeMotionValuesFromProps(t,e,n){return id(t,e,n)}}const T0=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function OS(r,t,e,n){C0(r,t,void 0,n);for(const s in t.attrs)r.setAttribute(T0.has(s)?s:sd(s),t.attrs[s])}class jS extends _0{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ie}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(tr.has(e)){const n=Zy(e);return n&&n.default||0}return e=T0.has(e)?e:sd(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,n){return g0(t,e,n)}build(t,e,n){d0(t,e,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,e,n,s){OS(t,e,n,s)}mount(t){this.isSVGTag=p0(t.tagName),super.mount(t)}}const BS=(r,t)=>ed(r)?new jS(t):new FS(t,{allowProjection:r!==V.Fragment});function Us(r,t,e){const n=r.getProps();return nd(n,t,e!==void 0?e:n.custom,r)}const ch=r=>Array.isArray(r);function VS(r,t,e){r.hasValue(t)?r.getValue(t).set(e):r.addValue(t,Ks(e))}function zS(r){return ch(r)?r[r.length-1]||0:r}function HS(r,t){const e=Us(r,t);let{transitionEnd:n={},transition:s={},...a}=e||{};a={...a,...n};for(const l in a){const c=zS(a[l]);VS(r,l,c)}}function US(r){return!!(ke(r)&&r.add)}function uh(r,t){const e=r.getValue("willChange");if(US(e))return e.add(t);if(!e&&ni.WillChange){const n=new ni.WillChange("auto");r.addValue("willChange",n),n.add(t)}}function P0(r){return r.props[y0]}const $S=r=>r!==null;function WS(r,{repeat:t,repeatType:e="loop"},n){const s=r.filter($S),a=t&&e!=="loop"&&t%2===1?0:s.length-1;return s[a]}const GS={type:"spring",stiffness:500,damping:25,restSpeed:10},XS=r=>({type:"spring",stiffness:550,damping:r===0?2*Math.sqrt(550):30,restSpeed:10}),KS={type:"keyframes",duration:.8},qS={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},YS=(r,{keyframes:t})=>t.length>2?KS:tr.has(r)?r.startsWith("scale")?XS(t[1]):GS:qS;function QS({when:r,delay:t,delayChildren:e,staggerChildren:n,staggerDirection:s,repeat:a,repeatType:l,repeatDelay:c,from:h,elapsed:d,...p}){return!!Object.keys(p).length}const rd=(r,t,e,n={},s,a)=>l=>{const c=Gh(n,r)||{},h=c.delay||n.delay||0;let{elapsed:d=0}=n;d=d-zn(h);const p={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:t.getVelocity(),...c,delay:-d,onUpdate:y=>{t.set(y),c.onUpdate&&c.onUpdate(y)},onComplete:()=>{l(),c.onComplete&&c.onComplete()},name:r,motionValue:t,element:a?void 0:s};QS(c)||Object.assign(p,YS(r,p)),p.duration&&(p.duration=zn(p.duration)),p.repeatDelay&&(p.repeatDelay=zn(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let m=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(sh(p),p.delay===0&&(m=!0)),(ni.instantAnimations||ni.skipAnimations)&&(m=!0,sh(p),p.delay=0),p.allowFlatten=!c.type&&!c.ease,m&&!a&&t.get()!==void 0){const y=WS(p.keyframes,c);if(y!==void 0){$t.update(()=>{p.onUpdate(y),p.onComplete()});return}}return c.isSync?new $h(p):new x1(p)};function ZS({protectedKeys:r,needsAnimating:t},e){const n=r.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,n}function k0(r,t,{delay:e=0,transitionOverride:n,type:s}={}){let{transition:a=r.getDefaultTransition(),transitionEnd:l,...c}=t;n&&(a=n);const h=[],d=s&&r.animationState&&r.animationState.getState()[s];for(const p in c){const m=r.getValue(p,r.latestValues[p]??null),y=c[p];if(y===void 0||d&&ZS(d,p))continue;const w={delay:e,...Gh(a||{},p)},A=m.get();if(A!==void 0&&!m.isAnimating&&!Array.isArray(y)&&y===A&&!w.velocity)continue;let x=!1;if(window.MotionHandoffAnimation){const b=P0(r);if(b){const C=window.MotionHandoffAnimation(b,p,$t);C!==null&&(w.startTime=C,x=!0)}}uh(r,p),m.start(rd(p,m,y,r.shouldReduceMotion&&qy.has(p)?{type:!1}:w,r,x));const E=m.animation;E&&h.push(E)}return l&&Promise.all(h).then(()=>{$t.update(()=>{l&&HS(r,l)})}),h}function R0(r,t,e,n=0,s=1){const a=Array.from(r).sort((d,p)=>d.sortNodePosition(p)).indexOf(t),l=r.size,c=(l-1)*n;return typeof e=="function"?e(a,l):s===1?a*n:c-a*n}function hh(r,t,e={}){const n=Us(r,t,e.type==="exit"?r.presenceContext?.custom:void 0);let{transition:s=r.getDefaultTransition()||{}}=n||{};e.transitionOverride&&(s=e.transitionOverride);const a=n?()=>Promise.all(k0(r,n,e)):()=>Promise.resolve(),l=r.variantChildren&&r.variantChildren.size?(h=0)=>{const{delayChildren:d=0,staggerChildren:p,staggerDirection:m}=s;return JS(r,t,h,d,p,m,e)}:()=>Promise.resolve(),{when:c}=s;if(c){const[h,d]=c==="beforeChildren"?[a,l]:[l,a];return h().then(()=>d())}else return Promise.all([a(),l(e.delay)])}function JS(r,t,e=0,n=0,s=0,a=1,l){const c=[];for(const h of r.variantChildren)h.notify("AnimationStart",t),c.push(hh(h,t,{...l,delay:e+(typeof n=="function"?0:n)+R0(r.variantChildren,h,n,s,a)}).then(()=>h.notify("AnimationComplete",t)));return Promise.all(c)}function tb(r,t,e={}){r.notify("AnimationStart",t);let n;if(Array.isArray(t)){const s=t.map(a=>hh(r,a,e));n=Promise.all(s)}else if(typeof t=="string")n=hh(r,t,e);else{const s=typeof t=="function"?Us(r,t,e.custom):t;n=Promise.all(k0(r,s,e))}return n.then(()=>{r.notify("AnimationComplete",t)})}function M0(r,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==r.length)return!1;for(let n=0;n<e;n++)if(t[n]!==r[n])return!1;return!0}const eb=Zh.length;function L0(r){if(!r)return;if(!r.isControllingVariants){const e=r.parent?L0(r.parent)||{}:{};return r.props.initial!==void 0&&(e.initial=r.props.initial),e}const t={};for(let e=0;e<eb;e++){const n=Zh[e],s=r.props[n];(oo(s)||s===!1)&&(t[n]=s)}return t}const nb=[...Qh].reverse(),ib=Qh.length;function sb(r){return t=>Promise.all(t.map(({animation:e,options:n})=>tb(r,e,n)))}function rb(r){let t=sb(r),e=eg(),n=!0;const s=h=>(d,p)=>{const m=Us(r,p,h==="exit"?r.presenceContext?.custom:void 0);if(m){const{transition:y,transitionEnd:w,...A}=m;d={...d,...A,...w}}return d};function a(h){t=h(r)}function l(h){const{props:d}=r,p=L0(r.parent)||{},m=[],y=new Set;let w={},A=1/0;for(let E=0;E<ib;E++){const b=nb[E],C=e[b],_=d[b]!==void 0?d[b]:p[b],R=oo(_),P=b===h?C.isActive:null;P===!1&&(A=E);let D=_===p[b]&&_!==d[b]&&R;if(D&&n&&r.manuallyAnimateOnMount&&(D=!1),C.protectedKeys={...w},!C.isActive&&P===null||!_&&!C.prevProp||yl(_)||typeof _=="boolean")continue;const I=ob(C.prevProp,_);let j=I||b===h&&C.isActive&&!D&&R||E>A&&R,H=!1;const G=Array.isArray(_)?_:[_];let Q=G.reduce(s(b),{});P===!1&&(Q={});const{prevResolvedValues:ht={}}=C,lt={...ht,...Q},et=U=>{j=!0,y.has(U)&&(H=!0,y.delete(U)),C.needsAnimating[U]=!0;const $=r.getValue(U);$&&($.liveStyle=!1)};for(const U in lt){const $=Q[U],J=ht[U];if(w.hasOwnProperty(U))continue;let Z=!1;ch($)&&ch(J)?Z=!M0($,J):Z=$!==J,Z?$!=null?et(U):y.add(U):$!==void 0&&y.has(U)?et(U):C.protectedKeys[U]=!0}C.prevProp=_,C.prevResolvedValues=Q,C.isActive&&(w={...w,...Q}),n&&r.blockInitialAnimation&&(j=!1);const bt=D&&I;j&&(!bt||H)&&m.push(...G.map(U=>{const $={type:b};if(typeof U=="string"&&n&&!bt&&r.manuallyAnimateOnMount&&r.parent){const{parent:J}=r,Z=Us(J,U);if(J.enteringChildren&&Z){const{delayChildren:N}=Z.transition||{};$.delay=R0(J.enteringChildren,r,N)}}return{animation:U,options:$}}))}if(y.size){const E={};if(typeof d.initial!="boolean"){const b=Us(r,Array.isArray(d.initial)?d.initial[0]:d.initial);b&&b.transition&&(E.transition=b.transition)}y.forEach(b=>{const C=r.getBaseTarget(b),_=r.getValue(b);_&&(_.liveStyle=!0),E[b]=C??null}),m.push({animation:E})}let x=!!m.length;return n&&(d.initial===!1||d.initial===d.animate)&&!r.manuallyAnimateOnMount&&(x=!1),n=!1,x?t(m):Promise.resolve()}function c(h,d){if(e[h].isActive===d)return Promise.resolve();r.variantChildren?.forEach(m=>m.animationState?.setActive(h,d)),e[h].isActive=d;const p=l(h);for(const m in e)e[m].protectedKeys={};return p}return{animateChanges:l,setActive:c,setAnimateFunction:a,getState:()=>e,reset:()=>{e=eg(),n=!0}}}function ob(r,t){return typeof t=="string"?t!==r:Array.isArray(t)?!M0(t,r):!1}function Xi(r=!1){return{isActive:r,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function eg(){return{animate:Xi(!0),whileInView:Xi(),whileHover:Xi(),whileTap:Xi(),whileDrag:Xi(),whileFocus:Xi(),exit:Xi()}}class Mi{constructor(t){this.isMounted=!1,this.node=t}update(){}}class ab extends Mi{constructor(t){super(t),t.animationState||(t.animationState=rb(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();yl(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let lb=0;class cb extends Mi{constructor(){super(...arguments),this.id=lb++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const s=this.node.animationState.setActive("exit",!t);e&&!t&&s.then(()=>{e(this.id)})}mount(){const{register:t,onExitComplete:e}=this.node.presenceContext||{};e&&e(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const ub={animation:{Feature:ab},exit:{Feature:cb}};function lo(r,t,e,n={passive:!0}){return r.addEventListener(t,e,n),()=>r.removeEventListener(t,e)}function wo(r){return{point:{x:r.pageX,y:r.pageY}}}const hb=r=>t=>qh(t)&&r(t,wo(t));function Zr(r,t,e,n){return lo(r,t,hb(e),n)}const D0=1e-4,db=1-D0,fb=1+D0,I0=.01,pb=0-I0,mb=0+I0;function De(r){return r.max-r.min}function gb(r,t,e){return Math.abs(r-t)<=e}function ng(r,t,e,n=.5){r.origin=n,r.originPoint=Kt(t.min,t.max,r.origin),r.scale=De(e)/De(t),r.translate=Kt(e.min,e.max,r.origin)-r.originPoint,(r.scale>=db&&r.scale<=fb||isNaN(r.scale))&&(r.scale=1),(r.translate>=pb&&r.translate<=mb||isNaN(r.translate))&&(r.translate=0)}function Jr(r,t,e,n){ng(r.x,t.x,e.x,n?n.originX:void 0),ng(r.y,t.y,e.y,n?n.originY:void 0)}function ig(r,t,e){r.min=e.min+t.min,r.max=r.min+De(t)}function yb(r,t,e){ig(r.x,t.x,e.x),ig(r.y,t.y,e.y)}function sg(r,t,e){r.min=t.min-e.min,r.max=r.min+De(t)}function to(r,t,e){sg(r.x,t.x,e.x),sg(r.y,t.y,e.y)}function dn(r){return[r("x"),r("y")]}const N0=({current:r})=>r?r.ownerDocument.defaultView:null,rg=(r,t)=>Math.abs(r-t);function vb(r,t){const e=rg(r.x,t.x),n=rg(r.y,t.y);return Math.sqrt(e**2+n**2)}class F0{constructor(t,e,{transformPagePoint:n,contextWindow:s=window,dragSnapToOrigin:a=!1,distanceThreshold:l=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=Lu(this.lastMoveEventInfo,this.history),w=this.startEvent!==null,A=vb(y.offset,{x:0,y:0})>=this.distanceThreshold;if(!w&&!A)return;const{point:x}=y,{timestamp:E}=xe;this.history.push({...x,timestamp:E});const{onStart:b,onMove:C}=this.handlers;w||(b&&b(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),C&&C(this.lastMoveEvent,y)},this.handlePointerMove=(y,w)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=Mu(w,this.transformPagePoint),$t.update(this.updatePoint,!0)},this.handlePointerUp=(y,w)=>{this.end();const{onEnd:A,onSessionEnd:x,resumeAnimation:E}=this.handlers;if(this.dragSnapToOrigin&&E&&E(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=Lu(y.type==="pointercancel"?this.lastMoveEventInfo:Mu(w,this.transformPagePoint),this.history);this.startEvent&&A&&A(y,b),x&&x(y,b)},!qh(t))return;this.dragSnapToOrigin=a,this.handlers=e,this.transformPagePoint=n,this.distanceThreshold=l,this.contextWindow=s||window;const c=wo(t),h=Mu(c,this.transformPagePoint),{point:d}=h,{timestamp:p}=xe;this.history=[{...d,timestamp:p}];const{onSessionStart:m}=e;m&&m(t,Lu(h,this.history)),this.removeListeners=go(Zr(this.contextWindow,"pointermove",this.handlePointerMove),Zr(this.contextWindow,"pointerup",this.handlePointerUp),Zr(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Pi(this.updatePoint)}}function Mu(r,t){return t?{point:t(r.point)}:r}function og(r,t){return{x:r.x-t.x,y:r.y-t.y}}function Lu({point:r},t){return{point:r,delta:og(r,O0(t)),offset:og(r,wb(t)),velocity:xb(t,.1)}}function wb(r){return r[0]}function O0(r){return r[r.length-1]}function xb(r,t){if(r.length<2)return{x:0,y:0};let e=r.length-1,n=null;const s=O0(r);for(;e>=0&&(n=r[e],!(s.timestamp-n.timestamp>zn(t)));)e--;if(!n)return{x:0,y:0};const a=Hn(s.timestamp-n.timestamp);if(a===0)return{x:0,y:0};const l={x:(s.x-n.x)/a,y:(s.y-n.y)/a};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function Ab(r,{min:t,max:e},n){return t!==void 0&&r<t?r=n?Kt(t,r,n.min):Math.max(r,t):e!==void 0&&r>e&&(r=n?Kt(e,r,n.max):Math.min(r,e)),r}function ag(r,t,e){return{min:t!==void 0?r.min+t:void 0,max:e!==void 0?r.max+e-(r.max-r.min):void 0}}function Sb(r,{top:t,left:e,bottom:n,right:s}){return{x:ag(r.x,e,s),y:ag(r.y,t,n)}}function lg(r,t){let e=t.min-r.min,n=t.max-r.max;return t.max-t.min<r.max-r.min&&([e,n]=[n,e]),{min:e,max:n}}function bb(r,t){return{x:lg(r.x,t.x),y:lg(r.y,t.y)}}function Eb(r,t){let e=.5;const n=De(r),s=De(t);return s>n?e=io(t.min,t.max-n,r.min):n>s&&(e=io(r.min,r.max-s,t.min)),ei(0,1,e)}function _b(r,t){const e={};return t.min!==void 0&&(e.min=t.min-r.min),t.max!==void 0&&(e.max=t.max-r.min),e}const dh=.35;function Cb(r=dh){return r===!1?r=0:r===!0&&(r=dh),{x:cg(r,"left","right"),y:cg(r,"top","bottom")}}function cg(r,t,e){return{min:ug(r,t),max:ug(r,e)}}function ug(r,t){return typeof r=="number"?r:r[t]||0}const Tb=new WeakMap;class Pb{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ie(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:e=!1,distanceThreshold:n}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=m=>{const{dragSnapToOrigin:y}=this.getProps();y?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(wo(m).point)},l=(m,y)=>{const{drag:w,dragPropagation:A,onDragStart:x}=this.getProps();if(w&&!A&&(this.openDragLock&&this.openDragLock(),this.openDragLock=F1(w),!this.openDragLock))return;this.latestPointerEvent=m,this.latestPanInfo=y,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),dn(b=>{let C=this.getAxisMotionValue(b).get()||0;if(Un.test(C)){const{projection:_}=this.visualElement;if(_&&_.layout){const R=_.layout.layoutBox[b];R&&(C=De(R)*(parseFloat(C)/100))}}this.originPoint[b]=C}),x&&$t.postRender(()=>x(m,y)),uh(this.visualElement,"transform");const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},c=(m,y)=>{this.latestPointerEvent=m,this.latestPanInfo=y;const{dragPropagation:w,dragDirectionLock:A,onDirectionLock:x,onDrag:E}=this.getProps();if(!w&&!this.openDragLock)return;const{offset:b}=y;if(A&&this.currentDirection===null){this.currentDirection=kb(b),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",y.point,b),this.updateAxis("y",y.point,b),this.visualElement.render(),E&&E(m,y)},h=(m,y)=>{this.latestPointerEvent=m,this.latestPanInfo=y,this.stop(m,y),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>dn(m=>this.getAnimationState(m)==="paused"&&this.getAxisMotionValue(m).animation?.play()),{dragSnapToOrigin:p}=this.getProps();this.panSession=new F0(t,{onSessionStart:a,onStart:l,onMove:c,onSessionEnd:h,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,distanceThreshold:n,contextWindow:N0(this.visualElement)})}stop(t,e){const n=t||this.latestPointerEvent,s=e||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!s||!n)return;const{velocity:l}=s;this.startAnimation(l);const{onDragEnd:c}=this.getProps();c&&$t.postRender(()=>c(n,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,n){const{drag:s}=this.getProps();if(!n||!Wa(t,s,this.currentDirection))return;const a=this.getAxisMotionValue(t);let l=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(l=Ab(l,this.constraints[t],this.elastic[t])),a.set(l)}resolveConstraints(){const{dragConstraints:t,dragElastic:e}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;t&&Os(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=Sb(n.layoutBox,t):this.constraints=!1,this.elastic=Cb(e),s!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&dn(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=_b(n.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!Os(t))return!1;const n=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=RS(n,s.root,this.visualElement.getTransformPagePoint());let l=bb(s.layout.layoutBox,a);if(e){const c=e(TS(l));this.hasMutatedConstraints=!!c,c&&(l=x0(c))}return l}startAnimation(t){const{drag:e,dragMomentum:n,dragElastic:s,dragTransition:a,dragSnapToOrigin:l,onDragTransitionEnd:c}=this.getProps(),h=this.constraints||{},d=dn(p=>{if(!Wa(p,e,this.currentDirection))return;let m=h&&h[p]||{};l&&(m={min:0,max:0});const y=s?200:1e6,w=s?40:1e7,A={type:"inertia",velocity:n?t[p]:0,bounceStiffness:y,bounceDamping:w,timeConstant:750,restDelta:1,restSpeed:10,...a,...m};return this.startAxisValueAnimation(p,A)});return Promise.all(d).then(c)}startAxisValueAnimation(t,e){const n=this.getAxisMotionValue(t);return uh(this.visualElement,t),n.start(rd(t,n,0,e,this.visualElement,!1))}stopAnimation(){dn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){dn(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),s=n[e];return s||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){dn(e=>{const{drag:n}=this.getProps();if(!Wa(e,n,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(e);if(s&&s.layout){const{min:l,max:c}=s.layout.layoutBox[e];a.set(t[e]-Kt(l,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:n}=this.visualElement;if(!Os(e)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};dn(l=>{const c=this.getAxisMotionValue(l);if(c&&this.constraints!==!1){const h=c.get();s[l]=Eb({min:h,max:h},this.constraints[l])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),dn(l=>{if(!Wa(l,t,null))return;const c=this.getAxisMotionValue(l),{min:h,max:d}=this.constraints[l];c.set(Kt(h,d,s[l]))})}addListeners(){if(!this.visualElement.current)return;Tb.set(this.visualElement,this);const t=this.visualElement.current,e=Zr(t,"pointerdown",h=>{const{drag:d,dragListener:p=!0}=this.getProps();d&&p&&this.start(h)}),n=()=>{const{dragConstraints:h}=this.getProps();Os(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),$t.read(n);const l=lo(window,"resize",()=>this.scalePositionWithinConstraints()),c=s.addEventListener("didUpdate",(({delta:h,hasLayoutChanged:d})=>{this.isDragging&&d&&(dn(p=>{const m=this.getAxisMotionValue(p);m&&(this.originPoint[p]+=h[p].translate,m.set(m.get()+h[p].translate))}),this.visualElement.render())}));return()=>{l(),e(),a(),c&&c()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:l=dh,dragMomentum:c=!0}=t;return{...t,drag:e,dragDirectionLock:n,dragPropagation:s,dragConstraints:a,dragElastic:l,dragMomentum:c}}}function Wa(r,t,e){return(t===!0||t===r)&&(e===null||e===r)}function kb(r,t=10){let e=null;return Math.abs(r.y)>t?e="y":Math.abs(r.x)>t&&(e="x"),e}class Rb extends Mi{constructor(t){super(t),this.removeGroupControls=fn,this.removeListeners=fn,this.controls=new Pb(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||fn}unmount(){this.removeGroupControls(),this.removeListeners()}}const hg=r=>(t,e)=>{r&&$t.postRender(()=>r(t,e))};class Mb extends Mi{constructor(){super(...arguments),this.removePointerDownListener=fn}onPointerDown(t){this.session=new F0(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:N0(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:hg(t),onStart:hg(e),onMove:n,onEnd:(a,l)=>{delete this.session,s&&$t.postRender(()=>s(a,l))}}}mount(){this.removePointerDownListener=Zr(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const il={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function dg(r,t){return t.max===t.min?0:r/(t.max-t.min)*100}const zr={correct:(r,t)=>{if(!t.target)return r;if(typeof r=="string")if(vt.test(r))r=parseFloat(r);else return r;const e=dg(r,t.target.x),n=dg(r,t.target.y);return`${e}% ${n}%`}},Lb={correct:(r,{treeScale:t,projectionDelta:e})=>{const n=r,s=ki.parse(r);if(s.length>5)return n;const a=ki.createTransformer(r),l=typeof s[0]!="number"?1:0,c=e.x.scale*t.x,h=e.y.scale*t.y;s[0+l]/=c,s[1+l]/=h;const d=Kt(c,h,.5);return typeof s[2+l]=="number"&&(s[2+l]/=d),typeof s[3+l]=="number"&&(s[3+l]/=d),a(s)}};let Du=!1;class Db extends V.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n,layoutId:s}=this.props,{projection:a}=t;eS(Ib),a&&(e.group&&e.group.add(a),n&&n.register&&s&&n.register(a),Du&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),il.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:n,drag:s,isPresent:a}=this.props,{projection:l}=n;return l&&(l.isPresent=a,Du=!0,s||t.layoutDependency!==e||e===void 0||t.isPresent!==a?l.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?l.promote():l.relegate()||$t.postRender(()=>{const c=l.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Kh.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n}=this.props,{projection:s}=t;Du=!0,s&&(s.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function j0(r){const[t,e]=o0(),n=V.useContext(Ch);return k.jsx(Db,{...r,layoutGroup:n,switchLayoutGroup:V.useContext(v0),isPresent:t,safeToRemove:e})}const Ib={borderRadius:{...zr,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:zr,borderTopRightRadius:zr,borderBottomLeftRadius:zr,borderBottomRightRadius:zr,boxShadow:Lb};function Nb(r,t,e){const n=ke(r)?r:Ks(r);return n.start(rd("",n,t,e)),n.animation}const Fb=(r,t)=>r.depth-t.depth;class Ob{constructor(){this.children=[],this.isDirty=!1}add(t){kh(this.children,t),this.isDirty=!0}remove(t){Rh(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Fb),this.isDirty=!1,this.children.forEach(t)}}function jb(r,t){const e=We.now(),n=({timestamp:s})=>{const a=s-e;a>=t&&(Pi(n),r(a-t))};return $t.setup(n,!0),()=>Pi(n)}const B0=["TopLeft","TopRight","BottomLeft","BottomRight"],Bb=B0.length,fg=r=>typeof r=="string"?parseFloat(r):r,pg=r=>typeof r=="number"||vt.test(r);function Vb(r,t,e,n,s,a){s?(r.opacity=Kt(0,e.opacity??1,zb(n)),r.opacityExit=Kt(t.opacity??1,0,Hb(n))):a&&(r.opacity=Kt(t.opacity??1,e.opacity??1,n));for(let l=0;l<Bb;l++){const c=`border${B0[l]}Radius`;let h=mg(t,c),d=mg(e,c);if(h===void 0&&d===void 0)continue;h||(h=0),d||(d=0),h===0||d===0||pg(h)===pg(d)?(r[c]=Math.max(Kt(fg(h),fg(d),n),0),(Un.test(d)||Un.test(h))&&(r[c]+="%")):r[c]=d}(t.rotate||e.rotate)&&(r.rotate=Kt(t.rotate||0,e.rotate||0,n))}function mg(r,t){return r[t]!==void 0?r[t]:r.borderRadius}const zb=V0(0,.5,Cy),Hb=V0(.5,.95,fn);function V0(r,t,e){return n=>n<r?0:n>t?1:e(io(r,t,n))}function gg(r,t){r.min=t.min,r.max=t.max}function cn(r,t){gg(r.x,t.x),gg(r.y,t.y)}function yg(r,t){r.translate=t.translate,r.scale=t.scale,r.originPoint=t.originPoint,r.origin=t.origin}function vg(r,t,e,n,s){return r-=t,r=ul(r,1/e,n),s!==void 0&&(r=ul(r,1/s,n)),r}function Ub(r,t=0,e=1,n=.5,s,a=r,l=r){if(Un.test(t)&&(t=parseFloat(t),t=Kt(l.min,l.max,t/100)-l.min),typeof t!="number")return;let c=Kt(a.min,a.max,n);r===a&&(c-=t),r.min=vg(r.min,t,e,c,s),r.max=vg(r.max,t,e,c,s)}function wg(r,t,[e,n,s],a,l){Ub(r,t[e],t[n],t[s],t.scale,a,l)}const $b=["x","scaleX","originX"],Wb=["y","scaleY","originY"];function xg(r,t,e,n){wg(r.x,t,$b,e?e.x:void 0,n?n.x:void 0),wg(r.y,t,Wb,e?e.y:void 0,n?n.y:void 0)}function Ag(r){return r.translate===0&&r.scale===1}function z0(r){return Ag(r.x)&&Ag(r.y)}function Sg(r,t){return r.min===t.min&&r.max===t.max}function Gb(r,t){return Sg(r.x,t.x)&&Sg(r.y,t.y)}function bg(r,t){return Math.round(r.min)===Math.round(t.min)&&Math.round(r.max)===Math.round(t.max)}function H0(r,t){return bg(r.x,t.x)&&bg(r.y,t.y)}function Eg(r){return De(r.x)/De(r.y)}function _g(r,t){return r.translate===t.translate&&r.scale===t.scale&&r.originPoint===t.originPoint}class Xb{constructor(){this.members=[]}add(t){kh(this.members,t),t.scheduleRender()}remove(t){if(Rh(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(s=>t===s);if(e===0)return!1;let n;for(let s=e;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){n=a;break}}return n?(this.promote(n),!0):!1}promote(t,e){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,e&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:n}=t;e.onExitComplete&&e.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Kb(r,t,e){let n="";const s=r.x.translate/t.x,a=r.y.translate/t.y,l=e?.z||0;if((s||a||l)&&(n=`translate3d(${s}px, ${a}px, ${l}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),e){const{transformPerspective:d,rotate:p,rotateX:m,rotateY:y,skewX:w,skewY:A}=e;d&&(n=`perspective(${d}px) ${n}`),p&&(n+=`rotate(${p}deg) `),m&&(n+=`rotateX(${m}deg) `),y&&(n+=`rotateY(${y}deg) `),w&&(n+=`skewX(${w}deg) `),A&&(n+=`skewY(${A}deg) `)}const c=r.x.scale*t.x,h=r.y.scale*t.y;return(c!==1||h!==1)&&(n+=`scale(${c}, ${h})`),n||"none"}const Iu=["","X","Y","Z"],qb=1e3;let Yb=0;function Nu(r,t,e,n){const{latestValues:s}=t;s[r]&&(e[r]=s[r],t.setStaticValue(r,0),n&&(n[r]=0))}function U0(r){if(r.hasCheckedOptimisedAppear=!0,r.root===r)return;const{visualElement:t}=r.options;if(!t)return;const e=P0(t);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:s,layoutId:a}=r.options;window.MotionCancelOptimisedAnimation(e,"transform",$t,!(s||a))}const{parent:n}=r;n&&!n.hasCheckedOptimisedAppear&&U0(n)}function $0({attachResizeListener:r,defaultParent:t,measureScroll:e,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(l={},c=t?.()){this.id=Yb++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Jb),this.nodes.forEach(iE),this.nodes.forEach(sE),this.nodes.forEach(tE)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new Ob)}addEventListener(l,c){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new Dh),this.eventHandlers.get(l).add(c)}notifyListeners(l,...c){const h=this.eventHandlers.get(l);h&&h.notify(...c)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=r0(l)&&!H1(l),this.instance=l;const{layoutId:c,layout:h,visualElement:d}=this.options;if(d&&!d.current&&d.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(h||c)&&(this.isLayoutDirty=!0),r){let p,m=0;const y=()=>this.root.updateBlockedByResize=!1;$t.read(()=>{m=window.innerWidth}),r(l,()=>{const w=window.innerWidth;w!==m&&(m=w,this.root.updateBlockedByResize=!0,p&&p(),p=jb(y,250),il.hasAnimatedSinceResize&&(il.hasAnimatedSinceResize=!1,this.nodes.forEach(Pg)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||h)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:m,hasRelativeLayoutChanged:y,layout:w})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const A=this.options.transition||d.getDefaultTransition()||cE,{onLayoutAnimationStart:x,onLayoutAnimationComplete:E}=d.getProps(),b=!this.targetLayout||!H0(this.targetLayout,w),C=!m&&y;if(this.options.layoutRoot||this.resumeFrom||C||m&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const _={...Gh(A,"layout"),onPlay:x,onComplete:E};(d.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_),this.setAnimationOrigin(p,C)}else m||Pg(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=w})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Pi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(rE),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&U0(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const m=this.path[p];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:c,layout:h}=this.options;if(c===void 0&&!h)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Cg);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Tg);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(nE),this.nodes.forEach(Qb),this.nodes.forEach(Zb)):this.nodes.forEach(Tg),this.clearAllSnapshots();const c=We.now();xe.delta=ei(0,1e3/60,c-xe.timestamp),xe.timestamp=c,xe.isProcessing=!0,bu.update.process(xe),bu.preRender.process(xe),bu.render.process(xe),xe.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Kh.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(eE),this.sharedNodes.forEach(oE)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,$t.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){$t.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!De(this.snapshot.measuredBox.x)&&!De(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ie(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(c=!1),c&&this.instance){const h=n(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:h,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!s)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!z0(this.projectionDelta),h=this.getTransformTemplate(),d=h?h(this.latestValues,""):void 0,p=d!==this.prevTransformTemplateValue;l&&this.instance&&(c||qi(this.latestValues)||p)&&(s(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const c=this.measurePageBox();let h=this.removeElementScroll(c);return l&&(h=this.removeTransform(h)),uE(h),{animationId:this.root.animationId,measuredBox:c,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return ie();const c=l.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(hE))){const{scroll:d}=this.root;d&&(js(c.x,d.offset.x),js(c.y,d.offset.y))}return c}removeElementScroll(l){const c=ie();if(cn(c,l),this.scroll?.wasRoot)return c;for(let h=0;h<this.path.length;h++){const d=this.path[h],{scroll:p,options:m}=d;d!==this.root&&p&&m.layoutScroll&&(p.wasRoot&&cn(c,l),js(c.x,p.offset.x),js(c.y,p.offset.y))}return c}applyTransform(l,c=!1){const h=ie();cn(h,l);for(let d=0;d<this.path.length;d++){const p=this.path[d];!c&&p.options.layoutScroll&&p.scroll&&p!==p.root&&Bs(h,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),qi(p.latestValues)&&Bs(h,p.latestValues)}return qi(this.latestValues)&&Bs(h,this.latestValues),h}removeTransform(l){const c=ie();cn(c,l);for(let h=0;h<this.path.length;h++){const d=this.path[h];if(!d.instance||!qi(d.latestValues))continue;oh(d.latestValues)&&d.updateSnapshot();const p=ie(),m=d.measurePageBox();cn(p,m),xg(c,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,p)}return qi(this.latestValues)&&xg(c,this.latestValues),c}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==xe.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==c;if(!(l||h&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:m}=this.options;if(!(!this.layout||!(p||m))){if(this.resolvedRelativeTargetAt=xe.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ie(),this.relativeTargetOrigin=ie(),to(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),cn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ie(),this.targetWithTransforms=ie()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),yb(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):cn(this.target,this.layout.layoutBox),S0(this.target,this.targetDelta)):cn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ie(),this.relativeTargetOrigin=ie(),to(this.relativeTargetOrigin,this.target,y.target),cn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||oh(this.parent.latestValues)||A0(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const l=this.getLead(),c=!!this.resumingFrom||this!==l;let h=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(h=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===xe.timestamp&&(h=!1),h)return;const{layout:d,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||p))return;cn(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,y=this.treeScale.y;kS(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=ie());const{target:w}=l;if(!w){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(yg(this.prevProjectionDelta.x,this.projectionDelta.x),yg(this.prevProjectionDelta.y,this.projectionDelta.y)),Jr(this.projectionDelta,this.layoutCorrected,w,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==y||!_g(this.projectionDelta.x,this.prevProjectionDelta.x)||!_g(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",w))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.visualElement?.scheduleRender(),l){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Vs(),this.projectionDelta=Vs(),this.projectionDeltaWithTransform=Vs()}setAnimationOrigin(l,c=!1){const h=this.snapshot,d=h?h.latestValues:{},p={...this.latestValues},m=Vs();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const y=ie(),w=h?h.source:void 0,A=this.layout?this.layout.source:void 0,x=w!==A,E=this.getStack(),b=!E||E.members.length<=1,C=!!(x&&!b&&this.options.crossfade===!0&&!this.path.some(lE));this.animationProgress=0;let _;this.mixTargetDelta=R=>{const P=R/1e3;kg(m.x,l.x,P),kg(m.y,l.y,P),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(to(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),aE(this.relativeTarget,this.relativeTargetOrigin,y,P),_&&Gb(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=ie()),cn(_,this.relativeTarget)),x&&(this.animationValues=p,Vb(p,d,this.latestValues,P,C,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=P},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Pi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=$t.update(()=>{il.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ks(0)),this.currentAnimation=Nb(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),l.onUpdate&&l.onUpdate(c)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(qb),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:c,target:h,layout:d,latestValues:p}=l;if(!(!c||!h||!d)){if(this!==l&&this.layout&&d&&W0(this.options.animationType,this.layout.layoutBox,d.layoutBox)){h=this.target||ie();const m=De(this.layout.layoutBox.x);h.x.min=l.target.x.min,h.x.max=h.x.min+m;const y=De(this.layout.layoutBox.y);h.y.min=l.target.y.min,h.y.max=h.y.min+y}cn(c,h),Bs(c,p),Jr(this.projectionDeltaWithTransform,this.layoutCorrected,c,p)}}registerSharedNode(l,c){this.sharedNodes.has(l)||this.sharedNodes.set(l,new Xb),this.sharedNodes.get(l).add(c);const d=c.options.initialPromotionConfig;c.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(c):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){const{layoutId:l}=this.options;return l?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:l}=this.options;return l?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:c,preserveFollowOpacity:h}={}){const d=this.getStack();d&&d.promote(this,h),l&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let c=!1;const{latestValues:h}=l;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(c=!0),!c)return;const d={};h.z&&Nu("z",l,d,this.animationValues);for(let p=0;p<Iu.length;p++)Nu(`rotate${Iu[p]}`,l,d,this.animationValues),Nu(`skew${Iu[p]}`,l,d,this.animationValues);l.render();for(const p in d)l.setStaticValue(p,d[p]),this.animationValues&&(this.animationValues[p]=d[p]);l.scheduleRender()}applyProjectionStyles(l,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const h=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=nl(c?.pointerEvents)||"",l.transform=h?h(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=nl(c?.pointerEvents)||""),this.hasProjected&&!qi(this.latestValues)&&(l.transform=h?h({},""):"none",this.hasProjected=!1);return}l.visibility="";const p=d.animationValues||d.latestValues;this.applyTransformsToTarget();let m=Kb(this.projectionDeltaWithTransform,this.treeScale,p);h&&(m=h(p,m)),l.transform=m;const{x:y,y:w}=this.projectionDelta;l.transformOrigin=`${y.origin*100}% ${w.origin*100}% 0`,d.animationValues?l.opacity=d===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:l.opacity=d===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const A in ao){if(p[A]===void 0)continue;const{correct:x,applyTo:E,isCSSVariable:b}=ao[A],C=m==="none"?p[A]:x(p[A],d);if(E){const _=E.length;for(let R=0;R<_;R++)l[E[R]]=C}else b?this.options.visualElement.renderState.vars[A]=C:l[A]=C}this.options.layoutId&&(l.pointerEvents=d===this?nl(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>l.currentAnimation?.stop()),this.root.nodes.forEach(Cg),this.root.sharedNodes.clear()}}}function Qb(r){r.updateLayout()}function Zb(r){const t=r.resumeFrom?.snapshot||r.snapshot;if(r.isLead()&&r.layout&&t&&r.hasListeners("didUpdate")){const{layoutBox:e,measuredBox:n}=r.layout,{animationType:s}=r.options,a=t.source!==r.layout.source;s==="size"?dn(p=>{const m=a?t.measuredBox[p]:t.layoutBox[p],y=De(m);m.min=e[p].min,m.max=m.min+y}):W0(s,t.layoutBox,e)&&dn(p=>{const m=a?t.measuredBox[p]:t.layoutBox[p],y=De(e[p]);m.max=m.min+y,r.relativeTarget&&!r.currentAnimation&&(r.isProjectionDirty=!0,r.relativeTarget[p].max=r.relativeTarget[p].min+y)});const l=Vs();Jr(l,e,t.layoutBox);const c=Vs();a?Jr(c,r.applyTransform(n,!0),t.measuredBox):Jr(c,e,t.layoutBox);const h=!z0(l);let d=!1;if(!r.resumeFrom){const p=r.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:m,layout:y}=p;if(m&&y){const w=ie();to(w,t.layoutBox,m.layoutBox);const A=ie();to(A,e,y.layoutBox),H0(w,A)||(d=!0),p.options.layoutRoot&&(r.relativeTarget=A,r.relativeTargetOrigin=w,r.relativeParent=p)}}}r.notifyListeners("didUpdate",{layout:e,snapshot:t,delta:c,layoutDelta:l,hasLayoutChanged:h,hasRelativeLayoutChanged:d})}else if(r.isLead()){const{onExitComplete:e}=r.options;e&&e()}r.options.transition=void 0}function Jb(r){r.parent&&(r.isProjecting()||(r.isProjectionDirty=r.parent.isProjectionDirty),r.isSharedProjectionDirty||(r.isSharedProjectionDirty=!!(r.isProjectionDirty||r.parent.isProjectionDirty||r.parent.isSharedProjectionDirty)),r.isTransformDirty||(r.isTransformDirty=r.parent.isTransformDirty))}function tE(r){r.isProjectionDirty=r.isSharedProjectionDirty=r.isTransformDirty=!1}function eE(r){r.clearSnapshot()}function Cg(r){r.clearMeasurements()}function Tg(r){r.isLayoutDirty=!1}function nE(r){const{visualElement:t}=r.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),r.resetTransform()}function Pg(r){r.finishAnimation(),r.targetDelta=r.relativeTarget=r.target=void 0,r.isProjectionDirty=!0}function iE(r){r.resolveTargetDelta()}function sE(r){r.calcProjection()}function rE(r){r.resetSkewAndRotation()}function oE(r){r.removeLeadSnapshot()}function kg(r,t,e){r.translate=Kt(t.translate,0,e),r.scale=Kt(t.scale,1,e),r.origin=t.origin,r.originPoint=t.originPoint}function Rg(r,t,e,n){r.min=Kt(t.min,e.min,n),r.max=Kt(t.max,e.max,n)}function aE(r,t,e,n){Rg(r.x,t.x,e.x,n),Rg(r.y,t.y,e.y,n)}function lE(r){return r.animationValues&&r.animationValues.opacityExit!==void 0}const cE={duration:.45,ease:[.4,0,.1,1]},Mg=r=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(r),Lg=Mg("applewebkit/")&&!Mg("chrome/")?Math.round:fn;function Dg(r){r.min=Lg(r.min),r.max=Lg(r.max)}function uE(r){Dg(r.x),Dg(r.y)}function W0(r,t,e){return r==="position"||r==="preserve-aspect"&&!gb(Eg(t),Eg(e),.2)}function hE(r){return r!==r.root&&r.scroll?.wasRoot}const dE=$0({attachResizeListener:(r,t)=>lo(r,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Fu={current:void 0},G0=$0({measureScroll:r=>({x:r.scrollLeft,y:r.scrollTop}),defaultParent:()=>{if(!Fu.current){const r=new dE({});r.mount(window),r.setOptions({layoutScroll:!0}),Fu.current=r}return Fu.current},resetTransform:(r,t)=>{r.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:r=>window.getComputedStyle(r).position==="fixed"}),fE={pan:{Feature:Mb},drag:{Feature:Rb,ProjectionNode:G0,MeasureLayout:j0}};function Ig(r,t,e){const{props:n}=r;r.animationState&&n.whileHover&&r.animationState.setActive("whileHover",e==="Start");const s="onHover"+e,a=n[s];a&&$t.postRender(()=>a(t,wo(t)))}class pE extends Mi{mount(){const{current:t}=this.node;t&&(this.unmount=O1(t,(e,n)=>(Ig(this.node,n,"Start"),s=>Ig(this.node,s,"End"))))}unmount(){}}class mE extends Mi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=go(lo(this.node.current,"focus",()=>this.onFocus()),lo(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Ng(r,t,e){const{props:n}=r;if(r.current instanceof HTMLButtonElement&&r.current.disabled)return;r.animationState&&n.whileTap&&r.animationState.setActive("whileTap",e==="Start");const s="onTap"+(e==="End"?"":e),a=n[s];a&&$t.postRender(()=>a(t,wo(t)))}class gE extends Mi{mount(){const{current:t}=this.node;t&&(this.unmount=z1(t,(e,n)=>(Ng(this.node,n,"Start"),(s,{success:a})=>Ng(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const fh=new WeakMap,Ou=new WeakMap,yE=r=>{const t=fh.get(r.target);t&&t(r)},vE=r=>{r.forEach(yE)};function wE({root:r,...t}){const e=r||document;Ou.has(e)||Ou.set(e,{});const n=Ou.get(e),s=JSON.stringify(t);return n[s]||(n[s]=new IntersectionObserver(vE,{root:r,...t})),n[s]}function xE(r,t,e){const n=wE(t);return fh.set(r,e),n.observe(r),()=>{fh.delete(r),n.unobserve(r)}}const AE={some:0,all:1};class SE extends Mi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:n,amount:s="some",once:a}=t,l={root:e?e.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:AE[s]},c=h=>{const{isIntersecting:d}=h;if(this.isInView===d||(this.isInView=d,a&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:p,onViewportLeave:m}=this.node.getProps(),y=d?p:m;y&&y(h)};return xE(this.node.current,l,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(bE(t,e))&&this.startObserver()}unmount(){}}function bE({viewport:r={}},{viewport:t={}}={}){return e=>r[e]!==t[e]}const EE={inView:{Feature:SE},tap:{Feature:gE},focus:{Feature:mE},hover:{Feature:pE}},_E={layout:{ProjectionNode:G0,MeasureLayout:j0}},CE={...ub,...EE,...fE,..._E},Mt=CS(CE,BS),TE=({theme:r,toggleTheme:t})=>k.jsx(Mt.button,{onClick:t,className:"p-2 rounded-full bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white transition-colors duration-300 shadow-md flex items-center justify-center","aria-label":"Toggle theme",whileHover:{scale:1.1},children:k.jsx(Mt.div,{initial:{opacity:0,rotate:r==="light"?-90:90},animate:{opacity:1,rotate:0},transition:{duration:.3},children:r==="light"?k.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:k.jsx("path",{d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-13 0a1 1 0 100-2H2a1 1 0 100 2h1zm-.464-4.95l-.707-.707a1 1 0 00-1.414 1.414l.707.707a1 1 0 001.414-1.414zm2.12 10.607a1 1 0 010-1.414l.706-.707a1 1 0 111.414 1.414l-.707.707a1 1 0 01-1.414 0zM10 15a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1z",clipRule:"evenodd",fillRule:"evenodd"})}):k.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:k.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})})},r)}),PE=({firstName:r,lastName:t})=>k.jsxs("div",{className:"flex items-center text-xl font-bold",children:[k.jsx(Mt.span,{whileHover:{scale:1.1},className:"text-gray-800 dark:text-blue-300",children:r}),k.jsx(Mt.span,{whileHover:{scale:1.1},className:"text-gray-800 dark:text-blue-300 ml-1",children:t})]}),kE=({theme:r,toggleTheme:t})=>k.jsx(Mt.header,{initial:{y:-100},animate:{y:0},transition:{type:"spring",stiffness:120},className:"glass-card backdrop-blur-xl sticky top-0 z-50 border-b border-gray-200/20 dark:border-gray-700/20",children:k.jsxs("nav",{className:"container mx-auto px-6 py-4 flex justify-between items-center",children:[k.jsx(PE,{firstName:"Kiran",lastName:"Mulawad"}),k.jsxs("div",{className:"hidden md:flex space-x-8 items-center",children:[k.jsx(Mt.a,{whileHover:{scale:1.1},href:"#about",className:"nav-link animated-underline text-gray-600 dark:text-gray-300 font-medium cursor-hover",children:"About"}),k.jsx(Mt.a,{whileHover:{scale:1.1},href:"#skills",className:"nav-link animated-underline text-gray-600 dark:text-gray-300 font-medium cursor-hover",children:"Skills"}),k.jsx(Mt.a,{whileHover:{scale:1.1},href:"#projects",className:"nav-link animated-underline text-gray-600 dark:text-gray-300 font-medium cursor-hover",children:"Projects"}),k.jsx(Mt.a,{whileHover:{scale:1.1},href:"#experience",className:"nav-link animated-underline text-gray-600 dark:text-gray-300 font-medium cursor-hover",children:"Experience"}),k.jsx(Mt.a,{whileHover:{scale:1.1},href:"#education",className:"nav-link animated-underline text-gray-600 dark:text-gray-300 font-medium cursor-hover",children:"Education"}),k.jsx(Mt.a,{whileHover:{scale:1.1},href:"#contact",className:"nav-link animated-underline text-gray-600 dark:text-gray-300 font-medium cursor-hover",children:"Contact"}),k.jsx(TE,{theme:r,toggleTheme:t})]}),k.jsx(Mt.a,{whileHover:{scale:1.05},href:"#contact",className:"hidden md:inline-block bg-gradient-to-r from-gold-500 to-gold-600 text-white font-bold py-2.5 px-6 rounded-full hover:shadow-glow transition-all duration-300 cursor-hover",children:"Let's Connect"})]})}),RE=()=>k.jsx(Mt.footer,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:1},className:"bg-gray-800 text-white dark:bg-gray-950",children:k.jsxs("div",{className:"container mx-auto px-6 py-12 text-center",children:[k.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Let's Connect!"}),k.jsx("p",{className:"max-w-2xl mx-auto mb-8 text-gray-300",children:"Connect with me on my social platforms:"}),k.jsxs("div",{className:"flex flex-col sm:flex-row justify-center items-center gap-4",children:[k.jsxs("a",{href:"https://www.linkedin.com/in/kiran-mulawad-4573b8229/",target:"_blank",rel:"noopener noreferrer",className:"bg-gray-700 dark:bg-gray-800 text-white font-bold py-3 px-6 rounded-full hover:bg-opacity-90 transition-colors flex items-center gap-2",children:[k.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:k.jsx("path",{fillRule:"evenodd",d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z",clipRule:"evenodd"})}),"LinkedIn"]}),k.jsxs("a",{href:"https://github.com/Kiranmulawad1",target:"_blank",rel:"noopener noreferrer",className:"bg-gray-700 dark:bg-gray-800 text-white font-bold py-3 px-6 rounded-full hover:bg-opacity-90 transition-colors flex items-center gap-2",children:[k.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:k.jsx("path",{fillRule:"evenodd",d:"M12 0C5.373 0 0 5.373 0 12c0 5.302 3.438 9.799 8.205 11.387.6.111.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.73.084-.73 1.205.084 1.838 1.238 1.838 1.238 1.07 1.835 2.809 1.305 3.49.998.108-.775.418-1.305.762-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.13-3.18 0 0 1-.322 3.3-.998 1.125-.313 2.32-.47 3.515-.47.195 0 .39.01.585.03 1.2.14 2.385.45 3.515.998 2.3.676 3.3.998 3.3.998.67 1.657.265 2.877.13 3.18.77.84 1.235 1.91 1.235 3.22 0 4.61-2.805 5.625-5.475 5.92.43.37.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .32.21.69.825.57C20.565 21.802 24 17.305 24 12c0-6.627-5.373-12-12-12z",clipRule:"evenodd"})}),"GitHub"]}),k.jsxs("a",{href:"https://www.instagram.com/kiran_mulawad1/",target:"_blank",rel:"noopener noreferrer",className:"bg-gray-700 dark:bg-gray-800 text-white font-bold py-3 px-6 rounded-full hover:bg-opacity-90 transition-colors flex items-center gap-2",children:[k.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:k.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.204-.012 3.584-.069 4.849-1.691 4.919-1.691 4.919-4.919 4.919-1.265.058-1.645-.069-4.849-.069-3.204 0-3.584-.012-4.849-.069-3.252-.148-4.771-1.691-4.919-4.919-.058-1.265-.069-1.645-.069-4.849 0-3.204.012-3.584.069-4.849 1.691-4.919 1.691-4.919 4.919-4.919zm0 2.163c-3.204 0-3.584.012-4.85.07-3.252.148-4.771 1.691-4.919 4.919-.058 1.265-.069 1.645-.069 4.849 0 3.204.012 3.584.069 4.849 1.691 4.919 1.691 4.919 4.919 4.919 1.265-.058 1.645-.069 4.849-.069 3.204 0 3.584.012 4.849-.069 3.252-.148 4.771-1.691 4.919-4.919.058-1.265.069-1.645.069-4.849 0-3.204-.012-3.584-.069-4.849-1.691-4.919-1.691-4.919-4.919-4.919zm0 5.838c-2.32 0-4.2 1.88-4.2 4.2s1.88 4.2 4.2 4.2 4.2-1.88 4.2-4.2-1.88-4.2-4.2-4.2zm0 2.163c1.015 0 1.837.822 1.837 1.837s-.822 1.837-1.837 1.837-1.837-.822-1.837-1.837.822-1.837 1.837-1.837zm6.262-7.272c-.817 0-1.48-.665-1.48-1.48s.663-1.48 1.48-1.48 1.48.665 1.48 1.48-.663 1.48-1.48 1.48z"})}),"Instagram"]})]}),k.jsx("p",{className:"mt-12 text-gray-400 text-sm",children:" 2025 Kiran Mulawad. All rights reserved."})]})}),ME=({onShowResume:r})=>k.jsxs("section",{id:"hero",className:"bg-transparent min-h-screen flex items-center justify-center relative overflow-hidden",children:[k.jsx("div",{className:"absolute top-20 left-10 w-72 h-72 bg-gold-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob"}),k.jsx("div",{className:"absolute top-40 right-10 w-72 h-72 bg-gold-400 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-2000"}),k.jsx("div",{className:"absolute -bottom-8 left-20 w-72 h-72 bg-gold-300 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-4000"}),k.jsxs("div",{className:"container mx-auto px-6 py-24 text-center relative z-10",children:[k.jsxs(Mt.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-5xl md:text-7xl font-extrabold leading-tight",children:[k.jsx("span",{className:"text-gray-800 dark:text-white",children:"Hi, I'm "}),k.jsx("span",{className:"gradient-text",children:"Kiran Mulawad"})]}),k.jsx(Mt.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"mt-6 text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto font-medium",children:"Applied Data Science & Analytics Master's Student | AI/Data Engineer"}),k.jsx(Mt.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},className:"mt-3 text-lg text-gray-500 dark:text-gray-400 max-w-2xl mx-auto",children:"Crafting intuitive experiences and insightful solutions."}),k.jsxs(Mt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.6},className:"mt-10 flex flex-col sm:flex-row justify-center gap-6",children:[k.jsxs("a",{href:"#projects",className:"group relative inline-block bg-gradient-to-r from-gold-500 to-gold-600 text-white font-bold py-4 px-10 rounded-full text-lg overflow-hidden transition-all duration-300 hover:shadow-glow hover:scale-105 cursor-hover",children:[k.jsx("span",{className:"relative z-10",children:"View My Work"}),k.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gold-600 to-gold-700 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),k.jsxs("button",{onClick:r,className:"group relative inline-block bg-transparent border-2 border-gray-700 dark:border-gray-300 text-gray-700 dark:text-gray-300 font-bold py-4 px-10 rounded-full text-lg overflow-hidden transition-all duration-300 hover:shadow-lg hover:scale-105 cursor-hover",children:[k.jsx("span",{className:"relative z-10 group-hover:text-white transition-colors duration-300",children:"View CV "}),k.jsx("div",{className:"absolute inset-0 bg-gray-700 dark:bg-gray-300 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-300 origin-left"})]})]})]})]}),LE="/assets/HD-Profile-C4j-8dpa.png",DE=r=>{const[t,e]=V.useState(!1);return V.useEffect(()=>{const n=new IntersectionObserver(([s])=>{s.isIntersecting&&e(!0)});return r.current&&n.observe(r.current),()=>n.disconnect()},[r]),t},IE=()=>{const r=V.useRef(null),t=DE(r);return k.jsx("section",{id:"about",ref:r,className:"py-20 bg-transparent relative",children:k.jsxs(Mt.div,{initial:{opacity:0,y:50},animate:t?{opacity:1,y:0}:{},transition:{duration:.6},className:"container mx-auto px-6 grid grid-cols-1 md:grid-cols-2 gap-x-12 gap-y-12 items-center",children:[k.jsxs(Mt.div,{initial:{x:-50,opacity:0},animate:t?{x:0,opacity:1}:{},transition:{duration:.6,delay:.2},className:"w-fit mx-auto relative",children:[k.jsx("div",{className:"absolute -inset-4 bg-gradient-to-r from-gold-500 to-gold-600 rounded-full blur-2xl opacity-30 animate-pulse"}),k.jsx("div",{className:"relative",children:k.jsx("img",{src:LE,alt:"Kiran Mulawad Photo",className:"rounded-full w-72 h-72 shadow-2xl object-cover border-4 border-white/20 dark:border-gray-700/20"})})]}),k.jsxs(Mt.div,{initial:{x:50,opacity:0},animate:t?{x:0,opacity:1}:{},transition:{duration:.6,delay:.4},className:"text-center md:text-left",children:[k.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-6",children:k.jsx("span",{className:"gradient-text",children:"About Me"})}),k.jsxs("div",{className:"glass-card p-6 rounded-2xl",children:[k.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed text-lg",children:"An Applied Data Science and Analytics master's student with strong experience in AI tools, LLM-based projects, data engineering, and cloud technologies. I am an AI/Data Engineer with robust experience in Python-based data workflows, cloud data handling, and AI/NLP applications. I have built scalable semantic search pipelines with Ollama, Pinecone, and Streamlit."}),k.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed mt-4 text-lg",children:"Currently, I am completing my thesis on AI-based grant discovery automation at iiterate Technologies as part of a thesis internship. I am actively seeking AI Engineer or Data Engineer roles in innovative environments where I can apply my skills to solve complex problems and contribute to cutting-edge solutions."})]})]})]})})},NE=[{icon:"",title:"Programming",description:"Python, SQL, R, HTML, JS"},{icon:"",title:"ML & DL",description:"Scikit-learn, PyTorch, TensorFlow, Hugging Face Transformers"},{icon:"",title:"Data Engineering",description:"ETL, Data Pipelines, Apache Airflow, APIs, PostgreSQL, MySQL, SQLite"},{icon:"",title:"Cloud & Tools",description:"GCP, BigQuery, Azure, Docker, Git, Streamlit, Pinecone"},{icon:"",title:"Visualization",description:"Tableau, Excel, SAS Visual Analytics"},{icon:"",title:"Soft Skills",description:"Collaboration, Agile, Communication"},{icon:"",title:"Languages",description:"English (Fluent), German (A2), Kannada (Fluent), Hindi (Fluent)"}],FE=r=>{const[t,e]=V.useState(!1);return V.useEffect(()=>{const n=new IntersectionObserver(([s])=>{s.isIntersecting&&e(!0)});return r.current&&n.observe(r.current),()=>n.disconnect()},[r]),t},OE=()=>{const r=V.useRef(null),t=FE(r),e={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},n={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return k.jsx("section",{id:"skills",ref:r,className:"py-20 bg-transparent relative",children:k.jsxs(Mt.div,{initial:{opacity:0,y:50},animate:t?{opacity:1,y:0}:{},transition:{duration:.6},className:"container mx-auto px-6",children:[k.jsxs("div",{className:"text-center mb-16",children:[k.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-4",children:k.jsx("span",{className:"gradient-text",children:"My Skills"})}),k.jsx("p",{className:"mt-3 text-lg text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:"A blend of technical expertise and creative problem-solving."})]}),k.jsx(Mt.div,{variants:e,initial:"hidden",animate:t?"show":"hidden",className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:NE.map((s,a)=>k.jsxs(Mt.div,{className:"glass-card p-6 rounded-2xl text-center text-gray-800 dark:text-white group cursor-hover hover:shadow-neu-light dark:hover:shadow-neu-dark transition-all duration-300",variants:n,whileHover:{y:-8,scale:1.02},transition:{type:"spring",stiffness:300,damping:20},children:[k.jsx(Mt.div,{className:"text-5xl mb-4 inline-block",whileHover:{rotate:[0,-10,10,-10,0],scale:1.2},transition:{duration:.5},children:s.icon}),k.jsx("h3",{className:"text-xl font-bold mb-2 group-hover:text-gold-500 transition-colors duration-300",children:s.title}),k.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:s.description})]},a))})]})})},jE=({project:r,onDetailsClick:t,variants:e})=>k.jsxs(Mt.div,{className:"glass-card p-6 rounded-2xl shadow-xl project-card max-w-xs mx-auto cursor-hover overflow-hidden group",whileHover:{scale:1.05,y:-5},variants:e,transition:{type:"spring",stiffness:300,damping:20},children:[k.jsxs("div",{className:"relative overflow-hidden rounded-xl mb-4",children:[k.jsx("img",{src:r.image,alt:r.title,className:"rounded-xl w-full h-40 object-cover transition-transform duration-500 group-hover:scale-110"}),k.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),k.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-2 group-hover:text-gold-500 transition-colors duration-300",children:r.title}),k.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-4 line-clamp-2",children:r.description.split(".")[0]+"."}),k.jsx("button",{onClick:()=>t(r.id),className:"w-full bg-gradient-to-r from-gold-500 to-gold-600 text-white font-bold py-2.5 px-4 rounded-lg text-sm hover:shadow-glow transition-all duration-300 hover:scale-105",children:"View Details"})]}),BE=({project:r,onClose:t,isOpen:e})=>{if(V.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[e]),!e||!r)return null;const n={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.3}}};return k.jsx(Mt.div,{initial:"hidden",animate:"visible",exit:"hidden",variants:n,className:"modal fixed inset-0 flex items-center justify-center z-50 p-4",children:k.jsxs("div",{className:"modal-content bg-white dark:bg-gray-800 rounded-xl shadow-2xl p-8 max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[k.jsxs("div",{className:"flex justify-between items-center mb-6",children:[k.jsx("h3",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:r.title}),k.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-3xl leading-none",children:""})]}),k.jsx("img",{src:r.image,alt:r.title,className:"rounded-md mb-6 w-full h-64 object-cover"}),k.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed mb-4",children:r.description}),k.jsxs("div",{className:"mb-4",children:[k.jsx("p",{className:"font-semibold text-gray-800 dark:text-white",children:"Technologies Used:"}),k.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:r.tech})]}),k.jsxs("div",{className:"mb-4",children:[k.jsx("p",{className:"font-semibold text-gray-800 dark:text-white",children:"My Role:"}),k.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:r.role})]}),k.jsxs("div",{className:"mb-4",children:[k.jsx("p",{className:"font-semibold text-gray-800 dark:text-white",children:"Challenges & Solutions:"}),k.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:r.challenges})]}),k.jsxs("div",{className:"mb-6",children:[k.jsx("p",{className:"font-semibold text-gray-800 dark:text-white",children:"Key Outcomes:"}),k.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:r.outcomes})]}),k.jsxs("div",{className:"flex flex-wrap gap-4",children:[r.liveLink&&r.liveLink!=="#"&&k.jsxs("a",{href:r.liveLink,target:"_blank",rel:"noopener noreferrer",className:"bg-[#DAA520] text-white font-bold py-2 px-4 rounded-lg hover:bg-opacity-90 transition-colors flex items-center gap-2",children:["Live Demo ",k.jsx("span",{className:"text-lg",children:""})]}),r.githubLink&&r.githubLink!=="#"&&k.jsxs("a",{href:r.githubLink,target:"_blank",rel:"noopener noreferrer",className:"bg-gray-700 text-white font-bold py-2 px-4 rounded-lg hover:bg-opacity-90 transition-colors flex items-center gap-2",children:["GitHub Repo ",k.jsx("span",{className:"text-lg",children:""})]})]})]})})},VE="/assets/RAG-Chatbot-B0t3AGqt.png",zE="/assets/Data-Engineering-Cbtg2Auy.png",HE="/assets/MARS-Orbiter-BNArmwMT.png",UE="/assets/HUSHHUSH-Recruiter-D0VR-xhG.png",Fg=[{id:"rag-chatbot",title:"RAG Chatbot for Student Support",image:VE,description:"Built a Retrieval-Augmented Generation chatbot using LLAMA3 to answer student queries. This project focused on enhancing information retrieval and response generation for educational support.",tech:"LLAMA3, Python, PDF Chunking, Embedding Search, Modular Flow Control",role:"AI/ML Engineer",challenges:"Optimizing LLM orchestration for accurate and relevant responses from chunked PDF inputs. Ensured efficient embedding search to provide contextually appropriate answers.",outcomes:"Successfully developed a functional RAG chatbot capable of providing precise and timely answers to student inquiries, significantly improving access to information.",liveLink:"#",githubLink:"https://github.com/Kiranmulawad1/rag-chatbot"},{id:"data-pipeline",title:"End-to-End Data Pipeline with BigQuery",image:zE,description:"Automated data extraction, cleaning, and loading to Google BigQuery, culminating in Tableau dashboarding for business insights. This project showcased comprehensive data engineering skills from raw data to visualization.",tech:"Docker, Python, Google BigQuery, GCP SDK, MySQL, Tableau",role:"Data Engineer",challenges:"Designing a robust and scalable pipeline for automated data ingestion and transformation. Ensured data integrity and efficient loading into BigQuery for analytics.",outcomes:"Successfully implemented an automated, end-to-end data pipeline, providing clean and structured data for analysis. Enabled stakeholders to make data-driven decisions through interactive Tableau dashboards.",liveLink:"#",githubLink:"https://github.com/Kiranmulawad1/data-pipeline"},{id:"thermal-power",title:"Thermal Power Prediction Mars Express Orbiter",image:HE,description:"Designed and containerized a full Machine Learning pipeline for thermal power prediction using satellite data from the Mars Express Orbiter. This involved data preprocessing, model training, and deployment.",tech:"PostgreSQL, XGBoost, CatBoost, Docker Compose",role:"ML Engineer",challenges:"Handling large volumes of satellite data and optimizing ML models for accurate thermal power predictions. Ensured the pipeline was robust and reproducible through containerization.",outcomes:"Developed a fully containerized ML pipeline that accurately predicts thermal power, demonstrating strong skills in machine learning, data handling, and MLOps.",liveLink:"#",githubLink:"https://github.com/Kiranmulawad1/mars-express-orbiter"},{id:"recruiter-system",title:"Recruiter Candidate Filtering System",image:UE,description:"Developed a system to scrape GitHub profiles, cluster candidates using K-means algorithm, and automate email outreach. This project streamlined the recruitment process by identifying suitable candidates efficiently.",tech:"Python, PostgreSQL, Machine Learning (K-means), HTML, JS",role:"Software Developer & ML Practitioner",challenges:"Effectively scraping and parsing diverse GitHub profile data, and accurately clustering candidates based on their skills and experience. Automated email outreach while ensuring personalization.",outcomes:"Created an efficient system that significantly reduced manual effort in candidate sourcing and filtering, demonstrating practical application of machine learning and web development skills.",liveLink:"#",githubLink:"https://github.com/Kiranmulawad1/Hush-Hush-Recruiter"}],$E=r=>{const[t,e]=V.useState(!1);return V.useEffect(()=>{const n=new IntersectionObserver(([s])=>{s.isIntersecting&&e(!0)});return r.current&&n.observe(r.current),()=>n.disconnect()},[r]),t},WE=()=>{const r=V.useRef(null),t=$E(r),[e,n]=V.useState(!1),[s,a]=V.useState(null),l=p=>{const m=Fg.find(y=>y.id===p);a(m),n(!0)},c=()=>{n(!1),a(null)},h={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.2}}},d={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return k.jsxs("section",{id:"projects",ref:r,className:"py-20 dark:bg-gray-900",children:[k.jsxs(Mt.div,{initial:{opacity:0,y:50},animate:t?{opacity:1,y:0}:{},transition:{duration:.6},className:"container mx-auto px-6",children:[k.jsxs("div",{className:"text-center mb-12",children:[k.jsx("h2",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"My Projects"}),k.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"A selection of my work demonstrating my skills and problem-solving approach."})]}),k.jsx(Mt.div,{variants:h,initial:"hidden",animate:t?"show":"hidden",className:"grid md:grid-cols-2 lg:grid-cols-4 gap-2",children:Fg.map(p=>k.jsx(jE,{project:p,onDetailsClick:l,variants:d},p.id))})]}),k.jsx(BE,{project:s,isOpen:e,onClose:c})]})};function GE(){return k.jsx("section",{id:"experience",className:"py-20 bg-white dark:bg-gray-900",children:k.jsxs("div",{className:"container mx-auto px-6",children:[k.jsxs("div",{className:"text-center mb-12",children:[k.jsx("h2",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Experience"}),k.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"My professional journey."})]}),k.jsx("div",{className:"max-w-3xl mx-auto space-y-8",children:k.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-6 rounded-xl shadow-md text-gray-800 dark:text-white",children:[k.jsx("h3",{className:"text-xl font-bold",children:"Thesis Intern - AI Funding Finder"}),k.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-2",children:"iiterate Technologies GmbH | April 2025  Present"}),k.jsxs("ul",{className:"list-disc list-inside text-gray-700 dark:text-gray-200 space-y-1",children:[k.jsx("li",{children:"Built custom ETL pipelines for ingesting and embedding grant metadata."}),k.jsx("li",{children:"Used Pinecone for vector search, Streamlit for UI, Llama for GPT recommendations."}),k.jsx("li",{children:"Simulated real-world data engineering tasks: chunking, translation, reranking, citation."}),k.jsx("li",{children:"Deployed and tested app in cloud-like dev setup."})]})]})})]})})}function XE(){return k.jsx("section",{id:"education",className:"py-20 dark:bg-gray-900",children:k.jsxs("div",{className:"container mx-auto px-6",children:[k.jsxs("div",{className:"text-center mb-12",children:[k.jsx("h2",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Education"}),k.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"My academic background."})]}),k.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[k.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-6 rounded-xl shadow-md text-gray-800 dark:text-white",children:[k.jsx("h3",{className:"text-xl font-bold",children:"M.Sc. Applied Data Science & Analytics"}),k.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-2",children:"SRH Hochschule Heidelberg, Germany | October 2023  Present"})]}),k.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-6 rounded-xl shadow-md text-gray-800 dark:text-white",children:[k.jsx("h3",{className:"text-xl font-bold",children:"Bachelors of Computer Applications (BCA)"}),k.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-2",children:"P.C. Jabin Science College, Hubballi, India | June 2019  August 2022"})]})]})]})})}function KE(){return k.jsxs("section",{id:"contact",className:"py-20 bg-transparent relative overflow-hidden",children:[k.jsx("div",{className:"absolute top-10 right-10 w-96 h-96 bg-gold-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"}),k.jsx("div",{className:"absolute bottom-10 left-10 w-96 h-96 bg-gold-400 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000"}),k.jsx("div",{className:"container mx-auto px-6 text-center relative z-10",children:k.jsxs(Mt.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},children:[k.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-6",children:k.jsx("span",{className:"gradient-text",children:"Let's Connect"})}),k.jsx("p",{className:"max-w-2xl mx-auto mb-12 text-lg text-gray-700 dark:text-gray-300",children:"Feel free to reach out to me via email for any inquiries or collaborations."}),k.jsx("div",{className:"flex flex-col sm:flex-row justify-center items-center gap-6",children:k.jsxs(Mt.a,{href:"mailto:kiranmulawad1@gmail.com",className:"group relative bg-gradient-to-r from-gold-500 to-gold-600 text-white font-bold py-4 px-10 rounded-full hover:shadow-glow transition-all duration-300 flex items-center gap-3 cursor-hover overflow-hidden",whileHover:{scale:1.05},whileTap:{scale:.95},children:[k.jsx("span",{className:"relative z-10 text-lg",children:"Email Me"}),k.jsx("span",{className:"relative z-10 text-xl",children:""}),k.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gold-600 to-gold-700 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})}),k.jsxs(Mt.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.2},viewport:{once:!0},className:"glass-card max-w-2xl mx-auto mt-16 p-8 rounded-2xl",children:[k.jsx("h3",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-4",children:"Let's Build Something Amazing Together"}),k.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"I'm always open to discussing new projects, creative ideas, or opportunities to be part of your vision."})]})]})})]})}const Le=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),ph=[.001,0,0,.001,0,0],ju=1.35,Ye={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Vn={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},X0="pdfjs_internal_editor_",At={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101,COMMENT:102},Rt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},K0={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Ce={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},eo={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ee={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Is={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},xo={ERRORS:0,WARNINGS:1,INFOS:5},co={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Ga={moveTo:0,lineTo:1,curveTo:2,closePath:3},q0={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let wl=xo.WARNINGS;function qE(r){Number.isInteger(r)&&(wl=r)}function YE(){return wl}function xl(r){wl>=xo.INFOS&&console.log(`Info: ${r}`)}function St(r){wl>=xo.WARNINGS&&console.log(`Warning: ${r}`)}function Ft(r){throw new Error(r)}function ce(r,t){r||Ft(t)}function QE(r){switch(r?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function od(r,t=null,e=null){if(!r)return null;if(e&&typeof r=="string"&&(e.addDefaultProtocol&&r.startsWith("www.")&&r.match(/\./g)?.length>=2&&(r=`http://${r}`),e.tryConvertEncoding))try{r=n_(r)}catch{}const n=t?URL.parse(r,t):URL.parse(r);return QE(n)?n:null}function ad(r,t,e=!1){const n=URL.parse(r);return n?(n.hash=t,n.href):e&&od(r,"http://example.com")?r.split("#",1)[0]+`${t?`#${t}`:""}`:""}function _t(r,t,e,n=!1){return Object.defineProperty(r,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const ls=(function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t})();class Og extends ls{constructor(t,e){super(t,"PasswordException"),this.code=e}}class Bu extends ls{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class hl extends ls{constructor(t){super(t,"InvalidPDFException")}}class uo extends ls{constructor(t,e,n){super(t,"ResponseException"),this.status=e,this.missing=n}}class ZE extends ls{constructor(t){super(t,"FormatError")}}class ii extends ls{constructor(t){super(t,"AbortException")}}function Y0(r){(typeof r!="object"||r?.length===void 0)&&Ft("Invalid argument for bytesToString");const t=r.length,e=8192;if(t<e)return String.fromCharCode.apply(null,r);const n=[];for(let s=0;s<t;s+=e){const a=Math.min(s+e,t),l=r.subarray(s,a);n.push(String.fromCharCode.apply(null,l))}return n.join("")}function Ao(r){typeof r!="string"&&Ft("Invalid argument for stringToBytes");const t=r.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=r.charCodeAt(n)&255;return e}function JE(r){return String.fromCharCode(r>>24&255,r>>16&255,r>>8&255,r&255)}function t_(){const r=new Uint8Array(4);return r[0]=1,new Uint32Array(r.buffer,0,1)[0]===1}function e_(){try{return new Function(""),!0}catch{return!1}}class ye{static get isLittleEndian(){return _t(this,"isLittleEndian",t_())}static get isEvalSupported(){return _t(this,"isEvalSupported",e_())}static get isOffscreenCanvasSupported(){return _t(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return _t(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return _t(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){return _t(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Vu=Array.from(Array(256).keys(),r=>r.toString(16).padStart(2,"0"));class ct{static makeHexColor(t,e,n){return`#${Vu[t]}${Vu[e]}${Vu[n]}`}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e,n=0){const s=t[n],a=t[n+1];t[n]=s*e[0]+a*e[2]+e[4],t[n+1]=s*e[1]+a*e[3]+e[5]}static applyTransformToBezier(t,e,n=0){const s=e[0],a=e[1],l=e[2],c=e[3],h=e[4],d=e[5];for(let p=0;p<6;p+=2){const m=t[n+p],y=t[n+p+1];t[n+p]=m*s+y*l+h,t[n+p+1]=m*a+y*c+d}}static applyInverseTransform(t,e){const n=t[0],s=t[1],a=e[0]*e[3]-e[1]*e[2];t[0]=(n*e[3]-s*e[2]+e[2]*e[5]-e[4]*e[3])/a,t[1]=(-n*e[1]+s*e[0]+e[4]*e[1]-e[5]*e[0])/a}static axialAlignedBoundingBox(t,e,n){const s=e[0],a=e[1],l=e[2],c=e[3],h=e[4],d=e[5],p=t[0],m=t[1],y=t[2],w=t[3];let A=s*p+h,x=A,E=s*y+h,b=E,C=c*m+d,_=C,R=c*w+d,P=R;if(a!==0||l!==0){const D=a*p,I=a*y,j=l*m,H=l*w;A+=j,b+=j,E+=H,x+=H,C+=D,P+=D,R+=I,_+=I}n[0]=Math.min(n[0],A,E,x,b),n[1]=Math.min(n[1],C,R,_,P),n[2]=Math.max(n[2],A,E,x,b),n[3]=Math.max(n[3],C,R,_,P)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const n=t[0],s=t[1],a=t[2],l=t[3],c=n**2+s**2,h=n*a+s*l,d=a**2+l**2,p=(c+d)/2,m=Math.sqrt(p**2-(c*d-h**2));e[0]=Math.sqrt(p+m||1),e[1]=Math.sqrt(p-m||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),s=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>s)return null;const a=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),l=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return a>l?null:[n,a,s,l]}static pointBoundingBox(t,e,n){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}static rectBoundingBox(t,e,n,s,a){a[0]=Math.min(a[0],t,n),a[1]=Math.min(a[1],e,s),a[2]=Math.max(a[2],t,n),a[3]=Math.max(a[3],e,s)}static#t(t,e,n,s,a,l,c,h,d,p){if(d<=0||d>=1)return;const m=1-d,y=d*d,w=y*d,A=m*(m*(m*t+3*d*e)+3*y*n)+w*s,x=m*(m*(m*a+3*d*l)+3*y*c)+w*h;p[0]=Math.min(p[0],A),p[1]=Math.min(p[1],x),p[2]=Math.max(p[2],A),p[3]=Math.max(p[3],x)}static#e(t,e,n,s,a,l,c,h,d,p,m,y){if(Math.abs(d)<1e-12){Math.abs(p)>=1e-12&&this.#t(t,e,n,s,a,l,c,h,-m/p,y);return}const w=p**2-4*m*d;if(w<0)return;const A=Math.sqrt(w),x=2*d;this.#t(t,e,n,s,a,l,c,h,(-p+A)/x,y),this.#t(t,e,n,s,a,l,c,h,(-p-A)/x,y)}static bezierBoundingBox(t,e,n,s,a,l,c,h,d){d[0]=Math.min(d[0],t,c),d[1]=Math.min(d[1],e,h),d[2]=Math.max(d[2],t,c),d[3]=Math.max(d[3],e,h),this.#e(t,n,a,c,e,s,l,h,3*(-t+3*(n-a)+c),6*(t-2*n+a),3*(n-t),d),this.#e(t,n,a,c,e,s,l,h,3*(-e+3*(s-l)+h),6*(e-2*s+l),3*(s-e),d)}}function n_(r){return decodeURIComponent(escape(r))}let zu=null,jg=null;function Q0(r){return zu||(zu=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,jg=new Map([["","t"]])),r.replaceAll(zu,(t,e,n)=>e?e.normalize("NFKC"):jg.get(n))}function ld(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const r=new Uint8Array(32);return crypto.getRandomValues(r),Y0(r)}const cd="pdfjs_internal_id_";function i_(r,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[n,s,...a]=e;if(!r(n)&&!Number.isInteger(n)||!t(s))return!1;const l=a.length;let c=!0;switch(s.name){case"XYZ":if(l<2||l>3)return!1;break;case"Fit":case"FitB":return l===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(l>1)return!1;break;case"FitR":if(l!==4)return!1;c=!1;break;default:return!1}for(const h of a)if(!(typeof h=="number"||c&&h===null))return!1;return!0}function Te(r,t,e){return Math.min(Math.max(r,t),e)}function Z0(r){return Uint8Array.prototype.toBase64?r.toBase64():btoa(Y0(r))}function s_(r){return Uint8Array.fromBase64?Uint8Array.fromBase64(r):Ao(atob(r))}typeof Promise.try!="function"&&(Promise.try=function(r,...t){return new Promise(e=>{e(r(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(r){return r.reduce((t,e)=>t+e,0)});const Jn="http://www.w3.org/2000/svg";class rs{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function er(r,t="text"){if(Xr(r,document.baseURI)){const e=await fetch(r);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const s=new XMLHttpRequest;s.open("GET",r,!0),s.responseType=t,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(s.response);return}e(s.responseText);return}n(new Error(s.statusText))}},s.send(null)})}class So{constructor({viewBox:t,userUnit:e,scale:n,rotation:s,offsetX:a=0,offsetY:l=0,dontFlip:c=!1}){this.viewBox=t,this.userUnit=e,this.scale=n,this.rotation=s,this.offsetX=a,this.offsetY=l,n*=e;const h=(t[2]+t[0])/2,d=(t[3]+t[1])/2;let p,m,y,w;switch(s%=360,s<0&&(s+=360),s){case 180:p=-1,m=0,y=0,w=1;break;case 90:p=0,m=1,y=1,w=0;break;case 270:p=0,m=-1,y=-1,w=0;break;case 0:p=1,m=0,y=0,w=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(y=-y,w=-w);let A,x,E,b;p===0?(A=Math.abs(d-t[1])*n+a,x=Math.abs(h-t[0])*n+l,E=(t[3]-t[1])*n,b=(t[2]-t[0])*n):(A=Math.abs(h-t[0])*n+a,x=Math.abs(d-t[1])*n+l,E=(t[2]-t[0])*n,b=(t[3]-t[1])*n),this.transform=[p*n,m*n,y*n,w*n,A-p*n*h-y*n*d,x-m*n*h-w*n*d],this.width=E,this.height=b}get rawDims(){const t=this.viewBox;return _t(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:s=this.offsetY,dontFlip:a=!1}={}){return new So({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:s,dontFlip:a})}convertToViewportPoint(t,e){const n=[t,e];return ct.applyTransform(n,this.transform),n}convertToViewportRectangle(t){const e=[t[0],t[1]];ct.applyTransform(e,this.transform);const n=[t[2],t[3]];return ct.applyTransform(n,this.transform),[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){const n=[t,e];return ct.applyInverseTransform(n,this.transform),n}}class Al extends ls{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function bo(r){const t=r.length;let e=0;for(;e<t&&r[e].trim()==="";)e++;return r.substring(e,e+5).toLowerCase()==="data:"}function Sl(r){return typeof r=="string"&&/\.pdf$/i.test(r)}function J0(r){return[r]=r.split(/[#?]/,1),r.substring(r.lastIndexOf("/")+1)}function tv(r,t="document.pdf"){if(typeof r!="string")return t;if(bo(r))return St('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=(c=>{try{return new URL(c)}catch{try{return new URL(decodeURIComponent(c))}catch{try{return new URL(c,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(c),"https://foo.bar")}catch{return null}}}}})(r);if(!n)return t;const s=c=>{try{let h=decodeURIComponent(c);return h.includes("/")?(h=h.split("/").at(-1),h.test(/^\.pdf$/i)?h:c):h}catch{return c}},a=/\.pdf$/i,l=n.pathname.split("/").at(-1);if(a.test(l))return s(l);if(n.searchParams.size>0){const c=Array.from(n.searchParams.values()).reverse();for(const d of c)if(a.test(d))return s(d);const h=Array.from(n.searchParams.keys()).reverse();for(const d of h)if(a.test(d))return s(d)}if(n.hash){const h=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(h)return s(h[0])}return t}class Bg{started=Object.create(null);times=[];time(t){t in this.started&&St(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||St(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:s,end:a}of this.times)t.push(`${n.padEnd(e)} ${a-s}ms
`);return t.join("")}}function Xr(r,t){const e=t?URL.parse(r,t):URL.parse(r);return e?.protocol==="http:"||e?.protocol==="https:"}function Je(r){r.preventDefault()}function se(r){r.preventDefault(),r.stopPropagation()}function r_(r){console.log("Deprecated API usage: "+r)}class dl{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=this.#t.exec(t);if(!e)return null;const n=parseInt(e[1],10);let s=parseInt(e[2],10);s=s>=1&&s<=12?s-1:0;let a=parseInt(e[3],10);a=a>=1&&a<=31?a:1;let l=parseInt(e[4],10);l=l>=0&&l<=23?l:0;let c=parseInt(e[5],10);c=c>=0&&c<=59?c:0;let h=parseInt(e[6],10);h=h>=0&&h<=59?h:0;const d=e[7]||"Z";let p=parseInt(e[8],10);p=p>=0&&p<=23?p:0;let m=parseInt(e[9],10)||0;return m=m>=0&&m<=59?m:0,d==="-"?(l+=p,c+=m):d==="+"&&(l-=p,c-=m),new Date(Date.UTC(n,s,a,l,c,h))}}function ev(r,{scale:t=1,rotation:e=0}){const{width:n,height:s}=r.attributes.style,a=[0,0,parseInt(n),parseInt(s)];return new So({viewBox:a,userUnit:1,scale:t,rotation:e})}function Eo(r){if(r.startsWith("#")){const t=parseInt(r.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return r.startsWith("rgb(")?r.slice(4,-1).split(",").map(t=>parseInt(t)):r.startsWith("rgba(")?r.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(St(`Not a valid color format: "${r}"`),[0,0,0])}function o_(r){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of r.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;r.set(e,Eo(n))}t.remove()}function Xt(r){const{a:t,b:e,c:n,d:s,e:a,f:l}=r.getTransform();return[t,e,n,s,a,l]}function Nn(r){const{a:t,b:e,c:n,d:s,e:a,f:l}=r.getTransform().invertSelf();return[t,e,n,s,a,l]}function Ri(r,t,e=!1,n=!0){if(t instanceof So){const{pageWidth:s,pageHeight:a}=t.rawDims,{style:l}=r,c=ye.isCSSRoundSupported,h=`var(--total-scale-factor) * ${s}px`,d=`var(--total-scale-factor) * ${a}px`,p=c?`round(down, ${h}, var(--scale-round-x))`:`calc(${h})`,m=c?`round(down, ${d}, var(--scale-round-y))`:`calc(${d})`;!e||t.rotation%180===0?(l.width=p,l.height=m):(l.width=m,l.height=p)}n&&r.setAttribute("data-main-rotation",t.rotation)}class Cn{constructor(){const{pixelRatio:t}=Cn;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,n,s,a=-1){let l=1/0,c=1/0,h=1/0;n=Cn.capPixels(n,a),n>0&&(l=Math.sqrt(n/(t*e))),s!==-1&&(c=s/t,h=s/e);const d=Math.min(l,c,h);return this.sx>d||this.sy>d?(this.sx=d,this.sy=d,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,n):n}return t}}const fl=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class no{#t=null;#e=null;#n;#i=null;#r=null;#s=null;#o=null;static#a=null;constructor(t){this.#n=t,no.#a||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=this.#n._uiManager._signal;t.addEventListener("contextmenu",Je,{signal:e}),t.addEventListener("pointerdown",no.#u,{signal:e});const n=this.#i=document.createElement("div");n.className="buttons",t.append(n);const s=this.#n.toolbarPosition;if(s){const{style:a}=t,l=this.#n._uiManager.direction==="ltr"?1-s[0]:s[0];a.insetInlineEnd=`${100*l}%`,a.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#u(t){t.stopPropagation()}#c(t){this.#n._focusEventsAllowed=!1,se(t)}#d(t){this.#n._focusEventsAllowed=!0,se(t)}#l(t){const e=this.#n._uiManager._signal;t.addEventListener("focusin",this.#c.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#d.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Je,{signal:e})}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#r?.shown(),this.#s?.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=this.#n,n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",no.#a[t]),this.#l(n),n.addEventListener("click",s=>{e.delete()},{signal:e._signal}),this.#i.append(n)}get#p(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const e=await t.render();this.#l(e),this.#i.append(e,this.#p),this.#r=t}addComment(t){if(this.#s)return;const e=t.render();e&&(this.#l(e),this.#i.prepend(e,this.#p),this.#s=t,t.toolbar=this)}addColorPicker(t){if(this.#e)return;this.#e=t;const e=t.renderButton();this.#l(e),this.#i.append(e,this.#p)}async addEditSignatureButton(t){const e=this.#o=await t.renderEditButton(this.#n);this.#l(e),this.#i.append(e,this.#p)}async addButton(t,e){switch(t){case"colorPicker":this.addColorPicker(e);break;case"altText":await this.addAltText(e);break;case"editSignature":await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(e);break}}updateEditSignatureButton(t){this.#o&&(this.#o.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class a_{#t=null;#e=null;#n;constructor(t){this.#n=t}#i(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",Je,{signal:this.#n._signal});const e=this.#t=document.createElement("div");return e.className="buttons",t.append(e),this.#s(),t}#r(t,e){let n=0,s=0;for(const a of t){const l=a.y+a.height;if(l<n)continue;const c=a.x+(e?a.width:0);if(l>n){s=c,n=l;continue}e?c>s&&(s=c):c<s&&(s=c)}return[e?1-s:s,n]}show(t,e,n){const[s,a]=this.#r(e,n),{style:l}=this.#e||=this.#i();t.append(this.#e),l.insetInlineEnd=`${100*s}%`,l.top=`calc(${100*a}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#s(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=this.#n._signal;t.addEventListener("contextmenu",Je,{signal:n}),t.addEventListener("click",()=>{this.#n.highlightSelection("floating_button")},{signal:n}),this.#t.append(t)}}function nv(r,t,e){for(const n of e)t.addEventListener(n,r[n].bind(r))}class l_{#t=0;get id(){return`${X0}${this.#t++}`}}class ud{#t=ld();#e=0;#n=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=t;const a=s.decode().then(()=>(n.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return _t(this,"_isSVGFittingCanvas",a)}async#i(t,e){this.#n||=new Map;let n=this.#n.get(t);if(n===null)return null;if(n?.bitmap)return n.refCounter+=1,n;try{n||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let s;if(typeof e=="string"?(n.url=e,s=await er(e,"blob")):e instanceof File?s=n.file=e:e instanceof Blob&&(s=e),s.type==="image/svg+xml"){const a=ud._isSVGFittingCanvas,l=new FileReader,c=new Image,h=new Promise((d,p)=>{c.onload=()=>{n.bitmap=c,n.isSvg=!0,d()},l.onload=async()=>{const m=n.svgUrl=l.result;c.src=await a?`${m}#svgView(preserveAspectRatio(none))`:m},c.onerror=l.onerror=p});l.readAsDataURL(s),await h}else n.bitmap=await createImageBitmap(s);n.refCounter=1}catch(s){St(s),n=null}return this.#n.set(t,n),n&&this.#n.set(n.id,n),n}async getFromFile(t){const{lastModified:e,name:n,size:s,type:a}=t;return this.#i(`${e}_${n}_${s}_${a}`,t)}async getFromUrl(t){return this.#i(t,t)}async getFromBlob(t,e){const n=await e;return this.#i(t,n)}async getFromId(t){this.#n||=new Map;const e=this.#n.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){this.#n||=new Map;let n=this.#n.get(t);if(n?.bitmap)return n.refCounter+=1,n;const s=new OffscreenCanvas(e.width,e.height);return s.getContext("2d").drawImage(e,0,0),n={bitmap:s.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#n.set(t,n),this.#n.set(n.id,n),n}getSvgUrl(t){const e=this.#n.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#n||=new Map;const e=this.#n.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const s=new OffscreenCanvas(n.width,n.height);s.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=s.convertToBlob()}n.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class c_{#t=[];#e=!1;#n;#i=-1;constructor(t=128){this.#n=t}add({cmd:t,undo:e,post:n,mustExec:s,type:a=NaN,overwriteIfSameType:l=!1,keepUndo:c=!1}){if(s&&t(),this.#e)return;const h={cmd:t,undo:e,post:n,type:a};if(this.#i===-1){this.#t.length>0&&(this.#t.length=0),this.#i=0,this.#t.push(h);return}if(l&&this.#t[this.#i].type===a){c&&(h.undo=this.#t[this.#i].undo),this.#t[this.#i]=h;return}const d=this.#i+1;d===this.#n?this.#t.splice(0,1):(this.#i=d,d<this.#t.length&&this.#t.splice(d)),this.#t.push(h)}undo(){if(this.#i===-1)return;this.#e=!0;const{undo:t,post:e}=this.#t[this.#i];t(),e?.(),this.#e=!1,this.#i-=1}redo(){if(this.#i<this.#t.length-1){this.#i+=1,this.#e=!0;const{cmd:t,post:e}=this.#t[this.#i];t(),e?.(),this.#e=!1}}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#t.length-1}cleanType(t){if(this.#i!==-1){for(let e=this.#i;e>=0;e--)if(this.#t[e].type!==t){this.#t.splice(e+1,this.#i-e),this.#i=e;return}this.#t.length=0,this.#i=-1}}destroy(){this.#t=null}}class _o{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=ye.platform;for(const[n,s,a={}]of t)for(const l of n){const c=l.startsWith("mac+");e&&c?(this.callbacks.set(l.slice(4),{callback:s,options:a}),this.allKeys.add(l.split("+").at(-1))):!e&&!c&&(this.callbacks.set(l,{callback:s,options:a}),this.allKeys.add(l.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(this.#t(e));if(!n)return;const{callback:s,options:{bubbles:a=!1,args:l=[],checker:c=null}}=n;c&&!c(t,e)||(s.bind(t,...l,e)(),a||se(e))}}class hd{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return o_(t),_t(this,"_colors",t)}convert(t){const e=Eo(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,s]of this._colors)if(s.every((a,l)=>a===e[l]))return hd._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?ct.makeHexColor(...e):t}}class si{#t=new AbortController;#e=null;#n=new Map;#i=new Map;#r=null;#s=null;#o=null;#a=new c_;#u=null;#c=null;#d=null;#l=0;#p=new Set;#g=null;#f=null;#h=new Set;_editorUndoBar=null;#m=!1;#w=!1;#y=!1;#A=null;#S=null;#v=null;#E=null;#k=!1;#b=null;#R=new l_;#P=!1;#T=!1;#C=null;#L=null;#O=null;#D=null;#z=null;#_=At.NONE;#x=new Set;#j=null;#B=null;#H=null;#W=null;#G={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#U=[0,0];#I=null;#N=null;#$=null;#Y=null;#F=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=si.prototype,e=l=>l.#N.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),n=(l,{target:c})=>{if(c instanceof HTMLInputElement){const{type:h}=c;return h!=="text"&&h!=="number"}return!0},s=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return _t(this,"_keyboardManager",new _o([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(l,{target:c})=>!(c instanceof HTMLButtonElement)&&l.#N.contains(c)&&!l.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(l,{target:c})=>!(c instanceof HTMLButtonElement)&&l.#N.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}]]))}constructor(t,e,n,s,a,l,c,h,d,p,m,y,w,A,x,E){const b=this._signal=this.#t.signal;this.#N=t,this.#$=e,this.#Y=n,this.#r=s,this.#u=a,this.#B=l,this._eventBus=c,c._on("editingaction",this.onEditingAction.bind(this),{signal:b}),c._on("pagechanging",this.onPageChanging.bind(this),{signal:b}),c._on("scalechanging",this.onScaleChanging.bind(this),{signal:b}),c._on("rotationchanging",this.onRotationChanging.bind(this),{signal:b}),c._on("setpreference",this.onSetPreference.bind(this),{signal:b}),c._on("switchannotationeditorparams",C=>this.updateParams(C.type,C.value),{signal:b}),this.#rt(),this.#ct(),this.#Z(),this.#s=h.annotationStorage,this.#A=h.filterFactory,this.#H=d,this.#E=p||null,this.#m=m,this.#w=y,this.#y=w,this.#z=A||null,this.viewParameters={realScale:rs.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=x||null,this._supportsPinchToZoom=E!==!1}destroy(){this.#F?.resolve(),this.#F=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#i.values())t.destroy();this.#i.clear(),this.#n.clear(),this.#h.clear(),this.#D?.clear(),this.#e=null,this.#x.clear(),this.#a.destroy(),this.#r?.destroy(),this.#u?.destroy(),this.#B?.destroy(),this.#b?.hide(),this.#b=null,this.#O?.destroy(),this.#O=null,this.#S&&(clearTimeout(this.#S),this.#S=null),this.#I&&(clearTimeout(this.#I),this.#I=null),this._editorUndoBar?.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#z}get useNewAltTextFlow(){return this.#w}get useNewAltTextWhenAddingImage(){return this.#y}get hcmFilter(){return _t(this,"hcmFilter",this.#H?this.#A.addHCMFilter(this.#H.foreground,this.#H.background):"none")}get direction(){return _t(this,"direction",getComputedStyle(this.#N).direction)}get _highlightColors(){return _t(this,"_highlightColors",this.#E?new Map(this.#E.split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return _t(this,"highlightColors",null);const e=new Map,n=!!this.#H;for(const[s,a]of t){const l=s.endsWith("_HCM");if(n&&l){e.set(s.replace("_HCM",""),a);continue}!n&&!l&&e.set(s,a)}return _t(this,"highlightColors",e)}get highlightColorNames(){return _t(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#d=t}setMainHighlightColorPicker(t){this.#O=t}editAltText(t,e=!1){this.#r?.editAltText(this,t,e)}hasCommentManager(){return!!this.#u}editComment(t,e){this.#u?.open(this,t,e)}getSignature(t){this.#B?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#B}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":this.#y=e;break}}onPageChanging({pageNumber:t}){this.#l=t-1}focusMainContainer(){this.#N.focus()}findParent(t,e){for(const n of this.#i.values()){const{x:s,y:a,width:l,height:c}=n.div.getBoundingClientRect();if(t>=s&&t<=s+l&&e>=a&&e<=a+c)return n}return null}disableUserSelect(t=!1){this.#$.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#h.add(t)}removeShouldRescale(t){this.#h.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*rs.PDF_TO_CSS_UNITS;for(const e of this.#h)e.onScaleChanging();this.#d?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#K({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#Q(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of this.#i.values())if(n.hasTextLayer(t))return n;return null}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:n,anchorOffset:s,focusNode:a,focusOffset:l}=e,c=e.toString(),d=this.#K(e).closest(".textLayer"),p=this.getSelectionBoxes(d);if(!p)return;e.empty();const m=this.#Q(d),y=this.#_===At.NONE,w=()=>{m?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:p,anchorNode:n,anchorOffset:s,focusNode:a,focusOffset:l,text:c}),y&&this.showAllEditors("highlight",!0,!0)};if(y){this.switchToMode(At.HIGHLIGHT,w);return}w()}#it(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=this.#K(t).closest(".textLayer"),s=this.getSelectionBoxes(n);s&&(this.#b||=new a_(this),this.#b.show(n,s,this.direction==="ltr"))}addToAnnotationStorage(t){!t.isEmpty()&&this.#s&&!this.#s.has(t.id)&&this.#s.setValue(t.id,t)}a11yAlert(t,e=null){const n=this.#Y;n&&(n.setAttribute("data-l10n-id",t),e?n.setAttribute("data-l10n-args",JSON.stringify(e)):n.removeAttribute("data-l10n-args"))}#st(){const t=document.getSelection();if(!t||t.isCollapsed){this.#j&&(this.#b?.hide(),this.#j=null,this.#M({hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===this.#j)return;const s=this.#K(t).closest(".textLayer");if(!s){this.#j&&(this.#b?.hide(),this.#j=null,this.#M({hasSelectedText:!1}));return}if(this.#b?.hide(),this.#j=e,this.#M({hasSelectedText:!0}),!(this.#_!==At.HIGHLIGHT&&this.#_!==At.NONE)&&(this.#_===At.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#k=this.isShiftKeyDown,!this.isShiftKeyDown)){const a=this.#_===At.HIGHLIGHT?this.#Q(s):null;a?.toggleDrawing();const l=new AbortController,c=this.combinedSignal(l),h=d=>{d.type==="pointerup"&&d.button!==0||(l.abort(),a?.toggleDrawing(!0),d.type==="pointerup"&&this.#q("main_toolbar"))};window.addEventListener("pointerup",h,{signal:c}),window.addEventListener("blur",h,{signal:c})}}#q(t=""){this.#_===At.HIGHLIGHT?this.highlightSelection(t):this.#m&&this.#it()}#rt(){document.addEventListener("selectionchange",this.#st.bind(this),{signal:this._signal})}#ot(){if(this.#v)return;this.#v=new AbortController;const t=this.combinedSignal(this.#v);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#at(){this.#v?.abort(),this.#v=null}blur(){if(this.isShiftKeyDown=!1,this.#k&&(this.#k=!1,this.#q("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#x)if(e.div.contains(t)){this.#L=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#L)return;const[t,e]=this.#L;this.#L=null,e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}#Z(){if(this.#C)return;this.#C=new AbortController;const t=this.combinedSignal(this.#C);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#lt(){this.#C?.abort(),this.#C=null}#J(){if(this.#c)return;this.#c=new AbortController;const t=this.combinedSignal(this.#c);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#tt(){this.#c?.abort(),this.#c=null}#ct(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#Z(),this.#J()}removeEditListeners(){this.#lt(),this.#tt()}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of this.#f)if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of this.#f)if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const n of this.#x){const s=n.serialize(!0);s&&e.push(s)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const a of e.items)for(const l of this.#f)if(l.isHandlingMimeForPasting(a.type)){l.paste(a,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(a){St(`paste: "${a.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const s=this.currentLayer;try{const a=[];for(const h of n){const d=await s.deserialize(h);if(!d)return;a.push(d)}const l=()=>{for(const h of a)this.#et(h);this.#nt(a)},c=()=>{for(const h of a)h.remove()};this.addCommands({cmd:l,undo:c,mustExec:!0})}catch(a){St(`paste: "${a.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#_!==At.NONE&&!this.isEditorHandlingKeyboard&&si._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#k&&(this.#k=!1,this.#q("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}#M(t){Object.entries(t).some(([n,s])=>this.#G[n]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#G,t)}),this.#_===At.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#V([[Rt.HIGHLIGHT_FREE,!0]]))}#V(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#ot(),this.#J(),this.#M({isEditing:this.#_!==At.NONE,isEmpty:this.#X(),hasSomethingToUndo:this.#a.hasSomethingToUndo(),hasSomethingToRedo:this.#a.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#at(),this.#tt(),this.#M({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#f){this.#f=t;for(const e of this.#f)this.#V(e.defaultPropertiesToUpdate)}}getId(){return this.#R.id}get currentLayer(){return this.#i.get(this.#l)}getLayer(t){return this.#i.get(t)}get currentPageIndex(){return this.#l}addLayer(t){this.#i.set(t.pageIndex,t),this.#P?t.enable():t.disable()}removeLayer(t){this.#i.delete(t.pageIndex)}async updateMode(t,e=null,n=!1,s=!1,a=!1){if(this.#_!==t&&!(this.#F&&(await this.#F.promise,!this.#F))){if(this.#F=Promise.withResolvers(),this.#d?.commitOrRemove(),this.#_=t,t===At.NONE){this.setEditingState(!1),this.#ht(),this._editorUndoBar?.hide(),this.#F.resolve();return}t===At.SIGNATURE&&await this.#B?.loadSignatures(),this.setEditingState(!0),await this.#ut(),this.unselectAll();for(const l of this.#i.values())l.updateMode(t);if(!e){n&&this.addNewEditorFromKeyboard(),this.#F.resolve();return}for(const l of this.#n.values())l.annotationElementId===e||l.id===e?(this.setSelected(l),a?l.editComment():s&&l.enterInEditMode()):l.unselect();this.#F.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#_&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(this.#f){switch(t){case Rt.CREATE:this.currentLayer.addNewEditor(e);return;case Rt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#W||=new Map).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const n of this.#x)n.updateParams(t,e);else for(const n of this.#f)n.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){for(const a of this.#n.values())a.editorType===t&&a.show(e);(this.#W?.get(Rt.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#V([[Rt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#T!==t){this.#T=t;for(const e of this.#i.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}async#ut(){if(!this.#P){this.#P=!0;const t=[];for(const e of this.#i.values())t.push(e.enable());await Promise.all(t);for(const e of this.#n.values())e.enable()}}#ht(){if(this.unselectAll(),this.#P){this.#P=!1;for(const t of this.#i.values())t.disable();for(const t of this.#n.values())t.disable()}}getEditors(t){const e=[];for(const n of this.#n.values())n.pageIndex===t&&e.push(n);return e}getEditor(t){return this.#n.get(t)}addEditor(t){this.#n.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#S&&clearTimeout(this.#S),this.#S=setTimeout(()=>{this.focusMainContainer(),this.#S=null},0)),this.#n.delete(t.id),t.annotationElementId&&this.#D?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#p.has(t.annotationElementId))&&this.#s?.remove(t.id)}addDeletedAnnotationElement(t){this.#p.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#p.has(t)}removeDeletedAnnotationElement(t){this.#p.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#et(t){const e=this.#i.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#V(t.propertiesToUpdate))}get#dt(){let t=null;for(t of this.#x);return t}updateUI(t){this.#dt===t&&this.#V(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#V(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#x.has(t)){this.#x.delete(t),t.unselect(),this.#M({hasSelectedEditor:this.hasSelection});return}this.#x.add(t),t.select(),this.#V(t.propertiesToUpdate),this.#M({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.id}),this.#d?.commitOrRemove();for(const e of this.#x)e!==t&&e.unselect();this.#x.clear(),this.#x.add(t),t.select(),this.#V(t.propertiesToUpdate),this.#M({hasSelectedEditor:!0})}isSelected(t){return this.#x.has(t)}get firstSelectedEditor(){return this.#x.values().next().value}unselect(t){t.unselect(),this.#x.delete(t),this.#M({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#x.size!==0}get isEnterHandled(){return this.#x.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#a.undo(),this.#M({hasSomethingToUndo:this.#a.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#X()}),this._editorUndoBar?.hide()}redo(){this.#a.redo(),this.#M({hasSomethingToUndo:!0,hasSomethingToRedo:this.#a.hasSomethingToRedo(),isEmpty:this.#X()})}addCommands(t){this.#a.add(t),this.#M({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#X()})}cleanUndoStack(t){this.#a.cleanType(t)}#X(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const t of this.#n.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...this.#x],n=()=>{this._editorUndoBar?.show(s,e.length===1?e[0].editorType:e.length);for(const a of e)a.remove()},s=()=>{for(const a of e)this.#et(a)};this.addCommands({cmd:n,undo:s,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#nt(t){for(const e of this.#x)e.unselect();this.#x.clear();for(const e of t)e.isEmpty()||(this.#x.add(e),e.select());this.#M({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#x)t.commit();this.#nt(this.#n.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#_!==At.NONE))&&!this.#d?.commitOrRemove()&&this.hasSelection){for(const t of this.#x)t.unselect();this.#x.clear(),this.#M({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;this.#U[0]+=t,this.#U[1]+=e;const[s,a]=this.#U,l=[...this.#x],c=1e3;this.#I&&clearTimeout(this.#I),this.#I=setTimeout(()=>{this.#I=null,this.#U[0]=this.#U[1]=0,this.addCommands({cmd:()=>{for(const h of l)this.#n.has(h.id)&&(h.translateInPage(s,a),h.translationDone())},undo:()=>{for(const h of l)this.#n.has(h.id)&&(h.translateInPage(-s,-a),h.translationDone())},mustExec:!1})},c);for(const h of l)h.translateInPage(t,e),h.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#g=new Map;for(const t of this.#x)this.#g.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#g)return!1;this.disableUserSelect(!1);const t=this.#g;this.#g=null;let e=!1;for(const[{x:s,y:a,pageIndex:l},c]of t)c.newX=s,c.newY=a,c.newPageIndex=l,e||=s!==c.savedX||a!==c.savedY||l!==c.savedPageIndex;if(!e)return!1;const n=(s,a,l,c)=>{if(this.#n.has(s.id)){const h=this.#i.get(c);h?s._setParentAndPosition(h,a,l):(s.pageIndex=c,s.x=a,s.y=l)}};return this.addCommands({cmd:()=>{for(const[s,{newX:a,newY:l,newPageIndex:c}]of t)n(s,a,l,c)},undo:()=>{for(const[s,{savedX:a,savedY:l,savedPageIndex:c}]of t)n(s,a,l,c)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#g)for(const n of this.#g.keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#x.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#_}get imageManager(){return _t(this,"imageManager",new ud)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let d=0,p=e.rangeCount;d<p;d++)if(!t.contains(e.getRangeAt(d).commonAncestorContainer))return null;const{x:n,y:s,width:a,height:l}=t.getBoundingClientRect();let c;switch(t.getAttribute("data-main-rotation")){case"90":c=(d,p,m,y)=>({x:(p-s)/l,y:1-(d+m-n)/a,width:y/l,height:m/a});break;case"180":c=(d,p,m,y)=>({x:1-(d+m-n)/a,y:1-(p+y-s)/l,width:m/a,height:y/l});break;case"270":c=(d,p,m,y)=>({x:1-(p+y-s)/l,y:(d-n)/a,width:y/l,height:m/a});break;default:c=(d,p,m,y)=>({x:(d-n)/a,y:(p-s)/l,width:m/a,height:y/l});break}const h=[];for(let d=0,p=e.rangeCount;d<p;d++){const m=e.getRangeAt(d);if(!m.collapsed)for(const{x:y,y:w,width:A,height:x}of m.getClientRects())A===0||x===0||h.push(c(y,w,A,x))}return h.length===0?null:h}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#o||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const e=this.#o?.get(t.data.id);if(!e)return;const n=this.#s.getRawValue(e);n&&(this.#_===At.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}setMissingCanvas(t,e,n){const s=this.#D?.get(t);s&&(s.setCanvas(e,n),this.#D.delete(t))}addMissingCanvas(t,e){(this.#D||=new Map).set(t,e)}}class jn{#t=null;#e=!1;#n=null;#i=null;#r=null;#s=null;#o=!1;#a=null;#u=null;#c=null;#d=null;#l=!1;static#p=null;static _l10n=null;constructor(t){this.#u=t,this.#l=t._uiManager.useNewAltTextFlow,jn.#p||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){jn._l10n??=t}async render(){const t=this.#n=document.createElement("button");t.className="altText",t.tabIndex="0";const e=this.#i=document.createElement("span");t.append(e),this.#l?(t.classList.add("new"),t.setAttribute("data-l10n-id",jn.#p.missing),e.setAttribute("data-l10n-id",jn.#p["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=this.#u._uiManager._signal;t.addEventListener("contextmenu",Je,{signal:n}),t.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:n});const s=a=>{a.preventDefault(),this.#u._uiManager.editAltText(this.#u),this.#l&&this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#g}})};return t.addEventListener("click",s,{capture:!0,signal:n}),t.addEventListener("keydown",a=>{a.target===t&&a.key==="Enter"&&(this.#o=!0,s(a))},{signal:n}),await this.#f(),t}get#g(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#o}),this.#o=!1)}isEmpty(){return this.#l?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#l?this.#t!==null||!!this.#c:this.isEmpty()}get guessedText(){return this.#c}async setGuessedText(t){this.#t===null&&(this.#c=t,this.#d=await jn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#f())}toggleAltTextBadge(t=!1){if(!this.#l||this.#t){this.#a?.remove(),this.#a=null;return}if(!this.#a){const e=this.#a=document.createElement("div");e.className="noAltTextBadge",this.#u.div.append(e)}this.#a.classList.toggle("hidden",!t)}serialize(t){let e=this.#t;return!t&&this.#c===e&&(e=this.#d),{altText:e,decorative:this.#e,guessedText:this.#c,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:s,cancel:a=!1}){n&&(this.#c=n,this.#d=s),!(this.#t===t&&this.#e===e)&&(a||(this.#t=t,this.#e=e),this.#f())}toggle(t=!1){this.#n&&(!t&&this.#s&&(clearTimeout(this.#s),this.#s=null),this.#n.disabled=!t)}shown(){this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#g}})}destroy(){this.#n?.remove(),this.#n=null,this.#i=null,this.#r=null,this.#a?.remove(),this.#a=null}async#f(){const t=this.#n;if(!t)return;if(this.#l){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",jn.#p[this.#g]),this.#i?.setAttribute("data-l10n-id",jn.#p[`${this.#g}-label`]),!this.#t){this.#r?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#r?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=this.#r;if(!e){this.#r=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${this.#u.id}`;const s=100,a=this.#u._uiManager._signal;a.addEventListener("abort",()=>{clearTimeout(this.#s),this.#s=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#s=setTimeout(()=>{this.#s=null,this.#r.classList.add("show"),this.#u._reportTelemetry({action:"alt_text_tooltip"})},s)},{signal:a}),t.addEventListener("mouseleave",()=>{this.#s&&(clearTimeout(this.#s),this.#s=null),this.#r?.classList.remove("show")},{signal:a})}this.#e?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=this.#t),e.parentNode||t.append(e),this.#u.getElementForAltText()?.setAttribute("aria-describedby",e.id)}}class Xa{#t=null;#e=!1;#n=null;#i=null;#r=null;#s=null;#o=!1;constructor(t){this.#n=t,this.toolbar=null}render(){if(!this.#n._uiManager.hasCommentManager())return null;const t=this.#t=document.createElement("button");t.className="comment",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button");const e=this.#n._uiManager._signal;t.addEventListener("contextmenu",Je,{signal:e}),t.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:e});const n=s=>{s.preventDefault(),this.edit()};return t.addEventListener("click",n,{capture:!0,signal:e}),t.addEventListener("keydown",s=>{s.target===t&&s.key==="Enter"&&(this.#e=!0,n(s))},{signal:e}),t}edit(){const{bottom:t,left:e,right:n}=this.#n.getClientDimensions(),s={top:t};this.#n._uiManager.direction==="ltr"?s.right=n:s.left=e,this.#n._uiManager.editComment(this.#n,s)}finish(){this.#t&&(this.#t.focus({focusVisible:this.#e}),this.#e=!1)}isDeleted(){return this.#o||this.#r===""}hasBeenEdited(){return this.isDeleted()||this.#r!==this.#i}serialize(){return this.data}get data(){return{text:this.#r,date:this.#s,deleted:this.#o}}set data(t){if(t===null){this.#r="",this.#o=!0;return}this.#r=t,this.#s=new Date,this.#o=!1}setInitialText(t){this.#i=t,this.data=t}toggle(t=!1){this.#t&&(this.#t.disabled=!t)}shown(){}destroy(){this.#t?.remove(),this.#t=null,this.#r="",this.#s=null,this.#n=null,this.#e=!1,this.#o=!1}}class Co{#t;#e=!1;#n=null;#i;#r;#s;#o;#a=null;#u;#c=null;#d;#l=null;constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:n=null,onPinchStart:s=null,onPinching:a=null,onPinchEnd:l=null,signal:c}){this.#t=t,this.#n=n,this.#i=e,this.#r=s,this.#s=a,this.#o=l,this.#d=new AbortController,this.#u=AbortSignal.any([c,this.#d.signal]),t.addEventListener("touchstart",this.#p.bind(this),{passive:!1,signal:this.#u})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Cn.pixelRatio}#p(t){if(this.#i?.())return;if(t.touches.length===1){if(this.#a)return;const s=this.#a=new AbortController,a=AbortSignal.any([this.#u,s.signal]),l=this.#t,c={capture:!0,signal:a,passive:!1},h=d=>{d.pointerType==="touch"&&(this.#a?.abort(),this.#a=null)};l.addEventListener("pointerdown",d=>{d.pointerType==="touch"&&(se(d),h(d))},c),l.addEventListener("pointerup",h,c),l.addEventListener("pointercancel",h,c);return}if(!this.#l){this.#l=new AbortController;const s=AbortSignal.any([this.#u,this.#l.signal]),a=this.#t,l={signal:s,capture:!1,passive:!1};a.addEventListener("touchmove",this.#g.bind(this),l);const c=this.#f.bind(this);a.addEventListener("touchend",c,l),a.addEventListener("touchcancel",c,l),l.capture=!0,a.addEventListener("pointerdown",se,l),a.addEventListener("pointermove",se,l),a.addEventListener("pointercancel",se,l),a.addEventListener("pointerup",se,l),this.#r?.()}if(se(t),t.touches.length!==2||this.#n?.()){this.#c=null;return}let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]),this.#c={touch0X:e.screenX,touch0Y:e.screenY,touch1X:n.screenX,touch1Y:n.screenY}}#g(t){if(!this.#c||t.touches.length!==2)return;se(t);let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]);const{screenX:s,screenY:a}=e,{screenX:l,screenY:c}=n,h=this.#c,{touch0X:d,touch0Y:p,touch1X:m,touch1Y:y}=h,w=m-d,A=y-p,x=l-s,E=c-a,b=Math.hypot(x,E)||1,C=Math.hypot(w,A)||1;if(!this.#e&&Math.abs(C-b)<=Co.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(h.touch0X=s,h.touch0Y=a,h.touch1X=l,h.touch1Y=c,!this.#e){this.#e=!0;return}const _=[(s+l)/2,(a+c)/2];this.#s?.(_,C,b)}#f(t){t.touches.length>=2||(this.#l&&(this.#l.abort(),this.#l=null,this.#o?.()),this.#c&&(se(t),this.#c=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#a?.abort(),this.#a=null}}class mt{#t=null;#e=null;#n=null;#i=null;#r=!1;#s=null;#o="";#a=!1;#u=null;#c=null;#d=null;#l=null;#p="";#g=!1;#f=null;#h=!1;#m=!1;#w=!1;#y=null;#A=0;#S=0;#v=null;#E=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#k=!1;#b=mt._zIndex++;static _borderLineWidth=-1;static _colorManager=new hd;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=mt.prototype._resizeWithKeyboard,e=si.TRANSLATE_SMALL,n=si.TRANSLATE_BIG;return _t(this,"_resizerKeyboardManager",new _o([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],mt.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null;const{rotation:e,rawDims:{pageWidth:n,pageHeight:s,pageX:a,pageY:l}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,s],this.pageTranslation=[a,l];const[c,h]=this.parentDimensions;this.x=t.x/c,this.y=t.y/h,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return _t(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new u_({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(mt._l10n??=t,mt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),mt._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);mt._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Ft("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#k}set _isDraggable(t){this.#k=t,this.div?.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#b}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):this.#$(),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#g?this.#g=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,s){const[a,l]=this.parentDimensions;[n,s]=this.screenToPageTranslation(n,s),this.x=(t+n)/a,this.y=(e+s)/l,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[n,s]=this.parentDimensions;this.setAt(t*n,e*s,this.width*n,this.height*s),this._onTranslated()}#R([t,e],n,s){[n,s]=this.screenToPageTranslation(n,s),this.x+=n/t,this.y+=s/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#R(this.parentDimensions,t,e)}translateInPage(t,e){this.#f||=[this.x,this.y,this.width,this.height],this.#R(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){this.#f||=[this.x,this.y,this.width,this.height];const{div:n,parentDimensions:[s,a]}=this;if(this.x+=t/s,this.y+=e/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:m,y}=this.div.getBoundingClientRect();this.parent.findNewParent(this,m,y)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:c}=this;const[h,d]=this.getBaseTranslation();l+=h,c+=d;const{style:p}=n;p.left=`${(100*l).toFixed(2)}%`,p.top=`${(100*c).toFixed(2)}%`,this._onTranslating(l,c),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#f&&(this.#f[0]!==this.x||this.#f[1]!==this.y)}get _hasBeenResized(){return!!this.#f&&(this.#f[2]!==this.width||this.#f[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=mt,s=n/t,a=n/e;switch(this.rotation){case 90:return[-s,a];case 180:return[s,a];case 270:return[s,-a];default:return[-s,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[n,s]}=this;let{x:a,y:l,width:c,height:h}=this;if(c*=n,h*=s,a*=n,l*=s,this._mustFixPosition)switch(t){case 0:a=Te(a,0,n-c),l=Te(l,0,s-h);break;case 90:a=Te(a,0,n-h),l=Te(l,c,s);break;case 180:a=Te(a,c,n),l=Te(l,h,s);break;case 270:a=Te(a,h,n),l=Te(l,0,s-c);break}this.x=a/=n,this.y=l/=s;const[d,p]=this.getBaseTranslation();a+=d,l+=p,e.left=`${(100*a).toFixed(2)}%`,e.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}static#P(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return mt.#P(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return mt.#P(t,e,360-this.parentRotation)}#T(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(t,e){const[n,s]=this.parentDimensions,{style:a}=this.div;a.width=`${(100*t/n).toFixed(2)}%`,this.#a||(a.height=`${(100*e/s).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:n}=t,s=n.endsWith("%"),a=!this.#a&&e.endsWith("%");if(s&&a)return;const[l,c]=this.parentDimensions;s||(t.width=`${(100*parseFloat(n)/l).toFixed(2)}%`),!this.#a&&!a&&(t.height=`${(100*parseFloat(e)/c).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#C(){if(this.#u)return;this.#u=document.createElement("div"),this.#u.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const s=document.createElement("div");this.#u.append(s),s.classList.add("resizer",n),s.setAttribute("data-resizer-name",n),s.addEventListener("pointerdown",this.#L.bind(this,n),{signal:e}),s.addEventListener("contextmenu",Je,{signal:e}),s.tabIndex=-1}this.div.prepend(this.#u)}#L(t,e){e.preventDefault();const{isMac:n}=ye.platform;if(e.button!==0||e.ctrlKey&&n)return;this.#n?.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,this.#c=[e.screenX,e.screenY];const a=new AbortController,l=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#z.bind(this,t),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",se,{passive:!1,signal:l}),window.addEventListener("contextmenu",Je,{signal:l}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const c=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const d=()=>{a.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=c,this.div.style.cursor=h,this.#D()};window.addEventListener("pointerup",d,{signal:l}),window.addEventListener("blur",d,{signal:l})}#O(t,e,n,s){this.width=n,this.height=s,this.x=t,this.y=e;const[a,l]=this.parentDimensions;this.setDims(a*n,l*s),this.fixAndSetPosition(),this._onResized()}_onResized(){}#D(){if(!this.#d)return;const{savedX:t,savedY:e,savedWidth:n,savedHeight:s}=this.#d;this.#d=null;const a=this.x,l=this.y,c=this.width,h=this.height;a===t&&l===e&&c===n&&h===s||this.addCommands({cmd:this.#O.bind(this,a,l,c,h),undo:this.#O.bind(this,t,e,n,s),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#z(t,e){const[n,s]=this.parentDimensions,a=this.x,l=this.y,c=this.width,h=this.height,d=mt.MIN_SIZE/n,p=mt.MIN_SIZE/s,m=this.#T(this.rotation),y=(q,U)=>[m[0]*q+m[2]*U,m[1]*q+m[3]*U],w=this.#T(360-this.rotation),A=(q,U)=>[w[0]*q+w[2]*U,w[1]*q+w[3]*U];let x,E,b=!1,C=!1;switch(t){case"topLeft":b=!0,x=(q,U)=>[0,0],E=(q,U)=>[q,U];break;case"topMiddle":x=(q,U)=>[q/2,0],E=(q,U)=>[q/2,U];break;case"topRight":b=!0,x=(q,U)=>[q,0],E=(q,U)=>[0,U];break;case"middleRight":C=!0,x=(q,U)=>[q,U/2],E=(q,U)=>[0,U/2];break;case"bottomRight":b=!0,x=(q,U)=>[q,U],E=(q,U)=>[0,0];break;case"bottomMiddle":x=(q,U)=>[q/2,U],E=(q,U)=>[q/2,0];break;case"bottomLeft":b=!0,x=(q,U)=>[0,U],E=(q,U)=>[q,0];break;case"middleLeft":C=!0,x=(q,U)=>[0,U/2],E=(q,U)=>[q,U/2];break}const _=x(c,h),R=E(c,h);let P=y(...R);const D=mt._round(a+P[0]),I=mt._round(l+P[1]);let j=1,H=1,G,Q;if(e.fromKeyboard)({deltaX:G,deltaY:Q}=e);else{const{screenX:q,screenY:U}=e,[$,J]=this.#c;[G,Q]=this.screenToPageTranslation(q-$,U-J),this.#c[0]=q,this.#c[1]=U}if([G,Q]=A(G/n,Q/s),b){const q=Math.hypot(c,h);j=H=Math.max(Math.min(Math.hypot(R[0]-_[0]-G,R[1]-_[1]-Q)/q,1/c,1/h),d/c,p/h)}else C?j=Te(Math.abs(R[0]-_[0]-G),d,1)/c:H=Te(Math.abs(R[1]-_[1]-Q),p,1)/h;const ht=mt._round(c*j),lt=mt._round(h*H);P=y(...E(ht,lt));const et=D-P[0],bt=I-P[1];this.#f||=[this.x,this.y,this.width,this.height],this.width=ht,this.height=lt,this.x=et,this.y=bt,this.setDims(n*ht,s*lt),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#n?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#m)return this._editToolbar;this._editToolbar=new no(this),this.div.append(this._editToolbar.render()),this._editToolbar.addButton("comment",this.addCommentButton());const{toolbarButtons:t}=this;if(t)for(const[e,n]of t)await this._editToolbar.addButton(e,n);return this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#n?.destroy())}addContainer(t){const e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#n||(jn.initialize(mt._l10n),this.#n=new jn(this),this.#t&&(this.#n.data=this.#t,this.#t=null)),this.#n}get altTextData(){return this.#n?.data}set altTextData(t){this.#n&&(this.#n.data=t)}get guessedAltText(){return this.#n?.guessedText}async setGuessedAltText(t){await this.#n?.setGuessedText(t)}serializeAltText(t){return this.#n?.serialize(t)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}addCommentButton(){return this.#i?this.#i:this.#i=new Xa(this)}get commentColor(){return null}get comment(){const t=this.#i;return{text:t.data.text,date:t.data.date,deleted:t.isDeleted(),color:this.commentColor}}set comment(t){this.#i||(this.#i=new Xa(this)),this.#i.data=t}setCommentData(t){this.#i||(this.#i=new Xa(this)),this.#i.setInitialText(t)}get hasEditedComment(){return this.#i?.hasBeenEdited()}async editComment(){this.#i||(this.#i=new Xa(this)),this.#i.edit()}addComment(t){this.hasEditedComment&&(t.popup={contents:this.comment.text,deleted:this.comment.deleted})}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#r?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#W();const[e,n]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*n/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/n).toFixed(2)}%`);const[s,a]=this.getInitialTranslation();return this.translate(s,a),nv(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#E||=new Co({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#_.bind(this),onPinching:this.#x.bind(this),onPinchEnd:this.#j.bind(this),signal:this._uiManager._signal})),this._uiManager._editorUndoBar?.hide(),t}#_(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#n?.toggle(!1),this.parent.togglePointerEvents(!1)}#x(t,e,n){let a=.7*(n/e)+1-.7;if(a===1)return;const l=this.#T(this.rotation),c=(D,I)=>[l[0]*D+l[2]*I,l[1]*D+l[3]*I],[h,d]=this.parentDimensions,p=this.x,m=this.y,y=this.width,w=this.height,A=mt.MIN_SIZE/h,x=mt.MIN_SIZE/d;a=Math.max(Math.min(a,1/y,1/w),A/y,x/w);const E=mt._round(y*a),b=mt._round(w*a);if(E===y&&b===w)return;this.#f||=[p,m,y,w];const C=c(y/2,w/2),_=mt._round(p+C[0]),R=mt._round(m+C[1]),P=c(E/2,b/2);this.x=_-P[0],this.y=R-P[1],this.width=E,this.height=b,this.setDims(h*E,d*b),this.fixAndSetPosition(),this._onResizing()}#j(){this.#n?.toggle(!0),this.parent.togglePointerEvents(!0),this.#D()}pointerdown(t){const{isMac:e}=ye.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#g=!0,this._isDraggable){this.#H(t);return}this.#B(t)}#B(t){const{isMac:e}=ye.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#H(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1;const s=new AbortController,a=this._uiManager.combinedSignal(s),l={capture:!0,passive:!1,signal:a},c=d=>{s.abort(),this.#s=null,this.#g=!1,this._uiManager.endDragSession()||this.#B(d),n&&this._onStopDragging()};e&&(this.#A=t.clientX,this.#S=t.clientY,this.#s=t.pointerId,this.#o=t.pointerType,window.addEventListener("pointermove",d=>{n||(n=!0,this._onStartDragging());const{clientX:p,clientY:m,pointerId:y}=d;if(y!==this.#s){se(d);return}const[w,A]=this.screenToPageTranslation(p-this.#A,m-this.#S);this.#A=p,this.#S=m,this._uiManager.dragSelectedEditors(w,A)},l),window.addEventListener("touchmove",se,l),window.addEventListener("pointerdown",d=>{d.pointerType===this.#o&&(this.#E||d.isPrimary)&&c(d),se(d)},l));const h=d=>{if(!this.#s||this.#s===d.pointerId){c(d);return}se(d)};window.addEventListener("pointerup",h,{signal:a}),window.addEventListener("blur",h,{signal:a})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.#y=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,n=this.rotation){const s=this.parentScale,[a,l]=this.pageDimensions,[c,h]=this.pageTranslation,d=t/s,p=e/s,m=this.x*a,y=this.y*l,w=this.width*a,A=this.height*l;switch(n){case 0:return[m+d+c,l-y-p-A+h,m+d+w+c,l-y-p+h];case 90:return[m+p+c,l-y+d+h,m+p+A+c,l-y+d+w+h];case 180:return[m-d-w+c,l-y+p+h,m-d+c,l-y+p+A+h];case 270:return[m-p-A+c,l-y-d-w+h,m-p+c,l-y-d+h];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,s,a,l]=t,c=a-n,h=l-s;switch(this.rotation){case 0:return[n,e-l,c,h];case 90:return[n,e-s,h,c];case 180:return[a,e-s,c,h];case 270:return[a,e-l,h,c];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#m=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#m=!1,!0):!1}isInEditMode(){return this.#m}shouldGetKeyboardEvents(){return this.#w}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:n,right:s}=this.getClientDimensions(),{innerHeight:a,innerWidth:l}=window;return e<l&&s>0&&t<a&&n>0}#W(){if(this.#l||!this.div)return;this.#l=new AbortController;const t=this._uiManager.combinedSignal(this.#l);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#W()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){Ft("An editor must be serializable")}static async deserialize(t,e,n){const s=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n,annotationElementId:t.annotationElementId});s.rotation=t.rotation,s.#t=t.accessibilityData,s._isCopy=t.isCopy||!1;const[a,l]=s.pageDimensions,[c,h,d,p]=s.getRectInCurrentCoords(t.rect,l);return s.x=c/a,s.y=h/l,s.width=d/a,s.height=p/l,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#l?.abort(),this.#l=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#y&&(clearTimeout(this.#y),this.#y=null),this.#$(),this.removeEditToolbar(),this.#v){for(const t of this.#v.values())clearTimeout(t);this.#v=null}this.parent=null,this.#E?.destroy(),this.#E=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#C(),this.#u.classList.remove("hidden"))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#u.children;if(!this.#e){this.#e=Array.from(e);const l=this.#G.bind(this),c=this.#U.bind(this),h=this._uiManager._signal;for(const d of this.#e){const p=d.getAttribute("data-resizer-name");d.setAttribute("role","spinbutton"),d.addEventListener("keydown",l,{signal:h}),d.addEventListener("blur",c,{signal:h}),d.addEventListener("focus",this.#I.bind(this,p),{signal:h}),d.setAttribute("data-l10n-id",mt._l10nResizer[p])}}const n=this.#e[0];let s=0;for(const l of e){if(l===n)break;s++}const a=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(a!==s){if(a<s)for(let c=0;c<s-a;c++)this.#u.append(this.#u.firstChild);else if(a>s)for(let c=0;c<a-s;c++)this.#u.firstChild.before(this.#u.lastChild);let l=0;for(const c of e){const d=this.#e[l++].getAttribute("data-resizer-name");c.setAttribute("data-l10n-id",mt._l10nResizer[d])}}this.#N(0),this.#w=!0,this.#u.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#G(t){mt._resizerKeyboardManager.exec(this,t)}#U(t){this.#w&&t.relatedTarget?.parentNode!==this.#u&&this.#$()}#I(t){this.#p=this.#w?t:""}#N(t){if(this.#e)for(const e of this.#e)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#w&&this.#z(this.#p,{deltaX:t,deltaY:e,fromKeyboard:!0})}#$(){this.#w=!1,this.#N(-1),this.#D()}_stopResizingWithKeyboard(){this.#$(),this.div.focus()}select(){if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}}unselect(){this.isSelected&&(this.isSelected=!1,this.#u?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#h}set isEditing(t){this.#h=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){this.#a=!0;const n=t/e,{style:s}=this.div;s.aspectRatio=n,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#v||=new Map;const{action:n}=t;let s=this.#v.get(n);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(t),this.#v.delete(n),this.#v.size===0&&(this.#v=null)},mt._telemetryTimeout),this.#v.set(n,s);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#r=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#r=!0}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}}class u_ extends mt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Vg=3285377520,un=4294901760,Fn=65535;class iv{constructor(t){this.h1=t?t&4294967295:Vg,this.h2=t?t&4294967295:Vg}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let x=0,E=t.length;x<E;x++){const b=t.charCodeAt(x);b<=255?e[n++]=b:(e[n++]=b>>>8,e[n++]=b&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=n>>2,a=n-s*4,l=new Uint32Array(e.buffer,0,s);let c=0,h=0,d=this.h1,p=this.h2;const m=3432918353,y=461845907,w=m&Fn,A=y&Fn;for(let x=0;x<s;x++)x&1?(c=l[x],c=c*m&un|c*w&Fn,c=c<<15|c>>>17,c=c*y&un|c*A&Fn,d^=c,d=d<<13|d>>>19,d=d*5+3864292196):(h=l[x],h=h*m&un|h*w&Fn,h=h<<15|h>>>17,h=h*y&un|h*A&Fn,p^=h,p=p<<13|p>>>19,p=p*5+3864292196);switch(c=0,a){case 3:c^=e[s*4+2]<<16;case 2:c^=e[s*4+1]<<8;case 1:c^=e[s*4],c=c*m&un|c*w&Fn,c=c<<15|c>>>17,c=c*y&un|c*A&Fn,s&1?d^=c:p^=c}this.h1=d,this.h2=p}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&un|t*36045&Fn,e=e*4283543511&un|((e<<16|t>>>16)*2950163797&un)>>>16,t^=e>>>1,t=t*444984403&un|t*60499&Fn,e=e*3301882366&un|((e<<16|t>>>16)*3120437893&un)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const mh=Object.freeze({map:null,hash:"",transfer:void 0});class dd{#t=!1;#e=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=this.#n.get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return this.#n.get(t)}remove(t){if(this.#n.delete(t),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of this.#n.values())if(e instanceof mt)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=this.#n.get(t);let s=!1;if(n!==void 0)for(const[a,l]of Object.entries(e))n[a]!==l&&(s=!0,n[a]=l);else s=!0,this.#n.set(t,e);s&&this.#i(),e instanceof mt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return this.#n.has(t)}get size(){return this.#n.size}#i(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new sv(this)}get serializable(){if(this.#n.size===0)return mh;const t=new Map,e=new iv,n=[],s=Object.create(null);let a=!1;for(const[l,c]of this.#n){const h=c instanceof mt?c.serialize(!1,s):c;h&&(t.set(l,h),e.update(`${l}:${JSON.stringify(h)}`),a||=!!h.bitmap)}if(a)for(const l of t.values())l.bitmap&&n.push(l.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:mh}get editorStats(){let t=null;const e=new Map;for(const n of this.#n.values()){if(!(n instanceof mt))continue;const s=n.telemetryFinalData;if(!s)continue;const{type:a}=s;e.has(a)||e.set(a,Object.getPrototypeOf(n).constructor),t||=Object.create(null);const l=t[a]||=new Map;for(const[c,h]of Object.entries(s)){if(c==="type")continue;let d=l.get(c);d||(d=new Map,l.set(c,d));const p=d.get(h)??0;d.set(h,p+1)}}for(const[n,s]of e)t[n]=s.computeTelemetryFinalData(t[n]);return t}resetModifiedIds(){this.#e=null}get modifiedIds(){if(this.#e)return this.#e;const t=[];for(const e of this.#n.values())!(e instanceof mt)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class sv extends dd{#t;constructor(t){super();const{map:e,hash:n,transfer:s}=t.serializable,a=structuredClone(e,s?{transfer:s}:null);this.#t={map:a,hash:n,transfer:s}}get print(){Ft("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return _t(this,"modifiedIds",{ids:new Set,hash:""})}}class h_{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:n}){if(!(!t||this.#t.has(t.loadedName))){if(ce(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:a,style:l}=t,c=new FontFace(s,a,l);this.addNativeFontFace(c);try{await c.load(),this.#t.add(s),n?.(t)}catch{St(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(c)}return}Ft("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(s){throw St(`Failed to load font '${n.family}': '${s}'.`),t.disableFontFace=!0,s}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const s=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,s)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return _t(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return _t(this,"isSyncFontLoadingSupported",Le||ye.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(ce(!s.done,"completeRequest() cannot be called twice."),s.done=!0;n.length>0&&n[0].done;){const a=n.shift();setTimeout(a.callback,0)}}const{loadingRequests:n}=this,s={done:!1,complete:e,callback:t};return n.push(s),s}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return _t(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(R,P){return R.charCodeAt(P)<<24|R.charCodeAt(P+1)<<16|R.charCodeAt(P+2)<<8|R.charCodeAt(P+3)&255}function s(R,P,D,I){const j=R.substring(0,P),H=R.substring(P+D);return j+I+H}let a,l;const c=this._document.createElement("canvas");c.width=1,c.height=1;const h=c.getContext("2d");let d=0;function p(R,P){if(++d>30){St("Load test font never loaded."),P();return}if(h.font="30px "+R,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){P();return}setTimeout(p.bind(null,R,P))}const m=`lt${Date.now()}${this.loadTestFontId++}`;let y=this._loadTestFont;y=s(y,976,m.length,m);const A=16,x=1482184792;let E=n(y,A);for(a=0,l=m.length-3;a<l;a+=4)E=E-x+n(m,a)|0;a<m.length&&(E=E-x+n(m+"XXX",a)|0),y=s(y,A,4,JE(E));const b=`url(data:font/opentype;base64,${btoa(y)});`,C=`@font-face {font-family:"${m}";src:${b}}`;this.insertRule(C);const _=this._document.createElement("div");_.style.visibility="hidden",_.style.width=_.style.height="10px",_.style.position="absolute",_.style.top=_.style.left="0px";for(const R of[t.loadedName,m]){const P=this._document.createElement("span");P.textContent="Hi",P.style.fontFamily=R,_.append(P)}this._document.body.append(_),p(m,()=>{_.remove(),e.complete()})}}class d_{constructor(t,e=null){this.compiledGlyphs=Object.create(null);for(const n in t)this[n]=t[n];this._inspectFont=e}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${Z0(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let s;try{s=t.get(n)}catch(l){St(`getPathGenerator - ignoring character: "${l}".`)}const a=new Path2D(s||"");return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=a}}function f_(r){if(r instanceof URL)return r.href;if(typeof r=="string"){if(Le)return r;const t=URL.parse(r,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function p_(r){if(Le&&typeof Buffer<"u"&&r instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength)return r;if(typeof r=="string")return Ao(r);if(r instanceof ArrayBuffer||ArrayBuffer.isView(r)||typeof r=="object"&&!isNaN(r?.length))return new Uint8Array(r);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Ka(r){if(typeof r!="string")return null;if(r.endsWith("/"))return r;throw new Error(`Invalid factory url: "${r}" must include trailing slash.`)}const gh=r=>typeof r=="object"&&Number.isInteger(r?.num)&&r.num>=0&&Number.isInteger(r?.gen)&&r.gen>=0,m_=r=>typeof r=="object"&&typeof r?.name=="string",rv=i_.bind(null,gh,m_);class g_{#t=new Map;#e=Promise.resolve();postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};this.#e.then(()=>{for(const[s]of this.#t)s.call(this,n)})}addEventListener(t,e,n=null){let s=null;if(n?.signal instanceof AbortSignal){const{signal:a}=n;if(a.aborted){St("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(t,e);s=()=>a.removeEventListener("abort",l),a.addEventListener("abort",l)}this.#t.set(e,s)}removeEventListener(t,e){this.#t.get(e)?.(),this.#t.delete(e)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const qa={DATA:1,ERROR:2},ae={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function zg(){}function Ue(r){if(r instanceof ii||r instanceof hl||r instanceof Og||r instanceof uo||r instanceof Bu)return r;switch(r instanceof Error||typeof r=="object"&&r!==null||Ft('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),r.name){case"AbortException":return new ii(r.message);case"InvalidPDFException":return new hl(r.message);case"PasswordException":return new Og(r.message,r.code);case"ResponseException":return new uo(r.message,r.status,r.missing);case"UnknownErrorException":return new Bu(r.message,r.details)}return new Bu(r.message,r.toString())}class Kr{#t=new AbortController;constructor(t,e,n){this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#i(t);return}if(t.callback){const n=t.callbackId,s=this.callbackCapabilities[n];if(!s)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===qa.DATA)s.resolve(t.data);else if(t.callback===qa.ERROR)s.reject(Ue(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,s=t.sourceName,a=this.comObj;Promise.try(e,t.data).then(function(l){a.postMessage({sourceName:n,targetName:s,callback:qa.DATA,callbackId:t.callbackId,data:l})},function(l){a.postMessage({sourceName:n,targetName:s,callback:qa.ERROR,callbackId:t.callbackId,reason:Ue(l)})});return}if(t.streamId){this.#n(t);return}e(t.data)}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const s=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[s]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:s,data:e},n)}catch(l){a.reject(l)}return a.promise}sendWithStream(t,e,n,s){const a=this.streamId++,l=this.sourceName,c=this.targetName,h=this.comObj;return new ReadableStream({start:d=>{const p=Promise.withResolvers();return this.streamControllers[a]={controller:d,startCall:p,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:l,targetName:c,action:t,streamId:a,data:e,desiredSize:d.desiredSize},s),p.promise},pull:d=>{const p=Promise.withResolvers();return this.streamControllers[a].pullCall=p,h.postMessage({sourceName:l,targetName:c,stream:ae.PULL,streamId:a,desiredSize:d.desiredSize}),p.promise},cancel:d=>{ce(d instanceof Error,"cancel must have a valid reason");const p=Promise.withResolvers();return this.streamControllers[a].cancelCall=p,this.streamControllers[a].isClosed=!0,h.postMessage({sourceName:l,targetName:c,stream:ae.CANCEL,streamId:a,reason:Ue(d)}),p.promise}},n)}#n(t){const e=t.streamId,n=this.sourceName,s=t.sourceName,a=this.comObj,l=this,c=this.actionHandler[t.action],h={enqueue(d,p=1,m){if(this.isCancelled)return;const y=this.desiredSize;this.desiredSize-=p,y>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:n,targetName:s,stream:ae.ENQUEUE,streamId:e,chunk:d},m)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:s,stream:ae.CLOSE,streamId:e}),delete l.streamSinks[e])},error(d){ce(d instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:s,stream:ae.ERROR,streamId:e,reason:Ue(d)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[e]=h,Promise.try(c,t.data,h).then(function(){a.postMessage({sourceName:n,targetName:s,stream:ae.START_COMPLETE,streamId:e,success:!0})},function(d){a.postMessage({sourceName:n,targetName:s,stream:ae.START_COMPLETE,streamId:e,reason:Ue(d)})})}#i(t){const e=t.streamId,n=this.sourceName,s=t.sourceName,a=this.comObj,l=this.streamControllers[e],c=this.streamSinks[e];switch(t.stream){case ae.START_COMPLETE:t.success?l.startCall.resolve():l.startCall.reject(Ue(t.reason));break;case ae.PULL_COMPLETE:t.success?l.pullCall.resolve():l.pullCall.reject(Ue(t.reason));break;case ae.PULL:if(!c){a.postMessage({sourceName:n,targetName:s,stream:ae.PULL_COMPLETE,streamId:e,success:!0});break}c.desiredSize<=0&&t.desiredSize>0&&c.sinkCapability.resolve(),c.desiredSize=t.desiredSize,Promise.try(c.onPull||zg).then(function(){a.postMessage({sourceName:n,targetName:s,stream:ae.PULL_COMPLETE,streamId:e,success:!0})},function(d){a.postMessage({sourceName:n,targetName:s,stream:ae.PULL_COMPLETE,streamId:e,reason:Ue(d)})});break;case ae.ENQUEUE:if(ce(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(t.chunk);break;case ae.CLOSE:if(ce(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),this.#r(l,e);break;case ae.ERROR:ce(l,"error should have stream controller"),l.controller.error(Ue(t.reason)),this.#r(l,e);break;case ae.CANCEL_COMPLETE:t.success?l.cancelCall.resolve():l.cancelCall.reject(Ue(t.reason)),this.#r(l,e);break;case ae.CANCEL:if(!c)break;const h=Ue(t.reason);Promise.try(c.onCancel||zg,h).then(function(){a.postMessage({sourceName:n,targetName:s,stream:ae.CANCEL_COMPLETE,streamId:e,success:!0})},function(d){a.postMessage({sourceName:n,targetName:s,stream:ae.CANCEL_COMPLETE,streamId:e,reason:Ue(d)})}),c.sinkCapability.reject(h),c.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#r(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.#t?.abort(),this.#t=null}}class ov{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Ft("Abstract method `_createCanvas` called.")}}class y_ extends ov{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class av{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Ft("Abstract method `_fetch` called.")}}class Hg extends av{async _fetch(t){const e=await er(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Ao(e)}}class lv{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,s,a){return"none"}destroy(t=!1){}}class v_ extends lv{#t;#e;#n;#i;#r;#s;#o=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#i=t,this.#r=e}get#a(){return this.#e||=new Map}get#u(){return this.#s||=new Map}get#c(){if(!this.#n){const t=this.#r.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const n=this.#r.createElementNS(Jn,"svg");n.setAttribute("width",0),n.setAttribute("height",0),this.#n=this.#r.createElementNS(Jn,"defs"),t.append(n),n.append(this.#n),this.#r.body.append(t)}return this.#n}#d(t){if(t.length===1){const h=t[0],d=new Array(256);for(let m=0;m<256;m++)d[m]=h[m]/255;const p=d.join(",");return[p,p,p]}const[e,n,s]=t,a=new Array(256),l=new Array(256),c=new Array(256);for(let h=0;h<256;h++)a[h]=e[h]/255,l[h]=n[h]/255,c[h]=s[h]/255;return[a.join(","),l.join(","),c.join(",")]}#l(t){if(this.#t===void 0){this.#t="";const e=this.#r.URL;e!==this.#r.baseURI&&(bo(e)?St('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=ad(e,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let e=this.#a.get(t);if(e)return e;const[n,s,a]=this.#d(t),l=t.length===1?n:`${n}${s}${a}`;if(e=this.#a.get(l),e)return this.#a.set(t,e),e;const c=`g_${this.#i}_transfer_map_${this.#o++}`,h=this.#l(c);this.#a.set(t,h),this.#a.set(l,h);const d=this.#f(c);return this.#m(n,s,a,d),h}addHCMFilter(t,e){const n=`${t}-${e}`,s="base";let a=this.#u.get(s);if(a?.key===n||(a?(a.filter?.remove(),a.key=n,a.url="none",a.filter=null):(a={key:n,url:"none",filter:null},this.#u.set(s,a)),!t||!e))return a.url;const l=this.#y(t);t=ct.makeHexColor(...l);const c=this.#y(e);if(e=ct.makeHexColor(...c),this.#c.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return a.url;const h=new Array(256);for(let w=0;w<=255;w++){const A=w/255;h[w]=A<=.03928?A/12.92:((A+.055)/1.055)**2.4}const d=h.join(","),p=`g_${this.#i}_hcm_filter`,m=a.filter=this.#f(p);this.#m(d,d,d,m),this.#g(m);const y=(w,A)=>{const x=l[w]/255,E=c[w]/255,b=new Array(A+1);for(let C=0;C<=A;C++)b[C]=x+C/A*(E-x);return b.join(",")};return this.#m(y(0,5),y(1,5),y(2,5),m),a.url=this.#l(p),a.url}addAlphaFilter(t){let e=this.#a.get(t);if(e)return e;const[n]=this.#d([t]),s=`alpha_${n}`;if(e=this.#a.get(s),e)return this.#a.set(t,e),e;const a=`g_${this.#i}_alpha_map_${this.#o++}`,l=this.#l(a);this.#a.set(t,l),this.#a.set(s,l);const c=this.#f(a);return this.#w(n,c),l}addLuminosityFilter(t){let e=this.#a.get(t||"luminosity");if(e)return e;let n,s;if(t?([n]=this.#d([t]),s=`luminosity_${n}`):s="luminosity",e=this.#a.get(s),e)return this.#a.set(t,e),e;const a=`g_${this.#i}_luminosity_map_${this.#o++}`,l=this.#l(a);this.#a.set(t,l),this.#a.set(s,l);const c=this.#f(a);return this.#p(c),t&&this.#w(n,c),l}addHighlightHCMFilter(t,e,n,s,a){const l=`${e}-${n}-${s}-${a}`;let c=this.#u.get(t);if(c?.key===l||(c?(c.filter?.remove(),c.key=l,c.url="none",c.filter=null):(c={key:l,url:"none",filter:null},this.#u.set(t,c)),!e||!n))return c.url;const[h,d]=[e,n].map(this.#y.bind(this));let p=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),m=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[y,w]=[s,a].map(this.#y.bind(this));m<p&&([p,m,y,w]=[m,p,w,y]),this.#c.style.color="";const A=(b,C,_)=>{const R=new Array(256),P=(m-p)/_,D=b/255,I=(C-b)/(255*_);let j=0;for(let H=0;H<=_;H++){const G=Math.round(p+H*P),Q=D+H*I;for(let ht=j;ht<=G;ht++)R[ht]=Q;j=G+1}for(let H=j;H<256;H++)R[H]=R[j-1];return R.join(",")},x=`g_${this.#i}_hcm_${t}_filter`,E=c.filter=this.#f(x);return this.#g(E),this.#m(A(y[0],w[0],5),A(y[1],w[1],5),A(y[2],w[2],5),E),c.url=this.#l(x),c.url}destroy(t=!1){t&&this.#s?.size||(this.#n?.parentNode.parentNode.remove(),this.#n=null,this.#e?.clear(),this.#e=null,this.#s?.clear(),this.#s=null,this.#o=0)}#p(t){const e=this.#r.createElementNS(Jn,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#g(t){const e=this.#r.createElementNS(Jn,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#f(t){const e=this.#r.createElementNS(Jn,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#c.append(e),e}#h(t,e,n){const s=this.#r.createElementNS(Jn,e);s.setAttribute("type","discrete"),s.setAttribute("tableValues",n),t.append(s)}#m(t,e,n,s){const a=this.#r.createElementNS(Jn,"feComponentTransfer");s.append(a),this.#h(a,"feFuncR",t),this.#h(a,"feFuncG",e),this.#h(a,"feFuncB",n)}#w(t,e){const n=this.#r.createElementNS(Jn,"feComponentTransfer");e.append(n),this.#h(n,"feFuncA",t)}#y(t){return this.#c.style.color=t,Eo(getComputedStyle(this.#c).getPropertyValue("color"))}}class cv{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Ft("Abstract method `_fetch` called.")}}class Ug extends cv{async _fetch(t){const e=await er(t,"arraybuffer");return new Uint8Array(e)}}class uv{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){Ft("Abstract method `_fetch` called.")}}class $g extends uv{async _fetch(t){const e=await er(t,"arraybuffer");return new Uint8Array(e)}}Le&&St("Please use the `legacy` build in Node.js environments.");async function fd(r){const e=await process.getBuiltinModule("fs").promises.readFile(r);return new Uint8Array(e)}class w_ extends lv{}class x_ extends ov{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class A_ extends av{async _fetch(t){return fd(t)}}class S_ extends cv{async _fetch(t){return fd(t)}}class b_ extends uv{async _fetch(t){return fd(t)}}const Ae={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function yh(r,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],s=new Path2D;s.rect(t[0],t[1],e,n),r.clip(s)}class pd{isModifyingCurrentTransform(){return!1}getPattern(){Ft("Abstract method `getPattern` called.")}}class E_ extends pd{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,s){let a;if(s===Ae.STROKE||s===Ae.FILL){const l=e.current.getClippedPathBoundingBox(s,Xt(t))||[0,0,0,0],c=Math.ceil(l[2]-l[0])||1,h=Math.ceil(l[3]-l[1])||1,d=e.cachedCanvases.getCanvas("pattern",c,h),p=d.context;p.clearRect(0,0,p.canvas.width,p.canvas.height),p.beginPath(),p.rect(0,0,p.canvas.width,p.canvas.height),p.translate(-l[0],-l[1]),n=ct.transform(n,[1,0,0,1,l[0],l[1]]),p.transform(...e.baseTransform),this.matrix&&p.transform(...this.matrix),yh(p,this._bbox),p.fillStyle=this._createGradient(p),p.fill(),a=t.createPattern(d.canvas,"no-repeat");const m=new DOMMatrix(n);a.setTransform(m)}else yh(t,this._bbox),a=this._createGradient(t);return a}}function Hu(r,t,e,n,s,a,l,c){const h=t.coords,d=t.colors,p=r.data,m=r.width*4;let y;h[e+1]>h[n+1]&&(y=e,e=n,n=y,y=a,a=l,l=y),h[n+1]>h[s+1]&&(y=n,n=s,s=y,y=l,l=c,c=y),h[e+1]>h[n+1]&&(y=e,e=n,n=y,y=a,a=l,l=y);const w=(h[e]+t.offsetX)*t.scaleX,A=(h[e+1]+t.offsetY)*t.scaleY,x=(h[n]+t.offsetX)*t.scaleX,E=(h[n+1]+t.offsetY)*t.scaleY,b=(h[s]+t.offsetX)*t.scaleX,C=(h[s+1]+t.offsetY)*t.scaleY;if(A>=C)return;const _=d[a],R=d[a+1],P=d[a+2],D=d[l],I=d[l+1],j=d[l+2],H=d[c],G=d[c+1],Q=d[c+2],ht=Math.round(A),lt=Math.round(C);let et,bt,q,U,$,J,Z,N;for(let z=ht;z<=lt;z++){if(z<E){const ut=z<A?0:(A-z)/(A-E);et=w-(w-x)*ut,bt=_-(_-D)*ut,q=R-(R-I)*ut,U=P-(P-j)*ut}else{let ut;z>C?ut=1:E===C?ut=0:ut=(E-z)/(E-C),et=x-(x-b)*ut,bt=D-(D-H)*ut,q=I-(I-G)*ut,U=j-(j-Q)*ut}let nt;z<A?nt=0:z>C?nt=1:nt=(A-z)/(A-C),$=w-(w-b)*nt,J=_-(_-H)*nt,Z=R-(R-G)*nt,N=P-(P-Q)*nt;const dt=Math.round(Math.min(et,$)),wt=Math.round(Math.max(et,$));let yt=m*z+dt*4;for(let ut=dt;ut<=wt;ut++)nt=(et-ut)/(et-$),nt<0?nt=0:nt>1&&(nt=1),p[yt++]=bt-(bt-J)*nt|0,p[yt++]=q-(q-Z)*nt|0,p[yt++]=U-(U-N)*nt|0,p[yt++]=255}}function __(r,t,e){const n=t.coords,s=t.colors;let a,l;switch(t.type){case"lattice":const c=t.verticesPerRow,h=Math.floor(n.length/c)-1,d=c-1;for(a=0;a<h;a++){let p=a*c;for(let m=0;m<d;m++,p++)Hu(r,e,n[p],n[p+1],n[p+c],s[p],s[p+1],s[p+c]),Hu(r,e,n[p+c+1],n[p+1],n[p+c],s[p+c+1],s[p+1],s[p+c])}break;case"triangles":for(a=0,l=n.length;a<l;a+=3)Hu(r,e,n[a],n[a+1],n[a+2],s[a],s[a+1],s[a+2]);break;default:throw new Error("illegal figure")}}class C_ extends pd{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,n){const c=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),d=Math.ceil(this._bounds[2])-c,p=Math.ceil(this._bounds[3])-h,m=Math.min(Math.ceil(Math.abs(d*t[0]*1.1)),3e3),y=Math.min(Math.ceil(Math.abs(p*t[1]*1.1)),3e3),w=d/m,A=p/y,x={coords:this._coords,colors:this._colors,offsetX:-c,offsetY:-h,scaleX:1/w,scaleY:1/A},E=m+4,b=y+4,C=n.getCanvas("mesh",E,b),_=C.context,R=_.createImageData(m,y);if(e){const D=R.data;for(let I=0,j=D.length;I<j;I+=4)D[I]=e[0],D[I+1]=e[1],D[I+2]=e[2],D[I+3]=255}for(const D of this._figures)__(R,D,x);return _.putImageData(R,2,2),{canvas:C.canvas,offsetX:c-2*w,offsetY:h-2*A,scaleX:w,scaleY:A}}isModifyingCurrentTransform(){return!0}getPattern(t,e,n,s){yh(t,this._bbox);const a=new Float32Array(2);if(s===Ae.SHADING)ct.singularValueDecompose2dScale(Xt(t),a);else if(this.matrix){ct.singularValueDecompose2dScale(this.matrix,a);const[c,h]=a;ct.singularValueDecompose2dScale(e.baseTransform,a),a[0]*=c,a[1]*=h}else ct.singularValueDecompose2dScale(e.baseTransform,a);const l=this._createMeshCanvas(a,s===Ae.SHADING?null:this._background,e.cachedCanvases);return s!==Ae.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(l.offsetX,l.offsetY),t.scale(l.scaleX,l.scaleY),t.createPattern(l.canvas,"no-repeat")}}class T_ extends pd{getPattern(){return"hotpink"}}function P_(r){switch(r[0]){case"RadialAxial":return new E_(r);case"Mesh":return new C_(r);case"Dummy":return new T_}throw new Error(`Unknown IR type: ${r[0]}`)}const Wg={COLORED:1,UNCOLORED:2};class md{static MAX_PATTERN_SIZE=3e3;constructor(t,e,n,s){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=n,this.baseTransform=s}createPatternCanvas(t){const{bbox:e,operatorList:n,paintType:s,tilingType:a,color:l,canvasGraphicsFactory:c}=this;let{xstep:h,ystep:d}=this;h=Math.abs(h),d=Math.abs(d),xl("TilingType: "+a);const p=e[0],m=e[1],y=e[2],w=e[3],A=y-p,x=w-m,E=new Float32Array(2);ct.singularValueDecompose2dScale(this.matrix,E);const[b,C]=E;ct.singularValueDecompose2dScale(this.baseTransform,E);const _=b*E[0],R=C*E[1];let P=A,D=x,I=!1,j=!1;const H=Math.ceil(h*_),G=Math.ceil(d*R),Q=Math.ceil(A*_),ht=Math.ceil(x*R);H>=Q?P=h:I=!0,G>=ht?D=d:j=!0;const lt=this.getSizeAndScale(P,this.ctx.canvas.width,_),et=this.getSizeAndScale(D,this.ctx.canvas.height,R),bt=t.cachedCanvases.getCanvas("pattern",lt.size,et.size),q=bt.context,U=c.createCanvasGraphics(q);if(U.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(U,s,l),q.translate(-lt.scale*p,-et.scale*m),U.transform(lt.scale,0,0,et.scale,0,0),q.save(),this.clipBbox(U,p,m,y,w),U.baseTransform=Xt(U.ctx),U.executeOperatorList(n),U.endDrawing(),q.restore(),I||j){const $=bt.canvas;I&&(P=h),j&&(D=d);const J=this.getSizeAndScale(P,this.ctx.canvas.width,_),Z=this.getSizeAndScale(D,this.ctx.canvas.height,R),N=J.size,z=Z.size,nt=t.cachedCanvases.getCanvas("pattern-workaround",N,z),dt=nt.context,wt=I?Math.floor(A/h):0,yt=j?Math.floor(x/d):0;for(let ut=0;ut<=wt;ut++)for(let Et=0;Et<=yt;Et++)dt.drawImage($,N*ut,z*Et,N,z,0,0,N,z);return{canvas:nt.canvas,scaleX:J.scale,scaleY:Z.scale,offsetX:p,offsetY:m}}return{canvas:bt.canvas,scaleX:lt.scale,scaleY:et.scale,offsetX:p,offsetY:m}}getSizeAndScale(t,e,n){const s=Math.max(md.MAX_PATTERN_SIZE,e);let a=Math.ceil(t*n);return a>=s?a=s:n=a/t,{scale:n,size:a}}clipBbox(t,e,n,s,a){const l=s-e,c=a-n;t.ctx.rect(e,n,l,c),ct.axialAlignedBoundingBox([e,n,s,a],Xt(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const s=t.ctx,a=t.current;switch(e){case Wg.COLORED:const{fillStyle:l,strokeStyle:c}=this.ctx;s.fillStyle=a.fillColor=l,s.strokeStyle=a.strokeColor=c;break;case Wg.UNCOLORED:s.fillStyle=s.strokeStyle=n,a.fillColor=a.strokeColor=n;break;default:throw new ZE(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,n,s){let a=n;s!==Ae.SHADING&&(a=ct.transform(a,e.baseTransform),this.matrix&&(a=ct.transform(a,this.matrix)));const l=this.createPatternCanvas(e);let c=new DOMMatrix(a);c=c.translate(l.offsetX,l.offsetY),c=c.scale(1/l.scaleX,1/l.scaleY);const h=t.createPattern(l.canvas,"repeat");return h.setTransform(c),h}}function k_({src:r,srcPos:t=0,dest:e,width:n,height:s,nonBlackColor:a=4294967295,inverseDecode:l=!1}){const c=ye.isLittleEndian?4278190080:255,[h,d]=l?[a,c]:[c,a],p=n>>3,m=n&7,y=r.length;e=new Uint32Array(e.buffer);let w=0;for(let A=0;A<s;A++){for(const E=t+p;t<E;t++){const b=t<y?r[t]:255;e[w++]=b&128?d:h,e[w++]=b&64?d:h,e[w++]=b&32?d:h,e[w++]=b&16?d:h,e[w++]=b&8?d:h,e[w++]=b&4?d:h,e[w++]=b&2?d:h,e[w++]=b&1?d:h}if(m===0)continue;const x=t<y?r[t++]:255;for(let E=0;E<m;E++)e[w++]=x&1<<7-E?d:h}return{srcPos:t,destPos:w}}const Gg=16,Xg=100,R_=15,Kg=10,$e=16,Uu=new DOMMatrix,Ze=new Float32Array(2),zs=new Float32Array([1/0,1/0,-1/0,-1/0]);function M_(r,t){if(r._removeMirroring)throw new Error("Context is already forwarding operations.");r.__originalSave=r.save,r.__originalRestore=r.restore,r.__originalRotate=r.rotate,r.__originalScale=r.scale,r.__originalTranslate=r.translate,r.__originalTransform=r.transform,r.__originalSetTransform=r.setTransform,r.__originalResetTransform=r.resetTransform,r.__originalClip=r.clip,r.__originalMoveTo=r.moveTo,r.__originalLineTo=r.lineTo,r.__originalBezierCurveTo=r.bezierCurveTo,r.__originalRect=r.rect,r.__originalClosePath=r.closePath,r.__originalBeginPath=r.beginPath,r._removeMirroring=()=>{r.save=r.__originalSave,r.restore=r.__originalRestore,r.rotate=r.__originalRotate,r.scale=r.__originalScale,r.translate=r.__originalTranslate,r.transform=r.__originalTransform,r.setTransform=r.__originalSetTransform,r.resetTransform=r.__originalResetTransform,r.clip=r.__originalClip,r.moveTo=r.__originalMoveTo,r.lineTo=r.__originalLineTo,r.bezierCurveTo=r.__originalBezierCurveTo,r.rect=r.__originalRect,r.closePath=r.__originalClosePath,r.beginPath=r.__originalBeginPath,delete r._removeMirroring},r.save=function(){t.save(),this.__originalSave()},r.restore=function(){t.restore(),this.__originalRestore()},r.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},r.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},r.transform=function(e,n,s,a,l,c){t.transform(e,n,s,a,l,c),this.__originalTransform(e,n,s,a,l,c)},r.setTransform=function(e,n,s,a,l,c){t.setTransform(e,n,s,a,l,c),this.__originalSetTransform(e,n,s,a,l,c)},r.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},r.rotate=function(e){t.rotate(e),this.__originalRotate(e)},r.clip=function(e){t.clip(e),this.__originalClip(e)},r.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},r.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},r.bezierCurveTo=function(e,n,s,a,l,c){t.bezierCurveTo(e,n,s,a,l,c),this.__originalBezierCurveTo(e,n,s,a,l,c)},r.rect=function(e,n,s,a){t.rect(e,n,s,a),this.__originalRect(e,n,s,a)},r.closePath=function(){t.closePath(),this.__originalClosePath()},r.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class L_{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let s;return this.cache[t]!==void 0?(s=this.cache[t],this.canvasFactory.reset(s,e,n)):(s=this.canvasFactory.create(e,n),this.cache[t]=s),s}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Ya(r,t,e,n,s,a,l,c,h,d){const[p,m,y,w,A,x]=Xt(r);if(m===0&&y===0){const C=l*p+A,_=Math.round(C),R=c*w+x,P=Math.round(R),D=(l+h)*p+A,I=Math.abs(Math.round(D)-_)||1,j=(c+d)*w+x,H=Math.abs(Math.round(j)-P)||1;return r.setTransform(Math.sign(p),0,0,Math.sign(w),_,P),r.drawImage(t,e,n,s,a,0,0,I,H),r.setTransform(p,m,y,w,A,x),[I,H]}if(p===0&&w===0){const C=c*y+A,_=Math.round(C),R=l*m+x,P=Math.round(R),D=(c+d)*y+A,I=Math.abs(Math.round(D)-_)||1,j=(l+h)*m+x,H=Math.abs(Math.round(j)-P)||1;return r.setTransform(0,Math.sign(m),Math.sign(y),0,_,P),r.drawImage(t,e,n,s,a,0,0,H,I),r.setTransform(p,m,y,w,A,x),[H,I]}r.drawImage(t,e,n,s,a,l,c,h,d);const E=Math.hypot(p,m),b=Math.hypot(y,w);return[E*h,b*d]}class qg{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=ph;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Ce.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,e){this.clipBox=new Float32Array([0,0,t,e]),this.minMax=zs.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Ae.FILL,e=null){const n=this.minMax.slice();if(t===Ae.STROKE){e||Ft("Stroke bounding box must include transform."),ct.singularValueDecompose2dScale(e,Ze);const s=Ze[0]*this.lineWidth/2,a=Ze[1]*this.lineWidth/2;n[0]-=s,n[1]-=a,n[2]+=s,n[3]+=a}return n}updateClipFromPath(){const t=ct.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(zs,0)}getClippedPathBoundingBox(t=Ae.FILL,e=null){return ct.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function Yg(r,t){if(t instanceof ImageData){r.putImageData(t,0,0);return}const e=t.height,n=t.width,s=e%$e,a=(e-s)/$e,l=s===0?a:a+1,c=r.createImageData(n,$e);let h=0,d;const p=t.data,m=c.data;let y,w,A,x;if(t.kind===eo.GRAYSCALE_1BPP){const E=p.byteLength,b=new Uint32Array(m.buffer,0,m.byteLength>>2),C=b.length,_=n+7>>3,R=4294967295,P=ye.isLittleEndian?4278190080:255;for(y=0;y<l;y++){for(A=y<a?$e:s,d=0,w=0;w<A;w++){const D=E-h;let I=0;const j=D>_?n:D*8-7,H=j&-8;let G=0,Q=0;for(;I<H;I+=8)Q=p[h++],b[d++]=Q&128?R:P,b[d++]=Q&64?R:P,b[d++]=Q&32?R:P,b[d++]=Q&16?R:P,b[d++]=Q&8?R:P,b[d++]=Q&4?R:P,b[d++]=Q&2?R:P,b[d++]=Q&1?R:P;for(;I<j;I++)G===0&&(Q=p[h++],G=128),b[d++]=Q&G?R:P,G>>=1}for(;d<C;)b[d++]=0;r.putImageData(c,0,y*$e)}}else if(t.kind===eo.RGBA_32BPP){for(w=0,x=n*$e*4,y=0;y<a;y++)m.set(p.subarray(h,h+x)),h+=x,r.putImageData(c,0,w),w+=$e;y<l&&(x=n*s*4,m.set(p.subarray(h,h+x)),r.putImageData(c,0,w))}else if(t.kind===eo.RGB_24BPP)for(A=$e,x=n*A,y=0;y<l;y++){for(y>=a&&(A=s,x=n*A),d=0,w=x;w--;)m[d++]=p[h++],m[d++]=p[h++],m[d++]=p[h++],m[d++]=255;r.putImageData(c,0,y*$e)}else throw new Error(`bad image kind: ${t.kind}`)}function Qg(r,t){if(t.bitmap){r.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,s=e%$e,a=(e-s)/$e,l=s===0?a:a+1,c=r.createImageData(n,$e);let h=0;const d=t.data,p=c.data;for(let m=0;m<l;m++){const y=m<a?$e:s;({srcPos:h}=k_({src:d,srcPos:h,dest:p,width:n,height:y,nonBlackColor:0})),r.putImageData(c,0,m*$e)}}function Hr(r,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)r[n]!==void 0&&(t[n]=r[n]);r.setLineDash!==void 0&&(t.setLineDash(r.getLineDash()),t.lineDashOffset=r.lineDashOffset)}function Qa(r){r.strokeStyle=r.fillStyle="#000000",r.fillRule="nonzero",r.globalAlpha=1,r.lineWidth=1,r.lineCap="butt",r.lineJoin="miter",r.miterLimit=10,r.globalCompositeOperation="source-over",r.font="10px sans-serif",r.setLineDash!==void 0&&(r.setLineDash([]),r.lineDashOffset=0);const{filter:t}=r;t!=="none"&&t!==""&&(r.filter="none")}function Zg(r,t){if(t)return!0;ct.singularValueDecompose2dScale(r,Ze);const e=Math.fround(Cn.pixelRatio*rs.PDF_TO_CSS_UNITS);return Ze[0]<=e&&Ze[1]<=e}const D_=["butt","round","square"],I_=["miter","round","bevel"],N_={},Jg={};class $s{constructor(t,e,n,s,a,{optionalContentConfig:l,markedContentStack:c=null},h,d){this.ctx=t,this.current=new qg(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=s,this.filterFactory=a,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=l,this.cachedCanvases=new L_(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=d,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:s=null}){const a=this.ctx.canvas.width,l=this.ctx.canvas.height,c=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,a,l),this.ctx.fillStyle=c,n){const h=this.cachedCanvases.getCanvas("transparent",a,l);this.compositeCtx=this.ctx,this.transparentCanvas=h.canvas,this.ctx=h.context,this.ctx.save(),this.ctx.transform(...Xt(this.compositeCtx))}this.ctx.save(),Qa(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Xt(this.ctx)}executeOperatorList(t,e,n,s){const a=t.argsArray,l=t.fnArray;let c=e||0;const h=a.length;if(h===c)return c;const d=h-c>Kg&&typeof n=="function",p=d?Date.now()+R_:0;let m=0;const y=this.commonObjs,w=this.objs;let A;for(;;){if(s!==void 0&&c===s.nextBreakPoint)return s.breakIt(c,n),c;if(A=l[c],A!==co.dependency)this[A].apply(this,a[c]);else for(const x of a[c]){const E=x.startsWith("g_")?y:w;if(!E.has(x))return E.get(x,n),c}if(c++,c===h)return c;if(d&&++m>Kg){if(Date.now()>p)return n(),c;m=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const n=t.width??t.displayWidth,s=t.height??t.displayHeight;let a=Math.max(Math.hypot(e[0],e[1]),1),l=Math.max(Math.hypot(e[2],e[3]),1),c=n,h=s,d="prescale1",p,m;for(;a>2&&c>1||l>2&&h>1;){let y=c,w=h;a>2&&c>1&&(y=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c/2),a/=c/y),l>2&&h>1&&(w=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,l/=h/w),p=this.cachedCanvases.getCanvas(d,y,w),m=p.context,m.clearRect(0,0,y,w),m.drawImage(t,0,0,c,h,0,0,y,w),t=p.canvas,c=y,h=w,d=d==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:c,paintHeight:h}}_createMaskCanvas(t){const e=this.ctx,{width:n,height:s}=t,a=this.current.fillColor,l=this.current.patternFill,c=Xt(e);let h,d,p,m;if((t.bitmap||t.data)&&t.count>1){const H=t.bitmap||t.data.buffer;d=JSON.stringify(l?c:[c.slice(0,4),a]),h=this._cachedBitmapsMap.get(H),h||(h=new Map,this._cachedBitmapsMap.set(H,h));const G=h.get(d);if(G&&!l){const Q=Math.round(Math.min(c[0],c[2])+c[4]),ht=Math.round(Math.min(c[1],c[3])+c[5]);return{canvas:G,offsetX:Q,offsetY:ht}}p=G}p||(m=this.cachedCanvases.getCanvas("maskCanvas",n,s),Qg(m.context,t));let y=ct.transform(c,[1/n,0,0,-1/s,0,0]);y=ct.transform(y,[1,0,0,1,0,-s]);const w=zs.slice();ct.axialAlignedBoundingBox([0,0,n,s],y,w);const[A,x,E,b]=w,C=Math.round(E-A)||1,_=Math.round(b-x)||1,R=this.cachedCanvases.getCanvas("fillCanvas",C,_),P=R.context,D=A,I=x;P.translate(-D,-I),P.transform(...y),p||(p=this._scaleImage(m.canvas,Nn(P)),p=p.img,h&&l&&h.set(d,p)),P.imageSmoothingEnabled=Zg(Xt(P),t.interpolate),Ya(P,p,0,0,p.width,p.height,0,0,n,s),P.globalCompositeOperation="source-in";const j=ct.transform(Nn(P),[1,0,0,1,-D,-I]);return P.fillStyle=l?a.getPattern(e,this,j,Ae.FILL):a,P.fillRect(0,0,n,s),h&&!l&&(this.cachedCanvases.delete("fillCanvas"),h.set(d,R.canvas)),{canvas:R.canvas,offsetX:Math.round(D),offsetY:Math.round(I)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=D_[t]}setLineJoin(t){this.ctx.lineJoin=I_[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(t),n.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,n]of t)switch(e){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(n,t,e);this.suspendedCtx=this.ctx;const a=this.ctx=s.context;a.setTransform(this.suspendedCtx.getTransform()),Hr(this.suspendedCtx,a),M_(a,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Hr(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,s){const a=s[0],l=s[1],c=s[2]-a,h=s[3]-l;c===0||h===0||(this.genericComposeSMask(e.context,n,c,h,e.subtype,e.backdrop,e.transferMap,a,l,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,s,a,l,c,h,d,p,m){let y=t.canvas,w=h-p,A=d-m;if(l)if(w<0||A<0||w+n>y.width||A+s>y.height){const E=this.cachedCanvases.getCanvas("maskExtension",n,s),b=E.context;b.drawImage(y,-w,-A),b.globalCompositeOperation="destination-atop",b.fillStyle=l,b.fillRect(0,0,n,s),b.globalCompositeOperation="source-over",y=E.canvas,w=A=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const E=new Path2D;E.rect(w,A,n,s),t.clip(E),t.globalCompositeOperation="destination-atop",t.fillStyle=l,t.fillRect(w,A,n,s),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),a==="Alpha"&&c?e.filter=this.filterFactory.addAlphaFilter(c):a==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(c));const x=new Path2D;x.rect(h,d,n,s),e.clip(x),e.globalCompositeOperation="destination-in",e.drawImage(y,w,A,n,s,h,d,n,s),e.restore()}save(){this.inSMaskMode&&Hr(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Hr(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,n,s,a,l){this.ctx.transform(t,e,n,s,a,l),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n){let[s]=e;if(!n){s||=e[0]=new Path2D,this[t](s);return}if(!(s instanceof Path2D)){const a=e[0]=new Path2D;for(let l=0,c=s.length;l<c;)switch(s[l++]){case Ga.moveTo:a.moveTo(s[l++],s[l++]);break;case Ga.lineTo:a.lineTo(s[l++],s[l++]);break;case Ga.curveTo:a.bezierCurveTo(s[l++],s[l++],s[l++],s[l++],s[l++],s[l++]);break;case Ga.closePath:a.closePath();break;default:St(`Unrecognized drawing path operator: ${s[l-1]}`);break}s=a}ct.axialAlignedBoundingBox(n,Xt(this.ctx),this.current.minMax),this[t](s)}closePath(){this.ctx.closePath()}stroke(t,e=!0){const n=this.ctx,s=this.current.strokeColor;if(n.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof s=="object"&&s?.getPattern){const a=s.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.strokeStyle=s.getPattern(n,this,Nn(n),Ae.STROKE),a){const l=new Path2D;l.addPath(t,n.getTransform().invertSelf().multiplySelf(a)),t=l}this.rescaleAndStroke(t,!1),n.restore()}else this.rescaleAndStroke(t,!0);e&&this.consumePath(t,this.current.getClippedPathBoundingBox(Ae.STROKE,Xt(this.ctx))),n.globalAlpha=this.current.fillAlpha}closeStroke(t){this.stroke(t)}fill(t,e=!0){const n=this.ctx,s=this.current.fillColor,a=this.current.patternFill;let l=!1;if(a){const h=s.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.fillStyle=s.getPattern(n,this,Nn(n),Ae.FILL),h){const d=new Path2D;d.addPath(t,n.getTransform().invertSelf().multiplySelf(h)),t=d}l=!0}const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(n.fill(t,"evenodd"),this.pendingEOFill=!1):n.fill(t)),l&&n.restore(),e&&this.consumePath(t,c)}eoFill(t){this.pendingEOFill=!0,this.fill(t)}fillStroke(t){this.fill(t,!1),this.stroke(t,!1),this.consumePath(t)}eoFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}closeFillStroke(t){this.fillStroke(t)}closeEOFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}endPath(t){this.consumePath(t)}rawFillPath(t){this.ctx.fill(t)}clip(){this.pendingClip=N_}eoClip(){this.pendingClip=Jg}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0)return;const n=new Path2D,s=e.getTransform().invertSelf();for(const{transform:a,x:l,y:c,fontSize:h,path:d}of t)d&&n.addPath(d,new DOMMatrix(a).preMultiplySelf(s).translate(l,c).scale(h,-h));e.clip(n),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){const n=this.commonObjs.get(t),s=this.current;if(!n)throw new Error(`Can't find font for ${t}`);if(s.fontMatrix=n.fontMatrix||ph,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&St("Invalid font matrix for font "+t),e<0?(e=-e,s.fontDirection=-1):s.fontDirection=1,this.current.font=n,this.current.fontSize=e,n.isType3Font)return;const a=n.loadedName||"sans-serif",l=n.systemFontInfo?.css||`"${a}", ${n.fallbackName}`;let c="normal";n.black?c="900":n.bold&&(c="bold");const h=n.italic?"italic":"normal";let d=e;e<Gg?d=Gg:e>Xg&&(d=Xg),this.current.fontSizeScale=e/d,this.ctx.font=`${h} ${c} ${d}px ${l}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t){const{current:e}=this;e.textMatrix=t,e.textMatrixScale=Math.hypot(t[0],t[1]),e.x=e.lineX=0,e.y=e.lineY=0}nextLine(){this.moveText(0,this.current.leading)}#n(t,e,n){const s=new Path2D;return s.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),s}paintChar(t,e,n,s,a){const l=this.ctx,c=this.current,h=c.font,d=c.textRenderingMode,p=c.fontSize/c.fontSizeScale,m=d&Ce.FILL_STROKE_MASK,y=!!(d&Ce.ADD_TO_PATH_FLAG),w=c.patternFill&&!h.missingFile,A=c.patternStroke&&!h.missingFile;let x;if((h.disableFontFace||y||w||A)&&!h.missingFile&&(x=h.getPathGenerator(this.commonObjs,t)),x&&(h.disableFontFace||w||A)){l.save(),l.translate(e,n),l.scale(p,-p);let E;if((m===Ce.FILL||m===Ce.FILL_STROKE)&&(s?(E=l.getTransform(),l.setTransform(...s),l.fill(this.#n(x,E,s))):l.fill(x)),m===Ce.STROKE||m===Ce.FILL_STROKE)if(a){E||=l.getTransform(),l.setTransform(...a);const{a:b,b:C,c:_,d:R}=E,P=ct.inverseTransform(a),D=ct.transform([b,C,_,R,0,0],P);ct.singularValueDecompose2dScale(D,Ze),l.lineWidth*=Math.max(Ze[0],Ze[1])/p,l.stroke(this.#n(x,E,a))}else l.lineWidth/=p,l.stroke(x);l.restore()}else(m===Ce.FILL||m===Ce.FILL_STROKE)&&l.fillText(t,e,n),(m===Ce.STROKE||m===Ce.FILL_STROKE)&&l.strokeText(t,e,n);y&&(this.pendingTextPaths||=[]).push({transform:Xt(l),x:e,y:n,fontSize:p,path:x})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let s=3;s<e.length;s+=4)if(e[s]>0&&e[s]<255){n=!0;break}return _t(this,"isFontSubpixelAAEnabled",n)}showText(t){const e=this.current,n=e.font;if(n.isType3Font)return this.showType3Text(t);const s=e.fontSize;if(s===0)return;const a=this.ctx,l=e.fontSizeScale,c=e.charSpacing,h=e.wordSpacing,d=e.fontDirection,p=e.textHScale*d,m=t.length,y=n.vertical,w=y?1:-1,A=n.defaultVMetrics,x=s*e.fontMatrix[0],E=e.textRenderingMode===Ce.FILL&&!n.disableFontFace&&!e.patternFill;a.save(),e.textMatrix&&a.transform(...e.textMatrix),a.translate(e.x,e.y+e.textRise),d>0?a.scale(p,-1):a.scale(p,1);let b,C;if(e.patternFill){a.save();const I=e.fillColor.getPattern(a,this,Nn(a),Ae.FILL);b=Xt(a),a.restore(),a.fillStyle=I}if(e.patternStroke){a.save();const I=e.strokeColor.getPattern(a,this,Nn(a),Ae.STROKE);C=Xt(a),a.restore(),a.strokeStyle=I}let _=e.lineWidth;const R=e.textMatrixScale;if(R===0||_===0){const I=e.textRenderingMode&Ce.FILL_STROKE_MASK;(I===Ce.STROKE||I===Ce.FILL_STROKE)&&(_=this.getSinglePixelWidth())}else _/=R;if(l!==1&&(a.scale(l,l),_/=l),a.lineWidth=_,n.isInvalidPDFjsFont){const I=[];let j=0;for(const H of t)I.push(H.unicode),j+=H.width;a.fillText(I.join(""),0,0),e.x+=j*x*p,a.restore(),this.compose();return}let P=0,D;for(D=0;D<m;++D){const I=t[D];if(typeof I=="number"){P+=w*I*s/1e3;continue}let j=!1;const H=(I.isSpace?h:0)+c,G=I.fontChar,Q=I.accent;let ht,lt,et=I.width;if(y){const q=I.vmetric||A,U=-(I.vmetric?q[1]:et*.5)*x,$=q[2]*x;et=q?-q[0]:et,ht=U/l,lt=(P+$)/l}else ht=P/l,lt=0;if(n.remeasure&&et>0){const q=a.measureText(G).width*1e3/s*l;if(et<q&&this.isFontSubpixelAAEnabled){const U=et/q;j=!0,a.save(),a.scale(U,1),ht/=U}else et!==q&&(ht+=(et-q)/2e3*s/l)}if(this.contentVisible&&(I.isInFont||n.missingFile)){if(E&&!Q)a.fillText(G,ht,lt);else if(this.paintChar(G,ht,lt,b,C),Q){const q=ht+s*Q.offset.x/l,U=lt-s*Q.offset.y/l;this.paintChar(Q.fontChar,q,U,b,C)}}const bt=y?et*x-H*d:et*x+H*d;P+=bt,j&&a.restore()}y?e.y-=P:e.x+=P*p,a.restore(),this.compose()}showType3Text(t){const e=this.ctx,n=this.current,s=n.font,a=n.fontSize,l=n.fontDirection,c=s.vertical?1:-1,h=n.charSpacing,d=n.wordSpacing,p=n.textHScale*l,m=n.fontMatrix||ph,y=t.length,w=n.textRenderingMode===Ce.INVISIBLE;let A,x,E,b;if(!(w||a===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),n.textMatrix&&e.transform(...n.textMatrix),e.translate(n.x,n.y+n.textRise),e.scale(p,l),A=0;A<y;++A){if(x=t[A],typeof x=="number"){b=c*x*a/1e3,this.ctx.translate(b,0),n.x+=b*p;continue}const C=(x.isSpace?d:0)+h,_=s.charProcOperatorList[x.operatorListId];_?this.contentVisible&&(this.save(),e.scale(a,a),e.transform(...m),this.executeOperatorList(_),this.restore()):St(`Type3 character "${x.operatorListId}" is not available.`);const R=[x.width,0];ct.applyTransform(R,m),E=R[0]*a+C,e.translate(E,0),n.x+=E*p}e.restore()}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,n,s,a,l){const c=new Path2D;c.rect(n,s,a-n,l-s),this.ctx.clip(c),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const n=this.baseTransform||Xt(this.ctx),s={createCanvasGraphics:a=>new $s(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new md(t,this.ctx,s,n)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t){this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t){this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let n;return this.cachedPatterns.has(t)?n=this.cachedPatterns.get(t):(n=P_(this.getObject(t)),this.cachedPatterns.set(t,n)),e&&(n.matrix=e),n}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const n=this._getPattern(t);e.fillStyle=n.getPattern(e,this,Nn(e),Ae.SHADING);const s=Nn(e);if(s){const{width:a,height:l}=e.canvas,c=zs.slice();ct.axialAlignedBoundingBox([0,0,a,l],s,c);const[h,d,p,m]=c;this.ctx.fillRect(h,d,p-h,m-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Ft("Should not call beginInlineImage")}beginImageData(){Ft("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=Xt(this.ctx),e)){ct.axialAlignedBoundingBox(e,this.baseTransform,this.current.minMax);const[n,s,a,l]=e,c=new Path2D;c.rect(n,s,a-n,l-s),this.ctx.clip(c),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||xl("TODO: Support non-isolated groups."),t.knockout&&St("Knockout groups not supported.");const n=Xt(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let s=zs.slice();ct.axialAlignedBoundingBox(t.bbox,Xt(e),s);const a=[0,0,e.canvas.width,e.canvas.height];s=ct.intersect(s,a)||[0,0,0,0];const l=Math.floor(s[0]),c=Math.floor(s[1]),h=Math.max(Math.ceil(s[2])-l,1),d=Math.max(Math.ceil(s[3])-c,1);this.current.startNewPathAndClipBox([0,0,h,d]);let p="groupAt"+this.groupLevel;t.smask&&(p+="_smask_"+this.smaskCounter++%2);const m=this.cachedCanvases.getCanvas(p,h,d),y=m.context;y.translate(-l,-c),y.transform(...n);let w=new Path2D;const[A,x,E,b]=t.bbox;if(w.rect(A,x,E-A,b-x),t.matrix){const C=new Path2D;C.addPath(w,new DOMMatrix(t.matrix)),w=C}y.clip(w),t.smask?this.smaskStack.push({canvas:m.canvas,context:y,offsetX:l,offsetY:c,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(l,c),e.save()),Hr(e,y),this.ctx=y,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const s=Xt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);const a=zs.slice();ct.axialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],s,a),this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(a)}}beginAnnotation(t,e,n,s,a){if(this.#t(),Qa(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const l=e[2]-e[0],c=e[3]-e[1];if(a&&this.annotationCanvasMap){n=n.slice(),n[4]-=e[0],n[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=l,e[3]=c,ct.singularValueDecompose2dScale(Xt(this.ctx),Ze);const{viewportScale:h}=this,d=Math.ceil(l*this.outputScaleX*h),p=Math.ceil(c*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(d,p);const{canvas:m,context:y}=this.annotationCanvas;this.annotationCanvasMap.set(t,m),this.annotationCanvas.savedCtx=this.ctx,this.ctx=y,this.ctx.save(),this.ctx.setTransform(Ze[0],0,0,-Ze[1],0,c*Ze[1]),Qa(this.ctx)}else{Qa(this.ctx),this.endPath();const h=new Path2D;h.rect(e[0],e[1],l,c),this.ctx.clip(h)}}this.current=new qg(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const n=this.ctx,s=this._createMaskCanvas(t),a=s.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(a,s.offsetX,s.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n=0,s=0,a,l){if(!this.contentVisible)return;t=this.getObject(t.data,t);const c=this.ctx;c.save();const h=Xt(c);c.transform(e,n,s,a,0,0);const d=this._createMaskCanvas(t);c.setTransform(1,0,0,1,d.offsetX-h[4],d.offsetY-h[5]);for(let p=0,m=l.length;p<m;p+=2){const y=ct.transform(h,[e,n,s,a,l[p],l[p+1]]);c.drawImage(d.canvas,y[4],y[5])}c.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,n=this.current.fillColor,s=this.current.patternFill;for(const a of t){const{data:l,width:c,height:h,transform:d}=a,p=this.cachedCanvases.getCanvas("maskCanvas",c,h),m=p.context;m.save();const y=this.getObject(l,a);Qg(m,y),m.globalCompositeOperation="source-in",m.fillStyle=s?n.getPattern(m,this,Nn(e),Ae.FILL):n,m.fillRect(0,0,c,h),m.restore(),e.save(),e.transform(...d),e.scale(1,-1),Ya(e,p.canvas,0,0,c,h,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){St("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,n,s){if(!this.contentVisible)return;const a=this.getObject(t);if(!a){St("Dependent image isn't ready yet");return}const l=a.width,c=a.height,h=[];for(let d=0,p=s.length;d<p;d+=2)h.push({transform:[e,0,0,n,s[d],s[d+1]],x:0,y:0,w:l,h:c});this.paintInlineImageXObjectGroup(a,h)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:s}=t,a=this.cachedCanvases.getCanvas("inlineImage",n,s),l=a.context;return l.filter=this.current.transferMaps,l.drawImage(e,0,0),l.filter="none",a.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,n=t.height,s=this.ctx;this.save();const{filter:a}=s;a!=="none"&&a!==""&&(s.filter="none"),s.scale(1/e,-1/n);let l;if(t.bitmap)l=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)l=t;else{const d=this.cachedCanvases.getCanvas("inlineImage",e,n).context;Yg(d,t),l=this.applyTransferMapsToCanvas(d)}const c=this._scaleImage(l,Nn(s));s.imageSmoothingEnabled=Zg(Xt(s),t.interpolate),Ya(s,c.img,0,0,c.paintWidth,c.paintHeight,0,-n,e,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const n=this.ctx;let s;if(t.bitmap)s=t.bitmap;else{const a=t.width,l=t.height,h=this.cachedCanvases.getCanvas("inlineImage",a,l).context;Yg(h,t),s=this.applyTransferMapsToCanvas(h)}for(const a of e)n.save(),n.transform(...a.transform),n.scale(1,-1),Ya(n,s,a.x,a.y,a.w,a.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t,e){const n=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const s=this.ctx;this.pendingClip&&(n||(this.pendingClip===Jg?s.clip(t,"evenodd"):s.clip(t)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Xt(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),s=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,s)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:s,d:a}=this.ctx.getTransform();let l,c;if(n===0&&s===0){const h=Math.abs(e),d=Math.abs(a);if(h===d)if(t===0)l=c=1/h;else{const p=h*t;l=c=p<1?1/p:1}else if(t===0)l=1/h,c=1/d;else{const p=h*t,m=d*t;l=p<1?1/p:1,c=m<1?1/m:1}}else{const h=Math.abs(e*a-n*s),d=Math.hypot(e,n),p=Math.hypot(s,a);if(t===0)l=p/h,c=d/h;else{const m=t*h;l=p>m?p/m:1,c=d>m?d/m:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=c}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:n,current:{lineWidth:s}}=this,[a,l]=this.getScaleForStroking();if(a===l){n.lineWidth=(s||1)*a,n.stroke(t);return}const c=n.getLineDash();e&&n.save(),n.scale(a,l),Uu.a=1/a,Uu.d=1/l;const h=new Path2D;if(h.addPath(t,Uu),c.length>0){const d=Math.max(a,l);n.setLineDash(c.map(p=>p/d)),n.lineDashOffset/=d}n.lineWidth=s||1,n.stroke(h),e&&n.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const r in co)$s.prototype[r]!==void 0&&($s.prototype[co[r]]=$s.prototype[r]);class Ti{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class F_{#t;#e;constructor({parsedData:t,rawData:e}){this.#t=t,this.#e=e}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const Ns=Symbol("INTERNAL");class O_{#t=!1;#e=!1;#n=!1;#i=!0;constructor(t,{name:e,intent:n,usage:s,rbGroups:a}){this.#t=!!(t&Ye.DISPLAY),this.#e=!!(t&Ye.PRINT),this.name=e,this.intent=n,this.usage=s,this.rbGroups=a}get visible(){if(this.#n)return this.#i;if(!this.#i)return!1;const{print:t,view:e}=this.usage;return this.#t?e?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,e,n=!1){t!==Ns&&Ft("Internal method `_setVisible` called."),this.#n=n,this.#i=e}}class j_{#t=null;#e=new Map;#n=null;#i=null;constructor(t,e=Ye.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#i=t.order;for(const n of t.groups)this.#e.set(n.id,new O_(e,n));if(t.baseState==="OFF")for(const n of this.#e.values())n._setVisible(Ns,!1);for(const n of t.on)this.#e.get(n)._setVisible(Ns,!0);for(const n of t.off)this.#e.get(n)._setVisible(Ns,!1);this.#n=this.getHash()}}#r(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let s=1;s<e;s++){const a=t[s];let l;if(Array.isArray(a))l=this.#r(a);else if(this.#e.has(a))l=this.#e.get(a).visible;else return St(`Optional content group not found: ${a}`),!0;switch(n){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return n==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return xl("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(St(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#r(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!this.#e.has(e))return St(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!this.#e.has(e))return St(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!this.#e.has(e))return St(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!this.#e.has(e))return St(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!1}return!0}return St(`Unknown optional content policy ${t.policy}.`),!0}return St(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){const s=this.#e.get(t);if(!s){St(`Optional content group not found: ${t}`);return}if(n&&e&&s.rbGroups.length)for(const a of s.rbGroups)for(const l of a)l!==t&&this.#e.get(l)?._setVisible(Ns,!1,!0);s._setVisible(Ns,!!e,!0),this.#t=null}setOCGState({state:t,preserveRB:e}){let n;for(const s of t){switch(s){case"ON":case"OFF":case"Toggle":n=s;continue}const a=this.#e.get(s);if(a)switch(n){case"ON":this.setVisibility(s,!0,e);break;case"OFF":this.setVisibility(s,!1,e);break;case"Toggle":this.setVisibility(s,!a.visible,e);break}}this.#t=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#e.size?this.#i?this.#i.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new iv;for(const[e,n]of this.#e)t.update(`${e}:${n.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class B_{constructor(t,{disableRange:e=!1,disableStream:n=!1}){ce(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:a,progressiveDone:l,contentDispositionFilename:c}=t;if(this._queuedChunks=[],this._progressiveDone=l,this._contentDispositionFilename=c,a?.length>0){const h=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(h)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((h,d)=>{this._onReceiveData({begin:h,chunk:d})}),t.addProgressListener((h,d)=>{this._onProgress({loaded:h,total:d})}),t.addProgressiveReadListener(h=>{this._onReceiveData({chunk:h})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const s=this._rangeReaders.some(function(a){return a._begin!==t?!1:(a._enqueue(n),!0)});ce(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){ce(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new V_(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new z_(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}}class V_{constructor(t,e,n=!1,s=null){this._stream=t,this._done=n||!1,this._filename=Sl(s)?s:null,this._queuedChunks=e||[],this._loaded=0;for(const a of this._queuedChunks)this._loaded+=a.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class z_{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function H_(r){let t=!0,e=n("filename\\*","i").exec(r);if(e){e=e[1];let p=c(e);return p=unescape(p),p=h(p),p=d(p),a(p)}if(e=l(r),e){const p=d(e);return a(p)}if(e=n("filename","i").exec(r),e){e=e[1];let p=c(e);return p=d(p),a(p)}function n(p,m){return new RegExp("(?:^|;)\\s*"+p+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',m)}function s(p,m){if(p){if(!/^[\x00-\xFF]+$/.test(m))return m;try{const y=new TextDecoder(p,{fatal:!0}),w=Ao(m);m=y.decode(w),t=!1}catch{}}return m}function a(p){return t&&/[\x80-\xff]/.test(p)&&(p=s("utf-8",p),t&&(p=s("iso-8859-1",p))),p}function l(p){const m=[];let y;const w=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(y=w.exec(p))!==null;){let[,x,E,b]=y;if(x=parseInt(x,10),x in m){if(x===0)break;continue}m[x]=[E,b]}const A=[];for(let x=0;x<m.length&&x in m;++x){let[E,b]=m[x];b=c(b),E&&(b=unescape(b),x===0&&(b=h(b))),A.push(b)}return A.join("")}function c(p){if(p.startsWith('"')){const m=p.slice(1).split('\\"');for(let y=0;y<m.length;++y){const w=m[y].indexOf('"');w!==-1&&(m[y]=m[y].slice(0,w),m.length=y+1),m[y]=m[y].replaceAll(/\\(.)/g,"$1")}p=m.join('"')}return p}function h(p){const m=p.indexOf("'");if(m===-1)return p;const y=p.slice(0,m),A=p.slice(m+1).replace(/^[^']*'/,"");return s(y,A)}function d(p){return!p.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(p)?p:p.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(m,y,w,A){if(w==="q"||w==="Q")return A=A.replaceAll("_"," "),A=A.replaceAll(/=([0-9a-fA-F]{2})/g,function(x,E){return String.fromCharCode(parseInt(E,16))}),s(y,A);try{A=atob(A)}catch{}return s(y,A)})}return""}function hv(r,t){const e=new Headers;if(!r||!t||typeof t!="object")return e;for(const n in t){const s=t[n];s!==void 0&&e.append(n,s)}return e}function bl(r){return URL.parse(r)?.origin??null}function dv({responseHeaders:r,isHttp:t,rangeChunkSize:e,disableRange:n}){const s={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(r.get("Content-Length"),10);return!Number.isInteger(a)||(s.suggestedLength=a,a<=2*e)||n||!t||r.get("Accept-Ranges")!=="bytes"||(r.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function fv(r){const t=r.get("Content-Disposition");if(t){let e=H_(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Sl(e))return e}return null}function To(r,t){return new uo(`Unexpected server response (${r}) while retrieving PDF "${t}".`,r,r===404||r===0&&t.startsWith("file:"))}function pv(r){return r===200||r===206}function mv(r,t,e){return{method:"GET",headers:r,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function gv(r){return r instanceof Uint8Array?r.buffer:r instanceof ArrayBuffer?r:(St(`getArrayBuffer - unexpected data format: ${r}`),new Uint8Array(r).buffer)}class U_{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=hv(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return ce(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new $_(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new W_(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class $_{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const n=new Headers(t.headers),s=e.url;fetch(s,mv(n,this._withCredentials,this._abortController)).then(a=>{if(t._responseOrigin=bl(a.url),!pv(a.status))throw To(a.status,s);this._reader=a.body.getReader(),this._headersCapability.resolve();const l=a.headers,{allowRangeRequests:c,suggestedLength:h}=dv({responseHeaders:l,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=h||this._contentLength,this._filename=fv(l),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new ii("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:gv(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class W_{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const s=t.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const a=new Headers(t.headers);a.append("Range",`bytes=${e}-${n-1}`);const l=s.url;fetch(l,mv(a,this._withCredentials,this._abortController)).then(c=>{const h=bl(c.url);if(h!==t._responseOrigin)throw new Error(`Expected range response-origin "${h}" to match "${t._responseOrigin}".`);if(!pv(c.status))throw To(c.status,l);this._readCapability.resolve(),this._reader=c.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:gv(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const $u=200,Wu=206;function G_(r){const t=r.response;return typeof t!="string"?t:Ao(t).buffer}class X_{_responseOrigin=null;constructor({url:t,httpHeaders:e,withCredentials:n}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=hv(this.isHttp,e),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,s=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[a,l]of this.headers)e.setRequestHeader(a,l);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),s.expectedStatus=Wu):s.expectedStatus=$u,e.responseType="arraybuffer",ce(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),s.onHeadersReceived=t.onHeadersReceived,s.onDone=t.onDone,s.onError=t.onError,s.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){const n=this.pendingRequests[t];n&&n.onProgress?.(e)}onStateChange(t,e){const n=this.pendingRequests[t];if(!n)return;const s=n.xhr;if(s.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),s.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],s.status===0&&this.isHttp){n.onError(s.status);return}const a=s.status||$u;if(!(a===$u&&n.expectedStatus===Wu)&&a!==n.expectedStatus){n.onError(s.status);return}const c=G_(s);if(a===Wu){const h=s.getResponseHeader("Content-Range"),d=/bytes (\d+)-(\d+)\/(\d+)/.exec(h);d?n.onDone({begin:parseInt(d[1],10),chunk:c}):(St('Missing or invalid "Content-Range" header.'),n.onError(0))}else c?n.onDone({begin:0,chunk:c}):n.onError(s.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class K_{constructor(t){this._source=t,this._manager=new X_(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return ce(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new q_(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new Y_(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class q_{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=bl(e.responseURL);const n=e.getAllResponseHeaders(),s=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(c=>{const[h,...d]=c.split(": ");return[h,d.join(": ")]}):[]),{allowRangeRequests:a,suggestedLength:l}=dv({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=fv(s),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=To(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Y_{constructor(t,e,n){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=bl(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=To(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Q_=/^[a-z][a-z0-9\-+.]+:/i;function Z_(r){if(Q_.test(r))return new URL(r);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(r))}class J_{constructor(t){this.source=t,this.url=Z_(t.url),ce(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return ce(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new tC(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new eC(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class tC{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=To(0,this._url.href)),this._storedError=s,this._headersCapability.reject(s)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new ii("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class eC{constructor(t,e,n){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const s=t.source;this._isStreamingSupported=!s.disableStream;const a=process.getBuiltinModule("fs");this._setReadableStream(a.createReadStream(this._url,{start:e,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Ur=Symbol("INITIAL_DATA");class yv{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:Ur}}get(t,e=null){if(e){const s=this.#e(t);return s.promise.then(()=>e(s.data)),null}const n=this.#t[t];if(!n||n.data===Ur)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=this.#t[t];return!!e&&e.data!==Ur}delete(t){const e=this.#t[t];return!e||e.data===Ur?!1:(delete this.#t[t],!0)}resolve(t,e=null){const n=this.#e(t);n.data=e,n.resolve()}clear(){for(const t in this.#t){const{data:e}=this.#t[t];e?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:e}=this.#t[t];e!==Ur&&(yield[t,e])}}}const nC=1e5,ty=30;let ho=class hn{#t=Promise.withResolvers();#e=null;#n=!1;#i=!!globalThis.FontInspector?.enabled;#r=null;#s=null;#o=0;#a=0;#u=null;#c=null;#d=0;#l=0;#p=Object.create(null);#g=[];#f=null;#h=[];#m=new WeakMap;#w=null;static#y=new Map;static#A=new Map;static#S=new WeakMap;static#v=null;static#E=new Set;constructor({textContentSource:t,container:e,viewport:n}){if(t instanceof ReadableStream)this.#f=t;else if(typeof t=="object")this.#f=new ReadableStream({start(h){h.enqueue(t),h.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#c=e,this.#l=n.scale*Cn.pixelRatio,this.#d=n.rotation,this.#s={div:null,properties:null,ctx:null};const{pageWidth:s,pageHeight:a,pageX:l,pageY:c}=n.rawDims;this.#w=[1,0,0,-1,-l,c+a],this.#a=s,this.#o=a,hn.#C(),Ri(e,n),this.#t.promise.finally(()=>{hn.#E.delete(this),this.#s=null,this.#p=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=ye.platform;return _t(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#u.read().then(({value:e,done:n})=>{if(n){this.#t.resolve();return}this.#r??=e.lang,Object.assign(this.#p,e.styles),this.#k(e.items),t()},this.#t.reject)};return this.#u=this.#f.getReader(),hn.#E.add(this),t(),this.#t.promise}update({viewport:t,onBefore:e=null}){const n=t.scale*Cn.pixelRatio,s=t.rotation;if(s!==this.#d&&(e?.(),this.#d=s,Ri(this.#c,{rotation:s})),n!==this.#l){e?.(),this.#l=n;const a={div:null,properties:null,ctx:hn.#P(this.#r)};for(const l of this.#h)a.properties=this.#m.get(l),a.div=l,this.#R(a)}}cancel(){const t=new ii("TextLayer task cancelled.");this.#u?.cancel(t).catch(()=>{}),this.#u=null,this.#t.reject(t)}get textDivs(){return this.#h}get textContentItemsStr(){return this.#g}#k(t){if(this.#n)return;this.#s.ctx??=hn.#P(this.#r);const e=this.#h,n=this.#g;for(const s of t){if(e.length>nC){St("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(s.str===void 0){if(s.type==="beginMarkedContentProps"||s.type==="beginMarkedContent"){const a=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),s.id&&this.#e.setAttribute("id",`${s.id}`),a.append(this.#e)}else s.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}n.push(s.str),this.#b(s)}}#b(t){const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#h.push(e);const s=ct.transform(this.#w,t.transform);let a=Math.atan2(s[1],s[0]);const l=this.#p[t.fontName];l.vertical&&(a+=Math.PI/2);let c=this.#i&&l.fontSubstitution||l.fontFamily;c=hn.fontFamilyMap.get(c)||c;const h=Math.hypot(s[2],s[3]),d=h*hn.#L(c,l,this.#r);let p,m;a===0?(p=s[4],m=s[5]-d):(p=s[4]+d*Math.sin(a),m=s[5]-d*Math.cos(a));const y="calc(var(--total-scale-factor) *",w=e.style;this.#e===this.#c?(w.left=`${(100*p/this.#a).toFixed(2)}%`,w.top=`${(100*m/this.#o).toFixed(2)}%`):(w.left=`${y}${p.toFixed(2)}px)`,w.top=`${y}${m.toFixed(2)}px)`),w.fontSize=`${y}${(hn.#v*h).toFixed(2)}px)`,w.fontFamily=c,n.fontSize=h,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#i&&(e.dataset.fontName=l.fontSubstitutionLoadedName||t.fontName),a!==0&&(n.angle=a*(180/Math.PI));let A=!1;if(t.str.length>1)A=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const x=Math.abs(t.transform[0]),E=Math.abs(t.transform[3]);x!==E&&Math.max(x,E)/Math.min(x,E)>1.5&&(A=!0)}if(A&&(n.canvasWidth=l.vertical?t.height:t.width),this.#m.set(e,n),this.#s.div=e,this.#s.properties=n,this.#R(this.#s),n.hasText&&this.#e.append(e),n.hasEOL){const x=document.createElement("br");x.setAttribute("role","presentation"),this.#e.append(x)}}#R(t){const{div:e,properties:n,ctx:s}=t,{style:a}=e;let l="";if(hn.#v>1&&(l=`scale(${1/hn.#v})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:c}=a,{canvasWidth:h,fontSize:d}=n;hn.#T(s,d*this.#l,c);const{width:p}=s.measureText(e.textContent);p>0&&(l=`scaleX(${h*this.#l/p}) ${l}`)}n.angle!==0&&(l=`rotate(${n.angle}deg) ${l}`),l.length>0&&(a.transform=l)}static cleanup(){if(!(this.#E.size>0)){this.#y.clear();for(const{canvas:t}of this.#A.values())t.remove();this.#A.clear()}}static#P(t=null){let e=this.#A.get(t||="");if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#A.set(t,e),this.#S.set(e,{size:0,family:""})}return e}static#T(t,e,n){const s=this.#S.get(t);e===s.size&&n===s.family||(t.font=`${e}px ${n}`,s.size=e,s.family=n)}static#C(){if(this.#v!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#v=t.getBoundingClientRect().height,t.remove()}static#L(t,e,n){const s=this.#y.get(t);if(s)return s;const a=this.#P(n);a.canvas.width=a.canvas.height=ty,this.#T(a,ty,t);const l=a.measureText(""),c=l.fontBoundingBoxAscent,h=Math.abs(l.fontBoundingBoxDescent);a.canvas.width=a.canvas.height=0;let d=.8;return c?d=c/(c+h):(ye.platform.isFirefox&&St("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?d=e.ascent:e.descent&&(d=1+e.descent)),this.#y.set(t,d),d}};class fo{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function s(a){if(!a)return;let l=null;const c=a.name;if(c==="#text")l=a.value;else if(fo.shouldBuildText(c))a?.attributes?.textContent?l=a.attributes.textContent:a.value&&(l=a.value);else return;if(l!==null&&e.push({str:l}),!!a.children)for(const h of a.children)s(h)}return s(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const iC=100;function gd(r={}){typeof r=="string"||r instanceof URL?r={url:r}:(r instanceof ArrayBuffer||ArrayBuffer.isView(r))&&(r={data:r});const t=new yd,{docId:e}=t,n=r.url?f_(r.url):null,s=r.data?p_(r.data):null,a=r.httpHeaders||null,l=r.withCredentials===!0,c=r.password??null,h=r.range instanceof vd?r.range:null,d=Number.isInteger(r.rangeChunkSize)&&r.rangeChunkSize>0?r.rangeChunkSize:2**16;let p=r.worker instanceof Ys?r.worker:null;const m=r.verbosity,y=typeof r.docBaseUrl=="string"&&!bo(r.docBaseUrl)?r.docBaseUrl:null,w=Ka(r.cMapUrl),A=r.cMapPacked!==!1,x=r.CMapReaderFactory||(Le?A_:Hg),E=Ka(r.iccUrl),b=Ka(r.standardFontDataUrl),C=r.StandardFontDataFactory||(Le?S_:Ug),_=Ka(r.wasmUrl),R=r.WasmFactory||(Le?b_:$g),P=r.stopAtErrors!==!0,D=Number.isInteger(r.maxImageSize)&&r.maxImageSize>-1?r.maxImageSize:-1,I=r.isEvalSupported!==!1,j=typeof r.isOffscreenCanvasSupported=="boolean"?r.isOffscreenCanvasSupported:!Le,H=typeof r.isImageDecoderSupported=="boolean"?r.isImageDecoderSupported:!Le&&(ye.platform.isFirefox||!globalThis.chrome),G=Number.isInteger(r.canvasMaxAreaInBytes)?r.canvasMaxAreaInBytes:-1,Q=typeof r.disableFontFace=="boolean"?r.disableFontFace:Le,ht=r.fontExtraProperties===!0,lt=r.enableXfa===!0,et=r.ownerDocument||globalThis.document,bt=r.disableRange===!0,q=r.disableStream===!0,U=r.disableAutoFetch===!0,$=r.pdfBug===!0,J=r.CanvasFactory||(Le?x_:y_),Z=r.FilterFactory||(Le?w_:v_),N=r.enableHWA===!0,z=r.useWasm!==!1,nt=h?h.length:r.length??NaN,dt=typeof r.useSystemFonts=="boolean"?r.useSystemFonts:!Le&&!Q,wt=typeof r.useWorkerFetch=="boolean"?r.useWorkerFetch:!!(x===Hg&&C===Ug&&R===$g&&w&&b&&_&&Xr(w,document.baseURI)&&Xr(b,document.baseURI)&&Xr(_,document.baseURI)),yt=null;qE(m);const ut={canvasFactory:new J({ownerDocument:et,enableHWA:N}),filterFactory:new Z({docId:e,ownerDocument:et}),cMapReaderFactory:wt?null:new x({baseUrl:w,isCompressed:A}),standardFontDataFactory:wt?null:new C({baseUrl:b}),wasmFactory:wt?null:new R({baseUrl:_})};p||(p=Ys.create({verbosity:m,port:Ti.workerPort}),t._worker=p);const Et={docId:e,apiVersion:"5.4.54",data:s,password:c,disableAutoFetch:U,rangeChunkSize:d,length:nt,docBaseUrl:y,enableXfa:lt,evaluatorOptions:{maxImageSize:D,disableFontFace:Q,ignoreErrors:P,isEvalSupported:I,isOffscreenCanvasSupported:j,isImageDecoderSupported:H,canvasMaxAreaInBytes:G,fontExtraProperties:ht,useSystemFonts:dt,useWasm:z,useWorkerFetch:wt,cMapUrl:w,iccUrl:E,standardFontDataUrl:b,wasmUrl:_}},Pt={ownerDocument:et,pdfBug:$,styleElement:yt,loadingParams:{disableAutoFetch:U,enableXfa:lt}};return p.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const Tt=p.messageHandler.sendWithPromise("GetDocRequest",Et,s?[s.buffer]:null);let Ne;if(h)Ne=new B_(h,{disableRange:bt,disableStream:q});else if(!s){if(!n)throw new Error("getDocument - no `url` parameter provided.");const tn=Xr(n)?U_:Le?J_:K_;Ne=new tn({url:n,length:nt,httpHeaders:a,withCredentials:l,rangeChunkSize:d,disableRange:bt,disableStream:q})}return Tt.then(tn=>{if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const kt=new Kr(e,tn,p.port),Nt=new oC(kt,t,Ne,Pt,ut,N);t._transport=Nt,kt.send("Ready",null)})}).catch(t._capability.reject),t}class yd{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${yd.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}let vd=class{#t=Promise.withResolvers();#e=[];#n=[];#i=[];#r=[];constructor(t,e,n=!1,s=null){this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=s}addRangeListener(t){this.#r.push(t)}addProgressListener(t){this.#i.push(t)}addProgressiveReadListener(t){this.#n.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,e){for(const n of this.#r)n(t,e)}onDataProgress(t,e){this.#t.promise.then(()=>{for(const n of this.#i)n(t,e)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const e of this.#n)e(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,e){Ft("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class sC{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return _t(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class rC{#t=!1;constructor(t,e,n,s=!1){this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=s?new Bg:null,this._pdfBug=s,this.commonObjs=n.commonObjs,this.objs=new yv,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:s=0,dontFlip:a=!1}={}){return new So({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:s,dontFlip:a})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return _t(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:e=t.canvas,viewport:n,intent:s="display",annotationMode:a=Vn.ENABLE,transform:l=null,background:c=null,optionalContentConfigPromise:h=null,annotationCanvasMap:d=null,pageColors:p=null,printAnnotationStorage:m=null,isEditing:y=!1}){this._stats?.time("Overall");const w=this._transport.getRenderingIntent(s,a,m,y),{renderingIntent:A,cacheKey:x}=w;this.#t=!1,h||=this._transport.getOptionalContentConfig(A);let E=this._intentStates.get(x);E||(E=Object.create(null),this._intentStates.set(x,E)),E.streamReaderCancelTimeout&&(clearTimeout(E.streamReaderCancelTimeout),E.streamReaderCancelTimeout=null);const b=!!(A&Ye.PRINT);E.displayReadyCapability||(E.displayReadyCapability=Promise.withResolvers(),E.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(w));const C=P=>{E.renderTasks.delete(_),b&&(this.#t=!0),this.#e(),P?(_.capability.reject(P),this._abortOperatorList({intentState:E,reason:P instanceof Error?P:new Error(P)})):_.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},_=new Hs({callback:C,params:{canvas:e,canvasContext:t,viewport:n,transform:l,background:c},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:E.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!b,pdfBug:this._pdfBug,pageColors:p,enableHWA:this._transport.enableHWA});(E.renderTasks||=new Set).add(_);const R=_.task;return Promise.all([E.displayReadyCapability.promise,h]).then(([P,D])=>{if(this.destroyed){C();return}if(this._stats?.time("Rendering"),!(D.renderingIntent&A))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");_.initializeGraphics({transparency:P,optionalContentConfig:D}),_.operatorListChanged()}).catch(C),R}getOperatorList({intent:t="display",annotationMode:e=Vn.ENABLE,printAnnotationStorage:n=null,isEditing:s=!1}={}){function a(){c.operatorList.lastChunk&&(c.opListReadCapability.resolve(c.operatorList),c.renderTasks.delete(h))}const l=this._transport.getRenderingIntent(t,e,n,s,!0);let c=this._intentStates.get(l.cacheKey);c||(c=Object.create(null),this._intentStates.set(l.cacheKey,c));let h;return c.opListReadCapability||(h=Object.create(null),h.operatorListChanged=a,c.opListReadCapability=Promise.withResolvers(),(c.renderTasks||=new Set).add(h),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(l)),c.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>fo.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,s){function a(){l.read().then(function({value:h,done:d}){if(d){n(c);return}c.lang??=h.lang,Object.assign(c.styles,h.styles),c.items.push(...h.items),a()},s)}const l=e.getReader(),c={items:[],styles:Object.create(null),lang:null};a()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const e=this.#e();return t&&e&&(this._stats&&=new Bg),e}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,e){const n=this._intentStates.get(e);n&&(this._stats?.timeEnd("Page Request"),n.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let n=0,s=t.length;n<s;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:s}){const{map:a,transfer:l}=n,h=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:a,modifiedIds:s},l).getReader(),d=this._intentStates.get(e);d.streamReader=h;const p=()=>{h.read().then(({value:m,done:y})=>{if(y){d.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(m,d),p())},m=>{if(d.streamReader=null,!this._transport.destroyed){if(d.operatorList){d.operatorList.lastChunk=!0;for(const y of d.renderTasks)y.operatorListChanged();this.#e()}if(d.displayReadyCapability)d.displayReadyCapability.reject(m);else if(d.opListReadCapability)d.opListReadCapability.reject(m);else throw m}})};p()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof Al){let s=iC;e.extraDelay>0&&e.extraDelay<1e3&&(s+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},s);return}}if(t.streamReader.cancel(new ii(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[s,a]of this._intentStates)if(a===t){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}var Ci,_n,ti,ts,pl,es,ns,Ie,sl,vv,wv,qr,Xs,rl;const Ut=class Ut{constructor({name:t=null,port:e=null,verbosity:n=YE()}={}){Dn(this,Ie);Dn(this,Ci,Promise.withResolvers());Dn(this,_n,null);Dn(this,ti,null);Dn(this,ts,null);if(this.name=t,this.destroyed=!1,this.verbosity=n,e){if(Ht(Ut,ns).has(e))throw new Error("Cannot use more than one PDFWorker per port.");Ht(Ut,ns).set(e,this),In(this,Ie,vv).call(this,e)}else In(this,Ie,wv).call(this)}get promise(){return Ht(this,Ci).promise}get port(){return Ht(this,ti)}get messageHandler(){return Ht(this,_n)}destroy(){this.destroyed=!0,Ht(this,ts)?.terminate(),ze(this,ts,null),Ht(Ut,ns).delete(Ht(this,ti)),ze(this,ti,null),Ht(this,_n)?.destroy(),ze(this,_n,null)}static create(t){const e=Ht(this,ns).get(t?.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Ut(t)}static get workerSrc(){if(Ti.workerSrc)return Ti.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return _t(this,"_setupFakeWorkerGlobal",(async()=>Ht(this,Xs,rl)?Ht(this,Xs,rl):(await import(this.workerSrc)).WorkerMessageHandler)())}};Ci=new WeakMap,_n=new WeakMap,ti=new WeakMap,ts=new WeakMap,pl=new WeakMap,es=new WeakMap,ns=new WeakMap,Ie=new WeakSet,sl=function(){Ht(this,Ci).resolve(),Ht(this,_n).send("configure",{verbosity:this.verbosity})},vv=function(t){ze(this,ti,t),ze(this,_n,new Kr("main","worker",t)),Ht(this,_n).on("ready",()=>{}),In(this,Ie,sl).call(this)},wv=function(){if(Ht(Ut,es)||Ht(Ut,Xs,rl)){In(this,Ie,qr).call(this);return}let{workerSrc:t}=Ut;try{Ut._isSameOrigin(window.location,t)||(t=Ut._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new Kr("main","worker",e),s=()=>{a.abort(),n.destroy(),e.terminate(),this.destroyed?Ht(this,Ci).reject(new Error("Worker was destroyed")):In(this,Ie,qr).call(this)},a=new AbortController;e.addEventListener("error",()=>{Ht(this,ts)||s()},{signal:a.signal}),n.on("test",c=>{if(a.abort(),this.destroyed||!c){s();return}ze(this,_n,n),ze(this,ti,e),ze(this,ts,e),In(this,Ie,sl).call(this)}),n.on("ready",c=>{if(a.abort(),this.destroyed){s();return}try{l()}catch{In(this,Ie,qr).call(this)}});const l=()=>{const c=new Uint8Array;n.send("test",c,[c.buffer])};l();return}catch{xl("The worker has been disabled.")}In(this,Ie,qr).call(this)},qr=function(){Ht(Ut,es)||(St("Setting up fake worker."),ze(Ut,es,!0)),Ut._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){Ht(this,Ci).reject(new Error("Worker was destroyed"));return}const e=new g_;ze(this,ti,e);const n=`fake${fm(Ut,pl)._++}`,s=new Kr(n+"_worker",n,e);t.setup(s,e),ze(this,_n,new Kr(n,n+"_worker",e)),In(this,Ie,sl).call(this)}).catch(t=>{Ht(this,Ci).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},Xs=new WeakSet,rl=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Dn(Ut,Xs),Dn(Ut,pl,0),Dn(Ut,es,!1),Dn(Ut,ns,new WeakMap),Le&&(ze(Ut,es,!0),Ti.workerSrc||="./pdf.worker.mjs"),Ut._isSameOrigin=(t,e)=>{const n=URL.parse(t);if(!n?.origin||n.origin==="null")return!1;const s=new URL(e,n);return n.origin===s.origin},Ut._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},Ut.fromPort=t=>{if(r_("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Ut.create(t)};let Ys=Ut;class oC{#t=new Map;#e=new Map;#n=new Map;#i=new Map;#r=null;constructor(t,e,n,s,a,l){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new yv,this.fontLoader=new h_({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.wasmFactory=a.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=l,this.setupMessageHandler()}#s(t,e=null){const n=this.#t.get(t);if(n)return n;const s=this.messageHandler.sendWithPromise(t,e);return this.#t.set(t,s),s}get annotationStorage(){return _t(this,"annotationStorage",new dd)}getRenderingIntent(t,e=Vn.ENABLE,n=null,s=!1,a=!1){let l=Ye.DISPLAY,c=mh;switch(t){case"any":l=Ye.ANY;break;case"display":break;case"print":l=Ye.PRINT;break;default:St(`getRenderingIntent - invalid intent: ${t}`)}const h=l&Ye.PRINT&&n instanceof sv?n:this.annotationStorage;switch(e){case Vn.DISABLE:l+=Ye.ANNOTATIONS_DISABLE;break;case Vn.ENABLE:break;case Vn.ENABLE_FORMS:l+=Ye.ANNOTATIONS_FORMS;break;case Vn.ENABLE_STORAGE:l+=Ye.ANNOTATIONS_STORAGE,c=h.serializable;break;default:St(`getRenderingIntent - invalid annotationMode: ${e}`)}s&&(l+=Ye.IS_EDITING),a&&(l+=Ye.OPLIST);const{ids:d,hash:p}=h.modifiedIds,m=[l,c.hash,p];return{renderingIntent:l,cacheKey:m.join("_"),annotationStorageSerializable:c,modifiedIds:d}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const n of this.#e.values())t.push(n._destroy());this.#e.clear(),this.#n.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),ho.cleanup(),this._networkStream?.cancelAllRequests(new ii("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,s)=>{ce(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=a=>{this._lastProgress={loaded:a.loaded,total:a.total}},s.onPull=()=>{this._fullReader.read().then(function({value:a,done:l}){if(l){s.close();return}ce(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{s.error(a)})},s.onCancel=a=>{this._fullReader.cancel(a),s.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("ReaderHeadersReady",async n=>{await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:a,contentLength:l}=this._fullReader;return(!s||!a)&&(this._lastProgress&&e.onProgress?.(this._lastProgress),this._fullReader.onProgress=c=>{e.onProgress?.({loaded:c.loaded,total:c.total})}),{isStreamingSupported:s,isRangeSupported:a,contentLength:l}}),t.on("GetRangeReader",(n,s)=>{ce(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const a=this._networkStream.getRangeReader(n.begin,n.end);if(!a){s.close();return}s.onPull=()=>{a.read().then(function({value:l,done:c}){if(c){s.close();return}ce(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{s.error(l)})},s.onCancel=l=>{a.cancel(l),s.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new sC(n,this))}),t.on("DocException",n=>{e._capability.reject(Ue(n))}),t.on("PasswordRequest",n=>{this.#r=Promise.withResolvers();try{if(!e.onPassword)throw Ue(n);const s=a=>{a instanceof Error?this.#r.reject(a):this.#r.resolve({password:a})};e.onPassword(s,n.code)}catch(s){this.#r.reject(s)}return this.#r.promise}),t.on("DataLoaded",n=>{e.onProgress?.({loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;this.#e.get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,s,a])=>{if(this.destroyed||this.commonObjs.has(n))return null;switch(s){case"Font":if("error"in a){const d=a.error;St(`Error during font loading: ${d}`),this.commonObjs.resolve(n,d);break}const l=this._params.pdfBug&&globalThis.FontInspector?.enabled?(d,p)=>globalThis.FontInspector.fontAdded(d,p):null,c=new d_(a,l);this.fontLoader.bind(c).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!c.fontExtraProperties&&c.data&&(c.data=null),this.commonObjs.resolve(n,c)});break;case"CopyLocalImage":const{imageRef:h}=a;ce(h,"The imageRef must be defined.");for(const d of this.#e.values())for(const[,p]of d.objs)if(p?.ref===h)return p.dataLen?(this.commonObjs.resolve(n,structuredClone(p)),p.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,a);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),t.on("obj",([n,s,a,l])=>{if(this.destroyed)return;const c=this.#e.get(s);if(!c.objs.has(n)){if(c._intentStates.size===0){l?.bitmap?.close();return}switch(a){case"Image":case"Pattern":c.objs.resolve(n,l);break;default:throw new Error(`Got unknown object type ${a}`)}}}),t.on("DocProgress",n=>{this.destroyed||e.onProgress?.({loaded:n.loaded,total:n.total})}),t.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const s=this[n.type];if(!s)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return s.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&St("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=this.#n.get(e);if(n)return n;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(a=>{if(this.destroyed)throw new Error("Transport destroyed");a.refStr&&this.#i.set(a.refStr,t);const l=new rC(e,a,this,this._params.pdfBug);return this.#e.set(e,l),l});return this.#n.set(e,s),s}getPageIndex(t){return gh(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#s("GetFieldObjects")}hasJSActions(){return this.#s("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#s("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#s("GetOptionalContentConfig").then(e=>new j_(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#t.get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(s=>({info:s[0],metadata:s[1]?new F_(s[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#e.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),ho.cleanup()}}cachedPageNumber(t){if(!gh(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#i.get(e)??null}}class aC{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this.#t;return t.form||t.canvas&&e?.size>0}}class Hs{#t=null;static#e=new WeakSet;constructor({callback:t,params:e,objs:n,commonObjs:s,annotationCanvasMap:a,operatorList:l,pageIndex:c,canvasFactory:h,filterFactory:d,useRequestAnimationFrame:p=!1,pdfBug:m=!1,pageColors:y=null,enableHWA:w=!1}){this.callback=t,this.params=e,this.objs=n,this.commonObjs=s,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=c,this.canvasFactory=h,this.filterFactory=d,this._pdfBug=m,this.pageColors=y,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=p===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new aC(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=w}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(Hs.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Hs.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:s,background:a}=this.params,l=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new $s(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:s,viewport:n,transparency:t,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),Hs.#e.delete(this._canvas),t||=new Al(`Rendering cancelled, page ${this._pageIndex+1}`,e),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Hs.#e.delete(this._canvas),this.callback())))}}const xv="5.4.54",Av="295fb3ec4";class Qe{#t=null;#e=null;#n;#i=null;#r=!1;#s=!1;#o=null;#a;#u=null;#c=null;static#d=null;static get _keyboardManager(){return _t(this,"_keyboardManager",new _o([[["Escape","mac+Escape"],Qe.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Qe.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Qe.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Qe.prototype._moveToPrevious],[["Home","mac+Home"],Qe.prototype._moveToBeginning],[["End","mac+End"],Qe.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#s=!1,this.#o=t):this.#s=!0,this.#c=t?._uiManager||e,this.#a=this.#c._eventBus,this.#n=t?.color?.toUpperCase()||this.#c?.highlightColors.values().next().value||"#FFFF98",Qe.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#o&&(t.ariaControls=`${this.#o.id}_colorpicker_dropdown`);const e=this.#c._signal;t.addEventListener("click",this.#f.bind(this),{signal:e}),t.addEventListener("keydown",this.#g.bind(this),{signal:e});const n=this.#e=document.createElement("span");return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=this.#n,t.append(n),t}renderMainDropdown(){const t=this.#i=this.#l();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#l(){const t=document.createElement("div"),e=this.#c._signal;t.addEventListener("contextmenu",Je,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#o&&(t.id=`${this.#o.id}_colorpicker_dropdown`);for(const[n,s]of this.#c.highlightColors){const a=document.createElement("button");a.tabIndex="0",a.role="option",a.setAttribute("data-color",s),a.title=n,a.setAttribute("data-l10n-id",Qe.#d[n]);const l=document.createElement("span");a.append(l),l.className="swatch",l.style.backgroundColor=s,a.ariaSelected=s===this.#n,a.addEventListener("click",this.#p.bind(this,s),{signal:e}),t.append(a)}return t.addEventListener("keydown",this.#g.bind(this),{signal:e}),t}#p(t,e){e.stopPropagation(),this.#a.dispatch("switchannotationeditorparams",{source:this,type:Rt.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#f(t);return}const e=t.target.getAttribute("data-color");e&&this.#p(e,t)}_moveToNext(t){if(!this.#m){this.#f(t);return}if(t.target===this.#t){this.#i.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#i?.firstChild||t.target===this.#t){this.#m&&this._hideDropdownFromKeyboard();return}this.#m||this.#f(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#m){this.#f(t);return}this.#i.firstChild?.focus()}_moveToEnd(t){if(!this.#m){this.#f(t);return}this.#i.lastChild?.focus()}#g(t){Qe._keyboardManager.exec(this,t)}#f(t){if(this.#m){this.hideDropdown();return}if(this.#r=t.detail===0,this.#u||(this.#u=new AbortController,window.addEventListener("pointerdown",this.#h.bind(this),{signal:this.#c.combinedSignal(this.#u)})),this.#t.ariaExpanded="true",this.#i){this.#i.classList.remove("hidden");return}const e=this.#i=this.#l();this.#t.append(e)}#h(t){this.#i?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#i?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#u?.abort(),this.#u=null}get#m(){return this.#i&&!this.#i.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#s){if(!this.#m){this.#o?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#r})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#i)return;const e=this.#c.highlightColors.values();for(const n of this.#i.children)n.ariaSelected=e.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#i?.remove(),this.#i=null}}class po{#t=null;#e=null;#n=null;static#i=null;constructor(t){this.#e=t,this.#n=t._uiManager,po.#i||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:e,colorValue:n}=this.#e,s=this.#t=document.createElement("input");return s.type="color",s.value=n||"#000000",s.className="basicColorPicker",s.tabIndex=0,s.setAttribute("data-l10n-id",po.#i[t]),s.addEventListener("input",()=>{this.#n.updateParams(e,s.value)},{signal:this.#n._signal}),s}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function ey(r){return Math.floor(Math.max(0,Math.min(1,r))*255).toString(16).padStart(2,"0")}function $r(r){return Math.max(0,Math.min(255,255*r))}class ny{static CMYK_G([t,e,n,s]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+s)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=$r(t),[t,t,t]}static G_HTML([t]){const e=ey(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map($r)}static RGB_HTML(t){return`#${t.map(ey).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,s]){return["RGB",1-Math.min(1,t+s),1-Math.min(1,n+s),1-Math.min(1,e+s)]}static CMYK_rgb([t,e,n,s]){return[$r(1-Math.min(1,t+s)),$r(1-Math.min(1,n+s)),$r(1-Math.min(1,e+s))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const s=1-t,a=1-e,l=1-n,c=Math.min(s,a,l);return["CMYK",s,a,l,c]}}class lC{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),n||(s.setAttribute("width",`${t}px`),s.setAttribute("height",`${e}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${t} ${e}`),s}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Ft("Abstract method `_createSVG` called.")}}class mo extends lC{_createSVG(t){return document.createElementNS(Jn,t)}}class wd{static setupStorage(t,e,n,s,a){const l=s.getValue(e,{value:null});switch(n.name){case"textarea":if(l.value!==null&&(t.textContent=l.value),a==="print")break;t.addEventListener("input",c=>{s.setValue(e,{value:c.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(l.value===n.attributes.xfaOn?t.setAttribute("checked",!0):l.value===n.attributes.xfaOff&&t.removeAttribute("checked"),a==="print")break;t.addEventListener("change",c=>{s.setValue(e,{value:c.target.checked?c.target.getAttribute("xfaOn"):c.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&t.setAttribute("value",l.value),a==="print")break;t.addEventListener("input",c=>{s.setValue(e,{value:c.target.value})})}break;case"select":if(l.value!==null){t.setAttribute("value",l.value);for(const c of n.children)c.attributes.value===l.value?c.attributes.selected=!0:c.attributes.hasOwnProperty("selected")&&delete c.attributes.selected}t.addEventListener("input",c=>{const h=c.target.options,d=h.selectedIndex===-1?"":h[h.selectedIndex].value;s.setValue(e,{value:d})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:s,linkService:a}){const{attributes:l}=e,c=t instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${s}`);for(const[h,d]of Object.entries(l))if(d!=null)switch(h){case"class":d.length&&t.setAttribute(h,d.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",d);break;case"style":Object.assign(t.style,d);break;case"textContent":t.textContent=d;break;default:(!c||h!=="href"&&h!=="newWindow")&&t.setAttribute(h,d)}c&&a.addLinkAttributes(t,l.href,l.newWindow),n&&l.dataId&&this.setupStorage(t,l.dataId,e,n)}static render(t){const e=t.annotationStorage,n=t.linkService,s=t.xfaHtml,a=t.intent||"display",l=document.createElement(s.name);s.attributes&&this.setAttributes({html:l,element:s,intent:a,linkService:n});const c=a!=="richText",h=t.div;if(h.append(l),t.viewport){const m=`matrix(${t.viewport.transform.join(",")})`;h.style.transform=m}c&&h.setAttribute("class","xfaLayer xfaFont");const d=[];if(s.children.length===0){if(s.value){const m=document.createTextNode(s.value);l.append(m),c&&fo.shouldBuildText(s.name)&&d.push(m)}return{textDivs:d}}const p=[[s,-1,l]];for(;p.length>0;){const[m,y,w]=p.at(-1);if(y+1===m.children.length){p.pop();continue}const A=m.children[++p.at(-1)[1]];if(A===null)continue;const{name:x}=A;if(x==="#text"){const b=document.createTextNode(A.value);d.push(b),w.append(b);continue}const E=A?.attributes?.xmlns?document.createElementNS(A.attributes.xmlns,x):document.createElement(x);if(w.append(E),A.attributes&&this.setAttributes({html:E,element:A,storage:e,intent:a,linkService:n}),A.children?.length>0)p.push([A,-1,E]);else if(A.value){const b=document.createTextNode(A.value);c&&fo.shouldBuildText(x)&&d.push(b),E.append(b)}}for(const m of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:d}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const cC=9,os=new WeakSet,uC=new Date().getTimezoneOffset()*60*1e3;class iy{static create(t){switch(t.data.annotationType){case ee.LINK:return new xd(t);case ee.TEXT:return new hC(t);case ee.WIDGET:switch(t.data.fieldType){case"Tx":return new dC(t);case"Btn":return t.data.radioButton?new Sv(t):t.data.checkBox?new pC(t):new mC(t);case"Ch":return new gC(t);case"Sig":return new fC(t)}return new cs(t);case ee.POPUP:return new vh(t);case ee.FREETEXT:return new bv(t);case ee.LINE:return new vC(t);case ee.SQUARE:return new wC(t);case ee.CIRCLE:return new xC(t);case ee.POLYLINE:return new Ev(t);case ee.CARET:return new SC(t);case ee.INK:return new Ad(t);case ee.POLYGON:return new AC(t);case ee.HIGHLIGHT:return new _v(t);case ee.UNDERLINE:return new bC(t);case ee.SQUIGGLY:return new EC(t);case ee.STRIKEOUT:return new _C(t);case ee.STAMP:return new Cv(t);case ee.FILEATTACHMENT:return new CC(t);default:return new re(t)}}}class re{#t=null;#e=!1;#n=null;constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:s=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(n)),s&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t?.str||e?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return re._hasPopupData(this.data)}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:e,popup:n}=t;e&&this.#i(e);let s=this.#n?.popup||this.popup;!s&&n?.text&&(this._createPopup(n),s=this.#n.popup),s&&(s.updateEdited(t),n?.deleted&&(s.remove(),this.#n=null,this.popup=null))}resetEdited(){this.#t&&(this.#i(this.#t.rect),this.#n?.popup.resetEdited(),this.#t=null)}#i(t){const{container:{style:e},data:{rect:n,rotation:s},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:l,pageX:c,pageY:h}}}}=this;n?.splice(0,4,...t),e.left=`${100*(t[0]-c)/a}%`,e.top=`${100*(l-t[3]+h)/l}%`,s===0?(e.width=`${100*(t[2]-t[0])/a}%`,e.height=`${100*(t[3]-t[1])/l}%`):this.setRotation(s)}_createContainer(t){const{data:e,parent:{page:n,viewport:s}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",e.id),!(this instanceof cs)&&!(this instanceof xd)&&(a.tabIndex=0);const{style:l}=a;if(l.zIndex=this.parent.zIndex++,e.alternativeText&&(a.title=e.alternativeText),e.noRotate&&a.classList.add("norotate"),!e.rect||this instanceof vh){const{rotation:x}=e;return!e.hasOwnCanvas&&x!==0&&this.setRotation(x,a),a}const{width:c,height:h}=this;if(!t&&e.borderStyle.width>0){l.borderWidth=`${e.borderStyle.width}px`;const x=e.borderStyle.horizontalCornerRadius,E=e.borderStyle.verticalCornerRadius;if(x>0||E>0){const C=`calc(${x}px * var(--total-scale-factor)) / calc(${E}px * var(--total-scale-factor))`;l.borderRadius=C}else if(this instanceof Sv){const C=`calc(${c}px * var(--total-scale-factor)) / calc(${h}px * var(--total-scale-factor))`;l.borderRadius=C}switch(e.borderStyle.style){case Is.SOLID:l.borderStyle="solid";break;case Is.DASHED:l.borderStyle="dashed";break;case Is.BEVELED:St("Unimplemented border style: beveled");break;case Is.INSET:St("Unimplemented border style: inset");break;case Is.UNDERLINE:l.borderBottomStyle="solid";break}const b=e.borderColor||null;b?(this.#e=!0,l.borderColor=ct.makeHexColor(b[0]|0,b[1]|0,b[2]|0)):l.borderWidth=0}const d=ct.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:p,pageHeight:m,pageX:y,pageY:w}=s.rawDims;l.left=`${100*(d[0]-y)/p}%`,l.top=`${100*(d[1]-w)/m}%`;const{rotation:A}=e;return e.hasOwnCanvas||A===0?(l.width=`${100*c/p}%`,l.height=`${100*h/m}%`):this.setRotation(A,a),a}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:s}=this.parent.viewport.rawDims;let{width:a,height:l}=this;t%180!==0&&([a,l]=[l,a]),e.style.width=`${100*a/n}%`,e.style.height=`${100*l/s}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,s)=>{const a=s.detail[e],l=a[0],c=a.slice(1);s.target.style[n]=ny[`${l}_HTML`](c),this.annotationStorage.setValue(this.data.id,{[n]:ny[`${l}_rgb`](c)})};return _t(this,"_commonActions",{display:e=>{const{display:n}=e.detail,s=n%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const s of Object.keys(e.detail))(t[s]||n[s])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[s,a]of Object.entries(e)){const l=n[s];if(l){const c={detail:{[s]:a},target:t};l(c),delete e[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,s,a]=this.data.rect.map(x=>Math.fround(x));if(t.length===8){const[x,E,b,C]=t.subarray(2,6);if(s===x&&a===E&&e===b&&n===C)return}const{style:l}=this.container;let c;if(this.#e){const{borderColor:x,borderWidth:E}=l;l.borderWidth=0,c=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${x}" stroke-width="${E}">`],this.container.classList.add("hasBorder")}const h=s-e,d=a-n,{svgFactory:p}=this,m=p.createElement("svg");m.classList.add("quadrilateralsContainer"),m.setAttribute("width",0),m.setAttribute("height",0),m.role="none";const y=p.createElement("defs");m.append(y);const w=p.createElement("clipPath"),A=`clippath_${this.data.id}`;w.setAttribute("id",A),w.setAttribute("clipPathUnits","objectBoundingBox"),y.append(w);for(let x=2,E=t.length;x<E;x+=8){const b=t[x],C=t[x+1],_=t[x+2],R=t[x+3],P=p.createElement("rect"),D=(_-e)/h,I=(a-C)/d,j=(b-_)/h,H=(C-R)/d;P.setAttribute("x",D),P.setAttribute("y",I),P.setAttribute("width",j),P.setAttribute("height",H),w.append(P),c?.push(`<rect vector-effect="non-scaling-stroke" x="${D}" y="${I}" width="${j}" height="${H}"/>`)}this.#e&&(c.push("</g></svg>')"),l.backgroundImage=c.join("")),this.container.append(m),this.container.style.clipPath=`url(#${A})`}_createPopup(t=null){const{data:e}=this;let n,s;t?(n={str:t.text},s=t.date):(n=e.contentsObj,s=e.modificationDate);const a=this.#n=new vh({data:{color:e.color,titleObj:e.titleObj,modificationDate:s,contentsObj:n,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]});this.parent.div.append(a.render())}get hasPopupElement(){return!!(this.#n||this.popup||this.data.popupRef)}render(){Ft("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const s=this._fieldObjects[t];if(s)for(const{page:a,id:l,exportValues:c}of s){if(a===-1||l===e)continue;const h=typeof c=="string"?c:null,d=document.querySelector(`[data-element-id="${l}"]`);if(d&&!os.has(d)){St(`_getElementsByName - element not allowed: ${l}`);continue}n.push({id:l,exportValue:h,domElement:d})}return n}for(const s of document.getElementsByName(t)){const{exportValue:a}=s,l=s.getAttribute("data-element-id");l!==e&&os.has(s)&&n.push({id:l,exportValue:a,domElement:s})}return n}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class xd extends re{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,n=document.createElement("a");n.setAttribute("data-element-id",t.id);let s=!1;return t.url?(e.addLinkAttributes(n,t.url,t.newWindow),s=!0):t.action?(this._bindNamedAction(n,t.action,t.overlaidText),s=!0):t.attachment?(this.#e(n,t.attachment,t.overlaidText,t.attachmentDest),s=!0):t.setOCGState?(this.#n(n,t.setOCGState,t.overlaidText),s=!0):t.dest?(this._bindLink(n,t.dest,t.overlaidText),s=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,t),s=!0),t.resetForm?(this._bindResetFormAction(n,t.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(n,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&this.container.append(n),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e,n=""){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#t(),n&&(t.title=n)}_bindNamedAction(t,e,n=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),n&&(t.title=n),this.#t()}#e(t,e,n="",s=null){t.href=this.linkService.getAnchorUrl(""),e.description?t.title=e.description:n&&(t.title=n),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,s),!1),this.#t()}#n(t,e,n=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),n&&(t.title=n),this.#t()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(e.actions)){const a=n.get(s);a&&(t[a]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:s}}),!1))}e.overlaidText&&(t.title=e.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,e){const n=t.onclick;if(n||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){St('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(t.onclick=()=>!1);return}t.onclick=()=>{n?.();const{fields:s,refs:a,include:l}=e,c=[];if(s.length!==0||a.length!==0){const p=new Set(a);for(const m of s){const y=this._fieldObjects[m]||[];for(const{id:w}of y)p.add(w)}for(const m of Object.values(this._fieldObjects))for(const y of m)p.has(y.id)===l&&c.push(y)}else for(const p of Object.values(this._fieldObjects))c.push(...p);const h=this.annotationStorage,d=[];for(const p of c){const{id:m}=p;switch(d.push(m),p.type){case"text":{const w=p.defaultValue||"";h.setValue(m,{value:w});break}case"checkbox":case"radiobutton":{const w=p.defaultValue===p.exportValues;h.setValue(m,{value:w});break}case"combobox":case"listbox":{const w=p.defaultValue||"";h.setValue(m,{value:w});break}default:continue}const y=document.querySelector(`[data-element-id="${m}"]`);if(y){if(!os.has(y)){St(`_bindResetFormAction - element not allowed: ${m}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}}),!1}}}class hC extends re{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class cs extends re{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return ye.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,s,a){n.includes("mouse")?t.addEventListener(n,l=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:a(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):t.addEventListener(n,l=>{if(n==="blur"){if(!e.focused||!l.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}a&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:a(l)}})})}_setEventListeners(t,e,n,s){for(const[a,l]of n)(l==="Action"||this.data.actions?.[l])&&((l==="Focus"||l==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,a,l,s),l==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):l==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":ct.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||cC,a=t.style;let l;const c=2,h=d=>Math.round(10*d)/10;if(this.data.multiLine){const d=Math.abs(this.data.rect[3]-this.data.rect[1]-c),p=Math.round(d/(ju*s))||1,m=d/p;l=Math.min(s,h(m/ju))}else{const d=Math.abs(this.data.rect[3]-this.data.rect[1]-c);l=Math.min(s,h(d/ju))}a.fontSize=`calc(${l}px * var(--total-scale-factor))`,a.color=ct.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(a.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class dC extends cs{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,s){const a=this.annotationStorage;for(const l of this._getElementsByName(t.name,t.id))l.domElement&&(l.domElement[e]=n),a.setValue(l.id,{[s]:n})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const s=t.getValue(e,{value:this.data.fieldValue});let a=s.value||"";const l=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;l&&a.length>l&&(a=a.slice(0,l));let c=s.formattedValue||this.data.textContent?.join(`
`)||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const h={userValue:a,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=c??a,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",c??a),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),os.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:d,datetimeType:p,timeStep:m}=this.data,y=!!p&&this.enableScripting;d&&(n.title=d),this._setRequired(n,this.data.required),l&&(n.maxLength=l),n.addEventListener("input",A=>{t.setValue(e,{value:A.target.value}),this.setPropertyOnSiblings(n,"value",A.target.value,"value"),h.formattedValue=null}),n.addEventListener("resetform",A=>{const x=this.data.defaultFieldValue??"";n.value=h.userValue=x,h.formattedValue=null});let w=A=>{const{formattedValue:x}=h;x!=null&&(A.target.value=x),A.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",x=>{if(h.focused)return;const{target:E}=x;if(y&&(E.type=p,m&&(E.step=m)),h.userValue){const b=h.userValue;if(y)if(p==="time"){const C=new Date(b),_=[C.getHours(),C.getMinutes(),C.getSeconds()];E.value=_.map(R=>R.toString().padStart(2,"0")).join(":")}else E.value=new Date(b-uC).toISOString().split(p==="date"?"T":".",1)[0];else E.value=b}h.lastCommittedValue=E.value,h.commitKey=1,this.data.actions?.Focus||(h.focused=!0)}),n.addEventListener("updatefromsandbox",x=>{this.showElementAndHideCanvas(x.target);const E={value(b){h.userValue=b.detail.value??"",y||t.setValue(e,{value:h.userValue.toString()}),b.target.value=h.userValue},formattedValue(b){const{formattedValue:C}=b.detail;h.formattedValue=C,C!=null&&b.target!==document.activeElement&&(b.target.value=C);const _={formattedValue:C};y&&(_.value=C),t.setValue(e,_)},selRange(b){b.target.setSelectionRange(...b.detail.selRange)},charLimit:b=>{const{charLimit:C}=b.detail,{target:_}=b;if(C===0){_.removeAttribute("maxLength");return}_.setAttribute("maxLength",C);let R=h.userValue;!R||R.length<=C||(R=R.slice(0,C),_.value=h.userValue=R,t.setValue(e,{value:R}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:R,willCommit:!0,commitKey:1,selStart:_.selectionStart,selEnd:_.selectionEnd}}))}};this._dispatchEventFromSandbox(E,x)}),n.addEventListener("keydown",x=>{h.commitKey=1;let E=-1;if(x.key==="Escape"?E=0:x.key==="Enter"&&!this.data.multiLine?E=2:x.key==="Tab"&&(h.commitKey=3),E===-1)return;const{value:b}=x.target;h.lastCommittedValue!==b&&(h.lastCommittedValue=b,h.userValue=b,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:b,willCommit:!0,commitKey:E,selStart:x.target.selectionStart,selEnd:x.target.selectionEnd}}))});const A=w;w=null,n.addEventListener("blur",x=>{if(!h.focused||!x.relatedTarget)return;this.data.actions?.Blur||(h.focused=!1);const{target:E}=x;let{value:b}=E;if(y){if(b&&p==="time"){const C=b.split(":").map(_=>parseInt(_,10));b=new Date(2e3,0,1,C[0],C[1],C[2]||0).valueOf(),E.step=""}else b=new Date(b).valueOf();E.type="text"}h.userValue=b,h.lastCommittedValue!==b&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:b,willCommit:!0,commitKey:h.commitKey,selStart:x.target.selectionStart,selEnd:x.target.selectionEnd}}),A(x)}),this.data.actions?.Keystroke&&n.addEventListener("beforeinput",x=>{h.lastCommittedValue=null;const{data:E,target:b}=x,{value:C,selectionStart:_,selectionEnd:R}=b;let P=_,D=R;switch(x.inputType){case"deleteWordBackward":{const I=C.substring(0,_).match(/\w*[^\w]*$/);I&&(P-=I[0].length);break}case"deleteWordForward":{const I=C.substring(_).match(/^[^\w]*\w*/);I&&(D+=I[0].length);break}case"deleteContentBackward":_===R&&(P-=1);break;case"deleteContentForward":_===R&&(D+=1);break}x.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:C,change:E||"",willCommit:!1,selStart:P,selEnd:D}})}),this._setEventListeners(n,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],x=>x.target.value)}if(w&&n.addEventListener("blur",w),this.data.comb){const x=(this.data.rect[2]-this.data.rect[0])/l;n.classList.add("comb"),n.style.letterSpacing=`calc(${x}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class fC extends cs{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class pC extends cs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let s=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",t.setValue(n,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const a=document.createElement("input");return os.add(a),a.setAttribute("data-element-id",n),a.disabled=e.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=e.fieldName,s&&a.setAttribute("checked",!0),a.setAttribute("exportValue",e.exportValue),a.tabIndex=0,a.addEventListener("change",l=>{const{name:c,checked:h}=l.target;for(const d of this._getElementsByName(c,n)){const p=h&&d.exportValue===e.exportValue;d.domElement&&(d.domElement.checked=p),t.setValue(d.id,{value:p})}t.setValue(n,{value:h})}),a.addEventListener("resetform",l=>{const c=e.defaultFieldValue||"Off";l.target.checked=c===e.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",l=>{const c={value(h){h.target.checked=h.detail.value!=="Off",t.setValue(n,{value:h.target.checked})}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class Sv extends cs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let s=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof s=="string"&&(s=s!==e.buttonValue,t.setValue(n,{value:s})),s)for(const l of this._getElementsByName(e.fieldName,n))t.setValue(l.id,{value:!1});const a=document.createElement("input");if(os.add(a),a.setAttribute("data-element-id",n),a.disabled=e.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=e.fieldName,s&&a.setAttribute("checked",!0),a.tabIndex=0,a.addEventListener("change",l=>{const{name:c,checked:h}=l.target;for(const d of this._getElementsByName(c,n))t.setValue(d.id,{value:!1});t.setValue(n,{value:h})}),a.addEventListener("resetform",l=>{const c=e.defaultFieldValue;l.target.checked=c!=null&&c===e.buttonValue}),this.enableScripting&&this.hasJSActions){const l=e.buttonValue;a.addEventListener("updatefromsandbox",c=>{const h={value:d=>{const p=l===d.detail.value;for(const m of this._getElementsByName(d.target.name)){const y=p&&m.id===n;m.domElement&&(m.domElement.checked=y),t.setValue(m.id,{value:y})}}};this._dispatchEventFromSandbox(h,c)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class mC extends xd{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class gC extends cs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),s=document.createElement("select");os.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=0;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",p=>{const m=this.data.defaultFieldValue;for(const y of s.options)y.selected=y.value===m});for(const p of this.data.options){const m=document.createElement("option");m.textContent=p.displayValue,m.value=p.exportValue,n.value.includes(p.exportValue)&&(m.setAttribute("selected",!0),a=!1),s.append(m)}let l=null;if(a){const p=document.createElement("option");p.value=" ",p.setAttribute("hidden",!0),p.setAttribute("selected",!0),s.prepend(p),l=()=>{p.remove(),s.removeEventListener("input",l),l=null},s.addEventListener("input",l)}const c=p=>{const m=p?"value":"textContent",{options:y,multiple:w}=s;return w?Array.prototype.filter.call(y,A=>A.selected).map(A=>A[m]):y.selectedIndex===-1?null:y[y.selectedIndex][m]};let h=c(!1);const d=p=>{const m=p.target.options;return Array.prototype.map.call(m,y=>({displayValue:y.textContent,exportValue:y.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",p=>{const m={value(y){l?.();const w=y.detail.value,A=new Set(Array.isArray(w)?w:[w]);for(const x of s.options)x.selected=A.has(x.value);t.setValue(e,{value:c(!0)}),h=c(!1)},multipleSelection(y){s.multiple=!0},remove(y){const w=s.options,A=y.detail.remove;w[A].selected=!1,s.remove(A),w.length>0&&Array.prototype.findIndex.call(w,E=>E.selected)===-1&&(w[0].selected=!0),t.setValue(e,{value:c(!0),items:d(y)}),h=c(!1)},clear(y){for(;s.length!==0;)s.remove(0);t.setValue(e,{value:null,items:[]}),h=c(!1)},insert(y){const{index:w,displayValue:A,exportValue:x}=y.detail.insert,E=s.children[w],b=document.createElement("option");b.textContent=A,b.value=x,E?E.before(b):s.append(b),t.setValue(e,{value:c(!0),items:d(y)}),h=c(!1)},items(y){const{items:w}=y.detail;for(;s.length!==0;)s.remove(0);for(const A of w){const{displayValue:x,exportValue:E}=A,b=document.createElement("option");b.textContent=x,b.value=E,s.append(b)}s.options.length>0&&(s.options[0].selected=!0),t.setValue(e,{value:c(!0),items:d(y)}),h=c(!1)},indices(y){const w=new Set(y.detail.indices);for(const A of y.target.options)A.selected=w.has(A.index);t.setValue(e,{value:c(!0)}),h=c(!1)},editable(y){y.target.disabled=!y.detail.editable}};this._dispatchEventFromSandbox(m,p)}),s.addEventListener("input",p=>{const m=c(!0),y=c(!1);t.setValue(e,{value:m}),p.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:h,change:y,changeEx:m,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],p=>p.target.value)):s.addEventListener("input",function(p){t.setValue(e,{value:c(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class vh extends re{constructor(t){const{data:e,elements:n}=t;super(t,{isRenderable:re._hasPopupData(e)}),this.elements=n,this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=new yC({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),n=[];for(const s of this.elements)s.popup=e,s.container.ariaHasPopup="dialog",n.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(s=>`${cd}${s}`).join(",")),this.container}}class yC{#t=this.#R.bind(this);#e=this.#L.bind(this);#n=this.#C.bind(this);#i=this.#T.bind(this);#r=null;#s=null;#o=null;#a=null;#u=null;#c=null;#d=null;#l=!1;#p=null;#g=null;#f=null;#h=null;#m=null;#w=null;#y=null;#A=!1;constructor({container:t,color:e,elements:n,titleObj:s,modificationDate:a,contentsObj:l,richText:c,parent:h,rect:d,parentRect:p,open:m}){this.#s=t,this.#w=s,this.#o=l,this.#m=c,this.#c=h,this.#r=e,this.#h=d,this.#d=p,this.#u=n,this.#a=dl.toDateObject(a),this.trigger=n.flatMap(y=>y.getElementsToTriggerPopup()),this.#S(),this.#s.hidden=!0,m&&this.#T()}#S(){if(this.#g)return;this.#g=new AbortController;const{signal:t}=this.#g;for(const e of this.trigger)e.addEventListener("click",this.#i,{signal:t}),e.addEventListener("mouseenter",this.#n,{signal:t}),e.addEventListener("mouseleave",this.#e,{signal:t}),e.classList.add("popupTriggerArea");for(const e of this.#u)e.container?.addEventListener("keydown",this.#t,{signal:t})}render(){if(this.#p)return;const t=this.#p=document.createElement("div");if(t.className="popup",this.#r){const s=t.style.outlineColor=ct.makeHexColor(...this.#r);t.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}const e=document.createElement("span");if(e.className="header",this.#w?.str){const s=document.createElement("span");s.className="title",e.append(s),{dir:s.dir,str:s.textContent}=this.#w}if(t.append(e),this.#a){const s=document.createElement("time");s.className="popupDate",s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#a.valueOf()})),s.dateTime=this.#a.toISOString(),e.append(s)}const n=this.#v;if(n)wd.render({xfaHtml:n,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const s=this._formatContents(this.#o);t.append(s)}this.#s.append(t)}get#v(){const t=this.#m,e=this.#o;return t?.str&&(!e?.str||e.str===t.str)&&this.#m.html||null}get#E(){return this.#v?.attributes?.style?.fontSize||0}get#k(){return this.#v?.attributes?.style?.color||null}#b(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},s={style:{color:this.#k,fontSize:this.#E?`calc(${this.#E}px * var(--total-scale-factor))`:""}};for(const a of t.split(`
`))e.push({name:"span",value:a,attributes:s});return n}_formatContents({str:t,dir:e}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=e;const s=t.split(/(?:\r\n?|\n)/);for(let a=0,l=s.length;a<l;++a){const c=s[a];n.append(document.createTextNode(c)),a<l-1&&n.append(document.createElement("br"))}return n}#R(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#l)&&this.#T()}updateEdited({rect:t,popup:e,deleted:n}){if(n||e?.deleted){this.remove();return}this.#S(),this.#y||={contentsObj:this.#o,richText:this.#m},t&&(this.#f=null),e&&(this.#m=this.#b(e.text),this.#a=dl.toDateObject(e.date),this.#o=null),this.#p?.remove(),this.#p=null}resetEdited(){this.#y&&({contentsObj:this.#o,richText:this.#m}=this.#y,this.#y=null,this.#p?.remove(),this.#p=null,this.#f=null)}remove(){this.#g?.abort(),this.#g=null,this.#p?.remove(),this.#p=null,this.#A=!1,this.#l=!1;for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#P(){if(this.#f!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:s,pageY:a}}}=this.#c;let l=!!this.#d,c=l?this.#d:this.#h;for(const A of this.#u)if(!c||ct.intersect(A.data.rect,c)!==null){c=A.data.rect,l=!0;break}const h=ct.normalizeRect([c[0],t[3]-c[1]+t[1],c[2],t[3]-c[3]+t[1]]),p=l?c[2]-c[0]+5:0,m=h[0]+p,y=h[1];this.#f=[100*(m-s)/e,100*(y-a)/n];const{style:w}=this.#s;w.left=`${this.#f[0]}%`,w.top=`${this.#f[1]}%`}#T(){this.#l=!this.#l,this.#l?(this.#C(),this.#s.addEventListener("click",this.#i),this.#s.addEventListener("keydown",this.#t)):(this.#L(),this.#s.removeEventListener("click",this.#i),this.#s.removeEventListener("keydown",this.#t))}#C(){this.#p||this.render(),this.isVisible?this.#l&&this.#s.classList.add("focused"):(this.#P(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#L(){this.#s.classList.remove("focused"),!(this.#l||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#A=this.isVisible,this.#A&&(this.#s.hidden=!0)}maybeShow(){this.#S(),this.#A&&(this.#p||this.#C(),this.#A=!1,this.#s.hidden=!1)}get isVisible(){return this.#s.hidden===!1}}class bv extends re{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=At.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class vC extends re{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:e,height:n}=this,s=this.svgFactory.create(e,n,!0),a=this.#t=this.svgFactory.createElement("svg:line");return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class wC extends re{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:e,height:n}=this,s=this.svgFactory.create(e,n,!0),a=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:rect");return l.setAttribute("x",a/2),l.setAttribute("y",a/2),l.setAttribute("width",e-a),l.setAttribute("height",n-a),l.setAttribute("stroke-width",a||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),s.append(l),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class xC extends re{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:e,height:n}=this,s=this.svgFactory.create(e,n,!0),a=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:ellipse");return l.setAttribute("cx",e/2),l.setAttribute("cy",n/2),l.setAttribute("rx",e/2-a/2),l.setAttribute("ry",n/2-a/2),l.setAttribute("stroke-width",a||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),s.append(l),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Ev extends re{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:n,popupRef:s},width:a,height:l}=this;if(!e)return this.container;const c=this.svgFactory.create(a,l,!0);let h=[];for(let p=0,m=e.length;p<m;p+=2){const y=e[p]-t[0],w=t[3]-e[p+1];h.push(`${y},${w}`)}h=h.join(" ");const d=this.#t=this.svgFactory.createElement(this.svgElementName);return d.setAttribute("points",h),d.setAttribute("stroke-width",n.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),c.append(d),this.container.append(c),!s&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class AC extends Ev{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class SC extends re{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Ad extends re{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?At.HIGHLIGHT:At.INK}#n(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:n,borderStyle:s,popupRef:a}}=this,{transform:l,width:c,height:h}=this.#n(e,t),d=this.svgFactory.create(c,h,!0),p=this.#t=this.svgFactory.createElement("svg:g");d.append(p),p.setAttribute("stroke-width",s.width||1),p.setAttribute("stroke-linecap","round"),p.setAttribute("stroke-linejoin","round"),p.setAttribute("stroke-miterlimit",10),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),p.setAttribute("transform",l);for(let m=0,y=n.length;m<y;m++){const w=this.svgFactory.createElement(this.svgElementName);this.#e.push(w),w.setAttribute("points",n[m].join(",")),p.append(w)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(d),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:n,rect:s}=t,a=this.#t;if(e>=0&&a.setAttribute("stroke-width",e||1),n)for(let l=0,c=this.#e.length;l<c;l++)this.#e[l].setAttribute("points",n[l].join(","));if(s){const{transform:l,width:c,height:h}=this.#n(this.data.rotation,s);a.parentElement.setAttribute("viewBox",`0 0 ${c} ${h}`),a.setAttribute("transform",l)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class _v extends re{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=At.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class bC extends re{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class EC extends re{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class _C extends re{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class Cv extends re{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=At.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class CC extends re{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let n;e.hasAppearance||e.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),n.addEventListener("dblclick",this.#e.bind(this)),this.#t=n;const{isMac:s}=ye.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(s?a.metaKey:a.ctrlKey)&&this.#e()}),!e.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),t.append(n),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}let Sd=class Tv{#t=null;#e=null;#n=new Map;#i=null;constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:s,page:a,viewport:l,structTreeLayer:c}){this.div=t,this.#t=e,this.#e=n,this.#i=c||null,this.page=a,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=s}hasEditableAnnotations(){return this.#n.size>0}async#r(t,e,n){const s=t.firstChild||t,a=s.id=`${cd}${e}`,l=await this.#i?.getAriaAttributes(a);if(l)for(const[c,h]of l)s.setAttribute(c,h);n?n.at(-1).container.after(t):(this.div.append(t),this.#t?.moveElementInDOM(this.div,t,s,!1))}async render(t){const{annotations:e}=t,n=this.div;Ri(n,this.viewport);const s=new Map,a={data:null,layer:n,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new mo,annotationStorage:t.annotationStorage||new dd,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const l of e){if(l.noHTML)continue;const c=l.annotationType===ee.POPUP;if(c){const p=s.get(l.id);if(!p)continue;a.elements=p}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;a.data=l;const h=iy.create(a);if(!h.isRenderable)continue;if(!c&&l.popupRef){const p=s.get(l.popupRef);p?p.push(h):s.set(l.popupRef,[h])}const d=h.render();l.hidden&&(d.style.visibility="hidden"),await this.#r(d,l.id,a.elements),h._isEditable&&(this.#n.set(h.data.id,h),this._annotationEditorUIManager?.renderAnnotationElement(h))}this.#s()}async addLinkAnnotations(t,e){const n={data:null,layer:this.div,linkService:e,svgFactory:new mo,parent:this};for(const s of t){s.borderStyle||=Tv._defaultBorderStyle,n.data=s;const a=iy.create(n);if(!a.isRenderable)continue;const l=a.render();await this.#r(l,s.id,null)}}update({viewport:t}){const e=this.div;this.viewport=t,Ri(e,{rotation:t.rotation}),this.#s(),e.hidden=!1}#s(){if(!this.#e)return;const t=this.div;for(const[e,n]of this.#e){const s=t.querySelector(`[data-annotation-id="${e}"]`);if(!s)continue;n.className="annotationContent";const{firstChild:a}=s;a?a.nodeName==="CANVAS"?a.replaceWith(n):a.classList.contains("annotationContent")?a.after(n):a.before(n):s.append(n);const l=this.#n.get(e);l&&(l._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(e,s.id,n),l._hasNoCanvas=!1):l.canvas=n)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(t){return this.#n.get(t)}static get _defaultBorderStyle(){return _t(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Is.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};const Za=/\r\n?|\n/g;class de extends mt{#t;#e="";#n=`${this.id}-editor`;#i=null;#r;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=de.prototype,e=a=>a.isEmpty(),n=si.TRANSLATE_SMALL,s=si.TRANSLATE_BIG;return _t(this,"_keyboardManager",new _o([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-n,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[n,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[s,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-n],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,n],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,s],checker:e}]]))}static _type="freetext";static _editorType=At.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.#t=t.color||de._defaultColor||mt._defaultLineColor,this.#r=t.fontSize||de._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(t,e){mt.initialize(t,e);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case Rt.FREETEXT_SIZE:de._defaultFontSize=e;break;case Rt.FREETEXT_COLOR:de._defaultColor=e;break}}updateParams(t,e){switch(t){case Rt.FREETEXT_SIZE:this.#s(e);break;case Rt.FREETEXT_COLOR:this.#o(e);break}}static get defaultPropertiesToUpdate(){return[[Rt.FREETEXT_SIZE,de._defaultFontSize],[Rt.FREETEXT_COLOR,de._defaultColor||mt._defaultLineColor]]}get propertiesToUpdate(){return[[Rt.FREETEXT_SIZE,this.#r],[Rt.FREETEXT_COLOR,this.#t]]}get toolbarButtons(){return this._colorPicker||=new po(this),[["colorPicker",this._colorPicker]]}get colorType(){return Rt.FREETEXT_COLOR}get colorValue(){return this.#t}#s(t){const e=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--total-scale-factor))`,this.translate(0,-(s-this.#r)*this.parentScale),this.#r=s,this.#u()},n=this.#r;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Rt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#o(t){const e=s=>{this.#t=this.editorDiv.style.color=s,this._colorPicker?.update(s)},n=this.#t;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Rt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-de._internalPadding*t,-(de._internalPadding+this.#r)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const t=this._uiManager.combinedSignal(this.#i);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#n),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#a(){const t=[];this.editorDiv.normalize();let e=null;for(const n of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&n.nodeName==="BR"||(t.push(de.#c(n)),e=n);return t.join(`
`)}#u(){const[t,e]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:s,div:a}=this,l=a.style.display,c=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",s.div.append(this.div),n=a.getBoundingClientRect(),a.remove(),a.style.display=l,a.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=n.width/t,this.height=n.height/e):(this.width=n.height/t,this.height=n.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#e,e=this.#e=this.#a().trimEnd();if(t===e)return;const n=s=>{if(this.#e=s,!s){this.remove();return}this.#d(),this._uiManager.rebuild(this),this.#u()};this.addCommands({cmd:()=>{n(e)},undo:()=>{n(t)},mustExec:!1}),this.#u()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){de._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#n),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${this.#r}px * var(--total-scale-factor))`,n.color=this.#t,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[s,a]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[c,h]=this.getInitialTranslation();[c,h]=this.pageTranslationToScreen(c,h);const[d,p]=this.pageDimensions,[m,y]=this.pageTranslation;let w,A;switch(this.rotation){case 0:w=t+(l[0]-m)/d,A=e+this.height-(l[1]-y)/p;break;case 90:w=t+(l[0]-m)/d,A=e-(l[1]-y)/p,[c,h]=[h,-c];break;case 180:w=t-this.width+(l[0]-m)/d,A=e-(l[1]-y)/p,[c,h]=[-c,-h];break;case 270:w=t+(l[0]-m-this.height*p)/d,A=e+(l[1]-y-this.width*d)/p,[c,h]=[-h,c];break}this.setAt(w*s,A*a,c,h)}else this._moveAfterPaste(t,e);this.#d(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Za,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:n}=e;if(n.length===1&&n[0]==="text/plain")return;t.preventDefault();const s=de.#p(e.getData("text")||"").replaceAll(Za,`
`);if(!s)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const l=a.getRangeAt(0);if(!s.includes(`
`)){l.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:c,startOffset:h}=l,d=[],p=[];if(c.nodeType===Node.TEXT_NODE){const w=c.parentElement;if(p.push(c.nodeValue.slice(h).replaceAll(Za,"")),w!==this.editorDiv){let A=d;for(const x of this.editorDiv.childNodes){if(x===w){A=p;continue}A.push(de.#c(x))}}d.push(c.nodeValue.slice(0,h).replaceAll(Za,""))}else if(c===this.editorDiv){let w=d,A=0;for(const x of this.editorDiv.childNodes)A++===h&&(w=p),w.push(de.#c(x))}this.#e=`${d.join(`
`)}${s}${p.join(`
`)}`,this.#d();const m=new Range;let y=Math.sumPrecise(d.map(w=>w.length));for(const{firstChild:w}of this.editorDiv.childNodes)if(w.nodeType===Node.TEXT_NODE){const A=w.nodeValue.length;if(y<=A){m.setStart(w,y),m.setEnd(w,y);break}y-=A}a.removeAllRanges(),a.addRange(m)}#d(){if(this.editorDiv.replaceChildren(),!!this.#e)for(const t of this.#e.split(`
`)){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#l(){return this.#e.replaceAll(""," ")}static#p(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}static async deserialize(t,e,n){let s=null;if(t instanceof bv){const{data:{defaultAppearanceData:{fontSize:l,fontColor:c},rect:h,rotation:d,id:p,popupRef:m,contentsObj:y},textContent:w,textPosition:A,parent:{page:{pageNumber:x}}}=t;if(!w||w.length===0)return null;s=t={annotationType:At.FREETEXT,color:Array.from(c),fontSize:l,value:w.join(`
`),position:A,pageIndex:x-1,rect:h.slice(0),rotation:d,annotationElementId:p,id:p,deleted:!1,popupRef:m,comment:y?.str||null}}const a=await super.deserialize(t,e,n);return a.#r=t.fontSize,a.#t=ct.makeHexColor(...t.color),a.#e=de.#p(t.value),a._initialData=s,t.comment&&a.setCommentData(t.comment),a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=de._internalPadding*this.parentScale,n=this.getRect(e,e),s=mt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#t),a={annotationType:At.FREETEXT,color:s,fontSize:this.#r,value:this.#l(),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(a),t?(a.isCopy=!0,a):this.annotationElementId&&!this.#g(a)?null:(a.id=this.annotationElementId,a)}#g(t){const{value:e,fontSize:n,color:s,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==e||t.fontSize!==n||t.color.some((l,c)=>l!==s[c])||t.pageIndex!==a}renderAnnotationElement(t){const e=super.renderAnnotationElement(t),{style:n}=e;n.fontSize=`calc(${this.#r}px * var(--total-scale-factor))`,n.color=this.#t,e.replaceChildren();for(const l of this.#e.split(`
`)){const c=document.createElement("div");c.append(l?document.createTextNode(l):document.createElement("br")),e.append(c)}const s=de._internalPadding*this.parentScale,a={rect:this.getRect(s,s)};return a.popup=this.hasEditedComment?this.comment:{text:this.#e},t.updateEdited(a),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class st{static PRECISION=1e-4;toSVGPath(){Ft("Abstract method `toSVGPath` must be implemented.")}get box(){Ft("Abstract getter `box` must be implemented.")}serialize(t,e){Ft("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,s,a,l){l||=new Float32Array(t.length);for(let c=0,h=t.length;c<h;c+=2)l[c]=e+t[c]*s,l[c+1]=n+t[c+1]*a;return l}static _rescaleAndSwap(t,e,n,s,a,l){l||=new Float32Array(t.length);for(let c=0,h=t.length;c<h;c+=2)l[c]=e+t[c+1]*s,l[c+1]=n+t[c]*a;return l}static _translate(t,e,n,s){s||=new Float32Array(t.length);for(let a=0,l=t.length;a<l;a+=2)s[a]=e+t[a],s[a+1]=n+t[a+1];return s}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,n,s,a){switch(a){case 90:return[1-e/n,t/s];case 180:return[1-t/n,1-e/s];case 270:return[e/n,1-t/s];default:return[t/n,e/s]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,s,a,l){return[(t+5*n)/6,(e+5*s)/6,(5*n+a)/6,(5*s+l)/6,(n+a)/2,(s+l)/2]}}class Ji{#t;#e=[];#n;#i;#r=[];#s=new Float32Array(18);#o;#a;#u;#c;#d;#l;#p=[];static#g=8;static#f=2;static#h=Ji.#g+Ji.#f;constructor({x:t,y:e},n,s,a,l,c=0){this.#t=n,this.#l=a*s,this.#i=l,this.#s.set([NaN,NaN,NaN,NaN,t,e],6),this.#n=c,this.#c=Ji.#g*s,this.#u=Ji.#h*s,this.#d=s,this.#p.push(t,e)}isEmpty(){return isNaN(this.#s[8])}#m(){const t=this.#s.subarray(4,6),e=this.#s.subarray(16,18),[n,s,a,l]=this.#t;return[(this.#o+(t[0]-e[0])/2-n)/a,(this.#a+(t[1]-e[1])/2-s)/l,(this.#o+(e[0]-t[0])/2-n)/a,(this.#a+(e[1]-t[1])/2-s)/l]}add({x:t,y:e}){this.#o=t,this.#a=e;const[n,s,a,l]=this.#t;let[c,h,d,p]=this.#s.subarray(8,12);const m=t-d,y=e-p,w=Math.hypot(m,y);if(w<this.#u)return!1;const A=w-this.#c,x=A/w,E=x*m,b=x*y;let C=c,_=h;c=d,h=p,d+=E,p+=b,this.#p?.push(t,e);const R=-b/A,P=E/A,D=R*this.#l,I=P*this.#l;return this.#s.set(this.#s.subarray(2,8),0),this.#s.set([d+D,p+I],4),this.#s.set(this.#s.subarray(14,18),12),this.#s.set([d-D,p-I],16),isNaN(this.#s[6])?(this.#r.length===0&&(this.#s.set([c+D,h+I],2),this.#r.push(NaN,NaN,NaN,NaN,(c+D-n)/a,(h+I-s)/l),this.#s.set([c-D,h-I],14),this.#e.push(NaN,NaN,NaN,NaN,(c-D-n)/a,(h-I-s)/l)),this.#s.set([C,_,c,h,d,p],6),!this.isEmpty()):(this.#s.set([C,_,c,h,d,p],6),Math.abs(Math.atan2(_-h,C-c)-Math.atan2(b,E))<Math.PI/2?([c,h,d,p]=this.#s.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((c+d)/2-n)/a,((h+p)/2-s)/l),[c,h,C,_]=this.#s.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((C+c)/2-n)/a,((_+h)/2-s)/l),!0):([C,_,c,h,d,p]=this.#s.subarray(0,6),this.#r.push(((C+5*c)/6-n)/a,((_+5*h)/6-s)/l,((5*c+d)/6-n)/a,((5*h+p)/6-s)/l,((c+d)/2-n)/a,((h+p)/2-s)/l),[d,p,c,h,C,_]=this.#s.subarray(12,18),this.#e.push(((C+5*c)/6-n)/a,((_+5*h)/6-s)/l,((5*c+d)/6-n)/a,((5*h+p)/6-s)/l,((c+d)/2-n)/a,((h+p)/2-s)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#r,e=this.#e;if(isNaN(this.#s[6])&&!this.isEmpty())return this.#w();const n=[];n.push(`M${t[4]} ${t[5]}`);for(let s=6;s<t.length;s+=6)isNaN(t[s])?n.push(`L${t[s+4]} ${t[s+5]}`):n.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);this.#A(n);for(let s=e.length-6;s>=6;s-=6)isNaN(e[s])?n.push(`L${e[s+4]} ${e[s+5]}`):n.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);return this.#y(n),n.join(" ")}#w(){const[t,e,n,s]=this.#t,[a,l,c,h]=this.#m();return`M${(this.#s[2]-t)/n} ${(this.#s[3]-e)/s} L${(this.#s[4]-t)/n} ${(this.#s[5]-e)/s} L${a} ${l} L${c} ${h} L${(this.#s[16]-t)/n} ${(this.#s[17]-e)/s} L${(this.#s[14]-t)/n} ${(this.#s[15]-e)/s} Z`}#y(t){const e=this.#e;t.push(`L${e[4]} ${e[5]} Z`)}#A(t){const[e,n,s,a]=this.#t,l=this.#s.subarray(4,6),c=this.#s.subarray(16,18),[h,d,p,m]=this.#m();t.push(`L${(l[0]-e)/s} ${(l[1]-n)/a} L${h} ${d} L${p} ${m} L${(c[0]-e)/s} ${(c[1]-n)/a}`)}newFreeDrawOutline(t,e,n,s,a,l){return new Pv(t,e,n,s,a,l)}getOutlines(){const t=this.#r,e=this.#e,n=this.#s,[s,a,l,c]=this.#t,h=new Float32Array((this.#p?.length??0)+2);for(let m=0,y=h.length-2;m<y;m+=2)h[m]=(this.#p[m]-s)/l,h[m+1]=(this.#p[m+1]-a)/c;if(h[h.length-2]=(this.#o-s)/l,h[h.length-1]=(this.#a-a)/c,isNaN(n[6])&&!this.isEmpty())return this.#S(h);const d=new Float32Array(this.#r.length+24+this.#e.length);let p=t.length;for(let m=0;m<p;m+=2){if(isNaN(t[m])){d[m]=d[m+1]=NaN;continue}d[m]=t[m],d[m+1]=t[m+1]}p=this.#E(d,p);for(let m=e.length-6;m>=6;m-=6)for(let y=0;y<6;y+=2){if(isNaN(e[m+y])){d[p]=d[p+1]=NaN,p+=2;continue}d[p]=e[m+y],d[p+1]=e[m+y+1],p+=2}return this.#v(d,p),this.newFreeDrawOutline(d,h,this.#t,this.#d,this.#n,this.#i)}#S(t){const e=this.#s,[n,s,a,l]=this.#t,[c,h,d,p]=this.#m(),m=new Float32Array(36);return m.set([NaN,NaN,NaN,NaN,(e[2]-n)/a,(e[3]-s)/l,NaN,NaN,NaN,NaN,(e[4]-n)/a,(e[5]-s)/l,NaN,NaN,NaN,NaN,c,h,NaN,NaN,NaN,NaN,d,p,NaN,NaN,NaN,NaN,(e[16]-n)/a,(e[17]-s)/l,NaN,NaN,NaN,NaN,(e[14]-n)/a,(e[15]-s)/l],0),this.newFreeDrawOutline(m,t,this.#t,this.#d,this.#n,this.#i)}#v(t,e){const n=this.#e;return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6}#E(t,e){const n=this.#s.subarray(4,6),s=this.#s.subarray(16,18),[a,l,c,h]=this.#t,[d,p,m,y]=this.#m();return t.set([NaN,NaN,NaN,NaN,(n[0]-a)/c,(n[1]-l)/h,NaN,NaN,NaN,NaN,d,p,NaN,NaN,NaN,NaN,m,y,NaN,NaN,NaN,NaN,(s[0]-a)/c,(s[1]-l)/h],e),e+=24}}class Pv extends st{#t;#e=new Float32Array(4);#n;#i;#r;#s;#o;constructor(t,e,n,s,a,l){super(),this.#o=t,this.#r=e,this.#t=n,this.#s=s,this.#n=a,this.#i=l,this.lastPoint=[NaN,NaN],this.#a(l);const[c,h,d,p]=this.#e;for(let m=0,y=t.length;m<y;m+=2)t[m]=(t[m]-c)/d,t[m+1]=(t[m+1]-h)/p;for(let m=0,y=e.length;m<y;m+=2)e[m]=(e[m]-c)/d,e[m+1]=(e[m+1]-h)/p}toSVGPath(){const t=[`M${this.#o[4]} ${this.#o[5]}`];for(let e=6,n=this.#o.length;e<n;e+=6){if(isNaN(this.#o[e])){t.push(`L${this.#o[e+4]} ${this.#o[e+5]}`);continue}t.push(`C${this.#o[e]} ${this.#o[e+1]} ${this.#o[e+2]} ${this.#o[e+3]} ${this.#o[e+4]} ${this.#o[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,n,s],a){const l=n-t,c=s-e;let h,d;switch(a){case 0:h=st._rescale(this.#o,t,s,l,-c),d=st._rescale(this.#r,t,s,l,-c);break;case 90:h=st._rescaleAndSwap(this.#o,t,e,l,c),d=st._rescaleAndSwap(this.#r,t,e,l,c);break;case 180:h=st._rescale(this.#o,n,e,-l,c),d=st._rescale(this.#r,n,e,-l,c);break;case 270:h=st._rescaleAndSwap(this.#o,n,s,-l,-c),d=st._rescaleAndSwap(this.#r,n,s,-l,-c);break}return{outline:Array.from(h),points:[Array.from(d)]}}#a(t){const e=this.#o;let n=e[4],s=e[5];const a=[n,s,n,s];let l=n,c=s;const h=t?Math.max:Math.min;for(let p=6,m=e.length;p<m;p+=6){const y=e[p+4],w=e[p+5];if(isNaN(e[p]))ct.pointBoundingBox(y,w,a),c<w?(l=y,c=w):c===w&&(l=h(l,y));else{const A=[1/0,1/0,-1/0,-1/0];ct.bezierBoundingBox(n,s,...e.slice(p,p+6),A),ct.rectBoundingBox(...A,a),c<A[3]?(l=A[2],c=A[3]):c===A[3]&&(l=h(l,A[2]))}n=y,s=w}const d=this.#e;d[0]=a[0]-this.#n,d[1]=a[1]-this.#n,d[2]=a[2]-a[0]+2*this.#n,d[3]=a[3]-a[1]+2*this.#n,this.lastPoint=[l,c]}get box(){return this.#e}newOutliner(t,e,n,s,a,l=0){return new Ji(t,e,n,s,a,l)}getNewOutline(t,e){const[n,s,a,l]=this.#e,[c,h,d,p]=this.#t,m=a*d,y=l*p,w=n*d+c,A=s*p+h,x=this.newOutliner({x:this.#r[0]*m+w,y:this.#r[1]*y+A},this.#t,this.#s,t,this.#i,e??this.#n);for(let E=2;E<this.#r.length;E+=2)x.add({x:this.#r[E]*m+w,y:this.#r[E+1]*y+A});return x.getOutlines()}}class wh{#t;#e;#n=[];#i=[];constructor(t,e=0,n=0,s=!0){const a=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x:w,y:A,width:x,height:E}of t){const b=Math.floor((w-e)/l)*l,C=Math.ceil((w+x+e)/l)*l,_=Math.floor((A-e)/l)*l,R=Math.ceil((A+E+e)/l)*l,P=[b,_,R,!0],D=[C,_,R,!1];this.#n.push(P,D),ct.rectBoundingBox(b,_,C,R,a)}const c=a[2]-a[0]+2*n,h=a[3]-a[1]+2*n,d=a[0]-n,p=a[1]-n,m=this.#n.at(s?-1:-2),y=[m[0],m[2]];for(const w of this.#n){const[A,x,E]=w;w[0]=(A-d)/c,w[1]=(x-p)/h,w[2]=(E-p)/h}this.#t=new Float32Array([d,p,c,h]),this.#e=y}getOutlines(){this.#n.sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of this.#n)e[3]?(t.push(...this.#u(e)),this.#o(e)):(this.#a(e),t.push(...this.#u(e)));return this.#r(t)}#r(t){const e=[],n=new Set;for(const l of t){const[c,h,d]=l;e.push([c,h,l],[c,d,l])}e.sort((l,c)=>l[1]-c[1]||l[0]-c[0]);for(let l=0,c=e.length;l<c;l+=2){const h=e[l][2],d=e[l+1][2];h.push(d),d.push(h),n.add(h),n.add(d)}const s=[];let a;for(;n.size>0;){const l=n.values().next().value;let[c,h,d,p,m]=l;n.delete(l);let y=c,w=h;for(a=[c,d],s.push(a);;){let A;if(n.has(p))A=p;else if(n.has(m))A=m;else break;n.delete(A),[c,h,d,p,m]=A,y!==c&&(a.push(y,w,c,w===h?h:d),y=c),w=w===h?d:h}a.push(y,w)}return new TC(s,this.#t,this.#e)}#s(t){const e=this.#i;let n=0,s=e.length-1;for(;n<=s;){const a=n+s>>1,l=e[a][0];if(l===t)return a;l<t?n=a+1:s=a-1}return s+1}#o([,t,e]){const n=this.#s(t);this.#i.splice(n,0,[t,e])}#a([,t,e]){const n=this.#s(t);for(let s=n;s<this.#i.length;s++){const[a,l]=this.#i[s];if(a!==t)break;if(a===t&&l===e){this.#i.splice(s,1);return}}for(let s=n-1;s>=0;s--){const[a,l]=this.#i[s];if(a!==t)break;if(a===t&&l===e){this.#i.splice(s,1);return}}}#u(t){const[e,n,s]=t,a=[[e,n,s]],l=this.#s(s);for(let c=0;c<l;c++){const[h,d]=this.#i[c];for(let p=0,m=a.length;p<m;p++){const[,y,w]=a[p];if(!(d<=y||w<=h)){if(y>=h){if(w>d)a[p][1]=d;else{if(m===1)return[];a.splice(p,1),p--,m--}continue}a[p][2]=h,w>d&&a.push([e,d,w])}}}return a}}class TC extends st{#t;#e;constructor(t,e,n){super(),this.#e=t,this.#t=e,this.lastPoint=n}toSVGPath(){const t=[];for(const e of this.#e){let[n,s]=e;t.push(`M${n} ${s}`);for(let a=2;a<e.length;a+=2){const l=e[a],c=e[a+1];l===n?(t.push(`V${c}`),s=c):c===s&&(t.push(`H${l}`),n=l)}t.push("Z")}return t.join(" ")}serialize([t,e,n,s],a){const l=[],c=n-t,h=s-e;for(const d of this.#e){const p=new Array(d.length);for(let m=0;m<d.length;m+=2)p[m]=t+d[m]*c,p[m+1]=s-d[m+1]*h;l.push(p)}return l}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class xh extends Ji{newFreeDrawOutline(t,e,n,s,a,l){return new PC(t,e,n,s,a,l)}}class PC extends Pv{newOutliner(t,e,n,s,a,l=0){return new xh(t,e,n,s,a,l)}}class ne extends mt{#t=null;#e=0;#n;#i=null;#r=null;#s=null;#o=null;#a=0;#u=null;#c=null;#d=null;#l=!1;#p=null;#g;#f=null;#h="";#m;#w="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=At.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=ne.prototype;return _t(this,"_keyboardManager",new _o([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||ne._defaultColor,this.#m=t.thickness||ne._defaultThickness,this.#g=t.opacity||ne._defaultOpacity,this.#n=t.boxes||null,this.#w=t.methodOfCreation||"",this.#h=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#l=!0,this.#A(t),this.#b()):this.#n&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#o=t.focusNode,this.#a=t.focusOffset,this.#y(),this.#b(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#l?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#m,methodOfCreation:this.#w}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}get commentColor(){return this.color}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#y(){const t=new wh(this.#n,.001);this.#c=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#c.box;const e=new wh(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#s=e.getOutlines();const{lastPoint:n}=this.#s;this.#p=[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height]}#A({highlightOutlines:t,highlightId:e,clipPathId:n}){this.#c=t;const s=1.5;if(this.#s=t.getNewOutline(this.#m/2+s,.0025),e>=0)this.#d=e,this.#i=n,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#f=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},!0);else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:ne.#R(this.#c.box,(p-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#f,{bbox:ne.#R(this.#s.box,p),path:{d:this.#s.toSVGPath()}})}const[a,l,c,h]=t.box;switch(this.rotation){case 0:this.x=a,this.y=l,this.width=c,this.height=h;break;case 90:{const[p,m]=this.parentDimensions;this.x=l,this.y=1-a,this.width=c*m/p,this.height=h*p/m;break}case 180:this.x=1-a,this.y=1-l,this.width=c,this.height=h;break;case 270:{const[p,m]=this.parentDimensions;this.x=1-l,this.y=a,this.width=c*m/p,this.height=h*p/m;break}}const{lastPoint:d}=this.#s;this.#p=[(d[0]-a)/c,(d[1]-l)/h]}static initialize(t,e){mt.initialize(t,e),ne._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case Rt.HIGHLIGHT_COLOR:ne._defaultColor=e;break;case Rt.HIGHLIGHT_THICKNESS:ne._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#p}updateParams(t,e){switch(t){case Rt.HIGHLIGHT_COLOR:this.#S(e);break;case Rt.HIGHLIGHT_THICKNESS:this.#v(e);break}}static get defaultPropertiesToUpdate(){return[[Rt.HIGHLIGHT_COLOR,ne._defaultColor],[Rt.HIGHLIGHT_THICKNESS,ne._defaultThickness]]}get propertiesToUpdate(){return[[Rt.HIGHLIGHT_COLOR,this.color||ne._defaultColor],[Rt.HIGHLIGHT_THICKNESS,this.#m||ne._defaultThickness],[Rt.HIGHLIGHT_FREE,this.#l]]}#S(t){const e=(a,l)=>{this.color=a,this.#g=l,this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:a,"fill-opacity":l}}),this.#r?.updateColor(a)},n=this.color,s=this.#g;this.addCommands({cmd:e.bind(this,t,ne._defaultOpacity),undo:e.bind(this,n,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Rt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#v(t){const e=this.#m,n=s=>{this.#m=s,this.#E(s)};this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Rt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#r=new Qe({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#C())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#C())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#k(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#b(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#k():t&&(this.#b(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#E(t){if(!this.#l)return;this.#A({highlightOutlines:this.#c.getNewOutline(t/2)}),this.fixAndSetPosition();const[e,n]=this.parentDimensions;this.setDims(this.width*e,this.height*n)}#k(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#f),this.#f=null)}#b(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#i}=t.drawLayer.draw({bbox:this.#c.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.#g},rootClass:{highlight:!0,free:this.#l},path:{d:this.#c.toSVGPath()}},!1,!0),this.#f=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#l},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},this.#l),this.#u&&(this.#u.style.clipPath=this.#i))}static#R([t,e,n,s],a){switch(a){case 90:return[1-e-s,t,s,n];case 180:return[1-t-n,1-e-s,n,s];case 270:return[e,1-t-n,s,n]}return[t,e,n,s]}rotate(t){const{drawLayer:e}=this.parent;let n;this.#l?(t=(t-this.rotation+360)%360,n=ne.#R(this.#c.box,t)):n=ne.#R([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#d,{bbox:n,root:{"data-main-rotation":t}}),e.updateProperties(this.#f,{bbox:ne.#R(this.#s.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#h&&(t.setAttribute("aria-label",this.#h),t.setAttribute("role","mark")),this.#l?t.classList.add("free"):this.div.addEventListener("keydown",this.#P.bind(this),{signal:this._uiManager._signal});const e=this.#u=document.createElement("div");t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#i;const[n,s]=this.parentDimensions;return this.setDims(this.width*n,this.height*s),nv(this,this.#u,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#f,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#f,{rootClass:{hovered:!1}})}#P(t){ne._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#T(!0);break;case 1:case 3:this.#T(!1);break}}#T(t){if(!this.#t)return;const e=window.getSelection();t?e.setPosition(this.#t,this.#e):e.setPosition(this.#o,this.#a)}select(){super.select(),this.#f&&this.parent?.drawLayer.updateProperties(this.#f,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#f&&(this.parent?.drawLayer.updateProperties(this.#f,{rootClass:{selected:!1}}),this.#l||this.#T(!1))}get _mustFixPosition(){return!this.#l}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#f,{rootClass:{hidden:!t}}))}#C(){return this.#l?this.rotation:0}#L(){if(this.#l)return null;const[t,e]=this.pageDimensions,[n,s]=this.pageTranslation,a=this.#n,l=new Float32Array(a.length*8);let c=0;for(const{x:h,y:d,width:p,height:m}of a){const y=h*t+n,w=(1-d)*e+s;l[c]=l[c+4]=y,l[c+1]=l[c+3]=w,l[c+2]=l[c+6]=y+p*t,l[c+5]=l[c+7]=w-m*e,c+=8}return l}#O(t){return this.#c.serialize(t,this.#C())}static startHighlighting(t,e,{target:n,x:s,y:a}){const{x:l,y:c,width:h,height:d}=n.getBoundingClientRect(),p=new AbortController,m=t.combinedSignal(p),y=w=>{p.abort(),this.#z(t,w)};window.addEventListener("blur",y,{signal:m}),window.addEventListener("pointerup",y,{signal:m}),window.addEventListener("pointerdown",se,{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",Je,{signal:m}),n.addEventListener("pointermove",this.#D.bind(this,t),{signal:m}),this._freeHighlight=new xh({x:s,y:a},[l,c,h,d],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#D(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#z(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,e,n){let s=null;if(t instanceof _v){const{data:{quadPoints:A,rect:x,rotation:E,id:b,color:C,opacity:_,popupRef:R,contentsObj:P},parent:{page:{pageNumber:D}}}=t;s=t={annotationType:At.HIGHLIGHT,color:Array.from(C),opacity:_,quadPoints:A,boxes:null,pageIndex:D-1,rect:x.slice(0),rotation:E,annotationElementId:b,id:b,deleted:!1,popupRef:R,comment:P?.str||null}}else if(t instanceof Ad){const{data:{inkLists:A,rect:x,rotation:E,id:b,color:C,borderStyle:{rawWidth:_},popupRef:R,contentsObj:P},parent:{page:{pageNumber:D}}}=t;s=t={annotationType:At.HIGHLIGHT,color:Array.from(C),thickness:_,inkLists:A,boxes:null,pageIndex:D-1,rect:x.slice(0),rotation:E,annotationElementId:b,id:b,deleted:!1,popupRef:R,comment:P?.str||null}}const{color:a,quadPoints:l,inkLists:c,opacity:h}=t,d=await super.deserialize(t,e,n);d.color=ct.makeHexColor(...a),d.#g=h||1,c&&(d.#m=t.thickness),d._initialData=s,t.comment&&d.setCommentData(t.comment);const[p,m]=d.pageDimensions,[y,w]=d.pageTranslation;if(l){const A=d.#n=[];for(let x=0;x<l.length;x+=8)A.push({x:(l[x]-y)/p,y:1-(l[x+1]-w)/m,width:(l[x+2]-l[x])/p,height:(l[x+1]-l[x+5])/m});d.#y(),d.#b(),d.rotate(d.rotation)}else if(c){d.#l=!0;const A=c[0],x={x:A[0]-y,y:m-(A[1]-w)},E=new xh(x,[0,0,p,m],1,d.#m/2,!0,.001);for(let _=0,R=A.length;_<R;_+=2)x.x=A[_]-y,x.y=m-(A[_+1]-w),E.add(x);const{id:b,clipPathId:C}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:d.color,"fill-opacity":d._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:E.toSVGPath()}},!0,!0);d.#A({highlightOutlines:E.getOutlines(),highlightId:b,clipPathId:C}),d.#b(),d.rotate(d.parentRotation)}return d}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=this.getRect(0,0),n=mt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),s={annotationType:At.HIGHLIGHT,color:n,opacity:this.#g,thickness:this.#m,quadPoints:this.#L(),outlines:this.#O(e),pageIndex:this.pageIndex,rect:e,rotation:this.#C(),structTreeParentId:this._structTreeParentId};return this.addComment(s),this.annotationElementId&&!this.#_(s)?null:(s.id=this.annotationElementId,s)}#_(t){const{color:e}=this._initialData;return this.hasEditedComment||t.color.some((n,s)=>n!==e[s])}renderAnnotationElement(t){const e={rect:this.getRect(0,0)};return this.hasEditedComment&&(e.popup=this.comment),t.updateEdited(e),null}static canCreateNewEmptyEditor(){return!1}}class kv{#t=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,n]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,n)}updateSVGProperty(t,e){this.#t[t]=e}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){Ft("Not implemented")}}class gt extends mt{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#n=null;static#i=null;static#r=null;static#s=NaN;static#o=null;static#a=null;static#u=NaN;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}_addOutlines(t){t.drawOutlines&&(this.#c(t),this.#p())}#c({drawOutlines:t,drawId:e,drawingOptions:n}){this.#t=t,this._drawingOptions||=n,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),e>=0?(this._drawId=e,this.parent.drawLayer.finalizeDraw(e,t.defaultProperties)):this._drawId=this.#d(t,this.parent),this.#h(t.box)}#d(t,e){const{id:n}=e.drawLayer.draw(gt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return n}static _mergeSVGProperties(t,e){const n=new Set(Object.keys(t));for(const[s,a]of Object.entries(e))n.has(s)?Object.assign(t[s],a):t[s]=a;return t}static getDefaultDrawingOptions(t){Ft("Not implemented")}static get typesMap(){Ft("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){const n=this.typesMap.get(t);n&&this._defaultDrawingOptions.updateProperty(n,e),this._currentParent&&(gt.#n.updateProperty(n,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const n=this.constructor.typesMap.get(t);n&&this._updateProperty(t,n,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[n,s]of this.typesMap)t.push([n,e[s]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[n,s]of this.constructor.typesMap)t.push([n,e[s]]);return t}_updateProperty(t,e,n){const s=this._drawingOptions,a=s[e],l=c=>{s.updateProperty(e,c);const h=this.#t.updateProperty(e,c);h&&this.#h(h),this.parent?.drawLayer.updateProperties(this._drawId,s.toSVGProperties()),t===this.colorType&&this._colorPicker?.update(c)};this.addCommands({cmd:l.bind(this,n),undo:l.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,gt._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#f()),{bbox:this.#m()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,gt._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#f()),{bbox:this.#m()}))}_onTranslating(t,e){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#m()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,gt._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#f(),this.parentDimensions),{bbox:this.#m()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#l(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#p(),this.#h(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#l()):t&&(this._uiManager.addShouldRescale(this),this.#p(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}#l(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#p(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#d(this.#t,t)}}#g([t,e,n,s]){const{parentDimensions:[a,l],rotation:c}=this;switch(c){case 90:return[e,1-t,n*(l/a),s*(a/l)];case 180:return[1-t,1-e,n,s];case 270:return[1-e,t,n*(l/a),s*(a/l)];default:return[t,e,n,s]}}#f(){const{x:t,y:e,width:n,height:s,parentDimensions:[a,l],rotation:c}=this;switch(c){case 90:return[1-e,t,n*(a/l),s*(l/a)];case 180:return[1-t,1-e,n,s];case 270:return[e,1-t,n*(a/l),s*(l/a)];default:return[t,e,n,s]}}#h(t){if([this.x,this.y,this.width,this.height]=this.#g(t),this.div){this.fixAndSetPosition();const[e,n]=this.parentDimensions;this.setDims(this.width*e,this.height*n)}this._onResized()}#m(){const{x:t,y:e,width:n,height:s,rotation:a,parentRotation:l,parentDimensions:[c,h]}=this;switch((a*4+l)/90){case 1:return[1-e-s,t,s,n];case 2:return[1-t-n,1-e-s,n,s];case 3:return[e,1-t-n,s,n];case 4:return[t,e-n*(c/h),s*(h/c),n*(c/h)];case 5:return[1-e,t,n*(c/h),s*(h/c)];case 6:return[1-t-s*(h/c),1-e,s*(h/c),n*(c/h)];case 7:return[e-n*(c/h),1-t-s*(h/c),n*(c/h),s*(h/c)];case 8:return[t-n,e-s,n,s];case 9:return[1-e,t-n,s,n];case 10:return[1-t,1-e,n,s];case 11:return[e-s,1-t,s,n];case 12:return[t-s*(h/c),e,s*(h/c),n*(c/h)];case 13:return[1-e-n*(c/h),t-s*(h/c),n*(c/h),s*(h/c)];case 14:return[1-t,1-e-n*(c/h),s*(h/c),n*(c/h)];case 15:return[e,1-t,n*(c/h),s*(h/c)];default:return[t,e,n,s]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,gt._mergeSVGProperties({bbox:this.#m()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#h(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,e;this._isCopy&&(t=this.x,e=this.y);const n=super.render();n.classList.add("draw");const s=document.createElement("div");n.append(s),s.setAttribute("aria-hidden","true"),s.className="internal";const[a,l]=this.parentDimensions;return this.setDims(this.width*a,this.height*l),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,e),n}static createDrawerInstance(t,e,n,s,a){Ft("Not implemented")}static startDrawing(t,e,n,s){const{target:a,offsetX:l,offsetY:c,pointerId:h,pointerType:d}=s;if(gt.#o&&gt.#o!==d)return;const{viewport:{rotation:p}}=t,{width:m,height:y}=a.getBoundingClientRect(),w=gt.#i=new AbortController,A=t.combinedSignal(w);if(gt.#s||=h,gt.#o??=d,window.addEventListener("pointerup",x=>{gt.#s===x.pointerId?this._endDraw(x):gt.#a?.delete(x.pointerId)},{signal:A}),window.addEventListener("pointercancel",x=>{gt.#s===x.pointerId?this._currentParent.endDrawingSession():gt.#a?.delete(x.pointerId)},{signal:A}),window.addEventListener("pointerdown",x=>{gt.#o===x.pointerType&&((gt.#a||=new Set).add(x.pointerId),gt.#n.isCancellable()&&(gt.#n.removeLastElement(),gt.#n.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:A}),window.addEventListener("contextmenu",Je,{signal:A}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:A}),a.addEventListener("touchmove",x=>{x.timeStamp===gt.#u&&se(x)},{signal:A}),t.toggleDrawing(),e._editorUndoBar?.hide(),gt.#n){t.drawLayer.updateProperties(this._currentDrawId,gt.#n.startNew(l,c,m,y,p));return}e.updateUIForDefaultProperties(this),gt.#n=this.createDrawerInstance(l,c,m,y,p),gt.#r=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(gt.#r.toSVGProperties(),gt.#n.defaultSVGProperties),!0,!1)}static _drawMove(t){if(gt.#u=-1,!gt.#n)return;const{offsetX:e,offsetY:n,pointerId:s}=t;if(gt.#s===s){if(gt.#a?.size>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,gt.#n.add(e,n)),gt.#u=t.timeStamp,se(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,gt.#n=null,gt.#r=null,gt.#o=null,gt.#u=NaN),gt.#i&&(gt.#i.abort(),gt.#i=null,gt.#s=NaN,gt.#a=null)}static _endDraw(t){const e=this._currentParent;if(e){if(e.toggleDrawing(!0),this._cleanup(!1),t?.target===e.div&&e.drawLayer.updateProperties(this._currentDrawId,gt.#n.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const n=gt.#n,s=this._currentDrawId,a=n.getLastElement();e.addCommands({cmd:()=>{e.drawLayer.updateProperties(s,n.setLastElement(a))},undo:()=>{e.drawLayer.updateProperties(s,n.removeLastElement())},mustExec:!1,type:Rt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(Rt.DRAW_STEP),!gt.#n.isEmpty()){const{pageDimensions:[n,s],scale:a}=e,l=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:gt.#n.getOutlines(n*a,s*a,a,this._INNER_MARGIN),drawingOptions:gt.#r,mustBeCommitted:!t});return this._cleanup(!0),l}return e.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,n,s,a,l){Ft("Not implemented")}static async deserialize(t,e,n){const{rawDims:{pageWidth:s,pageHeight:a,pageX:l,pageY:c}}=e.viewport,h=this.deserializeDraw(l,c,s,a,this._INNER_MARGIN,t),d=await super.deserialize(t,e,n);return d.createDrawingOptions(t),d.#c({drawOutlines:h}),d.#p(),d.onScaleChanging(),d.rotate(),d}serializeDraw(t){const[e,n]=this.pageTranslation,[s,a]=this.pageDimensions;return this.#t.serialize([e,n,s,a],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class kC{#t=new Float64Array(6);#e;#n;#i;#r;#s;#o="";#a=0;#u=new Po;#c;#d;constructor(t,e,n,s,a,l){this.#c=n,this.#d=s,this.#i=a,this.#r=l,[t,e]=this.#l(t,e);const c=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#s=[t,e],this.#n=[{line:c,points:this.#s}],this.#t.set(c,0)}updateProperty(t,e){t==="stroke-width"&&(this.#r=e)}#l(t,e){return st._normalizePoint(t,e,this.#c,this.#d,this.#i)}isEmpty(){return!this.#n||this.#n.length===0}isCancellable(){return this.#s.length<=10}add(t,e){[t,e]=this.#l(t,e);const[n,s,a,l]=this.#t.subarray(2,6),c=t-a,h=e-l;return Math.hypot(this.#c*c,this.#d*h)<=2?null:(this.#s.push(t,e),isNaN(n)?(this.#t.set([a,l,t,e],2),this.#e.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([n,s,a,l,t,e],0),this.#e.push(...st.createBezierPoints(n,s,a,l,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const n=this.add(t,e);return n||(this.#s.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,s,a){this.#c=n,this.#d=s,this.#i=a,[t,e]=this.#l(t,e);const l=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#s=[t,e];const c=this.#n.at(-1);return c&&(c.line=new Float32Array(c.line),c.points=new Float32Array(c.points)),this.#n.push({line:l,points:this.#s}),this.#t.set(l,0),this.#a=0,this.toSVGPath(),null}getLastElement(){return this.#n.at(-1)}setLastElement(t){return this.#n?(this.#n.push(t),this.#e=t.line,this.#s=t.points,this.#a=0,{path:{d:this.toSVGPath()}}):this.#u.setLastElement(t)}removeLastElement(){if(!this.#n)return this.#u.removeLastElement();this.#n.pop(),this.#o="";for(let t=0,e=this.#n.length;t<e;t++){const{line:n,points:s}=this.#n[t];this.#e=n,this.#s=s,this.#a=0,this.toSVGPath()}return{path:{d:this.#o}}}toSVGPath(){const t=st.svgRound(this.#e[4]),e=st.svgRound(this.#e[5]);if(this.#s.length===2)return this.#o=`${this.#o} M ${t} ${e} Z`,this.#o;if(this.#s.length<=6){const s=this.#o.lastIndexOf("M");this.#o=`${this.#o.slice(0,s)} M ${t} ${e}`,this.#a=6}if(this.#s.length===4){const s=st.svgRound(this.#e[10]),a=st.svgRound(this.#e[11]);return this.#o=`${this.#o} L ${s} ${a}`,this.#a=12,this.#o}const n=[];this.#a===0&&(n.push(`M ${t} ${e}`),this.#a=6);for(let s=this.#a,a=this.#e.length;s<a;s+=6){const[l,c,h,d,p,m]=this.#e.slice(s,s+6).map(st.svgRound);n.push(`C${l} ${c} ${h} ${d} ${p} ${m}`)}return this.#o+=n.join(" "),this.#a=this.#e.length,this.#o}getOutlines(t,e,n,s){const a=this.#n.at(-1);return a.line=new Float32Array(a.line),a.points=new Float32Array(a.points),this.#u.build(this.#n,t,e,n,this.#i,this.#r,s),this.#t=null,this.#e=null,this.#n=null,this.#o=null,this.#u}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class Po extends st{#t;#e=0;#n;#i;#r;#s;#o;#a;#u;build(t,e,n,s,a,l,c){this.#r=e,this.#s=n,this.#o=s,this.#a=a,this.#u=l,this.#n=c??0,this.#i=t,this.#l()}get thickness(){return this.#u}setLastElement(t){return this.#i.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#i.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of this.#i){if(t.push(`M${st.svgRound(e[4])} ${st.svgRound(e[5])}`),e.length===6){t.push("Z");continue}if(e.length===12&&isNaN(e[6])){t.push(`L${st.svgRound(e[10])} ${st.svgRound(e[11])}`);continue}for(let n=6,s=e.length;n<s;n+=6){const[a,l,c,h,d,p]=e.subarray(n,n+6).map(st.svgRound);t.push(`C${a} ${l} ${c} ${h} ${d} ${p}`)}}return t.join("")}serialize([t,e,n,s],a){const l=[],c=[],[h,d,p,m]=this.#d();let y,w,A,x,E,b,C,_,R;switch(this.#a){case 0:R=st._rescale,y=t,w=e+s,A=n,x=-s,E=t+h*n,b=e+(1-d-m)*s,C=t+(h+p)*n,_=e+(1-d)*s;break;case 90:R=st._rescaleAndSwap,y=t,w=e,A=n,x=s,E=t+d*n,b=e+h*s,C=t+(d+m)*n,_=e+(h+p)*s;break;case 180:R=st._rescale,y=t+n,w=e,A=-n,x=s,E=t+(1-h-p)*n,b=e+d*s,C=t+(1-h)*n,_=e+(d+m)*s;break;case 270:R=st._rescaleAndSwap,y=t+n,w=e+s,A=-n,x=-s,E=t+(1-d-m)*n,b=e+(1-h-p)*s,C=t+(1-d)*n,_=e+(1-h)*s;break}for(const{line:P,points:D}of this.#i)l.push(R(P,y,w,A,x,a?new Array(P.length):null)),c.push(R(D,y,w,A,x,a?new Array(D.length):null));return{lines:l,points:c,rect:[E,b,C,_]}}static deserialize(t,e,n,s,a,{paths:{lines:l,points:c},rotation:h,thickness:d}){const p=[];let m,y,w,A,x;switch(h){case 0:x=st._rescale,m=-t/n,y=e/s+1,w=1/n,A=-1/s;break;case 90:x=st._rescaleAndSwap,m=-e/s,y=-t/n,w=1/s,A=1/n;break;case 180:x=st._rescale,m=t/n+1,y=-e/s,w=-1/n,A=1/s;break;case 270:x=st._rescaleAndSwap,m=e/s+1,y=t/n+1,w=-1/s,A=-1/n;break}if(!l){l=[];for(const b of c){const C=b.length;if(C===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,b[0],b[1]]));continue}if(C===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,b[0],b[1],NaN,NaN,NaN,NaN,b[2],b[3]]));continue}const _=new Float32Array(3*(C-2));l.push(_);let[R,P,D,I]=b.subarray(0,4);_.set([NaN,NaN,NaN,NaN,R,P],0);for(let j=4;j<C;j+=2){const H=b[j],G=b[j+1];_.set(st.createBezierPoints(R,P,D,I,H,G),(j-2)*3),[R,P,D,I]=[D,I,H,G]}}}for(let b=0,C=l.length;b<C;b++)p.push({line:x(l[b].map(_=>_??NaN),m,y,w,A),points:x(c[b].map(_=>_??NaN),m,y,w,A)});const E=new this.prototype.constructor;return E.build(p,n,s,1,h,d,a),E}#c(t=this.#u){const e=this.#n+t/2*this.#o;return this.#a%180===0?[e/this.#r,e/this.#s]:[e/this.#s,e/this.#r]}#d(){const[t,e,n,s]=this.#t,[a,l]=this.#c(0);return[t+a,e+l,n-2*a,s-2*l]}#l(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:s}of this.#i){if(s.length<=12){for(let c=4,h=s.length;c<h;c+=6)ct.pointBoundingBox(s[c],s[c+1],t);continue}let a=s[4],l=s[5];for(let c=6,h=s.length;c<h;c+=6){const[d,p,m,y,w,A]=s.subarray(c,c+6);ct.bezierBoundingBox(a,l,d,p,m,y,w,A,t),a=w,l=A}}const[e,n]=this.#c();t[0]=Te(t[0]-e,0,1),t[1]=Te(t[1]-n,0,1),t[2]=Te(t[2]+e,0,1),t[3]=Te(t[3]+n,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,e){return t==="stroke-width"?this.#p(e):null}#p(t){const[e,n]=this.#c();this.#u=t;const[s,a]=this.#c(),[l,c]=[s-e,a-n],h=this.#t;return h[0]-=l,h[1]-=c,h[2]+=2*l,h[3]+=2*c,h}updateParentDimensions([t,e],n){const[s,a]=this.#c();this.#r=t,this.#s=e,this.#o=n;const[l,c]=this.#c(),h=l-s,d=c-a,p=this.#t;return p[0]-=h,p[1]-=d,p[2]+=2*h,p[3]+=2*d,p}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(st.svgRound).join(" ")}get defaultProperties(){const[t,e]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${st.svgRound(t)} ${st.svgRound(e)}`}}}get rotationTransform(){const[,,t,e]=this.#t;let n=0,s=0,a=0,l=0,c=0,h=0;switch(this.#e){case 90:s=e/t,a=-t/e,c=t;break;case 180:n=-1,l=-1,c=t,h=e;break;case 270:s=-e/t,a=t/e,h=e;break;default:return""}return`matrix(${n} ${s} ${a} ${l} ${st.svgRound(c)} ${st.svgRound(h)})`}getPathResizingSVGProperties([t,e,n,s]){const[a,l]=this.#c(),[c,h,d,p]=this.#t;if(Math.abs(d-a)<=st.PRECISION||Math.abs(p-l)<=st.PRECISION){const x=t+n/2-(c+d/2),E=e+s/2-(h+p/2);return{path:{"transform-origin":`${st.svgRound(t)} ${st.svgRound(e)}`,transform:`${this.rotationTransform} translate(${x} ${E})`}}}const m=(n-2*a)/(d-2*a),y=(s-2*l)/(p-2*l),w=d/n,A=p/s;return{path:{"transform-origin":`${st.svgRound(c)} ${st.svgRound(h)}`,transform:`${this.rotationTransform} scale(${w} ${A}) translate(${st.svgRound(a)} ${st.svgRound(l)}) scale(${m} ${y}) translate(${st.svgRound(-a)} ${st.svgRound(-l)})`}}}getPathResizedSVGProperties([t,e,n,s]){const[a,l]=this.#c(),c=this.#t,[h,d,p,m]=c;if(c[0]=t,c[1]=e,c[2]=n,c[3]=s,Math.abs(p-a)<=st.PRECISION||Math.abs(m-l)<=st.PRECISION){const E=t+n/2-(h+p/2),b=e+s/2-(d+m/2);for(const{line:C,points:_}of this.#i)st._translate(C,E,b,C),st._translate(_,E,b,_);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${st.svgRound(t)} ${st.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const y=(n-2*a)/(p-2*a),w=(s-2*l)/(m-2*l),A=-y*(h+a)+t+a,x=-w*(d+l)+e+l;if(y!==1||w!==1||A!==0||x!==0)for(const{line:E,points:b}of this.#i)st._rescale(E,A,x,y,w,E),st._rescale(b,A,x,y,w,b);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${st.svgRound(t)} ${st.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],n){const[s,a]=n,l=this.#t,c=t-l[0],h=e-l[1];if(this.#r===s&&this.#s===a)for(const{line:d,points:p}of this.#i)st._translate(d,c,h,d),st._translate(p,c,h,p);else{const d=this.#r/s,p=this.#s/a;this.#r=s,this.#s=a;for(const{line:m,points:y}of this.#i)st._rescale(m,c,h,d,p,m),st._rescale(y,c,h,d,p,y);l[2]*=d,l[3]*=p}return l[0]=t,l[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${st.svgRound(t)} ${st.svgRound(e)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${st.svgRound(t[0])} ${st.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class El extends kv{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:mt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??=this["stroke-width"],e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new El(this._viewParameters);return t.updateAll(this),t}}class bd extends gt{static _type="ink";static _editorType=At.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){mt.initialize(t,e),this._defaultDrawingOptions=new El(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return _t(this,"typesMap",new Map([[Rt.INK_THICKNESS,"stroke-width"],[Rt.INK_COLOR,"stroke"],[Rt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,n,s,a){return new kC(t,e,n,s,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,n,s,a,l){return Po.deserialize(t,e,n,s,a,l)}static async deserialize(t,e,n){let s=null;if(t instanceof Ad){const{data:{inkLists:l,rect:c,rotation:h,id:d,color:p,opacity:m,borderStyle:{rawWidth:y},popupRef:w,contentsObj:A},parent:{page:{pageNumber:x}}}=t;s=t={annotationType:At.INK,color:Array.from(p),thickness:y,opacity:m,paths:{points:l},boxes:null,pageIndex:x-1,rect:c.slice(0),rotation:h,annotationElementId:d,id:d,deleted:!1,popupRef:w,comment:A?.str||null}}const a=await super.deserialize(t,e,n);return a._initialData=s,t.comment&&a.setCommentData(t.comment),a}get toolbarButtons(){return this._colorPicker||=new po(this),[["colorPicker",this._colorPicker]]}get colorType(){return Rt.INK_COLOR}get colorValue(){return this._drawingOptions.stroke}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:n}=this;e.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:n}){this._drawingOptions=bd.getDefaultDrawingOptions({stroke:ct.makeHexColor(...t),"stroke-width":e,"stroke-opacity":n})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:n,rect:s}=this.serializeDraw(t),{_drawingOptions:{stroke:a,"stroke-opacity":l,"stroke-width":c}}=this,h={annotationType:At.INK,color:mt._colorManager.convert(a),opacity:l,thickness:c,paths:{lines:e,points:n},pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(h),t?(h.isCopy=!0,h):this.annotationElementId&&!this.#t(h)?null:(h.id=this.annotationElementId,h)}#t(t){const{color:e,thickness:n,opacity:s,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((l,c)=>l!==e[c])||t.thickness!==n||t.opacity!==s||t.pageIndex!==a}renderAnnotationElement(t){const{points:e,rect:n}=this.serializeDraw(!1),s={rect:n,thickness:this._drawingOptions["stroke-width"],points:e};return this.hasEditedComment&&(s.popup=this.comment),t.updateEdited(s),null}}class Ah extends Po{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const Ja=8,Wr=3;class Yi{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,e,n,s){return n-=t,s-=e,n===0?s>0?0:4:n===1?s+6:2-s}static#n=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#i(t,e,n,s,a,l,c){const h=this.#e(n,s,a,l);for(let d=0;d<8;d++){const p=(-d+h-c+16)%8,m=this.#n[2*p],y=this.#n[2*p+1];if(t[(n+m)*e+(s+y)]!==0)return p}return-1}static#r(t,e,n,s,a,l,c){const h=this.#e(n,s,a,l);for(let d=0;d<8;d++){const p=(d+h+c+16)%8,m=this.#n[2*p],y=this.#n[2*p+1];if(t[(n+m)*e+(s+y)]!==0)return p}return-1}static#s(t,e,n,s){const a=t.length,l=new Int32Array(a);for(let p=0;p<a;p++)l[p]=t[p]<=s?1:0;for(let p=1;p<n-1;p++)l[p*e]=l[p*e+e-1]=0;for(let p=0;p<e;p++)l[p]=l[e*n-1-p]=0;let c=1,h;const d=[];for(let p=1;p<n-1;p++){h=1;for(let m=1;m<e-1;m++){const y=p*e+m,w=l[y];if(w===0)continue;let A=p,x=m;if(w===1&&l[y-1]===0)c+=1,x-=1;else if(w>=1&&l[y+1]===0)c+=1,x+=1,w>1&&(h=w);else{w!==1&&(h=Math.abs(w));continue}const E=[m,p],b=x===m+1,C={isHole:b,points:E,id:c,parent:0};d.push(C);let _;for(const Q of d)if(Q.id===h){_=Q;break}_?_.isHole?C.parent=b?_.parent:h:C.parent=b?h:_.parent:C.parent=b?h:0;const R=this.#i(l,e,p,m,A,x,0);if(R===-1){l[y]=-c,l[y]!==1&&(h=Math.abs(l[y]));continue}let P=this.#n[2*R],D=this.#n[2*R+1];const I=p+P,j=m+D;A=I,x=j;let H=p,G=m;for(;;){const Q=this.#r(l,e,H,G,A,x,1);P=this.#n[2*Q],D=this.#n[2*Q+1];const ht=H+P,lt=G+D;E.push(lt,ht);const et=H*e+G;if(l[et+1]===0?l[et]=-c:l[et]===1&&(l[et]=c),ht===p&&lt===m&&H===I&&G===j){l[y]!==1&&(h=Math.abs(l[y]));break}else A=H,x=G,H=ht,G=lt}}}return d}static#o(t,e,n,s){if(n-e<=4){for(let I=e;I<n-2;I+=2)s.push(t[I],t[I+1]);return}const a=t[e],l=t[e+1],c=t[n-4]-a,h=t[n-3]-l,d=Math.hypot(c,h),p=c/d,m=h/d,y=p*l-m*a,w=h/c,A=1/d,x=Math.atan(w),E=Math.cos(x),b=Math.sin(x),C=A*(Math.abs(E)+Math.abs(b)),_=A*(1-C+C**2),R=Math.max(Math.atan(Math.abs(b+E)*_),Math.atan(Math.abs(b-E)*_));let P=0,D=e;for(let I=e+2;I<n-2;I+=2){const j=Math.abs(y-p*t[I+1]+m*t[I]);j>P&&(D=I,P=j)}P>(d*R)**2?(this.#o(t,e,D+2,s),this.#o(t,D,n,s)):s.push(a,l)}static#a(t){const e=[],n=t.length;return this.#o(t,0,n,e),e.push(t[n-2],t[n-1]),e.length<=4?null:e}static#u(t,e,n,s,a,l){const c=new Float32Array(l**2),h=-2*s**2,d=l>>1;for(let x=0;x<l;x++){const E=(x-d)**2;for(let b=0;b<l;b++)c[x*l+b]=Math.exp((E+(b-d)**2)/h)}const p=new Float32Array(256),m=-2*a**2;for(let x=0;x<256;x++)p[x]=Math.exp(x**2/m);const y=t.length,w=new Uint8Array(y),A=new Uint32Array(256);for(let x=0;x<n;x++)for(let E=0;E<e;E++){const b=x*e+E,C=t[b];let _=0,R=0;for(let D=0;D<l;D++){const I=x+D-d;if(!(I<0||I>=n))for(let j=0;j<l;j++){const H=E+j-d;if(H<0||H>=e)continue;const G=t[I*e+H],Q=c[D*l+j]*p[Math.abs(G-C)];_+=G*Q,R+=Q}}const P=w[b]=Math.round(_/R);A[P]++}return[w,A]}static#c(t){const e=new Uint32Array(256);for(const n of t)e[n]++;return e}static#d(t){const e=t.length,n=new Uint8ClampedArray(e>>2);let s=-1/0,a=1/0;for(let c=0,h=n.length;c<h;c++){const d=n[c]=t[c<<2];s=Math.max(s,d),a=Math.min(a,d)}const l=255/(s-a);for(let c=0,h=n.length;c<h;c++)n[c]=(n[c]-a)*l;return n}static#l(t){let e,n=-1/0,s=-1/0;const a=t.findIndex(h=>h!==0);let l=a,c=a;for(e=a;e<256;e++){const h=t[e];h>n&&(e-l>s&&(s=e-l,c=e-1),n=h,l=e)}for(e=c-1;e>=0&&!(t[e]>t[e+1]);e--);return e}static#p(t){const e=t,{width:n,height:s}=t,{maxDim:a}=this.#t;let l=n,c=s;if(n>a||s>a){let y=n,w=s,A=Math.log2(Math.max(n,s)/a);const x=Math.floor(A);A=A===x?x-1:x;for(let b=0;b<A;b++){l=Math.ceil(y/2),c=Math.ceil(w/2);const C=new OffscreenCanvas(l,c);C.getContext("2d").drawImage(t,0,0,y,w,0,0,l,c),y=l,w=c,t!==e&&t.close(),t=C.transferToImageBitmap()}const E=Math.min(a/l,a/c);l=Math.round(l*E),c=Math.round(c*E)}const d=new OffscreenCanvas(l,c).getContext("2d",{willReadFrequently:!0});d.fillStyle="white",d.fillRect(0,0,l,c),d.filter="grayscale(1)",d.drawImage(t,0,0,t.width,t.height,0,0,l,c);const p=d.getImageData(0,0,l,c).data;return[this.#d(p),l,c]}static extractContoursFromText(t,{fontFamily:e,fontStyle:n,fontWeight:s},a,l,c,h){let d=new OffscreenCanvas(1,1),p=d.getContext("2d",{alpha:!1});const m=200,y=p.font=`${n} ${s} ${m}px ${e}`,{actualBoundingBoxLeft:w,actualBoundingBoxRight:A,actualBoundingBoxAscent:x,actualBoundingBoxDescent:E,fontBoundingBoxAscent:b,fontBoundingBoxDescent:C,width:_}=p.measureText(t),R=1.5,P=Math.ceil(Math.max(Math.abs(w)+Math.abs(A)||0,_)*R),D=Math.ceil(Math.max(Math.abs(x)+Math.abs(E)||m,Math.abs(b)+Math.abs(C)||m)*R);d=new OffscreenCanvas(P,D),p=d.getContext("2d",{alpha:!0,willReadFrequently:!0}),p.font=y,p.filter="grayscale(1)",p.fillStyle="white",p.fillRect(0,0,P,D),p.fillStyle="black",p.fillText(t,P*(R-1)/2,D*(3-R)/2);const I=this.#d(p.getImageData(0,0,P,D).data),j=this.#c(I),H=this.#l(j),G=this.#s(I,P,D,H);return this.processDrawnLines({lines:{curves:G,width:P,height:D},pageWidth:a,pageHeight:l,rotation:c,innerMargin:h,mustSmooth:!0,areContours:!0})}static process(t,e,n,s,a){const[l,c,h]=this.#p(t),[d,p]=this.#u(l,c,h,Math.hypot(c,h)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),m=this.#l(p),y=this.#s(d,c,h,m);return this.processDrawnLines({lines:{curves:y,width:c,height:h},pageWidth:e,pageHeight:n,rotation:s,innerMargin:a,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:s,innerMargin:a,mustSmooth:l,areContours:c}){s%180!==0&&([e,n]=[n,e]);const{curves:h,width:d,height:p}=t,m=t.thickness??0,y=[],w=Math.min(e/d,n/p),A=w/e,x=w/n,E=[];for(const{points:C}of h){const _=l?this.#a(C):C;if(!_)continue;E.push(_);const R=_.length,P=new Float32Array(R),D=new Float32Array(3*(R===2?2:R-2));if(y.push({line:D,points:P}),R===2){P[0]=_[0]*A,P[1]=_[1]*x,D.set([NaN,NaN,NaN,NaN,P[0],P[1]],0);continue}let[I,j,H,G]=_;I*=A,j*=x,H*=A,G*=x,P.set([I,j,H,G],0),D.set([NaN,NaN,NaN,NaN,I,j],0);for(let Q=4;Q<R;Q+=2){const ht=P[Q]=_[Q]*A,lt=P[Q+1]=_[Q+1]*x;D.set(st.createBezierPoints(I,j,H,G,ht,lt),(Q-2)*3),[I,j,H,G]=[H,G,ht,lt]}}if(y.length===0)return null;const b=c?new Ah:new Po;return b.build(y,e,n,1,s,c?0:m,a),{outline:b,newCurves:E,areContours:c,thickness:m,width:d,height:p}}static async compressSignature({outlines:t,areContours:e,thickness:n,width:s,height:a}){let l=1/0,c=-1/0,h=0;for(const _ of t){h+=_.length;for(let R=2,P=_.length;R<P;R++){const D=_[R]-_[R-2];l=Math.min(l,D),c=Math.max(c,D)}}let d;l>=-128&&c<=127?d=Int8Array:l>=-32768&&c<=32767?d=Int16Array:d=Int32Array;const p=t.length,m=Ja+Wr*p,y=new Uint32Array(m);let w=0;y[w++]=m*Uint32Array.BYTES_PER_ELEMENT+(h-2*p)*d.BYTES_PER_ELEMENT,y[w++]=0,y[w++]=s,y[w++]=a,y[w++]=e?0:1,y[w++]=Math.max(0,Math.floor(n??0)),y[w++]=p,y[w++]=d.BYTES_PER_ELEMENT;for(const _ of t)y[w++]=_.length-2,y[w++]=_[0],y[w++]=_[1];const A=new CompressionStream("deflate-raw"),x=A.writable.getWriter();await x.ready,x.write(y);const E=d.prototype.constructor;for(const _ of t){const R=new E(_.length-2);for(let P=2,D=_.length;P<D;P++)R[P-2]=_[P]-_[P-2];x.write(R)}x.close();const b=await new Response(A.readable).arrayBuffer(),C=new Uint8Array(b);return Z0(C)}static async decompressSignature(t){try{const e=s_(t),{readable:n,writable:s}=new DecompressionStream("deflate-raw"),a=s.getWriter();await a.ready,a.write(e).then(async()=>{await a.ready,await a.close()}).catch(()=>{});let l=null,c=0;for await(const _ of n)l||=new Uint8Array(new Uint32Array(_.buffer,0,4)[0]),l.set(_,c),c+=_.length;const h=new Uint32Array(l.buffer,0,l.length>>2),d=h[1];if(d!==0)throw new Error(`Invalid version: ${d}`);const p=h[2],m=h[3],y=h[4]===0,w=h[5],A=h[6],x=h[7],E=[],b=(Ja+Wr*A)*Uint32Array.BYTES_PER_ELEMENT;let C;switch(x){case Int8Array.BYTES_PER_ELEMENT:C=new Int8Array(l.buffer,b);break;case Int16Array.BYTES_PER_ELEMENT:C=new Int16Array(l.buffer,b);break;case Int32Array.BYTES_PER_ELEMENT:C=new Int32Array(l.buffer,b);break}c=0;for(let _=0;_<A;_++){const R=h[Wr*_+Ja],P=new Float32Array(R+2);E.push(P);for(let D=0;D<Wr-1;D++)P[D]=h[Wr*_+Ja+D+1];for(let D=0;D<R;D++)P[D+2]=P[D]+C[c++]}return{areContours:y,thickness:w,outlines:E,width:p,height:m}}catch(e){return St(`decompressSignature: ${e}`),null}}}class Ed extends kv{constructor(){super(),super.updateProperties({fill:mt._defaultLineColor,"stroke-width":0})}clone(){const t=new Ed;return t.updateAll(this),t}}class _d extends El{constructor(t){super(t),super.updateProperties({stroke:mt._defaultLineColor,"stroke-width":1})}clone(){const t=new _d(this._viewParameters);return t.updateAll(this),t}}class On extends gt{#t=!1;#e=null;#n=null;#i=null;static _type="signature";static _editorType=At.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#n=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){mt.initialize(t,e),this._defaultDrawingOptions=new Ed,this._defaultDrawnSignatureOptions=new _d(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return _t(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const e=t.get("hasDescription");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,e;const{_isCopy:n}=this;if(n&&(this._isCopy=!1,t=this.x,e=this.y),super.render(),this._drawId===null)if(this.#n){const{lines:s,mustSmooth:a,areContours:l,description:c,uuid:h,heightInPage:d}=this.#n,{rawDims:{pageWidth:p,pageHeight:m},rotation:y}=this.parent.viewport,w=Yi.processDrawnLines({lines:s,pageWidth:p,pageHeight:m,rotation:y,innerMargin:On._INNER_MARGIN,mustSmooth:a,areContours:l});this.addSignature(w,d,c,h)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return n&&(this._isCopy=!0,this._moveAfterPaste(t,e)),this.div}setUuid(t){this.#i=t,this.addEditToolbar()}getUuid(){return this.#i}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(e=>{e?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:e,thickness:n,width:s,height:a}=this.#n,l=Math.max(s,a),c=Yi.processDrawnLines({lines:{curves:t.map(h=>({points:h})),thickness:n,width:s,height:a},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e});return{areContours:e,outline:c.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,e,n,s){const{x:a,y:l}=this,{outline:c}=this.#n=t;this.#t=c instanceof Ah,this.description=n;let h;this.#t?h=On.getDefaultDrawingOptions():(h=On._defaultDrawnSignatureOptions.clone(),h.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:h});const[d,p]=this.parentDimensions,[,m]=this.pageDimensions;let y=e/m;y=y>=1?.5:y,this.width*=y/this.height,this.width>=1&&(y*=.9/this.width,this.width=.9),this.height=y,this.setDims(d*this.width,p*this.height),this.x=a,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(s),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!s,hasDescription:!!n}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:e,pageHeight:n},rotation:s}=this.parent.viewport;return Yi.process(t,e,n,s,On._INNER_MARGIN)}getFromText(t,e){const{rawDims:{pageWidth:n,pageHeight:s},rotation:a}=this.parent.viewport;return Yi.extractContoursFromText(t,e,n,s,a,On._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:e,pageHeight:n},rotation:s}=this.parent.viewport;return Yi.processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:s,innerMargin:On._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:e}){t?this._drawingOptions=On.getDefaultDrawingOptions():(this._drawingOptions=On._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":e}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:e,points:n,rect:s}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":a}}=this,l={annotationType:At.SIGNATURE,isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:a,pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(l),t?(l.paths={lines:e,points:n},l.uuid=this.#i,l.isCopy=!0):l.lines=e,this.#e&&(l.accessibilityData={type:"Figure",alt:this.#e}),l}static deserializeDraw(t,e,n,s,a,l){return l.areContours?Ah.deserialize(t,e,n,s,a,l):Po.deserialize(t,e,n,s,a,l)}static async deserialize(t,e,n){const s=await super.deserialize(t,e,n);return s.#t=t.areContours,s.description=t.accessibilityData?.alt||"",s.#i=t.uuid,s}}class RC extends mt{#t=null;#e=null;#n=null;#i=null;#r=null;#s="";#o=null;#a=!1;#u=null;#c=!1;#d=!1;static _type="stamp";static _editorType=At.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#i=t.bitmapUrl,this.#r=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){mt.initialize(t,e)}static isHandlingMimeForPasting(t){return fl.includes(t)}static paste(t,e){e.pasteEditor({mode:At.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#l(t,e=!1){if(!t){this.remove();return}this.#t=t.bitmap,e||(this.#e=t.id,this.#c=t.isSvg),t.file&&(this.#s=t.file.name),this.#f()}#p(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#o){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:s,width:a,height:l}=t||this.copyCanvas(null,null,!0).imageData,c=await n.guess({name:"altText",request:{data:s,width:a,height:l,channels:s.length/(a*l)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const h=c.output;return await this.setGuessedAltText(h),e&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}#g(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(n=>this.#l(n,!0)).finally(()=>this.#p());return}if(this.#i){const n=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(n).then(s=>this.#l(s)).finally(()=>this.#p());return}if(this.#r){const n=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(n).then(s=>this.#l(s)).finally(()=>this.#p());return}const t=document.createElement("input");t.type="file",t.accept=fl.join(",");const e=this._uiManager._signal;this.#n=new Promise(n=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#l(s)}n()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),n()},{signal:e})}).finally(()=>this.#p()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#o?.remove(),this.#o=null,this.#u&&(clearTimeout(this.#u),this.#u=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#g();return}super.rebuild(),this.div!==null&&(this.#e&&this.#o===null&&this.#g(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#n||this.#t||this.#i||this.#r||this.#e||this.#a)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#a||(this.#t?this.#f():this.#g()),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){const{id:n,bitmap:s}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),n&&this._uiManager.imageManager.isValidId(n)&&(this.#e=n,s&&(this.#t=s),this.#a=!1,this.#f())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#u!==null&&clearTimeout(this.#u);const t=200;this.#u=setTimeout(()=>{this.#u=null,this.#m()},t)}#f(){const{div:t}=this;let{width:e,height:n}=this.#t;const[s,a]=this.pageDimensions,l=.75;if(this.width)e=this.width*s,n=this.height*a;else if(e>l*s||n>l*a){const p=Math.min(l*s/e,l*a/n);e*=p,n*=p}const[c,h]=this.parentDimensions;this.setDims(e*c/s,n*h/a),this._uiManager.enableWaiting(!1);const d=this.#o=document.createElement("canvas");d.setAttribute("role","img"),this.addContainer(d),this.width=e/s,this.height=n/a,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#m(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#s&&this.div.setAttribute("aria-description",this.#s),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,e,n=!1){t||(t=224);const{width:s,height:a}=this.#t,l=new Cn;let c=this.#t,h=s,d=a,p=null;if(e){if(s>e||a>e){const D=Math.min(e/s,e/a);h=Math.floor(s*D),d=Math.floor(a*D)}p=document.createElement("canvas");const y=p.width=Math.ceil(h*l.sx),w=p.height=Math.ceil(d*l.sy);this.#c||(c=this.#h(y,w));const A=p.getContext("2d");A.filter=this._uiManager.hcmFilter;let x="white",E="#cfcfd8";this._uiManager.hcmFilter!=="none"?E="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(x="#8f8f9d",E="#42414d");const b=15,C=b*l.sx,_=b*l.sy,R=new OffscreenCanvas(C*2,_*2),P=R.getContext("2d");P.fillStyle=x,P.fillRect(0,0,C*2,_*2),P.fillStyle=E,P.fillRect(0,0,C,_),P.fillRect(C,_,C,_),A.fillStyle=A.createPattern(R,"repeat"),A.fillRect(0,0,y,w),A.drawImage(c,0,0,c.width,c.height,0,0,y,w)}let m=null;if(n){let y,w;if(l.symmetric&&c.width<t&&c.height<t)y=c.width,w=c.height;else if(c=this.#t,s>t||a>t){const E=Math.min(t/s,t/a);y=Math.floor(s*E),w=Math.floor(a*E),this.#c||(c=this.#h(y,w))}const x=new OffscreenCanvas(y,w).getContext("2d",{willReadFrequently:!0});x.drawImage(c,0,0,c.width,c.height,0,0,y,w),m={width:y,height:w,data:x.getImageData(0,0,y,w).data}}return{canvas:p,width:h,height:d,imageData:m}}#h(t,e){const{width:n,height:s}=this.#t;let a=n,l=s,c=this.#t;for(;a>2*t||l>2*e;){const h=a,d=l;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),l>2*e&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const p=new OffscreenCanvas(a,l);p.getContext("2d").drawImage(c,0,0,h,d,0,0,a,l),c=p.transferToImageBitmap()}return c}#m(){const[t,e]=this.parentDimensions,{width:n,height:s}=this,a=new Cn,l=Math.ceil(n*t*a.sx),c=Math.ceil(s*e*a.sy),h=this.#o;if(!h||h.width===l&&h.height===c)return;h.width=l,h.height=c;const d=this.#c?this.#t:this.#h(l,c),p=h.getContext("2d");p.filter=this._uiManager.hcmFilter,p.drawImage(d,0,0,d.width,d.height,0,0,l,c)}#w(t){if(t){if(this.#c){const s=this._uiManager.imageManager.getSvgUrl(this.#e);if(s)return s}const e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#t,e.getContext("2d").drawImage(this.#t,0,0),e.toDataURL()}if(this.#c){const[e,n]=this.pageDimensions,s=Math.round(this.width*e*rs.PDF_TO_CSS_UNITS),a=Math.round(this.height*n*rs.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(s,a);return l.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,s,a),l.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,e,n){let s=null,a=!1;if(t instanceof Cv){const{data:{rect:x,rotation:E,id:b,structParent:C,popupRef:_,contentsObj:R},container:P,parent:{page:{pageNumber:D}},canvas:I}=t;let j,H;I?(delete t.canvas,{id:j,bitmap:H}=n.imageManager.getFromCanvas(P.id,I),I.remove()):(a=!0,t._hasNoCanvas=!0);const G=(await e._structTree.getAriaAttributes(`${cd}${b}`))?.get("aria-label")||"";s=t={annotationType:At.STAMP,bitmapId:j,bitmap:H,pageIndex:D-1,rect:x.slice(0),rotation:E,annotationElementId:b,id:b,deleted:!1,accessibilityData:{decorative:!1,altText:G},isSvg:!1,structParent:C,popupRef:_,comment:R?.str||null}}const l=await super.deserialize(t,e,n),{rect:c,bitmap:h,bitmapUrl:d,bitmapId:p,isSvg:m,accessibilityData:y}=t;a?(n.addMissingCanvas(t.id,l),l.#a=!0):p&&n.imageManager.isValidId(p)?(l.#e=p,h&&(l.#t=h)):l.#i=d,l.#c=m;const[w,A]=l.pageDimensions;return l.width=(c[2]-c[0])/w,l.height=(c[3]-c[1])/A,y&&(l.altTextData=y),l._initialData=s,t.comment&&l.setCommentData(t.comment),l.#d=!!s,l}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n={annotationType:At.STAMP,bitmapId:this.#e,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#c,structTreeParentId:this._structTreeParentId};if(this.addComment(n),t)return n.bitmapUrl=this.#w(!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;const{decorative:s,altText:a}=this.serializeAltText(!1);if(!s&&a&&(n.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const c=this.#y(n);if(c.isSame)return null;c.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=this._initialData.structParent??-1}if(n.id=this.annotationElementId,e===null)return n;e.stamps||=new Map;const l=this.#c?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!e.stamps.has(this.#e))e.stamps.set(this.#e,{area:l,serialized:n}),n.bitmap=this.#w(!1);else if(this.#c){const c=e.stamps.get(this.#e);l>c.area&&(c.area=l,c.serialized.bitmap.close(),c.serialized.bitmap=this.#w(!1))}return n}#y(t){const{pageIndex:e,accessibilityData:{altText:n}}=this._initialData,s=t.pageIndex===e,a=(t.accessibilityData?.alt||"")===n;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&s&&a,isSameAltText:a}}renderAnnotationElement(t){const e={rect:this.getRect(0,0)};return this.hasEditedComment&&(e.popup=this.comment),t.updateEdited(e),null}}class Bn{#t;#e=!1;#n=null;#i=null;#r=null;#s=new Map;#o=!1;#a=!1;#u=!1;#c=null;#d=null;#l=null;#p=null;#g=null;#f=-1;#h;static _initialized=!1;static#m=new Map([de,bd,RC,ne,On].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:s,accessibilityManager:a,annotationLayer:l,drawLayer:c,textLayer:h,viewport:d,l10n:p}){const m=[...Bn.#m.values()];if(!Bn._initialized){Bn._initialized=!0;for(const y of m)y.initialize(p,t)}t.registerEditorTypes(m),this.#h=t,this.pageIndex=e,this.div=n,this.#t=a,this.#n=l,this.viewport=d,this.#l=h,this.drawLayer=c,this._structTree=s,this.#h.addLayer(this)}get isEmpty(){return this.#s.size===0}get isInvisible(){return this.isEmpty&&this.#h.getMode()===At.NONE}updateToolbar(t){this.#h.updateToolbar(t)}updateMode(t=this.#h.getMode()){switch(this.#v(),t){case At.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case At.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case At.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const n of Bn.#m.values())e.toggle(`${n._type}Editing`,t===n._editorType);this.div.hidden=!1}hasTextLayer(t){return t===this.#l?.div}setEditingState(t){this.#h.setEditingState(t)}addCommands(t){this.#h.addCommands(t)}cleanUndoStack(t){this.#h.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#n?.div.classList.toggle("disabled",!t)}async enable(){this.#u=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.#g?.abort(),this.#g=null;const t=new Set;for(const n of this.#s.values())n.enableEditing(),n.show(!0),n.annotationElementId&&(this.#h.removeChangedExistingAnnotation(n),t.add(n.annotationElementId));if(!this.#n){this.#u=!1;return}const e=this.#n.getEditableAnnotations();for(const n of e){if(n.hide(),this.#h.isDeletedAnnotationElement(n.data.id)||t.has(n.data.id))continue;const s=await this.deserialize(n);s&&(this.addOrRebuild(s),s.enableEditing())}this.#u=!1}disable(){if(this.#a=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.#l&&!this.#g){this.#g=new AbortController;const s=this.#h.combinedSignal(this.#g);this.#l.div.addEventListener("pointerdown",a=>{const{clientX:c,clientY:h,timeStamp:d}=a,p=this.#f;if(d-p>500){this.#f=d;return}this.#f=-1;const{classList:m}=this.div;m.toggle("getElements",!0);const y=document.elementsFromPoint(c,h);if(m.toggle("getElements",!1),!this.div.contains(y[0]))return;let w;const A=new RegExp(`^${X0}[0-9]+$`);for(const E of y)if(A.test(E.id)){w=E.id;break}if(!w)return;const x=this.#s.get(w);x?.annotationElementId===null&&(a.stopPropagation(),a.preventDefault(),x.dblclick())},{signal:s,capture:!0})}const t=new Map,e=new Map;for(const s of this.#s.values())if(s.disableEditing(),!!s.annotationElementId){if(s.serialize()!==null){t.set(s.annotationElementId,s);continue}else e.set(s.annotationElementId,s);this.getEditableAnnotation(s.annotationElementId)?.show(),s.remove()}if(this.#n){const s=this.#n.getEditableAnnotations();for(const a of s){const{id:l}=a.data;if(this.#h.isDeletedAnnotationElement(l)){a.updateEdited({deleted:!0});continue}let c=e.get(l);if(c){c.resetAnnotationElement(a),c.show(!1),a.show();continue}c=t.get(l),c&&(this.#h.addChangedExistingAnnotation(c),c.renderAnnotationElement(a)&&c.show(!1)),a.show()}}this.#v(),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const s of Bn.#m.values())n.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#a=!1}getEditableAnnotation(t){return this.#n?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#h.getActive()!==t&&this.#h.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#l?.div&&!this.#p){this.#p=new AbortController;const t=this.#h.combinedSignal(this.#p);this.#l.div.addEventListener("pointerdown",this.#w.bind(this),{signal:t}),this.#l.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#l?.div&&this.#p&&(this.#p.abort(),this.#p=null,this.#l.div.classList.remove("highlighting"))}#w(t){this.#h.unselectAll();const{target:e}=t;if(e===this.#l.div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&this.#l.div.contains(e)){const{isMac:n}=ye.platform;if(t.button!==0||t.ctrlKey&&n)return;this.#h.showAllEditors("highlight",!0,!0),this.#l.div.classList.add("free"),this.toggleDrawing(),ne.startHighlighting(this,this.#h.direction==="ltr",{target:this.#l.div,x:t.x,y:t.y}),this.#l.div.addEventListener("pointerup",()=>{this.#l.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#h._signal}),t.preventDefault()}}enableClick(){if(this.#i)return;this.#i=new AbortController;const t=this.#h.combinedSignal(this.#i);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){this.#i?.abort(),this.#i=null}attach(t){this.#s.set(t.id,t);const{annotationElementId:e}=t;e&&this.#h.isDeletedAnnotationElement(e)&&this.#h.removeDeletedAnnotationElement(t)}detach(t){this.#s.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#a&&t.annotationElementId&&this.#h.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#h.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#h.addDeletedAnnotationElement(t.annotationElementId),mt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#h.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#u),this.#h.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#r&&(t._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#h._signal}),e.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getNextId(){return this.#h.getId()}get#y(){return Bn.#m.get(this.#h.getMode())}combinedSignal(t){return this.#h.combinedSignal(t)}#A(t){const e=this.#y;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#y?.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await this.#h.updateMode(t.mode);const{offsetX:n,offsetY:s}=this.#S(),a=this.getNextId(),l=this.#A({parent:this,id:a,x:n,y:s,uiManager:this.#h,isCentered:!0,...e});l&&this.add(l)}async deserialize(t){return await Bn.#m.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#h)||null}createAndAddNewEditor(t,e,n={}){const s=this.getNextId(),a=this.#A({parent:this,id:s,x:t.offsetX,y:t.offsetY,uiManager:this.#h,isCentered:e,...n});return a&&this.add(a),a}#S(){const{x:t,y:e,width:n,height:s}=this.div.getBoundingClientRect(),a=Math.max(0,t),l=Math.max(0,e),c=Math.min(window.innerWidth,t+n),h=Math.min(window.innerHeight,e+s),d=(a+c)/2-t,p=(l+h)/2-e,[m,y]=this.viewport.rotation%180===0?[d,p]:[p,d];return{offsetX:m,offsetY:y}}addNewEditor(t={}){this.createAndAddNewEditor(this.#S(),!0,t)}setSelected(t){this.#h.setSelected(t)}toggleSelected(t){this.#h.toggleSelected(t)}unselect(t){this.#h.unselect(t)}pointerup(t){const{isMac:e}=ye.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!this.#o||(this.#o=!1,this.#y?.isDrawer&&this.#y.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const n=this.#h.getMode();if(n===At.STAMP||n===At.SIGNATURE){this.#h.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#h.getMode()===At.HIGHLIGHT&&this.enableTextSelection(),this.#o){this.#o=!1;return}const{isMac:e}=ye.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(this.#o=!0,this.#y?.isDrawer){this.startDrawingSession(t);return}const n=this.#h.getActive();this.#e=!n||n.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#c){this.#y.startDrawing(this,this.#h,!1,t);return}this.#h.setCurrentDrawingSession(this),this.#c=new AbortController;const e=this.#h.combinedSignal(this.#c);this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(this.#d=null,this.commitOrRemove())},{signal:e}),this.#y.startDrawing(this,this.#h,!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&(this.#d=e);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#c?(this.#h.setCurrentDrawingSession(null),this.#c.abort(),this.#c=null,this.#d=null,this.#y.endDrawing(t)):null}findNewParent(t,e,n){const s=this.#h.findParent(e,n);return s===null||s===this?!1:(s.changeParent(t),!0)}commitOrRemove(){return this.#c?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#c&&this.#y.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#h.getActive()?.parent===this&&(this.#h.commitOrRemove(),this.#h.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const t of this.#s.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#s.clear(),this.#h.removeLayer(this)}#v(){for(const t of this.#s.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,Ri(this.div,t);for(const e of this.#h.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){this.#h.commitOrRemove(),this.#v();const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,Ri(this.div,{rotation:n}),e!==n)for(const s of this.#s.values())s.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#h.viewParameters.realScale}}class ge{#t=null;#e=new Map;#n=new Map;static#i=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const e of this.#e.values())e.remove(),t.append(e);this.#t=t}}static get _svgFactory(){return _t(this,"_svgFactory",new mo)}static#r(t,[e,n,s,a]){const{style:l}=t;l.top=`${100*n}%`,l.left=`${100*e}%`,l.width=`${100*s}%`,l.height=`${100*a}%`}#s(){const t=ge._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#o(t,e){const n=ge._svgFactory.createElement("clipPath");t.append(n);const s=`clip_${e}`;n.setAttribute("id",s),n.setAttribute("clipPathUnits","objectBoundingBox");const a=ge._svgFactory.createElement("use");return n.append(a),a.setAttribute("href",`#${e}`),a.classList.add("clip"),s}#a(t,e){for(const[n,s]of Object.entries(e))s===null?t.removeAttribute(n):t.setAttribute(n,s)}draw(t,e=!1,n=!1){const s=ge.#i++,a=this.#s(),l=ge._svgFactory.createElement("defs");a.append(l);const c=ge._svgFactory.createElement("path");l.append(c);const h=`path_p${this.pageIndex}_${s}`;c.setAttribute("id",h),c.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#n.set(s,c);const d=n?this.#o(l,h):null,p=ge._svgFactory.createElement("use");return a.append(p),p.setAttribute("href",`#${h}`),this.updateProperties(a,t),this.#e.set(s,a),{id:s,clipPathId:`url(#${d})`}}drawOutline(t,e){const n=ge.#i++,s=this.#s(),a=ge._svgFactory.createElement("defs");s.append(a);const l=ge._svgFactory.createElement("path");a.append(l);const c=`path_p${this.pageIndex}_${n}`;l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke");let h;if(e){const m=ge._svgFactory.createElement("mask");a.append(m),h=`mask_p${this.pageIndex}_${n}`,m.setAttribute("id",h),m.setAttribute("maskUnits","objectBoundingBox");const y=ge._svgFactory.createElement("rect");m.append(y),y.setAttribute("width","1"),y.setAttribute("height","1"),y.setAttribute("fill","white");const w=ge._svgFactory.createElement("use");m.append(w),w.setAttribute("href",`#${c}`),w.setAttribute("stroke","none"),w.setAttribute("fill","black"),w.setAttribute("fill-rule","nonzero"),w.classList.add("mask")}const d=ge._svgFactory.createElement("use");s.append(d),d.setAttribute("href",`#${c}`),h&&d.setAttribute("mask",`url(#${h})`);const p=d.cloneNode();return s.append(p),d.classList.add("mainOutline"),p.classList.add("secondaryOutline"),this.updateProperties(s,t),this.#e.set(n,s),n}finalizeDraw(t,e){this.#n.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;const{root:n,bbox:s,rootClass:a,path:l}=e,c=typeof t=="number"?this.#e.get(t):t;if(c){if(n&&this.#a(c,n),s&&ge.#r(c,s),a){const{classList:h}=c;for(const[d,p]of Object.entries(a))h.toggle(d,p)}if(l){const d=c.firstChild.firstChild;this.#a(d,l)}}}updateParent(t,e){if(e===this)return;const n=this.#e.get(t);n&&(e.#t.append(n),this.#e.delete(t),e.#e.set(t,n))}remove(t){this.#n.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#n.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:wh};globalThis.pdfjsLib={AbortException:ii,AnnotationEditorLayer:Bn,AnnotationEditorParamsType:Rt,AnnotationEditorType:At,AnnotationEditorUIManager:si,AnnotationLayer:Sd,AnnotationMode:Vn,AnnotationType:ee,build:Av,ColorPicker:Qe,createValidAbsoluteUrl:od,DOMSVGFactory:mo,DrawLayer:ge,FeatureTest:ye,fetchData:er,getDocument:gd,getFilenameFromUrl:J0,getPdfFilenameFromUrl:tv,getRGB:Eo,getUuid:ld,getXfaPageViewport:ev,GlobalWorkerOptions:Ti,ImageKind:eo,InvalidPDFException:hl,isDataScheme:bo,isPdfFile:Sl,isValidExplicitDest:rv,MathClamp:Te,noContextMenu:Je,normalizeUnicode:Q0,OPS:co,OutputScale:Cn,PasswordResponses:q0,PDFDataRangeTransport:vd,PDFDateString:dl,PDFWorker:Ys,PermissionFlag:K0,PixelsPerInch:rs,RenderingCancelledException:Al,ResponseException:uo,setLayerDimensions:Ri,shadow:_t,SignatureExtractor:Yi,stopEvent:se,SupportedImageMimeTypes:fl,TextLayer:ho,TouchManager:Co,updateUrlHash:ad,Util:ct,VerbosityLevel:xo,version:xv,XfaLayer:wd};const MC=Object.freeze(Object.defineProperty({__proto__:null,AbortException:ii,AnnotationEditorLayer:Bn,AnnotationEditorParamsType:Rt,AnnotationEditorType:At,AnnotationEditorUIManager:si,AnnotationLayer:Sd,AnnotationMode:Vn,AnnotationType:ee,ColorPicker:Qe,DOMSVGFactory:mo,DrawLayer:ge,FeatureTest:ye,GlobalWorkerOptions:Ti,ImageKind:eo,InvalidPDFException:hl,MathClamp:Te,OPS:co,OutputScale:Cn,PDFDataRangeTransport:vd,PDFDateString:dl,PDFWorker:Ys,PasswordResponses:q0,PermissionFlag:K0,PixelsPerInch:rs,RenderingCancelledException:Al,ResponseException:uo,SignatureExtractor:Yi,SupportedImageMimeTypes:fl,TextLayer:ho,TouchManager:Co,Util:ct,VerbosityLevel:xo,XfaLayer:wd,build:Av,createValidAbsoluteUrl:od,fetchData:er,getDocument:gd,getFilenameFromUrl:J0,getPdfFilenameFromUrl:tv,getRGB:Eo,getUuid:ld,getXfaPageViewport:ev,isDataScheme:bo,isPdfFile:Sl,isValidExplicitDest:rv,noContextMenu:Je,normalizeUnicode:Q0,setLayerDimensions:Ri,shadow:_t,stopEvent:se,updateUrlHash:ad,version:xv},Symbol.toStringTag,{value:"Module"}));function Rv(r){var t,e,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r)){var s=r.length;for(t=0;t<s;t++)r[t]&&(e=Rv(r[t]))&&(n&&(n+=" "),n+=e)}else for(e in r)r[e]&&(n&&(n+=" "),n+=e);return n}function _l(){for(var r,t,e=0,n="",s=arguments.length;e<s;e++)(r=arguments[e])&&(t=Rv(r))&&(n&&(n+=" "),n+=t);return n}var sy=Object.prototype.hasOwnProperty;function ry(r,t,e){for(e of r.keys())if(Ws(e,t))return e}function Ws(r,t){var e,n,s;if(r===t)return!0;if(r&&t&&(e=r.constructor)===t.constructor){if(e===Date)return r.getTime()===t.getTime();if(e===RegExp)return r.toString()===t.toString();if(e===Array){if((n=r.length)===t.length)for(;n--&&Ws(r[n],t[n]););return n===-1}if(e===Set){if(r.size!==t.size)return!1;for(n of r)if(s=n,s&&typeof s=="object"&&(s=ry(t,s),!s)||!t.has(s))return!1;return!0}if(e===Map){if(r.size!==t.size)return!1;for(n of r)if(s=n[0],s&&typeof s=="object"&&(s=ry(t,s),!s)||!Ws(n[1],t.get(s)))return!1;return!0}if(e===ArrayBuffer)r=new Uint8Array(r),t=new Uint8Array(t);else if(e===DataView){if((n=r.byteLength)===t.byteLength)for(;n--&&r.getInt8(n)===t.getInt8(n););return n===-1}if(ArrayBuffer.isView(r)){if((n=r.byteLength)===t.byteLength)for(;n--&&r[n]===t[n];);return n===-1}if(!e||typeof r=="object"){n=0;for(e in r)if(sy.call(r,e)&&++n&&!sy.call(t,e)||!(e in t)||!Ws(r[e],t[e]))return!1;return Object.keys(t).length===n}}return r!==r&&t!==t}function ko(r){let t=!1;return{promise:new Promise((n,s)=>{r.then(a=>!t&&n(a)).catch(a=>!t&&s(a))}),cancel(){t=!0}}}const LC=["onCopy","onCut","onPaste"],DC=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],IC=["onFocus","onBlur"],NC=["onInput","onInvalid","onReset","onSubmit"],FC=["onLoad","onError"],OC=["onKeyDown","onKeyPress","onKeyUp"],jC=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],BC=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],VC=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],zC=["onSelect"],HC=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],UC=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],$C=["onScroll"],WC=["onWheel"],GC=["onAnimationStart","onAnimationEnd","onAnimationIteration"],XC=["onTransitionEnd"],KC=["onToggle"],qC=["onChange"],YC=[...LC,...DC,...IC,...NC,...FC,...OC,...jC,...BC,...VC,...zC,...HC,...UC,...$C,...WC,...GC,...XC,...qC,...KC];function Mv(r,t){const e={};for(const n of YC){const s=r[n];s&&(t?e[n]=(a=>s(a,t(n))):e[n]=s)}return e}var QC="Invariant failed";function Ot(r,t){if(!r)throw new Error(QC)}var Gu,oy;function ZC(){if(oy)return Gu;oy=1;var r=function(){};return Gu=r,Gu}var JC=ZC();const Pe=Eh(JC),Lv=V.createContext(null),tT="noopener noreferrer nofollow";class eT{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Ot(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){Ot(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}goToDestination(t){return new Promise(e=>{Ot(this.pdfDocument),Ot(t),typeof t=="string"?this.pdfDocument.getDestination(t).then(e):Array.isArray(t)?e(t):t.then(e)}).then(e=>{Ot(Array.isArray(e));const n=e[0];new Promise(s=>{Ot(this.pdfDocument),n instanceof Object?this.pdfDocument.getPageIndex(n).then(a=>{s(a)}).catch(()=>{Ot(!1)}):typeof n=="number"?s(n):Ot(!1)}).then(s=>{const a=s+1;Ot(this.pdfViewer),Ot(a>=1&&a<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:e,pageIndex:s,pageNumber:a})})})}navigateTo(t){this.goToDestination(t)}goToPage(t){const e=t-1;Ot(this.pdfViewer),Ot(t>=1&&t<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:e,pageNumber:t})}addLinkAttributes(t,e,n){t.href=e,t.rel=this.externalLinkRel||tT,t.target=n?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}function Gs({children:r,type:t}){return k.jsx("div",{className:`react-pdf__message react-pdf__message--${t}`,children:r})}const ay={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function nT(r,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return r}}function Qs(){return V.useReducer(nT,{value:void 0,error:void 0})}const Cl=typeof window<"u",Dv=Cl&&window.location.protocol==="file:";function iT(r){return typeof r<"u"}function Ki(r){return iT(r)&&r!==null}function sT(r){return typeof r=="string"}function rT(r){return r instanceof ArrayBuffer}function oT(r){return Ot(Cl),r instanceof Blob}function Sh(r){return sT(r)&&/^data:/.test(r)}function ly(r){Ot(Sh(r));const[t="",e=""]=r.split(",");return t.split(";").indexOf("base64")!==-1?atob(e):unescape(e)}function aT(){return Cl&&window.devicePixelRatio||1}const Iv="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function cy(){Pe(!Dv,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${Iv}`)}function lT(){Pe(!Dv,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${Iv}`)}function as(r){r?.cancel&&r.cancel()}function bh(r,t){return Object.defineProperty(r,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(r,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(r,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(r,"originalHeight",{get(){return this.view[3]},configurable:!0}),r}function cT(r){return r.name==="RenderingCancelledException"}function uT(r){return new Promise((t,e)=>{const n=new FileReader;n.onload=()=>{if(!n.result)return e(new Error("Error while reading a file."));t(n.result)},n.onerror=s=>{if(!s.target)return e(new Error("Error while reading a file."));const{error:a}=s.target;if(!a)return e(new Error("Error while reading a file."));switch(a.code){case a.NOT_FOUND_ERR:return e(new Error("Error while reading a file: File not found."));case a.SECURITY_ERR:return e(new Error("Error while reading a file: Security error."));case a.ABORT_ERR:return e(new Error("Error while reading a file: Aborted."));default:return e(new Error("Error while reading a file."))}},n.readAsArrayBuffer(r)})}const{PDFDataRangeTransport:hT}=MC,dT=(r,t)=>{switch(t){case ay.NEED_PASSWORD:{const e=prompt("Enter the password to open this PDF file.");r(e);break}case ay.INCORRECT_PASSWORD:{const e=prompt("Invalid password. Please try again.");r(e);break}}};function uy(r){return typeof r=="object"&&r!==null&&("data"in r||"range"in r||"url"in r)}const fT=V.forwardRef(function({children:t,className:e,error:n="Failed to load PDF file.",externalLinkRel:s,externalLinkTarget:a,file:l,inputRef:c,imageResourcesPath:h,loading:d="Loading PDF",noData:p="No PDF file specified.",onItemClick:m,onLoadError:y,onLoadProgress:w,onLoadSuccess:A,onPassword:x=dT,onSourceError:E,onSourceSuccess:b,options:C,renderMode:_,rotate:R,scale:P,...D},I){const[j,H]=Qs(),{value:G,error:Q}=j,[ht,lt]=Qs(),{value:et,error:bt}=ht,q=V.useRef(new eT),U=V.useRef([]),$=V.useRef(void 0),J=V.useRef(void 0);l&&l!==$.current&&uy(l)&&(Pe(!Ws(l,$.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),$.current=l),C&&C!==J.current&&(Pe(!Ws(C,J.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),J.current=C);const Z=V.useRef({scrollPageIntoView:kt=>{const{dest:Nt,pageNumber:qt,pageIndex:Zt=qt-1}=kt;if(m){m({dest:Nt,pageIndex:Zt,pageNumber:qt});return}const Tn=U.current[Zt];if(Tn){Tn.scrollIntoView();return}Pe(!1,`An internal link leading to page ${qt} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});V.useImperativeHandle(I,()=>({linkService:q,pages:U,viewer:Z}),[]);function N(){b&&b()}function z(){Q&&(Pe(!1,Q.toString()),E&&E(Q))}function nt(){H({type:"RESET"})}V.useEffect(nt,[l,H]);const dt=V.useCallback(async()=>{if(!l)return null;if(typeof l=="string")return Sh(l)?{data:ly(l)}:(cy(),{url:l});if(l instanceof hT)return{range:l};if(rT(l))return{data:l};if(Cl&&oT(l))return{data:await uT(l)};if(Ot(typeof l=="object"),Ot(uy(l)),"url"in l&&typeof l.url=="string"){if(Sh(l.url)){const{url:kt,...Nt}=l;return{data:ly(kt),...Nt}}cy()}return l},[l]);V.useEffect(()=>{const kt=ko(dt());return kt.promise.then(Nt=>{H({type:"RESOLVE",value:Nt})}).catch(Nt=>{H({type:"REJECT",error:Nt})}),()=>{as(kt)}},[dt,H]),V.useEffect(()=>{if(!(typeof G>"u")){if(G===!1){z();return}N()}},[G]);function wt(){et&&(A&&A(et),U.current=new Array(et.numPages),q.current.setDocument(et))}function yt(){bt&&(Pe(!1,bt.toString()),y&&y(bt))}V.useEffect(function(){lt({type:"RESET"})},[lt,G]),V.useEffect(function(){if(!G)return;const Nt=C?{...G,...C}:G,qt=gd(Nt);w&&(qt.onProgress=w),x&&(qt.onPassword=x);const Zt=qt,Tn=Zt.promise.then(ri=>{lt({type:"RESOLVE",value:ri})}).catch(ri=>{Zt.destroyed||lt({type:"REJECT",error:ri})});return()=>{Tn.finally(()=>Zt.destroy())}},[C,lt,G]),V.useEffect(()=>{if(!(typeof et>"u")){if(et===!1){yt();return}wt()}},[et]),V.useEffect(function(){q.current.setViewer(Z.current),q.current.setExternalLinkRel(s),q.current.setExternalLinkTarget(a)},[s,a]);const ut=V.useCallback((kt,Nt)=>{U.current[kt]=Nt},[]),Et=V.useCallback(kt=>{delete U.current[kt]},[]),Pt=V.useMemo(()=>({imageResourcesPath:h,linkService:q.current,onItemClick:m,pdf:et,registerPage:ut,renderMode:_,rotate:R,scale:P,unregisterPage:Et}),[h,m,et,ut,_,R,P,Et]),Tt=V.useMemo(()=>Mv(D,()=>et),[D,et]);function Ne(){function kt(qt){return!!qt?.pdf}if(!kt(Pt))throw new Error("pdf is undefined");const Nt=typeof t=="function"?t(Pt):t;return k.jsx(Lv.Provider,{value:Pt,children:Nt})}function tn(){return l?et==null?k.jsx(Gs,{type:"loading",children:typeof d=="function"?d():d}):et===!1?k.jsx(Gs,{type:"error",children:typeof n=="function"?n():n}):Ne():k.jsx(Gs,{type:"no-data",children:typeof p=="function"?p():p})}return k.jsx("div",{className:_l("react-pdf__Document",e),ref:c,...Tt,children:tn()})});function Nv(){return V.useContext(Lv)}function Fv(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=r.filter(Boolean);if(e.length<=1){var n=e[0];return n||null}return function(a){for(var l=0,c=e;l<c.length;l++){var h=c[l];typeof h=="function"?h(a):h&&(h.current=a)}}}const Ov=V.createContext(null);function Tl(){return V.useContext(Ov)}function pT(){const r=Nv(),t=Tl();Ot(t);const e={...r,...t},{imageResourcesPath:n,linkService:s,onGetAnnotationsError:a,onGetAnnotationsSuccess:l,onRenderAnnotationLayerError:c,onRenderAnnotationLayerSuccess:h,page:d,pdf:p,renderForms:m,rotate:y,scale:w=1}=e;Ot(p),Ot(d),Ot(s);const[A,x]=Qs(),{value:E,error:b}=A,C=V.useRef(null);Pe(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function _(){E&&l&&l(E)}function R(){b&&(Pe(!1,b.toString()),a&&a(b))}V.useEffect(function(){x({type:"RESET"})},[x,d]),V.useEffect(function(){if(!d)return;const H=ko(d.getAnnotations()),G=H;return H.promise.then(Q=>{x({type:"RESOLVE",value:Q})}).catch(Q=>{x({type:"REJECT",error:Q})}),()=>{as(G)}},[x,d]),V.useEffect(()=>{if(E!==void 0){if(E===!1){R();return}_()}},[E]);function P(){h&&h()}function D(j){Pe(!1,`${j}`),c&&c(j)}const I=V.useMemo(()=>d.getViewport({scale:w,rotation:y}),[d,y,w]);return V.useEffect(function(){if(!p||!d||!s||!E)return;const{current:H}=C;if(!H)return;const G=I.clone({dontFlip:!0}),Q={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:H,l10n:null,page:d,structTreeLayer:null,viewport:G},ht={annotations:E,annotationStorage:p.annotationStorage,div:H,imageResourcesPath:n,linkService:s,page:d,renderForms:m,viewport:G};H.innerHTML="";try{new Sd(Q).render(ht),P()}catch(lt){D(lt)}return()=>{}},[E,n,s,d,p,m,I]),k.jsx("div",{className:_l("react-pdf__Page__annotations","annotationLayer"),ref:C})}const jv={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},mT=/^H(\d+)$/;function gT(r){return r in jv}function Pl(r){return"children"in r}function Bv(r){return Pl(r)?r.children.length===1&&0 in r.children&&"id"in r.children[0]:!1}function yT(r){const t={};if(Pl(r)){const{role:e}=r,n=e.match(mT);if(n)t.role="heading",t["aria-level"]=Number(n[1]);else if(gT(e)){const s=jv[e];s&&(t.role=s)}}return t}function Vv(r){const t={};if(Pl(r)){if(r.alt!==void 0&&(t["aria-label"]=r.alt),r.lang!==void 0&&(t.lang=r.lang),Bv(r)){const[e]=r.children;if(e){const n=Vv(e);return{...t,...n}}}}else"id"in r&&(t["aria-owns"]=r.id);return t}function vT(r){return r?{...yT(r),...Vv(r)}:null}function zv({className:r,node:t}){const e=V.useMemo(()=>vT(t),[t]),n=V.useMemo(()=>!Pl(t)||Bv(t)?null:t.children.map((s,a)=>k.jsx(zv,{node:s},a)),[t]);return k.jsx("span",{className:r,...e,children:n})}function wT(){const r=Tl();Ot(r);const{onGetStructTreeError:t,onGetStructTreeSuccess:e}=r,[n,s]=Qs(),{value:a,error:l}=n,{customTextRenderer:c,page:h}=r;function d(){a&&e&&e(a)}function p(){l&&(Pe(!1,l.toString()),t&&t(l))}return V.useEffect(function(){s({type:"RESET"})},[s,h]),V.useEffect(function(){if(c||!h)return;const y=ko(h.getStructTree()),w=y;return y.promise.then(A=>{s({type:"RESOLVE",value:A})}).catch(A=>{s({type:"REJECT",error:A})}),()=>as(w)},[c,h,s]),V.useEffect(()=>{if(a!==void 0){if(a===!1){p();return}d()}},[a]),a?k.jsx(zv,{className:"react-pdf__Page__structTree structTree",node:a}):null}const hy=Vn;function xT(r){const t=Tl();Ot(t);const e={...t,...r},{_className:n,canvasBackground:s,devicePixelRatio:a=aT(),onRenderError:l,onRenderSuccess:c,page:h,renderForms:d,renderTextLayer:p,rotate:m,scale:y}=e,{canvasRef:w}=r;Ot(h);const A=V.useRef(null);function x(){h&&c&&c(bh(h,y))}function E(R){cT(R)||(Pe(!1,R.toString()),l&&l(R))}const b=V.useMemo(()=>h.getViewport({scale:y*a,rotation:m}),[a,h,m,y]),C=V.useMemo(()=>h.getViewport({scale:y,rotation:m}),[h,m,y]);V.useEffect(function(){if(!h)return;h.cleanup();const{current:P}=A;if(!P)return;P.width=b.width,P.height=b.height,P.style.width=`${Math.floor(C.width)}px`,P.style.height=`${Math.floor(C.height)}px`,P.style.visibility="hidden";const D={annotationMode:d?hy.ENABLE_FORMS:hy.ENABLE,canvasContext:P.getContext("2d",{alpha:!1}),viewport:b};s&&(D.background=s);const I=h.render(D),j=I;return I.promise.then(()=>{P.style.visibility="",x()}).catch(E),()=>as(j)},[s,h,d,b,C]);const _=V.useCallback(()=>{const{current:R}=A;R&&(R.width=0,R.height=0)},[]);return V.useEffect(()=>_,[_]),k.jsx("canvas",{className:`${n}__canvas`,dir:"ltr",ref:Fv(w,A),style:{display:"block",userSelect:"none"},children:p?k.jsx(wT,{}):null})}function AT(r){return"str"in r}function ST(){const r=Tl();Ot(r);const{customTextRenderer:t,onGetTextError:e,onGetTextSuccess:n,onRenderTextLayerError:s,onRenderTextLayerSuccess:a,page:l,pageIndex:c,pageNumber:h,rotate:d,scale:p}=r;Ot(l);const[m,y]=Qs(),{value:w,error:A}=m,x=V.useRef(null);Pe(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function E(){w&&n&&n(w)}function b(){A&&(Pe(!1,A.toString()),e&&e(A))}V.useEffect(function(){y({type:"RESET"})},[l,y]),V.useEffect(function(){if(!l)return;const j=ko(l.getTextContent()),H=j;return j.promise.then(G=>{y({type:"RESOLVE",value:G})}).catch(G=>{y({type:"REJECT",error:G})}),()=>as(H)},[l,y]),V.useEffect(()=>{if(w!==void 0){if(w===!1){b();return}E()}},[w]);const C=V.useCallback(()=>{a&&a()},[a]),_=V.useCallback(I=>{Pe(!1,I.toString()),s&&s(I)},[s]);function R(){const I=x.current;I&&I.classList.add("selecting")}function P(){const I=x.current;I&&I.classList.remove("selecting")}const D=V.useMemo(()=>l.getViewport({scale:p,rotation:d}),[l,d,p]);return V.useLayoutEffect(function(){if(!l||!w)return;const{current:j}=x;if(!j)return;j.innerHTML="";const H=l.streamTextContent({includeMarkedContent:!0}),G={container:j,textContentSource:H,viewport:D},Q=new ho(G),ht=Q;return Q.render().then(()=>{const lt=document.createElement("div");lt.className="endOfContent",j.append(lt);const et=j.querySelectorAll('[role="presentation"]');if(t){let bt=0;w.items.forEach((q,U)=>{if(!AT(q))return;const $=et[bt];if(!$)return;const J=t({pageIndex:c,pageNumber:h,itemIndex:U,...q});$.innerHTML=J,bt+=q.str&&q.hasEOL?2:1})}C()}).catch(_),()=>as(ht)},[t,_,C,l,c,h,w,D]),k.jsx("div",{className:_l("react-pdf__Page__textContent","textLayer"),onMouseUp:P,onMouseDown:R,ref:x})}const dy=1;function fy(r){const e={...Nv(),...r},{_className:n="react-pdf__Page",_enableRegisterUnregisterPage:s=!0,canvasBackground:a,canvasRef:l,children:c,className:h,customRenderer:d,customTextRenderer:p,devicePixelRatio:m,error:y="Failed to load the page.",height:w,inputRef:A,loading:x="Loading page",noData:E="No page specified.",onGetAnnotationsError:b,onGetAnnotationsSuccess:C,onGetStructTreeError:_,onGetStructTreeSuccess:R,onGetTextError:P,onGetTextSuccess:D,onLoadError:I,onLoadSuccess:j,onRenderAnnotationLayerError:H,onRenderAnnotationLayerSuccess:G,onRenderError:Q,onRenderSuccess:ht,onRenderTextLayerError:lt,onRenderTextLayerSuccess:et,pageIndex:bt,pageNumber:q,pdf:U,registerPage:$,renderAnnotationLayer:J=!0,renderForms:Z=!1,renderMode:N="canvas",renderTextLayer:z=!0,rotate:nt,scale:dt=dy,unregisterPage:wt,width:yt,...ut}=e,[Et,Pt]=Qs(),{value:Tt,error:Ne}=Et,tn=V.useRef(null);Ot(U);const kt=Ki(q)?q-1:bt??null,Nt=q??(Ki(bt)?bt+1:null),qt=nt??(Tt?Tt.rotate:null),Zt=V.useMemo(()=>{if(!Tt)return null;let en=1;const mn=dt??dy;if(yt||w){const gn=Tt.getViewport({scale:1,rotation:qt});yt?en=yt/gn.width:w&&(en=w/gn.height)}return mn*en},[w,Tt,qt,dt,yt]);V.useEffect(function(){return()=>{Ki(kt)&&s&&wt&&wt(kt)}},[s,U,kt,wt]);function Tn(){if(j){if(!Tt||!Zt)return;j(bh(Tt,Zt))}if(s&&$){if(!Ki(kt)||!tn.current)return;$(kt,tn.current)}}function ri(){Ne&&(Pe(!1,Ne.toString()),I&&I(Ne))}V.useEffect(function(){Pt({type:"RESET"})},[Pt,U,kt]),V.useEffect(function(){if(!U||!Nt)return;const mn=ko(U.getPage(Nt)),gn=mn;return mn.promise.then($n=>{Pt({type:"RESOLVE",value:$n})}).catch($n=>{Pt({type:"REJECT",error:$n})}),()=>as(gn)},[Pt,U,Nt]),V.useEffect(()=>{if(Tt!==void 0){if(Tt===!1){ri();return}Tn()}},[Tt,Zt]);const Li=V.useMemo(()=>Ki(kt)&&Nt&&Ki(qt)&&Ki(Zt)?{_className:n,canvasBackground:a,customTextRenderer:p,devicePixelRatio:m,onGetAnnotationsError:b,onGetAnnotationsSuccess:C,onGetStructTreeError:_,onGetStructTreeSuccess:R,onGetTextError:P,onGetTextSuccess:D,onRenderAnnotationLayerError:H,onRenderAnnotationLayerSuccess:G,onRenderError:Q,onRenderSuccess:ht,onRenderTextLayerError:lt,onRenderTextLayerSuccess:et,page:Tt,pageIndex:kt,pageNumber:Nt,renderForms:Z,renderTextLayer:z,rotate:qt,scale:Zt}:null,[n,a,p,m,b,C,_,R,P,D,H,G,Q,ht,lt,et,Tt,kt,Nt,Z,z,qt,Zt]),Di=V.useMemo(()=>Mv(ut,()=>Tt&&(Zt?bh(Tt,Zt):void 0)),[ut,Tt,Zt]),pn=`${kt}@${Zt}/${qt}`;function nr(){switch(N){case"custom":return Ot(d),k.jsx(d,{},`${pn}_custom`);case"none":return null;case"canvas":default:return k.jsx(xT,{canvasRef:l},`${pn}_canvas`)}}function Ro(){return z?k.jsx(ST,{},`${pn}_text`):null}function Mo(){return J?k.jsx(pT,{},`${pn}_annotations`):null}function Lo(){function en(gn){return!!gn?.page}if(!en(Li))throw new Error("page is undefined");const mn=typeof c=="function"?c(Li):c;return k.jsxs(Ov.Provider,{value:Li,children:[nr(),Ro(),Mo(),mn]})}function Do(){return Nt?U===null||Tt===void 0||Tt===null?k.jsx(Gs,{type:"loading",children:typeof x=="function"?x():x}):U===!1||Tt===!1?k.jsx(Gs,{type:"error",children:typeof y=="function"?y():y}):Lo():k.jsx(Gs,{type:"no-data",children:typeof E=="function"?E():E})}return k.jsx("div",{className:_l(n,h),"data-page-number":Nt,ref:Fv(A,tn),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${Zt}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:a||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...Di,children:Do()})}lT();Ti.workerSrc="pdf.worker.mjs";const bT="/assets/pdf.worker.min-DbR_HJhJ.mjs";var ET={};Ti.workerSrc=bT;function _T({onClose:r}){const t=V.useRef(null),[e,n]=V.useState(800),[s,a]=V.useState(null),[l,c]=V.useState(0);V.useEffect(()=>{const p=()=>{t.current&&n(Math.min(t.current.clientWidth-24,1100))};return p(),window.addEventListener("resize",p),()=>window.removeEventListener("resize",p)},[]);const d=`${(typeof import.meta<"u"&&"/"||typeof process<"u"&&ET?.PUBLIC_URL||"/").replace(/\/+$/,"")}/Kiran_Mulawad_CV.pdf`;return k.jsx(Mt.div,{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/75",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:k.jsxs(Mt.div,{className:"bg-white dark:bg-gray-900 p-6 rounded-xl shadow-2xl max-w-4xl w-full h-[80vh] flex flex-col overflow-hidden",initial:{scale:.96,y:8},animate:{scale:1,y:0},exit:{scale:.96,y:8},children:[k.jsxs("div",{className:"flex justify-between items-center mb-4",children:[k.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"Kiran's CV"}),k.jsx("button",{onClick:r,className:"text-3xl leading-none text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-white",children:""})]}),k.jsx("div",{ref:t,className:"flex-grow overflow-auto border rounded-md bg-gray-50 dark:bg-gray-800",children:s?k.jsxs("div",{className:"p-6 text-center space-y-3",children:[k.jsx("p",{className:"text-red-600",children:"Couldnt render the PDF."}),k.jsx("a",{className:"underline",href:d,target:"_blank",rel:"noreferrer",children:"Open PDF in new tab"})]}):k.jsxs(fT,{file:d,onLoadSuccess:({numPages:p})=>{p<2&&console.warn(`PDF has only ${p} page(s).`)},onLoadError:p=>{console.error("onLoadError:",p),a(p)},onSourceError:p=>{console.error("onSourceError:",p),a(p)},loading:k.jsx("div",{className:"p-6 text-center",children:"Loading PDF"}),children:[k.jsx(fy,{pageNumber:1,width:Math.max(320,Math.floor(e)),renderTextLayer:!0,renderAnnotationLayer:!0,className:"m-0"}),k.jsx(fy,{pageNumber:2,width:Math.max(320,Math.floor(e)),renderTextLayer:!0,renderAnnotationLayer:!0,className:"mt-6"})]})}),k.jsx("div",{className:"mt-4 text-center",children:k.jsx("a",{href:d,download:"Kiran_Mulawad_CV.pdf",className:"inline-block bg-[#DAA520] text-white font-semibold py-2 px-6 rounded-lg hover:bg-opacity-90 transition-colors",children:"Download PDF"})})]})})}const CT=()=>{const[r,t]=V.useState({x:0,y:0}),[e,n]=V.useState(!1);return V.useEffect(()=>{const s=l=>{t({x:l.clientX,y:l.clientY})},a=l=>{l.target.tagName==="A"||l.target.tagName==="BUTTON"||l.target.classList.contains("cursor-hover")||l.target.closest("a")||l.target.closest("button")?n(!0):n(!1)};return window.addEventListener("mousemove",s),document.addEventListener("mouseover",a),()=>{window.removeEventListener("mousemove",s),document.removeEventListener("mouseover",a)}},[]),k.jsxs(k.Fragment,{children:[k.jsx(Mt.div,{className:"custom-cursor-dot",animate:{x:r.x-4,y:r.y-4,scale:e?.5:1},transition:{type:"spring",stiffness:500,damping:28,mass:.5},style:{position:"fixed",width:"8px",height:"8px",borderRadius:"50%",backgroundColor:"#DAA520",pointerEvents:"none",zIndex:9999,mixBlendMode:"difference"}}),k.jsx(Mt.div,{className:"custom-cursor-ring",animate:{x:r.x-20,y:r.y-20,scale:e?1.5:1},transition:{type:"spring",stiffness:150,damping:15,mass:.5},style:{position:"fixed",width:"40px",height:"40px",borderRadius:"50%",border:"2px solid #DAA520",pointerEvents:"none",zIndex:9999,opacity:.5,mixBlendMode:"difference"}})]})},TT=({theme:r})=>{const t=V.useRef(null);return V.useEffect(()=>{const e=t.current;if(!e)return;const n=e.getContext("2d");let s,a=0;const l=()=>{e.width=window.innerWidth,e.height=window.innerHeight};l(),window.addEventListener("resize",l);const c=()=>{a+=.003,n.clearRect(0,0,e.width,e.height),(r==="dark"?[{x:.2,y:.3,color:"rgba(218, 165, 32, 0.08)"},{x:.8,y:.2,color:"rgba(139, 69, 19, 0.06)"},{x:.5,y:.8,color:"rgba(255, 215, 0, 0.05)"},{x:.1,y:.7,color:"rgba(184, 134, 11, 0.07)"}]:[{x:.2,y:.3,color:"rgba(218, 165, 32, 0.12)"},{x:.8,y:.2,color:"rgba(255, 215, 0, 0.08)"},{x:.5,y:.8,color:"rgba(184, 134, 11, 0.10)"},{x:.1,y:.7,color:"rgba(139, 69, 19, 0.06)"}]).forEach((d,p)=>{const m=Math.sin(a+p*2)*100,y=Math.cos(a+p*2)*100,w=e.width*d.x+m,A=e.height*d.y+y,x=n.createRadialGradient(w,A,0,w,A,e.width*.5);x.addColorStop(0,d.color),x.addColorStop(1,"rgba(0, 0, 0, 0)"),n.fillStyle=x,n.fillRect(0,0,e.width,e.height)}),s=requestAnimationFrame(c)};return c(),()=>{window.removeEventListener("resize",l),cancelAnimationFrame(s)}},[r]),k.jsx(Mt.canvas,{ref:t,className:"fixed top-0 left-0 w-full h-full pointer-events-none",style:{zIndex:0},initial:{opacity:0},animate:{opacity:1},transition:{duration:1}})},PT=()=>{const[r,t]=V.useState(()=>typeof window<"u"&&localStorage.getItem("theme")?localStorage.getItem("theme"):"dark"),[e,n]=V.useState(!1);V.useEffect(()=>{const a=document.documentElement;r==="dark"?(a.classList.add("dark"),localStorage.setItem("theme","dark")):(a.classList.remove("dark"),localStorage.setItem("theme","light"))},[r]);const s=()=>{t(a=>a==="light"?"dark":"light")};return V.useEffect(()=>{const a=document.querySelectorAll("main section"),l=document.querySelectorAll(".nav-link"),c=()=>{let h="";a.forEach(d=>{const p=d.offsetTop,m=window.scrollY+80;m>=p&&m<p+d.clientHeight&&(h=d.getAttribute("id"))}),l.forEach(d=>{d.classList.remove("active"),d.getAttribute("href")&&d.getAttribute("href").includes(h)&&d.classList.add("active")})};return window.addEventListener("scroll",c),c(),()=>{window.removeEventListener("scroll",c)}},[]),k.jsxs(Um,{children:[k.jsx(CT,{}),k.jsx(TT,{theme:r}),k.jsxs("div",{className:"antialiased font-inter bg-[#FDFBF7] dark:bg-gray-900 transition-colors duration-500 relative",children:[k.jsx(kE,{theme:r,toggleTheme:s}),k.jsxs("main",{className:"relative z-10",children:[k.jsx(ME,{onShowResume:()=>n(!0)}),k.jsx(IE,{}),k.jsx(OE,{}),k.jsx(WE,{}),k.jsx(GE,{}),k.jsx(XE,{}),k.jsx(KE,{})]}),k.jsx(RE,{})]}),e&&k.jsx(Um,{children:k.jsx(_T,{onClose:()=>n(!1)})})]})},py=document.getElementById("root");py?Kx.createRoot(py).render(k.jsx(zx.StrictMode,{children:k.jsx(PT,{})})):console.error("Root element with ID 'root' not found in the DOM.");
