var Pm=s=>{throw TypeError(s)};var Pu=(s,t,e)=>t.has(s)||Pm("Cannot "+e);var Ut=(s,t,e)=>(Pu(s,t,"read from private field"),e?e.call(s):t.get(s)),Nn=(s,t,e)=>t.has(s)?Pm("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,e),ze=(s,t,e,n)=>(Pu(s,t,"write to private field"),n?n.call(s,e):t.set(s,e),e),Fn=(s,t,e)=>(Pu(s,t,"access private method"),e);var km=(s,t,e,n)=>({set _(r){ze(s,t,r,e)},get _(){return Ut(s,t,n)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function e(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=e(r);fetch(r.href,a)}})();function Bh(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var ku={exports:{}},Ur={},Ru={exports:{}},Tt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rm;function f1(){if(Rm)return Tt;Rm=1;var s=Symbol.for("react.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.iterator;function y(N){return N===null||typeof N!="object"?null:(N=m&&N[m]||N["@@iterator"],typeof N=="function"?N:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,x={};function E(N,z,nt){this.props=N,this.context=z,this.refs=x,this.updater=nt||w}E.prototype.isReactComponent={},E.prototype.setState=function(N,z){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,z,"setState")},E.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function S(){}S.prototype=E.prototype;function _(N,z,nt){this.props=N,this.context=z,this.refs=x,this.updater=nt||w}var C=_.prototype=new S;C.constructor=_,A(C,E.prototype),C.isPureReactComponent=!0;var R=Array.isArray,k=Object.prototype.hasOwnProperty,I={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function B(N,z,nt){var dt,wt={},yt=null,ut=null;if(z!=null)for(dt in z.ref!==void 0&&(ut=z.ref),z.key!==void 0&&(yt=""+z.key),z)k.call(z,dt)&&!D.hasOwnProperty(dt)&&(wt[dt]=z[dt]);var Ct=arguments.length-2;if(Ct===1)wt.children=nt;else if(1<Ct){for(var kt=Array(Ct),Pt=0;Pt<Ct;Pt++)kt[Pt]=arguments[Pt+2];wt.children=kt}if(N&&N.defaultProps)for(dt in Ct=N.defaultProps,Ct)wt[dt]===void 0&&(wt[dt]=Ct[dt]);return{$$typeof:s,type:N,key:yt,ref:ut,props:wt,_owner:I.current}}function H(N,z){return{$$typeof:s,type:N.type,key:z,ref:N.ref,props:N.props,_owner:N._owner}}function G(N){return typeof N=="object"&&N!==null&&N.$$typeof===s}function Q(N){var z={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(nt){return z[nt]})}var ht=/\/+/g;function lt(N,z){return typeof N=="object"&&N!==null&&N.key!=null?Q(""+N.key):z.toString(36)}function et(N,z,nt,dt,wt){var yt=typeof N;(yt==="undefined"||yt==="boolean")&&(N=null);var ut=!1;if(N===null)ut=!0;else switch(yt){case"string":case"number":ut=!0;break;case"object":switch(N.$$typeof){case s:case t:ut=!0}}if(ut)return ut=N,wt=wt(ut),N=dt===""?"."+lt(ut,0):dt,R(wt)?(nt="",N!=null&&(nt=N.replace(ht,"$&/")+"/"),et(wt,z,nt,"",function(Pt){return Pt})):wt!=null&&(G(wt)&&(wt=H(wt,nt+(!wt.key||ut&&ut.key===wt.key?"":(""+wt.key).replace(ht,"$&/")+"/")+N)),z.push(wt)),1;if(ut=0,dt=dt===""?".":dt+":",R(N))for(var Ct=0;Ct<N.length;Ct++){yt=N[Ct];var kt=dt+lt(yt,Ct);ut+=et(yt,z,nt,kt,wt)}else if(kt=y(N),typeof kt=="function")for(N=kt.call(N),Ct=0;!(yt=N.next()).done;)yt=yt.value,kt=dt+lt(yt,Ct++),ut+=et(yt,z,nt,kt,wt);else if(yt==="object")throw z=String(N),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.");return ut}function Et(N,z,nt){if(N==null)return N;var dt=[],wt=0;return et(N,dt,"","",function(yt){return z.call(nt,yt,wt++)}),dt}function q(N){if(N._status===-1){var z=N._result;z=z(),z.then(function(nt){(N._status===0||N._status===-1)&&(N._status=1,N._result=nt)},function(nt){(N._status===0||N._status===-1)&&(N._status=2,N._result=nt)}),N._status===-1&&(N._status=0,N._result=z)}if(N._status===1)return N._result.default;throw N._result}var U={current:null},$={transition:null},J={ReactCurrentDispatcher:U,ReactCurrentBatchConfig:$,ReactCurrentOwner:I};function Z(){throw Error("act(...) is not supported in production builds of React.")}return Tt.Children={map:Et,forEach:function(N,z,nt){Et(N,function(){z.apply(this,arguments)},nt)},count:function(N){var z=0;return Et(N,function(){z++}),z},toArray:function(N){return Et(N,function(z){return z})||[]},only:function(N){if(!G(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Tt.Component=E,Tt.Fragment=e,Tt.Profiler=r,Tt.PureComponent=_,Tt.StrictMode=n,Tt.Suspense=h,Tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J,Tt.act=Z,Tt.cloneElement=function(N,z,nt){if(N==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+N+".");var dt=A({},N.props),wt=N.key,yt=N.ref,ut=N._owner;if(z!=null){if(z.ref!==void 0&&(yt=z.ref,ut=I.current),z.key!==void 0&&(wt=""+z.key),N.type&&N.type.defaultProps)var Ct=N.type.defaultProps;for(kt in z)k.call(z,kt)&&!D.hasOwnProperty(kt)&&(dt[kt]=z[kt]===void 0&&Ct!==void 0?Ct[kt]:z[kt])}var kt=arguments.length-2;if(kt===1)dt.children=nt;else if(1<kt){Ct=Array(kt);for(var Pt=0;Pt<kt;Pt++)Ct[Pt]=arguments[Pt+2];dt.children=Ct}return{$$typeof:s,type:N.type,key:wt,ref:yt,props:dt,_owner:ut}},Tt.createContext=function(N){return N={$$typeof:l,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},N.Provider={$$typeof:a,_context:N},N.Consumer=N},Tt.createElement=B,Tt.createFactory=function(N){var z=B.bind(null,N);return z.type=N,z},Tt.createRef=function(){return{current:null}},Tt.forwardRef=function(N){return{$$typeof:c,render:N}},Tt.isValidElement=G,Tt.lazy=function(N){return{$$typeof:p,_payload:{_status:-1,_result:N},_init:q}},Tt.memo=function(N,z){return{$$typeof:d,type:N,compare:z===void 0?null:z}},Tt.startTransition=function(N){var z=$.transition;$.transition={};try{N()}finally{$.transition=z}},Tt.unstable_act=Z,Tt.useCallback=function(N,z){return U.current.useCallback(N,z)},Tt.useContext=function(N){return U.current.useContext(N)},Tt.useDebugValue=function(){},Tt.useDeferredValue=function(N){return U.current.useDeferredValue(N)},Tt.useEffect=function(N,z){return U.current.useEffect(N,z)},Tt.useId=function(){return U.current.useId()},Tt.useImperativeHandle=function(N,z,nt){return U.current.useImperativeHandle(N,z,nt)},Tt.useInsertionEffect=function(N,z){return U.current.useInsertionEffect(N,z)},Tt.useLayoutEffect=function(N,z){return U.current.useLayoutEffect(N,z)},Tt.useMemo=function(N,z){return U.current.useMemo(N,z)},Tt.useReducer=function(N,z,nt){return U.current.useReducer(N,z,nt)},Tt.useRef=function(N){return U.current.useRef(N)},Tt.useState=function(N){return U.current.useState(N)},Tt.useSyncExternalStore=function(N,z,nt){return U.current.useSyncExternalStore(N,z,nt)},Tt.useTransition=function(){return U.current.useTransition()},Tt.version="18.3.1",Tt}var Lm;function Vh(){return Lm||(Lm=1,Ru.exports=f1()),Ru.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mm;function p1(){if(Mm)return Ur;Mm=1;var s=Vh(),t=Symbol.for("react.element"),e=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,r=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(c,h,d){var p,m={},y=null,w=null;d!==void 0&&(y=""+d),h.key!==void 0&&(y=""+h.key),h.ref!==void 0&&(w=h.ref);for(p in h)n.call(h,p)&&!a.hasOwnProperty(p)&&(m[p]=h[p]);if(c&&c.defaultProps)for(p in h=c.defaultProps,h)m[p]===void 0&&(m[p]=h[p]);return{$$typeof:t,type:c,key:y,ref:w,props:m,_owner:r.current}}return Ur.Fragment=e,Ur.jsx=l,Ur.jsxs=l,Ur}var Im;function m1(){return Im||(Im=1,ku.exports=p1()),ku.exports}var T=m1(),O=Vh();const g1=Bh(O);var Ga={},Lu={exports:{}},He={},Mu={exports:{}},Iu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dm;function y1(){return Dm||(Dm=1,(function(s){function t($,J){var Z=$.length;$.push(J);t:for(;0<Z;){var N=Z-1>>>1,z=$[N];if(0<r(z,J))$[N]=J,$[Z]=z,Z=N;else break t}}function e($){return $.length===0?null:$[0]}function n($){if($.length===0)return null;var J=$[0],Z=$.pop();if(Z!==J){$[0]=Z;t:for(var N=0,z=$.length,nt=z>>>1;N<nt;){var dt=2*(N+1)-1,wt=$[dt],yt=dt+1,ut=$[yt];if(0>r(wt,Z))yt<z&&0>r(ut,wt)?($[N]=ut,$[yt]=Z,N=yt):($[N]=wt,$[dt]=Z,N=dt);else if(yt<z&&0>r(ut,Z))$[N]=ut,$[yt]=Z,N=yt;else break t}}return J}function r($,J){var Z=$.sortIndex-J.sortIndex;return Z!==0?Z:$.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;s.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();s.unstable_now=function(){return l.now()-c}}var h=[],d=[],p=1,m=null,y=3,w=!1,A=!1,x=!1,E=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C($){for(var J=e(d);J!==null;){if(J.callback===null)n(d);else if(J.startTime<=$)n(d),J.sortIndex=J.expirationTime,t(h,J);else break;J=e(d)}}function R($){if(x=!1,C($),!A)if(e(h)!==null)A=!0,q(k);else{var J=e(d);J!==null&&U(R,J.startTime-$)}}function k($,J){A=!1,x&&(x=!1,S(B),B=-1),w=!0;var Z=y;try{for(C(J),m=e(h);m!==null&&(!(m.expirationTime>J)||$&&!Q());){var N=m.callback;if(typeof N=="function"){m.callback=null,y=m.priorityLevel;var z=N(m.expirationTime<=J);J=s.unstable_now(),typeof z=="function"?m.callback=z:m===e(h)&&n(h),C(J)}else n(h);m=e(h)}if(m!==null)var nt=!0;else{var dt=e(d);dt!==null&&U(R,dt.startTime-J),nt=!1}return nt}finally{m=null,y=Z,w=!1}}var I=!1,D=null,B=-1,H=5,G=-1;function Q(){return!(s.unstable_now()-G<H)}function ht(){if(D!==null){var $=s.unstable_now();G=$;var J=!0;try{J=D(!0,$)}finally{J?lt():(I=!1,D=null)}}else I=!1}var lt;if(typeof _=="function")lt=function(){_(ht)};else if(typeof MessageChannel<"u"){var et=new MessageChannel,Et=et.port2;et.port1.onmessage=ht,lt=function(){Et.postMessage(null)}}else lt=function(){E(ht,0)};function q($){D=$,I||(I=!0,lt())}function U($,J){B=E(function(){$(s.unstable_now())},J)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function($){$.callback=null},s.unstable_continueExecution=function(){A||w||(A=!0,q(k))},s.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<$?Math.floor(1e3/$):5},s.unstable_getCurrentPriorityLevel=function(){return y},s.unstable_getFirstCallbackNode=function(){return e(h)},s.unstable_next=function($){switch(y){case 1:case 2:case 3:var J=3;break;default:J=y}var Z=y;y=J;try{return $()}finally{y=Z}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function($,J){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var Z=y;y=$;try{return J()}finally{y=Z}},s.unstable_scheduleCallback=function($,J,Z){var N=s.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?N+Z:N):Z=N,$){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=Z+z,$={id:p++,callback:J,priorityLevel:$,startTime:Z,expirationTime:z,sortIndex:-1},Z>N?($.sortIndex=Z,t(d,$),e(h)===null&&$===e(d)&&(x?(S(B),B=-1):x=!0,U(R,Z-N))):($.sortIndex=z,t(h,$),A||w||(A=!0,q(k))),$},s.unstable_shouldYield=Q,s.unstable_wrapCallback=function($){var J=y;return function(){var Z=y;y=J;try{return $.apply(this,arguments)}finally{y=Z}}}})(Iu)),Iu}var Nm;function v1(){return Nm||(Nm=1,Mu.exports=y1()),Mu.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fm;function w1(){if(Fm)return He;Fm=1;var s=Vh(),t=v1();function e(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,r={};function a(i,o){l(i,o),l(i+"Capture",o)}function l(i,o){for(r[i]=o,i=0;i<o.length;i++)n.add(o[i])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},m={};function y(i){return h.call(m,i)?!0:h.call(p,i)?!1:d.test(i)?m[i]=!0:(p[i]=!0,!1)}function w(i,o,u,f){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return f?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function A(i,o,u,f){if(o===null||typeof o>"u"||w(i,o,u,f))return!0;if(f)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function x(i,o,u,f,g,v,b){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=f,this.attributeNamespace=g,this.mustUseProperty=u,this.propertyName=i,this.type=o,this.sanitizeURL=v,this.removeEmptyString=b}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){E[i]=new x(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];E[o]=new x(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){E[i]=new x(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){E[i]=new x(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){E[i]=new x(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){E[i]=new x(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){E[i]=new x(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){E[i]=new x(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){E[i]=new x(i,5,!1,i.toLowerCase(),null,!1,!1)});var S=/[\-:]([a-z])/g;function _(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(S,_);E[o]=new x(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(S,_);E[o]=new x(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(S,_);E[o]=new x(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){E[i]=new x(i,1,!1,i.toLowerCase(),null,!1,!1)}),E.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){E[i]=new x(i,1,!1,i.toLowerCase(),null,!0,!0)});function C(i,o,u,f){var g=E.hasOwnProperty(o)?E[o]:null;(g!==null?g.type!==0:f||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(A(o,u,g,f)&&(u=null),f||g===null?y(o)&&(u===null?i.removeAttribute(o):i.setAttribute(o,""+u)):g.mustUseProperty?i[g.propertyName]=u===null?g.type===3?!1:"":u:(o=g.attributeName,f=g.attributeNamespace,u===null?i.removeAttribute(o):(g=g.type,u=g===3||g===4&&u===!0?"":""+u,f?i.setAttributeNS(f,o,u):i.setAttribute(o,u))))}var R=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=Symbol.for("react.element"),I=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),G=Symbol.for("react.provider"),Q=Symbol.for("react.context"),ht=Symbol.for("react.forward_ref"),lt=Symbol.for("react.suspense"),et=Symbol.for("react.suspense_list"),Et=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),U=Symbol.for("react.offscreen"),$=Symbol.iterator;function J(i){return i===null||typeof i!="object"?null:(i=$&&i[$]||i["@@iterator"],typeof i=="function"?i:null)}var Z=Object.assign,N;function z(i){if(N===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);N=o&&o[1]||""}return`
`+N+i}var nt=!1;function dt(i,o){if(!i||nt)return"";nt=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(V){var f=V}Reflect.construct(i,[],o)}else{try{o.call()}catch(V){f=V}i.call(o.prototype)}else{try{throw Error()}catch(V){f=V}i()}}catch(V){if(V&&f&&typeof V.stack=="string"){for(var g=V.stack.split(`
`),v=f.stack.split(`
`),b=g.length-1,P=v.length-1;1<=b&&0<=P&&g[b]!==v[P];)P--;for(;1<=b&&0<=P;b--,P--)if(g[b]!==v[P]){if(b!==1||P!==1)do if(b--,P--,0>P||g[b]!==v[P]){var L=`
`+g[b].replace(" at new "," at ");return i.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",i.displayName)),L}while(1<=b&&0<=P);break}}}finally{nt=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?z(i):""}function wt(i){switch(i.tag){case 5:return z(i.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return i=dt(i.type,!1),i;case 11:return i=dt(i.type.render,!1),i;case 1:return i=dt(i.type,!0),i;default:return""}}function yt(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case D:return"Fragment";case I:return"Portal";case H:return"Profiler";case B:return"StrictMode";case lt:return"Suspense";case et:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case Q:return(i.displayName||"Context")+".Consumer";case G:return(i._context.displayName||"Context")+".Provider";case ht:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Et:return o=i.displayName||null,o!==null?o:yt(i.type)||"Memo";case q:o=i._payload,i=i._init;try{return yt(i(o))}catch{}}return null}function ut(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return yt(o);case 8:return o===B?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Ct(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function kt(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Pt(i){var o=kt(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),f=""+i[o];if(!i.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,v=u.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return g.call(this)},set:function(b){f=""+b,v.call(this,b)}}),Object.defineProperty(i,o,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(b){f=""+b},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Ne(i){i._valueTracker||(i._valueTracker=Pt(i))}function en(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var u=o.getValue(),f="";return i&&(f=kt(i)?i.checked?"true":"false":i.value),i=f,i!==u?(o.setValue(i),!0):!1}function Rt(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Ft(i,o){var u=o.checked;return Z({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function qt(i,o){var u=o.defaultValue==null?"":o.defaultValue,f=o.checked!=null?o.checked:o.defaultChecked;u=Ct(o.value!=null?o.value:u),i._wrapperState={initialChecked:f,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Zt(i,o){o=o.checked,o!=null&&C(i,"checked",o,!1)}function kn(i,o){Zt(i,o);var u=Ct(o.value),f=o.type;if(u!=null)f==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(f==="submit"||f==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?Ii(i,o.type,u):o.hasOwnProperty("defaultValue")&&Ii(i,o.type,Ct(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function ai(i,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var f=o.type;if(!(f!=="submit"&&f!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,u||o===i.value||(i.value=o),i.defaultValue=o}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function Ii(i,o,u){(o!=="number"||Rt(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var Di=Array.isArray;function pn(i,o,u,f){if(i=i.options,o){o={};for(var g=0;g<u.length;g++)o["$"+u[g]]=!0;for(u=0;u<i.length;u++)g=o.hasOwnProperty("$"+i[u].value),i[u].selected!==g&&(i[u].selected=g),g&&f&&(i[u].defaultSelected=!0)}else{for(u=""+Ct(u),o=null,g=0;g<i.length;g++){if(i[g].value===u){i[g].selected=!0,f&&(i[g].defaultSelected=!0);return}o!==null||i[g].disabled||(o=i[g])}o!==null&&(o.selected=!0)}}function rr(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(e(91));return Z({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function No(i,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(e(92));if(Di(u)){if(1<u.length)throw Error(e(93));u=u[0]}o=u}o==null&&(o=""),u=o}i._wrapperState={initialValue:Ct(u)}}function Fo(i,o){var u=Ct(o.value),f=Ct(o.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),o.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),f!=null&&(i.defaultValue=""+f)}function Oo(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function jo(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nn(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?jo(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var mn,gn=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,f,g){MSApp.execUnsafeLocalFunction(function(){return i(o,u,f,g)})}:i})(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(mn=mn||document.createElement("div"),mn.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=mn.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function Xn(i,o){if(o){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=o;return}}i.textContent=o}var or={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yw=["Webkit","ms","Moz","O"];Object.keys(or).forEach(function(i){yw.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),or[o]=or[i]})});function Hd(i,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||or.hasOwnProperty(i)&&or[i]?(""+o).trim():o+"px"}function Ud(i,o){i=i.style;for(var u in o)if(o.hasOwnProperty(u)){var f=u.indexOf("--")===0,g=Hd(u,o[u],f);u==="float"&&(u="cssFloat"),f?i.setProperty(u,g):i[u]=g}}var vw=Z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vl(i,o){if(o){if(vw[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(e(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(e(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(e(61))}if(o.style!=null&&typeof o.style!="object")throw Error(e(62))}}function zl(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hl=null;function Ul(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var $l=null,hs=null,ds=null;function $d(i){if(i=Pr(i)){if(typeof $l!="function")throw Error(e(280));var o=i.stateNode;o&&(o=aa(o),$l(i.stateNode,i.type,o))}}function Wd(i){hs?ds?ds.push(i):ds=[i]:hs=i}function Gd(){if(hs){var i=hs,o=ds;if(ds=hs=null,$d(i),o)for(i=0;i<o.length;i++)$d(o[i])}}function Xd(i,o){return i(o)}function Kd(){}var Wl=!1;function qd(i,o,u){if(Wl)return i(o,u);Wl=!0;try{return Xd(i,o,u)}finally{Wl=!1,(hs!==null||ds!==null)&&(Kd(),Gd())}}function ar(i,o){var u=i.stateNode;if(u===null)return null;var f=aa(u);if(f===null)return null;u=f[o];t:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break t;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(e(231,o,typeof u));return u}var Gl=!1;if(c)try{var lr={};Object.defineProperty(lr,"passive",{get:function(){Gl=!0}}),window.addEventListener("test",lr,lr),window.removeEventListener("test",lr,lr)}catch{Gl=!1}function ww(i,o,u,f,g,v,b,P,L){var V=Array.prototype.slice.call(arguments,3);try{o.apply(u,V)}catch(X){this.onError(X)}}var cr=!1,Bo=null,Vo=!1,Xl=null,xw={onError:function(i){cr=!0,Bo=i}};function Aw(i,o,u,f,g,v,b,P,L){cr=!1,Bo=null,ww.apply(xw,arguments)}function bw(i,o,u,f,g,v,b,P,L){if(Aw.apply(this,arguments),cr){if(cr){var V=Bo;cr=!1,Bo=null}else throw Error(e(198));Vo||(Vo=!0,Xl=V)}}function Ni(i){var o=i,u=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(u=o.return),i=o.return;while(i)}return o.tag===3?u:null}function Yd(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function Qd(i){if(Ni(i)!==i)throw Error(e(188))}function Sw(i){var o=i.alternate;if(!o){if(o=Ni(i),o===null)throw Error(e(188));return o!==i?null:i}for(var u=i,f=o;;){var g=u.return;if(g===null)break;var v=g.alternate;if(v===null){if(f=g.return,f!==null){u=f;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===u)return Qd(g),i;if(v===f)return Qd(g),o;v=v.sibling}throw Error(e(188))}if(u.return!==f.return)u=g,f=v;else{for(var b=!1,P=g.child;P;){if(P===u){b=!0,u=g,f=v;break}if(P===f){b=!0,f=g,u=v;break}P=P.sibling}if(!b){for(P=v.child;P;){if(P===u){b=!0,u=v,f=g;break}if(P===f){b=!0,f=v,u=g;break}P=P.sibling}if(!b)throw Error(e(189))}}if(u.alternate!==f)throw Error(e(190))}if(u.tag!==3)throw Error(e(188));return u.stateNode.current===u?i:o}function Zd(i){return i=Sw(i),i!==null?Jd(i):null}function Jd(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=Jd(i);if(o!==null)return o;i=i.sibling}return null}var tf=t.unstable_scheduleCallback,ef=t.unstable_cancelCallback,Ew=t.unstable_shouldYield,Cw=t.unstable_requestPaint,Jt=t.unstable_now,_w=t.unstable_getCurrentPriorityLevel,Kl=t.unstable_ImmediatePriority,nf=t.unstable_UserBlockingPriority,zo=t.unstable_NormalPriority,Tw=t.unstable_LowPriority,sf=t.unstable_IdlePriority,Ho=null,Rn=null;function Pw(i){if(Rn&&typeof Rn.onCommitFiberRoot=="function")try{Rn.onCommitFiberRoot(Ho,i,void 0,(i.current.flags&128)===128)}catch{}}var yn=Math.clz32?Math.clz32:Lw,kw=Math.log,Rw=Math.LN2;function Lw(i){return i>>>=0,i===0?32:31-(kw(i)/Rw|0)|0}var Uo=64,$o=4194304;function ur(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Wo(i,o){var u=i.pendingLanes;if(u===0)return 0;var f=0,g=i.suspendedLanes,v=i.pingedLanes,b=u&268435455;if(b!==0){var P=b&~g;P!==0?f=ur(P):(v&=b,v!==0&&(f=ur(v)))}else b=u&~g,b!==0?f=ur(b):v!==0&&(f=ur(v));if(f===0)return 0;if(o!==0&&o!==f&&(o&g)===0&&(g=f&-f,v=o&-o,g>=v||g===16&&(v&4194240)!==0))return o;if((f&4)!==0&&(f|=u&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=f;0<o;)u=31-yn(o),g=1<<u,f|=i[u],o&=~g;return f}function Mw(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Iw(i,o){for(var u=i.suspendedLanes,f=i.pingedLanes,g=i.expirationTimes,v=i.pendingLanes;0<v;){var b=31-yn(v),P=1<<b,L=g[b];L===-1?((P&u)===0||(P&f)!==0)&&(g[b]=Mw(P,o)):L<=o&&(i.expiredLanes|=P),v&=~P}}function ql(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function rf(){var i=Uo;return Uo<<=1,(Uo&4194240)===0&&(Uo=64),i}function Yl(i){for(var o=[],u=0;31>u;u++)o.push(i);return o}function hr(i,o,u){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-yn(o),i[o]=u}function Dw(i,o){var u=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var f=i.eventTimes;for(i=i.expirationTimes;0<u;){var g=31-yn(u),v=1<<g;o[g]=0,f[g]=-1,i[g]=-1,u&=~v}}function Ql(i,o){var u=i.entangledLanes|=o;for(i=i.entanglements;u;){var f=31-yn(u),g=1<<f;g&o|i[f]&o&&(i[f]|=o),u&=~g}}var Dt=0;function of(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var af,Zl,lf,cf,uf,Jl=!1,Go=[],li=null,ci=null,ui=null,dr=new Map,fr=new Map,hi=[],Nw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hf(i,o){switch(i){case"focusin":case"focusout":li=null;break;case"dragenter":case"dragleave":ci=null;break;case"mouseover":case"mouseout":ui=null;break;case"pointerover":case"pointerout":dr.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":fr.delete(o.pointerId)}}function pr(i,o,u,f,g,v){return i===null||i.nativeEvent!==v?(i={blockedOn:o,domEventName:u,eventSystemFlags:f,nativeEvent:v,targetContainers:[g]},o!==null&&(o=Pr(o),o!==null&&Zl(o)),i):(i.eventSystemFlags|=f,o=i.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),i)}function Fw(i,o,u,f,g){switch(o){case"focusin":return li=pr(li,i,o,u,f,g),!0;case"dragenter":return ci=pr(ci,i,o,u,f,g),!0;case"mouseover":return ui=pr(ui,i,o,u,f,g),!0;case"pointerover":var v=g.pointerId;return dr.set(v,pr(dr.get(v)||null,i,o,u,f,g)),!0;case"gotpointercapture":return v=g.pointerId,fr.set(v,pr(fr.get(v)||null,i,o,u,f,g)),!0}return!1}function df(i){var o=Fi(i.target);if(o!==null){var u=Ni(o);if(u!==null){if(o=u.tag,o===13){if(o=Yd(u),o!==null){i.blockedOn=o,uf(i.priority,function(){lf(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Xo(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var u=ec(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var f=new u.constructor(u.type,u);Hl=f,u.target.dispatchEvent(f),Hl=null}else return o=Pr(u),o!==null&&Zl(o),i.blockedOn=u,!1;o.shift()}return!0}function ff(i,o,u){Xo(i)&&u.delete(o)}function Ow(){Jl=!1,li!==null&&Xo(li)&&(li=null),ci!==null&&Xo(ci)&&(ci=null),ui!==null&&Xo(ui)&&(ui=null),dr.forEach(ff),fr.forEach(ff)}function mr(i,o){i.blockedOn===o&&(i.blockedOn=null,Jl||(Jl=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Ow)))}function gr(i){function o(g){return mr(g,i)}if(0<Go.length){mr(Go[0],i);for(var u=1;u<Go.length;u++){var f=Go[u];f.blockedOn===i&&(f.blockedOn=null)}}for(li!==null&&mr(li,i),ci!==null&&mr(ci,i),ui!==null&&mr(ui,i),dr.forEach(o),fr.forEach(o),u=0;u<hi.length;u++)f=hi[u],f.blockedOn===i&&(f.blockedOn=null);for(;0<hi.length&&(u=hi[0],u.blockedOn===null);)df(u),u.blockedOn===null&&hi.shift()}var fs=R.ReactCurrentBatchConfig,Ko=!0;function jw(i,o,u,f){var g=Dt,v=fs.transition;fs.transition=null;try{Dt=1,tc(i,o,u,f)}finally{Dt=g,fs.transition=v}}function Bw(i,o,u,f){var g=Dt,v=fs.transition;fs.transition=null;try{Dt=4,tc(i,o,u,f)}finally{Dt=g,fs.transition=v}}function tc(i,o,u,f){if(Ko){var g=ec(i,o,u,f);if(g===null)vc(i,o,f,qo,u),hf(i,f);else if(Fw(g,i,o,u,f))f.stopPropagation();else if(hf(i,f),o&4&&-1<Nw.indexOf(i)){for(;g!==null;){var v=Pr(g);if(v!==null&&af(v),v=ec(i,o,u,f),v===null&&vc(i,o,f,qo,u),v===g)break;g=v}g!==null&&f.stopPropagation()}else vc(i,o,f,null,u)}}var qo=null;function ec(i,o,u,f){if(qo=null,i=Ul(f),i=Fi(i),i!==null)if(o=Ni(i),o===null)i=null;else if(u=o.tag,u===13){if(i=Yd(o),i!==null)return i;i=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return qo=i,null}function pf(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_w()){case Kl:return 1;case nf:return 4;case zo:case Tw:return 16;case sf:return 536870912;default:return 16}default:return 16}}var di=null,nc=null,Yo=null;function mf(){if(Yo)return Yo;var i,o=nc,u=o.length,f,g="value"in di?di.value:di.textContent,v=g.length;for(i=0;i<u&&o[i]===g[i];i++);var b=u-i;for(f=1;f<=b&&o[u-f]===g[v-f];f++);return Yo=g.slice(i,1<f?1-f:void 0)}function Qo(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Zo(){return!0}function gf(){return!1}function Xe(i){function o(u,f,g,v,b){this._reactName=u,this._targetInst=g,this.type=f,this.nativeEvent=v,this.target=b,this.currentTarget=null;for(var P in i)i.hasOwnProperty(P)&&(u=i[P],this[P]=u?u(v):v[P]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Zo:gf,this.isPropagationStopped=gf,this}return Z(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Zo)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Zo)},persist:function(){},isPersistent:Zo}),o}var ps={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ic=Xe(ps),yr=Z({},ps,{view:0,detail:0}),Vw=Xe(yr),sc,rc,vr,Jo=Z({},yr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ac,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==vr&&(vr&&i.type==="mousemove"?(sc=i.screenX-vr.screenX,rc=i.screenY-vr.screenY):rc=sc=0,vr=i),sc)},movementY:function(i){return"movementY"in i?i.movementY:rc}}),yf=Xe(Jo),zw=Z({},Jo,{dataTransfer:0}),Hw=Xe(zw),Uw=Z({},yr,{relatedTarget:0}),oc=Xe(Uw),$w=Z({},ps,{animationName:0,elapsedTime:0,pseudoElement:0}),Ww=Xe($w),Gw=Z({},ps,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Xw=Xe(Gw),Kw=Z({},ps,{data:0}),vf=Xe(Kw),qw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zw(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=Qw[i])?!!o[i]:!1}function ac(){return Zw}var Jw=Z({},yr,{key:function(i){if(i.key){var o=qw[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Qo(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Yw[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ac,charCode:function(i){return i.type==="keypress"?Qo(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Qo(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),tx=Xe(Jw),ex=Z({},Jo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wf=Xe(ex),nx=Z({},yr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ac}),ix=Xe(nx),sx=Z({},ps,{propertyName:0,elapsedTime:0,pseudoElement:0}),rx=Xe(sx),ox=Z({},Jo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),ax=Xe(ox),lx=[9,13,27,32],lc=c&&"CompositionEvent"in window,wr=null;c&&"documentMode"in document&&(wr=document.documentMode);var cx=c&&"TextEvent"in window&&!wr,xf=c&&(!lc||wr&&8<wr&&11>=wr),Af=" ",bf=!1;function Sf(i,o){switch(i){case"keyup":return lx.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ef(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ms=!1;function ux(i,o){switch(i){case"compositionend":return Ef(o);case"keypress":return o.which!==32?null:(bf=!0,Af);case"textInput":return i=o.data,i===Af&&bf?null:i;default:return null}}function hx(i,o){if(ms)return i==="compositionend"||!lc&&Sf(i,o)?(i=mf(),Yo=nc=di=null,ms=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return xf&&o.locale!=="ko"?null:o.data;default:return null}}var dx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cf(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!dx[i.type]:o==="textarea"}function _f(i,o,u,f){Wd(f),o=sa(o,"onChange"),0<o.length&&(u=new ic("onChange","change",null,u,f),i.push({event:u,listeners:o}))}var xr=null,Ar=null;function fx(i){$f(i,0)}function ta(i){var o=xs(i);if(en(o))return i}function px(i,o){if(i==="change")return o}var Tf=!1;if(c){var cc;if(c){var uc="oninput"in document;if(!uc){var Pf=document.createElement("div");Pf.setAttribute("oninput","return;"),uc=typeof Pf.oninput=="function"}cc=uc}else cc=!1;Tf=cc&&(!document.documentMode||9<document.documentMode)}function kf(){xr&&(xr.detachEvent("onpropertychange",Rf),Ar=xr=null)}function Rf(i){if(i.propertyName==="value"&&ta(Ar)){var o=[];_f(o,Ar,i,Ul(i)),qd(fx,o)}}function mx(i,o,u){i==="focusin"?(kf(),xr=o,Ar=u,xr.attachEvent("onpropertychange",Rf)):i==="focusout"&&kf()}function gx(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return ta(Ar)}function yx(i,o){if(i==="click")return ta(o)}function vx(i,o){if(i==="input"||i==="change")return ta(o)}function wx(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var vn=typeof Object.is=="function"?Object.is:wx;function br(i,o){if(vn(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var u=Object.keys(i),f=Object.keys(o);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var g=u[f];if(!h.call(o,g)||!vn(i[g],o[g]))return!1}return!0}function Lf(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Mf(i,o){var u=Lf(i);i=0;for(var f;u;){if(u.nodeType===3){if(f=i+u.textContent.length,i<=o&&f>=o)return{node:u,offset:o-i};i=f}t:{for(;u;){if(u.nextSibling){u=u.nextSibling;break t}u=u.parentNode}u=void 0}u=Lf(u)}}function If(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?If(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function Df(){for(var i=window,o=Rt();o instanceof i.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)i=o.contentWindow;else break;o=Rt(i.document)}return o}function hc(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function xx(i){var o=Df(),u=i.focusedElem,f=i.selectionRange;if(o!==u&&u&&u.ownerDocument&&If(u.ownerDocument.documentElement,u)){if(f!==null&&hc(u)){if(o=f.start,i=f.end,i===void 0&&(i=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(i,u.value.length);else if(i=(o=u.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var g=u.textContent.length,v=Math.min(f.start,g);f=f.end===void 0?v:Math.min(f.end,g),!i.extend&&v>f&&(g=f,f=v,v=g),g=Mf(u,v);var b=Mf(u,f);g&&b&&(i.rangeCount!==1||i.anchorNode!==g.node||i.anchorOffset!==g.offset||i.focusNode!==b.node||i.focusOffset!==b.offset)&&(o=o.createRange(),o.setStart(g.node,g.offset),i.removeAllRanges(),v>f?(i.addRange(o),i.extend(b.node,b.offset)):(o.setEnd(b.node,b.offset),i.addRange(o)))}}for(o=[],i=u;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)i=o[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var Ax=c&&"documentMode"in document&&11>=document.documentMode,gs=null,dc=null,Sr=null,fc=!1;function Nf(i,o,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;fc||gs==null||gs!==Rt(f)||(f=gs,"selectionStart"in f&&hc(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Sr&&br(Sr,f)||(Sr=f,f=sa(dc,"onSelect"),0<f.length&&(o=new ic("onSelect","select",null,o,u),i.push({event:o,listeners:f}),o.target=gs)))}function ea(i,o){var u={};return u[i.toLowerCase()]=o.toLowerCase(),u["Webkit"+i]="webkit"+o,u["Moz"+i]="moz"+o,u}var ys={animationend:ea("Animation","AnimationEnd"),animationiteration:ea("Animation","AnimationIteration"),animationstart:ea("Animation","AnimationStart"),transitionend:ea("Transition","TransitionEnd")},pc={},Ff={};c&&(Ff=document.createElement("div").style,"AnimationEvent"in window||(delete ys.animationend.animation,delete ys.animationiteration.animation,delete ys.animationstart.animation),"TransitionEvent"in window||delete ys.transitionend.transition);function na(i){if(pc[i])return pc[i];if(!ys[i])return i;var o=ys[i],u;for(u in o)if(o.hasOwnProperty(u)&&u in Ff)return pc[i]=o[u];return i}var Of=na("animationend"),jf=na("animationiteration"),Bf=na("animationstart"),Vf=na("transitionend"),zf=new Map,Hf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fi(i,o){zf.set(i,o),a(o,[i])}for(var mc=0;mc<Hf.length;mc++){var gc=Hf[mc],bx=gc.toLowerCase(),Sx=gc[0].toUpperCase()+gc.slice(1);fi(bx,"on"+Sx)}fi(Of,"onAnimationEnd"),fi(jf,"onAnimationIteration"),fi(Bf,"onAnimationStart"),fi("dblclick","onDoubleClick"),fi("focusin","onFocus"),fi("focusout","onBlur"),fi(Vf,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Er="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ex=new Set("cancel close invalid load scroll toggle".split(" ").concat(Er));function Uf(i,o,u){var f=i.type||"unknown-event";i.currentTarget=u,bw(f,o,void 0,i),i.currentTarget=null}function $f(i,o){o=(o&4)!==0;for(var u=0;u<i.length;u++){var f=i[u],g=f.event;f=f.listeners;t:{var v=void 0;if(o)for(var b=f.length-1;0<=b;b--){var P=f[b],L=P.instance,V=P.currentTarget;if(P=P.listener,L!==v&&g.isPropagationStopped())break t;Uf(g,P,V),v=L}else for(b=0;b<f.length;b++){if(P=f[b],L=P.instance,V=P.currentTarget,P=P.listener,L!==v&&g.isPropagationStopped())break t;Uf(g,P,V),v=L}}}if(Vo)throw i=Xl,Vo=!1,Xl=null,i}function Vt(i,o){var u=o[Ec];u===void 0&&(u=o[Ec]=new Set);var f=i+"__bubble";u.has(f)||(Wf(o,i,2,!1),u.add(f))}function yc(i,o,u){var f=0;o&&(f|=4),Wf(u,i,f,o)}var ia="_reactListening"+Math.random().toString(36).slice(2);function Cr(i){if(!i[ia]){i[ia]=!0,n.forEach(function(u){u!=="selectionchange"&&(Ex.has(u)||yc(u,!1,i),yc(u,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[ia]||(o[ia]=!0,yc("selectionchange",!1,o))}}function Wf(i,o,u,f){switch(pf(o)){case 1:var g=jw;break;case 4:g=Bw;break;default:g=tc}u=g.bind(null,o,u,i),g=void 0,!Gl||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),f?g!==void 0?i.addEventListener(o,u,{capture:!0,passive:g}):i.addEventListener(o,u,!0):g!==void 0?i.addEventListener(o,u,{passive:g}):i.addEventListener(o,u,!1)}function vc(i,o,u,f,g){var v=f;if((o&1)===0&&(o&2)===0&&f!==null)t:for(;;){if(f===null)return;var b=f.tag;if(b===3||b===4){var P=f.stateNode.containerInfo;if(P===g||P.nodeType===8&&P.parentNode===g)break;if(b===4)for(b=f.return;b!==null;){var L=b.tag;if((L===3||L===4)&&(L=b.stateNode.containerInfo,L===g||L.nodeType===8&&L.parentNode===g))return;b=b.return}for(;P!==null;){if(b=Fi(P),b===null)return;if(L=b.tag,L===5||L===6){f=v=b;continue t}P=P.parentNode}}f=f.return}qd(function(){var V=v,X=Ul(u),K=[];t:{var W=zf.get(i);if(W!==void 0){var tt=ic,rt=i;switch(i){case"keypress":if(Qo(u)===0)break t;case"keydown":case"keyup":tt=tx;break;case"focusin":rt="focus",tt=oc;break;case"focusout":rt="blur",tt=oc;break;case"beforeblur":case"afterblur":tt=oc;break;case"click":if(u.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":tt=yf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":tt=Hw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":tt=ix;break;case Of:case jf:case Bf:tt=Ww;break;case Vf:tt=rx;break;case"scroll":tt=Vw;break;case"wheel":tt=ax;break;case"copy":case"cut":case"paste":tt=Xw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":tt=wf}var ot=(o&4)!==0,te=!ot&&i==="scroll",F=ot?W!==null?W+"Capture":null:W;ot=[];for(var M=V,j;M!==null;){j=M;var Y=j.stateNode;if(j.tag===5&&Y!==null&&(j=Y,F!==null&&(Y=ar(M,F),Y!=null&&ot.push(_r(M,Y,j)))),te)break;M=M.return}0<ot.length&&(W=new tt(W,rt,null,u,X),K.push({event:W,listeners:ot}))}}if((o&7)===0){t:{if(W=i==="mouseover"||i==="pointerover",tt=i==="mouseout"||i==="pointerout",W&&u!==Hl&&(rt=u.relatedTarget||u.fromElement)&&(Fi(rt)||rt[Kn]))break t;if((tt||W)&&(W=X.window===X?X:(W=X.ownerDocument)?W.defaultView||W.parentWindow:window,tt?(rt=u.relatedTarget||u.toElement,tt=V,rt=rt?Fi(rt):null,rt!==null&&(te=Ni(rt),rt!==te||rt.tag!==5&&rt.tag!==6)&&(rt=null)):(tt=null,rt=V),tt!==rt)){if(ot=yf,Y="onMouseLeave",F="onMouseEnter",M="mouse",(i==="pointerout"||i==="pointerover")&&(ot=wf,Y="onPointerLeave",F="onPointerEnter",M="pointer"),te=tt==null?W:xs(tt),j=rt==null?W:xs(rt),W=new ot(Y,M+"leave",tt,u,X),W.target=te,W.relatedTarget=j,Y=null,Fi(X)===V&&(ot=new ot(F,M+"enter",rt,u,X),ot.target=j,ot.relatedTarget=te,Y=ot),te=Y,tt&&rt)e:{for(ot=tt,F=rt,M=0,j=ot;j;j=vs(j))M++;for(j=0,Y=F;Y;Y=vs(Y))j++;for(;0<M-j;)ot=vs(ot),M--;for(;0<j-M;)F=vs(F),j--;for(;M--;){if(ot===F||F!==null&&ot===F.alternate)break e;ot=vs(ot),F=vs(F)}ot=null}else ot=null;tt!==null&&Gf(K,W,tt,ot,!1),rt!==null&&te!==null&&Gf(K,te,rt,ot,!0)}}t:{if(W=V?xs(V):window,tt=W.nodeName&&W.nodeName.toLowerCase(),tt==="select"||tt==="input"&&W.type==="file")var at=px;else if(Cf(W))if(Tf)at=vx;else{at=gx;var ft=mx}else(tt=W.nodeName)&&tt.toLowerCase()==="input"&&(W.type==="checkbox"||W.type==="radio")&&(at=yx);if(at&&(at=at(i,V))){_f(K,at,u,X);break t}ft&&ft(i,W,V),i==="focusout"&&(ft=W._wrapperState)&&ft.controlled&&W.type==="number"&&Ii(W,"number",W.value)}switch(ft=V?xs(V):window,i){case"focusin":(Cf(ft)||ft.contentEditable==="true")&&(gs=ft,dc=V,Sr=null);break;case"focusout":Sr=dc=gs=null;break;case"mousedown":fc=!0;break;case"contextmenu":case"mouseup":case"dragend":fc=!1,Nf(K,u,X);break;case"selectionchange":if(Ax)break;case"keydown":case"keyup":Nf(K,u,X)}var pt;if(lc)t:{switch(i){case"compositionstart":var xt="onCompositionStart";break t;case"compositionend":xt="onCompositionEnd";break t;case"compositionupdate":xt="onCompositionUpdate";break t}xt=void 0}else ms?Sf(i,u)&&(xt="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(xt="onCompositionStart");xt&&(xf&&u.locale!=="ko"&&(ms||xt!=="onCompositionStart"?xt==="onCompositionEnd"&&ms&&(pt=mf()):(di=X,nc="value"in di?di.value:di.textContent,ms=!0)),ft=sa(V,xt),0<ft.length&&(xt=new vf(xt,i,null,u,X),K.push({event:xt,listeners:ft}),pt?xt.data=pt:(pt=Ef(u),pt!==null&&(xt.data=pt)))),(pt=cx?ux(i,u):hx(i,u))&&(V=sa(V,"onBeforeInput"),0<V.length&&(X=new vf("onBeforeInput","beforeinput",null,u,X),K.push({event:X,listeners:V}),X.data=pt))}$f(K,o)})}function _r(i,o,u){return{instance:i,listener:o,currentTarget:u}}function sa(i,o){for(var u=o+"Capture",f=[];i!==null;){var g=i,v=g.stateNode;g.tag===5&&v!==null&&(g=v,v=ar(i,u),v!=null&&f.unshift(_r(i,v,g)),v=ar(i,o),v!=null&&f.push(_r(i,v,g))),i=i.return}return f}function vs(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Gf(i,o,u,f,g){for(var v=o._reactName,b=[];u!==null&&u!==f;){var P=u,L=P.alternate,V=P.stateNode;if(L!==null&&L===f)break;P.tag===5&&V!==null&&(P=V,g?(L=ar(u,v),L!=null&&b.unshift(_r(u,L,P))):g||(L=ar(u,v),L!=null&&b.push(_r(u,L,P)))),u=u.return}b.length!==0&&i.push({event:o,listeners:b})}var Cx=/\r\n?/g,_x=/\u0000|\uFFFD/g;function Xf(i){return(typeof i=="string"?i:""+i).replace(Cx,`
`).replace(_x,"")}function ra(i,o,u){if(o=Xf(o),Xf(i)!==o&&u)throw Error(e(425))}function oa(){}var wc=null,xc=null;function Ac(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var bc=typeof setTimeout=="function"?setTimeout:void 0,Tx=typeof clearTimeout=="function"?clearTimeout:void 0,Kf=typeof Promise=="function"?Promise:void 0,Px=typeof queueMicrotask=="function"?queueMicrotask:typeof Kf<"u"?function(i){return Kf.resolve(null).then(i).catch(kx)}:bc;function kx(i){setTimeout(function(){throw i})}function Sc(i,o){var u=o,f=0;do{var g=u.nextSibling;if(i.removeChild(u),g&&g.nodeType===8)if(u=g.data,u==="/$"){if(f===0){i.removeChild(g),gr(o);return}f--}else u!=="$"&&u!=="$?"&&u!=="$!"||f++;u=g}while(u);gr(o)}function pi(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function qf(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return i;o--}else u==="/$"&&o++}i=i.previousSibling}return null}var ws=Math.random().toString(36).slice(2),Ln="__reactFiber$"+ws,Tr="__reactProps$"+ws,Kn="__reactContainer$"+ws,Ec="__reactEvents$"+ws,Rx="__reactListeners$"+ws,Lx="__reactHandles$"+ws;function Fi(i){var o=i[Ln];if(o)return o;for(var u=i.parentNode;u;){if(o=u[Kn]||u[Ln]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(i=qf(i);i!==null;){if(u=i[Ln])return u;i=qf(i)}return o}i=u,u=i.parentNode}return null}function Pr(i){return i=i[Ln]||i[Kn],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function xs(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(e(33))}function aa(i){return i[Tr]||null}var Cc=[],As=-1;function mi(i){return{current:i}}function zt(i){0>As||(i.current=Cc[As],Cc[As]=null,As--)}function Bt(i,o){As++,Cc[As]=i.current,i.current=o}var gi={},be=mi(gi),Fe=mi(!1),Oi=gi;function bs(i,o){var u=i.type.contextTypes;if(!u)return gi;var f=i.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===o)return f.__reactInternalMemoizedMaskedChildContext;var g={},v;for(v in u)g[v]=o[v];return f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=g),g}function Oe(i){return i=i.childContextTypes,i!=null}function la(){zt(Fe),zt(be)}function Yf(i,o,u){if(be.current!==gi)throw Error(e(168));Bt(be,o),Bt(Fe,u)}function Qf(i,o,u){var f=i.stateNode;if(o=o.childContextTypes,typeof f.getChildContext!="function")return u;f=f.getChildContext();for(var g in f)if(!(g in o))throw Error(e(108,ut(i)||"Unknown",g));return Z({},u,f)}function ca(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||gi,Oi=be.current,Bt(be,i),Bt(Fe,Fe.current),!0}function Zf(i,o,u){var f=i.stateNode;if(!f)throw Error(e(169));u?(i=Qf(i,o,Oi),f.__reactInternalMemoizedMergedChildContext=i,zt(Fe),zt(be),Bt(be,i)):zt(Fe),Bt(Fe,u)}var qn=null,ua=!1,_c=!1;function Jf(i){qn===null?qn=[i]:qn.push(i)}function Mx(i){ua=!0,Jf(i)}function yi(){if(!_c&&qn!==null){_c=!0;var i=0,o=Dt;try{var u=qn;for(Dt=1;i<u.length;i++){var f=u[i];do f=f(!0);while(f!==null)}qn=null,ua=!1}catch(g){throw qn!==null&&(qn=qn.slice(i+1)),tf(Kl,yi),g}finally{Dt=o,_c=!1}}return null}var Ss=[],Es=0,ha=null,da=0,sn=[],rn=0,ji=null,Yn=1,Qn="";function Bi(i,o){Ss[Es++]=da,Ss[Es++]=ha,ha=i,da=o}function tp(i,o,u){sn[rn++]=Yn,sn[rn++]=Qn,sn[rn++]=ji,ji=i;var f=Yn;i=Qn;var g=32-yn(f)-1;f&=~(1<<g),u+=1;var v=32-yn(o)+g;if(30<v){var b=g-g%5;v=(f&(1<<b)-1).toString(32),f>>=b,g-=b,Yn=1<<32-yn(o)+g|u<<g|f,Qn=v+i}else Yn=1<<v|u<<g|f,Qn=i}function Tc(i){i.return!==null&&(Bi(i,1),tp(i,1,0))}function Pc(i){for(;i===ha;)ha=Ss[--Es],Ss[Es]=null,da=Ss[--Es],Ss[Es]=null;for(;i===ji;)ji=sn[--rn],sn[rn]=null,Qn=sn[--rn],sn[rn]=null,Yn=sn[--rn],sn[rn]=null}var Ke=null,qe=null,Ht=!1,wn=null;function ep(i,o){var u=cn(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=i,o=i.deletions,o===null?(i.deletions=[u],i.flags|=16):o.push(u)}function np(i,o){switch(i.tag){case 5:var u=i.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,Ke=i,qe=pi(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,Ke=i,qe=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=ji!==null?{id:Yn,overflow:Qn}:null,i.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=cn(18,null,null,0),u.stateNode=o,u.return=i,i.child=u,Ke=i,qe=null,!0):!1;default:return!1}}function kc(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Rc(i){if(Ht){var o=qe;if(o){var u=o;if(!np(i,o)){if(kc(i))throw Error(e(418));o=pi(u.nextSibling);var f=Ke;o&&np(i,o)?ep(f,u):(i.flags=i.flags&-4097|2,Ht=!1,Ke=i)}}else{if(kc(i))throw Error(e(418));i.flags=i.flags&-4097|2,Ht=!1,Ke=i}}}function ip(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Ke=i}function fa(i){if(i!==Ke)return!1;if(!Ht)return ip(i),Ht=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!Ac(i.type,i.memoizedProps)),o&&(o=qe)){if(kc(i))throw sp(),Error(e(418));for(;o;)ep(i,o),o=pi(o.nextSibling)}if(ip(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(e(317));t:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(o===0){qe=pi(i.nextSibling);break t}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}i=i.nextSibling}qe=null}}else qe=Ke?pi(i.stateNode.nextSibling):null;return!0}function sp(){for(var i=qe;i;)i=pi(i.nextSibling)}function Cs(){qe=Ke=null,Ht=!1}function Lc(i){wn===null?wn=[i]:wn.push(i)}var Ix=R.ReactCurrentBatchConfig;function kr(i,o,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(e(309));var f=u.stateNode}if(!f)throw Error(e(147,i));var g=f,v=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===v?o.ref:(o=function(b){var P=g.refs;b===null?delete P[v]:P[v]=b},o._stringRef=v,o)}if(typeof i!="string")throw Error(e(284));if(!u._owner)throw Error(e(290,i))}return i}function pa(i,o){throw i=Object.prototype.toString.call(o),Error(e(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function rp(i){var o=i._init;return o(i._payload)}function op(i){function o(F,M){if(i){var j=F.deletions;j===null?(F.deletions=[M],F.flags|=16):j.push(M)}}function u(F,M){if(!i)return null;for(;M!==null;)o(F,M),M=M.sibling;return null}function f(F,M){for(F=new Map;M!==null;)M.key!==null?F.set(M.key,M):F.set(M.index,M),M=M.sibling;return F}function g(F,M){return F=Ci(F,M),F.index=0,F.sibling=null,F}function v(F,M,j){return F.index=j,i?(j=F.alternate,j!==null?(j=j.index,j<M?(F.flags|=2,M):j):(F.flags|=2,M)):(F.flags|=1048576,M)}function b(F){return i&&F.alternate===null&&(F.flags|=2),F}function P(F,M,j,Y){return M===null||M.tag!==6?(M=bu(j,F.mode,Y),M.return=F,M):(M=g(M,j),M.return=F,M)}function L(F,M,j,Y){var at=j.type;return at===D?X(F,M,j.props.children,Y,j.key):M!==null&&(M.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===q&&rp(at)===M.type)?(Y=g(M,j.props),Y.ref=kr(F,M,j),Y.return=F,Y):(Y=ja(j.type,j.key,j.props,null,F.mode,Y),Y.ref=kr(F,M,j),Y.return=F,Y)}function V(F,M,j,Y){return M===null||M.tag!==4||M.stateNode.containerInfo!==j.containerInfo||M.stateNode.implementation!==j.implementation?(M=Su(j,F.mode,Y),M.return=F,M):(M=g(M,j.children||[]),M.return=F,M)}function X(F,M,j,Y,at){return M===null||M.tag!==7?(M=Xi(j,F.mode,Y,at),M.return=F,M):(M=g(M,j),M.return=F,M)}function K(F,M,j){if(typeof M=="string"&&M!==""||typeof M=="number")return M=bu(""+M,F.mode,j),M.return=F,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case k:return j=ja(M.type,M.key,M.props,null,F.mode,j),j.ref=kr(F,null,M),j.return=F,j;case I:return M=Su(M,F.mode,j),M.return=F,M;case q:var Y=M._init;return K(F,Y(M._payload),j)}if(Di(M)||J(M))return M=Xi(M,F.mode,j,null),M.return=F,M;pa(F,M)}return null}function W(F,M,j,Y){var at=M!==null?M.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return at!==null?null:P(F,M,""+j,Y);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case k:return j.key===at?L(F,M,j,Y):null;case I:return j.key===at?V(F,M,j,Y):null;case q:return at=j._init,W(F,M,at(j._payload),Y)}if(Di(j)||J(j))return at!==null?null:X(F,M,j,Y,null);pa(F,j)}return null}function tt(F,M,j,Y,at){if(typeof Y=="string"&&Y!==""||typeof Y=="number")return F=F.get(j)||null,P(M,F,""+Y,at);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case k:return F=F.get(Y.key===null?j:Y.key)||null,L(M,F,Y,at);case I:return F=F.get(Y.key===null?j:Y.key)||null,V(M,F,Y,at);case q:var ft=Y._init;return tt(F,M,j,ft(Y._payload),at)}if(Di(Y)||J(Y))return F=F.get(j)||null,X(M,F,Y,at,null);pa(M,Y)}return null}function rt(F,M,j,Y){for(var at=null,ft=null,pt=M,xt=M=0,me=null;pt!==null&&xt<j.length;xt++){pt.index>xt?(me=pt,pt=null):me=pt.sibling;var It=W(F,pt,j[xt],Y);if(It===null){pt===null&&(pt=me);break}i&&pt&&It.alternate===null&&o(F,pt),M=v(It,M,xt),ft===null?at=It:ft.sibling=It,ft=It,pt=me}if(xt===j.length)return u(F,pt),Ht&&Bi(F,xt),at;if(pt===null){for(;xt<j.length;xt++)pt=K(F,j[xt],Y),pt!==null&&(M=v(pt,M,xt),ft===null?at=pt:ft.sibling=pt,ft=pt);return Ht&&Bi(F,xt),at}for(pt=f(F,pt);xt<j.length;xt++)me=tt(pt,F,xt,j[xt],Y),me!==null&&(i&&me.alternate!==null&&pt.delete(me.key===null?xt:me.key),M=v(me,M,xt),ft===null?at=me:ft.sibling=me,ft=me);return i&&pt.forEach(function(_i){return o(F,_i)}),Ht&&Bi(F,xt),at}function ot(F,M,j,Y){var at=J(j);if(typeof at!="function")throw Error(e(150));if(j=at.call(j),j==null)throw Error(e(151));for(var ft=at=null,pt=M,xt=M=0,me=null,It=j.next();pt!==null&&!It.done;xt++,It=j.next()){pt.index>xt?(me=pt,pt=null):me=pt.sibling;var _i=W(F,pt,It.value,Y);if(_i===null){pt===null&&(pt=me);break}i&&pt&&_i.alternate===null&&o(F,pt),M=v(_i,M,xt),ft===null?at=_i:ft.sibling=_i,ft=_i,pt=me}if(It.done)return u(F,pt),Ht&&Bi(F,xt),at;if(pt===null){for(;!It.done;xt++,It=j.next())It=K(F,It.value,Y),It!==null&&(M=v(It,M,xt),ft===null?at=It:ft.sibling=It,ft=It);return Ht&&Bi(F,xt),at}for(pt=f(F,pt);!It.done;xt++,It=j.next())It=tt(pt,F,xt,It.value,Y),It!==null&&(i&&It.alternate!==null&&pt.delete(It.key===null?xt:It.key),M=v(It,M,xt),ft===null?at=It:ft.sibling=It,ft=It);return i&&pt.forEach(function(d1){return o(F,d1)}),Ht&&Bi(F,xt),at}function te(F,M,j,Y){if(typeof j=="object"&&j!==null&&j.type===D&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case k:t:{for(var at=j.key,ft=M;ft!==null;){if(ft.key===at){if(at=j.type,at===D){if(ft.tag===7){u(F,ft.sibling),M=g(ft,j.props.children),M.return=F,F=M;break t}}else if(ft.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===q&&rp(at)===ft.type){u(F,ft.sibling),M=g(ft,j.props),M.ref=kr(F,ft,j),M.return=F,F=M;break t}u(F,ft);break}else o(F,ft);ft=ft.sibling}j.type===D?(M=Xi(j.props.children,F.mode,Y,j.key),M.return=F,F=M):(Y=ja(j.type,j.key,j.props,null,F.mode,Y),Y.ref=kr(F,M,j),Y.return=F,F=Y)}return b(F);case I:t:{for(ft=j.key;M!==null;){if(M.key===ft)if(M.tag===4&&M.stateNode.containerInfo===j.containerInfo&&M.stateNode.implementation===j.implementation){u(F,M.sibling),M=g(M,j.children||[]),M.return=F,F=M;break t}else{u(F,M);break}else o(F,M);M=M.sibling}M=Su(j,F.mode,Y),M.return=F,F=M}return b(F);case q:return ft=j._init,te(F,M,ft(j._payload),Y)}if(Di(j))return rt(F,M,j,Y);if(J(j))return ot(F,M,j,Y);pa(F,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,M!==null&&M.tag===6?(u(F,M.sibling),M=g(M,j),M.return=F,F=M):(u(F,M),M=bu(j,F.mode,Y),M.return=F,F=M),b(F)):u(F,M)}return te}var _s=op(!0),ap=op(!1),ma=mi(null),ga=null,Ts=null,Mc=null;function Ic(){Mc=Ts=ga=null}function Dc(i){var o=ma.current;zt(ma),i._currentValue=o}function Nc(i,o,u){for(;i!==null;){var f=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),i===u)break;i=i.return}}function Ps(i,o){ga=i,Mc=Ts=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(je=!0),i.firstContext=null)}function on(i){var o=i._currentValue;if(Mc!==i)if(i={context:i,memoizedValue:o,next:null},Ts===null){if(ga===null)throw Error(e(308));Ts=i,ga.dependencies={lanes:0,firstContext:i}}else Ts=Ts.next=i;return o}var Vi=null;function Fc(i){Vi===null?Vi=[i]:Vi.push(i)}function lp(i,o,u,f){var g=o.interleaved;return g===null?(u.next=u,Fc(o)):(u.next=g.next,g.next=u),o.interleaved=u,Zn(i,f)}function Zn(i,o){i.lanes|=o;var u=i.alternate;for(u!==null&&(u.lanes|=o),u=i,i=i.return;i!==null;)i.childLanes|=o,u=i.alternate,u!==null&&(u.childLanes|=o),u=i,i=i.return;return u.tag===3?u.stateNode:null}var vi=!1;function Oc(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cp(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Jn(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function wi(i,o,u){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(Mt&2)!==0){var g=f.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),f.pending=o,Zn(i,u)}return g=f.interleaved,g===null?(o.next=o,Fc(f)):(o.next=g.next,g.next=o),f.interleaved=o,Zn(i,u)}function ya(i,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var f=o.lanes;f&=i.pendingLanes,u|=f,o.lanes=u,Ql(i,u)}}function up(i,o){var u=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var g=null,v=null;if(u=u.firstBaseUpdate,u!==null){do{var b={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};v===null?g=v=b:v=v.next=b,u=u.next}while(u!==null);v===null?g=v=o:v=v.next=o}else g=v=o;u={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:f.shared,effects:f.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=o:i.next=o,u.lastBaseUpdate=o}function va(i,o,u,f){var g=i.updateQueue;vi=!1;var v=g.firstBaseUpdate,b=g.lastBaseUpdate,P=g.shared.pending;if(P!==null){g.shared.pending=null;var L=P,V=L.next;L.next=null,b===null?v=V:b.next=V,b=L;var X=i.alternate;X!==null&&(X=X.updateQueue,P=X.lastBaseUpdate,P!==b&&(P===null?X.firstBaseUpdate=V:P.next=V,X.lastBaseUpdate=L))}if(v!==null){var K=g.baseState;b=0,X=V=L=null,P=v;do{var W=P.lane,tt=P.eventTime;if((f&W)===W){X!==null&&(X=X.next={eventTime:tt,lane:0,tag:P.tag,payload:P.payload,callback:P.callback,next:null});t:{var rt=i,ot=P;switch(W=o,tt=u,ot.tag){case 1:if(rt=ot.payload,typeof rt=="function"){K=rt.call(tt,K,W);break t}K=rt;break t;case 3:rt.flags=rt.flags&-65537|128;case 0:if(rt=ot.payload,W=typeof rt=="function"?rt.call(tt,K,W):rt,W==null)break t;K=Z({},K,W);break t;case 2:vi=!0}}P.callback!==null&&P.lane!==0&&(i.flags|=64,W=g.effects,W===null?g.effects=[P]:W.push(P))}else tt={eventTime:tt,lane:W,tag:P.tag,payload:P.payload,callback:P.callback,next:null},X===null?(V=X=tt,L=K):X=X.next=tt,b|=W;if(P=P.next,P===null){if(P=g.shared.pending,P===null)break;W=P,P=W.next,W.next=null,g.lastBaseUpdate=W,g.shared.pending=null}}while(!0);if(X===null&&(L=K),g.baseState=L,g.firstBaseUpdate=V,g.lastBaseUpdate=X,o=g.shared.interleaved,o!==null){g=o;do b|=g.lane,g=g.next;while(g!==o)}else v===null&&(g.shared.lanes=0);Ui|=b,i.lanes=b,i.memoizedState=K}}function hp(i,o,u){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var f=i[o],g=f.callback;if(g!==null){if(f.callback=null,f=u,typeof g!="function")throw Error(e(191,g));g.call(f)}}}var Rr={},Mn=mi(Rr),Lr=mi(Rr),Mr=mi(Rr);function zi(i){if(i===Rr)throw Error(e(174));return i}function jc(i,o){switch(Bt(Mr,o),Bt(Lr,i),Bt(Mn,Rr),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:nn(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=nn(o,i)}zt(Mn),Bt(Mn,o)}function ks(){zt(Mn),zt(Lr),zt(Mr)}function dp(i){zi(Mr.current);var o=zi(Mn.current),u=nn(o,i.type);o!==u&&(Bt(Lr,i),Bt(Mn,u))}function Bc(i){Lr.current===i&&(zt(Mn),zt(Lr))}var Wt=mi(0);function wa(i){for(var o=i;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Vc=[];function zc(){for(var i=0;i<Vc.length;i++)Vc[i]._workInProgressVersionPrimary=null;Vc.length=0}var xa=R.ReactCurrentDispatcher,Hc=R.ReactCurrentBatchConfig,Hi=0,Gt=null,ue=null,fe=null,Aa=!1,Ir=!1,Dr=0,Dx=0;function Se(){throw Error(e(321))}function Uc(i,o){if(o===null)return!1;for(var u=0;u<o.length&&u<i.length;u++)if(!vn(i[u],o[u]))return!1;return!0}function $c(i,o,u,f,g,v){if(Hi=v,Gt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,xa.current=i===null||i.memoizedState===null?jx:Bx,i=u(f,g),Ir){v=0;do{if(Ir=!1,Dr=0,25<=v)throw Error(e(301));v+=1,fe=ue=null,o.updateQueue=null,xa.current=Vx,i=u(f,g)}while(Ir)}if(xa.current=Ea,o=ue!==null&&ue.next!==null,Hi=0,fe=ue=Gt=null,Aa=!1,o)throw Error(e(300));return i}function Wc(){var i=Dr!==0;return Dr=0,i}function In(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fe===null?Gt.memoizedState=fe=i:fe=fe.next=i,fe}function an(){if(ue===null){var i=Gt.alternate;i=i!==null?i.memoizedState:null}else i=ue.next;var o=fe===null?Gt.memoizedState:fe.next;if(o!==null)fe=o,ue=i;else{if(i===null)throw Error(e(310));ue=i,i={memoizedState:ue.memoizedState,baseState:ue.baseState,baseQueue:ue.baseQueue,queue:ue.queue,next:null},fe===null?Gt.memoizedState=fe=i:fe=fe.next=i}return fe}function Nr(i,o){return typeof o=="function"?o(i):o}function Gc(i){var o=an(),u=o.queue;if(u===null)throw Error(e(311));u.lastRenderedReducer=i;var f=ue,g=f.baseQueue,v=u.pending;if(v!==null){if(g!==null){var b=g.next;g.next=v.next,v.next=b}f.baseQueue=g=v,u.pending=null}if(g!==null){v=g.next,f=f.baseState;var P=b=null,L=null,V=v;do{var X=V.lane;if((Hi&X)===X)L!==null&&(L=L.next={lane:0,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null}),f=V.hasEagerState?V.eagerState:i(f,V.action);else{var K={lane:X,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null};L===null?(P=L=K,b=f):L=L.next=K,Gt.lanes|=X,Ui|=X}V=V.next}while(V!==null&&V!==v);L===null?b=f:L.next=P,vn(f,o.memoizedState)||(je=!0),o.memoizedState=f,o.baseState=b,o.baseQueue=L,u.lastRenderedState=f}if(i=u.interleaved,i!==null){g=i;do v=g.lane,Gt.lanes|=v,Ui|=v,g=g.next;while(g!==i)}else g===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function Xc(i){var o=an(),u=o.queue;if(u===null)throw Error(e(311));u.lastRenderedReducer=i;var f=u.dispatch,g=u.pending,v=o.memoizedState;if(g!==null){u.pending=null;var b=g=g.next;do v=i(v,b.action),b=b.next;while(b!==g);vn(v,o.memoizedState)||(je=!0),o.memoizedState=v,o.baseQueue===null&&(o.baseState=v),u.lastRenderedState=v}return[v,f]}function fp(){}function pp(i,o){var u=Gt,f=an(),g=o(),v=!vn(f.memoizedState,g);if(v&&(f.memoizedState=g,je=!0),f=f.queue,Kc(yp.bind(null,u,f,i),[i]),f.getSnapshot!==o||v||fe!==null&&fe.memoizedState.tag&1){if(u.flags|=2048,Fr(9,gp.bind(null,u,f,g,o),void 0,null),pe===null)throw Error(e(349));(Hi&30)!==0||mp(u,o,g)}return g}function mp(i,o,u){i.flags|=16384,i={getSnapshot:o,value:u},o=Gt.updateQueue,o===null?(o={lastEffect:null,stores:null},Gt.updateQueue=o,o.stores=[i]):(u=o.stores,u===null?o.stores=[i]:u.push(i))}function gp(i,o,u,f){o.value=u,o.getSnapshot=f,vp(o)&&wp(i)}function yp(i,o,u){return u(function(){vp(o)&&wp(i)})}function vp(i){var o=i.getSnapshot;i=i.value;try{var u=o();return!vn(i,u)}catch{return!0}}function wp(i){var o=Zn(i,1);o!==null&&Sn(o,i,1,-1)}function xp(i){var o=In();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Nr,lastRenderedState:i},o.queue=i,i=i.dispatch=Ox.bind(null,Gt,i),[o.memoizedState,i]}function Fr(i,o,u,f){return i={tag:i,create:o,destroy:u,deps:f,next:null},o=Gt.updateQueue,o===null?(o={lastEffect:null,stores:null},Gt.updateQueue=o,o.lastEffect=i.next=i):(u=o.lastEffect,u===null?o.lastEffect=i.next=i:(f=u.next,u.next=i,i.next=f,o.lastEffect=i)),i}function Ap(){return an().memoizedState}function ba(i,o,u,f){var g=In();Gt.flags|=i,g.memoizedState=Fr(1|o,u,void 0,f===void 0?null:f)}function Sa(i,o,u,f){var g=an();f=f===void 0?null:f;var v=void 0;if(ue!==null){var b=ue.memoizedState;if(v=b.destroy,f!==null&&Uc(f,b.deps)){g.memoizedState=Fr(o,u,v,f);return}}Gt.flags|=i,g.memoizedState=Fr(1|o,u,v,f)}function bp(i,o){return ba(8390656,8,i,o)}function Kc(i,o){return Sa(2048,8,i,o)}function Sp(i,o){return Sa(4,2,i,o)}function Ep(i,o){return Sa(4,4,i,o)}function Cp(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function _p(i,o,u){return u=u!=null?u.concat([i]):null,Sa(4,4,Cp.bind(null,o,i),u)}function qc(){}function Tp(i,o){var u=an();o=o===void 0?null:o;var f=u.memoizedState;return f!==null&&o!==null&&Uc(o,f[1])?f[0]:(u.memoizedState=[i,o],i)}function Pp(i,o){var u=an();o=o===void 0?null:o;var f=u.memoizedState;return f!==null&&o!==null&&Uc(o,f[1])?f[0]:(i=i(),u.memoizedState=[i,o],i)}function kp(i,o,u){return(Hi&21)===0?(i.baseState&&(i.baseState=!1,je=!0),i.memoizedState=u):(vn(u,o)||(u=rf(),Gt.lanes|=u,Ui|=u,i.baseState=!0),o)}function Nx(i,o){var u=Dt;Dt=u!==0&&4>u?u:4,i(!0);var f=Hc.transition;Hc.transition={};try{i(!1),o()}finally{Dt=u,Hc.transition=f}}function Rp(){return an().memoizedState}function Fx(i,o,u){var f=Si(i);if(u={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null},Lp(i))Mp(o,u);else if(u=lp(i,o,u,f),u!==null){var g=Le();Sn(u,i,f,g),Ip(u,o,f)}}function Ox(i,o,u){var f=Si(i),g={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null};if(Lp(i))Mp(o,g);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=o.lastRenderedReducer,v!==null))try{var b=o.lastRenderedState,P=v(b,u);if(g.hasEagerState=!0,g.eagerState=P,vn(P,b)){var L=o.interleaved;L===null?(g.next=g,Fc(o)):(g.next=L.next,L.next=g),o.interleaved=g;return}}catch{}finally{}u=lp(i,o,g,f),u!==null&&(g=Le(),Sn(u,i,f,g),Ip(u,o,f))}}function Lp(i){var o=i.alternate;return i===Gt||o!==null&&o===Gt}function Mp(i,o){Ir=Aa=!0;var u=i.pending;u===null?o.next=o:(o.next=u.next,u.next=o),i.pending=o}function Ip(i,o,u){if((u&4194240)!==0){var f=o.lanes;f&=i.pendingLanes,u|=f,o.lanes=u,Ql(i,u)}}var Ea={readContext:on,useCallback:Se,useContext:Se,useEffect:Se,useImperativeHandle:Se,useInsertionEffect:Se,useLayoutEffect:Se,useMemo:Se,useReducer:Se,useRef:Se,useState:Se,useDebugValue:Se,useDeferredValue:Se,useTransition:Se,useMutableSource:Se,useSyncExternalStore:Se,useId:Se,unstable_isNewReconciler:!1},jx={readContext:on,useCallback:function(i,o){return In().memoizedState=[i,o===void 0?null:o],i},useContext:on,useEffect:bp,useImperativeHandle:function(i,o,u){return u=u!=null?u.concat([i]):null,ba(4194308,4,Cp.bind(null,o,i),u)},useLayoutEffect:function(i,o){return ba(4194308,4,i,o)},useInsertionEffect:function(i,o){return ba(4,2,i,o)},useMemo:function(i,o){var u=In();return o=o===void 0?null:o,i=i(),u.memoizedState=[i,o],i},useReducer:function(i,o,u){var f=In();return o=u!==void 0?u(o):o,f.memoizedState=f.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},f.queue=i,i=i.dispatch=Fx.bind(null,Gt,i),[f.memoizedState,i]},useRef:function(i){var o=In();return i={current:i},o.memoizedState=i},useState:xp,useDebugValue:qc,useDeferredValue:function(i){return In().memoizedState=i},useTransition:function(){var i=xp(!1),o=i[0];return i=Nx.bind(null,i[1]),In().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,u){var f=Gt,g=In();if(Ht){if(u===void 0)throw Error(e(407));u=u()}else{if(u=o(),pe===null)throw Error(e(349));(Hi&30)!==0||mp(f,o,u)}g.memoizedState=u;var v={value:u,getSnapshot:o};return g.queue=v,bp(yp.bind(null,f,v,i),[i]),f.flags|=2048,Fr(9,gp.bind(null,f,v,u,o),void 0,null),u},useId:function(){var i=In(),o=pe.identifierPrefix;if(Ht){var u=Qn,f=Yn;u=(f&~(1<<32-yn(f)-1)).toString(32)+u,o=":"+o+"R"+u,u=Dr++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=Dx++,o=":"+o+"r"+u.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},Bx={readContext:on,useCallback:Tp,useContext:on,useEffect:Kc,useImperativeHandle:_p,useInsertionEffect:Sp,useLayoutEffect:Ep,useMemo:Pp,useReducer:Gc,useRef:Ap,useState:function(){return Gc(Nr)},useDebugValue:qc,useDeferredValue:function(i){var o=an();return kp(o,ue.memoizedState,i)},useTransition:function(){var i=Gc(Nr)[0],o=an().memoizedState;return[i,o]},useMutableSource:fp,useSyncExternalStore:pp,useId:Rp,unstable_isNewReconciler:!1},Vx={readContext:on,useCallback:Tp,useContext:on,useEffect:Kc,useImperativeHandle:_p,useInsertionEffect:Sp,useLayoutEffect:Ep,useMemo:Pp,useReducer:Xc,useRef:Ap,useState:function(){return Xc(Nr)},useDebugValue:qc,useDeferredValue:function(i){var o=an();return ue===null?o.memoizedState=i:kp(o,ue.memoizedState,i)},useTransition:function(){var i=Xc(Nr)[0],o=an().memoizedState;return[i,o]},useMutableSource:fp,useSyncExternalStore:pp,useId:Rp,unstable_isNewReconciler:!1};function xn(i,o){if(i&&i.defaultProps){o=Z({},o),i=i.defaultProps;for(var u in i)o[u]===void 0&&(o[u]=i[u]);return o}return o}function Yc(i,o,u,f){o=i.memoizedState,u=u(f,o),u=u==null?o:Z({},o,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var Ca={isMounted:function(i){return(i=i._reactInternals)?Ni(i)===i:!1},enqueueSetState:function(i,o,u){i=i._reactInternals;var f=Le(),g=Si(i),v=Jn(f,g);v.payload=o,u!=null&&(v.callback=u),o=wi(i,v,g),o!==null&&(Sn(o,i,g,f),ya(o,i,g))},enqueueReplaceState:function(i,o,u){i=i._reactInternals;var f=Le(),g=Si(i),v=Jn(f,g);v.tag=1,v.payload=o,u!=null&&(v.callback=u),o=wi(i,v,g),o!==null&&(Sn(o,i,g,f),ya(o,i,g))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var u=Le(),f=Si(i),g=Jn(u,f);g.tag=2,o!=null&&(g.callback=o),o=wi(i,g,f),o!==null&&(Sn(o,i,f,u),ya(o,i,f))}};function Dp(i,o,u,f,g,v,b){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,v,b):o.prototype&&o.prototype.isPureReactComponent?!br(u,f)||!br(g,v):!0}function Np(i,o,u){var f=!1,g=gi,v=o.contextType;return typeof v=="object"&&v!==null?v=on(v):(g=Oe(o)?Oi:be.current,f=o.contextTypes,v=(f=f!=null)?bs(i,g):gi),o=new o(u,v),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Ca,i.stateNode=o,o._reactInternals=i,f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=g,i.__reactInternalMemoizedMaskedChildContext=v),o}function Fp(i,o,u,f){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,f),o.state!==i&&Ca.enqueueReplaceState(o,o.state,null)}function Qc(i,o,u,f){var g=i.stateNode;g.props=u,g.state=i.memoizedState,g.refs={},Oc(i);var v=o.contextType;typeof v=="object"&&v!==null?g.context=on(v):(v=Oe(o)?Oi:be.current,g.context=bs(i,v)),g.state=i.memoizedState,v=o.getDerivedStateFromProps,typeof v=="function"&&(Yc(i,o,v,u),g.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(o=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),o!==g.state&&Ca.enqueueReplaceState(g,g.state,null),va(i,u,g,f),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308)}function Rs(i,o){try{var u="",f=o;do u+=wt(f),f=f.return;while(f);var g=u}catch(v){g=`
Error generating stack: `+v.message+`
`+v.stack}return{value:i,source:o,stack:g,digest:null}}function Zc(i,o,u){return{value:i,source:null,stack:u??null,digest:o??null}}function Jc(i,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var zx=typeof WeakMap=="function"?WeakMap:Map;function Op(i,o,u){u=Jn(-1,u),u.tag=3,u.payload={element:null};var f=o.value;return u.callback=function(){Ma||(Ma=!0,pu=f),Jc(i,o)},u}function jp(i,o,u){u=Jn(-1,u),u.tag=3;var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var g=o.value;u.payload=function(){return f(g)},u.callback=function(){Jc(i,o)}}var v=i.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(u.callback=function(){Jc(i,o),typeof f!="function"&&(Ai===null?Ai=new Set([this]):Ai.add(this));var b=o.stack;this.componentDidCatch(o.value,{componentStack:b!==null?b:""})}),u}function Bp(i,o,u){var f=i.pingCache;if(f===null){f=i.pingCache=new zx;var g=new Set;f.set(o,g)}else g=f.get(o),g===void 0&&(g=new Set,f.set(o,g));g.has(u)||(g.add(u),i=e1.bind(null,i,o,u),o.then(i,i))}function Vp(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function zp(i,o,u,f,g){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=Jn(-1,1),o.tag=2,wi(u,o,1))),u.lanes|=1),i):(i.flags|=65536,i.lanes=g,i)}var Hx=R.ReactCurrentOwner,je=!1;function Re(i,o,u,f){o.child=i===null?ap(o,null,u,f):_s(o,i.child,u,f)}function Hp(i,o,u,f,g){u=u.render;var v=o.ref;return Ps(o,g),f=$c(i,o,u,f,v,g),u=Wc(),i!==null&&!je?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~g,ti(i,o,g)):(Ht&&u&&Tc(o),o.flags|=1,Re(i,o,f,g),o.child)}function Up(i,o,u,f,g){if(i===null){var v=u.type;return typeof v=="function"&&!Au(v)&&v.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=v,$p(i,o,v,f,g)):(i=ja(u.type,null,f,o,o.mode,g),i.ref=o.ref,i.return=o,o.child=i)}if(v=i.child,(i.lanes&g)===0){var b=v.memoizedProps;if(u=u.compare,u=u!==null?u:br,u(b,f)&&i.ref===o.ref)return ti(i,o,g)}return o.flags|=1,i=Ci(v,f),i.ref=o.ref,i.return=o,o.child=i}function $p(i,o,u,f,g){if(i!==null){var v=i.memoizedProps;if(br(v,f)&&i.ref===o.ref)if(je=!1,o.pendingProps=f=v,(i.lanes&g)!==0)(i.flags&131072)!==0&&(je=!0);else return o.lanes=i.lanes,ti(i,o,g)}return tu(i,o,u,f,g)}function Wp(i,o,u){var f=o.pendingProps,g=f.children,v=i!==null?i.memoizedState:null;if(f.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Bt(Ms,Ye),Ye|=u;else{if((u&1073741824)===0)return i=v!==null?v.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,Bt(Ms,Ye),Ye|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=v!==null?v.baseLanes:u,Bt(Ms,Ye),Ye|=f}else v!==null?(f=v.baseLanes|u,o.memoizedState=null):f=u,Bt(Ms,Ye),Ye|=f;return Re(i,o,g,u),o.child}function Gp(i,o){var u=o.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function tu(i,o,u,f,g){var v=Oe(u)?Oi:be.current;return v=bs(o,v),Ps(o,g),u=$c(i,o,u,f,v,g),f=Wc(),i!==null&&!je?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~g,ti(i,o,g)):(Ht&&f&&Tc(o),o.flags|=1,Re(i,o,u,g),o.child)}function Xp(i,o,u,f,g){if(Oe(u)){var v=!0;ca(o)}else v=!1;if(Ps(o,g),o.stateNode===null)Ta(i,o),Np(o,u,f),Qc(o,u,f,g),f=!0;else if(i===null){var b=o.stateNode,P=o.memoizedProps;b.props=P;var L=b.context,V=u.contextType;typeof V=="object"&&V!==null?V=on(V):(V=Oe(u)?Oi:be.current,V=bs(o,V));var X=u.getDerivedStateFromProps,K=typeof X=="function"||typeof b.getSnapshotBeforeUpdate=="function";K||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(P!==f||L!==V)&&Fp(o,b,f,V),vi=!1;var W=o.memoizedState;b.state=W,va(o,f,b,g),L=o.memoizedState,P!==f||W!==L||Fe.current||vi?(typeof X=="function"&&(Yc(o,u,X,f),L=o.memoizedState),(P=vi||Dp(o,u,P,f,W,L,V))?(K||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(o.flags|=4194308)):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=L),b.props=f,b.state=L,b.context=V,f=P):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{b=o.stateNode,cp(i,o),P=o.memoizedProps,V=o.type===o.elementType?P:xn(o.type,P),b.props=V,K=o.pendingProps,W=b.context,L=u.contextType,typeof L=="object"&&L!==null?L=on(L):(L=Oe(u)?Oi:be.current,L=bs(o,L));var tt=u.getDerivedStateFromProps;(X=typeof tt=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(P!==K||W!==L)&&Fp(o,b,f,L),vi=!1,W=o.memoizedState,b.state=W,va(o,f,b,g);var rt=o.memoizedState;P!==K||W!==rt||Fe.current||vi?(typeof tt=="function"&&(Yc(o,u,tt,f),rt=o.memoizedState),(V=vi||Dp(o,u,V,f,W,rt,L)||!1)?(X||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(f,rt,L),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(f,rt,L)),typeof b.componentDidUpdate=="function"&&(o.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof b.componentDidUpdate!="function"||P===i.memoizedProps&&W===i.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||P===i.memoizedProps&&W===i.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=rt),b.props=f,b.state=rt,b.context=L,f=V):(typeof b.componentDidUpdate!="function"||P===i.memoizedProps&&W===i.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||P===i.memoizedProps&&W===i.memoizedState||(o.flags|=1024),f=!1)}return eu(i,o,u,f,v,g)}function eu(i,o,u,f,g,v){Gp(i,o);var b=(o.flags&128)!==0;if(!f&&!b)return g&&Zf(o,u,!1),ti(i,o,v);f=o.stateNode,Hx.current=o;var P=b&&typeof u.getDerivedStateFromError!="function"?null:f.render();return o.flags|=1,i!==null&&b?(o.child=_s(o,i.child,null,v),o.child=_s(o,null,P,v)):Re(i,o,P,v),o.memoizedState=f.state,g&&Zf(o,u,!0),o.child}function Kp(i){var o=i.stateNode;o.pendingContext?Yf(i,o.pendingContext,o.pendingContext!==o.context):o.context&&Yf(i,o.context,!1),jc(i,o.containerInfo)}function qp(i,o,u,f,g){return Cs(),Lc(g),o.flags|=256,Re(i,o,u,f),o.child}var nu={dehydrated:null,treeContext:null,retryLane:0};function iu(i){return{baseLanes:i,cachePool:null,transitions:null}}function Yp(i,o,u){var f=o.pendingProps,g=Wt.current,v=!1,b=(o.flags&128)!==0,P;if((P=b)||(P=i!==null&&i.memoizedState===null?!1:(g&2)!==0),P?(v=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(g|=1),Bt(Wt,g&1),i===null)return Rc(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(b=f.children,i=f.fallback,v?(f=o.mode,v=o.child,b={mode:"hidden",children:b},(f&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=b):v=Ba(b,f,0,null),i=Xi(i,f,u,null),v.return=o,i.return=o,v.sibling=i,o.child=v,o.child.memoizedState=iu(u),o.memoizedState=nu,i):su(o,b));if(g=i.memoizedState,g!==null&&(P=g.dehydrated,P!==null))return Ux(i,o,b,f,P,g,u);if(v){v=f.fallback,b=o.mode,g=i.child,P=g.sibling;var L={mode:"hidden",children:f.children};return(b&1)===0&&o.child!==g?(f=o.child,f.childLanes=0,f.pendingProps=L,o.deletions=null):(f=Ci(g,L),f.subtreeFlags=g.subtreeFlags&14680064),P!==null?v=Ci(P,v):(v=Xi(v,b,u,null),v.flags|=2),v.return=o,f.return=o,f.sibling=v,o.child=f,f=v,v=o.child,b=i.child.memoizedState,b=b===null?iu(u):{baseLanes:b.baseLanes|u,cachePool:null,transitions:b.transitions},v.memoizedState=b,v.childLanes=i.childLanes&~u,o.memoizedState=nu,f}return v=i.child,i=v.sibling,f=Ci(v,{mode:"visible",children:f.children}),(o.mode&1)===0&&(f.lanes=u),f.return=o,f.sibling=null,i!==null&&(u=o.deletions,u===null?(o.deletions=[i],o.flags|=16):u.push(i)),o.child=f,o.memoizedState=null,f}function su(i,o){return o=Ba({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function _a(i,o,u,f){return f!==null&&Lc(f),_s(o,i.child,null,u),i=su(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function Ux(i,o,u,f,g,v,b){if(u)return o.flags&256?(o.flags&=-257,f=Zc(Error(e(422))),_a(i,o,b,f)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(v=f.fallback,g=o.mode,f=Ba({mode:"visible",children:f.children},g,0,null),v=Xi(v,g,b,null),v.flags|=2,f.return=o,v.return=o,f.sibling=v,o.child=f,(o.mode&1)!==0&&_s(o,i.child,null,b),o.child.memoizedState=iu(b),o.memoizedState=nu,v);if((o.mode&1)===0)return _a(i,o,b,null);if(g.data==="$!"){if(f=g.nextSibling&&g.nextSibling.dataset,f)var P=f.dgst;return f=P,v=Error(e(419)),f=Zc(v,f,void 0),_a(i,o,b,f)}if(P=(b&i.childLanes)!==0,je||P){if(f=pe,f!==null){switch(b&-b){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(f.suspendedLanes|b))!==0?0:g,g!==0&&g!==v.retryLane&&(v.retryLane=g,Zn(i,g),Sn(f,i,g,-1))}return xu(),f=Zc(Error(e(421))),_a(i,o,b,f)}return g.data==="$?"?(o.flags|=128,o.child=i.child,o=n1.bind(null,i),g._reactRetry=o,null):(i=v.treeContext,qe=pi(g.nextSibling),Ke=o,Ht=!0,wn=null,i!==null&&(sn[rn++]=Yn,sn[rn++]=Qn,sn[rn++]=ji,Yn=i.id,Qn=i.overflow,ji=o),o=su(o,f.children),o.flags|=4096,o)}function Qp(i,o,u){i.lanes|=o;var f=i.alternate;f!==null&&(f.lanes|=o),Nc(i.return,o,u)}function ru(i,o,u,f,g){var v=i.memoizedState;v===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:g}:(v.isBackwards=o,v.rendering=null,v.renderingStartTime=0,v.last=f,v.tail=u,v.tailMode=g)}function Zp(i,o,u){var f=o.pendingProps,g=f.revealOrder,v=f.tail;if(Re(i,o,f.children,u),f=Wt.current,(f&2)!==0)f=f&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)t:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Qp(i,u,o);else if(i.tag===19)Qp(i,u,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break t;for(;i.sibling===null;){if(i.return===null||i.return===o)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}f&=1}if(Bt(Wt,f),(o.mode&1)===0)o.memoizedState=null;else switch(g){case"forwards":for(u=o.child,g=null;u!==null;)i=u.alternate,i!==null&&wa(i)===null&&(g=u),u=u.sibling;u=g,u===null?(g=o.child,o.child=null):(g=u.sibling,u.sibling=null),ru(o,!1,g,u,v);break;case"backwards":for(u=null,g=o.child,o.child=null;g!==null;){if(i=g.alternate,i!==null&&wa(i)===null){o.child=g;break}i=g.sibling,g.sibling=u,u=g,g=i}ru(o,!0,u,null,v);break;case"together":ru(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Ta(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function ti(i,o,u){if(i!==null&&(o.dependencies=i.dependencies),Ui|=o.lanes,(u&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(e(153));if(o.child!==null){for(i=o.child,u=Ci(i,i.pendingProps),o.child=u,u.return=o;i.sibling!==null;)i=i.sibling,u=u.sibling=Ci(i,i.pendingProps),u.return=o;u.sibling=null}return o.child}function $x(i,o,u){switch(o.tag){case 3:Kp(o),Cs();break;case 5:dp(o);break;case 1:Oe(o.type)&&ca(o);break;case 4:jc(o,o.stateNode.containerInfo);break;case 10:var f=o.type._context,g=o.memoizedProps.value;Bt(ma,f._currentValue),f._currentValue=g;break;case 13:if(f=o.memoizedState,f!==null)return f.dehydrated!==null?(Bt(Wt,Wt.current&1),o.flags|=128,null):(u&o.child.childLanes)!==0?Yp(i,o,u):(Bt(Wt,Wt.current&1),i=ti(i,o,u),i!==null?i.sibling:null);Bt(Wt,Wt.current&1);break;case 19:if(f=(u&o.childLanes)!==0,(i.flags&128)!==0){if(f)return Zp(i,o,u);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Bt(Wt,Wt.current),f)break;return null;case 22:case 23:return o.lanes=0,Wp(i,o,u)}return ti(i,o,u)}var Jp,ou,tm,em;Jp=function(i,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},ou=function(){},tm=function(i,o,u,f){var g=i.memoizedProps;if(g!==f){i=o.stateNode,zi(Mn.current);var v=null;switch(u){case"input":g=Ft(i,g),f=Ft(i,f),v=[];break;case"select":g=Z({},g,{value:void 0}),f=Z({},f,{value:void 0}),v=[];break;case"textarea":g=rr(i,g),f=rr(i,f),v=[];break;default:typeof g.onClick!="function"&&typeof f.onClick=="function"&&(i.onclick=oa)}Vl(u,f);var b;u=null;for(V in g)if(!f.hasOwnProperty(V)&&g.hasOwnProperty(V)&&g[V]!=null)if(V==="style"){var P=g[V];for(b in P)P.hasOwnProperty(b)&&(u||(u={}),u[b]="")}else V!=="dangerouslySetInnerHTML"&&V!=="children"&&V!=="suppressContentEditableWarning"&&V!=="suppressHydrationWarning"&&V!=="autoFocus"&&(r.hasOwnProperty(V)?v||(v=[]):(v=v||[]).push(V,null));for(V in f){var L=f[V];if(P=g?.[V],f.hasOwnProperty(V)&&L!==P&&(L!=null||P!=null))if(V==="style")if(P){for(b in P)!P.hasOwnProperty(b)||L&&L.hasOwnProperty(b)||(u||(u={}),u[b]="");for(b in L)L.hasOwnProperty(b)&&P[b]!==L[b]&&(u||(u={}),u[b]=L[b])}else u||(v||(v=[]),v.push(V,u)),u=L;else V==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,P=P?P.__html:void 0,L!=null&&P!==L&&(v=v||[]).push(V,L)):V==="children"?typeof L!="string"&&typeof L!="number"||(v=v||[]).push(V,""+L):V!=="suppressContentEditableWarning"&&V!=="suppressHydrationWarning"&&(r.hasOwnProperty(V)?(L!=null&&V==="onScroll"&&Vt("scroll",i),v||P===L||(v=[])):(v=v||[]).push(V,L))}u&&(v=v||[]).push("style",u);var V=v;(o.updateQueue=V)&&(o.flags|=4)}},em=function(i,o,u,f){u!==f&&(o.flags|=4)};function Or(i,o){if(!Ht)switch(i.tailMode){case"hidden":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function Ee(i){var o=i.alternate!==null&&i.alternate.child===i.child,u=0,f=0;if(o)for(var g=i.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags&14680064,f|=g.flags&14680064,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=f,i.childLanes=u,o}function Wx(i,o,u){var f=o.pendingProps;switch(Pc(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ee(o),null;case 1:return Oe(o.type)&&la(),Ee(o),null;case 3:return f=o.stateNode,ks(),zt(Fe),zt(be),zc(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(i===null||i.child===null)&&(fa(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,wn!==null&&(yu(wn),wn=null))),ou(i,o),Ee(o),null;case 5:Bc(o);var g=zi(Mr.current);if(u=o.type,i!==null&&o.stateNode!=null)tm(i,o,u,f,g),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!f){if(o.stateNode===null)throw Error(e(166));return Ee(o),null}if(i=zi(Mn.current),fa(o)){f=o.stateNode,u=o.type;var v=o.memoizedProps;switch(f[Ln]=o,f[Tr]=v,i=(o.mode&1)!==0,u){case"dialog":Vt("cancel",f),Vt("close",f);break;case"iframe":case"object":case"embed":Vt("load",f);break;case"video":case"audio":for(g=0;g<Er.length;g++)Vt(Er[g],f);break;case"source":Vt("error",f);break;case"img":case"image":case"link":Vt("error",f),Vt("load",f);break;case"details":Vt("toggle",f);break;case"input":qt(f,v),Vt("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!v.multiple},Vt("invalid",f);break;case"textarea":No(f,v),Vt("invalid",f)}Vl(u,v),g=null;for(var b in v)if(v.hasOwnProperty(b)){var P=v[b];b==="children"?typeof P=="string"?f.textContent!==P&&(v.suppressHydrationWarning!==!0&&ra(f.textContent,P,i),g=["children",P]):typeof P=="number"&&f.textContent!==""+P&&(v.suppressHydrationWarning!==!0&&ra(f.textContent,P,i),g=["children",""+P]):r.hasOwnProperty(b)&&P!=null&&b==="onScroll"&&Vt("scroll",f)}switch(u){case"input":Ne(f),ai(f,v,!0);break;case"textarea":Ne(f),Oo(f);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(f.onclick=oa)}f=g,o.updateQueue=f,f!==null&&(o.flags|=4)}else{b=g.nodeType===9?g:g.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=jo(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=b.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof f.is=="string"?i=b.createElement(u,{is:f.is}):(i=b.createElement(u),u==="select"&&(b=i,f.multiple?b.multiple=!0:f.size&&(b.size=f.size))):i=b.createElementNS(i,u),i[Ln]=o,i[Tr]=f,Jp(i,o,!1,!1),o.stateNode=i;t:{switch(b=zl(u,f),u){case"dialog":Vt("cancel",i),Vt("close",i),g=f;break;case"iframe":case"object":case"embed":Vt("load",i),g=f;break;case"video":case"audio":for(g=0;g<Er.length;g++)Vt(Er[g],i);g=f;break;case"source":Vt("error",i),g=f;break;case"img":case"image":case"link":Vt("error",i),Vt("load",i),g=f;break;case"details":Vt("toggle",i),g=f;break;case"input":qt(i,f),g=Ft(i,f),Vt("invalid",i);break;case"option":g=f;break;case"select":i._wrapperState={wasMultiple:!!f.multiple},g=Z({},f,{value:void 0}),Vt("invalid",i);break;case"textarea":No(i,f),g=rr(i,f),Vt("invalid",i);break;default:g=f}Vl(u,g),P=g;for(v in P)if(P.hasOwnProperty(v)){var L=P[v];v==="style"?Ud(i,L):v==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,L!=null&&gn(i,L)):v==="children"?typeof L=="string"?(u!=="textarea"||L!=="")&&Xn(i,L):typeof L=="number"&&Xn(i,""+L):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(r.hasOwnProperty(v)?L!=null&&v==="onScroll"&&Vt("scroll",i):L!=null&&C(i,v,L,b))}switch(u){case"input":Ne(i),ai(i,f,!1);break;case"textarea":Ne(i),Oo(i);break;case"option":f.value!=null&&i.setAttribute("value",""+Ct(f.value));break;case"select":i.multiple=!!f.multiple,v=f.value,v!=null?pn(i,!!f.multiple,v,!1):f.defaultValue!=null&&pn(i,!!f.multiple,f.defaultValue,!0);break;default:typeof g.onClick=="function"&&(i.onclick=oa)}switch(u){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break t;case"img":f=!0;break t;default:f=!1}}f&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Ee(o),null;case 6:if(i&&o.stateNode!=null)em(i,o,i.memoizedProps,f);else{if(typeof f!="string"&&o.stateNode===null)throw Error(e(166));if(u=zi(Mr.current),zi(Mn.current),fa(o)){if(f=o.stateNode,u=o.memoizedProps,f[Ln]=o,(v=f.nodeValue!==u)&&(i=Ke,i!==null))switch(i.tag){case 3:ra(f.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&ra(f.nodeValue,u,(i.mode&1)!==0)}v&&(o.flags|=4)}else f=(u.nodeType===9?u:u.ownerDocument).createTextNode(f),f[Ln]=o,o.stateNode=f}return Ee(o),null;case 13:if(zt(Wt),f=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Ht&&qe!==null&&(o.mode&1)!==0&&(o.flags&128)===0)sp(),Cs(),o.flags|=98560,v=!1;else if(v=fa(o),f!==null&&f.dehydrated!==null){if(i===null){if(!v)throw Error(e(318));if(v=o.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(e(317));v[Ln]=o}else Cs(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Ee(o),v=!1}else wn!==null&&(yu(wn),wn=null),v=!0;if(!v)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=u,o):(f=f!==null,f!==(i!==null&&i.memoizedState!==null)&&f&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(Wt.current&1)!==0?he===0&&(he=3):xu())),o.updateQueue!==null&&(o.flags|=4),Ee(o),null);case 4:return ks(),ou(i,o),i===null&&Cr(o.stateNode.containerInfo),Ee(o),null;case 10:return Dc(o.type._context),Ee(o),null;case 17:return Oe(o.type)&&la(),Ee(o),null;case 19:if(zt(Wt),v=o.memoizedState,v===null)return Ee(o),null;if(f=(o.flags&128)!==0,b=v.rendering,b===null)if(f)Or(v,!1);else{if(he!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(b=wa(i),b!==null){for(o.flags|=128,Or(v,!1),f=b.updateQueue,f!==null&&(o.updateQueue=f,o.flags|=4),o.subtreeFlags=0,f=u,u=o.child;u!==null;)v=u,i=f,v.flags&=14680066,b=v.alternate,b===null?(v.childLanes=0,v.lanes=i,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=b.childLanes,v.lanes=b.lanes,v.child=b.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=b.memoizedProps,v.memoizedState=b.memoizedState,v.updateQueue=b.updateQueue,v.type=b.type,i=b.dependencies,v.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return Bt(Wt,Wt.current&1|2),o.child}i=i.sibling}v.tail!==null&&Jt()>Is&&(o.flags|=128,f=!0,Or(v,!1),o.lanes=4194304)}else{if(!f)if(i=wa(b),i!==null){if(o.flags|=128,f=!0,u=i.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),Or(v,!0),v.tail===null&&v.tailMode==="hidden"&&!b.alternate&&!Ht)return Ee(o),null}else 2*Jt()-v.renderingStartTime>Is&&u!==1073741824&&(o.flags|=128,f=!0,Or(v,!1),o.lanes=4194304);v.isBackwards?(b.sibling=o.child,o.child=b):(u=v.last,u!==null?u.sibling=b:o.child=b,v.last=b)}return v.tail!==null?(o=v.tail,v.rendering=o,v.tail=o.sibling,v.renderingStartTime=Jt(),o.sibling=null,u=Wt.current,Bt(Wt,f?u&1|2:u&1),o):(Ee(o),null);case 22:case 23:return wu(),f=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==f&&(o.flags|=8192),f&&(o.mode&1)!==0?(Ye&1073741824)!==0&&(Ee(o),o.subtreeFlags&6&&(o.flags|=8192)):Ee(o),null;case 24:return null;case 25:return null}throw Error(e(156,o.tag))}function Gx(i,o){switch(Pc(o),o.tag){case 1:return Oe(o.type)&&la(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return ks(),zt(Fe),zt(be),zc(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return Bc(o),null;case 13:if(zt(Wt),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(e(340));Cs()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return zt(Wt),null;case 4:return ks(),null;case 10:return Dc(o.type._context),null;case 22:case 23:return wu(),null;case 24:return null;default:return null}}var Pa=!1,Ce=!1,Xx=typeof WeakSet=="function"?WeakSet:Set,it=null;function Ls(i,o){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(f){Yt(i,o,f)}else u.current=null}function au(i,o,u){try{u()}catch(f){Yt(i,o,f)}}var nm=!1;function Kx(i,o){if(wc=Ko,i=Df(),hc(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else t:{u=(u=i.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var g=f.anchorOffset,v=f.focusNode;f=f.focusOffset;try{u.nodeType,v.nodeType}catch{u=null;break t}var b=0,P=-1,L=-1,V=0,X=0,K=i,W=null;e:for(;;){for(var tt;K!==u||g!==0&&K.nodeType!==3||(P=b+g),K!==v||f!==0&&K.nodeType!==3||(L=b+f),K.nodeType===3&&(b+=K.nodeValue.length),(tt=K.firstChild)!==null;)W=K,K=tt;for(;;){if(K===i)break e;if(W===u&&++V===g&&(P=b),W===v&&++X===f&&(L=b),(tt=K.nextSibling)!==null)break;K=W,W=K.parentNode}K=tt}u=P===-1||L===-1?null:{start:P,end:L}}else u=null}u=u||{start:0,end:0}}else u=null;for(xc={focusedElem:i,selectionRange:u},Ko=!1,it=o;it!==null;)if(o=it,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,it=i;else for(;it!==null;){o=it;try{var rt=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(rt!==null){var ot=rt.memoizedProps,te=rt.memoizedState,F=o.stateNode,M=F.getSnapshotBeforeUpdate(o.elementType===o.type?ot:xn(o.type,ot),te);F.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var j=o.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(e(163))}}catch(Y){Yt(o,o.return,Y)}if(i=o.sibling,i!==null){i.return=o.return,it=i;break}it=o.return}return rt=nm,nm=!1,rt}function jr(i,o,u){var f=o.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var g=f=f.next;do{if((g.tag&i)===i){var v=g.destroy;g.destroy=void 0,v!==void 0&&au(o,u,v)}g=g.next}while(g!==f)}}function ka(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&i)===i){var f=u.create;u.destroy=f()}u=u.next}while(u!==o)}}function lu(i){var o=i.ref;if(o!==null){var u=i.stateNode;switch(i.tag){case 5:i=u;break;default:i=u}typeof o=="function"?o(i):o.current=i}}function im(i){var o=i.alternate;o!==null&&(i.alternate=null,im(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[Ln],delete o[Tr],delete o[Ec],delete o[Rx],delete o[Lx])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function sm(i){return i.tag===5||i.tag===3||i.tag===4}function rm(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||sm(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function cu(i,o,u){var f=i.tag;if(f===5||f===6)i=i.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(i,o):u.insertBefore(i,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(i,u)):(o=u,o.appendChild(i)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=oa));else if(f!==4&&(i=i.child,i!==null))for(cu(i,o,u),i=i.sibling;i!==null;)cu(i,o,u),i=i.sibling}function uu(i,o,u){var f=i.tag;if(f===5||f===6)i=i.stateNode,o?u.insertBefore(i,o):u.appendChild(i);else if(f!==4&&(i=i.child,i!==null))for(uu(i,o,u),i=i.sibling;i!==null;)uu(i,o,u),i=i.sibling}var we=null,An=!1;function xi(i,o,u){for(u=u.child;u!==null;)om(i,o,u),u=u.sibling}function om(i,o,u){if(Rn&&typeof Rn.onCommitFiberUnmount=="function")try{Rn.onCommitFiberUnmount(Ho,u)}catch{}switch(u.tag){case 5:Ce||Ls(u,o);case 6:var f=we,g=An;we=null,xi(i,o,u),we=f,An=g,we!==null&&(An?(i=we,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):we.removeChild(u.stateNode));break;case 18:we!==null&&(An?(i=we,u=u.stateNode,i.nodeType===8?Sc(i.parentNode,u):i.nodeType===1&&Sc(i,u),gr(i)):Sc(we,u.stateNode));break;case 4:f=we,g=An,we=u.stateNode.containerInfo,An=!0,xi(i,o,u),we=f,An=g;break;case 0:case 11:case 14:case 15:if(!Ce&&(f=u.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){g=f=f.next;do{var v=g,b=v.destroy;v=v.tag,b!==void 0&&((v&2)!==0||(v&4)!==0)&&au(u,o,b),g=g.next}while(g!==f)}xi(i,o,u);break;case 1:if(!Ce&&(Ls(u,o),f=u.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=u.memoizedProps,f.state=u.memoizedState,f.componentWillUnmount()}catch(P){Yt(u,o,P)}xi(i,o,u);break;case 21:xi(i,o,u);break;case 22:u.mode&1?(Ce=(f=Ce)||u.memoizedState!==null,xi(i,o,u),Ce=f):xi(i,o,u);break;default:xi(i,o,u)}}function am(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new Xx),o.forEach(function(f){var g=i1.bind(null,i,f);u.has(f)||(u.add(f),f.then(g,g))})}}function bn(i,o){var u=o.deletions;if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];try{var v=i,b=o,P=b;t:for(;P!==null;){switch(P.tag){case 5:we=P.stateNode,An=!1;break t;case 3:we=P.stateNode.containerInfo,An=!0;break t;case 4:we=P.stateNode.containerInfo,An=!0;break t}P=P.return}if(we===null)throw Error(e(160));om(v,b,g),we=null,An=!1;var L=g.alternate;L!==null&&(L.return=null),g.return=null}catch(V){Yt(g,o,V)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)lm(o,i),o=o.sibling}function lm(i,o){var u=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(bn(o,i),Dn(i),f&4){try{jr(3,i,i.return),ka(3,i)}catch(ot){Yt(i,i.return,ot)}try{jr(5,i,i.return)}catch(ot){Yt(i,i.return,ot)}}break;case 1:bn(o,i),Dn(i),f&512&&u!==null&&Ls(u,u.return);break;case 5:if(bn(o,i),Dn(i),f&512&&u!==null&&Ls(u,u.return),i.flags&32){var g=i.stateNode;try{Xn(g,"")}catch(ot){Yt(i,i.return,ot)}}if(f&4&&(g=i.stateNode,g!=null)){var v=i.memoizedProps,b=u!==null?u.memoizedProps:v,P=i.type,L=i.updateQueue;if(i.updateQueue=null,L!==null)try{P==="input"&&v.type==="radio"&&v.name!=null&&Zt(g,v),zl(P,b);var V=zl(P,v);for(b=0;b<L.length;b+=2){var X=L[b],K=L[b+1];X==="style"?Ud(g,K):X==="dangerouslySetInnerHTML"?gn(g,K):X==="children"?Xn(g,K):C(g,X,K,V)}switch(P){case"input":kn(g,v);break;case"textarea":Fo(g,v);break;case"select":var W=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!v.multiple;var tt=v.value;tt!=null?pn(g,!!v.multiple,tt,!1):W!==!!v.multiple&&(v.defaultValue!=null?pn(g,!!v.multiple,v.defaultValue,!0):pn(g,!!v.multiple,v.multiple?[]:"",!1))}g[Tr]=v}catch(ot){Yt(i,i.return,ot)}}break;case 6:if(bn(o,i),Dn(i),f&4){if(i.stateNode===null)throw Error(e(162));g=i.stateNode,v=i.memoizedProps;try{g.nodeValue=v}catch(ot){Yt(i,i.return,ot)}}break;case 3:if(bn(o,i),Dn(i),f&4&&u!==null&&u.memoizedState.isDehydrated)try{gr(o.containerInfo)}catch(ot){Yt(i,i.return,ot)}break;case 4:bn(o,i),Dn(i);break;case 13:bn(o,i),Dn(i),g=i.child,g.flags&8192&&(v=g.memoizedState!==null,g.stateNode.isHidden=v,!v||g.alternate!==null&&g.alternate.memoizedState!==null||(fu=Jt())),f&4&&am(i);break;case 22:if(X=u!==null&&u.memoizedState!==null,i.mode&1?(Ce=(V=Ce)||X,bn(o,i),Ce=V):bn(o,i),Dn(i),f&8192){if(V=i.memoizedState!==null,(i.stateNode.isHidden=V)&&!X&&(i.mode&1)!==0)for(it=i,X=i.child;X!==null;){for(K=it=X;it!==null;){switch(W=it,tt=W.child,W.tag){case 0:case 11:case 14:case 15:jr(4,W,W.return);break;case 1:Ls(W,W.return);var rt=W.stateNode;if(typeof rt.componentWillUnmount=="function"){f=W,u=W.return;try{o=f,rt.props=o.memoizedProps,rt.state=o.memoizedState,rt.componentWillUnmount()}catch(ot){Yt(f,u,ot)}}break;case 5:Ls(W,W.return);break;case 22:if(W.memoizedState!==null){hm(K);continue}}tt!==null?(tt.return=W,it=tt):hm(K)}X=X.sibling}t:for(X=null,K=i;;){if(K.tag===5){if(X===null){X=K;try{g=K.stateNode,V?(v=g.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(P=K.stateNode,L=K.memoizedProps.style,b=L!=null&&L.hasOwnProperty("display")?L.display:null,P.style.display=Hd("display",b))}catch(ot){Yt(i,i.return,ot)}}}else if(K.tag===6){if(X===null)try{K.stateNode.nodeValue=V?"":K.memoizedProps}catch(ot){Yt(i,i.return,ot)}}else if((K.tag!==22&&K.tag!==23||K.memoizedState===null||K===i)&&K.child!==null){K.child.return=K,K=K.child;continue}if(K===i)break t;for(;K.sibling===null;){if(K.return===null||K.return===i)break t;X===K&&(X=null),K=K.return}X===K&&(X=null),K.sibling.return=K.return,K=K.sibling}}break;case 19:bn(o,i),Dn(i),f&4&&am(i);break;case 21:break;default:bn(o,i),Dn(i)}}function Dn(i){var o=i.flags;if(o&2){try{t:{for(var u=i.return;u!==null;){if(sm(u)){var f=u;break t}u=u.return}throw Error(e(160))}switch(f.tag){case 5:var g=f.stateNode;f.flags&32&&(Xn(g,""),f.flags&=-33);var v=rm(i);uu(i,v,g);break;case 3:case 4:var b=f.stateNode.containerInfo,P=rm(i);cu(i,P,b);break;default:throw Error(e(161))}}catch(L){Yt(i,i.return,L)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function qx(i,o,u){it=i,cm(i)}function cm(i,o,u){for(var f=(i.mode&1)!==0;it!==null;){var g=it,v=g.child;if(g.tag===22&&f){var b=g.memoizedState!==null||Pa;if(!b){var P=g.alternate,L=P!==null&&P.memoizedState!==null||Ce;P=Pa;var V=Ce;if(Pa=b,(Ce=L)&&!V)for(it=g;it!==null;)b=it,L=b.child,b.tag===22&&b.memoizedState!==null?dm(g):L!==null?(L.return=b,it=L):dm(g);for(;v!==null;)it=v,cm(v),v=v.sibling;it=g,Pa=P,Ce=V}um(i)}else(g.subtreeFlags&8772)!==0&&v!==null?(v.return=g,it=v):um(i)}}function um(i){for(;it!==null;){var o=it;if((o.flags&8772)!==0){var u=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:Ce||ka(5,o);break;case 1:var f=o.stateNode;if(o.flags&4&&!Ce)if(u===null)f.componentDidMount();else{var g=o.elementType===o.type?u.memoizedProps:xn(o.type,u.memoizedProps);f.componentDidUpdate(g,u.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var v=o.updateQueue;v!==null&&hp(o,v,f);break;case 3:var b=o.updateQueue;if(b!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}hp(o,b,u)}break;case 5:var P=o.stateNode;if(u===null&&o.flags&4){u=P;var L=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":L.autoFocus&&u.focus();break;case"img":L.src&&(u.src=L.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var V=o.alternate;if(V!==null){var X=V.memoizedState;if(X!==null){var K=X.dehydrated;K!==null&&gr(K)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(e(163))}Ce||o.flags&512&&lu(o)}catch(W){Yt(o,o.return,W)}}if(o===i){it=null;break}if(u=o.sibling,u!==null){u.return=o.return,it=u;break}it=o.return}}function hm(i){for(;it!==null;){var o=it;if(o===i){it=null;break}var u=o.sibling;if(u!==null){u.return=o.return,it=u;break}it=o.return}}function dm(i){for(;it!==null;){var o=it;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{ka(4,o)}catch(L){Yt(o,u,L)}break;case 1:var f=o.stateNode;if(typeof f.componentDidMount=="function"){var g=o.return;try{f.componentDidMount()}catch(L){Yt(o,g,L)}}var v=o.return;try{lu(o)}catch(L){Yt(o,v,L)}break;case 5:var b=o.return;try{lu(o)}catch(L){Yt(o,b,L)}}}catch(L){Yt(o,o.return,L)}if(o===i){it=null;break}var P=o.sibling;if(P!==null){P.return=o.return,it=P;break}it=o.return}}var Yx=Math.ceil,Ra=R.ReactCurrentDispatcher,hu=R.ReactCurrentOwner,ln=R.ReactCurrentBatchConfig,Mt=0,pe=null,oe=null,xe=0,Ye=0,Ms=mi(0),he=0,Br=null,Ui=0,La=0,du=0,Vr=null,Be=null,fu=0,Is=1/0,ei=null,Ma=!1,pu=null,Ai=null,Ia=!1,bi=null,Da=0,zr=0,mu=null,Na=-1,Fa=0;function Le(){return(Mt&6)!==0?Jt():Na!==-1?Na:Na=Jt()}function Si(i){return(i.mode&1)===0?1:(Mt&2)!==0&&xe!==0?xe&-xe:Ix.transition!==null?(Fa===0&&(Fa=rf()),Fa):(i=Dt,i!==0||(i=window.event,i=i===void 0?16:pf(i.type)),i)}function Sn(i,o,u,f){if(50<zr)throw zr=0,mu=null,Error(e(185));hr(i,u,f),((Mt&2)===0||i!==pe)&&(i===pe&&((Mt&2)===0&&(La|=u),he===4&&Ei(i,xe)),Ve(i,f),u===1&&Mt===0&&(o.mode&1)===0&&(Is=Jt()+500,ua&&yi()))}function Ve(i,o){var u=i.callbackNode;Iw(i,o);var f=Wo(i,i===pe?xe:0);if(f===0)u!==null&&ef(u),i.callbackNode=null,i.callbackPriority=0;else if(o=f&-f,i.callbackPriority!==o){if(u!=null&&ef(u),o===1)i.tag===0?Mx(pm.bind(null,i)):Jf(pm.bind(null,i)),Px(function(){(Mt&6)===0&&yi()}),u=null;else{switch(of(f)){case 1:u=Kl;break;case 4:u=nf;break;case 16:u=zo;break;case 536870912:u=sf;break;default:u=zo}u=bm(u,fm.bind(null,i))}i.callbackPriority=o,i.callbackNode=u}}function fm(i,o){if(Na=-1,Fa=0,(Mt&6)!==0)throw Error(e(327));var u=i.callbackNode;if(Ds()&&i.callbackNode!==u)return null;var f=Wo(i,i===pe?xe:0);if(f===0)return null;if((f&30)!==0||(f&i.expiredLanes)!==0||o)o=Oa(i,f);else{o=f;var g=Mt;Mt|=2;var v=gm();(pe!==i||xe!==o)&&(ei=null,Is=Jt()+500,Wi(i,o));do try{Jx();break}catch(P){mm(i,P)}while(!0);Ic(),Ra.current=v,Mt=g,oe!==null?o=0:(pe=null,xe=0,o=he)}if(o!==0){if(o===2&&(g=ql(i),g!==0&&(f=g,o=gu(i,g))),o===1)throw u=Br,Wi(i,0),Ei(i,f),Ve(i,Jt()),u;if(o===6)Ei(i,f);else{if(g=i.current.alternate,(f&30)===0&&!Qx(g)&&(o=Oa(i,f),o===2&&(v=ql(i),v!==0&&(f=v,o=gu(i,v))),o===1))throw u=Br,Wi(i,0),Ei(i,f),Ve(i,Jt()),u;switch(i.finishedWork=g,i.finishedLanes=f,o){case 0:case 1:throw Error(e(345));case 2:Gi(i,Be,ei);break;case 3:if(Ei(i,f),(f&130023424)===f&&(o=fu+500-Jt(),10<o)){if(Wo(i,0)!==0)break;if(g=i.suspendedLanes,(g&f)!==f){Le(),i.pingedLanes|=i.suspendedLanes&g;break}i.timeoutHandle=bc(Gi.bind(null,i,Be,ei),o);break}Gi(i,Be,ei);break;case 4:if(Ei(i,f),(f&4194240)===f)break;for(o=i.eventTimes,g=-1;0<f;){var b=31-yn(f);v=1<<b,b=o[b],b>g&&(g=b),f&=~v}if(f=g,f=Jt()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*Yx(f/1960))-f,10<f){i.timeoutHandle=bc(Gi.bind(null,i,Be,ei),f);break}Gi(i,Be,ei);break;case 5:Gi(i,Be,ei);break;default:throw Error(e(329))}}}return Ve(i,Jt()),i.callbackNode===u?fm.bind(null,i):null}function gu(i,o){var u=Vr;return i.current.memoizedState.isDehydrated&&(Wi(i,o).flags|=256),i=Oa(i,o),i!==2&&(o=Be,Be=u,o!==null&&yu(o)),i}function yu(i){Be===null?Be=i:Be.push.apply(Be,i)}function Qx(i){for(var o=i;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var f=0;f<u.length;f++){var g=u[f],v=g.getSnapshot;g=g.value;try{if(!vn(v(),g))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ei(i,o){for(o&=~du,o&=~La,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var u=31-yn(o),f=1<<u;i[u]=-1,o&=~f}}function pm(i){if((Mt&6)!==0)throw Error(e(327));Ds();var o=Wo(i,0);if((o&1)===0)return Ve(i,Jt()),null;var u=Oa(i,o);if(i.tag!==0&&u===2){var f=ql(i);f!==0&&(o=f,u=gu(i,f))}if(u===1)throw u=Br,Wi(i,0),Ei(i,o),Ve(i,Jt()),u;if(u===6)throw Error(e(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,Gi(i,Be,ei),Ve(i,Jt()),null}function vu(i,o){var u=Mt;Mt|=1;try{return i(o)}finally{Mt=u,Mt===0&&(Is=Jt()+500,ua&&yi())}}function $i(i){bi!==null&&bi.tag===0&&(Mt&6)===0&&Ds();var o=Mt;Mt|=1;var u=ln.transition,f=Dt;try{if(ln.transition=null,Dt=1,i)return i()}finally{Dt=f,ln.transition=u,Mt=o,(Mt&6)===0&&yi()}}function wu(){Ye=Ms.current,zt(Ms)}function Wi(i,o){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,Tx(u)),oe!==null)for(u=oe.return;u!==null;){var f=u;switch(Pc(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&la();break;case 3:ks(),zt(Fe),zt(be),zc();break;case 5:Bc(f);break;case 4:ks();break;case 13:zt(Wt);break;case 19:zt(Wt);break;case 10:Dc(f.type._context);break;case 22:case 23:wu()}u=u.return}if(pe=i,oe=i=Ci(i.current,null),xe=Ye=o,he=0,Br=null,du=La=Ui=0,Be=Vr=null,Vi!==null){for(o=0;o<Vi.length;o++)if(u=Vi[o],f=u.interleaved,f!==null){u.interleaved=null;var g=f.next,v=u.pending;if(v!==null){var b=v.next;v.next=g,f.next=b}u.pending=f}Vi=null}return i}function mm(i,o){do{var u=oe;try{if(Ic(),xa.current=Ea,Aa){for(var f=Gt.memoizedState;f!==null;){var g=f.queue;g!==null&&(g.pending=null),f=f.next}Aa=!1}if(Hi=0,fe=ue=Gt=null,Ir=!1,Dr=0,hu.current=null,u===null||u.return===null){he=1,Br=o,oe=null;break}t:{var v=i,b=u.return,P=u,L=o;if(o=xe,P.flags|=32768,L!==null&&typeof L=="object"&&typeof L.then=="function"){var V=L,X=P,K=X.tag;if((X.mode&1)===0&&(K===0||K===11||K===15)){var W=X.alternate;W?(X.updateQueue=W.updateQueue,X.memoizedState=W.memoizedState,X.lanes=W.lanes):(X.updateQueue=null,X.memoizedState=null)}var tt=Vp(b);if(tt!==null){tt.flags&=-257,zp(tt,b,P,v,o),tt.mode&1&&Bp(v,V,o),o=tt,L=V;var rt=o.updateQueue;if(rt===null){var ot=new Set;ot.add(L),o.updateQueue=ot}else rt.add(L);break t}else{if((o&1)===0){Bp(v,V,o),xu();break t}L=Error(e(426))}}else if(Ht&&P.mode&1){var te=Vp(b);if(te!==null){(te.flags&65536)===0&&(te.flags|=256),zp(te,b,P,v,o),Lc(Rs(L,P));break t}}v=L=Rs(L,P),he!==4&&(he=2),Vr===null?Vr=[v]:Vr.push(v),v=b;do{switch(v.tag){case 3:v.flags|=65536,o&=-o,v.lanes|=o;var F=Op(v,L,o);up(v,F);break t;case 1:P=L;var M=v.type,j=v.stateNode;if((v.flags&128)===0&&(typeof M.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(Ai===null||!Ai.has(j)))){v.flags|=65536,o&=-o,v.lanes|=o;var Y=jp(v,P,o);up(v,Y);break t}}v=v.return}while(v!==null)}vm(u)}catch(at){o=at,oe===u&&u!==null&&(oe=u=u.return);continue}break}while(!0)}function gm(){var i=Ra.current;return Ra.current=Ea,i===null?Ea:i}function xu(){(he===0||he===3||he===2)&&(he=4),pe===null||(Ui&268435455)===0&&(La&268435455)===0||Ei(pe,xe)}function Oa(i,o){var u=Mt;Mt|=2;var f=gm();(pe!==i||xe!==o)&&(ei=null,Wi(i,o));do try{Zx();break}catch(g){mm(i,g)}while(!0);if(Ic(),Mt=u,Ra.current=f,oe!==null)throw Error(e(261));return pe=null,xe=0,he}function Zx(){for(;oe!==null;)ym(oe)}function Jx(){for(;oe!==null&&!Ew();)ym(oe)}function ym(i){var o=Am(i.alternate,i,Ye);i.memoizedProps=i.pendingProps,o===null?vm(i):oe=o,hu.current=null}function vm(i){var o=i;do{var u=o.alternate;if(i=o.return,(o.flags&32768)===0){if(u=Wx(u,o,Ye),u!==null){oe=u;return}}else{if(u=Gx(u,o),u!==null){u.flags&=32767,oe=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{he=6,oe=null;return}}if(o=o.sibling,o!==null){oe=o;return}oe=o=i}while(o!==null);he===0&&(he=5)}function Gi(i,o,u){var f=Dt,g=ln.transition;try{ln.transition=null,Dt=1,t1(i,o,u,f)}finally{ln.transition=g,Dt=f}return null}function t1(i,o,u,f){do Ds();while(bi!==null);if((Mt&6)!==0)throw Error(e(327));u=i.finishedWork;var g=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(e(177));i.callbackNode=null,i.callbackPriority=0;var v=u.lanes|u.childLanes;if(Dw(i,v),i===pe&&(oe=pe=null,xe=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Ia||(Ia=!0,bm(zo,function(){return Ds(),null})),v=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||v){v=ln.transition,ln.transition=null;var b=Dt;Dt=1;var P=Mt;Mt|=4,hu.current=null,Kx(i,u),lm(u,i),xx(xc),Ko=!!wc,xc=wc=null,i.current=u,qx(u),Cw(),Mt=P,Dt=b,ln.transition=v}else i.current=u;if(Ia&&(Ia=!1,bi=i,Da=g),v=i.pendingLanes,v===0&&(Ai=null),Pw(u.stateNode),Ve(i,Jt()),o!==null)for(f=i.onRecoverableError,u=0;u<o.length;u++)g=o[u],f(g.value,{componentStack:g.stack,digest:g.digest});if(Ma)throw Ma=!1,i=pu,pu=null,i;return(Da&1)!==0&&i.tag!==0&&Ds(),v=i.pendingLanes,(v&1)!==0?i===mu?zr++:(zr=0,mu=i):zr=0,yi(),null}function Ds(){if(bi!==null){var i=of(Da),o=ln.transition,u=Dt;try{if(ln.transition=null,Dt=16>i?16:i,bi===null)var f=!1;else{if(i=bi,bi=null,Da=0,(Mt&6)!==0)throw Error(e(331));var g=Mt;for(Mt|=4,it=i.current;it!==null;){var v=it,b=v.child;if((it.flags&16)!==0){var P=v.deletions;if(P!==null){for(var L=0;L<P.length;L++){var V=P[L];for(it=V;it!==null;){var X=it;switch(X.tag){case 0:case 11:case 15:jr(8,X,v)}var K=X.child;if(K!==null)K.return=X,it=K;else for(;it!==null;){X=it;var W=X.sibling,tt=X.return;if(im(X),X===V){it=null;break}if(W!==null){W.return=tt,it=W;break}it=tt}}}var rt=v.alternate;if(rt!==null){var ot=rt.child;if(ot!==null){rt.child=null;do{var te=ot.sibling;ot.sibling=null,ot=te}while(ot!==null)}}it=v}}if((v.subtreeFlags&2064)!==0&&b!==null)b.return=v,it=b;else t:for(;it!==null;){if(v=it,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:jr(9,v,v.return)}var F=v.sibling;if(F!==null){F.return=v.return,it=F;break t}it=v.return}}var M=i.current;for(it=M;it!==null;){b=it;var j=b.child;if((b.subtreeFlags&2064)!==0&&j!==null)j.return=b,it=j;else t:for(b=M;it!==null;){if(P=it,(P.flags&2048)!==0)try{switch(P.tag){case 0:case 11:case 15:ka(9,P)}}catch(at){Yt(P,P.return,at)}if(P===b){it=null;break t}var Y=P.sibling;if(Y!==null){Y.return=P.return,it=Y;break t}it=P.return}}if(Mt=g,yi(),Rn&&typeof Rn.onPostCommitFiberRoot=="function")try{Rn.onPostCommitFiberRoot(Ho,i)}catch{}f=!0}return f}finally{Dt=u,ln.transition=o}}return!1}function wm(i,o,u){o=Rs(u,o),o=Op(i,o,1),i=wi(i,o,1),o=Le(),i!==null&&(hr(i,1,o),Ve(i,o))}function Yt(i,o,u){if(i.tag===3)wm(i,i,u);else for(;o!==null;){if(o.tag===3){wm(o,i,u);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Ai===null||!Ai.has(f))){i=Rs(u,i),i=jp(o,i,1),o=wi(o,i,1),i=Le(),o!==null&&(hr(o,1,i),Ve(o,i));break}}o=o.return}}function e1(i,o,u){var f=i.pingCache;f!==null&&f.delete(o),o=Le(),i.pingedLanes|=i.suspendedLanes&u,pe===i&&(xe&u)===u&&(he===4||he===3&&(xe&130023424)===xe&&500>Jt()-fu?Wi(i,0):du|=u),Ve(i,o)}function xm(i,o){o===0&&((i.mode&1)===0?o=1:(o=$o,$o<<=1,($o&130023424)===0&&($o=4194304)));var u=Le();i=Zn(i,o),i!==null&&(hr(i,o,u),Ve(i,u))}function n1(i){var o=i.memoizedState,u=0;o!==null&&(u=o.retryLane),xm(i,u)}function i1(i,o){var u=0;switch(i.tag){case 13:var f=i.stateNode,g=i.memoizedState;g!==null&&(u=g.retryLane);break;case 19:f=i.stateNode;break;default:throw Error(e(314))}f!==null&&f.delete(o),xm(i,u)}var Am;Am=function(i,o,u){if(i!==null)if(i.memoizedProps!==o.pendingProps||Fe.current)je=!0;else{if((i.lanes&u)===0&&(o.flags&128)===0)return je=!1,$x(i,o,u);je=(i.flags&131072)!==0}else je=!1,Ht&&(o.flags&1048576)!==0&&tp(o,da,o.index);switch(o.lanes=0,o.tag){case 2:var f=o.type;Ta(i,o),i=o.pendingProps;var g=bs(o,be.current);Ps(o,u),g=$c(null,o,f,i,g,u);var v=Wc();return o.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Oe(f)?(v=!0,ca(o)):v=!1,o.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,Oc(o),g.updater=Ca,o.stateNode=g,g._reactInternals=o,Qc(o,f,i,u),o=eu(null,o,f,!0,v,u)):(o.tag=0,Ht&&v&&Tc(o),Re(null,o,g,u),o=o.child),o;case 16:f=o.elementType;t:{switch(Ta(i,o),i=o.pendingProps,g=f._init,f=g(f._payload),o.type=f,g=o.tag=r1(f),i=xn(f,i),g){case 0:o=tu(null,o,f,i,u);break t;case 1:o=Xp(null,o,f,i,u);break t;case 11:o=Hp(null,o,f,i,u);break t;case 14:o=Up(null,o,f,xn(f.type,i),u);break t}throw Error(e(306,f,""))}return o;case 0:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:xn(f,g),tu(i,o,f,g,u);case 1:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:xn(f,g),Xp(i,o,f,g,u);case 3:t:{if(Kp(o),i===null)throw Error(e(387));f=o.pendingProps,v=o.memoizedState,g=v.element,cp(i,o),va(o,f,null,u);var b=o.memoizedState;if(f=b.element,v.isDehydrated)if(v={element:f,isDehydrated:!1,cache:b.cache,pendingSuspenseBoundaries:b.pendingSuspenseBoundaries,transitions:b.transitions},o.updateQueue.baseState=v,o.memoizedState=v,o.flags&256){g=Rs(Error(e(423)),o),o=qp(i,o,f,u,g);break t}else if(f!==g){g=Rs(Error(e(424)),o),o=qp(i,o,f,u,g);break t}else for(qe=pi(o.stateNode.containerInfo.firstChild),Ke=o,Ht=!0,wn=null,u=ap(o,null,f,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Cs(),f===g){o=ti(i,o,u);break t}Re(i,o,f,u)}o=o.child}return o;case 5:return dp(o),i===null&&Rc(o),f=o.type,g=o.pendingProps,v=i!==null?i.memoizedProps:null,b=g.children,Ac(f,g)?b=null:v!==null&&Ac(f,v)&&(o.flags|=32),Gp(i,o),Re(i,o,b,u),o.child;case 6:return i===null&&Rc(o),null;case 13:return Yp(i,o,u);case 4:return jc(o,o.stateNode.containerInfo),f=o.pendingProps,i===null?o.child=_s(o,null,f,u):Re(i,o,f,u),o.child;case 11:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:xn(f,g),Hp(i,o,f,g,u);case 7:return Re(i,o,o.pendingProps,u),o.child;case 8:return Re(i,o,o.pendingProps.children,u),o.child;case 12:return Re(i,o,o.pendingProps.children,u),o.child;case 10:t:{if(f=o.type._context,g=o.pendingProps,v=o.memoizedProps,b=g.value,Bt(ma,f._currentValue),f._currentValue=b,v!==null)if(vn(v.value,b)){if(v.children===g.children&&!Fe.current){o=ti(i,o,u);break t}}else for(v=o.child,v!==null&&(v.return=o);v!==null;){var P=v.dependencies;if(P!==null){b=v.child;for(var L=P.firstContext;L!==null;){if(L.context===f){if(v.tag===1){L=Jn(-1,u&-u),L.tag=2;var V=v.updateQueue;if(V!==null){V=V.shared;var X=V.pending;X===null?L.next=L:(L.next=X.next,X.next=L),V.pending=L}}v.lanes|=u,L=v.alternate,L!==null&&(L.lanes|=u),Nc(v.return,u,o),P.lanes|=u;break}L=L.next}}else if(v.tag===10)b=v.type===o.type?null:v.child;else if(v.tag===18){if(b=v.return,b===null)throw Error(e(341));b.lanes|=u,P=b.alternate,P!==null&&(P.lanes|=u),Nc(b,u,o),b=v.sibling}else b=v.child;if(b!==null)b.return=v;else for(b=v;b!==null;){if(b===o){b=null;break}if(v=b.sibling,v!==null){v.return=b.return,b=v;break}b=b.return}v=b}Re(i,o,g.children,u),o=o.child}return o;case 9:return g=o.type,f=o.pendingProps.children,Ps(o,u),g=on(g),f=f(g),o.flags|=1,Re(i,o,f,u),o.child;case 14:return f=o.type,g=xn(f,o.pendingProps),g=xn(f.type,g),Up(i,o,f,g,u);case 15:return $p(i,o,o.type,o.pendingProps,u);case 17:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:xn(f,g),Ta(i,o),o.tag=1,Oe(f)?(i=!0,ca(o)):i=!1,Ps(o,u),Np(o,f,g),Qc(o,f,g,u),eu(null,o,f,!0,i,u);case 19:return Zp(i,o,u);case 22:return Wp(i,o,u)}throw Error(e(156,o.tag))};function bm(i,o){return tf(i,o)}function s1(i,o,u,f){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cn(i,o,u,f){return new s1(i,o,u,f)}function Au(i){return i=i.prototype,!(!i||!i.isReactComponent)}function r1(i){if(typeof i=="function")return Au(i)?1:0;if(i!=null){if(i=i.$$typeof,i===ht)return 11;if(i===Et)return 14}return 2}function Ci(i,o){var u=i.alternate;return u===null?(u=cn(i.tag,o,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=o,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,o=i.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function ja(i,o,u,f,g,v){var b=2;if(f=i,typeof i=="function")Au(i)&&(b=1);else if(typeof i=="string")b=5;else t:switch(i){case D:return Xi(u.children,g,v,o);case B:b=8,g|=8;break;case H:return i=cn(12,u,o,g|2),i.elementType=H,i.lanes=v,i;case lt:return i=cn(13,u,o,g),i.elementType=lt,i.lanes=v,i;case et:return i=cn(19,u,o,g),i.elementType=et,i.lanes=v,i;case U:return Ba(u,g,v,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case G:b=10;break t;case Q:b=9;break t;case ht:b=11;break t;case Et:b=14;break t;case q:b=16,f=null;break t}throw Error(e(130,i==null?i:typeof i,""))}return o=cn(b,u,o,g),o.elementType=i,o.type=f,o.lanes=v,o}function Xi(i,o,u,f){return i=cn(7,i,f,o),i.lanes=u,i}function Ba(i,o,u,f){return i=cn(22,i,f,o),i.elementType=U,i.lanes=u,i.stateNode={isHidden:!1},i}function bu(i,o,u){return i=cn(6,i,null,o),i.lanes=u,i}function Su(i,o,u){return o=cn(4,i.children!==null?i.children:[],i.key,o),o.lanes=u,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function o1(i,o,u,f,g){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yl(0),this.expirationTimes=Yl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yl(0),this.identifierPrefix=f,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function Eu(i,o,u,f,g,v,b,P,L){return i=new o1(i,o,u,P,L),o===1?(o=1,v===!0&&(o|=8)):o=0,v=cn(3,null,null,o),i.current=v,v.stateNode=i,v.memoizedState={element:f,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oc(v),i}function a1(i,o,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:I,key:f==null?null:""+f,children:i,containerInfo:o,implementation:u}}function Sm(i){if(!i)return gi;i=i._reactInternals;t:{if(Ni(i)!==i||i.tag!==1)throw Error(e(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break t;case 1:if(Oe(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break t}}o=o.return}while(o!==null);throw Error(e(171))}if(i.tag===1){var u=i.type;if(Oe(u))return Qf(i,u,o)}return o}function Em(i,o,u,f,g,v,b,P,L){return i=Eu(u,f,!0,i,g,v,b,P,L),i.context=Sm(null),u=i.current,f=Le(),g=Si(u),v=Jn(f,g),v.callback=o??null,wi(u,v,g),i.current.lanes=g,hr(i,g,f),Ve(i,f),i}function Va(i,o,u,f){var g=o.current,v=Le(),b=Si(g);return u=Sm(u),o.context===null?o.context=u:o.pendingContext=u,o=Jn(v,b),o.payload={element:i},f=f===void 0?null:f,f!==null&&(o.callback=f),i=wi(g,o,b),i!==null&&(Sn(i,g,b,v),ya(i,g,b)),b}function za(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function Cm(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<o?u:o}}function Cu(i,o){Cm(i,o),(i=i.alternate)&&Cm(i,o)}function l1(){return null}var _m=typeof reportError=="function"?reportError:function(i){console.error(i)};function _u(i){this._internalRoot=i}Ha.prototype.render=_u.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(e(409));Va(i,o,null,null)},Ha.prototype.unmount=_u.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;$i(function(){Va(null,i,null,null)}),o[Kn]=null}};function Ha(i){this._internalRoot=i}Ha.prototype.unstable_scheduleHydration=function(i){if(i){var o=cf();i={blockedOn:null,target:i,priority:o};for(var u=0;u<hi.length&&o!==0&&o<hi[u].priority;u++);hi.splice(u,0,i),u===0&&df(i)}};function Tu(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Ua(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Tm(){}function c1(i,o,u,f,g){if(g){if(typeof f=="function"){var v=f;f=function(){var V=za(b);v.call(V)}}var b=Em(o,f,i,0,null,!1,!1,"",Tm);return i._reactRootContainer=b,i[Kn]=b.current,Cr(i.nodeType===8?i.parentNode:i),$i(),b}for(;g=i.lastChild;)i.removeChild(g);if(typeof f=="function"){var P=f;f=function(){var V=za(L);P.call(V)}}var L=Eu(i,0,!1,null,null,!1,!1,"",Tm);return i._reactRootContainer=L,i[Kn]=L.current,Cr(i.nodeType===8?i.parentNode:i),$i(function(){Va(o,L,u,f)}),L}function $a(i,o,u,f,g){var v=u._reactRootContainer;if(v){var b=v;if(typeof g=="function"){var P=g;g=function(){var L=za(b);P.call(L)}}Va(o,b,i,g)}else b=c1(u,o,i,g,f);return za(b)}af=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var u=ur(o.pendingLanes);u!==0&&(Ql(o,u|1),Ve(o,Jt()),(Mt&6)===0&&(Is=Jt()+500,yi()))}break;case 13:$i(function(){var f=Zn(i,1);if(f!==null){var g=Le();Sn(f,i,1,g)}}),Cu(i,1)}},Zl=function(i){if(i.tag===13){var o=Zn(i,134217728);if(o!==null){var u=Le();Sn(o,i,134217728,u)}Cu(i,134217728)}},lf=function(i){if(i.tag===13){var o=Si(i),u=Zn(i,o);if(u!==null){var f=Le();Sn(u,i,o,f)}Cu(i,o)}},cf=function(){return Dt},uf=function(i,o){var u=Dt;try{return Dt=i,o()}finally{Dt=u}},$l=function(i,o,u){switch(o){case"input":if(kn(i,u),o=u.name,u.type==="radio"&&o!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var f=u[o];if(f!==i&&f.form===i.form){var g=aa(f);if(!g)throw Error(e(90));en(f),kn(f,g)}}}break;case"textarea":Fo(i,u);break;case"select":o=u.value,o!=null&&pn(i,!!u.multiple,o,!1)}},Xd=vu,Kd=$i;var u1={usingClientEntryPoint:!1,Events:[Pr,xs,aa,Wd,Gd,vu]},Hr={findFiberByHostInstance:Fi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},h1={bundleType:Hr.bundleType,version:Hr.version,rendererPackageName:Hr.rendererPackageName,rendererConfig:Hr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:R.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Zd(i),i===null?null:i.stateNode},findFiberByHostInstance:Hr.findFiberByHostInstance||l1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wa.isDisabled&&Wa.supportsFiber)try{Ho=Wa.inject(h1),Rn=Wa}catch{}}return He.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=u1,He.createPortal=function(i,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Tu(o))throw Error(e(200));return a1(i,o,null,u)},He.createRoot=function(i,o){if(!Tu(i))throw Error(e(299));var u=!1,f="",g=_m;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onRecoverableError!==void 0&&(g=o.onRecoverableError)),o=Eu(i,1,!1,null,null,u,!1,f,g),i[Kn]=o.current,Cr(i.nodeType===8?i.parentNode:i),new _u(o)},He.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(e(188)):(i=Object.keys(i).join(","),Error(e(268,i)));return i=Zd(o),i=i===null?null:i.stateNode,i},He.flushSync=function(i){return $i(i)},He.hydrate=function(i,o,u){if(!Ua(o))throw Error(e(200));return $a(null,i,o,!0,u)},He.hydrateRoot=function(i,o,u){if(!Tu(i))throw Error(e(405));var f=u!=null&&u.hydratedSources||null,g=!1,v="",b=_m;if(u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onRecoverableError!==void 0&&(b=u.onRecoverableError)),o=Em(o,null,i,1,u??null,g,!1,v,b),i[Kn]=o.current,Cr(i),f)for(i=0;i<f.length;i++)u=f[i],g=u._getVersion,g=g(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,g]:o.mutableSourceEagerHydrationData.push(u,g);return new Ha(o)},He.render=function(i,o,u){if(!Ua(o))throw Error(e(200));return $a(null,i,o,!1,u)},He.unmountComponentAtNode=function(i){if(!Ua(i))throw Error(e(40));return i._reactRootContainer?($i(function(){$a(null,null,i,!1,function(){i._reactRootContainer=null,i[Kn]=null})}),!0):!1},He.unstable_batchedUpdates=vu,He.unstable_renderSubtreeIntoContainer=function(i,o,u,f){if(!Ua(u))throw Error(e(200));if(i==null||i._reactInternals===void 0)throw Error(e(38));return $a(i,o,u,!1,f)},He.version="18.3.1-next-f1338f8080-20240426",He}var Om;function x1(){if(Om)return Lu.exports;Om=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Lu.exports=w1(),Lu.exports}var jm;function A1(){if(jm)return Ga;jm=1;var s=x1();return Ga.createRoot=s.createRoot,Ga.hydrateRoot=s.hydrateRoot,Ga}var b1=A1();const S1=Bh(b1),zh=O.createContext({});function tr(s){const t=O.useRef(null);return t.current===null&&(t.current=s()),t.current}const Hh=typeof window<"u",El=Hh?O.useLayoutEffect:O.useEffect,Cl=O.createContext(null);function Uh(s,t){s.indexOf(t)===-1&&s.push(t)}function $h(s,t){const e=s.indexOf(t);e>-1&&s.splice(e,1)}const Gn=(s,t,e)=>e>t?t:e<s?s:e;let lo=()=>{};const si={},By=s=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(s);function Vy(s){return typeof s=="object"&&s!==null}const zy=s=>/^0[^.\s]+$/u.test(s);function Wh(s){let t;return()=>(t===void 0&&(t=s()),t)}const Ge=s=>s,E1=(s,t)=>e=>t(s(e)),Ao=(...s)=>s.reduce(E1),Ys=(s,t,e)=>{const n=t-s;return n===0?1:(e-s)/n};class Gh{constructor(){this.subscriptions=[]}add(t){return Uh(this.subscriptions,t),()=>$h(this.subscriptions,t)}notify(t,e,n){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](t,e,n);else for(let a=0;a<r;a++){const l=this.subscriptions[a];l&&l(t,e,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Un=s=>s*1e3,$n=s=>s/1e3;function Xh(s,t){return t?s*(1e3/t):0}const Hy=(s,t,e)=>(((1-3*e+3*t)*s+(3*e-6*t))*s+3*t)*s,C1=1e-7,_1=12;function T1(s,t,e,n,r){let a,l,c=0;do l=t+(e-t)/2,a=Hy(l,n,r)-s,a>0?e=l:t=l;while(Math.abs(a)>C1&&++c<_1);return l}function bo(s,t,e,n){if(s===t&&e===n)return Ge;const r=a=>T1(a,0,1,s,e);return a=>a===0||a===1?a:Hy(r(a),t,n)}const Uy=s=>t=>t<=.5?s(2*t)/2:(2-s(2*(1-t)))/2,$y=s=>t=>1-s(1-t),Wy=bo(.33,1.53,.69,.99),Kh=$y(Wy),Gy=Uy(Kh),Xy=s=>(s*=2)<1?.5*Kh(s):.5*(2-Math.pow(2,-10*(s-1))),qh=s=>1-Math.sin(Math.acos(s)),Ky=$y(qh),qy=Uy(qh),P1=bo(.42,0,1,1),k1=bo(0,0,.58,1),Yy=bo(.42,0,.58,1),R1=s=>Array.isArray(s)&&typeof s[0]!="number",Qy=s=>Array.isArray(s)&&typeof s[0]=="number",L1={linear:Ge,easeIn:P1,easeInOut:Yy,easeOut:k1,circIn:qh,circInOut:qy,circOut:Ky,backIn:Kh,backInOut:Gy,backOut:Wy,anticipate:Xy},M1=s=>typeof s=="string",Bm=s=>{if(Qy(s)){lo(s.length===4);const[t,e,n,r]=s;return bo(t,e,n,r)}else if(M1(s))return L1[s];return s},Xa=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function I1(s,t){let e=new Set,n=new Set,r=!1,a=!1;const l=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function h(p){l.has(p)&&(d.schedule(p),s()),p(c)}const d={schedule:(p,m=!1,y=!1)=>{const A=y&&r?e:n;return m&&l.add(p),A.has(p)||A.add(p),p},cancel:p=>{n.delete(p),l.delete(p)},process:p=>{if(c=p,r){a=!0;return}r=!0,[e,n]=[n,e],e.forEach(h),e.clear(),r=!1,a&&(a=!1,d.process(p))}};return d}const D1=40;function Zy(s,t){let e=!1,n=!0;const r={delta:0,timestamp:0,isProcessing:!1},a=()=>e=!0,l=Xa.reduce((C,R)=>(C[R]=I1(a),C),{}),{setup:c,read:h,resolveKeyframes:d,preUpdate:p,update:m,preRender:y,render:w,postRender:A}=l,x=()=>{const C=si.useManualTiming?r.timestamp:performance.now();e=!1,si.useManualTiming||(r.delta=n?1e3/60:Math.max(Math.min(C-r.timestamp,D1),1)),r.timestamp=C,r.isProcessing=!0,c.process(r),h.process(r),d.process(r),p.process(r),m.process(r),y.process(r),w.process(r),A.process(r),r.isProcessing=!1,e&&t&&(n=!1,s(x))},E=()=>{e=!0,n=!0,r.isProcessing||s(x)};return{schedule:Xa.reduce((C,R)=>{const k=l[R];return C[R]=(I,D=!1,B=!1)=>(e||E(),k.schedule(I,D,B)),C},{}),cancel:C=>{for(let R=0;R<Xa.length;R++)l[Xa[R]].cancel(C)},state:r,steps:l}}const{schedule:Nt,cancel:Tn,state:ye,steps:Du}=Zy(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ge,!0);let ol;function N1(){ol=void 0}const We={now:()=>(ol===void 0&&We.set(ye.isProcessing||si.useManualTiming?ye.timestamp:performance.now()),ol),set:s=>{ol=s,queueMicrotask(N1)}},Jy=s=>t=>typeof t=="string"&&t.startsWith(s),Yh=Jy("--"),F1=Jy("var(--"),Qh=s=>F1(s)?O1.test(s.split("/*")[0].trim()):!1,O1=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,er={test:s=>typeof s=="number",parse:parseFloat,transform:s=>s},co={...er,transform:s=>Gn(0,1,s)},Ka={...er,default:1},to=s=>Math.round(s*1e5)/1e5,Zh=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function j1(s){return s==null}const B1=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Jh=(s,t)=>e=>!!(typeof e=="string"&&B1.test(e)&&e.startsWith(s)||t&&!j1(e)&&Object.prototype.hasOwnProperty.call(e,t)),t0=(s,t,e)=>n=>{if(typeof n!="string")return n;const[r,a,l,c]=n.match(Zh);return{[s]:parseFloat(r),[t]:parseFloat(a),[e]:parseFloat(l),alpha:c!==void 0?parseFloat(c):1}},V1=s=>Gn(0,255,s),Nu={...er,transform:s=>Math.round(V1(s))},Zi={test:Jh("rgb","red"),parse:t0("red","green","blue"),transform:({red:s,green:t,blue:e,alpha:n=1})=>"rgba("+Nu.transform(s)+", "+Nu.transform(t)+", "+Nu.transform(e)+", "+to(co.transform(n))+")"};function z1(s){let t="",e="",n="",r="";return s.length>5?(t=s.substring(1,3),e=s.substring(3,5),n=s.substring(5,7),r=s.substring(7,9)):(t=s.substring(1,2),e=s.substring(2,3),n=s.substring(3,4),r=s.substring(4,5),t+=t,e+=e,n+=n,r+=r),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(n,16),alpha:r?parseInt(r,16)/255:1}}const oh={test:Jh("#"),parse:z1,transform:Zi.transform},So=s=>({test:t=>typeof t=="string"&&t.endsWith(s)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${s}`}),Ti=So("deg"),Wn=So("%"),vt=So("px"),H1=So("vh"),U1=So("vw"),Vm={...Wn,parse:s=>Wn.parse(s)/100,transform:s=>Wn.transform(s*100)},Os={test:Jh("hsl","hue"),parse:t0("hue","saturation","lightness"),transform:({hue:s,saturation:t,lightness:e,alpha:n=1})=>"hsla("+Math.round(s)+", "+Wn.transform(to(t))+", "+Wn.transform(to(e))+", "+to(co.transform(n))+")"},le={test:s=>Zi.test(s)||oh.test(s)||Os.test(s),parse:s=>Zi.test(s)?Zi.parse(s):Os.test(s)?Os.parse(s):oh.parse(s),transform:s=>typeof s=="string"?s:s.hasOwnProperty("red")?Zi.transform(s):Os.transform(s),getAnimatableNone:s=>{const t=le.parse(s);return t.alpha=0,le.transform(t)}},$1=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function W1(s){return isNaN(s)&&typeof s=="string"&&(s.match(Zh)?.length||0)+(s.match($1)?.length||0)>0}const e0="number",n0="color",G1="var",X1="var(",zm="${}",K1=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function uo(s){const t=s.toString(),e=[],n={color:[],number:[],var:[]},r=[];let a=0;const c=t.replace(K1,h=>(le.test(h)?(n.color.push(a),r.push(n0),e.push(le.parse(h))):h.startsWith(X1)?(n.var.push(a),r.push(G1),e.push(h)):(n.number.push(a),r.push(e0),e.push(parseFloat(h))),++a,zm)).split(zm);return{values:e,split:c,indexes:n,types:r}}function i0(s){return uo(s).values}function s0(s){const{split:t,types:e}=uo(s),n=t.length;return r=>{let a="";for(let l=0;l<n;l++)if(a+=t[l],r[l]!==void 0){const c=e[l];c===e0?a+=to(r[l]):c===n0?a+=le.transform(r[l]):a+=r[l]}return a}}const q1=s=>typeof s=="number"?0:le.test(s)?le.getAnimatableNone(s):s;function Y1(s){const t=i0(s);return s0(s)(t.map(q1))}const Ri={test:W1,parse:i0,createTransformer:s0,getAnimatableNone:Y1};function Fu(s,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?s+(t-s)*6*e:e<1/2?t:e<2/3?s+(t-s)*(2/3-e)*6:s}function Q1({hue:s,saturation:t,lightness:e,alpha:n}){s/=360,t/=100,e/=100;let r=0,a=0,l=0;if(!t)r=a=l=e;else{const c=e<.5?e*(1+t):e+t-e*t,h=2*e-c;r=Fu(h,c,s+1/3),a=Fu(h,c,s),l=Fu(h,c,s-1/3)}return{red:Math.round(r*255),green:Math.round(a*255),blue:Math.round(l*255),alpha:n}}function ml(s,t){return e=>e>0?t:s}const Kt=(s,t,e)=>s+(t-s)*e,Ou=(s,t,e)=>{const n=s*s,r=e*(t*t-n)+n;return r<0?0:Math.sqrt(r)},Z1=[oh,Zi,Os],J1=s=>Z1.find(t=>t.test(s));function Hm(s){const t=J1(s);if(!t)return!1;let e=t.parse(s);return t===Os&&(e=Q1(e)),e}const Um=(s,t)=>{const e=Hm(s),n=Hm(t);if(!e||!n)return ml(s,t);const r={...e};return a=>(r.red=Ou(e.red,n.red,a),r.green=Ou(e.green,n.green,a),r.blue=Ou(e.blue,n.blue,a),r.alpha=Kt(e.alpha,n.alpha,a),Zi.transform(r))},ah=new Set(["none","hidden"]);function tA(s,t){return ah.has(s)?e=>e<=0?s:t:e=>e>=1?t:s}function eA(s,t){return e=>Kt(s,t,e)}function td(s){return typeof s=="number"?eA:typeof s=="string"?Qh(s)?ml:le.test(s)?Um:sA:Array.isArray(s)?r0:typeof s=="object"?le.test(s)?Um:nA:ml}function r0(s,t){const e=[...s],n=e.length,r=s.map((a,l)=>td(a)(a,t[l]));return a=>{for(let l=0;l<n;l++)e[l]=r[l](a);return e}}function nA(s,t){const e={...s,...t},n={};for(const r in e)s[r]!==void 0&&t[r]!==void 0&&(n[r]=td(s[r])(s[r],t[r]));return r=>{for(const a in n)e[a]=n[a](r);return e}}function iA(s,t){const e=[],n={color:0,var:0,number:0};for(let r=0;r<t.values.length;r++){const a=t.types[r],l=s.indexes[a][n[a]],c=s.values[l]??0;e[r]=c,n[a]++}return e}const sA=(s,t)=>{const e=Ri.createTransformer(t),n=uo(s),r=uo(t);return n.indexes.var.length===r.indexes.var.length&&n.indexes.color.length===r.indexes.color.length&&n.indexes.number.length>=r.indexes.number.length?ah.has(s)&&!r.values.length||ah.has(t)&&!n.values.length?tA(s,t):Ao(r0(iA(n,r),r.values),e):ml(s,t)};function o0(s,t,e){return typeof s=="number"&&typeof t=="number"&&typeof e=="number"?Kt(s,t,e):td(s)(s,t)}const rA=s=>{const t=({timestamp:e})=>s(e);return{start:(e=!0)=>Nt.update(t,e),stop:()=>Tn(t),now:()=>ye.isProcessing?ye.timestamp:We.now()}},a0=(s,t,e=10)=>{let n="";const r=Math.max(Math.round(t/e),2);for(let a=0;a<r;a++)n+=Math.round(s(a/(r-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},gl=2e4;function ed(s){let t=0;const e=50;let n=s.next(t);for(;!n.done&&t<gl;)t+=e,n=s.next(t);return t>=gl?1/0:t}function oA(s,t=100,e){const n=e({...s,keyframes:[0,t]}),r=Math.min(ed(n),gl);return{type:"keyframes",ease:a=>n.next(r*a).value/t,duration:$n(r)}}const aA=5;function l0(s,t,e){const n=Math.max(t-aA,0);return Xh(e-s(n),t-n)}const Qt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},ju=.001;function lA({duration:s=Qt.duration,bounce:t=Qt.bounce,velocity:e=Qt.velocity,mass:n=Qt.mass}){let r,a,l=1-t;l=Gn(Qt.minDamping,Qt.maxDamping,l),s=Gn(Qt.minDuration,Qt.maxDuration,$n(s)),l<1?(r=d=>{const p=d*l,m=p*s,y=p-e,w=lh(d,l),A=Math.exp(-m);return ju-y/w*A},a=d=>{const m=d*l*s,y=m*e+e,w=Math.pow(l,2)*Math.pow(d,2)*s,A=Math.exp(-m),x=lh(Math.pow(d,2),l);return(-r(d)+ju>0?-1:1)*((y-w)*A)/x}):(r=d=>{const p=Math.exp(-d*s),m=(d-e)*s+1;return-ju+p*m},a=d=>{const p=Math.exp(-d*s),m=(e-d)*(s*s);return p*m});const c=5/s,h=uA(r,a,c);if(s=Un(s),isNaN(h))return{stiffness:Qt.stiffness,damping:Qt.damping,duration:s};{const d=Math.pow(h,2)*n;return{stiffness:d,damping:l*2*Math.sqrt(n*d),duration:s}}}const cA=12;function uA(s,t,e){let n=e;for(let r=1;r<cA;r++)n=n-s(n)/t(n);return n}function lh(s,t){return s*Math.sqrt(1-t*t)}const hA=["duration","bounce"],dA=["stiffness","damping","mass"];function $m(s,t){return t.some(e=>s[e]!==void 0)}function fA(s){let t={velocity:Qt.velocity,stiffness:Qt.stiffness,damping:Qt.damping,mass:Qt.mass,isResolvedFromDuration:!1,...s};if(!$m(s,dA)&&$m(s,hA))if(s.visualDuration){const e=s.visualDuration,n=2*Math.PI/(e*1.2),r=n*n,a=2*Gn(.05,1,1-(s.bounce||0))*Math.sqrt(r);t={...t,mass:Qt.mass,stiffness:r,damping:a}}else{const e=lA(s);t={...t,...e,mass:Qt.mass},t.isResolvedFromDuration=!0}return t}function yl(s=Qt.visualDuration,t=Qt.bounce){const e=typeof s!="object"?{visualDuration:s,keyframes:[0,1],bounce:t}:s;let{restSpeed:n,restDelta:r}=e;const a=e.keyframes[0],l=e.keyframes[e.keyframes.length-1],c={done:!1,value:a},{stiffness:h,damping:d,mass:p,duration:m,velocity:y,isResolvedFromDuration:w}=fA({...e,velocity:-$n(e.velocity||0)}),A=y||0,x=d/(2*Math.sqrt(h*p)),E=l-a,S=$n(Math.sqrt(h/p)),_=Math.abs(E)<5;n||(n=_?Qt.restSpeed.granular:Qt.restSpeed.default),r||(r=_?Qt.restDelta.granular:Qt.restDelta.default);let C;if(x<1){const k=lh(S,x);C=I=>{const D=Math.exp(-x*S*I);return l-D*((A+x*S*E)/k*Math.sin(k*I)+E*Math.cos(k*I))}}else if(x===1)C=k=>l-Math.exp(-S*k)*(E+(A+S*E)*k);else{const k=S*Math.sqrt(x*x-1);C=I=>{const D=Math.exp(-x*S*I),B=Math.min(k*I,300);return l-D*((A+x*S*E)*Math.sinh(B)+k*E*Math.cosh(B))/k}}const R={calculatedDuration:w&&m||null,next:k=>{const I=C(k);if(w)c.done=k>=m;else{let D=k===0?A:0;x<1&&(D=k===0?Un(A):l0(C,k,I));const B=Math.abs(D)<=n,H=Math.abs(l-I)<=r;c.done=B&&H}return c.value=c.done?l:I,c},toString:()=>{const k=Math.min(ed(R),gl),I=a0(D=>R.next(k*D).value,k,30);return k+"ms "+I},toTransition:()=>{}};return R}yl.applyToOptions=s=>{const t=oA(s,100,yl);return s.ease=t.ease,s.duration=Un(t.duration),s.type="keyframes",s};function ch({keyframes:s,velocity:t=0,power:e=.8,timeConstant:n=325,bounceDamping:r=10,bounceStiffness:a=500,modifyTarget:l,min:c,max:h,restDelta:d=.5,restSpeed:p}){const m=s[0],y={done:!1,value:m},w=B=>c!==void 0&&B<c||h!==void 0&&B>h,A=B=>c===void 0?h:h===void 0||Math.abs(c-B)<Math.abs(h-B)?c:h;let x=e*t;const E=m+x,S=l===void 0?E:l(E);S!==E&&(x=S-m);const _=B=>-x*Math.exp(-B/n),C=B=>S+_(B),R=B=>{const H=_(B),G=C(B);y.done=Math.abs(H)<=d,y.value=y.done?S:G};let k,I;const D=B=>{w(y.value)&&(k=B,I=yl({keyframes:[y.value,A(y.value)],velocity:l0(C,B,y.value),damping:r,stiffness:a,restDelta:d,restSpeed:p}))};return D(0),{calculatedDuration:null,next:B=>{let H=!1;return!I&&k===void 0&&(H=!0,R(B),D(B)),k!==void 0&&B>=k?I.next(B-k):(!H&&R(B),y)}}}function pA(s,t,e){const n=[],r=e||si.mix||o0,a=s.length-1;for(let l=0;l<a;l++){let c=r(s[l],s[l+1]);if(t){const h=Array.isArray(t)?t[l]||Ge:t;c=Ao(h,c)}n.push(c)}return n}function nd(s,t,{clamp:e=!0,ease:n,mixer:r}={}){const a=s.length;if(lo(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const l=s[0]===s[1];s[0]>s[a-1]&&(s=[...s].reverse(),t=[...t].reverse());const c=pA(t,n,r),h=c.length,d=p=>{if(l&&p<s[0])return t[0];let m=0;if(h>1)for(;m<s.length-2&&!(p<s[m+1]);m++);const y=Ys(s[m],s[m+1],p);return c[m](y)};return e?p=>d(Gn(s[0],s[a-1],p)):d}function mA(s,t){const e=s[s.length-1];for(let n=1;n<=t;n++){const r=Ys(0,t,n);s.push(Kt(e,1,r))}}function c0(s){const t=[0];return mA(t,s.length-1),t}function gA(s,t){return s.map(e=>e*t)}function yA(s,t){return s.map(()=>t||Yy).splice(0,s.length-1)}function eo({duration:s=300,keyframes:t,times:e,ease:n="easeInOut"}){const r=R1(n)?n.map(Bm):Bm(n),a={done:!1,value:t[0]},l=gA(e&&e.length===t.length?e:c0(t),s),c=nd(l,t,{ease:Array.isArray(r)?r:yA(t,r)});return{calculatedDuration:s,next:h=>(a.value=c(h),a.done=h>=s,a)}}const vA=s=>s!==null;function id(s,{repeat:t,repeatType:e="loop"},n,r=1){const a=s.filter(vA),c=r<0||t&&e!=="loop"&&t%2===1?0:a.length-1;return!c||n===void 0?a[c]:n}const wA={decay:ch,inertia:ch,tween:eo,keyframes:eo,spring:yl};function u0(s){typeof s.type=="string"&&(s.type=wA[s.type])}class sd{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,e){return this.finished.then(t,e)}}const xA=s=>s/100;class rd extends sd{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:e}=this.options;e&&e.updatedAt!==We.now()&&this.tick(We.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;u0(t);const{type:e=eo,repeat:n=0,repeatDelay:r=0,repeatType:a,velocity:l=0}=t;let{keyframes:c}=t;const h=e||eo;h!==eo&&typeof c[0]!="number"&&(this.mixKeyframes=Ao(xA,o0(c[0],c[1])),c=[0,100]);const d=h({...t,keyframes:c});a==="mirror"&&(this.mirroredGenerator=h({...t,keyframes:[...c].reverse(),velocity:-l})),d.calculatedDuration===null&&(d.calculatedDuration=ed(d));const{calculatedDuration:p}=d;this.calculatedDuration=p,this.resolvedDuration=p+r,this.totalDuration=this.resolvedDuration*(n+1)-r,this.generator=d}updateTime(t){const e=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=e}tick(t,e=!1){const{generator:n,totalDuration:r,mixKeyframes:a,mirroredGenerator:l,resolvedDuration:c,calculatedDuration:h}=this;if(this.startTime===null)return n.next(0);const{delay:d=0,keyframes:p,repeat:m,repeatType:y,repeatDelay:w,type:A,onUpdate:x,finalKeyframe:E}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-r/this.speed,this.startTime)),e?this.currentTime=t:this.updateTime(t);const S=this.currentTime-d*(this.playbackSpeed>=0?1:-1),_=this.playbackSpeed>=0?S<0:S>r;this.currentTime=Math.max(S,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let C=this.currentTime,R=n;if(m){const B=Math.min(this.currentTime,r)/c;let H=Math.floor(B),G=B%1;!G&&B>=1&&(G=1),G===1&&H--,H=Math.min(H,m+1),!!(H%2)&&(y==="reverse"?(G=1-G,w&&(G-=w/c)):y==="mirror"&&(R=l)),C=Gn(0,1,G)*c}const k=_?{done:!1,value:p[0]}:R.next(C);a&&(k.value=a(k.value));let{done:I}=k;!_&&h!==null&&(I=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const D=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&I);return D&&A!==ch&&(k.value=id(p,this.options,E,this.speed)),x&&x(k.value),D&&this.finish(),k}then(t,e){return this.finished.then(t,e)}get duration(){return $n(this.calculatedDuration)}get time(){return $n(this.currentTime)}set time(t){t=Un(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(We.now());const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=$n(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=rA,startTime:e}=this.options;this.driver||(this.driver=t(r=>this.tick(r))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=e??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(We.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function AA(s){for(let t=1;t<s.length;t++)s[t]??(s[t]=s[t-1])}const Ji=s=>s*180/Math.PI,uh=s=>{const t=Ji(Math.atan2(s[1],s[0]));return hh(t)},bA={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:s=>(Math.abs(s[0])+Math.abs(s[3]))/2,rotate:uh,rotateZ:uh,skewX:s=>Ji(Math.atan(s[1])),skewY:s=>Ji(Math.atan(s[2])),skew:s=>(Math.abs(s[1])+Math.abs(s[2]))/2},hh=s=>(s=s%360,s<0&&(s+=360),s),Wm=uh,Gm=s=>Math.sqrt(s[0]*s[0]+s[1]*s[1]),Xm=s=>Math.sqrt(s[4]*s[4]+s[5]*s[5]),SA={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Gm,scaleY:Xm,scale:s=>(Gm(s)+Xm(s))/2,rotateX:s=>hh(Ji(Math.atan2(s[6],s[5]))),rotateY:s=>hh(Ji(Math.atan2(-s[2],s[0]))),rotateZ:Wm,rotate:Wm,skewX:s=>Ji(Math.atan(s[4])),skewY:s=>Ji(Math.atan(s[1])),skew:s=>(Math.abs(s[1])+Math.abs(s[4]))/2};function dh(s){return s.includes("scale")?1:0}function fh(s,t){if(!s||s==="none")return dh(t);const e=s.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,r;if(e)n=SA,r=e;else{const c=s.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=bA,r=c}if(!r)return dh(t);const a=n[t],l=r[1].split(",").map(CA);return typeof a=="function"?a(l):l[a]}const EA=(s,t)=>{const{transform:e="none"}=getComputedStyle(s);return fh(e,t)};function CA(s){return parseFloat(s.trim())}const nr=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ir=new Set(nr),Km=s=>s===er||s===vt,_A=new Set(["x","y","z"]),TA=nr.filter(s=>!_A.has(s));function PA(s){const t=[];return TA.forEach(e=>{const n=s.getValue(e);n!==void 0&&(t.push([e,n.get()]),n.set(e.startsWith("scale")?1:0))}),t}const ss={width:({x:s},{paddingLeft:t="0",paddingRight:e="0"})=>s.max-s.min-parseFloat(t)-parseFloat(e),height:({y:s},{paddingTop:t="0",paddingBottom:e="0"})=>s.max-s.min-parseFloat(t)-parseFloat(e),top:(s,{top:t})=>parseFloat(t),left:(s,{left:t})=>parseFloat(t),bottom:({y:s},{top:t})=>parseFloat(t)+(s.max-s.min),right:({x:s},{left:t})=>parseFloat(t)+(s.max-s.min),x:(s,{transform:t})=>fh(t,"x"),y:(s,{transform:t})=>fh(t,"y")};ss.translateX=ss.x;ss.translateY=ss.y;const rs=new Set;let ph=!1,mh=!1,gh=!1;function h0(){if(mh){const s=Array.from(rs).filter(n=>n.needsMeasurement),t=new Set(s.map(n=>n.element)),e=new Map;t.forEach(n=>{const r=PA(n);r.length&&(e.set(n,r),n.render())}),s.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const r=e.get(n);r&&r.forEach(([a,l])=>{n.getValue(a)?.set(l)})}),s.forEach(n=>n.measureEndState()),s.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}mh=!1,ph=!1,rs.forEach(s=>s.complete(gh)),rs.clear()}function d0(){rs.forEach(s=>{s.readKeyframes(),s.needsMeasurement&&(mh=!0)})}function kA(){gh=!0,d0(),h0(),gh=!1}class od{constructor(t,e,n,r,a,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=n,this.motionValue=r,this.element=a,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(rs.add(this),ph||(ph=!0,Nt.read(d0),Nt.resolveKeyframes(h0))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:n,motionValue:r}=this;if(t[0]===null){const a=r?.get(),l=t[t.length-1];if(a!==void 0)t[0]=a;else if(n&&e){const c=n.readValue(e,l);c!=null&&(t[0]=c)}t[0]===void 0&&(t[0]=l),r&&a===void 0&&r.set(t[0])}AA(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),rs.delete(this)}cancel(){this.state==="scheduled"&&(rs.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const RA=s=>s.startsWith("--");function LA(s,t,e){RA(t)?s.style.setProperty(t,e):s.style[t]=e}const f0=Wh(()=>window.ScrollTimeline!==void 0),MA={};function IA(s,t){const e=Wh(s);return()=>MA[t]??e()}const p0=IA(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Yr=([s,t,e,n])=>`cubic-bezier(${s}, ${t}, ${e}, ${n})`,qm={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Yr([0,.65,.55,1]),circOut:Yr([.55,0,1,.45]),backIn:Yr([.31,.01,.66,-.59]),backOut:Yr([.33,1.53,.69,.99])};function m0(s,t){if(s)return typeof s=="function"?p0()?a0(s,t):"ease-out":Qy(s)?Yr(s):Array.isArray(s)?s.map(e=>m0(e,t)||qm.easeOut):qm[s]}function DA(s,t,e,{delay:n=0,duration:r=300,repeat:a=0,repeatType:l="loop",ease:c="easeOut",times:h}={},d=void 0){const p={[t]:e};h&&(p.offset=h);const m=m0(c,r);Array.isArray(m)&&(p.easing=m);const y={delay:n,duration:r,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:a+1,direction:l==="reverse"?"alternate":"normal"};return d&&(y.pseudoElement=d),s.animate(p,y)}function g0(s){return typeof s=="function"&&"applyToOptions"in s}function NA({type:s,...t}){return g0(s)&&p0()?s.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class FA extends sd{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:e,name:n,keyframes:r,pseudoElement:a,allowFlatten:l=!1,finalKeyframe:c,onComplete:h}=t;this.isPseudoElement=!!a,this.allowFlatten=l,this.options=t,lo(typeof t.type!="string");const d=NA(t);this.animation=DA(e,n,r,d,a),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const p=id(r,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(p):LA(e,n,p),this.animation.cancel()}h?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return $n(Number(t))}get time(){return $n(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Un(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:e}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&f0()?(this.animation.timeline=t,Ge):e(this)}}const y0={anticipate:Xy,backInOut:Gy,circInOut:qy};function OA(s){return s in y0}function jA(s){typeof s.ease=="string"&&OA(s.ease)&&(s.ease=y0[s.ease])}const Ym=10;class BA extends FA{constructor(t){jA(t),u0(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:e,onUpdate:n,onComplete:r,element:a,...l}=this.options;if(!e)return;if(t!==void 0){e.set(t);return}const c=new rd({...l,autoplay:!1}),h=Un(this.finishedTime??this.time);e.setWithVelocity(c.sample(h-Ym).value,c.sample(h).value,Ym),c.stop()}}const Qm=(s,t)=>t==="zIndex"?!1:!!(typeof s=="number"||Array.isArray(s)||typeof s=="string"&&(Ri.test(s)||s==="0")&&!s.startsWith("url("));function VA(s){const t=s[0];if(s.length===1)return!0;for(let e=0;e<s.length;e++)if(s[e]!==t)return!0}function zA(s,t,e,n){const r=s[0];if(r===null)return!1;if(t==="display"||t==="visibility")return!0;const a=s[s.length-1],l=Qm(r,t),c=Qm(a,t);return!l||!c?!1:VA(s)||(e==="spring"||g0(e))&&n}function yh(s){s.duration=0,s.type}const HA=new Set(["opacity","clipPath","filter","transform"]),UA=Wh(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function $A(s){const{motionValue:t,name:e,repeatDelay:n,repeatType:r,damping:a,type:l}=s;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:d}=t.owner.getProps();return UA()&&e&&HA.has(e)&&(e!=="transform"||!d)&&!h&&!n&&r!=="mirror"&&a!==0&&l!=="inertia"}const WA=40;class GA extends sd{constructor({autoplay:t=!0,delay:e=0,type:n="keyframes",repeat:r=0,repeatDelay:a=0,repeatType:l="loop",keyframes:c,name:h,motionValue:d,element:p,...m}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=We.now();const y={autoplay:t,delay:e,type:n,repeat:r,repeatDelay:a,repeatType:l,name:h,motionValue:d,element:p,...m},w=p?.KeyframeResolver||od;this.keyframeResolver=new w(c,(A,x,E)=>this.onKeyframesResolved(A,x,y,!E),h,d,p),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,e,n,r){this.keyframeResolver=void 0;const{name:a,type:l,velocity:c,delay:h,isHandoff:d,onUpdate:p}=n;this.resolvedAt=We.now(),zA(t,a,l,c)||((si.instantAnimations||!h)&&p?.(id(t,n,e)),t[0]=t[t.length-1],yh(n),n.repeat=0);const y={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>WA?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:e,...n,keyframes:t},w=!d&&$A(y)?new BA({...y,element:y.motionValue.owner.current}):new rd(y);w.finished.then(()=>this.notifyFinished()).catch(Ge),this.pendingTimeline&&(this.stopTimeline=w.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=w}get finished(){return this._animation?this.animation.finished:this._finished}then(t,e){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),kA()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const XA=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function KA(s){const t=XA.exec(s);if(!t)return[,];const[,e,n,r]=t;return[`--${e??n}`,r]}function v0(s,t,e=1){const[n,r]=KA(s);if(!n)return;const a=window.getComputedStyle(t).getPropertyValue(n);if(a){const l=a.trim();return By(l)?parseFloat(l):l}return Qh(r)?v0(r,t,e+1):r}function ad(s,t){return s?.[t]??s?.default??s}const w0=new Set(["width","height","top","left","right","bottom",...nr]),qA={test:s=>s==="auto",parse:s=>s},x0=s=>t=>t.test(s),A0=[er,vt,Wn,Ti,U1,H1,qA],Zm=s=>A0.find(x0(s));function YA(s){return typeof s=="number"?s===0:s!==null?s==="none"||s==="0"||zy(s):!0}const QA=new Set(["brightness","contrast","saturate","opacity"]);function ZA(s){const[t,e]=s.slice(0,-1).split("(");if(t==="drop-shadow")return s;const[n]=e.match(Zh)||[];if(!n)return s;const r=e.replace(n,"");let a=QA.has(t)?1:0;return n!==e&&(a*=100),t+"("+a+r+")"}const JA=/\b([a-z-]*)\(.*?\)/gu,vh={...Ri,getAnimatableNone:s=>{const t=s.match(JA);return t?t.map(ZA).join(" "):s}},Jm={...er,transform:Math.round},tb={rotate:Ti,rotateX:Ti,rotateY:Ti,rotateZ:Ti,scale:Ka,scaleX:Ka,scaleY:Ka,scaleZ:Ka,skew:Ti,skewX:Ti,skewY:Ti,distance:vt,translateX:vt,translateY:vt,translateZ:vt,x:vt,y:vt,z:vt,perspective:vt,transformPerspective:vt,opacity:co,originX:Vm,originY:Vm,originZ:vt},ld={borderWidth:vt,borderTopWidth:vt,borderRightWidth:vt,borderBottomWidth:vt,borderLeftWidth:vt,borderRadius:vt,radius:vt,borderTopLeftRadius:vt,borderTopRightRadius:vt,borderBottomRightRadius:vt,borderBottomLeftRadius:vt,width:vt,maxWidth:vt,height:vt,maxHeight:vt,top:vt,right:vt,bottom:vt,left:vt,padding:vt,paddingTop:vt,paddingRight:vt,paddingBottom:vt,paddingLeft:vt,margin:vt,marginTop:vt,marginRight:vt,marginBottom:vt,marginLeft:vt,backgroundPositionX:vt,backgroundPositionY:vt,...tb,zIndex:Jm,fillOpacity:co,strokeOpacity:co,numOctaves:Jm},eb={...ld,color:le,backgroundColor:le,outlineColor:le,fill:le,stroke:le,borderColor:le,borderTopColor:le,borderRightColor:le,borderBottomColor:le,borderLeftColor:le,filter:vh,WebkitFilter:vh},b0=s=>eb[s];function S0(s,t){let e=b0(s);return e!==vh&&(e=Ri),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const nb=new Set(["auto","none","0"]);function ib(s,t,e){let n=0,r;for(;n<s.length&&!r;){const a=s[n];typeof a=="string"&&!nb.has(a)&&uo(a).values.length&&(r=s[n]),n++}if(r&&e)for(const a of t)s[a]=S0(e,r)}class sb extends od{constructor(t,e,n,r,a){super(t,e,n,r,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:n}=this;if(!e||!e.current)return;super.readKeyframes();for(let h=0;h<t.length;h++){let d=t[h];if(typeof d=="string"&&(d=d.trim(),Qh(d))){const p=v0(d,e.current);p!==void 0&&(t[h]=p),h===t.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!w0.has(n)||t.length!==2)return;const[r,a]=t,l=Zm(r),c=Zm(a);if(l!==c)if(Km(l)&&Km(c))for(let h=0;h<t.length;h++){const d=t[h];typeof d=="string"&&(t[h]=parseFloat(d))}else ss[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,n=[];for(let r=0;r<t.length;r++)(t[r]===null||YA(t[r]))&&n.push(r);n.length&&ib(t,n,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ss[n](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const r=e[e.length-1];r!==void 0&&t.getValue(n,r).jump(r,!1)}measureEndState(){const{element:t,name:e,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const r=t.getValue(e);r&&r.jump(this.measuredOrigin,!1);const a=n.length-1,l=n[a];n[a]=ss[e](t.measureViewportBox(),window.getComputedStyle(t.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,h])=>{t.getValue(c).set(h)}),this.resolveNoneKeyframes()}}function E0(s,t,e){if(s instanceof EventTarget)return[s];if(typeof s=="string"){const r=document.querySelectorAll(s);return r?Array.from(r):[]}return Array.from(s)}const C0=(s,t)=>t&&typeof s=="number"?t.transform(s):s;function cd(s){return Vy(s)&&"offsetHeight"in s}const tg=30,rb=s=>!isNaN(parseFloat(s)),no={current:void 0};class ob{constructor(t,e={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{const r=We.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=We.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=rb(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new Gh);const n=this.events[t].add(e);return t==="change"?()=>{n(),Nt.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,e,n){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return no.current&&no.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const t=We.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>tg)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,tg);return Xh(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function _n(s,t){return new ob(s,t)}const{schedule:ud}=Zy(queueMicrotask,!1),En={x:!1,y:!1};function _0(){return En.x||En.y}function ab(s){return s==="x"||s==="y"?En[s]?null:(En[s]=!0,()=>{En[s]=!1}):En.x||En.y?null:(En.x=En.y=!0,()=>{En.x=En.y=!1})}function T0(s,t){const e=E0(s),n=new AbortController,r={passive:!0,...t,signal:n.signal};return[e,r,()=>n.abort()]}function eg(s){return!(s.pointerType==="touch"||_0())}function lb(s,t,e={}){const[n,r,a]=T0(s,e),l=c=>{if(!eg(c))return;const{target:h}=c,d=t(h,c);if(typeof d!="function"||!h)return;const p=m=>{eg(m)&&(d(m),h.removeEventListener("pointerleave",p))};h.addEventListener("pointerleave",p,r)};return n.forEach(c=>{c.addEventListener("pointerenter",l,r)}),a}const P0=(s,t)=>t?s===t?!0:P0(s,t.parentElement):!1,hd=s=>s.pointerType==="mouse"?typeof s.button!="number"||s.button<=0:s.isPrimary!==!1,cb=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function ub(s){return cb.has(s.tagName)||s.tabIndex!==-1}const al=new WeakSet;function ng(s){return t=>{t.key==="Enter"&&s(t)}}function Bu(s,t){s.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const hb=(s,t)=>{const e=s.currentTarget;if(!e)return;const n=ng(()=>{if(al.has(e))return;Bu(e,"down");const r=ng(()=>{Bu(e,"up")}),a=()=>Bu(e,"cancel");e.addEventListener("keyup",r,t),e.addEventListener("blur",a,t)});e.addEventListener("keydown",n,t),e.addEventListener("blur",()=>e.removeEventListener("keydown",n),t)};function ig(s){return hd(s)&&!_0()}function db(s,t,e={}){const[n,r,a]=T0(s,e),l=c=>{const h=c.currentTarget;if(!ig(c))return;al.add(h);const d=t(h,c),p=(w,A)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",y),al.has(h)&&al.delete(h),ig(w)&&typeof d=="function"&&d(w,{success:A})},m=w=>{p(w,h===window||h===document||e.useGlobalTarget||P0(h,w.target))},y=w=>{p(w,!1)};window.addEventListener("pointerup",m,r),window.addEventListener("pointercancel",y,r)};return n.forEach(c=>{(e.useGlobalTarget?window:c).addEventListener("pointerdown",l,r),cd(c)&&(c.addEventListener("focus",d=>hb(d,r)),!ub(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),a}function dd(s){return Vy(s)&&"ownerSVGElement"in s}const ll=new WeakMap;let cl;const k0=(s,t,e)=>(n,r)=>r&&r[0]?r[0][s+"Size"]:dd(n)&&"getBBox"in n?n.getBBox()[t]:n[e],fb=k0("inline","width","offsetWidth"),pb=k0("block","height","offsetHeight");function mb({target:s,borderBoxSize:t}){ll.get(s)?.forEach(e=>{e(s,{get width(){return fb(s,t)},get height(){return pb(s,t)}})})}function gb(s){s.forEach(mb)}function yb(){typeof ResizeObserver>"u"||(cl=new ResizeObserver(gb))}function vb(s,t){cl||yb();const e=E0(s);return e.forEach(n=>{let r=ll.get(n);r||(r=new Set,ll.set(n,r)),r.add(t),cl?.observe(n)}),()=>{e.forEach(n=>{const r=ll.get(n);r?.delete(t),r?.size||cl?.unobserve(n)})}}const ul=new Set;let js;function wb(){js=()=>{const s={get width(){return window.innerWidth},get height(){return window.innerHeight}};ul.forEach(t=>t(s))},window.addEventListener("resize",js)}function xb(s){return ul.add(s),js||wb(),()=>{ul.delete(s),!ul.size&&typeof js=="function"&&(window.removeEventListener("resize",js),js=void 0)}}function Ab(s,t){return typeof s=="function"?xb(s):vb(s,t)}function R0(s,t){let e;const n=()=>{const{currentTime:r}=t,l=(r===null?0:r.value)/100;e!==l&&s(l),e=l};return Nt.preUpdate(n,!0),()=>Tn(n)}function bb(s){return dd(s)&&s.tagName==="svg"}function Sb(...s){const t=!Array.isArray(s[0]),e=t?0:-1,n=s[0+e],r=s[1+e],a=s[2+e],l=s[3+e],c=nd(r,a,l);return t?c(n):c}const ke=s=>!!(s&&s.getVelocity),Eb=[...A0,le,Ri],Cb=s=>Eb.find(x0(s)),_l=O.createContext({transformPagePoint:s=>s,isStatic:!1,reducedMotion:"never"});class _b extends O.Component{getSnapshotBeforeUpdate(t){const e=this.props.childRef.current;if(e&&t.isPresent&&!this.props.isPresent){const n=e.offsetParent,r=cd(n)&&n.offsetWidth||0,a=this.props.sizeRef.current;a.height=e.offsetHeight||0,a.width=e.offsetWidth||0,a.top=e.offsetTop,a.left=e.offsetLeft,a.right=r-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Tb({children:s,isPresent:t,anchorX:e,root:n}){const r=O.useId(),a=O.useRef(null),l=O.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=O.useContext(_l);return O.useInsertionEffect(()=>{const{width:h,height:d,top:p,left:m,right:y}=l.current;if(t||!a.current||!h||!d)return;const w=e==="left"?`left: ${m}`:`right: ${y}`;a.current.dataset.motionPopId=r;const A=document.createElement("style");c&&(A.nonce=c);const x=n??document.head;return x.appendChild(A),A.sheet&&A.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${d}px !important;
            ${w}px !important;
            top: ${p}px !important;
          }
        `),()=>{x.contains(A)&&x.removeChild(A)}},[t]),T.jsx(_b,{isPresent:t,childRef:a,sizeRef:l,children:O.cloneElement(s,{ref:a})})}const Pb=({children:s,initial:t,isPresent:e,onExitComplete:n,custom:r,presenceAffectsLayout:a,mode:l,anchorX:c,root:h})=>{const d=tr(kb),p=O.useId();let m=!0,y=O.useMemo(()=>(m=!1,{id:p,initial:t,isPresent:e,custom:r,onExitComplete:w=>{d.set(w,!0);for(const A of d.values())if(!A)return;n&&n()},register:w=>(d.set(w,!1),()=>d.delete(w))}),[e,d,n]);return a&&m&&(y={...y}),O.useMemo(()=>{d.forEach((w,A)=>d.set(A,!1))},[e]),O.useEffect(()=>{!e&&!d.size&&n&&n()},[e]),l==="popLayout"&&(s=T.jsx(Tb,{isPresent:e,anchorX:c,root:h,children:s})),T.jsx(Cl.Provider,{value:y,children:s})};function kb(){return new Map}function L0(s=!0){const t=O.useContext(Cl);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,a=O.useId();O.useEffect(()=>{if(s)return r(a)},[s]);const l=O.useCallback(()=>s&&n&&n(a),[a,n,s]);return!e&&n?[!1,l]:[!0]}const qa=s=>s.key||"";function sg(s){const t=[];return O.Children.forEach(s,e=>{O.isValidElement(e)&&t.push(e)}),t}const wh=({children:s,custom:t,initial:e=!0,onExitComplete:n,presenceAffectsLayout:r=!0,mode:a="sync",propagate:l=!1,anchorX:c="left",root:h})=>{const[d,p]=L0(l),m=O.useMemo(()=>sg(s),[s]),y=l&&!d?[]:m.map(qa),w=O.useRef(!0),A=O.useRef(m),x=tr(()=>new Map),[E,S]=O.useState(m),[_,C]=O.useState(m);El(()=>{w.current=!1,A.current=m;for(let I=0;I<_.length;I++){const D=qa(_[I]);y.includes(D)?x.delete(D):x.get(D)!==!0&&x.set(D,!1)}},[_,y.length,y.join("-")]);const R=[];if(m!==E){let I=[...m];for(let D=0;D<_.length;D++){const B=_[D],H=qa(B);y.includes(H)||(I.splice(D,0,B),R.push(B))}return a==="wait"&&R.length&&(I=R),C(sg(I)),S(m),null}const{forceRender:k}=O.useContext(zh);return T.jsx(T.Fragment,{children:_.map(I=>{const D=qa(I),B=l&&!d?!1:m===_||y.includes(D),H=()=>{if(x.has(D))x.set(D,!0);else return;let G=!0;x.forEach(Q=>{Q||(G=!1)}),G&&(k?.(),C(A.current),l&&p?.(),n&&n())};return T.jsx(Pb,{isPresent:B,initial:!w.current||e?void 0:!1,custom:t,presenceAffectsLayout:r,mode:a,root:h,onExitComplete:B?void 0:H,anchorX:c,children:I},D)})})},M0=O.createContext({strict:!1}),rg={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Qs={};for(const s in rg)Qs[s]={isEnabled:t=>rg[s].some(e=>!!t[e])};function Rb(s){for(const t in s)Qs[t]={...Qs[t],...s[t]}}const Lb=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function vl(s){return s.startsWith("while")||s.startsWith("drag")&&s!=="draggable"||s.startsWith("layout")||s.startsWith("onTap")||s.startsWith("onPan")||s.startsWith("onLayout")||Lb.has(s)}let I0=s=>!vl(s);function Mb(s){typeof s=="function"&&(I0=t=>t.startsWith("on")?!vl(t):s(t))}try{Mb(require("@emotion/is-prop-valid").default)}catch{}function Ib(s,t,e){const n={};for(const r in s)r==="values"&&typeof s.values=="object"||(I0(r)||e===!0&&vl(r)||!t&&!vl(r)||s.draggable&&r.startsWith("onDrag"))&&(n[r]=s[r]);return n}const Tl=O.createContext({});function Pl(s){return s!==null&&typeof s=="object"&&typeof s.start=="function"}function ho(s){return typeof s=="string"||Array.isArray(s)}const fd=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],pd=["initial",...fd];function kl(s){return Pl(s.animate)||pd.some(t=>ho(s[t]))}function D0(s){return!!(kl(s)||s.variants)}function Db(s,t){if(kl(s)){const{initial:e,animate:n}=s;return{initial:e===!1||ho(e)?e:void 0,animate:ho(n)?n:void 0}}return s.inherit!==!1?t:{}}function Nb(s){const{initial:t,animate:e}=Db(s,O.useContext(Tl));return O.useMemo(()=>({initial:t,animate:e}),[og(t),og(e)])}function og(s){return Array.isArray(s)?s.join(" "):s}const fo={};function Fb(s){for(const t in s)fo[t]=s[t],Yh(t)&&(fo[t].isCSSVariable=!0)}function N0(s,{layout:t,layoutId:e}){return ir.has(s)||s.startsWith("origin")||(t||e!==void 0)&&(!!fo[s]||s==="opacity")}const Ob={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},jb=nr.length;function Bb(s,t,e){let n="",r=!0;for(let a=0;a<jb;a++){const l=nr[a],c=s[l];if(c===void 0)continue;let h=!0;if(typeof c=="number"?h=c===(l.startsWith("scale")?1:0):h=parseFloat(c)===0,!h||e){const d=C0(c,ld[l]);if(!h){r=!1;const p=Ob[l]||l;n+=`${p}(${d}) `}e&&(t[l]=d)}}return n=n.trim(),e?n=e(t,r?"":n):r&&(n="none"),n}function md(s,t,e){const{style:n,vars:r,transformOrigin:a}=s;let l=!1,c=!1;for(const h in t){const d=t[h];if(ir.has(h)){l=!0;continue}else if(Yh(h)){r[h]=d;continue}else{const p=C0(d,ld[h]);h.startsWith("origin")?(c=!0,a[h]=p):n[h]=p}}if(t.transform||(l||e?n.transform=Bb(t,s.transform,e):n.transform&&(n.transform="none")),c){const{originX:h="50%",originY:d="50%",originZ:p=0}=a;n.transformOrigin=`${h} ${d} ${p}`}}const gd=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function F0(s,t,e){for(const n in t)!ke(t[n])&&!N0(n,e)&&(s[n]=t[n])}function Vb({transformTemplate:s},t){return O.useMemo(()=>{const e=gd();return md(e,t,s),Object.assign({},e.vars,e.style)},[t])}function zb(s,t){const e=s.style||{},n={};return F0(n,e,s),Object.assign(n,Vb(s,t)),n}function Hb(s,t){const e={},n=zb(s,t);return s.drag&&s.dragListener!==!1&&(e.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=s.drag===!0?"none":`pan-${s.drag==="x"?"y":"x"}`),s.tabIndex===void 0&&(s.onTap||s.onTapStart||s.whileTap)&&(e.tabIndex=0),e.style=n,e}const Ub={offset:"stroke-dashoffset",array:"stroke-dasharray"},$b={offset:"strokeDashoffset",array:"strokeDasharray"};function Wb(s,t,e=1,n=0,r=!0){s.pathLength=1;const a=r?Ub:$b;s[a.offset]=vt.transform(-n);const l=vt.transform(t),c=vt.transform(e);s[a.array]=`${l} ${c}`}function O0(s,{attrX:t,attrY:e,attrScale:n,pathLength:r,pathSpacing:a=1,pathOffset:l=0,...c},h,d,p){if(md(s,c,d),h){s.style.viewBox&&(s.attrs.viewBox=s.style.viewBox);return}s.attrs=s.style,s.style={};const{attrs:m,style:y}=s;m.transform&&(y.transform=m.transform,delete m.transform),(y.transform||m.transformOrigin)&&(y.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),y.transform&&(y.transformBox=p?.transformBox??"fill-box",delete m.transformBox),t!==void 0&&(m.x=t),e!==void 0&&(m.y=e),n!==void 0&&(m.scale=n),r!==void 0&&Wb(m,r,a,l,!1)}const j0=()=>({...gd(),attrs:{}}),B0=s=>typeof s=="string"&&s.toLowerCase()==="svg";function Gb(s,t,e,n){const r=O.useMemo(()=>{const a=j0();return O0(a,t,B0(n),s.transformTemplate,s.style),{...a.attrs,style:{...a.style}}},[t]);if(s.style){const a={};F0(a,s.style,s),r.style={...a,...r.style}}return r}const Xb=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function yd(s){return typeof s!="string"||s.includes("-")?!1:!!(Xb.indexOf(s)>-1||/[A-Z]/u.test(s))}function Kb(s,t,e,{latestValues:n},r,a=!1){const c=(yd(s)?Gb:Hb)(t,n,r,s),h=Ib(t,typeof s=="string",a),d=s!==O.Fragment?{...h,...c,ref:e}:{},{children:p}=t,m=O.useMemo(()=>ke(p)?p.get():p,[p]);return O.createElement(s,{...d,children:m})}function ag(s){const t=[{},{}];return s?.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function vd(s,t,e,n){if(typeof t=="function"){const[r,a]=ag(n);t=t(e!==void 0?e:s.custom,r,a)}if(typeof t=="string"&&(t=s.variants&&s.variants[t]),typeof t=="function"){const[r,a]=ag(n);t=t(e!==void 0?e:s.custom,r,a)}return t}function hl(s){return ke(s)?s.get():s}function qb({scrapeMotionValuesFromProps:s,createRenderState:t},e,n,r){return{latestValues:Yb(e,n,r,s),renderState:t()}}function Yb(s,t,e,n){const r={},a=n(s,{});for(const y in a)r[y]=hl(a[y]);let{initial:l,animate:c}=s;const h=kl(s),d=D0(s);t&&d&&!h&&s.inherit!==!1&&(l===void 0&&(l=t.initial),c===void 0&&(c=t.animate));let p=e?e.initial===!1:!1;p=p||l===!1;const m=p?c:l;if(m&&typeof m!="boolean"&&!Pl(m)){const y=Array.isArray(m)?m:[m];for(let w=0;w<y.length;w++){const A=vd(s,y[w]);if(A){const{transitionEnd:x,transition:E,...S}=A;for(const _ in S){let C=S[_];if(Array.isArray(C)){const R=p?C.length-1:0;C=C[R]}C!==null&&(r[_]=C)}for(const _ in x)r[_]=x[_]}}}return r}const V0=s=>(t,e)=>{const n=O.useContext(Tl),r=O.useContext(Cl),a=()=>qb(s,t,n,r);return e?a():tr(a)};function wd(s,t,e){const{style:n}=s,r={};for(const a in n)(ke(n[a])||t.style&&ke(t.style[a])||N0(a,s)||e?.getValue(a)?.liveStyle!==void 0)&&(r[a]=n[a]);return r}const Qb=V0({scrapeMotionValuesFromProps:wd,createRenderState:gd});function z0(s,t,e){const n=wd(s,t,e);for(const r in s)if(ke(s[r])||ke(t[r])){const a=nr.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[a]=s[r]}return n}const Zb=V0({scrapeMotionValuesFromProps:z0,createRenderState:j0}),Jb=Symbol.for("motionComponentSymbol");function Bs(s){return s&&typeof s=="object"&&Object.prototype.hasOwnProperty.call(s,"current")}function tS(s,t,e){return O.useCallback(n=>{n&&s.onMount&&s.onMount(n),t&&(n?t.mount(n):t.unmount()),e&&(typeof e=="function"?e(n):Bs(e)&&(e.current=n))},[t])}const xd=s=>s.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),eS="framerAppearId",H0="data-"+xd(eS),U0=O.createContext({});function nS(s,t,e,n,r){const{visualElement:a}=O.useContext(Tl),l=O.useContext(M0),c=O.useContext(Cl),h=O.useContext(_l).reducedMotion,d=O.useRef(null);n=n||l.renderer,!d.current&&n&&(d.current=n(s,{visualState:t,parent:a,props:e,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:h}));const p=d.current,m=O.useContext(U0);p&&!p.projection&&r&&(p.type==="html"||p.type==="svg")&&iS(d.current,e,r,m);const y=O.useRef(!1);O.useInsertionEffect(()=>{p&&y.current&&p.update(e,c)});const w=e[H0],A=O.useRef(!!w&&!window.MotionHandoffIsComplete?.(w)&&window.MotionHasOptimisedAnimation?.(w));return El(()=>{p&&(y.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),p.scheduleRenderMicrotask(),A.current&&p.animationState&&p.animationState.animateChanges())}),O.useEffect(()=>{p&&(!A.current&&p.animationState&&p.animationState.animateChanges(),A.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(w)}),A.current=!1),p.enteringChildren=void 0)}),p}function iS(s,t,e,n){const{layoutId:r,layout:a,drag:l,dragConstraints:c,layoutScroll:h,layoutRoot:d,layoutCrossfade:p}=t;s.projection=new e(s.latestValues,t["data-framer-portal-id"]?void 0:$0(s.parent)),s.projection.setOptions({layoutId:r,layout:a,alwaysMeasureLayout:!!l||c&&Bs(c),visualElement:s,animationType:typeof a=="string"?a:"both",initialPromotionConfig:n,crossfade:p,layoutScroll:h,layoutRoot:d})}function $0(s){if(s)return s.options.allowProjection!==!1?s.projection:$0(s.parent)}function Vu(s,{forwardMotionProps:t=!1}={},e,n){e&&Rb(e);const r=yd(s)?Zb:Qb;function a(c,h){let d;const p={...O.useContext(_l),...c,layoutId:sS(c)},{isStatic:m}=p,y=Nb(c),w=r(c,m);if(!m&&Hh){rS();const A=oS(p);d=A.MeasureLayout,y.visualElement=nS(s,w,p,n,A.ProjectionNode)}return T.jsxs(Tl.Provider,{value:y,children:[d&&y.visualElement?T.jsx(d,{visualElement:y.visualElement,...p}):null,Kb(s,c,tS(w,y.visualElement,h),w,m,t)]})}a.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const l=O.forwardRef(a);return l[Jb]=s,l}function sS({layoutId:s}){const t=O.useContext(zh).id;return t&&s!==void 0?t+"-"+s:s}function rS(s,t){O.useContext(M0).strict}function oS(s){const{drag:t,layout:e}=Qs;if(!t&&!e)return{};const n={...t,...e};return{MeasureLayout:t?.isEnabled(s)||e?.isEnabled(s)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function aS(s,t){if(typeof Proxy>"u")return Vu;const e=new Map,n=(a,l)=>Vu(a,l,s,t),r=(a,l)=>n(a,l);return new Proxy(r,{get:(a,l)=>l==="create"?n:(e.has(l)||e.set(l,Vu(l,void 0,s,t)),e.get(l))})}function W0({top:s,left:t,right:e,bottom:n}){return{x:{min:t,max:e},y:{min:s,max:n}}}function lS({x:s,y:t}){return{top:t.min,right:s.max,bottom:t.max,left:s.min}}function cS(s,t){if(!t)return s;const e=t({x:s.left,y:s.top}),n=t({x:s.right,y:s.bottom});return{top:e.y,left:e.x,bottom:n.y,right:n.x}}function zu(s){return s===void 0||s===1}function xh({scale:s,scaleX:t,scaleY:e}){return!zu(s)||!zu(t)||!zu(e)}function Yi(s){return xh(s)||G0(s)||s.z||s.rotate||s.rotateX||s.rotateY||s.skewX||s.skewY}function G0(s){return lg(s.x)||lg(s.y)}function lg(s){return s&&s!=="0%"}function wl(s,t,e){const n=s-e,r=t*n;return e+r}function cg(s,t,e,n,r){return r!==void 0&&(s=wl(s,r,n)),wl(s,e,n)+t}function Ah(s,t=0,e=1,n,r){s.min=cg(s.min,t,e,n,r),s.max=cg(s.max,t,e,n,r)}function X0(s,{x:t,y:e}){Ah(s.x,t.translate,t.scale,t.originPoint),Ah(s.y,e.translate,e.scale,e.originPoint)}const ug=.999999999999,hg=1.0000000000001;function uS(s,t,e,n=!1){const r=e.length;if(!r)return;t.x=t.y=1;let a,l;for(let c=0;c<r;c++){a=e[c],l=a.projectionDelta;const{visualElement:h}=a.options;h&&h.props.style&&h.props.style.display==="contents"||(n&&a.options.layoutScroll&&a.scroll&&a!==a.root&&zs(s,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),l&&(t.x*=l.x.scale,t.y*=l.y.scale,X0(s,l)),n&&Yi(a.latestValues)&&zs(s,a.latestValues))}t.x<hg&&t.x>ug&&(t.x=1),t.y<hg&&t.y>ug&&(t.y=1)}function Vs(s,t){s.min=s.min+t,s.max=s.max+t}function dg(s,t,e,n,r=.5){const a=Kt(s.min,s.max,r);Ah(s,t,e,a,n)}function zs(s,t){dg(s.x,t.x,t.scaleX,t.scale,t.originX),dg(s.y,t.y,t.scaleY,t.scale,t.originY)}function K0(s,t){return W0(cS(s.getBoundingClientRect(),t))}function hS(s,t,e){const n=K0(s,e),{scroll:r}=t;return r&&(Vs(n.x,r.offset.x),Vs(n.y,r.offset.y)),n}const fg=()=>({translate:0,scale:1,origin:0,originPoint:0}),Hs=()=>({x:fg(),y:fg()}),pg=()=>({min:0,max:0}),ie=()=>({x:pg(),y:pg()}),bh={current:null},q0={current:!1};function dS(){if(q0.current=!0,!!Hh)if(window.matchMedia){const s=window.matchMedia("(prefers-reduced-motion)"),t=()=>bh.current=s.matches;s.addEventListener("change",t),t()}else bh.current=!1}const fS=new WeakMap;function pS(s,t,e){for(const n in t){const r=t[n],a=e[n];if(ke(r))s.addValue(n,r);else if(ke(a))s.addValue(n,_n(r,{owner:s}));else if(a!==r)if(s.hasValue(n)){const l=s.getValue(n);l.liveStyle===!0?l.jump(r):l.hasAnimated||l.set(r)}else{const l=s.getStaticValue(n);s.addValue(n,_n(l!==void 0?l:r,{owner:s}))}}for(const n in e)t[n]===void 0&&s.removeValue(n);return t}const mg=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class mS{scrapeMotionValuesFromProps(t,e,n){return{}}constructor({parent:t,props:e,presenceContext:n,reducedMotionConfig:r,blockInitialAnimation:a,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=od,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=We.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,Nt.render(this.render,!1,!0))};const{latestValues:h,renderState:d}=l;this.latestValues=h,this.baseTarget={...h},this.initialValues=e.initial?{...h}:{},this.renderState=d,this.parent=t,this.props=e,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=r,this.options=c,this.blockInitialAnimation=!!a,this.isControllingVariants=kl(e),this.isVariantNode=D0(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:p,...m}=this.scrapeMotionValuesFromProps(e,{},this);for(const y in m){const w=m[y];h[y]!==void 0&&ke(w)&&w.set(h[y])}}mount(t){this.current=t,fS.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,n)=>this.bindToMotionValue(n,e)),q0.current||dS(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:bh.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Tn(this.notifyUpdate),Tn(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,e){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=ir.has(t);n&&this.onBindTransform&&this.onBindTransform();const r=e.on("change",l=>{this.latestValues[t]=l,this.props.onUpdate&&Nt.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{r(),a&&a(),e.owner&&e.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Qs){const e=Qs[t];if(!e)continue;const{isEnabled:n,Feature:r}=e;if(!this.features[t]&&r&&n(this.props)&&(this.features[t]=new r(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ie()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let n=0;n<mg.length;n++){const r=mg[n];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const a="on"+r,l=t[a];l&&(this.propEventSubscriptions[r]=this.on(r,l))}this.prevMotionValues=pS(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const n=this.values.get(t);e!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&e!==void 0&&(n=_n(e===null?void 0:e,{owner:this}),this.addValue(t,n)),n}readValue(t,e){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(By(n)||zy(n))?n=parseFloat(n):!Cb(n)&&Ri.test(e)&&(n=S0(t,e)),this.setBaseTarget(t,ke(n)?n.get():n)),ke(n)?n.get():n}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){const{initial:e}=this.props;let n;if(typeof e=="string"||typeof e=="object"){const a=vd(this.props,e,this.presenceContext?.custom);a&&(n=a[t])}if(e&&n!==void 0)return n;const r=this.getBaseTargetFromProps(this.props,t);return r!==void 0&&!ke(r)?r:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new Gh),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}scheduleRenderMicrotask(){ud.render(this.render)}}class Y0 extends mS{constructor(){super(...arguments),this.KeyframeResolver=sb}sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:n}){delete e[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;ke(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function Q0(s,{style:t,vars:e},n,r){const a=s.style;let l;for(l in t)a[l]=t[l];r?.applyProjectionStyles(a,n);for(l in e)a.setProperty(l,e[l])}function gS(s){return window.getComputedStyle(s)}class yS extends Y0{constructor(){super(...arguments),this.type="html",this.renderInstance=Q0}readValueFromInstance(t,e){if(ir.has(e))return this.projection?.isProjecting?dh(e):EA(t,e);{const n=gS(t),r=(Yh(e)?n.getPropertyValue(e):n[e])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(t,{transformPagePoint:e}){return K0(t,e)}build(t,e,n){md(t,e,n.transformTemplate)}scrapeMotionValuesFromProps(t,e,n){return wd(t,e,n)}}const Z0=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function vS(s,t,e,n){Q0(s,t,void 0,n);for(const r in t.attrs)s.setAttribute(Z0.has(r)?r:xd(r),t.attrs[r])}class wS extends Y0{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ie}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(ir.has(e)){const n=b0(e);return n&&n.default||0}return e=Z0.has(e)?e:xd(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,n){return z0(t,e,n)}build(t,e,n){O0(t,e,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,e,n,r){vS(t,e,n,r)}mount(t){this.isSVGTag=B0(t.tagName),super.mount(t)}}const xS=(s,t)=>yd(s)?new wS(t):new yS(t,{allowProjection:s!==O.Fragment});function Ws(s,t,e){const n=s.getProps();return vd(n,t,e!==void 0?e:n.custom,s)}const Sh=s=>Array.isArray(s);function AS(s,t,e){s.hasValue(t)?s.getValue(t).set(e):s.addValue(t,_n(e))}function bS(s){return Sh(s)?s[s.length-1]||0:s}function SS(s,t){const e=Ws(s,t);let{transitionEnd:n={},transition:r={},...a}=e||{};a={...a,...n};for(const l in a){const c=bS(a[l]);AS(s,l,c)}}function ES(s){return!!(ke(s)&&s.add)}function Eh(s,t){const e=s.getValue("willChange");if(ES(e))return e.add(t);if(!e&&si.WillChange){const n=new si.WillChange("auto");s.addValue("willChange",n),n.add(t)}}function J0(s){return s.props[H0]}const CS=s=>s!==null;function _S(s,{repeat:t,repeatType:e="loop"},n){const r=s.filter(CS),a=t&&e!=="loop"&&t%2===1?0:r.length-1;return r[a]}const TS={type:"spring",stiffness:500,damping:25,restSpeed:10},PS=s=>({type:"spring",stiffness:550,damping:s===0?2*Math.sqrt(550):30,restSpeed:10}),kS={type:"keyframes",duration:.8},RS={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},LS=(s,{keyframes:t})=>t.length>2?kS:ir.has(s)?s.startsWith("scale")?PS(t[1]):TS:RS;function MS({when:s,delay:t,delayChildren:e,staggerChildren:n,staggerDirection:r,repeat:a,repeatType:l,repeatDelay:c,from:h,elapsed:d,...p}){return!!Object.keys(p).length}const Ad=(s,t,e,n={},r,a)=>l=>{const c=ad(n,s)||{},h=c.delay||n.delay||0;let{elapsed:d=0}=n;d=d-Un(h);const p={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:t.getVelocity(),...c,delay:-d,onUpdate:y=>{t.set(y),c.onUpdate&&c.onUpdate(y)},onComplete:()=>{l(),c.onComplete&&c.onComplete()},name:s,motionValue:t,element:a?void 0:r};MS(c)||Object.assign(p,LS(s,p)),p.duration&&(p.duration=Un(p.duration)),p.repeatDelay&&(p.repeatDelay=Un(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let m=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(yh(p),p.delay===0&&(m=!0)),(si.instantAnimations||si.skipAnimations)&&(m=!0,yh(p),p.delay=0),p.allowFlatten=!c.type&&!c.ease,m&&!a&&t.get()!==void 0){const y=_S(p.keyframes,c);if(y!==void 0){Nt.update(()=>{p.onUpdate(y),p.onComplete()});return}}return c.isSync?new rd(p):new GA(p)};function IS({protectedKeys:s,needsAnimating:t},e){const n=s.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,n}function tv(s,t,{delay:e=0,transitionOverride:n,type:r}={}){let{transition:a=s.getDefaultTransition(),transitionEnd:l,...c}=t;n&&(a=n);const h=[],d=r&&s.animationState&&s.animationState.getState()[r];for(const p in c){const m=s.getValue(p,s.latestValues[p]??null),y=c[p];if(y===void 0||d&&IS(d,p))continue;const w={delay:e,...ad(a||{},p)},A=m.get();if(A!==void 0&&!m.isAnimating&&!Array.isArray(y)&&y===A&&!w.velocity)continue;let x=!1;if(window.MotionHandoffAnimation){const S=J0(s);if(S){const _=window.MotionHandoffAnimation(S,p,Nt);_!==null&&(w.startTime=_,x=!0)}}Eh(s,p),m.start(Ad(p,m,y,s.shouldReduceMotion&&w0.has(p)?{type:!1}:w,s,x));const E=m.animation;E&&h.push(E)}return l&&Promise.all(h).then(()=>{Nt.update(()=>{l&&SS(s,l)})}),h}function ev(s,t,e,n=0,r=1){const a=Array.from(s).sort((d,p)=>d.sortNodePosition(p)).indexOf(t),l=s.size,c=(l-1)*n;return typeof e=="function"?e(a,l):r===1?a*n:c-a*n}function Ch(s,t,e={}){const n=Ws(s,t,e.type==="exit"?s.presenceContext?.custom:void 0);let{transition:r=s.getDefaultTransition()||{}}=n||{};e.transitionOverride&&(r=e.transitionOverride);const a=n?()=>Promise.all(tv(s,n,e)):()=>Promise.resolve(),l=s.variantChildren&&s.variantChildren.size?(h=0)=>{const{delayChildren:d=0,staggerChildren:p,staggerDirection:m}=r;return DS(s,t,h,d,p,m,e)}:()=>Promise.resolve(),{when:c}=r;if(c){const[h,d]=c==="beforeChildren"?[a,l]:[l,a];return h().then(()=>d())}else return Promise.all([a(),l(e.delay)])}function DS(s,t,e=0,n=0,r=0,a=1,l){const c=[];for(const h of s.variantChildren)h.notify("AnimationStart",t),c.push(Ch(h,t,{...l,delay:e+(typeof n=="function"?0:n)+ev(s.variantChildren,h,n,r,a)}).then(()=>h.notify("AnimationComplete",t)));return Promise.all(c)}function NS(s,t,e={}){s.notify("AnimationStart",t);let n;if(Array.isArray(t)){const r=t.map(a=>Ch(s,a,e));n=Promise.all(r)}else if(typeof t=="string")n=Ch(s,t,e);else{const r=typeof t=="function"?Ws(s,t,e.custom):t;n=Promise.all(tv(s,r,e))}return n.then(()=>{s.notify("AnimationComplete",t)})}function nv(s,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==s.length)return!1;for(let n=0;n<e;n++)if(t[n]!==s[n])return!1;return!0}const FS=pd.length;function iv(s){if(!s)return;if(!s.isControllingVariants){const e=s.parent?iv(s.parent)||{}:{};return s.props.initial!==void 0&&(e.initial=s.props.initial),e}const t={};for(let e=0;e<FS;e++){const n=pd[e],r=s.props[n];(ho(r)||r===!1)&&(t[n]=r)}return t}const OS=[...fd].reverse(),jS=fd.length;function BS(s){return t=>Promise.all(t.map(({animation:e,options:n})=>NS(s,e,n)))}function VS(s){let t=BS(s),e=gg(),n=!0;const r=h=>(d,p)=>{const m=Ws(s,p,h==="exit"?s.presenceContext?.custom:void 0);if(m){const{transition:y,transitionEnd:w,...A}=m;d={...d,...A,...w}}return d};function a(h){t=h(s)}function l(h){const{props:d}=s,p=iv(s.parent)||{},m=[],y=new Set;let w={},A=1/0;for(let E=0;E<jS;E++){const S=OS[E],_=e[S],C=d[S]!==void 0?d[S]:p[S],R=ho(C),k=S===h?_.isActive:null;k===!1&&(A=E);let I=C===p[S]&&C!==d[S]&&R;if(I&&n&&s.manuallyAnimateOnMount&&(I=!1),_.protectedKeys={...w},!_.isActive&&k===null||!C&&!_.prevProp||Pl(C)||typeof C=="boolean")continue;const D=zS(_.prevProp,C);let B=D||S===h&&_.isActive&&!I&&R||E>A&&R,H=!1;const G=Array.isArray(C)?C:[C];let Q=G.reduce(r(S),{});k===!1&&(Q={});const{prevResolvedValues:ht={}}=_,lt={...ht,...Q},et=U=>{B=!0,y.has(U)&&(H=!0,y.delete(U)),_.needsAnimating[U]=!0;const $=s.getValue(U);$&&($.liveStyle=!1)};for(const U in lt){const $=Q[U],J=ht[U];if(w.hasOwnProperty(U))continue;let Z=!1;Sh($)&&Sh(J)?Z=!nv($,J):Z=$!==J,Z?$!=null?et(U):y.add(U):$!==void 0&&y.has(U)?et(U):_.protectedKeys[U]=!0}_.prevProp=C,_.prevResolvedValues=Q,_.isActive&&(w={...w,...Q}),n&&s.blockInitialAnimation&&(B=!1);const Et=I&&D;B&&(!Et||H)&&m.push(...G.map(U=>{const $={type:S};if(typeof U=="string"&&n&&!Et&&s.manuallyAnimateOnMount&&s.parent){const{parent:J}=s,Z=Ws(J,U);if(J.enteringChildren&&Z){const{delayChildren:N}=Z.transition||{};$.delay=ev(J.enteringChildren,s,N)}}return{animation:U,options:$}}))}if(y.size){const E={};if(typeof d.initial!="boolean"){const S=Ws(s,Array.isArray(d.initial)?d.initial[0]:d.initial);S&&S.transition&&(E.transition=S.transition)}y.forEach(S=>{const _=s.getBaseTarget(S),C=s.getValue(S);C&&(C.liveStyle=!0),E[S]=_??null}),m.push({animation:E})}let x=!!m.length;return n&&(d.initial===!1||d.initial===d.animate)&&!s.manuallyAnimateOnMount&&(x=!1),n=!1,x?t(m):Promise.resolve()}function c(h,d){if(e[h].isActive===d)return Promise.resolve();s.variantChildren?.forEach(m=>m.animationState?.setActive(h,d)),e[h].isActive=d;const p=l(h);for(const m in e)e[m].protectedKeys={};return p}return{animateChanges:l,setActive:c,setAnimateFunction:a,getState:()=>e,reset:()=>{e=gg(),n=!0}}}function zS(s,t){return typeof t=="string"?t!==s:Array.isArray(t)?!nv(t,s):!1}function Ki(s=!1){return{isActive:s,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function gg(){return{animate:Ki(!0),whileInView:Ki(),whileHover:Ki(),whileTap:Ki(),whileDrag:Ki(),whileFocus:Ki(),exit:Ki()}}class Mi{constructor(t){this.isMounted=!1,this.node=t}update(){}}class HS extends Mi{constructor(t){super(t),t.animationState||(t.animationState=VS(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Pl(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let US=0;class $S extends Mi{constructor(){super(...arguments),this.id=US++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const r=this.node.animationState.setActive("exit",!t);e&&!t&&r.then(()=>{e(this.id)})}mount(){const{register:t,onExitComplete:e}=this.node.presenceContext||{};e&&e(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const WS={animation:{Feature:HS},exit:{Feature:$S}};function po(s,t,e,n={passive:!0}){return s.addEventListener(t,e,n),()=>s.removeEventListener(t,e)}function Eo(s){return{point:{x:s.pageX,y:s.pageY}}}const GS=s=>t=>hd(t)&&s(t,Eo(t));function io(s,t,e,n){return po(s,t,GS(e),n)}const sv=1e-4,XS=1-sv,KS=1+sv,rv=.01,qS=0-rv,YS=0+rv;function Ie(s){return s.max-s.min}function QS(s,t,e){return Math.abs(s-t)<=e}function yg(s,t,e,n=.5){s.origin=n,s.originPoint=Kt(t.min,t.max,s.origin),s.scale=Ie(e)/Ie(t),s.translate=Kt(e.min,e.max,s.origin)-s.originPoint,(s.scale>=XS&&s.scale<=KS||isNaN(s.scale))&&(s.scale=1),(s.translate>=qS&&s.translate<=YS||isNaN(s.translate))&&(s.translate=0)}function so(s,t,e,n){yg(s.x,t.x,e.x,n?n.originX:void 0),yg(s.y,t.y,e.y,n?n.originY:void 0)}function vg(s,t,e){s.min=e.min+t.min,s.max=s.min+Ie(t)}function ZS(s,t,e){vg(s.x,t.x,e.x),vg(s.y,t.y,e.y)}function wg(s,t,e){s.min=t.min-e.min,s.max=s.min+Ie(t)}function ro(s,t,e){wg(s.x,t.x,e.x),wg(s.y,t.y,e.y)}function fn(s){return[s("x"),s("y")]}const ov=({current:s})=>s?s.ownerDocument.defaultView:null,xg=(s,t)=>Math.abs(s-t);function JS(s,t){const e=xg(s.x,t.x),n=xg(s.y,t.y);return Math.sqrt(e**2+n**2)}class av{constructor(t,e,{transformPagePoint:n,contextWindow:r=window,dragSnapToOrigin:a=!1,distanceThreshold:l=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=Uu(this.lastMoveEventInfo,this.history),w=this.startEvent!==null,A=JS(y.offset,{x:0,y:0})>=this.distanceThreshold;if(!w&&!A)return;const{point:x}=y,{timestamp:E}=ye;this.history.push({...x,timestamp:E});const{onStart:S,onMove:_}=this.handlers;w||(S&&S(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),_&&_(this.lastMoveEvent,y)},this.handlePointerMove=(y,w)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=Hu(w,this.transformPagePoint),Nt.update(this.updatePoint,!0)},this.handlePointerUp=(y,w)=>{this.end();const{onEnd:A,onSessionEnd:x,resumeAnimation:E}=this.handlers;if(this.dragSnapToOrigin&&E&&E(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=Uu(y.type==="pointercancel"?this.lastMoveEventInfo:Hu(w,this.transformPagePoint),this.history);this.startEvent&&A&&A(y,S),x&&x(y,S)},!hd(t))return;this.dragSnapToOrigin=a,this.handlers=e,this.transformPagePoint=n,this.distanceThreshold=l,this.contextWindow=r||window;const c=Eo(t),h=Hu(c,this.transformPagePoint),{point:d}=h,{timestamp:p}=ye;this.history=[{...d,timestamp:p}];const{onSessionStart:m}=e;m&&m(t,Uu(h,this.history)),this.removeListeners=Ao(io(this.contextWindow,"pointermove",this.handlePointerMove),io(this.contextWindow,"pointerup",this.handlePointerUp),io(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Tn(this.updatePoint)}}function Hu(s,t){return t?{point:t(s.point)}:s}function Ag(s,t){return{x:s.x-t.x,y:s.y-t.y}}function Uu({point:s},t){return{point:s,delta:Ag(s,lv(t)),offset:Ag(s,tE(t)),velocity:eE(t,.1)}}function tE(s){return s[0]}function lv(s){return s[s.length-1]}function eE(s,t){if(s.length<2)return{x:0,y:0};let e=s.length-1,n=null;const r=lv(s);for(;e>=0&&(n=s[e],!(r.timestamp-n.timestamp>Un(t)));)e--;if(!n)return{x:0,y:0};const a=$n(r.timestamp-n.timestamp);if(a===0)return{x:0,y:0};const l={x:(r.x-n.x)/a,y:(r.y-n.y)/a};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function nE(s,{min:t,max:e},n){return t!==void 0&&s<t?s=n?Kt(t,s,n.min):Math.max(s,t):e!==void 0&&s>e&&(s=n?Kt(e,s,n.max):Math.min(s,e)),s}function bg(s,t,e){return{min:t!==void 0?s.min+t:void 0,max:e!==void 0?s.max+e-(s.max-s.min):void 0}}function iE(s,{top:t,left:e,bottom:n,right:r}){return{x:bg(s.x,e,r),y:bg(s.y,t,n)}}function Sg(s,t){let e=t.min-s.min,n=t.max-s.max;return t.max-t.min<s.max-s.min&&([e,n]=[n,e]),{min:e,max:n}}function sE(s,t){return{x:Sg(s.x,t.x),y:Sg(s.y,t.y)}}function rE(s,t){let e=.5;const n=Ie(s),r=Ie(t);return r>n?e=Ys(t.min,t.max-n,s.min):n>r&&(e=Ys(s.min,s.max-r,t.min)),Gn(0,1,e)}function oE(s,t){const e={};return t.min!==void 0&&(e.min=t.min-s.min),t.max!==void 0&&(e.max=t.max-s.min),e}const _h=.35;function aE(s=_h){return s===!1?s=0:s===!0&&(s=_h),{x:Eg(s,"left","right"),y:Eg(s,"top","bottom")}}function Eg(s,t,e){return{min:Cg(s,t),max:Cg(s,e)}}function Cg(s,t){return typeof s=="number"?s:s[t]||0}const lE=new WeakMap;class cE{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ie(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:e=!1,distanceThreshold:n}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const a=m=>{const{dragSnapToOrigin:y}=this.getProps();y?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(Eo(m).point)},l=(m,y)=>{const{drag:w,dragPropagation:A,onDragStart:x}=this.getProps();if(w&&!A&&(this.openDragLock&&this.openDragLock(),this.openDragLock=ab(w),!this.openDragLock))return;this.latestPointerEvent=m,this.latestPanInfo=y,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),fn(S=>{let _=this.getAxisMotionValue(S).get()||0;if(Wn.test(_)){const{projection:C}=this.visualElement;if(C&&C.layout){const R=C.layout.layoutBox[S];R&&(_=Ie(R)*(parseFloat(_)/100))}}this.originPoint[S]=_}),x&&Nt.postRender(()=>x(m,y)),Eh(this.visualElement,"transform");const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},c=(m,y)=>{this.latestPointerEvent=m,this.latestPanInfo=y;const{dragPropagation:w,dragDirectionLock:A,onDirectionLock:x,onDrag:E}=this.getProps();if(!w&&!this.openDragLock)return;const{offset:S}=y;if(A&&this.currentDirection===null){this.currentDirection=uE(S),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",y.point,S),this.updateAxis("y",y.point,S),this.visualElement.render(),E&&E(m,y)},h=(m,y)=>{this.latestPointerEvent=m,this.latestPanInfo=y,this.stop(m,y),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>fn(m=>this.getAnimationState(m)==="paused"&&this.getAxisMotionValue(m).animation?.play()),{dragSnapToOrigin:p}=this.getProps();this.panSession=new av(t,{onSessionStart:a,onStart:l,onMove:c,onSessionEnd:h,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,distanceThreshold:n,contextWindow:ov(this.visualElement)})}stop(t,e){const n=t||this.latestPointerEvent,r=e||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!r||!n)return;const{velocity:l}=r;this.startAnimation(l);const{onDragEnd:c}=this.getProps();c&&Nt.postRender(()=>c(n,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,n){const{drag:r}=this.getProps();if(!n||!Ya(t,r,this.currentDirection))return;const a=this.getAxisMotionValue(t);let l=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(l=nE(l,this.constraints[t],this.elastic[t])),a.set(l)}resolveConstraints(){const{dragConstraints:t,dragElastic:e}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,r=this.constraints;t&&Bs(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=iE(n.layoutBox,t):this.constraints=!1,this.elastic=aE(e),r!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&fn(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=oE(n.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!Bs(t))return!1;const n=t.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const a=hS(n,r.root,this.visualElement.getTransformPagePoint());let l=sE(r.layout.layoutBox,a);if(e){const c=e(lS(l));this.hasMutatedConstraints=!!c,c&&(l=W0(c))}return l}startAnimation(t){const{drag:e,dragMomentum:n,dragElastic:r,dragTransition:a,dragSnapToOrigin:l,onDragTransitionEnd:c}=this.getProps(),h=this.constraints||{},d=fn(p=>{if(!Ya(p,e,this.currentDirection))return;let m=h&&h[p]||{};l&&(m={min:0,max:0});const y=r?200:1e6,w=r?40:1e7,A={type:"inertia",velocity:n?t[p]:0,bounceStiffness:y,bounceDamping:w,timeConstant:750,restDelta:1,restSpeed:10,...a,...m};return this.startAxisValueAnimation(p,A)});return Promise.all(d).then(c)}startAxisValueAnimation(t,e){const n=this.getAxisMotionValue(t);return Eh(this.visualElement,t),n.start(Ad(t,n,0,e,this.visualElement,!1))}stopAnimation(){fn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){fn(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),r=n[e];return r||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){fn(e=>{const{drag:n}=this.getProps();if(!Ya(e,n,this.currentDirection))return;const{projection:r}=this.visualElement,a=this.getAxisMotionValue(e);if(r&&r.layout){const{min:l,max:c}=r.layout.layoutBox[e];a.set(t[e]-Kt(l,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:n}=this.visualElement;if(!Bs(e)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};fn(l=>{const c=this.getAxisMotionValue(l);if(c&&this.constraints!==!1){const h=c.get();r[l]=rE({min:h,max:h},this.constraints[l])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),fn(l=>{if(!Ya(l,t,null))return;const c=this.getAxisMotionValue(l),{min:h,max:d}=this.constraints[l];c.set(Kt(h,d,r[l]))})}addListeners(){if(!this.visualElement.current)return;lE.set(this.visualElement,this);const t=this.visualElement.current,e=io(t,"pointerdown",h=>{const{drag:d,dragListener:p=!0}=this.getProps();d&&p&&this.start(h)}),n=()=>{const{dragConstraints:h}=this.getProps();Bs(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,a=r.addEventListener("measure",n);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),Nt.read(n);const l=po(window,"resize",()=>this.scalePositionWithinConstraints()),c=r.addEventListener("didUpdate",(({delta:h,hasLayoutChanged:d})=>{this.isDragging&&d&&(fn(p=>{const m=this.getAxisMotionValue(p);m&&(this.originPoint[p]+=h[p].translate,m.set(m.get()+h[p].translate))}),this.visualElement.render())}));return()=>{l(),e(),a(),c&&c()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:a=!1,dragElastic:l=_h,dragMomentum:c=!0}=t;return{...t,drag:e,dragDirectionLock:n,dragPropagation:r,dragConstraints:a,dragElastic:l,dragMomentum:c}}}function Ya(s,t,e){return(t===!0||t===s)&&(e===null||e===s)}function uE(s,t=10){let e=null;return Math.abs(s.y)>t?e="y":Math.abs(s.x)>t&&(e="x"),e}class hE extends Mi{constructor(t){super(t),this.removeGroupControls=Ge,this.removeListeners=Ge,this.controls=new cE(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ge}unmount(){this.removeGroupControls(),this.removeListeners()}}const _g=s=>(t,e)=>{s&&Nt.postRender(()=>s(t,e))};class dE extends Mi{constructor(){super(...arguments),this.removePointerDownListener=Ge}onPointerDown(t){this.session=new av(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ov(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:_g(t),onStart:_g(e),onMove:n,onEnd:(a,l)=>{delete this.session,r&&Nt.postRender(()=>r(a,l))}}}mount(){this.removePointerDownListener=io(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const dl={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Tg(s,t){return t.max===t.min?0:s/(t.max-t.min)*100}const $r={correct:(s,t)=>{if(!t.target)return s;if(typeof s=="string")if(vt.test(s))s=parseFloat(s);else return s;const e=Tg(s,t.target.x),n=Tg(s,t.target.y);return`${e}% ${n}%`}},fE={correct:(s,{treeScale:t,projectionDelta:e})=>{const n=s,r=Ri.parse(s);if(r.length>5)return n;const a=Ri.createTransformer(s),l=typeof r[0]!="number"?1:0,c=e.x.scale*t.x,h=e.y.scale*t.y;r[0+l]/=c,r[1+l]/=h;const d=Kt(c,h,.5);return typeof r[2+l]=="number"&&(r[2+l]/=d),typeof r[3+l]=="number"&&(r[3+l]/=d),a(r)}};let $u=!1;class pE extends O.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n,layoutId:r}=this.props,{projection:a}=t;Fb(mE),a&&(e.group&&e.group.add(a),n&&n.register&&r&&n.register(a),$u&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),dl.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:n,drag:r,isPresent:a}=this.props,{projection:l}=n;return l&&(l.isPresent=a,$u=!0,r||t.layoutDependency!==e||e===void 0||t.isPresent!==a?l.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?l.promote():l.relegate()||Nt.postRender(()=>{const c=l.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),ud.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n}=this.props,{projection:r}=t;$u=!0,r&&(r.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function cv(s){const[t,e]=L0(),n=O.useContext(zh);return T.jsx(pE,{...s,layoutGroup:n,switchLayoutGroup:O.useContext(U0),isPresent:t,safeToRemove:e})}const mE={borderRadius:{...$r,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:$r,borderTopRightRadius:$r,borderBottomLeftRadius:$r,borderBottomRightRadius:$r,boxShadow:fE};function gE(s,t,e){const n=ke(s)?s:_n(s);return n.start(Ad("",n,t,e)),n.animation}const yE=(s,t)=>s.depth-t.depth;class vE{constructor(){this.children=[],this.isDirty=!1}add(t){Uh(this.children,t),this.isDirty=!0}remove(t){$h(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(yE),this.isDirty=!1,this.children.forEach(t)}}function wE(s,t){const e=We.now(),n=({timestamp:r})=>{const a=r-e;a>=t&&(Tn(n),s(a-t))};return Nt.setup(n,!0),()=>Tn(n)}const uv=["TopLeft","TopRight","BottomLeft","BottomRight"],xE=uv.length,Pg=s=>typeof s=="string"?parseFloat(s):s,kg=s=>typeof s=="number"||vt.test(s);function AE(s,t,e,n,r,a){r?(s.opacity=Kt(0,e.opacity??1,bE(n)),s.opacityExit=Kt(t.opacity??1,0,SE(n))):a&&(s.opacity=Kt(t.opacity??1,e.opacity??1,n));for(let l=0;l<xE;l++){const c=`border${uv[l]}Radius`;let h=Rg(t,c),d=Rg(e,c);if(h===void 0&&d===void 0)continue;h||(h=0),d||(d=0),h===0||d===0||kg(h)===kg(d)?(s[c]=Math.max(Kt(Pg(h),Pg(d),n),0),(Wn.test(d)||Wn.test(h))&&(s[c]+="%")):s[c]=d}(t.rotate||e.rotate)&&(s.rotate=Kt(t.rotate||0,e.rotate||0,n))}function Rg(s,t){return s[t]!==void 0?s[t]:s.borderRadius}const bE=hv(0,.5,Ky),SE=hv(.5,.95,Ge);function hv(s,t,e){return n=>n<s?0:n>t?1:e(Ys(s,t,n))}function Lg(s,t){s.min=t.min,s.max=t.max}function un(s,t){Lg(s.x,t.x),Lg(s.y,t.y)}function Mg(s,t){s.translate=t.translate,s.scale=t.scale,s.originPoint=t.originPoint,s.origin=t.origin}function Ig(s,t,e,n,r){return s-=t,s=wl(s,1/e,n),r!==void 0&&(s=wl(s,1/r,n)),s}function EE(s,t=0,e=1,n=.5,r,a=s,l=s){if(Wn.test(t)&&(t=parseFloat(t),t=Kt(l.min,l.max,t/100)-l.min),typeof t!="number")return;let c=Kt(a.min,a.max,n);s===a&&(c-=t),s.min=Ig(s.min,t,e,c,r),s.max=Ig(s.max,t,e,c,r)}function Dg(s,t,[e,n,r],a,l){EE(s,t[e],t[n],t[r],t.scale,a,l)}const CE=["x","scaleX","originX"],_E=["y","scaleY","originY"];function Ng(s,t,e,n){Dg(s.x,t,CE,e?e.x:void 0,n?n.x:void 0),Dg(s.y,t,_E,e?e.y:void 0,n?n.y:void 0)}function Fg(s){return s.translate===0&&s.scale===1}function dv(s){return Fg(s.x)&&Fg(s.y)}function Og(s,t){return s.min===t.min&&s.max===t.max}function TE(s,t){return Og(s.x,t.x)&&Og(s.y,t.y)}function jg(s,t){return Math.round(s.min)===Math.round(t.min)&&Math.round(s.max)===Math.round(t.max)}function fv(s,t){return jg(s.x,t.x)&&jg(s.y,t.y)}function Bg(s){return Ie(s.x)/Ie(s.y)}function Vg(s,t){return s.translate===t.translate&&s.scale===t.scale&&s.originPoint===t.originPoint}class PE{constructor(){this.members=[]}add(t){Uh(this.members,t),t.scheduleRender()}remove(t){if($h(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(r=>t===r);if(e===0)return!1;let n;for(let r=e;r>=0;r--){const a=this.members[r];if(a.isPresent!==!1){n=a;break}}return n?(this.promote(n),!0):!1}promote(t,e){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,e&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:r}=t.options;r===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:n}=t;e.onExitComplete&&e.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function kE(s,t,e){let n="";const r=s.x.translate/t.x,a=s.y.translate/t.y,l=e?.z||0;if((r||a||l)&&(n=`translate3d(${r}px, ${a}px, ${l}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),e){const{transformPerspective:d,rotate:p,rotateX:m,rotateY:y,skewX:w,skewY:A}=e;d&&(n=`perspective(${d}px) ${n}`),p&&(n+=`rotate(${p}deg) `),m&&(n+=`rotateX(${m}deg) `),y&&(n+=`rotateY(${y}deg) `),w&&(n+=`skewX(${w}deg) `),A&&(n+=`skewY(${A}deg) `)}const c=s.x.scale*t.x,h=s.y.scale*t.y;return(c!==1||h!==1)&&(n+=`scale(${c}, ${h})`),n||"none"}const Wu=["","X","Y","Z"],RE=1e3;let LE=0;function Gu(s,t,e,n){const{latestValues:r}=t;r[s]&&(e[s]=r[s],t.setStaticValue(s,0),n&&(n[s]=0))}function pv(s){if(s.hasCheckedOptimisedAppear=!0,s.root===s)return;const{visualElement:t}=s.options;if(!t)return;const e=J0(t);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:r,layoutId:a}=s.options;window.MotionCancelOptimisedAnimation(e,"transform",Nt,!(r||a))}const{parent:n}=s;n&&!n.hasCheckedOptimisedAppear&&pv(n)}function mv({attachResizeListener:s,defaultParent:t,measureScroll:e,checkIsScrollRoot:n,resetTransform:r}){return class{constructor(l={},c=t?.()){this.id=LE++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(DE),this.nodes.forEach(jE),this.nodes.forEach(BE),this.nodes.forEach(NE)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new vE)}addEventListener(l,c){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new Gh),this.eventHandlers.get(l).add(c)}notifyListeners(l,...c){const h=this.eventHandlers.get(l);h&&h.notify(...c)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=dd(l)&&!bb(l),this.instance=l;const{layoutId:c,layout:h,visualElement:d}=this.options;if(d&&!d.current&&d.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(h||c)&&(this.isLayoutDirty=!0),s){let p,m=0;const y=()=>this.root.updateBlockedByResize=!1;Nt.read(()=>{m=window.innerWidth}),s(l,()=>{const w=window.innerWidth;w!==m&&(m=w,this.root.updateBlockedByResize=!0,p&&p(),p=wE(y,250),dl.hasAnimatedSinceResize&&(dl.hasAnimatedSinceResize=!1,this.nodes.forEach(Ug)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||h)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:m,hasRelativeLayoutChanged:y,layout:w})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const A=this.options.transition||d.getDefaultTransition()||$E,{onLayoutAnimationStart:x,onLayoutAnimationComplete:E}=d.getProps(),S=!this.targetLayout||!fv(this.targetLayout,w),_=!m&&y;if(this.options.layoutRoot||this.resumeFrom||_||m&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const C={...ad(A,"layout"),onPlay:x,onComplete:E};(d.shouldReduceMotion||this.options.layoutRoot)&&(C.delay=0,C.type=!1),this.startAnimation(C),this.setAnimationOrigin(p,_)}else m||Ug(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=w})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Tn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(VE),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&pv(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const m=this.path[p];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:c,layout:h}=this.options;if(c===void 0&&!h)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(zg);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Hg);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(OE),this.nodes.forEach(ME),this.nodes.forEach(IE)):this.nodes.forEach(Hg),this.clearAllSnapshots();const c=We.now();ye.delta=Gn(0,1e3/60,c-ye.timestamp),ye.timestamp=c,ye.isProcessing=!0,Du.update.process(ye),Du.preRender.process(ye),Du.render.process(ye),ye.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ud.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(FE),this.sharedNodes.forEach(zE)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Nt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Nt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ie(this.snapshot.measuredBox.x)&&!Ie(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ie(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(c=!1),c&&this.instance){const h=n(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:h,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!r)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!dv(this.projectionDelta),h=this.getTransformTemplate(),d=h?h(this.latestValues,""):void 0,p=d!==this.prevTransformTemplateValue;l&&this.instance&&(c||Yi(this.latestValues)||p)&&(r(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const c=this.measurePageBox();let h=this.removeElementScroll(c);return l&&(h=this.removeTransform(h)),WE(h),{animationId:this.root.animationId,measuredBox:c,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return ie();const c=l.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(GE))){const{scroll:d}=this.root;d&&(Vs(c.x,d.offset.x),Vs(c.y,d.offset.y))}return c}removeElementScroll(l){const c=ie();if(un(c,l),this.scroll?.wasRoot)return c;for(let h=0;h<this.path.length;h++){const d=this.path[h],{scroll:p,options:m}=d;d!==this.root&&p&&m.layoutScroll&&(p.wasRoot&&un(c,l),Vs(c.x,p.offset.x),Vs(c.y,p.offset.y))}return c}applyTransform(l,c=!1){const h=ie();un(h,l);for(let d=0;d<this.path.length;d++){const p=this.path[d];!c&&p.options.layoutScroll&&p.scroll&&p!==p.root&&zs(h,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),Yi(p.latestValues)&&zs(h,p.latestValues)}return Yi(this.latestValues)&&zs(h,this.latestValues),h}removeTransform(l){const c=ie();un(c,l);for(let h=0;h<this.path.length;h++){const d=this.path[h];if(!d.instance||!Yi(d.latestValues))continue;xh(d.latestValues)&&d.updateSnapshot();const p=ie(),m=d.measurePageBox();un(p,m),Ng(c,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,p)}return Yi(this.latestValues)&&Ng(c,this.latestValues),c}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ye.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==c;if(!(l||h&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:m}=this.options;if(!(!this.layout||!(p||m))){if(this.resolvedRelativeTargetAt=ye.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ie(),this.relativeTargetOrigin=ie(),ro(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),un(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ie(),this.targetWithTransforms=ie()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),ZS(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):un(this.target,this.layout.layoutBox),X0(this.target,this.targetDelta)):un(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ie(),this.relativeTargetOrigin=ie(),ro(this.relativeTargetOrigin,this.target,y.target),un(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||xh(this.parent.latestValues)||G0(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const l=this.getLead(),c=!!this.resumingFrom||this!==l;let h=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(h=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===ye.timestamp&&(h=!1),h)return;const{layout:d,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||p))return;un(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,y=this.treeScale.y;uS(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=ie());const{target:w}=l;if(!w){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Mg(this.prevProjectionDelta.x,this.projectionDelta.x),Mg(this.prevProjectionDelta.y,this.projectionDelta.y)),so(this.projectionDelta,this.layoutCorrected,w,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==y||!Vg(this.projectionDelta.x,this.prevProjectionDelta.x)||!Vg(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",w))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.visualElement?.scheduleRender(),l){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Hs(),this.projectionDelta=Hs(),this.projectionDeltaWithTransform=Hs()}setAnimationOrigin(l,c=!1){const h=this.snapshot,d=h?h.latestValues:{},p={...this.latestValues},m=Hs();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const y=ie(),w=h?h.source:void 0,A=this.layout?this.layout.source:void 0,x=w!==A,E=this.getStack(),S=!E||E.members.length<=1,_=!!(x&&!S&&this.options.crossfade===!0&&!this.path.some(UE));this.animationProgress=0;let C;this.mixTargetDelta=R=>{const k=R/1e3;$g(m.x,l.x,k),$g(m.y,l.y,k),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ro(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),HE(this.relativeTarget,this.relativeTargetOrigin,y,k),C&&TE(this.relativeTarget,C)&&(this.isProjectionDirty=!1),C||(C=ie()),un(C,this.relativeTarget)),x&&(this.animationValues=p,AE(p,d,this.latestValues,k,_,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Tn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Nt.update(()=>{dl.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=_n(0)),this.currentAnimation=gE(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),l.onUpdate&&l.onUpdate(c)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(RE),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:c,target:h,layout:d,latestValues:p}=l;if(!(!c||!h||!d)){if(this!==l&&this.layout&&d&&gv(this.options.animationType,this.layout.layoutBox,d.layoutBox)){h=this.target||ie();const m=Ie(this.layout.layoutBox.x);h.x.min=l.target.x.min,h.x.max=h.x.min+m;const y=Ie(this.layout.layoutBox.y);h.y.min=l.target.y.min,h.y.max=h.y.min+y}un(c,h),zs(c,p),so(this.projectionDeltaWithTransform,this.layoutCorrected,c,p)}}registerSharedNode(l,c){this.sharedNodes.has(l)||this.sharedNodes.set(l,new PE),this.sharedNodes.get(l).add(c);const d=c.options.initialPromotionConfig;c.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(c):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){const{layoutId:l}=this.options;return l?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:l}=this.options;return l?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:c,preserveFollowOpacity:h}={}){const d=this.getStack();d&&d.promote(this,h),l&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let c=!1;const{latestValues:h}=l;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(c=!0),!c)return;const d={};h.z&&Gu("z",l,d,this.animationValues);for(let p=0;p<Wu.length;p++)Gu(`rotate${Wu[p]}`,l,d,this.animationValues),Gu(`skew${Wu[p]}`,l,d,this.animationValues);l.render();for(const p in d)l.setStaticValue(p,d[p]),this.animationValues&&(this.animationValues[p]=d[p]);l.scheduleRender()}applyProjectionStyles(l,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const h=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=hl(c?.pointerEvents)||"",l.transform=h?h(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=hl(c?.pointerEvents)||""),this.hasProjected&&!Yi(this.latestValues)&&(l.transform=h?h({},""):"none",this.hasProjected=!1);return}l.visibility="";const p=d.animationValues||d.latestValues;this.applyTransformsToTarget();let m=kE(this.projectionDeltaWithTransform,this.treeScale,p);h&&(m=h(p,m)),l.transform=m;const{x:y,y:w}=this.projectionDelta;l.transformOrigin=`${y.origin*100}% ${w.origin*100}% 0`,d.animationValues?l.opacity=d===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:l.opacity=d===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const A in fo){if(p[A]===void 0)continue;const{correct:x,applyTo:E,isCSSVariable:S}=fo[A],_=m==="none"?p[A]:x(p[A],d);if(E){const C=E.length;for(let R=0;R<C;R++)l[E[R]]=_}else S?this.options.visualElement.renderState.vars[A]=_:l[A]=_}this.options.layoutId&&(l.pointerEvents=d===this?hl(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>l.currentAnimation?.stop()),this.root.nodes.forEach(zg),this.root.sharedNodes.clear()}}}function ME(s){s.updateLayout()}function IE(s){const t=s.resumeFrom?.snapshot||s.snapshot;if(s.isLead()&&s.layout&&t&&s.hasListeners("didUpdate")){const{layoutBox:e,measuredBox:n}=s.layout,{animationType:r}=s.options,a=t.source!==s.layout.source;r==="size"?fn(p=>{const m=a?t.measuredBox[p]:t.layoutBox[p],y=Ie(m);m.min=e[p].min,m.max=m.min+y}):gv(r,t.layoutBox,e)&&fn(p=>{const m=a?t.measuredBox[p]:t.layoutBox[p],y=Ie(e[p]);m.max=m.min+y,s.relativeTarget&&!s.currentAnimation&&(s.isProjectionDirty=!0,s.relativeTarget[p].max=s.relativeTarget[p].min+y)});const l=Hs();so(l,e,t.layoutBox);const c=Hs();a?so(c,s.applyTransform(n,!0),t.measuredBox):so(c,e,t.layoutBox);const h=!dv(l);let d=!1;if(!s.resumeFrom){const p=s.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:m,layout:y}=p;if(m&&y){const w=ie();ro(w,t.layoutBox,m.layoutBox);const A=ie();ro(A,e,y.layoutBox),fv(w,A)||(d=!0),p.options.layoutRoot&&(s.relativeTarget=A,s.relativeTargetOrigin=w,s.relativeParent=p)}}}s.notifyListeners("didUpdate",{layout:e,snapshot:t,delta:c,layoutDelta:l,hasLayoutChanged:h,hasRelativeLayoutChanged:d})}else if(s.isLead()){const{onExitComplete:e}=s.options;e&&e()}s.options.transition=void 0}function DE(s){s.parent&&(s.isProjecting()||(s.isProjectionDirty=s.parent.isProjectionDirty),s.isSharedProjectionDirty||(s.isSharedProjectionDirty=!!(s.isProjectionDirty||s.parent.isProjectionDirty||s.parent.isSharedProjectionDirty)),s.isTransformDirty||(s.isTransformDirty=s.parent.isTransformDirty))}function NE(s){s.isProjectionDirty=s.isSharedProjectionDirty=s.isTransformDirty=!1}function FE(s){s.clearSnapshot()}function zg(s){s.clearMeasurements()}function Hg(s){s.isLayoutDirty=!1}function OE(s){const{visualElement:t}=s.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),s.resetTransform()}function Ug(s){s.finishAnimation(),s.targetDelta=s.relativeTarget=s.target=void 0,s.isProjectionDirty=!0}function jE(s){s.resolveTargetDelta()}function BE(s){s.calcProjection()}function VE(s){s.resetSkewAndRotation()}function zE(s){s.removeLeadSnapshot()}function $g(s,t,e){s.translate=Kt(t.translate,0,e),s.scale=Kt(t.scale,1,e),s.origin=t.origin,s.originPoint=t.originPoint}function Wg(s,t,e,n){s.min=Kt(t.min,e.min,n),s.max=Kt(t.max,e.max,n)}function HE(s,t,e,n){Wg(s.x,t.x,e.x,n),Wg(s.y,t.y,e.y,n)}function UE(s){return s.animationValues&&s.animationValues.opacityExit!==void 0}const $E={duration:.45,ease:[.4,0,.1,1]},Gg=s=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(s),Xg=Gg("applewebkit/")&&!Gg("chrome/")?Math.round:Ge;function Kg(s){s.min=Xg(s.min),s.max=Xg(s.max)}function WE(s){Kg(s.x),Kg(s.y)}function gv(s,t,e){return s==="position"||s==="preserve-aspect"&&!QS(Bg(t),Bg(e),.2)}function GE(s){return s!==s.root&&s.scroll?.wasRoot}const XE=mv({attachResizeListener:(s,t)=>po(s,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Xu={current:void 0},yv=mv({measureScroll:s=>({x:s.scrollLeft,y:s.scrollTop}),defaultParent:()=>{if(!Xu.current){const s=new XE({});s.mount(window),s.setOptions({layoutScroll:!0}),Xu.current=s}return Xu.current},resetTransform:(s,t)=>{s.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:s=>window.getComputedStyle(s).position==="fixed"}),KE={pan:{Feature:dE},drag:{Feature:hE,ProjectionNode:yv,MeasureLayout:cv}};function qg(s,t,e){const{props:n}=s;s.animationState&&n.whileHover&&s.animationState.setActive("whileHover",e==="Start");const r="onHover"+e,a=n[r];a&&Nt.postRender(()=>a(t,Eo(t)))}class qE extends Mi{mount(){const{current:t}=this.node;t&&(this.unmount=lb(t,(e,n)=>(qg(this.node,n,"Start"),r=>qg(this.node,r,"End"))))}unmount(){}}class YE extends Mi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ao(po(this.node.current,"focus",()=>this.onFocus()),po(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Yg(s,t,e){const{props:n}=s;if(s.current instanceof HTMLButtonElement&&s.current.disabled)return;s.animationState&&n.whileTap&&s.animationState.setActive("whileTap",e==="Start");const r="onTap"+(e==="End"?"":e),a=n[r];a&&Nt.postRender(()=>a(t,Eo(t)))}class QE extends Mi{mount(){const{current:t}=this.node;t&&(this.unmount=db(t,(e,n)=>(Yg(this.node,n,"Start"),(r,{success:a})=>Yg(this.node,r,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Th=new WeakMap,Ku=new WeakMap,ZE=s=>{const t=Th.get(s.target);t&&t(s)},JE=s=>{s.forEach(ZE)};function tC({root:s,...t}){const e=s||document;Ku.has(e)||Ku.set(e,{});const n=Ku.get(e),r=JSON.stringify(t);return n[r]||(n[r]=new IntersectionObserver(JE,{root:s,...t})),n[r]}function eC(s,t,e){const n=tC(t);return Th.set(s,e),n.observe(s),()=>{Th.delete(s),n.unobserve(s)}}const nC={some:0,all:1};class iC extends Mi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:n,amount:r="some",once:a}=t,l={root:e?e.current:void 0,rootMargin:n,threshold:typeof r=="number"?r:nC[r]},c=h=>{const{isIntersecting:d}=h;if(this.isInView===d||(this.isInView=d,a&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:p,onViewportLeave:m}=this.node.getProps(),y=d?p:m;y&&y(h)};return eC(this.node.current,l,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(sC(t,e))&&this.startObserver()}unmount(){}}function sC({viewport:s={}},{viewport:t={}}={}){return e=>s[e]!==t[e]}const rC={inView:{Feature:iC},tap:{Feature:QE},focus:{Feature:YE},hover:{Feature:qE}},oC={layout:{ProjectionNode:yv,MeasureLayout:cv}},aC={...WS,...rC,...KE,...oC},At=aS(aC,xS),lC=50,Qg=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),cC=()=>({time:0,x:Qg(),y:Qg()}),uC={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function Zg(s,t,e,n){const r=e[t],{length:a,position:l}=uC[t],c=r.current,h=e.time;r.current=s[`scroll${l}`],r.scrollLength=s[`scroll${a}`]-s[`client${a}`],r.offset.length=0,r.offset[0]=0,r.offset[1]=r.scrollLength,r.progress=Ys(0,r.scrollLength,r.current);const d=n-h;r.velocity=d>lC?0:Xh(r.current-c,d)}function hC(s,t,e){Zg(s,"x",t,e),Zg(s,"y",t,e),t.time=e}function dC(s,t){const e={x:0,y:0};let n=s;for(;n&&n!==t;)if(cd(n))e.x+=n.offsetLeft,e.y+=n.offsetTop,n=n.offsetParent;else if(n.tagName==="svg"){const r=n.getBoundingClientRect();n=n.parentElement;const a=n.getBoundingClientRect();e.x+=r.left-a.left,e.y+=r.top-a.top}else if(n instanceof SVGGraphicsElement){const{x:r,y:a}=n.getBBox();e.x+=r,e.y+=a;let l=null,c=n.parentNode;for(;!l;)c.tagName==="svg"&&(l=c),c=n.parentNode;n=l}else break;return e}const Ph={start:0,center:.5,end:1};function Jg(s,t,e=0){let n=0;if(s in Ph&&(s=Ph[s]),typeof s=="string"){const r=parseFloat(s);s.endsWith("px")?n=r:s.endsWith("%")?s=r/100:s.endsWith("vw")?n=r/100*document.documentElement.clientWidth:s.endsWith("vh")?n=r/100*document.documentElement.clientHeight:s=r}return typeof s=="number"&&(n=t*s),e+n}const fC=[0,0];function pC(s,t,e,n){let r=Array.isArray(s)?s:fC,a=0,l=0;return typeof s=="number"?r=[s,s]:typeof s=="string"&&(s=s.trim(),s.includes(" ")?r=s.split(" "):r=[s,Ph[s]?s:"0"]),a=Jg(r[0],e,n),l=Jg(r[1],t),a-l}const mC={All:[[0,0],[1,1]]},gC={x:0,y:0};function yC(s){return"getBBox"in s&&s.tagName!=="svg"?s.getBBox():{width:s.clientWidth,height:s.clientHeight}}function vC(s,t,e){const{offset:n=mC.All}=e,{target:r=s,axis:a="y"}=e,l=a==="y"?"height":"width",c=r!==s?dC(r,s):gC,h=r===s?{width:s.scrollWidth,height:s.scrollHeight}:yC(r),d={width:s.clientWidth,height:s.clientHeight};t[a].offset.length=0;let p=!t[a].interpolate;const m=n.length;for(let y=0;y<m;y++){const w=pC(n[y],d[l],h[l],c[a]);!p&&w!==t[a].interpolatorOffsets[y]&&(p=!0),t[a].offset[y]=w}p&&(t[a].interpolate=nd(t[a].offset,c0(n),{clamp:!1}),t[a].interpolatorOffsets=[...t[a].offset]),t[a].progress=Gn(0,1,t[a].interpolate(t[a].current))}function wC(s,t=s,e){if(e.x.targetOffset=0,e.y.targetOffset=0,t!==s){let n=t;for(;n&&n!==s;)e.x.targetOffset+=n.offsetLeft,e.y.targetOffset+=n.offsetTop,n=n.offsetParent}e.x.targetLength=t===s?t.scrollWidth:t.clientWidth,e.y.targetLength=t===s?t.scrollHeight:t.clientHeight,e.x.containerLength=s.clientWidth,e.y.containerLength=s.clientHeight}function xC(s,t,e,n={}){return{measure:r=>{wC(s,n.target,e),hC(s,e,r),(n.offset||n.target)&&vC(s,e,n)},notify:()=>t(e)}}const Wr=new WeakMap,ty=new WeakMap,qu=new WeakMap,ey=s=>s===document.scrollingElement?window:s;function vv(s,{container:t=document.scrollingElement,...e}={}){if(!t)return Ge;let n=qu.get(t);n||(n=new Set,qu.set(t,n));const r=cC(),a=xC(t,s,r,e);if(n.add(a),!Wr.has(t)){const c=()=>{for(const m of n)m.measure(ye.timestamp);Nt.preUpdate(h)},h=()=>{for(const m of n)m.notify()},d=()=>Nt.read(c);Wr.set(t,d);const p=ey(t);window.addEventListener("resize",d,{passive:!0}),t!==document.documentElement&&ty.set(t,Ab(t,d)),p.addEventListener("scroll",d,{passive:!0}),d()}const l=Wr.get(t);return Nt.read(l,!1,!0),()=>{Tn(l);const c=qu.get(t);if(!c||(c.delete(a),c.size))return;const h=Wr.get(t);Wr.delete(t),h&&(ey(t).removeEventListener("scroll",h),ty.get(t)?.(),window.removeEventListener("resize",h))}}const ny=new Map;function AC(s){const t={value:0},e=vv(n=>{t.value=n[s.axis].progress*100},s);return{currentTime:t,cancel:e}}function wv({source:s,container:t,...e}){const{axis:n}=e;s&&(t=s);const r=ny.get(t)??new Map;ny.set(t,r);const a=e.target??"self",l=r.get(a)??{},c=n+(e.offset??[]).join(",");return l[c]||(l[c]=!e.target&&f0()?new ScrollTimeline({source:t,axis:n}):AC({container:t,...e})),l[c]}function bC(s,t){const e=wv(t);return s.attachTimeline({timeline:t.target?void 0:e,observe:n=>(n.pause(),R0(r=>{n.time=n.duration*r},e))})}function SC(s){return s.length===2}function EC(s,t){return SC(s)?vv(e=>{s(e[t.axis].progress,e)},t):R0(s,wv(t))}function CC(s,{axis:t="y",container:e=document.scrollingElement,...n}={}){if(!e)return Ge;const r={axis:t,container:e,...n};return typeof s=="function"?EC(s,r):bC(s,r)}const _C=()=>({scrollX:_n(0),scrollY:_n(0),scrollXProgress:_n(0),scrollYProgress:_n(0)}),Qa=s=>s?!s.current:!1;function TC({container:s,target:t,...e}={}){const n=tr(_C),r=O.useRef(null),a=O.useRef(!1),l=O.useCallback(()=>(r.current=CC((c,{x:h,y:d})=>{n.scrollX.set(h.current),n.scrollXProgress.set(h.progress),n.scrollY.set(d.current),n.scrollYProgress.set(d.progress)},{...e,container:s?.current||void 0,target:t?.current||void 0}),()=>{r.current?.()}),[s,t,JSON.stringify(e.offset)]);return El(()=>{if(a.current=!1,Qa(s)||Qa(t)){a.current=!0;return}else return l()},[l]),O.useEffect(()=>{if(a.current)return lo(!Qa(s)),lo(!Qa(t)),l()},[l]),n}function PC(s){const t=tr(()=>_n(s)),{isStatic:e}=O.useContext(_l);if(e){const[,n]=O.useState(s);O.useEffect(()=>t.on("change",n),[])}return t}function xv(s,t){const e=PC(t()),n=()=>e.set(t());return n(),El(()=>{const r=()=>Nt.preRender(n,!1,!0),a=s.map(l=>l.on("change",r));return()=>{a.forEach(l=>l()),Tn(n)}}),e}function kC(s){no.current=[],s();const t=xv(no.current,s);return no.current=void 0,t}function Yu(s,t,e,n){if(typeof s=="function")return kC(s);const r=typeof t=="function"?t:Sb(t,e,n);return Array.isArray(s)?iy(s,r):iy([s],([a])=>r(a))}function iy(s,t){const e=tr(()=>[]);return xv(s,()=>{e.length=0;const n=s.length;for(let r=0;r<n;r++)e[r]=s[r].get();return t(e)})}const RC=({theme:s,toggleTheme:t})=>T.jsx(At.button,{onClick:t,className:"p-2 rounded-full bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white transition-colors duration-300 shadow-md flex items-center justify-center","aria-label":"Toggle theme",whileHover:{scale:1.1},children:T.jsx(At.div,{initial:{opacity:0,rotate:s==="light"?-90:90},animate:{opacity:1,rotate:0},transition:{duration:.3},children:s==="light"?T.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:T.jsx("path",{d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-13 0a1 1 0 100-2H2a1 1 0 100 2h1zm-.464-4.95l-.707-.707a1 1 0 00-1.414 1.414l.707.707a1 1 0 001.414-1.414zm2.12 10.607a1 1 0 010-1.414l.706-.707a1 1 0 111.414 1.414l-.707.707a1 1 0 01-1.414 0zM10 15a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1z",clipRule:"evenodd",fillRule:"evenodd"})}):T.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:T.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})})},s)}),LC=({firstName:s,lastName:t})=>T.jsxs("div",{className:"flex items-center text-xl font-bold",children:[T.jsx(At.span,{whileHover:{scale:1.1},className:"text-gray-800 dark:text-blue-300",children:s}),T.jsx(At.span,{whileHover:{scale:1.1},className:"text-gray-800 dark:text-blue-300 ml-1",children:t})]}),MC=({theme:s,toggleTheme:t})=>T.jsx(At.header,{initial:{y:-100},animate:{y:0},transition:{type:"spring",stiffness:120},className:"glass-card backdrop-blur-xl sticky top-0 z-50 border-b border-gray-200/20 dark:border-gray-700/20",children:T.jsxs("nav",{className:"container mx-auto px-6 py-4 flex justify-between items-center",children:[T.jsx(LC,{firstName:"Kiran",lastName:"Mulawad"}),T.jsxs("div",{className:"hidden md:flex space-x-8 items-center",children:[T.jsx(At.a,{whileHover:{scale:1.1},href:"#about",className:"nav-link animated-underline text-gray-600 dark:text-gray-300 font-medium",children:"About"}),T.jsx(At.a,{whileHover:{scale:1.1},href:"#skills",className:"nav-link animated-underline text-gray-600 dark:text-gray-300 font-medium",children:"Skills"}),T.jsx(At.a,{whileHover:{scale:1.1},href:"#projects",className:"nav-link animated-underline text-gray-600 dark:text-gray-300 font-medium",children:"Projects"}),T.jsx(At.a,{whileHover:{scale:1.1},href:"#experience",className:"nav-link animated-underline text-gray-600 dark:text-gray-300 font-medium",children:"Experience"}),T.jsx(At.a,{whileHover:{scale:1.1},href:"#education",className:"nav-link animated-underline text-gray-600 dark:text-gray-300 font-medium",children:"Education"}),T.jsx(At.a,{whileHover:{scale:1.1},href:"#contact",className:"nav-link animated-underline text-gray-600 dark:text-gray-300 font-medium",children:"Contact"}),T.jsx(RC,{theme:s,toggleTheme:t})]}),T.jsx(At.a,{whileHover:{scale:1.05},href:"#contact",className:"hidden md:inline-block bg-gradient-to-r from-primary-500 to-primary-600 text-white font-bold py-2.5 px-6 rounded-full hover:shadow-glow transition-all duration-300",children:"Let's Connect"})]})}),IC=()=>T.jsx(At.footer,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:1},className:"bg-gray-800 text-white dark:bg-gray-950",children:T.jsxs("div",{className:"container mx-auto px-6 py-12 text-center",children:[T.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Let's Connect!"}),T.jsx("p",{className:"max-w-2xl mx-auto mb-8 text-gray-300",children:"Connect with me on my social platforms:"}),T.jsxs("div",{className:"flex flex-col sm:flex-row justify-center items-center gap-4",children:[T.jsxs("a",{href:"https://www.linkedin.com/in/kiran-mulawad-4573b8229/",target:"_blank",rel:"noopener noreferrer",className:"bg-gray-700 dark:bg-gray-800 text-white font-bold py-3 px-6 rounded-full hover:bg-opacity-90 transition-colors flex items-center gap-2",children:[T.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:T.jsx("path",{fillRule:"evenodd",d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z",clipRule:"evenodd"})}),"LinkedIn"]}),T.jsxs("a",{href:"https://github.com/Kiranmulawad1",target:"_blank",rel:"noopener noreferrer",className:"bg-gray-700 dark:bg-gray-800 text-white font-bold py-3 px-6 rounded-full hover:bg-opacity-90 transition-colors flex items-center gap-2",children:[T.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:T.jsx("path",{fillRule:"evenodd",d:"M12 0C5.373 0 0 5.373 0 12c0 5.302 3.438 9.799 8.205 11.387.6.111.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.73.084-.73 1.205.084 1.838 1.238 1.838 1.238 1.07 1.835 2.809 1.305 3.49.998.108-.775.418-1.305.762-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.13-3.18 0 0 1-.322 3.3-.998 1.125-.313 2.32-.47 3.515-.47.195 0 .39.01.585.03 1.2.14 2.385.45 3.515.998 2.3.676 3.3.998 3.3.998.67 1.657.265 2.877.13 3.18.77.84 1.235 1.91 1.235 3.22 0 4.61-2.805 5.625-5.475 5.92.43.37.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .32.21.69.825.57C20.565 21.802 24 17.305 24 12c0-6.627-5.373-12-12-12z",clipRule:"evenodd"})}),"GitHub"]}),T.jsxs("a",{href:"https://www.instagram.com/kiran_mulawad1/",target:"_blank",rel:"noopener noreferrer",className:"bg-gray-700 dark:bg-gray-800 text-white font-bold py-3 px-6 rounded-full hover:bg-opacity-90 transition-colors flex items-center gap-2",children:[T.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:T.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.204-.012 3.584-.069 4.849-1.691 4.919-1.691 4.919-4.919 4.919-1.265.058-1.645-.069-4.849-.069-3.204 0-3.584-.012-4.849-.069-3.252-.148-4.771-1.691-4.919-4.919-.058-1.265-.069-1.645-.069-4.849 0-3.204.012-3.584.069-4.849 1.691-4.919 1.691-4.919 4.919-4.919zm0 2.163c-3.204 0-3.584.012-4.85.07-3.252.148-4.771 1.691-4.919 4.919-.058 1.265-.069 1.645-.069 4.849 0 3.204.012 3.584.069 4.849 1.691 4.919 1.691 4.919 4.919 4.919 1.265-.058 1.645-.069 4.849-.069 3.204 0 3.584.012 4.849-.069 3.252-.148 4.771-1.691 4.919-4.919.058-1.265.069-1.645.069-4.849 0-3.204-.012-3.584-.069-4.849-1.691-4.919-1.691-4.919-4.919-4.919zm0 5.838c-2.32 0-4.2 1.88-4.2 4.2s1.88 4.2 4.2 4.2 4.2-1.88 4.2-4.2-1.88-4.2-4.2-4.2zm0 2.163c1.015 0 1.837.822 1.837 1.837s-.822 1.837-1.837 1.837-1.837-.822-1.837-1.837.822-1.837 1.837-1.837zm6.262-7.272c-.817 0-1.48-.665-1.48-1.48s.663-1.48 1.48-1.48 1.48.665 1.48 1.48-.663 1.48-1.48 1.48z"})}),"Instagram"]})]}),T.jsx("p",{className:"mt-12 text-gray-400 text-sm",children:" 2025 Kiran Mulawad. All rights reserved."})]})}),DC=({onShowResume:s})=>{const{scrollY:t}=TC(),e=Yu(t,[0,500],[0,150]),n=Yu(t,[0,500],[0,-100]),r=Yu(t,[0,500],[0,200]);return T.jsxs("section",{id:"hero",className:"bg-transparent min-h-screen flex items-center justify-center relative overflow-hidden",children:[T.jsx(At.div,{style:{y:e},className:"absolute top-20 left-10 w-72 h-72 bg-primary-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob"}),T.jsx(At.div,{style:{y:n},className:"absolute top-40 right-10 w-72 h-72 bg-primary-400 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-2000"}),T.jsx(At.div,{style:{y:r},className:"absolute -bottom-8 left-20 w-72 h-72 bg-primary-300 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-4000"}),T.jsxs("div",{className:"container mx-auto px-6 py-24 text-center relative z-10",children:[T.jsxs(At.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-5xl md:text-7xl font-extrabold leading-tight",children:[T.jsx("span",{className:"text-gray-800 dark:text-white",children:"Hi, I'm "}),T.jsx("span",{className:"gradient-text",children:"Kiran Mulawad"})]}),T.jsx(At.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"mt-6 text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto font-medium",children:"Applied Data Science & Analytics Master's Student | AI/Data Engineer"}),T.jsx(At.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},className:"mt-3 text-lg text-gray-500 dark:text-gray-400 max-w-2xl mx-auto",children:"Crafting intuitive experiences and insightful solutions."}),T.jsxs(At.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.6},className:"mt-10 flex flex-col sm:flex-row justify-center gap-6",children:[T.jsxs("a",{href:"#projects",className:"group relative inline-block bg-gradient-to-r from-primary-500 to-primary-600 text-white font-bold py-4 px-10 rounded-full text-lg overflow-hidden transition-all duration-300 hover:shadow-glow hover:scale-105",children:[T.jsx("span",{className:"relative z-10",children:"View My Work"}),T.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary-600 to-primary-700 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),T.jsxs("button",{onClick:s,className:"group relative inline-block bg-transparent border-2 border-gray-700 dark:border-gray-300 text-gray-700 dark:text-gray-300 font-bold py-4 px-10 rounded-full text-lg overflow-hidden transition-all duration-300 hover:shadow-lg hover:scale-105",children:[T.jsx("span",{className:"relative z-10 group-hover:text-white transition-colors duration-300",children:"View CV "}),T.jsx("div",{className:"absolute inset-0 bg-gray-700 dark:bg-gray-300 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-300 origin-left"})]})]})]})]})},NC="/assets/HD-Profile-C4j-8dpa.png",FC=s=>{const[t,e]=O.useState(!1);return O.useEffect(()=>{const n=new IntersectionObserver(([r])=>{r.isIntersecting&&e(!0)});return s.current&&n.observe(s.current),()=>n.disconnect()},[s]),t},OC=()=>{const s=O.useRef(null),t=FC(s);return T.jsx("section",{id:"about",ref:s,className:"py-20 bg-transparent relative",children:T.jsxs(At.div,{initial:{opacity:0,y:50},animate:t?{opacity:1,y:0}:{},transition:{duration:.6},className:"container mx-auto px-6 grid grid-cols-1 md:grid-cols-2 gap-x-12 gap-y-12 items-center",children:[T.jsxs(At.div,{initial:{x:-50,opacity:0},animate:t?{x:0,opacity:1}:{},transition:{duration:.6,delay:.2},className:"w-fit mx-auto relative",children:[T.jsx("div",{className:"absolute -inset-4 bg-gradient-to-r from-primary-500 to-primary-600 rounded-full blur-2xl opacity-30 animate-pulse"}),T.jsx("div",{className:"relative",children:T.jsx("img",{src:NC,alt:"Kiran Mulawad Photo",className:"rounded-full w-72 h-72 shadow-2xl object-cover border-4 border-white/20 dark:border-gray-700/20"})})]}),T.jsxs(At.div,{initial:{x:50,opacity:0},animate:t?{x:0,opacity:1}:{},transition:{duration:.6,delay:.4},className:"text-center md:text-left",children:[T.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-6",children:T.jsx("span",{className:"gradient-text",children:"About Me"})}),T.jsxs("div",{className:"glass-card p-6 rounded-2xl",children:[T.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed text-lg",children:"An Applied Data Science and Analytics master's student with strong experience in AI tools, LLM-based projects, data engineering, and cloud technologies. I am an AI/Data Engineer with robust experience in Python-based data workflows, cloud data handling, and AI/NLP applications. I have built scalable semantic search pipelines with Ollama, Pinecone, and Streamlit."}),T.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed mt-4 text-lg",children:"Currently, I am completing my thesis on AI-based grant discovery automation at iiterate Technologies as part of a thesis internship. I am actively seeking AI Engineer or Data Engineer roles in innovative environments where I can apply my skills to solve complex problems and contribute to cutting-edge solutions."})]})]})]})})},jC=[{icon:"",title:"Programming",description:"Python, SQL, R, HTML, JS"},{icon:"",title:"ML & DL",description:"Scikit-learn, PyTorch, TensorFlow, Hugging Face Transformers"},{icon:"",title:"Data Engineering",description:"ETL, Data Pipelines, Apache Airflow, APIs, PostgreSQL, MySQL, SQLite"},{icon:"",title:"Cloud & Tools",description:"GCP, BigQuery, Azure, Docker, Git, Streamlit, Pinecone"},{icon:"",title:"Visualization",description:"Tableau, Excel, SAS Visual Analytics"},{icon:"",title:"Soft Skills",description:"Collaboration, Agile, Communication"},{icon:"",title:"Languages",description:"English (Fluent), German (A2), Kannada (Fluent), Hindi (Fluent)"}],BC=s=>{const[t,e]=O.useState(!1);return O.useEffect(()=>{const n=new IntersectionObserver(([r])=>{r.isIntersecting&&e(!0)});return s.current&&n.observe(s.current),()=>n.disconnect()},[s]),t},VC=()=>{const s=O.useRef(null),t=BC(s),e={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},n={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return T.jsx("section",{id:"skills",ref:s,className:"py-20 bg-transparent relative",children:T.jsxs(At.div,{initial:{opacity:0,y:50},animate:t?{opacity:1,y:0}:{},transition:{duration:.6},className:"container mx-auto px-6",children:[T.jsxs("div",{className:"text-center mb-16",children:[T.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-4",children:T.jsx("span",{className:"gradient-text",children:"My Skills"})}),T.jsx("p",{className:"mt-3 text-lg text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:"A blend of technical expertise and creative problem-solving."})]}),T.jsx(At.div,{variants:e,initial:"hidden",animate:t?"show":"hidden",className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:jC.map((r,a)=>T.jsxs(At.div,{className:"glass-card p-6 rounded-2xl text-center text-gray-800 dark:text-white group hover:shadow-neu-light dark:hover:shadow-neu-dark transition-all duration-300",variants:n,whileHover:{y:-8,scale:1.02},transition:{type:"spring",stiffness:300,damping:20},children:[T.jsx(At.div,{className:"text-5xl mb-4 inline-block",whileHover:{rotate:[0,-10,10,-10,0],scale:1.2},transition:{duration:.5},children:r.icon}),T.jsx("h3",{className:"text-xl font-bold mb-2 group-hover:text-primary-500 transition-colors duration-300",children:r.title}),T.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:r.description})]},a))})]})})},zC=(s={})=>{const t=O.useRef(null),{max:e=15,perspective:n=1e3,scale:r=1.05,speed:a=400}=s;return O.useEffect(()=>{const l=t.current;if(!l)return;let c;const h=m=>{const y=l.getBoundingClientRect(),w=m.clientX-y.left,A=m.clientY-y.top,x=y.width/2,E=y.height/2,S=(A-E)/E*e,_=(x-w)/x*e;l.style.transform=`perspective(${n}px) rotateX(${S}deg) rotateY(${_}deg) scale3d(${r}, ${r}, ${r})`},d=()=>{clearTimeout(c),l.style.transition=`transform ${a}ms cubic-bezier(0.03, 0.98, 0.52, 0.99)`},p=()=>{c=setTimeout(()=>{l.style.transform="perspective(1000px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)"},100)};return l.addEventListener("mousemove",h),l.addEventListener("mouseenter",d),l.addEventListener("mouseleave",p),()=>{clearTimeout(c),l.removeEventListener("mousemove",h),l.removeEventListener("mouseenter",d),l.removeEventListener("mouseleave",p)}},[e,n,r,a]),t},HC=({project:s,onDetailsClick:t,variants:e})=>{const n=zC({max:10,perspective:1500,scale:1.02,speed:300});return T.jsxs(At.div,{ref:n,className:"glass-card p-6 rounded-2xl shadow-xl project-card max-w-xs mx-auto overflow-visible group",variants:e,style:{transformStyle:"preserve-3d"},children:[T.jsxs("div",{className:"relative overflow-hidden rounded-xl mb-4",style:{transform:"translateZ(20px)"},children:[T.jsx("img",{src:s.image,alt:s.title,className:"rounded-xl w-full h-40 object-cover transition-transform duration-500 group-hover:scale-110"}),T.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),T.jsxs("div",{style:{transform:"translateZ(30px)"},children:[T.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-2 group-hover:text-primary-500 transition-colors duration-300",children:s.title}),T.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-4 line-clamp-2",children:s.description.split(".")[0]+"."}),T.jsx("button",{onClick:()=>t(s.id),className:"w-full bg-gradient-to-r from-primary-500 to-primary-600 text-white font-bold py-2.5 px-4 rounded-lg text-sm hover:shadow-glow transition-all duration-300 hover:scale-105",style:{transform:"translateZ(40px)"},children:"View Details"})]})]})},UC=({project:s,onClose:t,isOpen:e})=>{if(O.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[e]),!e||!s)return null;const n={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.3}}};return T.jsx(At.div,{initial:"hidden",animate:"visible",exit:"hidden",variants:n,className:"modal fixed inset-0 flex items-center justify-center z-50 p-4",children:T.jsxs("div",{className:"modal-content bg-white dark:bg-gray-800 rounded-xl shadow-2xl p-8 max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[T.jsxs("div",{className:"flex justify-between items-center mb-6",children:[T.jsx("h3",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:s.title}),T.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-3xl leading-none",children:""})]}),T.jsx("img",{src:s.image,alt:s.title,className:"rounded-md mb-6 w-full h-64 object-cover"}),T.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed mb-4",children:s.description}),T.jsxs("div",{className:"mb-4",children:[T.jsx("p",{className:"font-semibold text-gray-800 dark:text-white",children:"Technologies Used:"}),T.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:s.tech})]}),T.jsxs("div",{className:"mb-4",children:[T.jsx("p",{className:"font-semibold text-gray-800 dark:text-white",children:"My Role:"}),T.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:s.role})]}),T.jsxs("div",{className:"mb-4",children:[T.jsx("p",{className:"font-semibold text-gray-800 dark:text-white",children:"Challenges & Solutions:"}),T.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:s.challenges})]}),T.jsxs("div",{className:"mb-6",children:[T.jsx("p",{className:"font-semibold text-gray-800 dark:text-white",children:"Key Outcomes:"}),T.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:s.outcomes})]}),T.jsxs("div",{className:"flex flex-wrap gap-4",children:[s.liveLink&&s.liveLink!=="#"&&T.jsxs("a",{href:s.liveLink,target:"_blank",rel:"noopener noreferrer",className:"bg-[#3B82F6] text-white font-bold py-2 px-4 rounded-lg hover:bg-opacity-90 transition-colors flex items-center gap-2",children:["Live Demo ",T.jsx("span",{className:"text-lg",children:""})]}),s.githubLink&&s.githubLink!=="#"&&T.jsxs("a",{href:s.githubLink,target:"_blank",rel:"noopener noreferrer",className:"bg-gray-700 text-white font-bold py-2 px-4 rounded-lg hover:bg-opacity-90 transition-colors flex items-center gap-2",children:["GitHub Repo ",T.jsx("span",{className:"text-lg",children:""})]})]})]})})},$C="/assets/RAG-Chatbot-B0t3AGqt.png",WC="/assets/Data-Engineering-Cbtg2Auy.png",GC="/assets/MARS-Orbiter-BNArmwMT.png",XC="/assets/HUSHHUSH-Recruiter-D0VR-xhG.png",sy=[{id:"rag-chatbot",title:"RAG Chatbot for Student Support",image:$C,description:"Built a Retrieval-Augmented Generation chatbot using LLAMA3 to answer student queries. This project focused on enhancing information retrieval and response generation for educational support.",tech:"LLAMA3, Python, PDF Chunking, Embedding Search, Modular Flow Control",role:"AI/ML Engineer",challenges:"Optimizing LLM orchestration for accurate and relevant responses from chunked PDF inputs. Ensured efficient embedding search to provide contextually appropriate answers.",outcomes:"Successfully developed a functional RAG chatbot capable of providing precise and timely answers to student inquiries, significantly improving access to information.",liveLink:"#",githubLink:"https://github.com/Kiranmulawad1/rag-chatbot"},{id:"data-pipeline",title:"End-to-End Data Pipeline with BigQuery",image:WC,description:"Automated data extraction, cleaning, and loading to Google BigQuery, culminating in Tableau dashboarding for business insights. This project showcased comprehensive data engineering skills from raw data to visualization.",tech:"Docker, Python, Google BigQuery, GCP SDK, MySQL, Tableau",role:"Data Engineer",challenges:"Designing a robust and scalable pipeline for automated data ingestion and transformation. Ensured data integrity and efficient loading into BigQuery for analytics.",outcomes:"Successfully implemented an automated, end-to-end data pipeline, providing clean and structured data for analysis. Enabled stakeholders to make data-driven decisions through interactive Tableau dashboards.",liveLink:"#",githubLink:"https://github.com/Kiranmulawad1/data-pipeline"},{id:"thermal-power",title:"Thermal Power Prediction Mars Express Orbiter",image:GC,description:"Designed and containerized a full Machine Learning pipeline for thermal power prediction using satellite data from the Mars Express Orbiter. This involved data preprocessing, model training, and deployment.",tech:"PostgreSQL, XGBoost, CatBoost, Docker Compose",role:"ML Engineer",challenges:"Handling large volumes of satellite data and optimizing ML models for accurate thermal power predictions. Ensured the pipeline was robust and reproducible through containerization.",outcomes:"Developed a fully containerized ML pipeline that accurately predicts thermal power, demonstrating strong skills in machine learning, data handling, and MLOps.",liveLink:"#",githubLink:"https://github.com/Kiranmulawad1/mars-express-orbiter"},{id:"recruiter-system",title:"Recruiter Candidate Filtering System",image:XC,description:"Developed a system to scrape GitHub profiles, cluster candidates using K-means algorithm, and automate email outreach. This project streamlined the recruitment process by identifying suitable candidates efficiently.",tech:"Python, PostgreSQL, Machine Learning (K-means), HTML, JS",role:"Software Developer & ML Practitioner",challenges:"Effectively scraping and parsing diverse GitHub profile data, and accurately clustering candidates based on their skills and experience. Automated email outreach while ensuring personalization.",outcomes:"Created an efficient system that significantly reduced manual effort in candidate sourcing and filtering, demonstrating practical application of machine learning and web development skills.",liveLink:"#",githubLink:"https://github.com/Kiranmulawad1/Hush-Hush-Recruiter"}],KC=s=>{const[t,e]=O.useState(!1);return O.useEffect(()=>{const n=new IntersectionObserver(([r])=>{r.isIntersecting&&e(!0)});return s.current&&n.observe(s.current),()=>n.disconnect()},[s]),t},qC=()=>{const s=O.useRef(null),t=KC(s),[e,n]=O.useState(!1),[r,a]=O.useState(null),l=p=>{const m=sy.find(y=>y.id===p);a(m),n(!0)},c=()=>{n(!1),a(null)},h={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.2}}},d={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return T.jsxs("section",{id:"projects",ref:s,className:"py-20 bg-transparent relative",children:[T.jsxs(At.div,{initial:{opacity:0,y:50},animate:t?{opacity:1,y:0}:{},transition:{duration:.6},className:"container mx-auto px-6",children:[T.jsxs("div",{className:"text-center mb-16",children:[T.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-4",children:T.jsx("span",{className:"gradient-text",children:"My Projects"})}),T.jsx("p",{className:"mt-3 text-lg text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:"A selection of my work demonstrating my skills and problem-solving approach."})]}),T.jsx(At.div,{variants:h,initial:"hidden",animate:t?"show":"hidden",className:"grid md:grid-cols-2 lg:grid-cols-4 gap-2",children:sy.map(p=>T.jsx(HC,{project:p,onDetailsClick:l,variants:d},p.id))})]}),T.jsx(UC,{project:r,isOpen:e,onClose:c})]})},Av=({item:s,index:t,isLast:e})=>T.jsxs(At.div,{initial:{opacity:0,x:t%2===0?-50:50},whileInView:{opacity:1,x:0},transition:{duration:.6,delay:t*.1},viewport:{once:!0},className:"relative flex items-center mb-12 md:mb-16",children:[!e&&T.jsx("div",{className:"absolute left-4 md:left-1/2 top-12 w-0.5 h-full bg-gradient-to-b from-primary-500 to-transparent md:transform md:-translate-x-1/2"}),T.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center w-full",children:[T.jsx("div",{className:`w-full md:w-5/12 ${t%2===0?"md:text-right md:pr-8":"md:order-3 md:pl-8"}`,children:T.jsxs(At.div,{whileHover:{scale:1.02,y:-5},className:"glass-card p-6 rounded-2xl",children:[T.jsxs("div",{className:"flex items-center gap-3 mb-3 md:justify-end",children:[s.icon&&T.jsx("span",{className:"text-3xl",children:s.icon}),T.jsx("h3",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:s.title})]}),s.company&&T.jsx("p",{className:"text-primary-600 dark:text-primary-400 font-semibold mb-2",children:s.company}),s.institution&&T.jsx("p",{className:"text-primary-600 dark:text-primary-400 font-semibold mb-2",children:s.institution}),T.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-3",children:s.period}),s.description&&T.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed mb-3",children:s.description}),s.achievements&&s.achievements.length>0&&T.jsx("ul",{className:"space-y-2",children:s.achievements.map((n,r)=>T.jsxs("li",{className:"flex items-start gap-2 text-gray-700 dark:text-gray-300 text-sm",children:[T.jsx("span",{className:"text-primary-500 mt-1",children:""}),T.jsx("span",{children:n})]},r))}),s.skills&&s.skills.length>0&&T.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:s.skills.map((n,r)=>T.jsx("span",{className:"px-3 py-1 bg-primary-500/10 text-primary-600 dark:text-primary-400 rounded-full text-xs font-medium",children:n},r))})]})}),T.jsx("div",{className:"absolute left-4 md:left-1/2 md:transform md:-translate-x-1/2 z-10",children:T.jsxs(At.div,{initial:{scale:0},whileInView:{scale:1},transition:{duration:.3,delay:t*.1+.3},viewport:{once:!0},className:"relative",children:[T.jsx("div",{className:"absolute inset-0 rounded-full bg-primary-500/30 animate-ping"}),T.jsx("div",{className:"relative w-8 h-8 bg-gradient-to-br from-primary-500 to-primary-600 rounded-full border-4 border-white dark:border-gray-900 shadow-lg flex items-center justify-center",children:T.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]})}),T.jsx("div",{className:"hidden md:block md:w-5/12"})]})]}),ry=[{id:1,title:"Thesis Intern - AI Funding Finder",company:"iiterate Technologies GmbH",period:"April 2025 - Present",icon:"",description:"Working on AI-based grant discovery automation as part of master's thesis internship.",achievements:["Built custom ETL pipelines for ingesting and embedding grant metadata","Used Pinecone for vector search, Streamlit for UI, Llama for GPT recommendations","Simulated real-world data engineering tasks: chunking, translation, reranking, citation","Deployed and tested app in cloud-like dev setup"],skills:["AI/ML","Python","NLP","Pinecone","Streamlit","ETL","Vector Search"]},{id:2,title:"AI/Data Engineering Projects",company:"Academic & Personal",period:"2023 - 2024",icon:"",description:"Developed multiple AI and data engineering projects showcasing expertise in modern tech stack.",achievements:["Built RAG-based chatbot with Ollama, Pinecone, and Streamlit","Created scalable semantic search pipelines","Implemented data engineering solutions with cloud technologies","Worked on MARS Orbiter simulation and HUSHHUSH recruiter projects"],skills:["Python","Ollama","Pinecone","Streamlit","Cloud","Data Pipelines"]}],YC=s=>{const[t,e]=O.useState(!1);return O.useEffect(()=>{const n=new IntersectionObserver(([r])=>{r.isIntersecting&&e(!0)});return s.current&&n.observe(s.current),()=>n.disconnect()},[s]),t};function QC(){const s=O.useRef(null),t=YC(s);return T.jsx("section",{id:"experience",ref:s,className:"py-20 bg-transparent relative",children:T.jsxs("div",{className:"container mx-auto px-6",children:[T.jsxs(At.div,{initial:{opacity:0,y:50},animate:t?{opacity:1,y:0}:{},transition:{duration:.6},className:"text-center mb-16",children:[T.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-4",children:T.jsx("span",{className:"gradient-text",children:"Experience"})}),T.jsx("p",{className:"mt-3 text-lg text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:"My professional journey and key accomplishments."})]}),T.jsx("div",{className:"max-w-6xl mx-auto relative",children:ry.map((e,n)=>T.jsx(Av,{item:e,index:n,isLast:n===ry.length-1},e.id))})]})})}const oy=[{id:1,title:"M.Sc. Applied Data Science & Analytics",institution:"SRH Hochschule Heidelberg, Germany",period:"October 2023 - Present",icon:"",description:"Pursuing Master's degree with focus on AI, machine learning, and data analytics. Currently completing thesis on AI-based grant discovery automation.",achievements:["Specialization in AI/ML and Data Engineering","Hands-on experience with LLM-based projects","Thesis on AI-based grant discovery automation at iiterate Technologies","Strong foundation in data science and analytics"],skills:["Machine Learning","Data Science","AI","Analytics","Research"]},{id:2,title:"Bachelor of Computer Applications (BCA)",institution:"P.C. Jabin Science College, Hubballi, India",period:"June 2019 - August 2022",icon:"",description:"Completed undergraduate studies with strong foundation in computer science and software development.",achievements:["Built strong programming fundamentals","Gained expertise in software development","Participated in various technical projects","Developed problem-solving and analytical skills"],skills:["Programming","Software Development","Problem Solving","Algorithms"]}],ZC=s=>{const[t,e]=O.useState(!1);return O.useEffect(()=>{const n=new IntersectionObserver(([r])=>{r.isIntersecting&&e(!0)});return s.current&&n.observe(s.current),()=>n.disconnect()},[s]),t};function JC(){const s=O.useRef(null),t=ZC(s);return T.jsx("section",{id:"education",ref:s,className:"py-20 bg-transparent relative",children:T.jsxs("div",{className:"container mx-auto px-6",children:[T.jsxs(At.div,{initial:{opacity:0,y:50},animate:t?{opacity:1,y:0}:{},transition:{duration:.6},className:"text-center mb-16",children:[T.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-4",children:T.jsx("span",{className:"gradient-text",children:"Education"})}),T.jsx("p",{className:"mt-3 text-lg text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:"My academic background and achievements."})]}),T.jsx("div",{className:"max-w-6xl mx-auto relative",children:oy.map((e,n)=>T.jsx(Av,{item:e,index:n,isLast:n===oy.length-1},e.id))})]})})}function t_(){return T.jsxs("section",{id:"contact",className:"py-20 bg-transparent relative overflow-hidden",children:[T.jsx("div",{className:"absolute top-10 right-10 w-96 h-96 bg-primary-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"}),T.jsx("div",{className:"absolute bottom-10 left-10 w-96 h-96 bg-primary-400 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000"}),T.jsx("div",{className:"container mx-auto px-6 text-center relative z-10",children:T.jsxs(At.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},children:[T.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-6",children:T.jsx("span",{className:"gradient-text",children:"Let's Connect"})}),T.jsx("p",{className:"max-w-2xl mx-auto mb-12 text-lg text-gray-700 dark:text-gray-300",children:"Feel free to reach out to me via email for any inquiries or collaborations."}),T.jsx("div",{className:"flex flex-col sm:flex-row justify-center items-center gap-6",children:T.jsxs(At.a,{href:"mailto:kiranmulawad1@gmail.com",className:"group relative bg-gradient-to-r from-primary-500 to-primary-600 text-white font-bold py-4 px-10 rounded-full hover:shadow-glow transition-all duration-300 flex items-center gap-3 overflow-hidden",whileHover:{scale:1.05},whileTap:{scale:.95},children:[T.jsx("span",{className:"relative z-10 text-lg",children:"Email Me"}),T.jsx("span",{className:"relative z-10 text-xl",children:""}),T.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary-600 to-primary-700 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})}),T.jsxs(At.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.2},viewport:{once:!0},className:"glass-card max-w-2xl mx-auto mt-16 p-8 rounded-2xl",children:[T.jsx("h3",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-4",children:"Let's Build Something Amazing Together"}),T.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"I'm always open to discussing new projects, creative ideas, or opportunities to be part of your vision."})]})]})})]})}const Me=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),kh=[.001,0,0,.001,0,0],Qu=1.35,Qe={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Hn={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},bv="pdfjs_internal_editor_",bt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101,COMMENT:102},Lt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},Sv={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},_e={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},oo={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ee={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Ns={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Co={ERRORS:0,WARNINGS:1,INFOS:5},mo={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Za={moveTo:0,lineTo:1,curveTo:2,closePath:3},Ev={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Rl=Co.WARNINGS;function e_(s){Number.isInteger(s)&&(Rl=s)}function n_(){return Rl}function Ll(s){Rl>=Co.INFOS&&console.log(`Info: ${s}`)}function St(s){Rl>=Co.WARNINGS&&console.log(`Warning: ${s}`)}function Ot(s){throw new Error(s)}function ce(s,t){s||Ot(t)}function i_(s){switch(s?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function bd(s,t=null,e=null){if(!s)return null;if(e&&typeof s=="string"&&(e.addDefaultProtocol&&s.startsWith("www.")&&s.match(/\./g)?.length>=2&&(s=`http://${s}`),e.tryConvertEncoding))try{s=l_(s)}catch{}const n=t?URL.parse(s,t):URL.parse(s);return i_(n)?n:null}function Sd(s,t,e=!1){const n=URL.parse(s);return n?(n.hash=t,n.href):e&&bd(s,"http://example.com")?s.split("#",1)[0]+`${t?`#${t}`:""}`:""}function _t(s,t,e,n=!1){return Object.defineProperty(s,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const cs=(function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t})();class ay extends cs{constructor(t,e){super(t,"PasswordException"),this.code=e}}class Zu extends cs{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class xl extends cs{constructor(t){super(t,"InvalidPDFException")}}class go extends cs{constructor(t,e,n){super(t,"ResponseException"),this.status=e,this.missing=n}}class s_ extends cs{constructor(t){super(t,"FormatError")}}class ri extends cs{constructor(t){super(t,"AbortException")}}function Cv(s){(typeof s!="object"||s?.length===void 0)&&Ot("Invalid argument for bytesToString");const t=s.length,e=8192;if(t<e)return String.fromCharCode.apply(null,s);const n=[];for(let r=0;r<t;r+=e){const a=Math.min(r+e,t),l=s.subarray(r,a);n.push(String.fromCharCode.apply(null,l))}return n.join("")}function _o(s){typeof s!="string"&&Ot("Invalid argument for stringToBytes");const t=s.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=s.charCodeAt(n)&255;return e}function r_(s){return String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255)}function o_(){const s=new Uint8Array(4);return s[0]=1,new Uint32Array(s.buffer,0,1)[0]===1}function a_(){try{return new Function(""),!0}catch{return!1}}class ve{static get isLittleEndian(){return _t(this,"isLittleEndian",o_())}static get isEvalSupported(){return _t(this,"isEvalSupported",a_())}static get isOffscreenCanvasSupported(){return _t(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return _t(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return _t(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){return _t(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Ju=Array.from(Array(256).keys(),s=>s.toString(16).padStart(2,"0"));class ct{static makeHexColor(t,e,n){return`#${Ju[t]}${Ju[e]}${Ju[n]}`}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e,n=0){const r=t[n],a=t[n+1];t[n]=r*e[0]+a*e[2]+e[4],t[n+1]=r*e[1]+a*e[3]+e[5]}static applyTransformToBezier(t,e,n=0){const r=e[0],a=e[1],l=e[2],c=e[3],h=e[4],d=e[5];for(let p=0;p<6;p+=2){const m=t[n+p],y=t[n+p+1];t[n+p]=m*r+y*l+h,t[n+p+1]=m*a+y*c+d}}static applyInverseTransform(t,e){const n=t[0],r=t[1],a=e[0]*e[3]-e[1]*e[2];t[0]=(n*e[3]-r*e[2]+e[2]*e[5]-e[4]*e[3])/a,t[1]=(-n*e[1]+r*e[0]+e[4]*e[1]-e[5]*e[0])/a}static axialAlignedBoundingBox(t,e,n){const r=e[0],a=e[1],l=e[2],c=e[3],h=e[4],d=e[5],p=t[0],m=t[1],y=t[2],w=t[3];let A=r*p+h,x=A,E=r*y+h,S=E,_=c*m+d,C=_,R=c*w+d,k=R;if(a!==0||l!==0){const I=a*p,D=a*y,B=l*m,H=l*w;A+=B,S+=B,E+=H,x+=H,_+=I,k+=I,R+=D,C+=D}n[0]=Math.min(n[0],A,E,x,S),n[1]=Math.min(n[1],_,R,C,k),n[2]=Math.max(n[2],A,E,x,S),n[3]=Math.max(n[3],_,R,C,k)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const n=t[0],r=t[1],a=t[2],l=t[3],c=n**2+r**2,h=n*a+r*l,d=a**2+l**2,p=(c+d)/2,m=Math.sqrt(p**2-(c*d-h**2));e[0]=Math.sqrt(p+m||1),e[1]=Math.sqrt(p-m||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>r)return null;const a=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),l=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return a>l?null:[n,a,r,l]}static pointBoundingBox(t,e,n){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}static rectBoundingBox(t,e,n,r,a){a[0]=Math.min(a[0],t,n),a[1]=Math.min(a[1],e,r),a[2]=Math.max(a[2],t,n),a[3]=Math.max(a[3],e,r)}static#t(t,e,n,r,a,l,c,h,d,p){if(d<=0||d>=1)return;const m=1-d,y=d*d,w=y*d,A=m*(m*(m*t+3*d*e)+3*y*n)+w*r,x=m*(m*(m*a+3*d*l)+3*y*c)+w*h;p[0]=Math.min(p[0],A),p[1]=Math.min(p[1],x),p[2]=Math.max(p[2],A),p[3]=Math.max(p[3],x)}static#e(t,e,n,r,a,l,c,h,d,p,m,y){if(Math.abs(d)<1e-12){Math.abs(p)>=1e-12&&this.#t(t,e,n,r,a,l,c,h,-m/p,y);return}const w=p**2-4*m*d;if(w<0)return;const A=Math.sqrt(w),x=2*d;this.#t(t,e,n,r,a,l,c,h,(-p+A)/x,y),this.#t(t,e,n,r,a,l,c,h,(-p-A)/x,y)}static bezierBoundingBox(t,e,n,r,a,l,c,h,d){d[0]=Math.min(d[0],t,c),d[1]=Math.min(d[1],e,h),d[2]=Math.max(d[2],t,c),d[3]=Math.max(d[3],e,h),this.#e(t,n,a,c,e,r,l,h,3*(-t+3*(n-a)+c),6*(t-2*n+a),3*(n-t),d),this.#e(t,n,a,c,e,r,l,h,3*(-e+3*(r-l)+h),6*(e-2*r+l),3*(r-e),d)}}function l_(s){return decodeURIComponent(escape(s))}let th=null,ly=null;function _v(s){return th||(th=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,ly=new Map([["","t"]])),s.replaceAll(th,(t,e,n)=>e?e.normalize("NFKC"):ly.get(n))}function Ed(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const s=new Uint8Array(32);return crypto.getRandomValues(s),Cv(s)}const Cd="pdfjs_internal_id_";function c_(s,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[n,r,...a]=e;if(!s(n)&&!Number.isInteger(n)||!t(r))return!1;const l=a.length;let c=!0;switch(r.name){case"XYZ":if(l<2||l>3)return!1;break;case"Fit":case"FitB":return l===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(l>1)return!1;break;case"FitR":if(l!==4)return!1;c=!1;break;default:return!1}for(const h of a)if(!(typeof h=="number"||c&&h===null))return!1;return!0}function Te(s,t,e){return Math.min(Math.max(s,t),e)}function Tv(s){return Uint8Array.prototype.toBase64?s.toBase64():btoa(Cv(s))}function u_(s){return Uint8Array.fromBase64?Uint8Array.fromBase64(s):_o(atob(s))}typeof Promise.try!="function"&&(Promise.try=function(s,...t){return new Promise(e=>{e(s(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(s){return s.reduce((t,e)=>t+e,0)});const ni="http://www.w3.org/2000/svg";class os{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function sr(s,t="text"){if(Qr(s,document.baseURI)){const e=await fetch(s);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const r=new XMLHttpRequest;r.open("GET",s,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(r.response);return}e(r.responseText);return}n(new Error(r.statusText))}},r.send(null)})}class To{constructor({viewBox:t,userUnit:e,scale:n,rotation:r,offsetX:a=0,offsetY:l=0,dontFlip:c=!1}){this.viewBox=t,this.userUnit=e,this.scale=n,this.rotation=r,this.offsetX=a,this.offsetY=l,n*=e;const h=(t[2]+t[0])/2,d=(t[3]+t[1])/2;let p,m,y,w;switch(r%=360,r<0&&(r+=360),r){case 180:p=-1,m=0,y=0,w=1;break;case 90:p=0,m=1,y=1,w=0;break;case 270:p=0,m=-1,y=-1,w=0;break;case 0:p=1,m=0,y=0,w=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(y=-y,w=-w);let A,x,E,S;p===0?(A=Math.abs(d-t[1])*n+a,x=Math.abs(h-t[0])*n+l,E=(t[3]-t[1])*n,S=(t[2]-t[0])*n):(A=Math.abs(h-t[0])*n+a,x=Math.abs(d-t[1])*n+l,E=(t[2]-t[0])*n,S=(t[3]-t[1])*n),this.transform=[p*n,m*n,y*n,w*n,A-p*n*h-y*n*d,x-m*n*h-w*n*d],this.width=E,this.height=S}get rawDims(){const t=this.viewBox;return _t(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:r=this.offsetY,dontFlip:a=!1}={}){return new To({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:r,dontFlip:a})}convertToViewportPoint(t,e){const n=[t,e];return ct.applyTransform(n,this.transform),n}convertToViewportRectangle(t){const e=[t[0],t[1]];ct.applyTransform(e,this.transform);const n=[t[2],t[3]];return ct.applyTransform(n,this.transform),[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){const n=[t,e];return ct.applyInverseTransform(n,this.transform),n}}class Ml extends cs{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function Po(s){const t=s.length;let e=0;for(;e<t&&s[e].trim()==="";)e++;return s.substring(e,e+5).toLowerCase()==="data:"}function Il(s){return typeof s=="string"&&/\.pdf$/i.test(s)}function Pv(s){return[s]=s.split(/[#?]/,1),s.substring(s.lastIndexOf("/")+1)}function kv(s,t="document.pdf"){if(typeof s!="string")return t;if(Po(s))return St('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=(c=>{try{return new URL(c)}catch{try{return new URL(decodeURIComponent(c))}catch{try{return new URL(c,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(c),"https://foo.bar")}catch{return null}}}}})(s);if(!n)return t;const r=c=>{try{let h=decodeURIComponent(c);return h.includes("/")?(h=h.split("/").at(-1),h.test(/^\.pdf$/i)?h:c):h}catch{return c}},a=/\.pdf$/i,l=n.pathname.split("/").at(-1);if(a.test(l))return r(l);if(n.searchParams.size>0){const c=Array.from(n.searchParams.values()).reverse();for(const d of c)if(a.test(d))return r(d);const h=Array.from(n.searchParams.keys()).reverse();for(const d of h)if(a.test(d))return r(d)}if(n.hash){const h=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(h)return r(h[0])}return t}class cy{started=Object.create(null);times=[];time(t){t in this.started&&St(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||St(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:r,end:a}of this.times)t.push(`${n.padEnd(e)} ${a-r}ms
`);return t.join("")}}function Qr(s,t){const e=t?URL.parse(s,t):URL.parse(s);return e?.protocol==="http:"||e?.protocol==="https:"}function tn(s){s.preventDefault()}function se(s){s.preventDefault(),s.stopPropagation()}function h_(s){console.log("Deprecated API usage: "+s)}class Al{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=this.#t.exec(t);if(!e)return null;const n=parseInt(e[1],10);let r=parseInt(e[2],10);r=r>=1&&r<=12?r-1:0;let a=parseInt(e[3],10);a=a>=1&&a<=31?a:1;let l=parseInt(e[4],10);l=l>=0&&l<=23?l:0;let c=parseInt(e[5],10);c=c>=0&&c<=59?c:0;let h=parseInt(e[6],10);h=h>=0&&h<=59?h:0;const d=e[7]||"Z";let p=parseInt(e[8],10);p=p>=0&&p<=23?p:0;let m=parseInt(e[9],10)||0;return m=m>=0&&m<=59?m:0,d==="-"?(l+=p,c+=m):d==="+"&&(l-=p,c-=m),new Date(Date.UTC(n,r,a,l,c,h))}}function Rv(s,{scale:t=1,rotation:e=0}){const{width:n,height:r}=s.attributes.style,a=[0,0,parseInt(n),parseInt(r)];return new To({viewBox:a,userUnit:1,scale:t,rotation:e})}function ko(s){if(s.startsWith("#")){const t=parseInt(s.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return s.startsWith("rgb(")?s.slice(4,-1).split(",").map(t=>parseInt(t)):s.startsWith("rgba(")?s.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(St(`Not a valid color format: "${s}"`),[0,0,0])}function d_(s){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of s.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;s.set(e,ko(n))}t.remove()}function Xt(s){const{a:t,b:e,c:n,d:r,e:a,f:l}=s.getTransform();return[t,e,n,r,a,l]}function On(s){const{a:t,b:e,c:n,d:r,e:a,f:l}=s.getTransform().invertSelf();return[t,e,n,r,a,l]}function Li(s,t,e=!1,n=!0){if(t instanceof To){const{pageWidth:r,pageHeight:a}=t.rawDims,{style:l}=s,c=ve.isCSSRoundSupported,h=`var(--total-scale-factor) * ${r}px`,d=`var(--total-scale-factor) * ${a}px`,p=c?`round(down, ${h}, var(--scale-round-x))`:`calc(${h})`,m=c?`round(down, ${d}, var(--scale-round-y))`:`calc(${d})`;!e||t.rotation%180===0?(l.width=p,l.height=m):(l.width=m,l.height=p)}n&&s.setAttribute("data-main-rotation",t.rotation)}class Pn{constructor(){const{pixelRatio:t}=Pn;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,n,r,a=-1){let l=1/0,c=1/0,h=1/0;n=Pn.capPixels(n,a),n>0&&(l=Math.sqrt(n/(t*e))),r!==-1&&(c=r/t,h=r/e);const d=Math.min(l,c,h);return this.sx>d||this.sy>d?(this.sx=d,this.sy=d,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,n):n}return t}}const bl=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class ao{#t=null;#e=null;#n;#i=null;#r=null;#s=null;#o=null;static#a=null;constructor(t){this.#n=t,ao.#a||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=this.#n._uiManager._signal;t.addEventListener("contextmenu",tn,{signal:e}),t.addEventListener("pointerdown",ao.#u,{signal:e});const n=this.#i=document.createElement("div");n.className="buttons",t.append(n);const r=this.#n.toolbarPosition;if(r){const{style:a}=t,l=this.#n._uiManager.direction==="ltr"?1-r[0]:r[0];a.insetInlineEnd=`${100*l}%`,a.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#u(t){t.stopPropagation()}#c(t){this.#n._focusEventsAllowed=!1,se(t)}#d(t){this.#n._focusEventsAllowed=!0,se(t)}#l(t){const e=this.#n._uiManager._signal;t.addEventListener("focusin",this.#c.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#d.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",tn,{signal:e})}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#r?.shown(),this.#s?.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=this.#n,n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",ao.#a[t]),this.#l(n),n.addEventListener("click",r=>{e.delete()},{signal:e._signal}),this.#i.append(n)}get#p(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const e=await t.render();this.#l(e),this.#i.append(e,this.#p),this.#r=t}addComment(t){if(this.#s)return;const e=t.render();e&&(this.#l(e),this.#i.prepend(e,this.#p),this.#s=t,t.toolbar=this)}addColorPicker(t){if(this.#e)return;this.#e=t;const e=t.renderButton();this.#l(e),this.#i.append(e,this.#p)}async addEditSignatureButton(t){const e=this.#o=await t.renderEditButton(this.#n);this.#l(e),this.#i.append(e,this.#p)}async addButton(t,e){switch(t){case"colorPicker":this.addColorPicker(e);break;case"altText":await this.addAltText(e);break;case"editSignature":await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(e);break}}updateEditSignatureButton(t){this.#o&&(this.#o.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class f_{#t=null;#e=null;#n;constructor(t){this.#n=t}#i(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",tn,{signal:this.#n._signal});const e=this.#t=document.createElement("div");return e.className="buttons",t.append(e),this.#s(),t}#r(t,e){let n=0,r=0;for(const a of t){const l=a.y+a.height;if(l<n)continue;const c=a.x+(e?a.width:0);if(l>n){r=c,n=l;continue}e?c>r&&(r=c):c<r&&(r=c)}return[e?1-r:r,n]}show(t,e,n){const[r,a]=this.#r(e,n),{style:l}=this.#e||=this.#i();t.append(this.#e),l.insetInlineEnd=`${100*r}%`,l.top=`calc(${100*a}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#s(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=this.#n._signal;t.addEventListener("contextmenu",tn,{signal:n}),t.addEventListener("click",()=>{this.#n.highlightSelection("floating_button")},{signal:n}),this.#t.append(t)}}function Lv(s,t,e){for(const n of e)t.addEventListener(n,s[n].bind(s))}class p_{#t=0;get id(){return`${bv}${this.#t++}`}}class _d{#t=Ed();#e=0;#n=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=t;const a=r.decode().then(()=>(n.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return _t(this,"_isSVGFittingCanvas",a)}async#i(t,e){this.#n||=new Map;let n=this.#n.get(t);if(n===null)return null;if(n?.bitmap)return n.refCounter+=1,n;try{n||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let r;if(typeof e=="string"?(n.url=e,r=await sr(e,"blob")):e instanceof File?r=n.file=e:e instanceof Blob&&(r=e),r.type==="image/svg+xml"){const a=_d._isSVGFittingCanvas,l=new FileReader,c=new Image,h=new Promise((d,p)=>{c.onload=()=>{n.bitmap=c,n.isSvg=!0,d()},l.onload=async()=>{const m=n.svgUrl=l.result;c.src=await a?`${m}#svgView(preserveAspectRatio(none))`:m},c.onerror=l.onerror=p});l.readAsDataURL(r),await h}else n.bitmap=await createImageBitmap(r);n.refCounter=1}catch(r){St(r),n=null}return this.#n.set(t,n),n&&this.#n.set(n.id,n),n}async getFromFile(t){const{lastModified:e,name:n,size:r,type:a}=t;return this.#i(`${e}_${n}_${r}_${a}`,t)}async getFromUrl(t){return this.#i(t,t)}async getFromBlob(t,e){const n=await e;return this.#i(t,n)}async getFromId(t){this.#n||=new Map;const e=this.#n.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){this.#n||=new Map;let n=this.#n.get(t);if(n?.bitmap)return n.refCounter+=1,n;const r=new OffscreenCanvas(e.width,e.height);return r.getContext("2d").drawImage(e,0,0),n={bitmap:r.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#n.set(t,n),this.#n.set(n.id,n),n}getSvgUrl(t){const e=this.#n.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#n||=new Map;const e=this.#n.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const r=new OffscreenCanvas(n.width,n.height);r.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=r.convertToBlob()}n.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class m_{#t=[];#e=!1;#n;#i=-1;constructor(t=128){this.#n=t}add({cmd:t,undo:e,post:n,mustExec:r,type:a=NaN,overwriteIfSameType:l=!1,keepUndo:c=!1}){if(r&&t(),this.#e)return;const h={cmd:t,undo:e,post:n,type:a};if(this.#i===-1){this.#t.length>0&&(this.#t.length=0),this.#i=0,this.#t.push(h);return}if(l&&this.#t[this.#i].type===a){c&&(h.undo=this.#t[this.#i].undo),this.#t[this.#i]=h;return}const d=this.#i+1;d===this.#n?this.#t.splice(0,1):(this.#i=d,d<this.#t.length&&this.#t.splice(d)),this.#t.push(h)}undo(){if(this.#i===-1)return;this.#e=!0;const{undo:t,post:e}=this.#t[this.#i];t(),e?.(),this.#e=!1,this.#i-=1}redo(){if(this.#i<this.#t.length-1){this.#i+=1,this.#e=!0;const{cmd:t,post:e}=this.#t[this.#i];t(),e?.(),this.#e=!1}}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#t.length-1}cleanType(t){if(this.#i!==-1){for(let e=this.#i;e>=0;e--)if(this.#t[e].type!==t){this.#t.splice(e+1,this.#i-e),this.#i=e;return}this.#t.length=0,this.#i=-1}}destroy(){this.#t=null}}class Ro{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=ve.platform;for(const[n,r,a={}]of t)for(const l of n){const c=l.startsWith("mac+");e&&c?(this.callbacks.set(l.slice(4),{callback:r,options:a}),this.allKeys.add(l.split("+").at(-1))):!e&&!c&&(this.callbacks.set(l,{callback:r,options:a}),this.allKeys.add(l.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(this.#t(e));if(!n)return;const{callback:r,options:{bubbles:a=!1,args:l=[],checker:c=null}}=n;c&&!c(t,e)||(r.bind(t,...l,e)(),a||se(e))}}class Td{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return d_(t),_t(this,"_colors",t)}convert(t){const e=ko(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,r]of this._colors)if(r.every((a,l)=>a===e[l]))return Td._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?ct.makeHexColor(...e):t}}class oi{#t=new AbortController;#e=null;#n=new Map;#i=new Map;#r=null;#s=null;#o=null;#a=new m_;#u=null;#c=null;#d=null;#l=0;#p=new Set;#g=null;#f=null;#h=new Set;_editorUndoBar=null;#m=!1;#w=!1;#y=!1;#A=null;#b=null;#v=null;#E=null;#k=!1;#S=null;#R=new p_;#P=!1;#T=!1;#_=null;#M=null;#O=null;#I=null;#z=null;#C=bt.NONE;#x=new Set;#j=null;#B=null;#H=null;#W=null;#G={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#U=[0,0];#D=null;#N=null;#$=null;#Y=null;#F=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=oi.prototype,e=l=>l.#N.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),n=(l,{target:c})=>{if(c instanceof HTMLInputElement){const{type:h}=c;return h!=="text"&&h!=="number"}return!0},r=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return _t(this,"_keyboardManager",new Ro([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(l,{target:c})=>!(c instanceof HTMLButtonElement)&&l.#N.contains(c)&&!l.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(l,{target:c})=>!(c instanceof HTMLButtonElement)&&l.#N.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}]]))}constructor(t,e,n,r,a,l,c,h,d,p,m,y,w,A,x,E){const S=this._signal=this.#t.signal;this.#N=t,this.#$=e,this.#Y=n,this.#r=r,this.#u=a,this.#B=l,this._eventBus=c,c._on("editingaction",this.onEditingAction.bind(this),{signal:S}),c._on("pagechanging",this.onPageChanging.bind(this),{signal:S}),c._on("scalechanging",this.onScaleChanging.bind(this),{signal:S}),c._on("rotationchanging",this.onRotationChanging.bind(this),{signal:S}),c._on("setpreference",this.onSetPreference.bind(this),{signal:S}),c._on("switchannotationeditorparams",_=>this.updateParams(_.type,_.value),{signal:S}),this.#rt(),this.#ct(),this.#Z(),this.#s=h.annotationStorage,this.#A=h.filterFactory,this.#H=d,this.#E=p||null,this.#m=m,this.#w=y,this.#y=w,this.#z=A||null,this.viewParameters={realScale:os.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=x||null,this._supportsPinchToZoom=E!==!1}destroy(){this.#F?.resolve(),this.#F=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#i.values())t.destroy();this.#i.clear(),this.#n.clear(),this.#h.clear(),this.#I?.clear(),this.#e=null,this.#x.clear(),this.#a.destroy(),this.#r?.destroy(),this.#u?.destroy(),this.#B?.destroy(),this.#S?.hide(),this.#S=null,this.#O?.destroy(),this.#O=null,this.#b&&(clearTimeout(this.#b),this.#b=null),this.#D&&(clearTimeout(this.#D),this.#D=null),this._editorUndoBar?.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#z}get useNewAltTextFlow(){return this.#w}get useNewAltTextWhenAddingImage(){return this.#y}get hcmFilter(){return _t(this,"hcmFilter",this.#H?this.#A.addHCMFilter(this.#H.foreground,this.#H.background):"none")}get direction(){return _t(this,"direction",getComputedStyle(this.#N).direction)}get _highlightColors(){return _t(this,"_highlightColors",this.#E?new Map(this.#E.split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return _t(this,"highlightColors",null);const e=new Map,n=!!this.#H;for(const[r,a]of t){const l=r.endsWith("_HCM");if(n&&l){e.set(r.replace("_HCM",""),a);continue}!n&&!l&&e.set(r,a)}return _t(this,"highlightColors",e)}get highlightColorNames(){return _t(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#d=t}setMainHighlightColorPicker(t){this.#O=t}editAltText(t,e=!1){this.#r?.editAltText(this,t,e)}hasCommentManager(){return!!this.#u}editComment(t,e){this.#u?.open(this,t,e)}getSignature(t){this.#B?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#B}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":this.#y=e;break}}onPageChanging({pageNumber:t}){this.#l=t-1}focusMainContainer(){this.#N.focus()}findParent(t,e){for(const n of this.#i.values()){const{x:r,y:a,width:l,height:c}=n.div.getBoundingClientRect();if(t>=r&&t<=r+l&&e>=a&&e<=a+c)return n}return null}disableUserSelect(t=!1){this.#$.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#h.add(t)}removeShouldRescale(t){this.#h.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*os.PDF_TO_CSS_UNITS;for(const e of this.#h)e.onScaleChanging();this.#d?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#K({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#Q(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of this.#i.values())if(n.hasTextLayer(t))return n;return null}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:n,anchorOffset:r,focusNode:a,focusOffset:l}=e,c=e.toString(),d=this.#K(e).closest(".textLayer"),p=this.getSelectionBoxes(d);if(!p)return;e.empty();const m=this.#Q(d),y=this.#C===bt.NONE,w=()=>{m?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:p,anchorNode:n,anchorOffset:r,focusNode:a,focusOffset:l,text:c}),y&&this.showAllEditors("highlight",!0,!0)};if(y){this.switchToMode(bt.HIGHLIGHT,w);return}w()}#it(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=this.#K(t).closest(".textLayer"),r=this.getSelectionBoxes(n);r&&(this.#S||=new f_(this),this.#S.show(n,r,this.direction==="ltr"))}addToAnnotationStorage(t){!t.isEmpty()&&this.#s&&!this.#s.has(t.id)&&this.#s.setValue(t.id,t)}a11yAlert(t,e=null){const n=this.#Y;n&&(n.setAttribute("data-l10n-id",t),e?n.setAttribute("data-l10n-args",JSON.stringify(e)):n.removeAttribute("data-l10n-args"))}#st(){const t=document.getSelection();if(!t||t.isCollapsed){this.#j&&(this.#S?.hide(),this.#j=null,this.#L({hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===this.#j)return;const r=this.#K(t).closest(".textLayer");if(!r){this.#j&&(this.#S?.hide(),this.#j=null,this.#L({hasSelectedText:!1}));return}if(this.#S?.hide(),this.#j=e,this.#L({hasSelectedText:!0}),!(this.#C!==bt.HIGHLIGHT&&this.#C!==bt.NONE)&&(this.#C===bt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#k=this.isShiftKeyDown,!this.isShiftKeyDown)){const a=this.#C===bt.HIGHLIGHT?this.#Q(r):null;a?.toggleDrawing();const l=new AbortController,c=this.combinedSignal(l),h=d=>{d.type==="pointerup"&&d.button!==0||(l.abort(),a?.toggleDrawing(!0),d.type==="pointerup"&&this.#q("main_toolbar"))};window.addEventListener("pointerup",h,{signal:c}),window.addEventListener("blur",h,{signal:c})}}#q(t=""){this.#C===bt.HIGHLIGHT?this.highlightSelection(t):this.#m&&this.#it()}#rt(){document.addEventListener("selectionchange",this.#st.bind(this),{signal:this._signal})}#ot(){if(this.#v)return;this.#v=new AbortController;const t=this.combinedSignal(this.#v);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#at(){this.#v?.abort(),this.#v=null}blur(){if(this.isShiftKeyDown=!1,this.#k&&(this.#k=!1,this.#q("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#x)if(e.div.contains(t)){this.#M=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#M)return;const[t,e]=this.#M;this.#M=null,e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}#Z(){if(this.#_)return;this.#_=new AbortController;const t=this.combinedSignal(this.#_);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#lt(){this.#_?.abort(),this.#_=null}#J(){if(this.#c)return;this.#c=new AbortController;const t=this.combinedSignal(this.#c);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#tt(){this.#c?.abort(),this.#c=null}#ct(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#Z(),this.#J()}removeEditListeners(){this.#lt(),this.#tt()}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of this.#f)if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of this.#f)if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const n of this.#x){const r=n.serialize(!0);r&&e.push(r)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const a of e.items)for(const l of this.#f)if(l.isHandlingMimeForPasting(a.type)){l.paste(a,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(a){St(`paste: "${a.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const r=this.currentLayer;try{const a=[];for(const h of n){const d=await r.deserialize(h);if(!d)return;a.push(d)}const l=()=>{for(const h of a)this.#et(h);this.#nt(a)},c=()=>{for(const h of a)h.remove()};this.addCommands({cmd:l,undo:c,mustExec:!0})}catch(a){St(`paste: "${a.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#C!==bt.NONE&&!this.isEditorHandlingKeyboard&&oi._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#k&&(this.#k=!1,this.#q("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}#L(t){Object.entries(t).some(([n,r])=>this.#G[n]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#G,t)}),this.#C===bt.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#V([[Lt.HIGHLIGHT_FREE,!0]]))}#V(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#ot(),this.#J(),this.#L({isEditing:this.#C!==bt.NONE,isEmpty:this.#X(),hasSomethingToUndo:this.#a.hasSomethingToUndo(),hasSomethingToRedo:this.#a.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#at(),this.#tt(),this.#L({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#f){this.#f=t;for(const e of this.#f)this.#V(e.defaultPropertiesToUpdate)}}getId(){return this.#R.id}get currentLayer(){return this.#i.get(this.#l)}getLayer(t){return this.#i.get(t)}get currentPageIndex(){return this.#l}addLayer(t){this.#i.set(t.pageIndex,t),this.#P?t.enable():t.disable()}removeLayer(t){this.#i.delete(t.pageIndex)}async updateMode(t,e=null,n=!1,r=!1,a=!1){if(this.#C!==t&&!(this.#F&&(await this.#F.promise,!this.#F))){if(this.#F=Promise.withResolvers(),this.#d?.commitOrRemove(),this.#C=t,t===bt.NONE){this.setEditingState(!1),this.#ht(),this._editorUndoBar?.hide(),this.#F.resolve();return}t===bt.SIGNATURE&&await this.#B?.loadSignatures(),this.setEditingState(!0),await this.#ut(),this.unselectAll();for(const l of this.#i.values())l.updateMode(t);if(!e){n&&this.addNewEditorFromKeyboard(),this.#F.resolve();return}for(const l of this.#n.values())l.annotationElementId===e||l.id===e?(this.setSelected(l),a?l.editComment():r&&l.enterInEditMode()):l.unselect();this.#F.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#C&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(this.#f){switch(t){case Lt.CREATE:this.currentLayer.addNewEditor(e);return;case Lt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#W||=new Map).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const n of this.#x)n.updateParams(t,e);else for(const n of this.#f)n.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){for(const a of this.#n.values())a.editorType===t&&a.show(e);(this.#W?.get(Lt.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#V([[Lt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#T!==t){this.#T=t;for(const e of this.#i.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}async#ut(){if(!this.#P){this.#P=!0;const t=[];for(const e of this.#i.values())t.push(e.enable());await Promise.all(t);for(const e of this.#n.values())e.enable()}}#ht(){if(this.unselectAll(),this.#P){this.#P=!1;for(const t of this.#i.values())t.disable();for(const t of this.#n.values())t.disable()}}getEditors(t){const e=[];for(const n of this.#n.values())n.pageIndex===t&&e.push(n);return e}getEditor(t){return this.#n.get(t)}addEditor(t){this.#n.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#b&&clearTimeout(this.#b),this.#b=setTimeout(()=>{this.focusMainContainer(),this.#b=null},0)),this.#n.delete(t.id),t.annotationElementId&&this.#I?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#p.has(t.annotationElementId))&&this.#s?.remove(t.id)}addDeletedAnnotationElement(t){this.#p.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#p.has(t)}removeDeletedAnnotationElement(t){this.#p.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#et(t){const e=this.#i.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#V(t.propertiesToUpdate))}get#dt(){let t=null;for(t of this.#x);return t}updateUI(t){this.#dt===t&&this.#V(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#V(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#x.has(t)){this.#x.delete(t),t.unselect(),this.#L({hasSelectedEditor:this.hasSelection});return}this.#x.add(t),t.select(),this.#V(t.propertiesToUpdate),this.#L({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.id}),this.#d?.commitOrRemove();for(const e of this.#x)e!==t&&e.unselect();this.#x.clear(),this.#x.add(t),t.select(),this.#V(t.propertiesToUpdate),this.#L({hasSelectedEditor:!0})}isSelected(t){return this.#x.has(t)}get firstSelectedEditor(){return this.#x.values().next().value}unselect(t){t.unselect(),this.#x.delete(t),this.#L({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#x.size!==0}get isEnterHandled(){return this.#x.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#a.undo(),this.#L({hasSomethingToUndo:this.#a.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#X()}),this._editorUndoBar?.hide()}redo(){this.#a.redo(),this.#L({hasSomethingToUndo:!0,hasSomethingToRedo:this.#a.hasSomethingToRedo(),isEmpty:this.#X()})}addCommands(t){this.#a.add(t),this.#L({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#X()})}cleanUndoStack(t){this.#a.cleanType(t)}#X(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const t of this.#n.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...this.#x],n=()=>{this._editorUndoBar?.show(r,e.length===1?e[0].editorType:e.length);for(const a of e)a.remove()},r=()=>{for(const a of e)this.#et(a)};this.addCommands({cmd:n,undo:r,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#nt(t){for(const e of this.#x)e.unselect();this.#x.clear();for(const e of t)e.isEmpty()||(this.#x.add(e),e.select());this.#L({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#x)t.commit();this.#nt(this.#n.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#C!==bt.NONE))&&!this.#d?.commitOrRemove()&&this.hasSelection){for(const t of this.#x)t.unselect();this.#x.clear(),this.#L({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;this.#U[0]+=t,this.#U[1]+=e;const[r,a]=this.#U,l=[...this.#x],c=1e3;this.#D&&clearTimeout(this.#D),this.#D=setTimeout(()=>{this.#D=null,this.#U[0]=this.#U[1]=0,this.addCommands({cmd:()=>{for(const h of l)this.#n.has(h.id)&&(h.translateInPage(r,a),h.translationDone())},undo:()=>{for(const h of l)this.#n.has(h.id)&&(h.translateInPage(-r,-a),h.translationDone())},mustExec:!1})},c);for(const h of l)h.translateInPage(t,e),h.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#g=new Map;for(const t of this.#x)this.#g.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#g)return!1;this.disableUserSelect(!1);const t=this.#g;this.#g=null;let e=!1;for(const[{x:r,y:a,pageIndex:l},c]of t)c.newX=r,c.newY=a,c.newPageIndex=l,e||=r!==c.savedX||a!==c.savedY||l!==c.savedPageIndex;if(!e)return!1;const n=(r,a,l,c)=>{if(this.#n.has(r.id)){const h=this.#i.get(c);h?r._setParentAndPosition(h,a,l):(r.pageIndex=c,r.x=a,r.y=l)}};return this.addCommands({cmd:()=>{for(const[r,{newX:a,newY:l,newPageIndex:c}]of t)n(r,a,l,c)},undo:()=>{for(const[r,{savedX:a,savedY:l,savedPageIndex:c}]of t)n(r,a,l,c)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#g)for(const n of this.#g.keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#x.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#C}get imageManager(){return _t(this,"imageManager",new _d)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let d=0,p=e.rangeCount;d<p;d++)if(!t.contains(e.getRangeAt(d).commonAncestorContainer))return null;const{x:n,y:r,width:a,height:l}=t.getBoundingClientRect();let c;switch(t.getAttribute("data-main-rotation")){case"90":c=(d,p,m,y)=>({x:(p-r)/l,y:1-(d+m-n)/a,width:y/l,height:m/a});break;case"180":c=(d,p,m,y)=>({x:1-(d+m-n)/a,y:1-(p+y-r)/l,width:m/a,height:y/l});break;case"270":c=(d,p,m,y)=>({x:1-(p+y-r)/l,y:(d-n)/a,width:y/l,height:m/a});break;default:c=(d,p,m,y)=>({x:(d-n)/a,y:(p-r)/l,width:m/a,height:y/l});break}const h=[];for(let d=0,p=e.rangeCount;d<p;d++){const m=e.getRangeAt(d);if(!m.collapsed)for(const{x:y,y:w,width:A,height:x}of m.getClientRects())A===0||x===0||h.push(c(y,w,A,x))}return h.length===0?null:h}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#o||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const e=this.#o?.get(t.data.id);if(!e)return;const n=this.#s.getRawValue(e);n&&(this.#C===bt.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}setMissingCanvas(t,e,n){const r=this.#I?.get(t);r&&(r.setCanvas(e,n),this.#I.delete(t))}addMissingCanvas(t,e){(this.#I||=new Map).set(t,e)}}class Vn{#t=null;#e=!1;#n=null;#i=null;#r=null;#s=null;#o=!1;#a=null;#u=null;#c=null;#d=null;#l=!1;static#p=null;static _l10n=null;constructor(t){this.#u=t,this.#l=t._uiManager.useNewAltTextFlow,Vn.#p||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){Vn._l10n??=t}async render(){const t=this.#n=document.createElement("button");t.className="altText",t.tabIndex="0";const e=this.#i=document.createElement("span");t.append(e),this.#l?(t.classList.add("new"),t.setAttribute("data-l10n-id",Vn.#p.missing),e.setAttribute("data-l10n-id",Vn.#p["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=this.#u._uiManager._signal;t.addEventListener("contextmenu",tn,{signal:n}),t.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:n});const r=a=>{a.preventDefault(),this.#u._uiManager.editAltText(this.#u),this.#l&&this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#g}})};return t.addEventListener("click",r,{capture:!0,signal:n}),t.addEventListener("keydown",a=>{a.target===t&&a.key==="Enter"&&(this.#o=!0,r(a))},{signal:n}),await this.#f(),t}get#g(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#o}),this.#o=!1)}isEmpty(){return this.#l?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#l?this.#t!==null||!!this.#c:this.isEmpty()}get guessedText(){return this.#c}async setGuessedText(t){this.#t===null&&(this.#c=t,this.#d=await Vn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#f())}toggleAltTextBadge(t=!1){if(!this.#l||this.#t){this.#a?.remove(),this.#a=null;return}if(!this.#a){const e=this.#a=document.createElement("div");e.className="noAltTextBadge",this.#u.div.append(e)}this.#a.classList.toggle("hidden",!t)}serialize(t){let e=this.#t;return!t&&this.#c===e&&(e=this.#d),{altText:e,decorative:this.#e,guessedText:this.#c,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:r,cancel:a=!1}){n&&(this.#c=n,this.#d=r),!(this.#t===t&&this.#e===e)&&(a||(this.#t=t,this.#e=e),this.#f())}toggle(t=!1){this.#n&&(!t&&this.#s&&(clearTimeout(this.#s),this.#s=null),this.#n.disabled=!t)}shown(){this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#g}})}destroy(){this.#n?.remove(),this.#n=null,this.#i=null,this.#r=null,this.#a?.remove(),this.#a=null}async#f(){const t=this.#n;if(!t)return;if(this.#l){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",Vn.#p[this.#g]),this.#i?.setAttribute("data-l10n-id",Vn.#p[`${this.#g}-label`]),!this.#t){this.#r?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#r?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=this.#r;if(!e){this.#r=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${this.#u.id}`;const r=100,a=this.#u._uiManager._signal;a.addEventListener("abort",()=>{clearTimeout(this.#s),this.#s=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#s=setTimeout(()=>{this.#s=null,this.#r.classList.add("show"),this.#u._reportTelemetry({action:"alt_text_tooltip"})},r)},{signal:a}),t.addEventListener("mouseleave",()=>{this.#s&&(clearTimeout(this.#s),this.#s=null),this.#r?.classList.remove("show")},{signal:a})}this.#e?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=this.#t),e.parentNode||t.append(e),this.#u.getElementForAltText()?.setAttribute("aria-describedby",e.id)}}class Ja{#t=null;#e=!1;#n=null;#i=null;#r=null;#s=null;#o=!1;constructor(t){this.#n=t,this.toolbar=null}render(){if(!this.#n._uiManager.hasCommentManager())return null;const t=this.#t=document.createElement("button");t.className="comment",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button");const e=this.#n._uiManager._signal;t.addEventListener("contextmenu",tn,{signal:e}),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:e});const n=r=>{r.preventDefault(),this.edit()};return t.addEventListener("click",n,{capture:!0,signal:e}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(this.#e=!0,n(r))},{signal:e}),t}edit(){const{bottom:t,left:e,right:n}=this.#n.getClientDimensions(),r={top:t};this.#n._uiManager.direction==="ltr"?r.right=n:r.left=e,this.#n._uiManager.editComment(this.#n,r)}finish(){this.#t&&(this.#t.focus({focusVisible:this.#e}),this.#e=!1)}isDeleted(){return this.#o||this.#r===""}hasBeenEdited(){return this.isDeleted()||this.#r!==this.#i}serialize(){return this.data}get data(){return{text:this.#r,date:this.#s,deleted:this.#o}}set data(t){if(t===null){this.#r="",this.#o=!0;return}this.#r=t,this.#s=new Date,this.#o=!1}setInitialText(t){this.#i=t,this.data=t}toggle(t=!1){this.#t&&(this.#t.disabled=!t)}shown(){}destroy(){this.#t?.remove(),this.#t=null,this.#r="",this.#s=null,this.#n=null,this.#e=!1,this.#o=!1}}class Lo{#t;#e=!1;#n=null;#i;#r;#s;#o;#a=null;#u;#c=null;#d;#l=null;constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:n=null,onPinchStart:r=null,onPinching:a=null,onPinchEnd:l=null,signal:c}){this.#t=t,this.#n=n,this.#i=e,this.#r=r,this.#s=a,this.#o=l,this.#d=new AbortController,this.#u=AbortSignal.any([c,this.#d.signal]),t.addEventListener("touchstart",this.#p.bind(this),{passive:!1,signal:this.#u})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Pn.pixelRatio}#p(t){if(this.#i?.())return;if(t.touches.length===1){if(this.#a)return;const r=this.#a=new AbortController,a=AbortSignal.any([this.#u,r.signal]),l=this.#t,c={capture:!0,signal:a,passive:!1},h=d=>{d.pointerType==="touch"&&(this.#a?.abort(),this.#a=null)};l.addEventListener("pointerdown",d=>{d.pointerType==="touch"&&(se(d),h(d))},c),l.addEventListener("pointerup",h,c),l.addEventListener("pointercancel",h,c);return}if(!this.#l){this.#l=new AbortController;const r=AbortSignal.any([this.#u,this.#l.signal]),a=this.#t,l={signal:r,capture:!1,passive:!1};a.addEventListener("touchmove",this.#g.bind(this),l);const c=this.#f.bind(this);a.addEventListener("touchend",c,l),a.addEventListener("touchcancel",c,l),l.capture=!0,a.addEventListener("pointerdown",se,l),a.addEventListener("pointermove",se,l),a.addEventListener("pointercancel",se,l),a.addEventListener("pointerup",se,l),this.#r?.()}if(se(t),t.touches.length!==2||this.#n?.()){this.#c=null;return}let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]),this.#c={touch0X:e.screenX,touch0Y:e.screenY,touch1X:n.screenX,touch1Y:n.screenY}}#g(t){if(!this.#c||t.touches.length!==2)return;se(t);let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]);const{screenX:r,screenY:a}=e,{screenX:l,screenY:c}=n,h=this.#c,{touch0X:d,touch0Y:p,touch1X:m,touch1Y:y}=h,w=m-d,A=y-p,x=l-r,E=c-a,S=Math.hypot(x,E)||1,_=Math.hypot(w,A)||1;if(!this.#e&&Math.abs(_-S)<=Lo.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(h.touch0X=r,h.touch0Y=a,h.touch1X=l,h.touch1Y=c,!this.#e){this.#e=!0;return}const C=[(r+l)/2,(a+c)/2];this.#s?.(C,_,S)}#f(t){t.touches.length>=2||(this.#l&&(this.#l.abort(),this.#l=null,this.#o?.()),this.#c&&(se(t),this.#c=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#a?.abort(),this.#a=null}}class mt{#t=null;#e=null;#n=null;#i=null;#r=!1;#s=null;#o="";#a=!1;#u=null;#c=null;#d=null;#l=null;#p="";#g=!1;#f=null;#h=!1;#m=!1;#w=!1;#y=null;#A=0;#b=0;#v=null;#E=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#k=!1;#S=mt._zIndex++;static _borderLineWidth=-1;static _colorManager=new Td;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=mt.prototype._resizeWithKeyboard,e=oi.TRANSLATE_SMALL,n=oi.TRANSLATE_BIG;return _t(this,"_resizerKeyboardManager",new Ro([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],mt.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null;const{rotation:e,rawDims:{pageWidth:n,pageHeight:r,pageX:a,pageY:l}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,r],this.pageTranslation=[a,l];const[c,h]=this.parentDimensions;this.x=t.x/c,this.y=t.y/h,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return _t(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new g_({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(mt._l10n??=t,mt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),mt._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);mt._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Ot("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#k}set _isDraggable(t){this.#k=t,this.div?.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#S}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):this.#$(),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#g?this.#g=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,r){const[a,l]=this.parentDimensions;[n,r]=this.screenToPageTranslation(n,r),this.x=(t+n)/a,this.y=(e+r)/l,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[n,r]=this.parentDimensions;this.setAt(t*n,e*r,this.width*n,this.height*r),this._onTranslated()}#R([t,e],n,r){[n,r]=this.screenToPageTranslation(n,r),this.x+=n/t,this.y+=r/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#R(this.parentDimensions,t,e)}translateInPage(t,e){this.#f||=[this.x,this.y,this.width,this.height],this.#R(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){this.#f||=[this.x,this.y,this.width,this.height];const{div:n,parentDimensions:[r,a]}=this;if(this.x+=t/r,this.y+=e/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:m,y}=this.div.getBoundingClientRect();this.parent.findNewParent(this,m,y)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:c}=this;const[h,d]=this.getBaseTranslation();l+=h,c+=d;const{style:p}=n;p.left=`${(100*l).toFixed(2)}%`,p.top=`${(100*c).toFixed(2)}%`,this._onTranslating(l,c),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#f&&(this.#f[0]!==this.x||this.#f[1]!==this.y)}get _hasBeenResized(){return!!this.#f&&(this.#f[2]!==this.width||this.#f[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=mt,r=n/t,a=n/e;switch(this.rotation){case 90:return[-r,a];case 180:return[r,a];case 270:return[r,-a];default:return[-r,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[n,r]}=this;let{x:a,y:l,width:c,height:h}=this;if(c*=n,h*=r,a*=n,l*=r,this._mustFixPosition)switch(t){case 0:a=Te(a,0,n-c),l=Te(l,0,r-h);break;case 90:a=Te(a,0,n-h),l=Te(l,c,r);break;case 180:a=Te(a,c,n),l=Te(l,h,r);break;case 270:a=Te(a,h,n),l=Te(l,0,r-c);break}this.x=a/=n,this.y=l/=r;const[d,p]=this.getBaseTranslation();a+=d,l+=p,e.left=`${(100*a).toFixed(2)}%`,e.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}static#P(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return mt.#P(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return mt.#P(t,e,360-this.parentRotation)}#T(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(t,e){const[n,r]=this.parentDimensions,{style:a}=this.div;a.width=`${(100*t/n).toFixed(2)}%`,this.#a||(a.height=`${(100*e/r).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:n}=t,r=n.endsWith("%"),a=!this.#a&&e.endsWith("%");if(r&&a)return;const[l,c]=this.parentDimensions;r||(t.width=`${(100*parseFloat(n)/l).toFixed(2)}%`),!this.#a&&!a&&(t.height=`${(100*parseFloat(e)/c).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#_(){if(this.#u)return;this.#u=document.createElement("div"),this.#u.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const r=document.createElement("div");this.#u.append(r),r.classList.add("resizer",n),r.setAttribute("data-resizer-name",n),r.addEventListener("pointerdown",this.#M.bind(this,n),{signal:e}),r.addEventListener("contextmenu",tn,{signal:e}),r.tabIndex=-1}this.div.prepend(this.#u)}#M(t,e){e.preventDefault();const{isMac:n}=ve.platform;if(e.button!==0||e.ctrlKey&&n)return;this.#n?.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,this.#c=[e.screenX,e.screenY];const a=new AbortController,l=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#z.bind(this,t),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",se,{passive:!1,signal:l}),window.addEventListener("contextmenu",tn,{signal:l}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const c=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const d=()=>{a.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=c,this.div.style.cursor=h,this.#I()};window.addEventListener("pointerup",d,{signal:l}),window.addEventListener("blur",d,{signal:l})}#O(t,e,n,r){this.width=n,this.height=r,this.x=t,this.y=e;const[a,l]=this.parentDimensions;this.setDims(a*n,l*r),this.fixAndSetPosition(),this._onResized()}_onResized(){}#I(){if(!this.#d)return;const{savedX:t,savedY:e,savedWidth:n,savedHeight:r}=this.#d;this.#d=null;const a=this.x,l=this.y,c=this.width,h=this.height;a===t&&l===e&&c===n&&h===r||this.addCommands({cmd:this.#O.bind(this,a,l,c,h),undo:this.#O.bind(this,t,e,n,r),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#z(t,e){const[n,r]=this.parentDimensions,a=this.x,l=this.y,c=this.width,h=this.height,d=mt.MIN_SIZE/n,p=mt.MIN_SIZE/r,m=this.#T(this.rotation),y=(q,U)=>[m[0]*q+m[2]*U,m[1]*q+m[3]*U],w=this.#T(360-this.rotation),A=(q,U)=>[w[0]*q+w[2]*U,w[1]*q+w[3]*U];let x,E,S=!1,_=!1;switch(t){case"topLeft":S=!0,x=(q,U)=>[0,0],E=(q,U)=>[q,U];break;case"topMiddle":x=(q,U)=>[q/2,0],E=(q,U)=>[q/2,U];break;case"topRight":S=!0,x=(q,U)=>[q,0],E=(q,U)=>[0,U];break;case"middleRight":_=!0,x=(q,U)=>[q,U/2],E=(q,U)=>[0,U/2];break;case"bottomRight":S=!0,x=(q,U)=>[q,U],E=(q,U)=>[0,0];break;case"bottomMiddle":x=(q,U)=>[q/2,U],E=(q,U)=>[q/2,0];break;case"bottomLeft":S=!0,x=(q,U)=>[0,U],E=(q,U)=>[q,0];break;case"middleLeft":_=!0,x=(q,U)=>[0,U/2],E=(q,U)=>[q,U/2];break}const C=x(c,h),R=E(c,h);let k=y(...R);const I=mt._round(a+k[0]),D=mt._round(l+k[1]);let B=1,H=1,G,Q;if(e.fromKeyboard)({deltaX:G,deltaY:Q}=e);else{const{screenX:q,screenY:U}=e,[$,J]=this.#c;[G,Q]=this.screenToPageTranslation(q-$,U-J),this.#c[0]=q,this.#c[1]=U}if([G,Q]=A(G/n,Q/r),S){const q=Math.hypot(c,h);B=H=Math.max(Math.min(Math.hypot(R[0]-C[0]-G,R[1]-C[1]-Q)/q,1/c,1/h),d/c,p/h)}else _?B=Te(Math.abs(R[0]-C[0]-G),d,1)/c:H=Te(Math.abs(R[1]-C[1]-Q),p,1)/h;const ht=mt._round(c*B),lt=mt._round(h*H);k=y(...E(ht,lt));const et=I-k[0],Et=D-k[1];this.#f||=[this.x,this.y,this.width,this.height],this.width=ht,this.height=lt,this.x=et,this.y=Et,this.setDims(n*ht,r*lt),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#n?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#m)return this._editToolbar;this._editToolbar=new ao(this),this.div.append(this._editToolbar.render()),this._editToolbar.addButton("comment",this.addCommentButton());const{toolbarButtons:t}=this;if(t)for(const[e,n]of t)await this._editToolbar.addButton(e,n);return this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#n?.destroy())}addContainer(t){const e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#n||(Vn.initialize(mt._l10n),this.#n=new Vn(this),this.#t&&(this.#n.data=this.#t,this.#t=null)),this.#n}get altTextData(){return this.#n?.data}set altTextData(t){this.#n&&(this.#n.data=t)}get guessedAltText(){return this.#n?.guessedText}async setGuessedAltText(t){await this.#n?.setGuessedText(t)}serializeAltText(t){return this.#n?.serialize(t)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}addCommentButton(){return this.#i?this.#i:this.#i=new Ja(this)}get commentColor(){return null}get comment(){const t=this.#i;return{text:t.data.text,date:t.data.date,deleted:t.isDeleted(),color:this.commentColor}}set comment(t){this.#i||(this.#i=new Ja(this)),this.#i.data=t}setCommentData(t){this.#i||(this.#i=new Ja(this)),this.#i.setInitialText(t)}get hasEditedComment(){return this.#i?.hasBeenEdited()}async editComment(){this.#i||(this.#i=new Ja(this)),this.#i.edit()}addComment(t){this.hasEditedComment&&(t.popup={contents:this.comment.text,deleted:this.comment.deleted})}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#r?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#W();const[e,n]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*n/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/n).toFixed(2)}%`);const[r,a]=this.getInitialTranslation();return this.translate(r,a),Lv(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#E||=new Lo({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#C.bind(this),onPinching:this.#x.bind(this),onPinchEnd:this.#j.bind(this),signal:this._uiManager._signal})),this._uiManager._editorUndoBar?.hide(),t}#C(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#n?.toggle(!1),this.parent.togglePointerEvents(!1)}#x(t,e,n){let a=.7*(n/e)+1-.7;if(a===1)return;const l=this.#T(this.rotation),c=(I,D)=>[l[0]*I+l[2]*D,l[1]*I+l[3]*D],[h,d]=this.parentDimensions,p=this.x,m=this.y,y=this.width,w=this.height,A=mt.MIN_SIZE/h,x=mt.MIN_SIZE/d;a=Math.max(Math.min(a,1/y,1/w),A/y,x/w);const E=mt._round(y*a),S=mt._round(w*a);if(E===y&&S===w)return;this.#f||=[p,m,y,w];const _=c(y/2,w/2),C=mt._round(p+_[0]),R=mt._round(m+_[1]),k=c(E/2,S/2);this.x=C-k[0],this.y=R-k[1],this.width=E,this.height=S,this.setDims(h*E,d*S),this.fixAndSetPosition(),this._onResizing()}#j(){this.#n?.toggle(!0),this.parent.togglePointerEvents(!0),this.#I()}pointerdown(t){const{isMac:e}=ve.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#g=!0,this._isDraggable){this.#H(t);return}this.#B(t)}#B(t){const{isMac:e}=ve.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#H(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1;const r=new AbortController,a=this._uiManager.combinedSignal(r),l={capture:!0,passive:!1,signal:a},c=d=>{r.abort(),this.#s=null,this.#g=!1,this._uiManager.endDragSession()||this.#B(d),n&&this._onStopDragging()};e&&(this.#A=t.clientX,this.#b=t.clientY,this.#s=t.pointerId,this.#o=t.pointerType,window.addEventListener("pointermove",d=>{n||(n=!0,this._onStartDragging());const{clientX:p,clientY:m,pointerId:y}=d;if(y!==this.#s){se(d);return}const[w,A]=this.screenToPageTranslation(p-this.#A,m-this.#b);this.#A=p,this.#b=m,this._uiManager.dragSelectedEditors(w,A)},l),window.addEventListener("touchmove",se,l),window.addEventListener("pointerdown",d=>{d.pointerType===this.#o&&(this.#E||d.isPrimary)&&c(d),se(d)},l));const h=d=>{if(!this.#s||this.#s===d.pointerId){c(d);return}se(d)};window.addEventListener("pointerup",h,{signal:a}),window.addEventListener("blur",h,{signal:a})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.#y=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,n=this.rotation){const r=this.parentScale,[a,l]=this.pageDimensions,[c,h]=this.pageTranslation,d=t/r,p=e/r,m=this.x*a,y=this.y*l,w=this.width*a,A=this.height*l;switch(n){case 0:return[m+d+c,l-y-p-A+h,m+d+w+c,l-y-p+h];case 90:return[m+p+c,l-y+d+h,m+p+A+c,l-y+d+w+h];case 180:return[m-d-w+c,l-y+p+h,m-d+c,l-y+p+A+h];case 270:return[m-p-A+c,l-y-d-w+h,m-p+c,l-y-d+h];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,r,a,l]=t,c=a-n,h=l-r;switch(this.rotation){case 0:return[n,e-l,c,h];case 90:return[n,e-r,h,c];case 180:return[a,e-r,c,h];case 270:return[a,e-l,h,c];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#m=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#m=!1,!0):!1}isInEditMode(){return this.#m}shouldGetKeyboardEvents(){return this.#w}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:n,right:r}=this.getClientDimensions(),{innerHeight:a,innerWidth:l}=window;return e<l&&r>0&&t<a&&n>0}#W(){if(this.#l||!this.div)return;this.#l=new AbortController;const t=this._uiManager.combinedSignal(this.#l);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#W()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){Ot("An editor must be serializable")}static async deserialize(t,e,n){const r=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n,annotationElementId:t.annotationElementId});r.rotation=t.rotation,r.#t=t.accessibilityData,r._isCopy=t.isCopy||!1;const[a,l]=r.pageDimensions,[c,h,d,p]=r.getRectInCurrentCoords(t.rect,l);return r.x=c/a,r.y=h/l,r.width=d/a,r.height=p/l,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#l?.abort(),this.#l=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#y&&(clearTimeout(this.#y),this.#y=null),this.#$(),this.removeEditToolbar(),this.#v){for(const t of this.#v.values())clearTimeout(t);this.#v=null}this.parent=null,this.#E?.destroy(),this.#E=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#_(),this.#u.classList.remove("hidden"))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#u.children;if(!this.#e){this.#e=Array.from(e);const l=this.#G.bind(this),c=this.#U.bind(this),h=this._uiManager._signal;for(const d of this.#e){const p=d.getAttribute("data-resizer-name");d.setAttribute("role","spinbutton"),d.addEventListener("keydown",l,{signal:h}),d.addEventListener("blur",c,{signal:h}),d.addEventListener("focus",this.#D.bind(this,p),{signal:h}),d.setAttribute("data-l10n-id",mt._l10nResizer[p])}}const n=this.#e[0];let r=0;for(const l of e){if(l===n)break;r++}const a=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(a!==r){if(a<r)for(let c=0;c<r-a;c++)this.#u.append(this.#u.firstChild);else if(a>r)for(let c=0;c<a-r;c++)this.#u.firstChild.before(this.#u.lastChild);let l=0;for(const c of e){const d=this.#e[l++].getAttribute("data-resizer-name");c.setAttribute("data-l10n-id",mt._l10nResizer[d])}}this.#N(0),this.#w=!0,this.#u.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#G(t){mt._resizerKeyboardManager.exec(this,t)}#U(t){this.#w&&t.relatedTarget?.parentNode!==this.#u&&this.#$()}#D(t){this.#p=this.#w?t:""}#N(t){if(this.#e)for(const e of this.#e)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#w&&this.#z(this.#p,{deltaX:t,deltaY:e,fromKeyboard:!0})}#$(){this.#w=!1,this.#N(-1),this.#I()}_stopResizingWithKeyboard(){this.#$(),this.div.focus()}select(){if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}}unselect(){this.isSelected&&(this.isSelected=!1,this.#u?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#h}set isEditing(t){this.#h=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){this.#a=!0;const n=t/e,{style:r}=this.div;r.aspectRatio=n,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#v||=new Map;const{action:n}=t;let r=this.#v.get(n);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(t),this.#v.delete(n),this.#v.size===0&&(this.#v=null)},mt._telemetryTimeout),this.#v.set(n,r);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#r=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#r=!0}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}}class g_ extends mt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const uy=3285377520,hn=4294901760,jn=65535;class Mv{constructor(t){this.h1=t?t&4294967295:uy,this.h2=t?t&4294967295:uy}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let x=0,E=t.length;x<E;x++){const S=t.charCodeAt(x);S<=255?e[n++]=S:(e[n++]=S>>>8,e[n++]=S&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=n>>2,a=n-r*4,l=new Uint32Array(e.buffer,0,r);let c=0,h=0,d=this.h1,p=this.h2;const m=3432918353,y=461845907,w=m&jn,A=y&jn;for(let x=0;x<r;x++)x&1?(c=l[x],c=c*m&hn|c*w&jn,c=c<<15|c>>>17,c=c*y&hn|c*A&jn,d^=c,d=d<<13|d>>>19,d=d*5+3864292196):(h=l[x],h=h*m&hn|h*w&jn,h=h<<15|h>>>17,h=h*y&hn|h*A&jn,p^=h,p=p<<13|p>>>19,p=p*5+3864292196);switch(c=0,a){case 3:c^=e[r*4+2]<<16;case 2:c^=e[r*4+1]<<8;case 1:c^=e[r*4],c=c*m&hn|c*w&jn,c=c<<15|c>>>17,c=c*y&hn|c*A&jn,r&1?d^=c:p^=c}this.h1=d,this.h2=p}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&hn|t*36045&jn,e=e*4283543511&hn|((e<<16|t>>>16)*2950163797&hn)>>>16,t^=e>>>1,t=t*444984403&hn|t*60499&jn,e=e*3301882366&hn|((e<<16|t>>>16)*3120437893&hn)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const Rh=Object.freeze({map:null,hash:"",transfer:void 0});class Pd{#t=!1;#e=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=this.#n.get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return this.#n.get(t)}remove(t){if(this.#n.delete(t),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of this.#n.values())if(e instanceof mt)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=this.#n.get(t);let r=!1;if(n!==void 0)for(const[a,l]of Object.entries(e))n[a]!==l&&(r=!0,n[a]=l);else r=!0,this.#n.set(t,e);r&&this.#i(),e instanceof mt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return this.#n.has(t)}get size(){return this.#n.size}#i(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Iv(this)}get serializable(){if(this.#n.size===0)return Rh;const t=new Map,e=new Mv,n=[],r=Object.create(null);let a=!1;for(const[l,c]of this.#n){const h=c instanceof mt?c.serialize(!1,r):c;h&&(t.set(l,h),e.update(`${l}:${JSON.stringify(h)}`),a||=!!h.bitmap)}if(a)for(const l of t.values())l.bitmap&&n.push(l.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:Rh}get editorStats(){let t=null;const e=new Map;for(const n of this.#n.values()){if(!(n instanceof mt))continue;const r=n.telemetryFinalData;if(!r)continue;const{type:a}=r;e.has(a)||e.set(a,Object.getPrototypeOf(n).constructor),t||=Object.create(null);const l=t[a]||=new Map;for(const[c,h]of Object.entries(r)){if(c==="type")continue;let d=l.get(c);d||(d=new Map,l.set(c,d));const p=d.get(h)??0;d.set(h,p+1)}}for(const[n,r]of e)t[n]=r.computeTelemetryFinalData(t[n]);return t}resetModifiedIds(){this.#e=null}get modifiedIds(){if(this.#e)return this.#e;const t=[];for(const e of this.#n.values())!(e instanceof mt)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class Iv extends Pd{#t;constructor(t){super();const{map:e,hash:n,transfer:r}=t.serializable,a=structuredClone(e,r?{transfer:r}:null);this.#t={map:a,hash:n,transfer:r}}get print(){Ot("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return _t(this,"modifiedIds",{ids:new Set,hash:""})}}class y_{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:n}){if(!(!t||this.#t.has(t.loadedName))){if(ce(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:a,style:l}=t,c=new FontFace(r,a,l);this.addNativeFontFace(c);try{await c.load(),this.#t.add(r),n?.(t)}catch{St(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(c)}return}Ot("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(r){throw St(`Failed to load font '${n.family}': '${r}'.`),t.disableFontFace=!0,r}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const r=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,r)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return _t(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return _t(this,"isSyncFontLoadingSupported",Me||ve.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(ce(!r.done,"completeRequest() cannot be called twice."),r.done=!0;n.length>0&&n[0].done;){const a=n.shift();setTimeout(a.callback,0)}}const{loadingRequests:n}=this,r={done:!1,complete:e,callback:t};return n.push(r),r}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return _t(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(R,k){return R.charCodeAt(k)<<24|R.charCodeAt(k+1)<<16|R.charCodeAt(k+2)<<8|R.charCodeAt(k+3)&255}function r(R,k,I,D){const B=R.substring(0,k),H=R.substring(k+I);return B+D+H}let a,l;const c=this._document.createElement("canvas");c.width=1,c.height=1;const h=c.getContext("2d");let d=0;function p(R,k){if(++d>30){St("Load test font never loaded."),k();return}if(h.font="30px "+R,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){k();return}setTimeout(p.bind(null,R,k))}const m=`lt${Date.now()}${this.loadTestFontId++}`;let y=this._loadTestFont;y=r(y,976,m.length,m);const A=16,x=1482184792;let E=n(y,A);for(a=0,l=m.length-3;a<l;a+=4)E=E-x+n(m,a)|0;a<m.length&&(E=E-x+n(m+"XXX",a)|0),y=r(y,A,4,r_(E));const S=`url(data:font/opentype;base64,${btoa(y)});`,_=`@font-face {font-family:"${m}";src:${S}}`;this.insertRule(_);const C=this._document.createElement("div");C.style.visibility="hidden",C.style.width=C.style.height="10px",C.style.position="absolute",C.style.top=C.style.left="0px";for(const R of[t.loadedName,m]){const k=this._document.createElement("span");k.textContent="Hi",k.style.fontFamily=R,C.append(k)}this._document.body.append(C),p(m,()=>{C.remove(),e.complete()})}}class v_{constructor(t,e=null){this.compiledGlyphs=Object.create(null);for(const n in t)this[n]=t[n];this._inspectFont=e}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${Tv(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let r;try{r=t.get(n)}catch(l){St(`getPathGenerator - ignoring character: "${l}".`)}const a=new Path2D(r||"");return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=a}}function w_(s){if(s instanceof URL)return s.href;if(typeof s=="string"){if(Me)return s;const t=URL.parse(s,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function x_(s){if(Me&&typeof Buffer<"u"&&s instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength)return s;if(typeof s=="string")return _o(s);if(s instanceof ArrayBuffer||ArrayBuffer.isView(s)||typeof s=="object"&&!isNaN(s?.length))return new Uint8Array(s);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function tl(s){if(typeof s!="string")return null;if(s.endsWith("/"))return s;throw new Error(`Invalid factory url: "${s}" must include trailing slash.`)}const Lh=s=>typeof s=="object"&&Number.isInteger(s?.num)&&s.num>=0&&Number.isInteger(s?.gen)&&s.gen>=0,A_=s=>typeof s=="object"&&typeof s?.name=="string",Dv=c_.bind(null,Lh,A_);class b_{#t=new Map;#e=Promise.resolve();postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};this.#e.then(()=>{for(const[r]of this.#t)r.call(this,n)})}addEventListener(t,e,n=null){let r=null;if(n?.signal instanceof AbortSignal){const{signal:a}=n;if(a.aborted){St("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(t,e);r=()=>a.removeEventListener("abort",l),a.addEventListener("abort",l)}this.#t.set(e,r)}removeEventListener(t,e){this.#t.get(e)?.(),this.#t.delete(e)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const el={DATA:1,ERROR:2},ae={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function hy(){}function Ue(s){if(s instanceof ri||s instanceof xl||s instanceof ay||s instanceof go||s instanceof Zu)return s;switch(s instanceof Error||typeof s=="object"&&s!==null||Ot('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),s.name){case"AbortException":return new ri(s.message);case"InvalidPDFException":return new xl(s.message);case"PasswordException":return new ay(s.message,s.code);case"ResponseException":return new go(s.message,s.status,s.missing);case"UnknownErrorException":return new Zu(s.message,s.details)}return new Zu(s.message,s.toString())}class Zr{#t=new AbortController;constructor(t,e,n){this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#i(t);return}if(t.callback){const n=t.callbackId,r=this.callbackCapabilities[n];if(!r)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===el.DATA)r.resolve(t.data);else if(t.callback===el.ERROR)r.reject(Ue(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,r=t.sourceName,a=this.comObj;Promise.try(e,t.data).then(function(l){a.postMessage({sourceName:n,targetName:r,callback:el.DATA,callbackId:t.callbackId,data:l})},function(l){a.postMessage({sourceName:n,targetName:r,callback:el.ERROR,callbackId:t.callbackId,reason:Ue(l)})});return}if(t.streamId){this.#n(t);return}e(t.data)}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const r=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[r]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:e},n)}catch(l){a.reject(l)}return a.promise}sendWithStream(t,e,n,r){const a=this.streamId++,l=this.sourceName,c=this.targetName,h=this.comObj;return new ReadableStream({start:d=>{const p=Promise.withResolvers();return this.streamControllers[a]={controller:d,startCall:p,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:l,targetName:c,action:t,streamId:a,data:e,desiredSize:d.desiredSize},r),p.promise},pull:d=>{const p=Promise.withResolvers();return this.streamControllers[a].pullCall=p,h.postMessage({sourceName:l,targetName:c,stream:ae.PULL,streamId:a,desiredSize:d.desiredSize}),p.promise},cancel:d=>{ce(d instanceof Error,"cancel must have a valid reason");const p=Promise.withResolvers();return this.streamControllers[a].cancelCall=p,this.streamControllers[a].isClosed=!0,h.postMessage({sourceName:l,targetName:c,stream:ae.CANCEL,streamId:a,reason:Ue(d)}),p.promise}},n)}#n(t){const e=t.streamId,n=this.sourceName,r=t.sourceName,a=this.comObj,l=this,c=this.actionHandler[t.action],h={enqueue(d,p=1,m){if(this.isCancelled)return;const y=this.desiredSize;this.desiredSize-=p,y>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:n,targetName:r,stream:ae.ENQUEUE,streamId:e,chunk:d},m)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:r,stream:ae.CLOSE,streamId:e}),delete l.streamSinks[e])},error(d){ce(d instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:r,stream:ae.ERROR,streamId:e,reason:Ue(d)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[e]=h,Promise.try(c,t.data,h).then(function(){a.postMessage({sourceName:n,targetName:r,stream:ae.START_COMPLETE,streamId:e,success:!0})},function(d){a.postMessage({sourceName:n,targetName:r,stream:ae.START_COMPLETE,streamId:e,reason:Ue(d)})})}#i(t){const e=t.streamId,n=this.sourceName,r=t.sourceName,a=this.comObj,l=this.streamControllers[e],c=this.streamSinks[e];switch(t.stream){case ae.START_COMPLETE:t.success?l.startCall.resolve():l.startCall.reject(Ue(t.reason));break;case ae.PULL_COMPLETE:t.success?l.pullCall.resolve():l.pullCall.reject(Ue(t.reason));break;case ae.PULL:if(!c){a.postMessage({sourceName:n,targetName:r,stream:ae.PULL_COMPLETE,streamId:e,success:!0});break}c.desiredSize<=0&&t.desiredSize>0&&c.sinkCapability.resolve(),c.desiredSize=t.desiredSize,Promise.try(c.onPull||hy).then(function(){a.postMessage({sourceName:n,targetName:r,stream:ae.PULL_COMPLETE,streamId:e,success:!0})},function(d){a.postMessage({sourceName:n,targetName:r,stream:ae.PULL_COMPLETE,streamId:e,reason:Ue(d)})});break;case ae.ENQUEUE:if(ce(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(t.chunk);break;case ae.CLOSE:if(ce(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),this.#r(l,e);break;case ae.ERROR:ce(l,"error should have stream controller"),l.controller.error(Ue(t.reason)),this.#r(l,e);break;case ae.CANCEL_COMPLETE:t.success?l.cancelCall.resolve():l.cancelCall.reject(Ue(t.reason)),this.#r(l,e);break;case ae.CANCEL:if(!c)break;const h=Ue(t.reason);Promise.try(c.onCancel||hy,h).then(function(){a.postMessage({sourceName:n,targetName:r,stream:ae.CANCEL_COMPLETE,streamId:e,success:!0})},function(d){a.postMessage({sourceName:n,targetName:r,stream:ae.CANCEL_COMPLETE,streamId:e,reason:Ue(d)})}),c.sinkCapability.reject(h),c.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#r(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.#t?.abort(),this.#t=null}}class Nv{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Ot("Abstract method `_createCanvas` called.")}}class S_ extends Nv{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class Fv{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Ot("Abstract method `_fetch` called.")}}class dy extends Fv{async _fetch(t){const e=await sr(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):_o(e)}}class Ov{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,r,a){return"none"}destroy(t=!1){}}class E_ extends Ov{#t;#e;#n;#i;#r;#s;#o=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#i=t,this.#r=e}get#a(){return this.#e||=new Map}get#u(){return this.#s||=new Map}get#c(){if(!this.#n){const t=this.#r.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const n=this.#r.createElementNS(ni,"svg");n.setAttribute("width",0),n.setAttribute("height",0),this.#n=this.#r.createElementNS(ni,"defs"),t.append(n),n.append(this.#n),this.#r.body.append(t)}return this.#n}#d(t){if(t.length===1){const h=t[0],d=new Array(256);for(let m=0;m<256;m++)d[m]=h[m]/255;const p=d.join(",");return[p,p,p]}const[e,n,r]=t,a=new Array(256),l=new Array(256),c=new Array(256);for(let h=0;h<256;h++)a[h]=e[h]/255,l[h]=n[h]/255,c[h]=r[h]/255;return[a.join(","),l.join(","),c.join(",")]}#l(t){if(this.#t===void 0){this.#t="";const e=this.#r.URL;e!==this.#r.baseURI&&(Po(e)?St('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=Sd(e,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let e=this.#a.get(t);if(e)return e;const[n,r,a]=this.#d(t),l=t.length===1?n:`${n}${r}${a}`;if(e=this.#a.get(l),e)return this.#a.set(t,e),e;const c=`g_${this.#i}_transfer_map_${this.#o++}`,h=this.#l(c);this.#a.set(t,h),this.#a.set(l,h);const d=this.#f(c);return this.#m(n,r,a,d),h}addHCMFilter(t,e){const n=`${t}-${e}`,r="base";let a=this.#u.get(r);if(a?.key===n||(a?(a.filter?.remove(),a.key=n,a.url="none",a.filter=null):(a={key:n,url:"none",filter:null},this.#u.set(r,a)),!t||!e))return a.url;const l=this.#y(t);t=ct.makeHexColor(...l);const c=this.#y(e);if(e=ct.makeHexColor(...c),this.#c.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return a.url;const h=new Array(256);for(let w=0;w<=255;w++){const A=w/255;h[w]=A<=.03928?A/12.92:((A+.055)/1.055)**2.4}const d=h.join(","),p=`g_${this.#i}_hcm_filter`,m=a.filter=this.#f(p);this.#m(d,d,d,m),this.#g(m);const y=(w,A)=>{const x=l[w]/255,E=c[w]/255,S=new Array(A+1);for(let _=0;_<=A;_++)S[_]=x+_/A*(E-x);return S.join(",")};return this.#m(y(0,5),y(1,5),y(2,5),m),a.url=this.#l(p),a.url}addAlphaFilter(t){let e=this.#a.get(t);if(e)return e;const[n]=this.#d([t]),r=`alpha_${n}`;if(e=this.#a.get(r),e)return this.#a.set(t,e),e;const a=`g_${this.#i}_alpha_map_${this.#o++}`,l=this.#l(a);this.#a.set(t,l),this.#a.set(r,l);const c=this.#f(a);return this.#w(n,c),l}addLuminosityFilter(t){let e=this.#a.get(t||"luminosity");if(e)return e;let n,r;if(t?([n]=this.#d([t]),r=`luminosity_${n}`):r="luminosity",e=this.#a.get(r),e)return this.#a.set(t,e),e;const a=`g_${this.#i}_luminosity_map_${this.#o++}`,l=this.#l(a);this.#a.set(t,l),this.#a.set(r,l);const c=this.#f(a);return this.#p(c),t&&this.#w(n,c),l}addHighlightHCMFilter(t,e,n,r,a){const l=`${e}-${n}-${r}-${a}`;let c=this.#u.get(t);if(c?.key===l||(c?(c.filter?.remove(),c.key=l,c.url="none",c.filter=null):(c={key:l,url:"none",filter:null},this.#u.set(t,c)),!e||!n))return c.url;const[h,d]=[e,n].map(this.#y.bind(this));let p=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),m=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[y,w]=[r,a].map(this.#y.bind(this));m<p&&([p,m,y,w]=[m,p,w,y]),this.#c.style.color="";const A=(S,_,C)=>{const R=new Array(256),k=(m-p)/C,I=S/255,D=(_-S)/(255*C);let B=0;for(let H=0;H<=C;H++){const G=Math.round(p+H*k),Q=I+H*D;for(let ht=B;ht<=G;ht++)R[ht]=Q;B=G+1}for(let H=B;H<256;H++)R[H]=R[B-1];return R.join(",")},x=`g_${this.#i}_hcm_${t}_filter`,E=c.filter=this.#f(x);return this.#g(E),this.#m(A(y[0],w[0],5),A(y[1],w[1],5),A(y[2],w[2],5),E),c.url=this.#l(x),c.url}destroy(t=!1){t&&this.#s?.size||(this.#n?.parentNode.parentNode.remove(),this.#n=null,this.#e?.clear(),this.#e=null,this.#s?.clear(),this.#s=null,this.#o=0)}#p(t){const e=this.#r.createElementNS(ni,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#g(t){const e=this.#r.createElementNS(ni,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#f(t){const e=this.#r.createElementNS(ni,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#c.append(e),e}#h(t,e,n){const r=this.#r.createElementNS(ni,e);r.setAttribute("type","discrete"),r.setAttribute("tableValues",n),t.append(r)}#m(t,e,n,r){const a=this.#r.createElementNS(ni,"feComponentTransfer");r.append(a),this.#h(a,"feFuncR",t),this.#h(a,"feFuncG",e),this.#h(a,"feFuncB",n)}#w(t,e){const n=this.#r.createElementNS(ni,"feComponentTransfer");e.append(n),this.#h(n,"feFuncA",t)}#y(t){return this.#c.style.color=t,ko(getComputedStyle(this.#c).getPropertyValue("color"))}}class jv{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Ot("Abstract method `_fetch` called.")}}class fy extends jv{async _fetch(t){const e=await sr(t,"arraybuffer");return new Uint8Array(e)}}class Bv{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){Ot("Abstract method `_fetch` called.")}}class py extends Bv{async _fetch(t){const e=await sr(t,"arraybuffer");return new Uint8Array(e)}}Me&&St("Please use the `legacy` build in Node.js environments.");async function kd(s){const e=await process.getBuiltinModule("fs").promises.readFile(s);return new Uint8Array(e)}class C_ extends Ov{}class __ extends Nv{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class T_ extends Fv{async _fetch(t){return kd(t)}}class P_ extends jv{async _fetch(t){return kd(t)}}class k_ extends Bv{async _fetch(t){return kd(t)}}const Ae={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Mh(s,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],e,n),s.clip(r)}class Rd{isModifyingCurrentTransform(){return!1}getPattern(){Ot("Abstract method `getPattern` called.")}}class R_ extends Rd{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,r){let a;if(r===Ae.STROKE||r===Ae.FILL){const l=e.current.getClippedPathBoundingBox(r,Xt(t))||[0,0,0,0],c=Math.ceil(l[2]-l[0])||1,h=Math.ceil(l[3]-l[1])||1,d=e.cachedCanvases.getCanvas("pattern",c,h),p=d.context;p.clearRect(0,0,p.canvas.width,p.canvas.height),p.beginPath(),p.rect(0,0,p.canvas.width,p.canvas.height),p.translate(-l[0],-l[1]),n=ct.transform(n,[1,0,0,1,l[0],l[1]]),p.transform(...e.baseTransform),this.matrix&&p.transform(...this.matrix),Mh(p,this._bbox),p.fillStyle=this._createGradient(p),p.fill(),a=t.createPattern(d.canvas,"no-repeat");const m=new DOMMatrix(n);a.setTransform(m)}else Mh(t,this._bbox),a=this._createGradient(t);return a}}function eh(s,t,e,n,r,a,l,c){const h=t.coords,d=t.colors,p=s.data,m=s.width*4;let y;h[e+1]>h[n+1]&&(y=e,e=n,n=y,y=a,a=l,l=y),h[n+1]>h[r+1]&&(y=n,n=r,r=y,y=l,l=c,c=y),h[e+1]>h[n+1]&&(y=e,e=n,n=y,y=a,a=l,l=y);const w=(h[e]+t.offsetX)*t.scaleX,A=(h[e+1]+t.offsetY)*t.scaleY,x=(h[n]+t.offsetX)*t.scaleX,E=(h[n+1]+t.offsetY)*t.scaleY,S=(h[r]+t.offsetX)*t.scaleX,_=(h[r+1]+t.offsetY)*t.scaleY;if(A>=_)return;const C=d[a],R=d[a+1],k=d[a+2],I=d[l],D=d[l+1],B=d[l+2],H=d[c],G=d[c+1],Q=d[c+2],ht=Math.round(A),lt=Math.round(_);let et,Et,q,U,$,J,Z,N;for(let z=ht;z<=lt;z++){if(z<E){const ut=z<A?0:(A-z)/(A-E);et=w-(w-x)*ut,Et=C-(C-I)*ut,q=R-(R-D)*ut,U=k-(k-B)*ut}else{let ut;z>_?ut=1:E===_?ut=0:ut=(E-z)/(E-_),et=x-(x-S)*ut,Et=I-(I-H)*ut,q=D-(D-G)*ut,U=B-(B-Q)*ut}let nt;z<A?nt=0:z>_?nt=1:nt=(A-z)/(A-_),$=w-(w-S)*nt,J=C-(C-H)*nt,Z=R-(R-G)*nt,N=k-(k-Q)*nt;const dt=Math.round(Math.min(et,$)),wt=Math.round(Math.max(et,$));let yt=m*z+dt*4;for(let ut=dt;ut<=wt;ut++)nt=(et-ut)/(et-$),nt<0?nt=0:nt>1&&(nt=1),p[yt++]=Et-(Et-J)*nt|0,p[yt++]=q-(q-Z)*nt|0,p[yt++]=U-(U-N)*nt|0,p[yt++]=255}}function L_(s,t,e){const n=t.coords,r=t.colors;let a,l;switch(t.type){case"lattice":const c=t.verticesPerRow,h=Math.floor(n.length/c)-1,d=c-1;for(a=0;a<h;a++){let p=a*c;for(let m=0;m<d;m++,p++)eh(s,e,n[p],n[p+1],n[p+c],r[p],r[p+1],r[p+c]),eh(s,e,n[p+c+1],n[p+1],n[p+c],r[p+c+1],r[p+1],r[p+c])}break;case"triangles":for(a=0,l=n.length;a<l;a+=3)eh(s,e,n[a],n[a+1],n[a+2],r[a],r[a+1],r[a+2]);break;default:throw new Error("illegal figure")}}class M_ extends Rd{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,n){const c=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),d=Math.ceil(this._bounds[2])-c,p=Math.ceil(this._bounds[3])-h,m=Math.min(Math.ceil(Math.abs(d*t[0]*1.1)),3e3),y=Math.min(Math.ceil(Math.abs(p*t[1]*1.1)),3e3),w=d/m,A=p/y,x={coords:this._coords,colors:this._colors,offsetX:-c,offsetY:-h,scaleX:1/w,scaleY:1/A},E=m+4,S=y+4,_=n.getCanvas("mesh",E,S),C=_.context,R=C.createImageData(m,y);if(e){const I=R.data;for(let D=0,B=I.length;D<B;D+=4)I[D]=e[0],I[D+1]=e[1],I[D+2]=e[2],I[D+3]=255}for(const I of this._figures)L_(R,I,x);return C.putImageData(R,2,2),{canvas:_.canvas,offsetX:c-2*w,offsetY:h-2*A,scaleX:w,scaleY:A}}isModifyingCurrentTransform(){return!0}getPattern(t,e,n,r){Mh(t,this._bbox);const a=new Float32Array(2);if(r===Ae.SHADING)ct.singularValueDecompose2dScale(Xt(t),a);else if(this.matrix){ct.singularValueDecompose2dScale(this.matrix,a);const[c,h]=a;ct.singularValueDecompose2dScale(e.baseTransform,a),a[0]*=c,a[1]*=h}else ct.singularValueDecompose2dScale(e.baseTransform,a);const l=this._createMeshCanvas(a,r===Ae.SHADING?null:this._background,e.cachedCanvases);return r!==Ae.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(l.offsetX,l.offsetY),t.scale(l.scaleX,l.scaleY),t.createPattern(l.canvas,"no-repeat")}}class I_ extends Rd{getPattern(){return"hotpink"}}function D_(s){switch(s[0]){case"RadialAxial":return new R_(s);case"Mesh":return new M_(s);case"Dummy":return new I_}throw new Error(`Unknown IR type: ${s[0]}`)}const my={COLORED:1,UNCOLORED:2};class Ld{static MAX_PATTERN_SIZE=3e3;constructor(t,e,n,r){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=n,this.baseTransform=r}createPatternCanvas(t){const{bbox:e,operatorList:n,paintType:r,tilingType:a,color:l,canvasGraphicsFactory:c}=this;let{xstep:h,ystep:d}=this;h=Math.abs(h),d=Math.abs(d),Ll("TilingType: "+a);const p=e[0],m=e[1],y=e[2],w=e[3],A=y-p,x=w-m,E=new Float32Array(2);ct.singularValueDecompose2dScale(this.matrix,E);const[S,_]=E;ct.singularValueDecompose2dScale(this.baseTransform,E);const C=S*E[0],R=_*E[1];let k=A,I=x,D=!1,B=!1;const H=Math.ceil(h*C),G=Math.ceil(d*R),Q=Math.ceil(A*C),ht=Math.ceil(x*R);H>=Q?k=h:D=!0,G>=ht?I=d:B=!0;const lt=this.getSizeAndScale(k,this.ctx.canvas.width,C),et=this.getSizeAndScale(I,this.ctx.canvas.height,R),Et=t.cachedCanvases.getCanvas("pattern",lt.size,et.size),q=Et.context,U=c.createCanvasGraphics(q);if(U.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(U,r,l),q.translate(-lt.scale*p,-et.scale*m),U.transform(lt.scale,0,0,et.scale,0,0),q.save(),this.clipBbox(U,p,m,y,w),U.baseTransform=Xt(U.ctx),U.executeOperatorList(n),U.endDrawing(),q.restore(),D||B){const $=Et.canvas;D&&(k=h),B&&(I=d);const J=this.getSizeAndScale(k,this.ctx.canvas.width,C),Z=this.getSizeAndScale(I,this.ctx.canvas.height,R),N=J.size,z=Z.size,nt=t.cachedCanvases.getCanvas("pattern-workaround",N,z),dt=nt.context,wt=D?Math.floor(A/h):0,yt=B?Math.floor(x/d):0;for(let ut=0;ut<=wt;ut++)for(let Ct=0;Ct<=yt;Ct++)dt.drawImage($,N*ut,z*Ct,N,z,0,0,N,z);return{canvas:nt.canvas,scaleX:J.scale,scaleY:Z.scale,offsetX:p,offsetY:m}}return{canvas:Et.canvas,scaleX:lt.scale,scaleY:et.scale,offsetX:p,offsetY:m}}getSizeAndScale(t,e,n){const r=Math.max(Ld.MAX_PATTERN_SIZE,e);let a=Math.ceil(t*n);return a>=r?a=r:n=a/t,{scale:n,size:a}}clipBbox(t,e,n,r,a){const l=r-e,c=a-n;t.ctx.rect(e,n,l,c),ct.axialAlignedBoundingBox([e,n,r,a],Xt(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const r=t.ctx,a=t.current;switch(e){case my.COLORED:const{fillStyle:l,strokeStyle:c}=this.ctx;r.fillStyle=a.fillColor=l,r.strokeStyle=a.strokeColor=c;break;case my.UNCOLORED:r.fillStyle=r.strokeStyle=n,a.fillColor=a.strokeColor=n;break;default:throw new s_(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,n,r){let a=n;r!==Ae.SHADING&&(a=ct.transform(a,e.baseTransform),this.matrix&&(a=ct.transform(a,this.matrix)));const l=this.createPatternCanvas(e);let c=new DOMMatrix(a);c=c.translate(l.offsetX,l.offsetY),c=c.scale(1/l.scaleX,1/l.scaleY);const h=t.createPattern(l.canvas,"repeat");return h.setTransform(c),h}}function N_({src:s,srcPos:t=0,dest:e,width:n,height:r,nonBlackColor:a=4294967295,inverseDecode:l=!1}){const c=ve.isLittleEndian?4278190080:255,[h,d]=l?[a,c]:[c,a],p=n>>3,m=n&7,y=s.length;e=new Uint32Array(e.buffer);let w=0;for(let A=0;A<r;A++){for(const E=t+p;t<E;t++){const S=t<y?s[t]:255;e[w++]=S&128?d:h,e[w++]=S&64?d:h,e[w++]=S&32?d:h,e[w++]=S&16?d:h,e[w++]=S&8?d:h,e[w++]=S&4?d:h,e[w++]=S&2?d:h,e[w++]=S&1?d:h}if(m===0)continue;const x=t<y?s[t++]:255;for(let E=0;E<m;E++)e[w++]=x&1<<7-E?d:h}return{srcPos:t,destPos:w}}const gy=16,yy=100,F_=15,vy=10,$e=16,nh=new DOMMatrix,Je=new Float32Array(2),Us=new Float32Array([1/0,1/0,-1/0,-1/0]);function O_(s,t){if(s._removeMirroring)throw new Error("Context is already forwarding operations.");s.__originalSave=s.save,s.__originalRestore=s.restore,s.__originalRotate=s.rotate,s.__originalScale=s.scale,s.__originalTranslate=s.translate,s.__originalTransform=s.transform,s.__originalSetTransform=s.setTransform,s.__originalResetTransform=s.resetTransform,s.__originalClip=s.clip,s.__originalMoveTo=s.moveTo,s.__originalLineTo=s.lineTo,s.__originalBezierCurveTo=s.bezierCurveTo,s.__originalRect=s.rect,s.__originalClosePath=s.closePath,s.__originalBeginPath=s.beginPath,s._removeMirroring=()=>{s.save=s.__originalSave,s.restore=s.__originalRestore,s.rotate=s.__originalRotate,s.scale=s.__originalScale,s.translate=s.__originalTranslate,s.transform=s.__originalTransform,s.setTransform=s.__originalSetTransform,s.resetTransform=s.__originalResetTransform,s.clip=s.__originalClip,s.moveTo=s.__originalMoveTo,s.lineTo=s.__originalLineTo,s.bezierCurveTo=s.__originalBezierCurveTo,s.rect=s.__originalRect,s.closePath=s.__originalClosePath,s.beginPath=s.__originalBeginPath,delete s._removeMirroring},s.save=function(){t.save(),this.__originalSave()},s.restore=function(){t.restore(),this.__originalRestore()},s.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},s.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},s.transform=function(e,n,r,a,l,c){t.transform(e,n,r,a,l,c),this.__originalTransform(e,n,r,a,l,c)},s.setTransform=function(e,n,r,a,l,c){t.setTransform(e,n,r,a,l,c),this.__originalSetTransform(e,n,r,a,l,c)},s.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},s.rotate=function(e){t.rotate(e),this.__originalRotate(e)},s.clip=function(e){t.clip(e),this.__originalClip(e)},s.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},s.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},s.bezierCurveTo=function(e,n,r,a,l,c){t.bezierCurveTo(e,n,r,a,l,c),this.__originalBezierCurveTo(e,n,r,a,l,c)},s.rect=function(e,n,r,a){t.rect(e,n,r,a),this.__originalRect(e,n,r,a)},s.closePath=function(){t.closePath(),this.__originalClosePath()},s.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class j_{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let r;return this.cache[t]!==void 0?(r=this.cache[t],this.canvasFactory.reset(r,e,n)):(r=this.canvasFactory.create(e,n),this.cache[t]=r),r}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function nl(s,t,e,n,r,a,l,c,h,d){const[p,m,y,w,A,x]=Xt(s);if(m===0&&y===0){const _=l*p+A,C=Math.round(_),R=c*w+x,k=Math.round(R),I=(l+h)*p+A,D=Math.abs(Math.round(I)-C)||1,B=(c+d)*w+x,H=Math.abs(Math.round(B)-k)||1;return s.setTransform(Math.sign(p),0,0,Math.sign(w),C,k),s.drawImage(t,e,n,r,a,0,0,D,H),s.setTransform(p,m,y,w,A,x),[D,H]}if(p===0&&w===0){const _=c*y+A,C=Math.round(_),R=l*m+x,k=Math.round(R),I=(c+d)*y+A,D=Math.abs(Math.round(I)-C)||1,B=(l+h)*m+x,H=Math.abs(Math.round(B)-k)||1;return s.setTransform(0,Math.sign(m),Math.sign(y),0,C,k),s.drawImage(t,e,n,r,a,0,0,H,D),s.setTransform(p,m,y,w,A,x),[H,D]}s.drawImage(t,e,n,r,a,l,c,h,d);const E=Math.hypot(p,m),S=Math.hypot(y,w);return[E*h,S*d]}class wy{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=kh;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=_e.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,e){this.clipBox=new Float32Array([0,0,t,e]),this.minMax=Us.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Ae.FILL,e=null){const n=this.minMax.slice();if(t===Ae.STROKE){e||Ot("Stroke bounding box must include transform."),ct.singularValueDecompose2dScale(e,Je);const r=Je[0]*this.lineWidth/2,a=Je[1]*this.lineWidth/2;n[0]-=r,n[1]-=a,n[2]+=r,n[3]+=a}return n}updateClipFromPath(){const t=ct.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(Us,0)}getClippedPathBoundingBox(t=Ae.FILL,e=null){return ct.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function xy(s,t){if(t instanceof ImageData){s.putImageData(t,0,0);return}const e=t.height,n=t.width,r=e%$e,a=(e-r)/$e,l=r===0?a:a+1,c=s.createImageData(n,$e);let h=0,d;const p=t.data,m=c.data;let y,w,A,x;if(t.kind===oo.GRAYSCALE_1BPP){const E=p.byteLength,S=new Uint32Array(m.buffer,0,m.byteLength>>2),_=S.length,C=n+7>>3,R=4294967295,k=ve.isLittleEndian?4278190080:255;for(y=0;y<l;y++){for(A=y<a?$e:r,d=0,w=0;w<A;w++){const I=E-h;let D=0;const B=I>C?n:I*8-7,H=B&-8;let G=0,Q=0;for(;D<H;D+=8)Q=p[h++],S[d++]=Q&128?R:k,S[d++]=Q&64?R:k,S[d++]=Q&32?R:k,S[d++]=Q&16?R:k,S[d++]=Q&8?R:k,S[d++]=Q&4?R:k,S[d++]=Q&2?R:k,S[d++]=Q&1?R:k;for(;D<B;D++)G===0&&(Q=p[h++],G=128),S[d++]=Q&G?R:k,G>>=1}for(;d<_;)S[d++]=0;s.putImageData(c,0,y*$e)}}else if(t.kind===oo.RGBA_32BPP){for(w=0,x=n*$e*4,y=0;y<a;y++)m.set(p.subarray(h,h+x)),h+=x,s.putImageData(c,0,w),w+=$e;y<l&&(x=n*r*4,m.set(p.subarray(h,h+x)),s.putImageData(c,0,w))}else if(t.kind===oo.RGB_24BPP)for(A=$e,x=n*A,y=0;y<l;y++){for(y>=a&&(A=r,x=n*A),d=0,w=x;w--;)m[d++]=p[h++],m[d++]=p[h++],m[d++]=p[h++],m[d++]=255;s.putImageData(c,0,y*$e)}else throw new Error(`bad image kind: ${t.kind}`)}function Ay(s,t){if(t.bitmap){s.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,r=e%$e,a=(e-r)/$e,l=r===0?a:a+1,c=s.createImageData(n,$e);let h=0;const d=t.data,p=c.data;for(let m=0;m<l;m++){const y=m<a?$e:r;({srcPos:h}=N_({src:d,srcPos:h,dest:p,width:n,height:y,nonBlackColor:0})),s.putImageData(c,0,m*$e)}}function Gr(s,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)s[n]!==void 0&&(t[n]=s[n]);s.setLineDash!==void 0&&(t.setLineDash(s.getLineDash()),t.lineDashOffset=s.lineDashOffset)}function il(s){s.strokeStyle=s.fillStyle="#000000",s.fillRule="nonzero",s.globalAlpha=1,s.lineWidth=1,s.lineCap="butt",s.lineJoin="miter",s.miterLimit=10,s.globalCompositeOperation="source-over",s.font="10px sans-serif",s.setLineDash!==void 0&&(s.setLineDash([]),s.lineDashOffset=0);const{filter:t}=s;t!=="none"&&t!==""&&(s.filter="none")}function by(s,t){if(t)return!0;ct.singularValueDecompose2dScale(s,Je);const e=Math.fround(Pn.pixelRatio*os.PDF_TO_CSS_UNITS);return Je[0]<=e&&Je[1]<=e}const B_=["butt","round","square"],V_=["miter","round","bevel"],z_={},Sy={};class Gs{constructor(t,e,n,r,a,{optionalContentConfig:l,markedContentStack:c=null},h,d){this.ctx=t,this.current=new wy(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=r,this.filterFactory=a,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=l,this.cachedCanvases=new j_(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=d,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:r=null}){const a=this.ctx.canvas.width,l=this.ctx.canvas.height,c=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,a,l),this.ctx.fillStyle=c,n){const h=this.cachedCanvases.getCanvas("transparent",a,l);this.compositeCtx=this.ctx,this.transparentCanvas=h.canvas,this.ctx=h.context,this.ctx.save(),this.ctx.transform(...Xt(this.compositeCtx))}this.ctx.save(),il(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Xt(this.ctx)}executeOperatorList(t,e,n,r){const a=t.argsArray,l=t.fnArray;let c=e||0;const h=a.length;if(h===c)return c;const d=h-c>vy&&typeof n=="function",p=d?Date.now()+F_:0;let m=0;const y=this.commonObjs,w=this.objs;let A;for(;;){if(r!==void 0&&c===r.nextBreakPoint)return r.breakIt(c,n),c;if(A=l[c],A!==mo.dependency)this[A].apply(this,a[c]);else for(const x of a[c]){const E=x.startsWith("g_")?y:w;if(!E.has(x))return E.get(x,n),c}if(c++,c===h)return c;if(d&&++m>vy){if(Date.now()>p)return n(),c;m=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const n=t.width??t.displayWidth,r=t.height??t.displayHeight;let a=Math.max(Math.hypot(e[0],e[1]),1),l=Math.max(Math.hypot(e[2],e[3]),1),c=n,h=r,d="prescale1",p,m;for(;a>2&&c>1||l>2&&h>1;){let y=c,w=h;a>2&&c>1&&(y=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c/2),a/=c/y),l>2&&h>1&&(w=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,l/=h/w),p=this.cachedCanvases.getCanvas(d,y,w),m=p.context,m.clearRect(0,0,y,w),m.drawImage(t,0,0,c,h,0,0,y,w),t=p.canvas,c=y,h=w,d=d==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:c,paintHeight:h}}_createMaskCanvas(t){const e=this.ctx,{width:n,height:r}=t,a=this.current.fillColor,l=this.current.patternFill,c=Xt(e);let h,d,p,m;if((t.bitmap||t.data)&&t.count>1){const H=t.bitmap||t.data.buffer;d=JSON.stringify(l?c:[c.slice(0,4),a]),h=this._cachedBitmapsMap.get(H),h||(h=new Map,this._cachedBitmapsMap.set(H,h));const G=h.get(d);if(G&&!l){const Q=Math.round(Math.min(c[0],c[2])+c[4]),ht=Math.round(Math.min(c[1],c[3])+c[5]);return{canvas:G,offsetX:Q,offsetY:ht}}p=G}p||(m=this.cachedCanvases.getCanvas("maskCanvas",n,r),Ay(m.context,t));let y=ct.transform(c,[1/n,0,0,-1/r,0,0]);y=ct.transform(y,[1,0,0,1,0,-r]);const w=Us.slice();ct.axialAlignedBoundingBox([0,0,n,r],y,w);const[A,x,E,S]=w,_=Math.round(E-A)||1,C=Math.round(S-x)||1,R=this.cachedCanvases.getCanvas("fillCanvas",_,C),k=R.context,I=A,D=x;k.translate(-I,-D),k.transform(...y),p||(p=this._scaleImage(m.canvas,On(k)),p=p.img,h&&l&&h.set(d,p)),k.imageSmoothingEnabled=by(Xt(k),t.interpolate),nl(k,p,0,0,p.width,p.height,0,0,n,r),k.globalCompositeOperation="source-in";const B=ct.transform(On(k),[1,0,0,1,-I,-D]);return k.fillStyle=l?a.getPattern(e,this,B,Ae.FILL):a,k.fillRect(0,0,n,r),h&&!l&&(this.cachedCanvases.delete("fillCanvas"),h.set(d,R.canvas)),{canvas:R.canvas,offsetX:Math.round(I),offsetY:Math.round(D)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=B_[t]}setLineJoin(t){this.ctx.lineJoin=V_[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(t),n.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,n]of t)switch(e){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(n,t,e);this.suspendedCtx=this.ctx;const a=this.ctx=r.context;a.setTransform(this.suspendedCtx.getTransform()),Gr(this.suspendedCtx,a),O_(a,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Gr(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,r){const a=r[0],l=r[1],c=r[2]-a,h=r[3]-l;c===0||h===0||(this.genericComposeSMask(e.context,n,c,h,e.subtype,e.backdrop,e.transferMap,a,l,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,r,a,l,c,h,d,p,m){let y=t.canvas,w=h-p,A=d-m;if(l)if(w<0||A<0||w+n>y.width||A+r>y.height){const E=this.cachedCanvases.getCanvas("maskExtension",n,r),S=E.context;S.drawImage(y,-w,-A),S.globalCompositeOperation="destination-atop",S.fillStyle=l,S.fillRect(0,0,n,r),S.globalCompositeOperation="source-over",y=E.canvas,w=A=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const E=new Path2D;E.rect(w,A,n,r),t.clip(E),t.globalCompositeOperation="destination-atop",t.fillStyle=l,t.fillRect(w,A,n,r),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),a==="Alpha"&&c?e.filter=this.filterFactory.addAlphaFilter(c):a==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(c));const x=new Path2D;x.rect(h,d,n,r),e.clip(x),e.globalCompositeOperation="destination-in",e.drawImage(y,w,A,n,r,h,d,n,r),e.restore()}save(){this.inSMaskMode&&Gr(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Gr(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,n,r,a,l){this.ctx.transform(t,e,n,r,a,l),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n){let[r]=e;if(!n){r||=e[0]=new Path2D,this[t](r);return}if(!(r instanceof Path2D)){const a=e[0]=new Path2D;for(let l=0,c=r.length;l<c;)switch(r[l++]){case Za.moveTo:a.moveTo(r[l++],r[l++]);break;case Za.lineTo:a.lineTo(r[l++],r[l++]);break;case Za.curveTo:a.bezierCurveTo(r[l++],r[l++],r[l++],r[l++],r[l++],r[l++]);break;case Za.closePath:a.closePath();break;default:St(`Unrecognized drawing path operator: ${r[l-1]}`);break}r=a}ct.axialAlignedBoundingBox(n,Xt(this.ctx),this.current.minMax),this[t](r)}closePath(){this.ctx.closePath()}stroke(t,e=!0){const n=this.ctx,r=this.current.strokeColor;if(n.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof r=="object"&&r?.getPattern){const a=r.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.strokeStyle=r.getPattern(n,this,On(n),Ae.STROKE),a){const l=new Path2D;l.addPath(t,n.getTransform().invertSelf().multiplySelf(a)),t=l}this.rescaleAndStroke(t,!1),n.restore()}else this.rescaleAndStroke(t,!0);e&&this.consumePath(t,this.current.getClippedPathBoundingBox(Ae.STROKE,Xt(this.ctx))),n.globalAlpha=this.current.fillAlpha}closeStroke(t){this.stroke(t)}fill(t,e=!0){const n=this.ctx,r=this.current.fillColor,a=this.current.patternFill;let l=!1;if(a){const h=r.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.fillStyle=r.getPattern(n,this,On(n),Ae.FILL),h){const d=new Path2D;d.addPath(t,n.getTransform().invertSelf().multiplySelf(h)),t=d}l=!0}const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(n.fill(t,"evenodd"),this.pendingEOFill=!1):n.fill(t)),l&&n.restore(),e&&this.consumePath(t,c)}eoFill(t){this.pendingEOFill=!0,this.fill(t)}fillStroke(t){this.fill(t,!1),this.stroke(t,!1),this.consumePath(t)}eoFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}closeFillStroke(t){this.fillStroke(t)}closeEOFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}endPath(t){this.consumePath(t)}rawFillPath(t){this.ctx.fill(t)}clip(){this.pendingClip=z_}eoClip(){this.pendingClip=Sy}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0)return;const n=new Path2D,r=e.getTransform().invertSelf();for(const{transform:a,x:l,y:c,fontSize:h,path:d}of t)d&&n.addPath(d,new DOMMatrix(a).preMultiplySelf(r).translate(l,c).scale(h,-h));e.clip(n),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){const n=this.commonObjs.get(t),r=this.current;if(!n)throw new Error(`Can't find font for ${t}`);if(r.fontMatrix=n.fontMatrix||kh,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&St("Invalid font matrix for font "+t),e<0?(e=-e,r.fontDirection=-1):r.fontDirection=1,this.current.font=n,this.current.fontSize=e,n.isType3Font)return;const a=n.loadedName||"sans-serif",l=n.systemFontInfo?.css||`"${a}", ${n.fallbackName}`;let c="normal";n.black?c="900":n.bold&&(c="bold");const h=n.italic?"italic":"normal";let d=e;e<gy?d=gy:e>yy&&(d=yy),this.current.fontSizeScale=e/d,this.ctx.font=`${h} ${c} ${d}px ${l}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t){const{current:e}=this;e.textMatrix=t,e.textMatrixScale=Math.hypot(t[0],t[1]),e.x=e.lineX=0,e.y=e.lineY=0}nextLine(){this.moveText(0,this.current.leading)}#n(t,e,n){const r=new Path2D;return r.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),r}paintChar(t,e,n,r,a){const l=this.ctx,c=this.current,h=c.font,d=c.textRenderingMode,p=c.fontSize/c.fontSizeScale,m=d&_e.FILL_STROKE_MASK,y=!!(d&_e.ADD_TO_PATH_FLAG),w=c.patternFill&&!h.missingFile,A=c.patternStroke&&!h.missingFile;let x;if((h.disableFontFace||y||w||A)&&!h.missingFile&&(x=h.getPathGenerator(this.commonObjs,t)),x&&(h.disableFontFace||w||A)){l.save(),l.translate(e,n),l.scale(p,-p);let E;if((m===_e.FILL||m===_e.FILL_STROKE)&&(r?(E=l.getTransform(),l.setTransform(...r),l.fill(this.#n(x,E,r))):l.fill(x)),m===_e.STROKE||m===_e.FILL_STROKE)if(a){E||=l.getTransform(),l.setTransform(...a);const{a:S,b:_,c:C,d:R}=E,k=ct.inverseTransform(a),I=ct.transform([S,_,C,R,0,0],k);ct.singularValueDecompose2dScale(I,Je),l.lineWidth*=Math.max(Je[0],Je[1])/p,l.stroke(this.#n(x,E,a))}else l.lineWidth/=p,l.stroke(x);l.restore()}else(m===_e.FILL||m===_e.FILL_STROKE)&&l.fillText(t,e,n),(m===_e.STROKE||m===_e.FILL_STROKE)&&l.strokeText(t,e,n);y&&(this.pendingTextPaths||=[]).push({transform:Xt(l),x:e,y:n,fontSize:p,path:x})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let r=3;r<e.length;r+=4)if(e[r]>0&&e[r]<255){n=!0;break}return _t(this,"isFontSubpixelAAEnabled",n)}showText(t){const e=this.current,n=e.font;if(n.isType3Font)return this.showType3Text(t);const r=e.fontSize;if(r===0)return;const a=this.ctx,l=e.fontSizeScale,c=e.charSpacing,h=e.wordSpacing,d=e.fontDirection,p=e.textHScale*d,m=t.length,y=n.vertical,w=y?1:-1,A=n.defaultVMetrics,x=r*e.fontMatrix[0],E=e.textRenderingMode===_e.FILL&&!n.disableFontFace&&!e.patternFill;a.save(),e.textMatrix&&a.transform(...e.textMatrix),a.translate(e.x,e.y+e.textRise),d>0?a.scale(p,-1):a.scale(p,1);let S,_;if(e.patternFill){a.save();const D=e.fillColor.getPattern(a,this,On(a),Ae.FILL);S=Xt(a),a.restore(),a.fillStyle=D}if(e.patternStroke){a.save();const D=e.strokeColor.getPattern(a,this,On(a),Ae.STROKE);_=Xt(a),a.restore(),a.strokeStyle=D}let C=e.lineWidth;const R=e.textMatrixScale;if(R===0||C===0){const D=e.textRenderingMode&_e.FILL_STROKE_MASK;(D===_e.STROKE||D===_e.FILL_STROKE)&&(C=this.getSinglePixelWidth())}else C/=R;if(l!==1&&(a.scale(l,l),C/=l),a.lineWidth=C,n.isInvalidPDFjsFont){const D=[];let B=0;for(const H of t)D.push(H.unicode),B+=H.width;a.fillText(D.join(""),0,0),e.x+=B*x*p,a.restore(),this.compose();return}let k=0,I;for(I=0;I<m;++I){const D=t[I];if(typeof D=="number"){k+=w*D*r/1e3;continue}let B=!1;const H=(D.isSpace?h:0)+c,G=D.fontChar,Q=D.accent;let ht,lt,et=D.width;if(y){const q=D.vmetric||A,U=-(D.vmetric?q[1]:et*.5)*x,$=q[2]*x;et=q?-q[0]:et,ht=U/l,lt=(k+$)/l}else ht=k/l,lt=0;if(n.remeasure&&et>0){const q=a.measureText(G).width*1e3/r*l;if(et<q&&this.isFontSubpixelAAEnabled){const U=et/q;B=!0,a.save(),a.scale(U,1),ht/=U}else et!==q&&(ht+=(et-q)/2e3*r/l)}if(this.contentVisible&&(D.isInFont||n.missingFile)){if(E&&!Q)a.fillText(G,ht,lt);else if(this.paintChar(G,ht,lt,S,_),Q){const q=ht+r*Q.offset.x/l,U=lt-r*Q.offset.y/l;this.paintChar(Q.fontChar,q,U,S,_)}}const Et=y?et*x-H*d:et*x+H*d;k+=Et,B&&a.restore()}y?e.y-=k:e.x+=k*p,a.restore(),this.compose()}showType3Text(t){const e=this.ctx,n=this.current,r=n.font,a=n.fontSize,l=n.fontDirection,c=r.vertical?1:-1,h=n.charSpacing,d=n.wordSpacing,p=n.textHScale*l,m=n.fontMatrix||kh,y=t.length,w=n.textRenderingMode===_e.INVISIBLE;let A,x,E,S;if(!(w||a===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),n.textMatrix&&e.transform(...n.textMatrix),e.translate(n.x,n.y+n.textRise),e.scale(p,l),A=0;A<y;++A){if(x=t[A],typeof x=="number"){S=c*x*a/1e3,this.ctx.translate(S,0),n.x+=S*p;continue}const _=(x.isSpace?d:0)+h,C=r.charProcOperatorList[x.operatorListId];C?this.contentVisible&&(this.save(),e.scale(a,a),e.transform(...m),this.executeOperatorList(C),this.restore()):St(`Type3 character "${x.operatorListId}" is not available.`);const R=[x.width,0];ct.applyTransform(R,m),E=R[0]*a+_,e.translate(E,0),n.x+=E*p}e.restore()}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,n,r,a,l){const c=new Path2D;c.rect(n,r,a-n,l-r),this.ctx.clip(c),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const n=this.baseTransform||Xt(this.ctx),r={createCanvasGraphics:a=>new Gs(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new Ld(t,this.ctx,r,n)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t){this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t){this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let n;return this.cachedPatterns.has(t)?n=this.cachedPatterns.get(t):(n=D_(this.getObject(t)),this.cachedPatterns.set(t,n)),e&&(n.matrix=e),n}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const n=this._getPattern(t);e.fillStyle=n.getPattern(e,this,On(e),Ae.SHADING);const r=On(e);if(r){const{width:a,height:l}=e.canvas,c=Us.slice();ct.axialAlignedBoundingBox([0,0,a,l],r,c);const[h,d,p,m]=c;this.ctx.fillRect(h,d,p-h,m-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Ot("Should not call beginInlineImage")}beginImageData(){Ot("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=Xt(this.ctx),e)){ct.axialAlignedBoundingBox(e,this.baseTransform,this.current.minMax);const[n,r,a,l]=e,c=new Path2D;c.rect(n,r,a-n,l-r),this.ctx.clip(c),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||Ll("TODO: Support non-isolated groups."),t.knockout&&St("Knockout groups not supported.");const n=Xt(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let r=Us.slice();ct.axialAlignedBoundingBox(t.bbox,Xt(e),r);const a=[0,0,e.canvas.width,e.canvas.height];r=ct.intersect(r,a)||[0,0,0,0];const l=Math.floor(r[0]),c=Math.floor(r[1]),h=Math.max(Math.ceil(r[2])-l,1),d=Math.max(Math.ceil(r[3])-c,1);this.current.startNewPathAndClipBox([0,0,h,d]);let p="groupAt"+this.groupLevel;t.smask&&(p+="_smask_"+this.smaskCounter++%2);const m=this.cachedCanvases.getCanvas(p,h,d),y=m.context;y.translate(-l,-c),y.transform(...n);let w=new Path2D;const[A,x,E,S]=t.bbox;if(w.rect(A,x,E-A,S-x),t.matrix){const _=new Path2D;_.addPath(w,new DOMMatrix(t.matrix)),w=_}y.clip(w),t.smask?this.smaskStack.push({canvas:m.canvas,context:y,offsetX:l,offsetY:c,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(l,c),e.save()),Gr(e,y),this.ctx=y,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=Xt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const a=Us.slice();ct.axialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],r,a),this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(a)}}beginAnnotation(t,e,n,r,a){if(this.#t(),il(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const l=e[2]-e[0],c=e[3]-e[1];if(a&&this.annotationCanvasMap){n=n.slice(),n[4]-=e[0],n[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=l,e[3]=c,ct.singularValueDecompose2dScale(Xt(this.ctx),Je);const{viewportScale:h}=this,d=Math.ceil(l*this.outputScaleX*h),p=Math.ceil(c*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(d,p);const{canvas:m,context:y}=this.annotationCanvas;this.annotationCanvasMap.set(t,m),this.annotationCanvas.savedCtx=this.ctx,this.ctx=y,this.ctx.save(),this.ctx.setTransform(Je[0],0,0,-Je[1],0,c*Je[1]),il(this.ctx)}else{il(this.ctx),this.endPath();const h=new Path2D;h.rect(e[0],e[1],l,c),this.ctx.clip(h)}}this.current=new wy(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const n=this.ctx,r=this._createMaskCanvas(t),a=r.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(a,r.offsetX,r.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n=0,r=0,a,l){if(!this.contentVisible)return;t=this.getObject(t.data,t);const c=this.ctx;c.save();const h=Xt(c);c.transform(e,n,r,a,0,0);const d=this._createMaskCanvas(t);c.setTransform(1,0,0,1,d.offsetX-h[4],d.offsetY-h[5]);for(let p=0,m=l.length;p<m;p+=2){const y=ct.transform(h,[e,n,r,a,l[p],l[p+1]]);c.drawImage(d.canvas,y[4],y[5])}c.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,n=this.current.fillColor,r=this.current.patternFill;for(const a of t){const{data:l,width:c,height:h,transform:d}=a,p=this.cachedCanvases.getCanvas("maskCanvas",c,h),m=p.context;m.save();const y=this.getObject(l,a);Ay(m,y),m.globalCompositeOperation="source-in",m.fillStyle=r?n.getPattern(m,this,On(e),Ae.FILL):n,m.fillRect(0,0,c,h),m.restore(),e.save(),e.transform(...d),e.scale(1,-1),nl(e,p.canvas,0,0,c,h,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){St("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,n,r){if(!this.contentVisible)return;const a=this.getObject(t);if(!a){St("Dependent image isn't ready yet");return}const l=a.width,c=a.height,h=[];for(let d=0,p=r.length;d<p;d+=2)h.push({transform:[e,0,0,n,r[d],r[d+1]],x:0,y:0,w:l,h:c});this.paintInlineImageXObjectGroup(a,h)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:r}=t,a=this.cachedCanvases.getCanvas("inlineImage",n,r),l=a.context;return l.filter=this.current.transferMaps,l.drawImage(e,0,0),l.filter="none",a.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,n=t.height,r=this.ctx;this.save();const{filter:a}=r;a!=="none"&&a!==""&&(r.filter="none"),r.scale(1/e,-1/n);let l;if(t.bitmap)l=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)l=t;else{const d=this.cachedCanvases.getCanvas("inlineImage",e,n).context;xy(d,t),l=this.applyTransferMapsToCanvas(d)}const c=this._scaleImage(l,On(r));r.imageSmoothingEnabled=by(Xt(r),t.interpolate),nl(r,c.img,0,0,c.paintWidth,c.paintHeight,0,-n,e,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const n=this.ctx;let r;if(t.bitmap)r=t.bitmap;else{const a=t.width,l=t.height,h=this.cachedCanvases.getCanvas("inlineImage",a,l).context;xy(h,t),r=this.applyTransferMapsToCanvas(h)}for(const a of e)n.save(),n.transform(...a.transform),n.scale(1,-1),nl(n,r,a.x,a.y,a.w,a.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t,e){const n=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const r=this.ctx;this.pendingClip&&(n||(this.pendingClip===Sy?r.clip(t,"evenodd"):r.clip(t)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Xt(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),r=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,r)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:r,d:a}=this.ctx.getTransform();let l,c;if(n===0&&r===0){const h=Math.abs(e),d=Math.abs(a);if(h===d)if(t===0)l=c=1/h;else{const p=h*t;l=c=p<1?1/p:1}else if(t===0)l=1/h,c=1/d;else{const p=h*t,m=d*t;l=p<1?1/p:1,c=m<1?1/m:1}}else{const h=Math.abs(e*a-n*r),d=Math.hypot(e,n),p=Math.hypot(r,a);if(t===0)l=p/h,c=d/h;else{const m=t*h;l=p>m?p/m:1,c=d>m?d/m:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=c}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:n,current:{lineWidth:r}}=this,[a,l]=this.getScaleForStroking();if(a===l){n.lineWidth=(r||1)*a,n.stroke(t);return}const c=n.getLineDash();e&&n.save(),n.scale(a,l),nh.a=1/a,nh.d=1/l;const h=new Path2D;if(h.addPath(t,nh),c.length>0){const d=Math.max(a,l);n.setLineDash(c.map(p=>p/d)),n.lineDashOffset/=d}n.lineWidth=r||1,n.stroke(h),e&&n.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const s in mo)Gs.prototype[s]!==void 0&&(Gs.prototype[mo[s]]=Gs.prototype[s]);class ki{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class H_{#t;#e;constructor({parsedData:t,rawData:e}){this.#t=t,this.#e=e}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const Fs=Symbol("INTERNAL");class U_{#t=!1;#e=!1;#n=!1;#i=!0;constructor(t,{name:e,intent:n,usage:r,rbGroups:a}){this.#t=!!(t&Qe.DISPLAY),this.#e=!!(t&Qe.PRINT),this.name=e,this.intent=n,this.usage=r,this.rbGroups=a}get visible(){if(this.#n)return this.#i;if(!this.#i)return!1;const{print:t,view:e}=this.usage;return this.#t?e?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,e,n=!1){t!==Fs&&Ot("Internal method `_setVisible` called."),this.#n=n,this.#i=e}}class $_{#t=null;#e=new Map;#n=null;#i=null;constructor(t,e=Qe.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#i=t.order;for(const n of t.groups)this.#e.set(n.id,new U_(e,n));if(t.baseState==="OFF")for(const n of this.#e.values())n._setVisible(Fs,!1);for(const n of t.on)this.#e.get(n)._setVisible(Fs,!0);for(const n of t.off)this.#e.get(n)._setVisible(Fs,!1);this.#n=this.getHash()}}#r(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let r=1;r<e;r++){const a=t[r];let l;if(Array.isArray(a))l=this.#r(a);else if(this.#e.has(a))l=this.#e.get(a).visible;else return St(`Optional content group not found: ${a}`),!0;switch(n){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return n==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return Ll("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(St(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#r(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!this.#e.has(e))return St(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!this.#e.has(e))return St(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!this.#e.has(e))return St(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!this.#e.has(e))return St(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!1}return!0}return St(`Unknown optional content policy ${t.policy}.`),!0}return St(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){const r=this.#e.get(t);if(!r){St(`Optional content group not found: ${t}`);return}if(n&&e&&r.rbGroups.length)for(const a of r.rbGroups)for(const l of a)l!==t&&this.#e.get(l)?._setVisible(Fs,!1,!0);r._setVisible(Fs,!!e,!0),this.#t=null}setOCGState({state:t,preserveRB:e}){let n;for(const r of t){switch(r){case"ON":case"OFF":case"Toggle":n=r;continue}const a=this.#e.get(r);if(a)switch(n){case"ON":this.setVisibility(r,!0,e);break;case"OFF":this.setVisibility(r,!1,e);break;case"Toggle":this.setVisibility(r,!a.visible,e);break}}this.#t=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#e.size?this.#i?this.#i.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new Mv;for(const[e,n]of this.#e)t.update(`${e}:${n.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class W_{constructor(t,{disableRange:e=!1,disableStream:n=!1}){ce(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:a,progressiveDone:l,contentDispositionFilename:c}=t;if(this._queuedChunks=[],this._progressiveDone=l,this._contentDispositionFilename=c,a?.length>0){const h=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(h)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((h,d)=>{this._onReceiveData({begin:h,chunk:d})}),t.addProgressListener((h,d)=>{this._onProgress({loaded:h,total:d})}),t.addProgressiveReadListener(h=>{this._onReceiveData({chunk:h})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const r=this._rangeReaders.some(function(a){return a._begin!==t?!1:(a._enqueue(n),!0)});ce(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){ce(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new G_(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new X_(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}}class G_{constructor(t,e,n=!1,r=null){this._stream=t,this._done=n||!1,this._filename=Il(r)?r:null,this._queuedChunks=e||[],this._loaded=0;for(const a of this._queuedChunks)this._loaded+=a.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class X_{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function K_(s){let t=!0,e=n("filename\\*","i").exec(s);if(e){e=e[1];let p=c(e);return p=unescape(p),p=h(p),p=d(p),a(p)}if(e=l(s),e){const p=d(e);return a(p)}if(e=n("filename","i").exec(s),e){e=e[1];let p=c(e);return p=d(p),a(p)}function n(p,m){return new RegExp("(?:^|;)\\s*"+p+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',m)}function r(p,m){if(p){if(!/^[\x00-\xFF]+$/.test(m))return m;try{const y=new TextDecoder(p,{fatal:!0}),w=_o(m);m=y.decode(w),t=!1}catch{}}return m}function a(p){return t&&/[\x80-\xff]/.test(p)&&(p=r("utf-8",p),t&&(p=r("iso-8859-1",p))),p}function l(p){const m=[];let y;const w=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(y=w.exec(p))!==null;){let[,x,E,S]=y;if(x=parseInt(x,10),x in m){if(x===0)break;continue}m[x]=[E,S]}const A=[];for(let x=0;x<m.length&&x in m;++x){let[E,S]=m[x];S=c(S),E&&(S=unescape(S),x===0&&(S=h(S))),A.push(S)}return A.join("")}function c(p){if(p.startsWith('"')){const m=p.slice(1).split('\\"');for(let y=0;y<m.length;++y){const w=m[y].indexOf('"');w!==-1&&(m[y]=m[y].slice(0,w),m.length=y+1),m[y]=m[y].replaceAll(/\\(.)/g,"$1")}p=m.join('"')}return p}function h(p){const m=p.indexOf("'");if(m===-1)return p;const y=p.slice(0,m),A=p.slice(m+1).replace(/^[^']*'/,"");return r(y,A)}function d(p){return!p.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(p)?p:p.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(m,y,w,A){if(w==="q"||w==="Q")return A=A.replaceAll("_"," "),A=A.replaceAll(/=([0-9a-fA-F]{2})/g,function(x,E){return String.fromCharCode(parseInt(E,16))}),r(y,A);try{A=atob(A)}catch{}return r(y,A)})}return""}function Vv(s,t){const e=new Headers;if(!s||!t||typeof t!="object")return e;for(const n in t){const r=t[n];r!==void 0&&e.append(n,r)}return e}function Dl(s){return URL.parse(s)?.origin??null}function zv({responseHeaders:s,isHttp:t,rangeChunkSize:e,disableRange:n}){const r={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(s.get("Content-Length"),10);return!Number.isInteger(a)||(r.suggestedLength=a,a<=2*e)||n||!t||s.get("Accept-Ranges")!=="bytes"||(s.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function Hv(s){const t=s.get("Content-Disposition");if(t){let e=K_(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Il(e))return e}return null}function Mo(s,t){return new go(`Unexpected server response (${s}) while retrieving PDF "${t}".`,s,s===404||s===0&&t.startsWith("file:"))}function Uv(s){return s===200||s===206}function $v(s,t,e){return{method:"GET",headers:s,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function Wv(s){return s instanceof Uint8Array?s.buffer:s instanceof ArrayBuffer?s:(St(`getArrayBuffer - unexpected data format: ${s}`),new Uint8Array(s).buffer)}class q_{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=Vv(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return ce(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Y_(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new Q_(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class Y_{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const n=new Headers(t.headers),r=e.url;fetch(r,$v(n,this._withCredentials,this._abortController)).then(a=>{if(t._responseOrigin=Dl(a.url),!Uv(a.status))throw Mo(a.status,r);this._reader=a.body.getReader(),this._headersCapability.resolve();const l=a.headers,{allowRangeRequests:c,suggestedLength:h}=zv({responseHeaders:l,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=h||this._contentLength,this._filename=Hv(l),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new ri("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:Wv(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class Q_{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const r=t.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const a=new Headers(t.headers);a.append("Range",`bytes=${e}-${n-1}`);const l=r.url;fetch(l,$v(a,this._withCredentials,this._abortController)).then(c=>{const h=Dl(c.url);if(h!==t._responseOrigin)throw new Error(`Expected range response-origin "${h}" to match "${t._responseOrigin}".`);if(!Uv(c.status))throw Mo(c.status,l);this._readCapability.resolve(),this._reader=c.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:Wv(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const ih=200,sh=206;function Z_(s){const t=s.response;return typeof t!="string"?t:_o(t).buffer}class J_{_responseOrigin=null;constructor({url:t,httpHeaders:e,withCredentials:n}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=Vv(this.isHttp,e),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,r=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[a,l]of this.headers)e.setRequestHeader(a,l);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),r.expectedStatus=sh):r.expectedStatus=ih,e.responseType="arraybuffer",ce(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),r.onHeadersReceived=t.onHeadersReceived,r.onDone=t.onDone,r.onError=t.onError,r.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){const n=this.pendingRequests[t];n&&n.onProgress?.(e)}onStateChange(t,e){const n=this.pendingRequests[t];if(!n)return;const r=n.xhr;if(r.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),r.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],r.status===0&&this.isHttp){n.onError(r.status);return}const a=r.status||ih;if(!(a===ih&&n.expectedStatus===sh)&&a!==n.expectedStatus){n.onError(r.status);return}const c=Z_(r);if(a===sh){const h=r.getResponseHeader("Content-Range"),d=/bytes (\d+)-(\d+)\/(\d+)/.exec(h);d?n.onDone({begin:parseInt(d[1],10),chunk:c}):(St('Missing or invalid "Content-Range" header.'),n.onError(0))}else c?n.onDone({begin:0,chunk:c}):n.onError(r.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class tT{constructor(t){this._source=t,this._manager=new J_(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return ce(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new eT(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new nT(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class eT{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=Dl(e.responseURL);const n=e.getAllResponseHeaders(),r=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(c=>{const[h,...d]=c.split(": ");return[h,d.join(": ")]}):[]),{allowRangeRequests:a,suggestedLength:l}=zv({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=Hv(r),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Mo(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class nT{constructor(t,e,n){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=Dl(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=Mo(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const iT=/^[a-z][a-z0-9\-+.]+:/i;function sT(s){if(iT.test(s))return new URL(s);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(s))}class rT{constructor(t){this.source=t,this.url=sT(t.url),ce(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return ce(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new oT(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new aT(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class oT{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=Mo(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new ri("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class aT{constructor(t,e,n){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=t.source;this._isStreamingSupported=!r.disableStream;const a=process.getBuiltinModule("fs");this._setReadableStream(a.createReadStream(this._url,{start:e,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Xr=Symbol("INITIAL_DATA");class Gv{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:Xr}}get(t,e=null){if(e){const r=this.#e(t);return r.promise.then(()=>e(r.data)),null}const n=this.#t[t];if(!n||n.data===Xr)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=this.#t[t];return!!e&&e.data!==Xr}delete(t){const e=this.#t[t];return!e||e.data===Xr?!1:(delete this.#t[t],!0)}resolve(t,e=null){const n=this.#e(t);n.data=e,n.resolve()}clear(){for(const t in this.#t){const{data:e}=this.#t[t];e?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:e}=this.#t[t];e!==Xr&&(yield[t,e])}}}const lT=1e5,Ey=30;let yo=class dn{#t=Promise.withResolvers();#e=null;#n=!1;#i=!!globalThis.FontInspector?.enabled;#r=null;#s=null;#o=0;#a=0;#u=null;#c=null;#d=0;#l=0;#p=Object.create(null);#g=[];#f=null;#h=[];#m=new WeakMap;#w=null;static#y=new Map;static#A=new Map;static#b=new WeakMap;static#v=null;static#E=new Set;constructor({textContentSource:t,container:e,viewport:n}){if(t instanceof ReadableStream)this.#f=t;else if(typeof t=="object")this.#f=new ReadableStream({start(h){h.enqueue(t),h.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#c=e,this.#l=n.scale*Pn.pixelRatio,this.#d=n.rotation,this.#s={div:null,properties:null,ctx:null};const{pageWidth:r,pageHeight:a,pageX:l,pageY:c}=n.rawDims;this.#w=[1,0,0,-1,-l,c+a],this.#a=r,this.#o=a,dn.#_(),Li(e,n),this.#t.promise.finally(()=>{dn.#E.delete(this),this.#s=null,this.#p=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=ve.platform;return _t(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#u.read().then(({value:e,done:n})=>{if(n){this.#t.resolve();return}this.#r??=e.lang,Object.assign(this.#p,e.styles),this.#k(e.items),t()},this.#t.reject)};return this.#u=this.#f.getReader(),dn.#E.add(this),t(),this.#t.promise}update({viewport:t,onBefore:e=null}){const n=t.scale*Pn.pixelRatio,r=t.rotation;if(r!==this.#d&&(e?.(),this.#d=r,Li(this.#c,{rotation:r})),n!==this.#l){e?.(),this.#l=n;const a={div:null,properties:null,ctx:dn.#P(this.#r)};for(const l of this.#h)a.properties=this.#m.get(l),a.div=l,this.#R(a)}}cancel(){const t=new ri("TextLayer task cancelled.");this.#u?.cancel(t).catch(()=>{}),this.#u=null,this.#t.reject(t)}get textDivs(){return this.#h}get textContentItemsStr(){return this.#g}#k(t){if(this.#n)return;this.#s.ctx??=dn.#P(this.#r);const e=this.#h,n=this.#g;for(const r of t){if(e.length>lT){St("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(r.str===void 0){if(r.type==="beginMarkedContentProps"||r.type==="beginMarkedContent"){const a=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),r.id&&this.#e.setAttribute("id",`${r.id}`),a.append(this.#e)}else r.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}n.push(r.str),this.#S(r)}}#S(t){const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#h.push(e);const r=ct.transform(this.#w,t.transform);let a=Math.atan2(r[1],r[0]);const l=this.#p[t.fontName];l.vertical&&(a+=Math.PI/2);let c=this.#i&&l.fontSubstitution||l.fontFamily;c=dn.fontFamilyMap.get(c)||c;const h=Math.hypot(r[2],r[3]),d=h*dn.#M(c,l,this.#r);let p,m;a===0?(p=r[4],m=r[5]-d):(p=r[4]+d*Math.sin(a),m=r[5]-d*Math.cos(a));const y="calc(var(--total-scale-factor) *",w=e.style;this.#e===this.#c?(w.left=`${(100*p/this.#a).toFixed(2)}%`,w.top=`${(100*m/this.#o).toFixed(2)}%`):(w.left=`${y}${p.toFixed(2)}px)`,w.top=`${y}${m.toFixed(2)}px)`),w.fontSize=`${y}${(dn.#v*h).toFixed(2)}px)`,w.fontFamily=c,n.fontSize=h,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#i&&(e.dataset.fontName=l.fontSubstitutionLoadedName||t.fontName),a!==0&&(n.angle=a*(180/Math.PI));let A=!1;if(t.str.length>1)A=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const x=Math.abs(t.transform[0]),E=Math.abs(t.transform[3]);x!==E&&Math.max(x,E)/Math.min(x,E)>1.5&&(A=!0)}if(A&&(n.canvasWidth=l.vertical?t.height:t.width),this.#m.set(e,n),this.#s.div=e,this.#s.properties=n,this.#R(this.#s),n.hasText&&this.#e.append(e),n.hasEOL){const x=document.createElement("br");x.setAttribute("role","presentation"),this.#e.append(x)}}#R(t){const{div:e,properties:n,ctx:r}=t,{style:a}=e;let l="";if(dn.#v>1&&(l=`scale(${1/dn.#v})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:c}=a,{canvasWidth:h,fontSize:d}=n;dn.#T(r,d*this.#l,c);const{width:p}=r.measureText(e.textContent);p>0&&(l=`scaleX(${h*this.#l/p}) ${l}`)}n.angle!==0&&(l=`rotate(${n.angle}deg) ${l}`),l.length>0&&(a.transform=l)}static cleanup(){if(!(this.#E.size>0)){this.#y.clear();for(const{canvas:t}of this.#A.values())t.remove();this.#A.clear()}}static#P(t=null){let e=this.#A.get(t||="");if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#A.set(t,e),this.#b.set(e,{size:0,family:""})}return e}static#T(t,e,n){const r=this.#b.get(t);e===r.size&&n===r.family||(t.font=`${e}px ${n}`,r.size=e,r.family=n)}static#_(){if(this.#v!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#v=t.getBoundingClientRect().height,t.remove()}static#M(t,e,n){const r=this.#y.get(t);if(r)return r;const a=this.#P(n);a.canvas.width=a.canvas.height=Ey,this.#T(a,Ey,t);const l=a.measureText(""),c=l.fontBoundingBoxAscent,h=Math.abs(l.fontBoundingBoxDescent);a.canvas.width=a.canvas.height=0;let d=.8;return c?d=c/(c+h):(ve.platform.isFirefox&&St("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?d=e.ascent:e.descent&&(d=1+e.descent)),this.#y.set(t,d),d}};class vo{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function r(a){if(!a)return;let l=null;const c=a.name;if(c==="#text")l=a.value;else if(vo.shouldBuildText(c))a?.attributes?.textContent?l=a.attributes.textContent:a.value&&(l=a.value);else return;if(l!==null&&e.push({str:l}),!!a.children)for(const h of a.children)r(h)}return r(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const cT=100;function Md(s={}){typeof s=="string"||s instanceof URL?s={url:s}:(s instanceof ArrayBuffer||ArrayBuffer.isView(s))&&(s={data:s});const t=new Id,{docId:e}=t,n=s.url?w_(s.url):null,r=s.data?x_(s.data):null,a=s.httpHeaders||null,l=s.withCredentials===!0,c=s.password??null,h=s.range instanceof Dd?s.range:null,d=Number.isInteger(s.rangeChunkSize)&&s.rangeChunkSize>0?s.rangeChunkSize:2**16;let p=s.worker instanceof Zs?s.worker:null;const m=s.verbosity,y=typeof s.docBaseUrl=="string"&&!Po(s.docBaseUrl)?s.docBaseUrl:null,w=tl(s.cMapUrl),A=s.cMapPacked!==!1,x=s.CMapReaderFactory||(Me?T_:dy),E=tl(s.iccUrl),S=tl(s.standardFontDataUrl),_=s.StandardFontDataFactory||(Me?P_:fy),C=tl(s.wasmUrl),R=s.WasmFactory||(Me?k_:py),k=s.stopAtErrors!==!0,I=Number.isInteger(s.maxImageSize)&&s.maxImageSize>-1?s.maxImageSize:-1,D=s.isEvalSupported!==!1,B=typeof s.isOffscreenCanvasSupported=="boolean"?s.isOffscreenCanvasSupported:!Me,H=typeof s.isImageDecoderSupported=="boolean"?s.isImageDecoderSupported:!Me&&(ve.platform.isFirefox||!globalThis.chrome),G=Number.isInteger(s.canvasMaxAreaInBytes)?s.canvasMaxAreaInBytes:-1,Q=typeof s.disableFontFace=="boolean"?s.disableFontFace:Me,ht=s.fontExtraProperties===!0,lt=s.enableXfa===!0,et=s.ownerDocument||globalThis.document,Et=s.disableRange===!0,q=s.disableStream===!0,U=s.disableAutoFetch===!0,$=s.pdfBug===!0,J=s.CanvasFactory||(Me?__:S_),Z=s.FilterFactory||(Me?C_:E_),N=s.enableHWA===!0,z=s.useWasm!==!1,nt=h?h.length:s.length??NaN,dt=typeof s.useSystemFonts=="boolean"?s.useSystemFonts:!Me&&!Q,wt=typeof s.useWorkerFetch=="boolean"?s.useWorkerFetch:!!(x===dy&&_===fy&&R===py&&w&&S&&C&&Qr(w,document.baseURI)&&Qr(S,document.baseURI)&&Qr(C,document.baseURI)),yt=null;e_(m);const ut={canvasFactory:new J({ownerDocument:et,enableHWA:N}),filterFactory:new Z({docId:e,ownerDocument:et}),cMapReaderFactory:wt?null:new x({baseUrl:w,isCompressed:A}),standardFontDataFactory:wt?null:new _({baseUrl:S}),wasmFactory:wt?null:new R({baseUrl:C})};p||(p=Zs.create({verbosity:m,port:ki.workerPort}),t._worker=p);const Ct={docId:e,apiVersion:"5.4.54",data:r,password:c,disableAutoFetch:U,rangeChunkSize:d,length:nt,docBaseUrl:y,enableXfa:lt,evaluatorOptions:{maxImageSize:I,disableFontFace:Q,ignoreErrors:k,isEvalSupported:D,isOffscreenCanvasSupported:B,isImageDecoderSupported:H,canvasMaxAreaInBytes:G,fontExtraProperties:ht,useSystemFonts:dt,useWasm:z,useWorkerFetch:wt,cMapUrl:w,iccUrl:E,standardFontDataUrl:S,wasmUrl:C}},kt={ownerDocument:et,pdfBug:$,styleElement:yt,loadingParams:{disableAutoFetch:U,enableXfa:lt}};return p.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const Pt=p.messageHandler.sendWithPromise("GetDocRequest",Ct,r?[r.buffer]:null);let Ne;if(h)Ne=new W_(h,{disableRange:Et,disableStream:q});else if(!r){if(!n)throw new Error("getDocument - no `url` parameter provided.");const en=Qr(n)?q_:Me?rT:tT;Ne=new en({url:n,length:nt,httpHeaders:a,withCredentials:l,rangeChunkSize:d,disableRange:Et,disableStream:q})}return Pt.then(en=>{if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const Rt=new Zr(e,en,p.port),Ft=new dT(Rt,t,Ne,kt,ut,N);t._transport=Ft,Rt.send("Ready",null)})}).catch(t._capability.reject),t}class Id{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${Id.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}let Dd=class{#t=Promise.withResolvers();#e=[];#n=[];#i=[];#r=[];constructor(t,e,n=!1,r=null){this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=r}addRangeListener(t){this.#r.push(t)}addProgressListener(t){this.#i.push(t)}addProgressiveReadListener(t){this.#n.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,e){for(const n of this.#r)n(t,e)}onDataProgress(t,e){this.#t.promise.then(()=>{for(const n of this.#i)n(t,e)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const e of this.#n)e(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,e){Ot("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class uT{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return _t(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class hT{#t=!1;constructor(t,e,n,r=!1){this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=r?new cy:null,this._pdfBug=r,this.commonObjs=n.commonObjs,this.objs=new Gv,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:r=0,dontFlip:a=!1}={}){return new To({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:r,dontFlip:a})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return _t(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:e=t.canvas,viewport:n,intent:r="display",annotationMode:a=Hn.ENABLE,transform:l=null,background:c=null,optionalContentConfigPromise:h=null,annotationCanvasMap:d=null,pageColors:p=null,printAnnotationStorage:m=null,isEditing:y=!1}){this._stats?.time("Overall");const w=this._transport.getRenderingIntent(r,a,m,y),{renderingIntent:A,cacheKey:x}=w;this.#t=!1,h||=this._transport.getOptionalContentConfig(A);let E=this._intentStates.get(x);E||(E=Object.create(null),this._intentStates.set(x,E)),E.streamReaderCancelTimeout&&(clearTimeout(E.streamReaderCancelTimeout),E.streamReaderCancelTimeout=null);const S=!!(A&Qe.PRINT);E.displayReadyCapability||(E.displayReadyCapability=Promise.withResolvers(),E.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(w));const _=k=>{E.renderTasks.delete(C),S&&(this.#t=!0),this.#e(),k?(C.capability.reject(k),this._abortOperatorList({intentState:E,reason:k instanceof Error?k:new Error(k)})):C.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},C=new $s({callback:_,params:{canvas:e,canvasContext:t,viewport:n,transform:l,background:c},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:E.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!S,pdfBug:this._pdfBug,pageColors:p,enableHWA:this._transport.enableHWA});(E.renderTasks||=new Set).add(C);const R=C.task;return Promise.all([E.displayReadyCapability.promise,h]).then(([k,I])=>{if(this.destroyed){_();return}if(this._stats?.time("Rendering"),!(I.renderingIntent&A))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");C.initializeGraphics({transparency:k,optionalContentConfig:I}),C.operatorListChanged()}).catch(_),R}getOperatorList({intent:t="display",annotationMode:e=Hn.ENABLE,printAnnotationStorage:n=null,isEditing:r=!1}={}){function a(){c.operatorList.lastChunk&&(c.opListReadCapability.resolve(c.operatorList),c.renderTasks.delete(h))}const l=this._transport.getRenderingIntent(t,e,n,r,!0);let c=this._intentStates.get(l.cacheKey);c||(c=Object.create(null),this._intentStates.set(l.cacheKey,c));let h;return c.opListReadCapability||(h=Object.create(null),h.operatorListChanged=a,c.opListReadCapability=Promise.withResolvers(),(c.renderTasks||=new Set).add(h),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(l)),c.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>vo.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,r){function a(){l.read().then(function({value:h,done:d}){if(d){n(c);return}c.lang??=h.lang,Object.assign(c.styles,h.styles),c.items.push(...h.items),a()},r)}const l=e.getReader(),c={items:[],styles:Object.create(null),lang:null};a()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const e=this.#e();return t&&e&&(this._stats&&=new cy),e}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,e){const n=this._intentStates.get(e);n&&(this._stats?.timeEnd("Page Request"),n.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let n=0,r=t.length;n<r;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:r}){const{map:a,transfer:l}=n,h=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:a,modifiedIds:r},l).getReader(),d=this._intentStates.get(e);d.streamReader=h;const p=()=>{h.read().then(({value:m,done:y})=>{if(y){d.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(m,d),p())},m=>{if(d.streamReader=null,!this._transport.destroyed){if(d.operatorList){d.operatorList.lastChunk=!0;for(const y of d.renderTasks)y.operatorListChanged();this.#e()}if(d.displayReadyCapability)d.displayReadyCapability.reject(m);else if(d.opListReadCapability)d.opListReadCapability.reject(m);else throw m}})};p()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof Ml){let r=cT;e.extraDelay>0&&e.extraDelay<1e3&&(r+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},r);return}}if(t.streamReader.cancel(new ri(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[r,a]of this._intentStates)if(a===t){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}var Pi,Cn,ii,es,Sl,ns,is,De,fl,Xv,Kv,Jr,qs,pl;const $t=class $t{constructor({name:t=null,port:e=null,verbosity:n=n_()}={}){Nn(this,De);Nn(this,Pi,Promise.withResolvers());Nn(this,Cn,null);Nn(this,ii,null);Nn(this,es,null);if(this.name=t,this.destroyed=!1,this.verbosity=n,e){if(Ut($t,is).has(e))throw new Error("Cannot use more than one PDFWorker per port.");Ut($t,is).set(e,this),Fn(this,De,Xv).call(this,e)}else Fn(this,De,Kv).call(this)}get promise(){return Ut(this,Pi).promise}get port(){return Ut(this,ii)}get messageHandler(){return Ut(this,Cn)}destroy(){this.destroyed=!0,Ut(this,es)?.terminate(),ze(this,es,null),Ut($t,is).delete(Ut(this,ii)),ze(this,ii,null),Ut(this,Cn)?.destroy(),ze(this,Cn,null)}static create(t){const e=Ut(this,is).get(t?.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new $t(t)}static get workerSrc(){if(ki.workerSrc)return ki.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return _t(this,"_setupFakeWorkerGlobal",(async()=>Ut(this,qs,pl)?Ut(this,qs,pl):(await import(this.workerSrc)).WorkerMessageHandler)())}};Pi=new WeakMap,Cn=new WeakMap,ii=new WeakMap,es=new WeakMap,Sl=new WeakMap,ns=new WeakMap,is=new WeakMap,De=new WeakSet,fl=function(){Ut(this,Pi).resolve(),Ut(this,Cn).send("configure",{verbosity:this.verbosity})},Xv=function(t){ze(this,ii,t),ze(this,Cn,new Zr("main","worker",t)),Ut(this,Cn).on("ready",()=>{}),Fn(this,De,fl).call(this)},Kv=function(){if(Ut($t,ns)||Ut($t,qs,pl)){Fn(this,De,Jr).call(this);return}let{workerSrc:t}=$t;try{$t._isSameOrigin(window.location,t)||(t=$t._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new Zr("main","worker",e),r=()=>{a.abort(),n.destroy(),e.terminate(),this.destroyed?Ut(this,Pi).reject(new Error("Worker was destroyed")):Fn(this,De,Jr).call(this)},a=new AbortController;e.addEventListener("error",()=>{Ut(this,es)||r()},{signal:a.signal}),n.on("test",c=>{if(a.abort(),this.destroyed||!c){r();return}ze(this,Cn,n),ze(this,ii,e),ze(this,es,e),Fn(this,De,fl).call(this)}),n.on("ready",c=>{if(a.abort(),this.destroyed){r();return}try{l()}catch{Fn(this,De,Jr).call(this)}});const l=()=>{const c=new Uint8Array;n.send("test",c,[c.buffer])};l();return}catch{Ll("The worker has been disabled.")}Fn(this,De,Jr).call(this)},Jr=function(){Ut($t,ns)||(St("Setting up fake worker."),ze($t,ns,!0)),$t._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){Ut(this,Pi).reject(new Error("Worker was destroyed"));return}const e=new b_;ze(this,ii,e);const n=`fake${km($t,Sl)._++}`,r=new Zr(n+"_worker",n,e);t.setup(r,e),ze(this,Cn,new Zr(n,n+"_worker",e)),Fn(this,De,fl).call(this)}).catch(t=>{Ut(this,Pi).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},qs=new WeakSet,pl=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Nn($t,qs),Nn($t,Sl,0),Nn($t,ns,!1),Nn($t,is,new WeakMap),Me&&(ze($t,ns,!0),ki.workerSrc||="./pdf.worker.mjs"),$t._isSameOrigin=(t,e)=>{const n=URL.parse(t);if(!n?.origin||n.origin==="null")return!1;const r=new URL(e,n);return n.origin===r.origin},$t._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},$t.fromPort=t=>{if(h_("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return $t.create(t)};let Zs=$t;class dT{#t=new Map;#e=new Map;#n=new Map;#i=new Map;#r=null;constructor(t,e,n,r,a,l){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new Gv,this.fontLoader=new y_({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.wasmFactory=a.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=l,this.setupMessageHandler()}#s(t,e=null){const n=this.#t.get(t);if(n)return n;const r=this.messageHandler.sendWithPromise(t,e);return this.#t.set(t,r),r}get annotationStorage(){return _t(this,"annotationStorage",new Pd)}getRenderingIntent(t,e=Hn.ENABLE,n=null,r=!1,a=!1){let l=Qe.DISPLAY,c=Rh;switch(t){case"any":l=Qe.ANY;break;case"display":break;case"print":l=Qe.PRINT;break;default:St(`getRenderingIntent - invalid intent: ${t}`)}const h=l&Qe.PRINT&&n instanceof Iv?n:this.annotationStorage;switch(e){case Hn.DISABLE:l+=Qe.ANNOTATIONS_DISABLE;break;case Hn.ENABLE:break;case Hn.ENABLE_FORMS:l+=Qe.ANNOTATIONS_FORMS;break;case Hn.ENABLE_STORAGE:l+=Qe.ANNOTATIONS_STORAGE,c=h.serializable;break;default:St(`getRenderingIntent - invalid annotationMode: ${e}`)}r&&(l+=Qe.IS_EDITING),a&&(l+=Qe.OPLIST);const{ids:d,hash:p}=h.modifiedIds,m=[l,c.hash,p];return{renderingIntent:l,cacheKey:m.join("_"),annotationStorageSerializable:c,modifiedIds:d}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const n of this.#e.values())t.push(n._destroy());this.#e.clear(),this.#n.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),yo.cleanup(),this._networkStream?.cancelAllRequests(new ri("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,r)=>{ce(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=a=>{this._lastProgress={loaded:a.loaded,total:a.total}},r.onPull=()=>{this._fullReader.read().then(function({value:a,done:l}){if(l){r.close();return}ce(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{r.error(a)})},r.onCancel=a=>{this._fullReader.cancel(a),r.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("ReaderHeadersReady",async n=>{await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:a,contentLength:l}=this._fullReader;return(!r||!a)&&(this._lastProgress&&e.onProgress?.(this._lastProgress),this._fullReader.onProgress=c=>{e.onProgress?.({loaded:c.loaded,total:c.total})}),{isStreamingSupported:r,isRangeSupported:a,contentLength:l}}),t.on("GetRangeReader",(n,r)=>{ce(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const a=this._networkStream.getRangeReader(n.begin,n.end);if(!a){r.close();return}r.onPull=()=>{a.read().then(function({value:l,done:c}){if(c){r.close();return}ce(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{r.error(l)})},r.onCancel=l=>{a.cancel(l),r.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new uT(n,this))}),t.on("DocException",n=>{e._capability.reject(Ue(n))}),t.on("PasswordRequest",n=>{this.#r=Promise.withResolvers();try{if(!e.onPassword)throw Ue(n);const r=a=>{a instanceof Error?this.#r.reject(a):this.#r.resolve({password:a})};e.onPassword(r,n.code)}catch(r){this.#r.reject(r)}return this.#r.promise}),t.on("DataLoaded",n=>{e.onProgress?.({loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;this.#e.get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,r,a])=>{if(this.destroyed||this.commonObjs.has(n))return null;switch(r){case"Font":if("error"in a){const d=a.error;St(`Error during font loading: ${d}`),this.commonObjs.resolve(n,d);break}const l=this._params.pdfBug&&globalThis.FontInspector?.enabled?(d,p)=>globalThis.FontInspector.fontAdded(d,p):null,c=new v_(a,l);this.fontLoader.bind(c).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!c.fontExtraProperties&&c.data&&(c.data=null),this.commonObjs.resolve(n,c)});break;case"CopyLocalImage":const{imageRef:h}=a;ce(h,"The imageRef must be defined.");for(const d of this.#e.values())for(const[,p]of d.objs)if(p?.ref===h)return p.dataLen?(this.commonObjs.resolve(n,structuredClone(p)),p.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,a);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),t.on("obj",([n,r,a,l])=>{if(this.destroyed)return;const c=this.#e.get(r);if(!c.objs.has(n)){if(c._intentStates.size===0){l?.bitmap?.close();return}switch(a){case"Image":case"Pattern":c.objs.resolve(n,l);break;default:throw new Error(`Got unknown object type ${a}`)}}}),t.on("DocProgress",n=>{this.destroyed||e.onProgress?.({loaded:n.loaded,total:n.total})}),t.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[n.type];if(!r)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&St("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=this.#n.get(e);if(n)return n;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(a=>{if(this.destroyed)throw new Error("Transport destroyed");a.refStr&&this.#i.set(a.refStr,t);const l=new hT(e,a,this,this._params.pdfBug);return this.#e.set(e,l),l});return this.#n.set(e,r),r}getPageIndex(t){return Lh(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#s("GetFieldObjects")}hasJSActions(){return this.#s("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#s("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#s("GetOptionalContentConfig").then(e=>new $_(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#t.get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(r=>({info:r[0],metadata:r[1]?new H_(r[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#e.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),yo.cleanup()}}cachedPageNumber(t){if(!Lh(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#i.get(e)??null}}class fT{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this.#t;return t.form||t.canvas&&e?.size>0}}class $s{#t=null;static#e=new WeakSet;constructor({callback:t,params:e,objs:n,commonObjs:r,annotationCanvasMap:a,operatorList:l,pageIndex:c,canvasFactory:h,filterFactory:d,useRequestAnimationFrame:p=!1,pdfBug:m=!1,pageColors:y=null,enableHWA:w=!1}){this.callback=t,this.params=e,this.objs=n,this.commonObjs=r,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=c,this.canvasFactory=h,this.filterFactory=d,this._pdfBug=m,this.pageColors=y,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=p===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new fT(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=w}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if($s.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");$s.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:r,background:a}=this.params,l=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Gs(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:n,transparency:t,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),$s.#e.delete(this._canvas),t||=new Ml(`Rendering cancelled, page ${this._pageIndex+1}`,e),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),$s.#e.delete(this._canvas),this.callback())))}}const qv="5.4.54",Yv="295fb3ec4";class Ze{#t=null;#e=null;#n;#i=null;#r=!1;#s=!1;#o=null;#a;#u=null;#c=null;static#d=null;static get _keyboardManager(){return _t(this,"_keyboardManager",new Ro([[["Escape","mac+Escape"],Ze.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Ze.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Ze.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Ze.prototype._moveToPrevious],[["Home","mac+Home"],Ze.prototype._moveToBeginning],[["End","mac+End"],Ze.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#s=!1,this.#o=t):this.#s=!0,this.#c=t?._uiManager||e,this.#a=this.#c._eventBus,this.#n=t?.color?.toUpperCase()||this.#c?.highlightColors.values().next().value||"#FFFF98",Ze.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#o&&(t.ariaControls=`${this.#o.id}_colorpicker_dropdown`);const e=this.#c._signal;t.addEventListener("click",this.#f.bind(this),{signal:e}),t.addEventListener("keydown",this.#g.bind(this),{signal:e});const n=this.#e=document.createElement("span");return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=this.#n,t.append(n),t}renderMainDropdown(){const t=this.#i=this.#l();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#l(){const t=document.createElement("div"),e=this.#c._signal;t.addEventListener("contextmenu",tn,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#o&&(t.id=`${this.#o.id}_colorpicker_dropdown`);for(const[n,r]of this.#c.highlightColors){const a=document.createElement("button");a.tabIndex="0",a.role="option",a.setAttribute("data-color",r),a.title=n,a.setAttribute("data-l10n-id",Ze.#d[n]);const l=document.createElement("span");a.append(l),l.className="swatch",l.style.backgroundColor=r,a.ariaSelected=r===this.#n,a.addEventListener("click",this.#p.bind(this,r),{signal:e}),t.append(a)}return t.addEventListener("keydown",this.#g.bind(this),{signal:e}),t}#p(t,e){e.stopPropagation(),this.#a.dispatch("switchannotationeditorparams",{source:this,type:Lt.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#f(t);return}const e=t.target.getAttribute("data-color");e&&this.#p(e,t)}_moveToNext(t){if(!this.#m){this.#f(t);return}if(t.target===this.#t){this.#i.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#i?.firstChild||t.target===this.#t){this.#m&&this._hideDropdownFromKeyboard();return}this.#m||this.#f(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#m){this.#f(t);return}this.#i.firstChild?.focus()}_moveToEnd(t){if(!this.#m){this.#f(t);return}this.#i.lastChild?.focus()}#g(t){Ze._keyboardManager.exec(this,t)}#f(t){if(this.#m){this.hideDropdown();return}if(this.#r=t.detail===0,this.#u||(this.#u=new AbortController,window.addEventListener("pointerdown",this.#h.bind(this),{signal:this.#c.combinedSignal(this.#u)})),this.#t.ariaExpanded="true",this.#i){this.#i.classList.remove("hidden");return}const e=this.#i=this.#l();this.#t.append(e)}#h(t){this.#i?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#i?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#u?.abort(),this.#u=null}get#m(){return this.#i&&!this.#i.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#s){if(!this.#m){this.#o?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#r})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#i)return;const e=this.#c.highlightColors.values();for(const n of this.#i.children)n.ariaSelected=e.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#i?.remove(),this.#i=null}}class wo{#t=null;#e=null;#n=null;static#i=null;constructor(t){this.#e=t,this.#n=t._uiManager,wo.#i||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:e,colorValue:n}=this.#e,r=this.#t=document.createElement("input");return r.type="color",r.value=n||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",wo.#i[t]),r.addEventListener("input",()=>{this.#n.updateParams(e,r.value)},{signal:this.#n._signal}),r}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function Cy(s){return Math.floor(Math.max(0,Math.min(1,s))*255).toString(16).padStart(2,"0")}function Kr(s){return Math.max(0,Math.min(255,255*s))}class _y{static CMYK_G([t,e,n,r]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+r)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Kr(t),[t,t,t]}static G_HTML([t]){const e=Cy(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(Kr)}static RGB_HTML(t){return`#${t.map(Cy).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,r]){return["RGB",1-Math.min(1,t+r),1-Math.min(1,n+r),1-Math.min(1,e+r)]}static CMYK_rgb([t,e,n,r]){return[Kr(1-Math.min(1,t+r)),Kr(1-Math.min(1,n+r)),Kr(1-Math.min(1,e+r))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const r=1-t,a=1-e,l=1-n,c=Math.min(r,a,l);return["CMYK",r,a,l,c]}}class pT{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),n||(r.setAttribute("width",`${t}px`),r.setAttribute("height",`${e}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${t} ${e}`),r}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Ot("Abstract method `_createSVG` called.")}}class xo extends pT{_createSVG(t){return document.createElementNS(ni,t)}}class Nd{static setupStorage(t,e,n,r,a){const l=r.getValue(e,{value:null});switch(n.name){case"textarea":if(l.value!==null&&(t.textContent=l.value),a==="print")break;t.addEventListener("input",c=>{r.setValue(e,{value:c.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(l.value===n.attributes.xfaOn?t.setAttribute("checked",!0):l.value===n.attributes.xfaOff&&t.removeAttribute("checked"),a==="print")break;t.addEventListener("change",c=>{r.setValue(e,{value:c.target.checked?c.target.getAttribute("xfaOn"):c.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&t.setAttribute("value",l.value),a==="print")break;t.addEventListener("input",c=>{r.setValue(e,{value:c.target.value})})}break;case"select":if(l.value!==null){t.setAttribute("value",l.value);for(const c of n.children)c.attributes.value===l.value?c.attributes.selected=!0:c.attributes.hasOwnProperty("selected")&&delete c.attributes.selected}t.addEventListener("input",c=>{const h=c.target.options,d=h.selectedIndex===-1?"":h[h.selectedIndex].value;r.setValue(e,{value:d})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:r,linkService:a}){const{attributes:l}=e,c=t instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${r}`);for(const[h,d]of Object.entries(l))if(d!=null)switch(h){case"class":d.length&&t.setAttribute(h,d.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",d);break;case"style":Object.assign(t.style,d);break;case"textContent":t.textContent=d;break;default:(!c||h!=="href"&&h!=="newWindow")&&t.setAttribute(h,d)}c&&a.addLinkAttributes(t,l.href,l.newWindow),n&&l.dataId&&this.setupStorage(t,l.dataId,e,n)}static render(t){const e=t.annotationStorage,n=t.linkService,r=t.xfaHtml,a=t.intent||"display",l=document.createElement(r.name);r.attributes&&this.setAttributes({html:l,element:r,intent:a,linkService:n});const c=a!=="richText",h=t.div;if(h.append(l),t.viewport){const m=`matrix(${t.viewport.transform.join(",")})`;h.style.transform=m}c&&h.setAttribute("class","xfaLayer xfaFont");const d=[];if(r.children.length===0){if(r.value){const m=document.createTextNode(r.value);l.append(m),c&&vo.shouldBuildText(r.name)&&d.push(m)}return{textDivs:d}}const p=[[r,-1,l]];for(;p.length>0;){const[m,y,w]=p.at(-1);if(y+1===m.children.length){p.pop();continue}const A=m.children[++p.at(-1)[1]];if(A===null)continue;const{name:x}=A;if(x==="#text"){const S=document.createTextNode(A.value);d.push(S),w.append(S);continue}const E=A?.attributes?.xmlns?document.createElementNS(A.attributes.xmlns,x):document.createElement(x);if(w.append(E),A.attributes&&this.setAttributes({html:E,element:A,storage:e,intent:a,linkService:n}),A.children?.length>0)p.push([A,-1,E]);else if(A.value){const S=document.createTextNode(A.value);c&&vo.shouldBuildText(x)&&d.push(S),E.append(S)}}for(const m of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:d}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const mT=9,as=new WeakSet,gT=new Date().getTimezoneOffset()*60*1e3;class Ty{static create(t){switch(t.data.annotationType){case ee.LINK:return new Fd(t);case ee.TEXT:return new yT(t);case ee.WIDGET:switch(t.data.fieldType){case"Tx":return new vT(t);case"Btn":return t.data.radioButton?new Qv(t):t.data.checkBox?new xT(t):new AT(t);case"Ch":return new bT(t);case"Sig":return new wT(t)}return new us(t);case ee.POPUP:return new Ih(t);case ee.FREETEXT:return new Zv(t);case ee.LINE:return new ET(t);case ee.SQUARE:return new CT(t);case ee.CIRCLE:return new _T(t);case ee.POLYLINE:return new Jv(t);case ee.CARET:return new PT(t);case ee.INK:return new Od(t);case ee.POLYGON:return new TT(t);case ee.HIGHLIGHT:return new tw(t);case ee.UNDERLINE:return new kT(t);case ee.SQUIGGLY:return new RT(t);case ee.STRIKEOUT:return new LT(t);case ee.STAMP:return new ew(t);case ee.FILEATTACHMENT:return new MT(t);default:return new re(t)}}}class re{#t=null;#e=!1;#n=null;constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:r=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(n)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t?.str||e?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return re._hasPopupData(this.data)}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:e,popup:n}=t;e&&this.#i(e);let r=this.#n?.popup||this.popup;!r&&n?.text&&(this._createPopup(n),r=this.#n.popup),r&&(r.updateEdited(t),n?.deleted&&(r.remove(),this.#n=null,this.popup=null))}resetEdited(){this.#t&&(this.#i(this.#t.rect),this.#n?.popup.resetEdited(),this.#t=null)}#i(t){const{container:{style:e},data:{rect:n,rotation:r},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:l,pageX:c,pageY:h}}}}=this;n?.splice(0,4,...t),e.left=`${100*(t[0]-c)/a}%`,e.top=`${100*(l-t[3]+h)/l}%`,r===0?(e.width=`${100*(t[2]-t[0])/a}%`,e.height=`${100*(t[3]-t[1])/l}%`):this.setRotation(r)}_createContainer(t){const{data:e,parent:{page:n,viewport:r}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",e.id),!(this instanceof us)&&!(this instanceof Fd)&&(a.tabIndex=0);const{style:l}=a;if(l.zIndex=this.parent.zIndex++,e.alternativeText&&(a.title=e.alternativeText),e.noRotate&&a.classList.add("norotate"),!e.rect||this instanceof Ih){const{rotation:x}=e;return!e.hasOwnCanvas&&x!==0&&this.setRotation(x,a),a}const{width:c,height:h}=this;if(!t&&e.borderStyle.width>0){l.borderWidth=`${e.borderStyle.width}px`;const x=e.borderStyle.horizontalCornerRadius,E=e.borderStyle.verticalCornerRadius;if(x>0||E>0){const _=`calc(${x}px * var(--total-scale-factor)) / calc(${E}px * var(--total-scale-factor))`;l.borderRadius=_}else if(this instanceof Qv){const _=`calc(${c}px * var(--total-scale-factor)) / calc(${h}px * var(--total-scale-factor))`;l.borderRadius=_}switch(e.borderStyle.style){case Ns.SOLID:l.borderStyle="solid";break;case Ns.DASHED:l.borderStyle="dashed";break;case Ns.BEVELED:St("Unimplemented border style: beveled");break;case Ns.INSET:St("Unimplemented border style: inset");break;case Ns.UNDERLINE:l.borderBottomStyle="solid";break}const S=e.borderColor||null;S?(this.#e=!0,l.borderColor=ct.makeHexColor(S[0]|0,S[1]|0,S[2]|0)):l.borderWidth=0}const d=ct.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:p,pageHeight:m,pageX:y,pageY:w}=r.rawDims;l.left=`${100*(d[0]-y)/p}%`,l.top=`${100*(d[1]-w)/m}%`;const{rotation:A}=e;return e.hasOwnCanvas||A===0?(l.width=`${100*c/p}%`,l.height=`${100*h/m}%`):this.setRotation(A,a),a}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:r}=this.parent.viewport.rawDims;let{width:a,height:l}=this;t%180!==0&&([a,l]=[l,a]),e.style.width=`${100*a/n}%`,e.style.height=`${100*l/r}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,r)=>{const a=r.detail[e],l=a[0],c=a.slice(1);r.target.style[n]=_y[`${l}_HTML`](c),this.annotationStorage.setValue(this.data.id,{[n]:_y[`${l}_rgb`](c)})};return _t(this,"_commonActions",{display:e=>{const{display:n}=e.detail,r=n%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const r of Object.keys(e.detail))(t[r]||n[r])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[r,a]of Object.entries(e)){const l=n[r];if(l){const c={detail:{[r]:a},target:t};l(c),delete e[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,r,a]=this.data.rect.map(x=>Math.fround(x));if(t.length===8){const[x,E,S,_]=t.subarray(2,6);if(r===x&&a===E&&e===S&&n===_)return}const{style:l}=this.container;let c;if(this.#e){const{borderColor:x,borderWidth:E}=l;l.borderWidth=0,c=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${x}" stroke-width="${E}">`],this.container.classList.add("hasBorder")}const h=r-e,d=a-n,{svgFactory:p}=this,m=p.createElement("svg");m.classList.add("quadrilateralsContainer"),m.setAttribute("width",0),m.setAttribute("height",0),m.role="none";const y=p.createElement("defs");m.append(y);const w=p.createElement("clipPath"),A=`clippath_${this.data.id}`;w.setAttribute("id",A),w.setAttribute("clipPathUnits","objectBoundingBox"),y.append(w);for(let x=2,E=t.length;x<E;x+=8){const S=t[x],_=t[x+1],C=t[x+2],R=t[x+3],k=p.createElement("rect"),I=(C-e)/h,D=(a-_)/d,B=(S-C)/h,H=(_-R)/d;k.setAttribute("x",I),k.setAttribute("y",D),k.setAttribute("width",B),k.setAttribute("height",H),w.append(k),c?.push(`<rect vector-effect="non-scaling-stroke" x="${I}" y="${D}" width="${B}" height="${H}"/>`)}this.#e&&(c.push("</g></svg>')"),l.backgroundImage=c.join("")),this.container.append(m),this.container.style.clipPath=`url(#${A})`}_createPopup(t=null){const{data:e}=this;let n,r;t?(n={str:t.text},r=t.date):(n=e.contentsObj,r=e.modificationDate);const a=this.#n=new Ih({data:{color:e.color,titleObj:e.titleObj,modificationDate:r,contentsObj:n,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]});this.parent.div.append(a.render())}get hasPopupElement(){return!!(this.#n||this.popup||this.data.popupRef)}render(){Ot("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const r=this._fieldObjects[t];if(r)for(const{page:a,id:l,exportValues:c}of r){if(a===-1||l===e)continue;const h=typeof c=="string"?c:null,d=document.querySelector(`[data-element-id="${l}"]`);if(d&&!as.has(d)){St(`_getElementsByName - element not allowed: ${l}`);continue}n.push({id:l,exportValue:h,domElement:d})}return n}for(const r of document.getElementsByName(t)){const{exportValue:a}=r,l=r.getAttribute("data-element-id");l!==e&&as.has(r)&&n.push({id:l,exportValue:a,domElement:r})}return n}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class Fd extends re{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,n=document.createElement("a");n.setAttribute("data-element-id",t.id);let r=!1;return t.url?(e.addLinkAttributes(n,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(n,t.action,t.overlaidText),r=!0):t.attachment?(this.#e(n,t.attachment,t.overlaidText,t.attachmentDest),r=!0):t.setOCGState?(this.#n(n,t.setOCGState,t.overlaidText),r=!0):t.dest?(this._bindLink(n,t.dest,t.overlaidText),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,t),r=!0),t.resetForm?(this._bindResetFormAction(n,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(n,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(n),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e,n=""){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#t(),n&&(t.title=n)}_bindNamedAction(t,e,n=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),n&&(t.title=n),this.#t()}#e(t,e,n="",r=null){t.href=this.linkService.getAnchorUrl(""),e.description?t.title=e.description:n&&(t.title=n),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,r),!1),this.#t()}#n(t,e,n=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),n&&(t.title=n),this.#t()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(e.actions)){const a=n.get(r);a&&(t[a]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:r}}),!1))}e.overlaidText&&(t.title=e.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,e){const n=t.onclick;if(n||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){St('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(t.onclick=()=>!1);return}t.onclick=()=>{n?.();const{fields:r,refs:a,include:l}=e,c=[];if(r.length!==0||a.length!==0){const p=new Set(a);for(const m of r){const y=this._fieldObjects[m]||[];for(const{id:w}of y)p.add(w)}for(const m of Object.values(this._fieldObjects))for(const y of m)p.has(y.id)===l&&c.push(y)}else for(const p of Object.values(this._fieldObjects))c.push(...p);const h=this.annotationStorage,d=[];for(const p of c){const{id:m}=p;switch(d.push(m),p.type){case"text":{const w=p.defaultValue||"";h.setValue(m,{value:w});break}case"checkbox":case"radiobutton":{const w=p.defaultValue===p.exportValues;h.setValue(m,{value:w});break}case"combobox":case"listbox":{const w=p.defaultValue||"";h.setValue(m,{value:w});break}default:continue}const y=document.querySelector(`[data-element-id="${m}"]`);if(y){if(!as.has(y)){St(`_bindResetFormAction - element not allowed: ${m}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}}),!1}}}class yT extends re{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class us extends re{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return ve.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,r,a){n.includes("mouse")?t.addEventListener(n,l=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:a(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):t.addEventListener(n,l=>{if(n==="blur"){if(!e.focused||!l.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}a&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:a(l)}})})}_setEventListeners(t,e,n,r){for(const[a,l]of n)(l==="Action"||this.data.actions?.[l])&&((l==="Focus"||l==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,a,l,r),l==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):l==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":ct.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||mT,a=t.style;let l;const c=2,h=d=>Math.round(10*d)/10;if(this.data.multiLine){const d=Math.abs(this.data.rect[3]-this.data.rect[1]-c),p=Math.round(d/(Qu*r))||1,m=d/p;l=Math.min(r,h(m/Qu))}else{const d=Math.abs(this.data.rect[3]-this.data.rect[1]-c);l=Math.min(r,h(d/Qu))}a.fontSize=`calc(${l}px * var(--total-scale-factor))`,a.color=ct.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(a.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class vT extends us{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,r){const a=this.annotationStorage;for(const l of this._getElementsByName(t.name,t.id))l.domElement&&(l.domElement[e]=n),a.setValue(l.id,{[r]:n})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const r=t.getValue(e,{value:this.data.fieldValue});let a=r.value||"";const l=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;l&&a.length>l&&(a=a.slice(0,l));let c=r.formattedValue||this.data.textContent?.join(`
`)||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const h={userValue:a,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=c??a,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",c??a),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),as.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:d,datetimeType:p,timeStep:m}=this.data,y=!!p&&this.enableScripting;d&&(n.title=d),this._setRequired(n,this.data.required),l&&(n.maxLength=l),n.addEventListener("input",A=>{t.setValue(e,{value:A.target.value}),this.setPropertyOnSiblings(n,"value",A.target.value,"value"),h.formattedValue=null}),n.addEventListener("resetform",A=>{const x=this.data.defaultFieldValue??"";n.value=h.userValue=x,h.formattedValue=null});let w=A=>{const{formattedValue:x}=h;x!=null&&(A.target.value=x),A.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",x=>{if(h.focused)return;const{target:E}=x;if(y&&(E.type=p,m&&(E.step=m)),h.userValue){const S=h.userValue;if(y)if(p==="time"){const _=new Date(S),C=[_.getHours(),_.getMinutes(),_.getSeconds()];E.value=C.map(R=>R.toString().padStart(2,"0")).join(":")}else E.value=new Date(S-gT).toISOString().split(p==="date"?"T":".",1)[0];else E.value=S}h.lastCommittedValue=E.value,h.commitKey=1,this.data.actions?.Focus||(h.focused=!0)}),n.addEventListener("updatefromsandbox",x=>{this.showElementAndHideCanvas(x.target);const E={value(S){h.userValue=S.detail.value??"",y||t.setValue(e,{value:h.userValue.toString()}),S.target.value=h.userValue},formattedValue(S){const{formattedValue:_}=S.detail;h.formattedValue=_,_!=null&&S.target!==document.activeElement&&(S.target.value=_);const C={formattedValue:_};y&&(C.value=_),t.setValue(e,C)},selRange(S){S.target.setSelectionRange(...S.detail.selRange)},charLimit:S=>{const{charLimit:_}=S.detail,{target:C}=S;if(_===0){C.removeAttribute("maxLength");return}C.setAttribute("maxLength",_);let R=h.userValue;!R||R.length<=_||(R=R.slice(0,_),C.value=h.userValue=R,t.setValue(e,{value:R}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:R,willCommit:!0,commitKey:1,selStart:C.selectionStart,selEnd:C.selectionEnd}}))}};this._dispatchEventFromSandbox(E,x)}),n.addEventListener("keydown",x=>{h.commitKey=1;let E=-1;if(x.key==="Escape"?E=0:x.key==="Enter"&&!this.data.multiLine?E=2:x.key==="Tab"&&(h.commitKey=3),E===-1)return;const{value:S}=x.target;h.lastCommittedValue!==S&&(h.lastCommittedValue=S,h.userValue=S,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:S,willCommit:!0,commitKey:E,selStart:x.target.selectionStart,selEnd:x.target.selectionEnd}}))});const A=w;w=null,n.addEventListener("blur",x=>{if(!h.focused||!x.relatedTarget)return;this.data.actions?.Blur||(h.focused=!1);const{target:E}=x;let{value:S}=E;if(y){if(S&&p==="time"){const _=S.split(":").map(C=>parseInt(C,10));S=new Date(2e3,0,1,_[0],_[1],_[2]||0).valueOf(),E.step=""}else S=new Date(S).valueOf();E.type="text"}h.userValue=S,h.lastCommittedValue!==S&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:S,willCommit:!0,commitKey:h.commitKey,selStart:x.target.selectionStart,selEnd:x.target.selectionEnd}}),A(x)}),this.data.actions?.Keystroke&&n.addEventListener("beforeinput",x=>{h.lastCommittedValue=null;const{data:E,target:S}=x,{value:_,selectionStart:C,selectionEnd:R}=S;let k=C,I=R;switch(x.inputType){case"deleteWordBackward":{const D=_.substring(0,C).match(/\w*[^\w]*$/);D&&(k-=D[0].length);break}case"deleteWordForward":{const D=_.substring(C).match(/^[^\w]*\w*/);D&&(I+=D[0].length);break}case"deleteContentBackward":C===R&&(k-=1);break;case"deleteContentForward":C===R&&(I+=1);break}x.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:_,change:E||"",willCommit:!1,selStart:k,selEnd:I}})}),this._setEventListeners(n,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],x=>x.target.value)}if(w&&n.addEventListener("blur",w),this.data.comb){const x=(this.data.rect[2]-this.data.rect[0])/l;n.classList.add("comb"),n.style.letterSpacing=`calc(${x}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class wT extends us{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class xT extends us{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let r=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",t.setValue(n,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const a=document.createElement("input");return as.add(a),a.setAttribute("data-element-id",n),a.disabled=e.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=e.fieldName,r&&a.setAttribute("checked",!0),a.setAttribute("exportValue",e.exportValue),a.tabIndex=0,a.addEventListener("change",l=>{const{name:c,checked:h}=l.target;for(const d of this._getElementsByName(c,n)){const p=h&&d.exportValue===e.exportValue;d.domElement&&(d.domElement.checked=p),t.setValue(d.id,{value:p})}t.setValue(n,{value:h})}),a.addEventListener("resetform",l=>{const c=e.defaultFieldValue||"Off";l.target.checked=c===e.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",l=>{const c={value(h){h.target.checked=h.detail.value!=="Off",t.setValue(n,{value:h.target.checked})}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class Qv extends us{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let r=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof r=="string"&&(r=r!==e.buttonValue,t.setValue(n,{value:r})),r)for(const l of this._getElementsByName(e.fieldName,n))t.setValue(l.id,{value:!1});const a=document.createElement("input");if(as.add(a),a.setAttribute("data-element-id",n),a.disabled=e.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=e.fieldName,r&&a.setAttribute("checked",!0),a.tabIndex=0,a.addEventListener("change",l=>{const{name:c,checked:h}=l.target;for(const d of this._getElementsByName(c,n))t.setValue(d.id,{value:!1});t.setValue(n,{value:h})}),a.addEventListener("resetform",l=>{const c=e.defaultFieldValue;l.target.checked=c!=null&&c===e.buttonValue}),this.enableScripting&&this.hasJSActions){const l=e.buttonValue;a.addEventListener("updatefromsandbox",c=>{const h={value:d=>{const p=l===d.detail.value;for(const m of this._getElementsByName(d.target.name)){const y=p&&m.id===n;m.domElement&&(m.domElement.checked=y),t.setValue(m.id,{value:y})}}};this._dispatchEventFromSandbox(h,c)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class AT extends Fd{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class bT extends us{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),r=document.createElement("select");as.add(r),r.setAttribute("data-element-id",e),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",p=>{const m=this.data.defaultFieldValue;for(const y of r.options)y.selected=y.value===m});for(const p of this.data.options){const m=document.createElement("option");m.textContent=p.displayValue,m.value=p.exportValue,n.value.includes(p.exportValue)&&(m.setAttribute("selected",!0),a=!1),r.append(m)}let l=null;if(a){const p=document.createElement("option");p.value=" ",p.setAttribute("hidden",!0),p.setAttribute("selected",!0),r.prepend(p),l=()=>{p.remove(),r.removeEventListener("input",l),l=null},r.addEventListener("input",l)}const c=p=>{const m=p?"value":"textContent",{options:y,multiple:w}=r;return w?Array.prototype.filter.call(y,A=>A.selected).map(A=>A[m]):y.selectedIndex===-1?null:y[y.selectedIndex][m]};let h=c(!1);const d=p=>{const m=p.target.options;return Array.prototype.map.call(m,y=>({displayValue:y.textContent,exportValue:y.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",p=>{const m={value(y){l?.();const w=y.detail.value,A=new Set(Array.isArray(w)?w:[w]);for(const x of r.options)x.selected=A.has(x.value);t.setValue(e,{value:c(!0)}),h=c(!1)},multipleSelection(y){r.multiple=!0},remove(y){const w=r.options,A=y.detail.remove;w[A].selected=!1,r.remove(A),w.length>0&&Array.prototype.findIndex.call(w,E=>E.selected)===-1&&(w[0].selected=!0),t.setValue(e,{value:c(!0),items:d(y)}),h=c(!1)},clear(y){for(;r.length!==0;)r.remove(0);t.setValue(e,{value:null,items:[]}),h=c(!1)},insert(y){const{index:w,displayValue:A,exportValue:x}=y.detail.insert,E=r.children[w],S=document.createElement("option");S.textContent=A,S.value=x,E?E.before(S):r.append(S),t.setValue(e,{value:c(!0),items:d(y)}),h=c(!1)},items(y){const{items:w}=y.detail;for(;r.length!==0;)r.remove(0);for(const A of w){const{displayValue:x,exportValue:E}=A,S=document.createElement("option");S.textContent=x,S.value=E,r.append(S)}r.options.length>0&&(r.options[0].selected=!0),t.setValue(e,{value:c(!0),items:d(y)}),h=c(!1)},indices(y){const w=new Set(y.detail.indices);for(const A of y.target.options)A.selected=w.has(A.index);t.setValue(e,{value:c(!0)}),h=c(!1)},editable(y){y.target.disabled=!y.detail.editable}};this._dispatchEventFromSandbox(m,p)}),r.addEventListener("input",p=>{const m=c(!0),y=c(!1);t.setValue(e,{value:m}),p.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:h,change:y,changeEx:m,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],p=>p.target.value)):r.addEventListener("input",function(p){t.setValue(e,{value:c(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Ih extends re{constructor(t){const{data:e,elements:n}=t;super(t,{isRenderable:re._hasPopupData(e)}),this.elements=n,this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=new ST({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),n=[];for(const r of this.elements)r.popup=e,r.container.ariaHasPopup="dialog",n.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(r=>`${Cd}${r}`).join(",")),this.container}}class ST{#t=this.#R.bind(this);#e=this.#M.bind(this);#n=this.#_.bind(this);#i=this.#T.bind(this);#r=null;#s=null;#o=null;#a=null;#u=null;#c=null;#d=null;#l=!1;#p=null;#g=null;#f=null;#h=null;#m=null;#w=null;#y=null;#A=!1;constructor({container:t,color:e,elements:n,titleObj:r,modificationDate:a,contentsObj:l,richText:c,parent:h,rect:d,parentRect:p,open:m}){this.#s=t,this.#w=r,this.#o=l,this.#m=c,this.#c=h,this.#r=e,this.#h=d,this.#d=p,this.#u=n,this.#a=Al.toDateObject(a),this.trigger=n.flatMap(y=>y.getElementsToTriggerPopup()),this.#b(),this.#s.hidden=!0,m&&this.#T()}#b(){if(this.#g)return;this.#g=new AbortController;const{signal:t}=this.#g;for(const e of this.trigger)e.addEventListener("click",this.#i,{signal:t}),e.addEventListener("mouseenter",this.#n,{signal:t}),e.addEventListener("mouseleave",this.#e,{signal:t}),e.classList.add("popupTriggerArea");for(const e of this.#u)e.container?.addEventListener("keydown",this.#t,{signal:t})}render(){if(this.#p)return;const t=this.#p=document.createElement("div");if(t.className="popup",this.#r){const r=t.style.outlineColor=ct.makeHexColor(...this.#r);t.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`}const e=document.createElement("span");if(e.className="header",this.#w?.str){const r=document.createElement("span");r.className="title",e.append(r),{dir:r.dir,str:r.textContent}=this.#w}if(t.append(e),this.#a){const r=document.createElement("time");r.className="popupDate",r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#a.valueOf()})),r.dateTime=this.#a.toISOString(),e.append(r)}const n=this.#v;if(n)Nd.render({xfaHtml:n,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(this.#o);t.append(r)}this.#s.append(t)}get#v(){const t=this.#m,e=this.#o;return t?.str&&(!e?.str||e.str===t.str)&&this.#m.html||null}get#E(){return this.#v?.attributes?.style?.fontSize||0}get#k(){return this.#v?.attributes?.style?.color||null}#S(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},r={style:{color:this.#k,fontSize:this.#E?`calc(${this.#E}px * var(--total-scale-factor))`:""}};for(const a of t.split(`
`))e.push({name:"span",value:a,attributes:r});return n}_formatContents({str:t,dir:e}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=e;const r=t.split(/(?:\r\n?|\n)/);for(let a=0,l=r.length;a<l;++a){const c=r[a];n.append(document.createTextNode(c)),a<l-1&&n.append(document.createElement("br"))}return n}#R(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#l)&&this.#T()}updateEdited({rect:t,popup:e,deleted:n}){if(n||e?.deleted){this.remove();return}this.#b(),this.#y||={contentsObj:this.#o,richText:this.#m},t&&(this.#f=null),e&&(this.#m=this.#S(e.text),this.#a=Al.toDateObject(e.date),this.#o=null),this.#p?.remove(),this.#p=null}resetEdited(){this.#y&&({contentsObj:this.#o,richText:this.#m}=this.#y,this.#y=null,this.#p?.remove(),this.#p=null,this.#f=null)}remove(){this.#g?.abort(),this.#g=null,this.#p?.remove(),this.#p=null,this.#A=!1,this.#l=!1;for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#P(){if(this.#f!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:r,pageY:a}}}=this.#c;let l=!!this.#d,c=l?this.#d:this.#h;for(const A of this.#u)if(!c||ct.intersect(A.data.rect,c)!==null){c=A.data.rect,l=!0;break}const h=ct.normalizeRect([c[0],t[3]-c[1]+t[1],c[2],t[3]-c[3]+t[1]]),p=l?c[2]-c[0]+5:0,m=h[0]+p,y=h[1];this.#f=[100*(m-r)/e,100*(y-a)/n];const{style:w}=this.#s;w.left=`${this.#f[0]}%`,w.top=`${this.#f[1]}%`}#T(){this.#l=!this.#l,this.#l?(this.#_(),this.#s.addEventListener("click",this.#i),this.#s.addEventListener("keydown",this.#t)):(this.#M(),this.#s.removeEventListener("click",this.#i),this.#s.removeEventListener("keydown",this.#t))}#_(){this.#p||this.render(),this.isVisible?this.#l&&this.#s.classList.add("focused"):(this.#P(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#M(){this.#s.classList.remove("focused"),!(this.#l||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#A=this.isVisible,this.#A&&(this.#s.hidden=!0)}maybeShow(){this.#b(),this.#A&&(this.#p||this.#_(),this.#A=!1,this.#s.hidden=!1)}get isVisible(){return this.#s.hidden===!1}}class Zv extends re{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=bt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class ET extends re{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:e,height:n}=this,r=this.svgFactory.create(e,n,!0),a=this.#t=this.svgFactory.createElement("svg:line");return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class CT extends re{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:e,height:n}=this,r=this.svgFactory.create(e,n,!0),a=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:rect");return l.setAttribute("x",a/2),l.setAttribute("y",a/2),l.setAttribute("width",e-a),l.setAttribute("height",n-a),l.setAttribute("stroke-width",a||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class _T extends re{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:e,height:n}=this,r=this.svgFactory.create(e,n,!0),a=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:ellipse");return l.setAttribute("cx",e/2),l.setAttribute("cy",n/2),l.setAttribute("rx",e/2-a/2),l.setAttribute("ry",n/2-a/2),l.setAttribute("stroke-width",a||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Jv extends re{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:n,popupRef:r},width:a,height:l}=this;if(!e)return this.container;const c=this.svgFactory.create(a,l,!0);let h=[];for(let p=0,m=e.length;p<m;p+=2){const y=e[p]-t[0],w=t[3]-e[p+1];h.push(`${y},${w}`)}h=h.join(" ");const d=this.#t=this.svgFactory.createElement(this.svgElementName);return d.setAttribute("points",h),d.setAttribute("stroke-width",n.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),c.append(d),this.container.append(c),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class TT extends Jv{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class PT extends re{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Od extends re{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?bt.HIGHLIGHT:bt.INK}#n(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:n,borderStyle:r,popupRef:a}}=this,{transform:l,width:c,height:h}=this.#n(e,t),d=this.svgFactory.create(c,h,!0),p=this.#t=this.svgFactory.createElement("svg:g");d.append(p),p.setAttribute("stroke-width",r.width||1),p.setAttribute("stroke-linecap","round"),p.setAttribute("stroke-linejoin","round"),p.setAttribute("stroke-miterlimit",10),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),p.setAttribute("transform",l);for(let m=0,y=n.length;m<y;m++){const w=this.svgFactory.createElement(this.svgElementName);this.#e.push(w),w.setAttribute("points",n[m].join(",")),p.append(w)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(d),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:n,rect:r}=t,a=this.#t;if(e>=0&&a.setAttribute("stroke-width",e||1),n)for(let l=0,c=this.#e.length;l<c;l++)this.#e[l].setAttribute("points",n[l].join(","));if(r){const{transform:l,width:c,height:h}=this.#n(this.data.rotation,r);a.parentElement.setAttribute("viewBox",`0 0 ${c} ${h}`),a.setAttribute("transform",l)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class tw extends re{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=bt.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class kT extends re{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class RT extends re{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class LT extends re{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class ew extends re{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=bt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class MT extends re{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let n;e.hasAppearance||e.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),n.addEventListener("dblclick",this.#e.bind(this)),this.#t=n;const{isMac:r}=ve.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(r?a.metaKey:a.ctrlKey)&&this.#e()}),!e.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),t.append(n),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}let jd=class nw{#t=null;#e=null;#n=new Map;#i=null;constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:r,page:a,viewport:l,structTreeLayer:c}){this.div=t,this.#t=e,this.#e=n,this.#i=c||null,this.page=a,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return this.#n.size>0}async#r(t,e,n){const r=t.firstChild||t,a=r.id=`${Cd}${e}`,l=await this.#i?.getAriaAttributes(a);if(l)for(const[c,h]of l)r.setAttribute(c,h);n?n.at(-1).container.after(t):(this.div.append(t),this.#t?.moveElementInDOM(this.div,t,r,!1))}async render(t){const{annotations:e}=t,n=this.div;Li(n,this.viewport);const r=new Map,a={data:null,layer:n,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new xo,annotationStorage:t.annotationStorage||new Pd,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const l of e){if(l.noHTML)continue;const c=l.annotationType===ee.POPUP;if(c){const p=r.get(l.id);if(!p)continue;a.elements=p}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;a.data=l;const h=Ty.create(a);if(!h.isRenderable)continue;if(!c&&l.popupRef){const p=r.get(l.popupRef);p?p.push(h):r.set(l.popupRef,[h])}const d=h.render();l.hidden&&(d.style.visibility="hidden"),await this.#r(d,l.id,a.elements),h._isEditable&&(this.#n.set(h.data.id,h),this._annotationEditorUIManager?.renderAnnotationElement(h))}this.#s()}async addLinkAnnotations(t,e){const n={data:null,layer:this.div,linkService:e,svgFactory:new xo,parent:this};for(const r of t){r.borderStyle||=nw._defaultBorderStyle,n.data=r;const a=Ty.create(n);if(!a.isRenderable)continue;const l=a.render();await this.#r(l,r.id,null)}}update({viewport:t}){const e=this.div;this.viewport=t,Li(e,{rotation:t.rotation}),this.#s(),e.hidden=!1}#s(){if(!this.#e)return;const t=this.div;for(const[e,n]of this.#e){const r=t.querySelector(`[data-annotation-id="${e}"]`);if(!r)continue;n.className="annotationContent";const{firstChild:a}=r;a?a.nodeName==="CANVAS"?a.replaceWith(n):a.classList.contains("annotationContent")?a.after(n):a.before(n):r.append(n);const l=this.#n.get(e);l&&(l._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(e,r.id,n),l._hasNoCanvas=!1):l.canvas=n)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(t){return this.#n.get(t)}static get _defaultBorderStyle(){return _t(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Ns.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};const sl=/\r\n?|\n/g;class de extends mt{#t;#e="";#n=`${this.id}-editor`;#i=null;#r;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=de.prototype,e=a=>a.isEmpty(),n=oi.TRANSLATE_SMALL,r=oi.TRANSLATE_BIG;return _t(this,"_keyboardManager",new Ro([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-n,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[n,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-n],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,n],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:e}]]))}static _type="freetext";static _editorType=bt.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.#t=t.color||de._defaultColor||mt._defaultLineColor,this.#r=t.fontSize||de._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(t,e){mt.initialize(t,e);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case Lt.FREETEXT_SIZE:de._defaultFontSize=e;break;case Lt.FREETEXT_COLOR:de._defaultColor=e;break}}updateParams(t,e){switch(t){case Lt.FREETEXT_SIZE:this.#s(e);break;case Lt.FREETEXT_COLOR:this.#o(e);break}}static get defaultPropertiesToUpdate(){return[[Lt.FREETEXT_SIZE,de._defaultFontSize],[Lt.FREETEXT_COLOR,de._defaultColor||mt._defaultLineColor]]}get propertiesToUpdate(){return[[Lt.FREETEXT_SIZE,this.#r],[Lt.FREETEXT_COLOR,this.#t]]}get toolbarButtons(){return this._colorPicker||=new wo(this),[["colorPicker",this._colorPicker]]}get colorType(){return Lt.FREETEXT_COLOR}get colorValue(){return this.#t}#s(t){const e=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-this.#r)*this.parentScale),this.#r=r,this.#u()},n=this.#r;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Lt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#o(t){const e=r=>{this.#t=this.editorDiv.style.color=r,this._colorPicker?.update(r)},n=this.#t;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Lt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-de._internalPadding*t,-(de._internalPadding+this.#r)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const t=this._uiManager.combinedSignal(this.#i);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#n),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#a(){const t=[];this.editorDiv.normalize();let e=null;for(const n of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&n.nodeName==="BR"||(t.push(de.#c(n)),e=n);return t.join(`
`)}#u(){const[t,e]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:r,div:a}=this,l=a.style.display,c=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",r.div.append(this.div),n=a.getBoundingClientRect(),a.remove(),a.style.display=l,a.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=n.width/t,this.height=n.height/e):(this.width=n.height/t,this.height=n.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#e,e=this.#e=this.#a().trimEnd();if(t===e)return;const n=r=>{if(this.#e=r,!r){this.remove();return}this.#d(),this._uiManager.rebuild(this),this.#u()};this.addCommands({cmd:()=>{n(e)},undo:()=>{n(t)},mustExec:!1}),this.#u()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){de._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#n),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${this.#r}px * var(--total-scale-factor))`,n.color=this.#t,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,a]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[c,h]=this.getInitialTranslation();[c,h]=this.pageTranslationToScreen(c,h);const[d,p]=this.pageDimensions,[m,y]=this.pageTranslation;let w,A;switch(this.rotation){case 0:w=t+(l[0]-m)/d,A=e+this.height-(l[1]-y)/p;break;case 90:w=t+(l[0]-m)/d,A=e-(l[1]-y)/p,[c,h]=[h,-c];break;case 180:w=t-this.width+(l[0]-m)/d,A=e-(l[1]-y)/p,[c,h]=[-c,-h];break;case 270:w=t+(l[0]-m-this.height*p)/d,A=e+(l[1]-y-this.width*d)/p,[c,h]=[-h,c];break}this.setAt(w*r,A*a,c,h)}else this._moveAfterPaste(t,e);this.#d(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(sl,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:n}=e;if(n.length===1&&n[0]==="text/plain")return;t.preventDefault();const r=de.#p(e.getData("text")||"").replaceAll(sl,`
`);if(!r)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const l=a.getRangeAt(0);if(!r.includes(`
`)){l.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:c,startOffset:h}=l,d=[],p=[];if(c.nodeType===Node.TEXT_NODE){const w=c.parentElement;if(p.push(c.nodeValue.slice(h).replaceAll(sl,"")),w!==this.editorDiv){let A=d;for(const x of this.editorDiv.childNodes){if(x===w){A=p;continue}A.push(de.#c(x))}}d.push(c.nodeValue.slice(0,h).replaceAll(sl,""))}else if(c===this.editorDiv){let w=d,A=0;for(const x of this.editorDiv.childNodes)A++===h&&(w=p),w.push(de.#c(x))}this.#e=`${d.join(`
`)}${r}${p.join(`
`)}`,this.#d();const m=new Range;let y=Math.sumPrecise(d.map(w=>w.length));for(const{firstChild:w}of this.editorDiv.childNodes)if(w.nodeType===Node.TEXT_NODE){const A=w.nodeValue.length;if(y<=A){m.setStart(w,y),m.setEnd(w,y);break}y-=A}a.removeAllRanges(),a.addRange(m)}#d(){if(this.editorDiv.replaceChildren(),!!this.#e)for(const t of this.#e.split(`
`)){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#l(){return this.#e.replaceAll(""," ")}static#p(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}static async deserialize(t,e,n){let r=null;if(t instanceof Zv){const{data:{defaultAppearanceData:{fontSize:l,fontColor:c},rect:h,rotation:d,id:p,popupRef:m,contentsObj:y},textContent:w,textPosition:A,parent:{page:{pageNumber:x}}}=t;if(!w||w.length===0)return null;r=t={annotationType:bt.FREETEXT,color:Array.from(c),fontSize:l,value:w.join(`
`),position:A,pageIndex:x-1,rect:h.slice(0),rotation:d,annotationElementId:p,id:p,deleted:!1,popupRef:m,comment:y?.str||null}}const a=await super.deserialize(t,e,n);return a.#r=t.fontSize,a.#t=ct.makeHexColor(...t.color),a.#e=de.#p(t.value),a._initialData=r,t.comment&&a.setCommentData(t.comment),a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=de._internalPadding*this.parentScale,n=this.getRect(e,e),r=mt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#t),a={annotationType:bt.FREETEXT,color:r,fontSize:this.#r,value:this.#l(),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(a),t?(a.isCopy=!0,a):this.annotationElementId&&!this.#g(a)?null:(a.id=this.annotationElementId,a)}#g(t){const{value:e,fontSize:n,color:r,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==e||t.fontSize!==n||t.color.some((l,c)=>l!==r[c])||t.pageIndex!==a}renderAnnotationElement(t){const e=super.renderAnnotationElement(t),{style:n}=e;n.fontSize=`calc(${this.#r}px * var(--total-scale-factor))`,n.color=this.#t,e.replaceChildren();for(const l of this.#e.split(`
`)){const c=document.createElement("div");c.append(l?document.createTextNode(l):document.createElement("br")),e.append(c)}const r=de._internalPadding*this.parentScale,a={rect:this.getRect(r,r)};return a.popup=this.hasEditedComment?this.comment:{text:this.#e},t.updateEdited(a),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class st{static PRECISION=1e-4;toSVGPath(){Ot("Abstract method `toSVGPath` must be implemented.")}get box(){Ot("Abstract getter `box` must be implemented.")}serialize(t,e){Ot("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,r,a,l){l||=new Float32Array(t.length);for(let c=0,h=t.length;c<h;c+=2)l[c]=e+t[c]*r,l[c+1]=n+t[c+1]*a;return l}static _rescaleAndSwap(t,e,n,r,a,l){l||=new Float32Array(t.length);for(let c=0,h=t.length;c<h;c+=2)l[c]=e+t[c+1]*r,l[c+1]=n+t[c]*a;return l}static _translate(t,e,n,r){r||=new Float32Array(t.length);for(let a=0,l=t.length;a<l;a+=2)r[a]=e+t[a],r[a+1]=n+t[a+1];return r}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,n,r,a){switch(a){case 90:return[1-e/n,t/r];case 180:return[1-t/n,1-e/r];case 270:return[e/n,1-t/r];default:return[t/n,e/r]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,r,a,l){return[(t+5*n)/6,(e+5*r)/6,(5*n+a)/6,(5*r+l)/6,(n+a)/2,(r+l)/2]}}class ts{#t;#e=[];#n;#i;#r=[];#s=new Float32Array(18);#o;#a;#u;#c;#d;#l;#p=[];static#g=8;static#f=2;static#h=ts.#g+ts.#f;constructor({x:t,y:e},n,r,a,l,c=0){this.#t=n,this.#l=a*r,this.#i=l,this.#s.set([NaN,NaN,NaN,NaN,t,e],6),this.#n=c,this.#c=ts.#g*r,this.#u=ts.#h*r,this.#d=r,this.#p.push(t,e)}isEmpty(){return isNaN(this.#s[8])}#m(){const t=this.#s.subarray(4,6),e=this.#s.subarray(16,18),[n,r,a,l]=this.#t;return[(this.#o+(t[0]-e[0])/2-n)/a,(this.#a+(t[1]-e[1])/2-r)/l,(this.#o+(e[0]-t[0])/2-n)/a,(this.#a+(e[1]-t[1])/2-r)/l]}add({x:t,y:e}){this.#o=t,this.#a=e;const[n,r,a,l]=this.#t;let[c,h,d,p]=this.#s.subarray(8,12);const m=t-d,y=e-p,w=Math.hypot(m,y);if(w<this.#u)return!1;const A=w-this.#c,x=A/w,E=x*m,S=x*y;let _=c,C=h;c=d,h=p,d+=E,p+=S,this.#p?.push(t,e);const R=-S/A,k=E/A,I=R*this.#l,D=k*this.#l;return this.#s.set(this.#s.subarray(2,8),0),this.#s.set([d+I,p+D],4),this.#s.set(this.#s.subarray(14,18),12),this.#s.set([d-I,p-D],16),isNaN(this.#s[6])?(this.#r.length===0&&(this.#s.set([c+I,h+D],2),this.#r.push(NaN,NaN,NaN,NaN,(c+I-n)/a,(h+D-r)/l),this.#s.set([c-I,h-D],14),this.#e.push(NaN,NaN,NaN,NaN,(c-I-n)/a,(h-D-r)/l)),this.#s.set([_,C,c,h,d,p],6),!this.isEmpty()):(this.#s.set([_,C,c,h,d,p],6),Math.abs(Math.atan2(C-h,_-c)-Math.atan2(S,E))<Math.PI/2?([c,h,d,p]=this.#s.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((c+d)/2-n)/a,((h+p)/2-r)/l),[c,h,_,C]=this.#s.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((_+c)/2-n)/a,((C+h)/2-r)/l),!0):([_,C,c,h,d,p]=this.#s.subarray(0,6),this.#r.push(((_+5*c)/6-n)/a,((C+5*h)/6-r)/l,((5*c+d)/6-n)/a,((5*h+p)/6-r)/l,((c+d)/2-n)/a,((h+p)/2-r)/l),[d,p,c,h,_,C]=this.#s.subarray(12,18),this.#e.push(((_+5*c)/6-n)/a,((C+5*h)/6-r)/l,((5*c+d)/6-n)/a,((5*h+p)/6-r)/l,((c+d)/2-n)/a,((h+p)/2-r)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#r,e=this.#e;if(isNaN(this.#s[6])&&!this.isEmpty())return this.#w();const n=[];n.push(`M${t[4]} ${t[5]}`);for(let r=6;r<t.length;r+=6)isNaN(t[r])?n.push(`L${t[r+4]} ${t[r+5]}`):n.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);this.#A(n);for(let r=e.length-6;r>=6;r-=6)isNaN(e[r])?n.push(`L${e[r+4]} ${e[r+5]}`):n.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);return this.#y(n),n.join(" ")}#w(){const[t,e,n,r]=this.#t,[a,l,c,h]=this.#m();return`M${(this.#s[2]-t)/n} ${(this.#s[3]-e)/r} L${(this.#s[4]-t)/n} ${(this.#s[5]-e)/r} L${a} ${l} L${c} ${h} L${(this.#s[16]-t)/n} ${(this.#s[17]-e)/r} L${(this.#s[14]-t)/n} ${(this.#s[15]-e)/r} Z`}#y(t){const e=this.#e;t.push(`L${e[4]} ${e[5]} Z`)}#A(t){const[e,n,r,a]=this.#t,l=this.#s.subarray(4,6),c=this.#s.subarray(16,18),[h,d,p,m]=this.#m();t.push(`L${(l[0]-e)/r} ${(l[1]-n)/a} L${h} ${d} L${p} ${m} L${(c[0]-e)/r} ${(c[1]-n)/a}`)}newFreeDrawOutline(t,e,n,r,a,l){return new iw(t,e,n,r,a,l)}getOutlines(){const t=this.#r,e=this.#e,n=this.#s,[r,a,l,c]=this.#t,h=new Float32Array((this.#p?.length??0)+2);for(let m=0,y=h.length-2;m<y;m+=2)h[m]=(this.#p[m]-r)/l,h[m+1]=(this.#p[m+1]-a)/c;if(h[h.length-2]=(this.#o-r)/l,h[h.length-1]=(this.#a-a)/c,isNaN(n[6])&&!this.isEmpty())return this.#b(h);const d=new Float32Array(this.#r.length+24+this.#e.length);let p=t.length;for(let m=0;m<p;m+=2){if(isNaN(t[m])){d[m]=d[m+1]=NaN;continue}d[m]=t[m],d[m+1]=t[m+1]}p=this.#E(d,p);for(let m=e.length-6;m>=6;m-=6)for(let y=0;y<6;y+=2){if(isNaN(e[m+y])){d[p]=d[p+1]=NaN,p+=2;continue}d[p]=e[m+y],d[p+1]=e[m+y+1],p+=2}return this.#v(d,p),this.newFreeDrawOutline(d,h,this.#t,this.#d,this.#n,this.#i)}#b(t){const e=this.#s,[n,r,a,l]=this.#t,[c,h,d,p]=this.#m(),m=new Float32Array(36);return m.set([NaN,NaN,NaN,NaN,(e[2]-n)/a,(e[3]-r)/l,NaN,NaN,NaN,NaN,(e[4]-n)/a,(e[5]-r)/l,NaN,NaN,NaN,NaN,c,h,NaN,NaN,NaN,NaN,d,p,NaN,NaN,NaN,NaN,(e[16]-n)/a,(e[17]-r)/l,NaN,NaN,NaN,NaN,(e[14]-n)/a,(e[15]-r)/l],0),this.newFreeDrawOutline(m,t,this.#t,this.#d,this.#n,this.#i)}#v(t,e){const n=this.#e;return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6}#E(t,e){const n=this.#s.subarray(4,6),r=this.#s.subarray(16,18),[a,l,c,h]=this.#t,[d,p,m,y]=this.#m();return t.set([NaN,NaN,NaN,NaN,(n[0]-a)/c,(n[1]-l)/h,NaN,NaN,NaN,NaN,d,p,NaN,NaN,NaN,NaN,m,y,NaN,NaN,NaN,NaN,(r[0]-a)/c,(r[1]-l)/h],e),e+=24}}class iw extends st{#t;#e=new Float32Array(4);#n;#i;#r;#s;#o;constructor(t,e,n,r,a,l){super(),this.#o=t,this.#r=e,this.#t=n,this.#s=r,this.#n=a,this.#i=l,this.lastPoint=[NaN,NaN],this.#a(l);const[c,h,d,p]=this.#e;for(let m=0,y=t.length;m<y;m+=2)t[m]=(t[m]-c)/d,t[m+1]=(t[m+1]-h)/p;for(let m=0,y=e.length;m<y;m+=2)e[m]=(e[m]-c)/d,e[m+1]=(e[m+1]-h)/p}toSVGPath(){const t=[`M${this.#o[4]} ${this.#o[5]}`];for(let e=6,n=this.#o.length;e<n;e+=6){if(isNaN(this.#o[e])){t.push(`L${this.#o[e+4]} ${this.#o[e+5]}`);continue}t.push(`C${this.#o[e]} ${this.#o[e+1]} ${this.#o[e+2]} ${this.#o[e+3]} ${this.#o[e+4]} ${this.#o[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,n,r],a){const l=n-t,c=r-e;let h,d;switch(a){case 0:h=st._rescale(this.#o,t,r,l,-c),d=st._rescale(this.#r,t,r,l,-c);break;case 90:h=st._rescaleAndSwap(this.#o,t,e,l,c),d=st._rescaleAndSwap(this.#r,t,e,l,c);break;case 180:h=st._rescale(this.#o,n,e,-l,c),d=st._rescale(this.#r,n,e,-l,c);break;case 270:h=st._rescaleAndSwap(this.#o,n,r,-l,-c),d=st._rescaleAndSwap(this.#r,n,r,-l,-c);break}return{outline:Array.from(h),points:[Array.from(d)]}}#a(t){const e=this.#o;let n=e[4],r=e[5];const a=[n,r,n,r];let l=n,c=r;const h=t?Math.max:Math.min;for(let p=6,m=e.length;p<m;p+=6){const y=e[p+4],w=e[p+5];if(isNaN(e[p]))ct.pointBoundingBox(y,w,a),c<w?(l=y,c=w):c===w&&(l=h(l,y));else{const A=[1/0,1/0,-1/0,-1/0];ct.bezierBoundingBox(n,r,...e.slice(p,p+6),A),ct.rectBoundingBox(...A,a),c<A[3]?(l=A[2],c=A[3]):c===A[3]&&(l=h(l,A[2]))}n=y,r=w}const d=this.#e;d[0]=a[0]-this.#n,d[1]=a[1]-this.#n,d[2]=a[2]-a[0]+2*this.#n,d[3]=a[3]-a[1]+2*this.#n,this.lastPoint=[l,c]}get box(){return this.#e}newOutliner(t,e,n,r,a,l=0){return new ts(t,e,n,r,a,l)}getNewOutline(t,e){const[n,r,a,l]=this.#e,[c,h,d,p]=this.#t,m=a*d,y=l*p,w=n*d+c,A=r*p+h,x=this.newOutliner({x:this.#r[0]*m+w,y:this.#r[1]*y+A},this.#t,this.#s,t,this.#i,e??this.#n);for(let E=2;E<this.#r.length;E+=2)x.add({x:this.#r[E]*m+w,y:this.#r[E+1]*y+A});return x.getOutlines()}}class Dh{#t;#e;#n=[];#i=[];constructor(t,e=0,n=0,r=!0){const a=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x:w,y:A,width:x,height:E}of t){const S=Math.floor((w-e)/l)*l,_=Math.ceil((w+x+e)/l)*l,C=Math.floor((A-e)/l)*l,R=Math.ceil((A+E+e)/l)*l,k=[S,C,R,!0],I=[_,C,R,!1];this.#n.push(k,I),ct.rectBoundingBox(S,C,_,R,a)}const c=a[2]-a[0]+2*n,h=a[3]-a[1]+2*n,d=a[0]-n,p=a[1]-n,m=this.#n.at(r?-1:-2),y=[m[0],m[2]];for(const w of this.#n){const[A,x,E]=w;w[0]=(A-d)/c,w[1]=(x-p)/h,w[2]=(E-p)/h}this.#t=new Float32Array([d,p,c,h]),this.#e=y}getOutlines(){this.#n.sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of this.#n)e[3]?(t.push(...this.#u(e)),this.#o(e)):(this.#a(e),t.push(...this.#u(e)));return this.#r(t)}#r(t){const e=[],n=new Set;for(const l of t){const[c,h,d]=l;e.push([c,h,l],[c,d,l])}e.sort((l,c)=>l[1]-c[1]||l[0]-c[0]);for(let l=0,c=e.length;l<c;l+=2){const h=e[l][2],d=e[l+1][2];h.push(d),d.push(h),n.add(h),n.add(d)}const r=[];let a;for(;n.size>0;){const l=n.values().next().value;let[c,h,d,p,m]=l;n.delete(l);let y=c,w=h;for(a=[c,d],r.push(a);;){let A;if(n.has(p))A=p;else if(n.has(m))A=m;else break;n.delete(A),[c,h,d,p,m]=A,y!==c&&(a.push(y,w,c,w===h?h:d),y=c),w=w===h?d:h}a.push(y,w)}return new IT(r,this.#t,this.#e)}#s(t){const e=this.#i;let n=0,r=e.length-1;for(;n<=r;){const a=n+r>>1,l=e[a][0];if(l===t)return a;l<t?n=a+1:r=a-1}return r+1}#o([,t,e]){const n=this.#s(t);this.#i.splice(n,0,[t,e])}#a([,t,e]){const n=this.#s(t);for(let r=n;r<this.#i.length;r++){const[a,l]=this.#i[r];if(a!==t)break;if(a===t&&l===e){this.#i.splice(r,1);return}}for(let r=n-1;r>=0;r--){const[a,l]=this.#i[r];if(a!==t)break;if(a===t&&l===e){this.#i.splice(r,1);return}}}#u(t){const[e,n,r]=t,a=[[e,n,r]],l=this.#s(r);for(let c=0;c<l;c++){const[h,d]=this.#i[c];for(let p=0,m=a.length;p<m;p++){const[,y,w]=a[p];if(!(d<=y||w<=h)){if(y>=h){if(w>d)a[p][1]=d;else{if(m===1)return[];a.splice(p,1),p--,m--}continue}a[p][2]=h,w>d&&a.push([e,d,w])}}}return a}}class IT extends st{#t;#e;constructor(t,e,n){super(),this.#e=t,this.#t=e,this.lastPoint=n}toSVGPath(){const t=[];for(const e of this.#e){let[n,r]=e;t.push(`M${n} ${r}`);for(let a=2;a<e.length;a+=2){const l=e[a],c=e[a+1];l===n?(t.push(`V${c}`),r=c):c===r&&(t.push(`H${l}`),n=l)}t.push("Z")}return t.join(" ")}serialize([t,e,n,r],a){const l=[],c=n-t,h=r-e;for(const d of this.#e){const p=new Array(d.length);for(let m=0;m<d.length;m+=2)p[m]=t+d[m]*c,p[m+1]=r-d[m+1]*h;l.push(p)}return l}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class Nh extends ts{newFreeDrawOutline(t,e,n,r,a,l){return new DT(t,e,n,r,a,l)}}class DT extends iw{newOutliner(t,e,n,r,a,l=0){return new Nh(t,e,n,r,a,l)}}class ne extends mt{#t=null;#e=0;#n;#i=null;#r=null;#s=null;#o=null;#a=0;#u=null;#c=null;#d=null;#l=!1;#p=null;#g;#f=null;#h="";#m;#w="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=bt.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=ne.prototype;return _t(this,"_keyboardManager",new Ro([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||ne._defaultColor,this.#m=t.thickness||ne._defaultThickness,this.#g=t.opacity||ne._defaultOpacity,this.#n=t.boxes||null,this.#w=t.methodOfCreation||"",this.#h=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#l=!0,this.#A(t),this.#S()):this.#n&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#o=t.focusNode,this.#a=t.focusOffset,this.#y(),this.#S(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#l?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#m,methodOfCreation:this.#w}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}get commentColor(){return this.color}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#y(){const t=new Dh(this.#n,.001);this.#c=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#c.box;const e=new Dh(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#s=e.getOutlines();const{lastPoint:n}=this.#s;this.#p=[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height]}#A({highlightOutlines:t,highlightId:e,clipPathId:n}){this.#c=t;const r=1.5;if(this.#s=t.getNewOutline(this.#m/2+r,.0025),e>=0)this.#d=e,this.#i=n,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#f=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},!0);else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:ne.#R(this.#c.box,(p-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#f,{bbox:ne.#R(this.#s.box,p),path:{d:this.#s.toSVGPath()}})}const[a,l,c,h]=t.box;switch(this.rotation){case 0:this.x=a,this.y=l,this.width=c,this.height=h;break;case 90:{const[p,m]=this.parentDimensions;this.x=l,this.y=1-a,this.width=c*m/p,this.height=h*p/m;break}case 180:this.x=1-a,this.y=1-l,this.width=c,this.height=h;break;case 270:{const[p,m]=this.parentDimensions;this.x=1-l,this.y=a,this.width=c*m/p,this.height=h*p/m;break}}const{lastPoint:d}=this.#s;this.#p=[(d[0]-a)/c,(d[1]-l)/h]}static initialize(t,e){mt.initialize(t,e),ne._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case Lt.HIGHLIGHT_COLOR:ne._defaultColor=e;break;case Lt.HIGHLIGHT_THICKNESS:ne._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#p}updateParams(t,e){switch(t){case Lt.HIGHLIGHT_COLOR:this.#b(e);break;case Lt.HIGHLIGHT_THICKNESS:this.#v(e);break}}static get defaultPropertiesToUpdate(){return[[Lt.HIGHLIGHT_COLOR,ne._defaultColor],[Lt.HIGHLIGHT_THICKNESS,ne._defaultThickness]]}get propertiesToUpdate(){return[[Lt.HIGHLIGHT_COLOR,this.color||ne._defaultColor],[Lt.HIGHLIGHT_THICKNESS,this.#m||ne._defaultThickness],[Lt.HIGHLIGHT_FREE,this.#l]]}#b(t){const e=(a,l)=>{this.color=a,this.#g=l,this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:a,"fill-opacity":l}}),this.#r?.updateColor(a)},n=this.color,r=this.#g;this.addCommands({cmd:e.bind(this,t,ne._defaultOpacity),undo:e.bind(this,n,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Lt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#v(t){const e=this.#m,n=r=>{this.#m=r,this.#E(r)};this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Lt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#r=new Ze({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#_())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#_())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#k(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#S(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#k():t&&(this.#S(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#E(t){if(!this.#l)return;this.#A({highlightOutlines:this.#c.getNewOutline(t/2)}),this.fixAndSetPosition();const[e,n]=this.parentDimensions;this.setDims(this.width*e,this.height*n)}#k(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#f),this.#f=null)}#S(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#i}=t.drawLayer.draw({bbox:this.#c.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.#g},rootClass:{highlight:!0,free:this.#l},path:{d:this.#c.toSVGPath()}},!1,!0),this.#f=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#l},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},this.#l),this.#u&&(this.#u.style.clipPath=this.#i))}static#R([t,e,n,r],a){switch(a){case 90:return[1-e-r,t,r,n];case 180:return[1-t-n,1-e-r,n,r];case 270:return[e,1-t-n,r,n]}return[t,e,n,r]}rotate(t){const{drawLayer:e}=this.parent;let n;this.#l?(t=(t-this.rotation+360)%360,n=ne.#R(this.#c.box,t)):n=ne.#R([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#d,{bbox:n,root:{"data-main-rotation":t}}),e.updateProperties(this.#f,{bbox:ne.#R(this.#s.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#h&&(t.setAttribute("aria-label",this.#h),t.setAttribute("role","mark")),this.#l?t.classList.add("free"):this.div.addEventListener("keydown",this.#P.bind(this),{signal:this._uiManager._signal});const e=this.#u=document.createElement("div");t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#i;const[n,r]=this.parentDimensions;return this.setDims(this.width*n,this.height*r),Lv(this,this.#u,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#f,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#f,{rootClass:{hovered:!1}})}#P(t){ne._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#T(!0);break;case 1:case 3:this.#T(!1);break}}#T(t){if(!this.#t)return;const e=window.getSelection();t?e.setPosition(this.#t,this.#e):e.setPosition(this.#o,this.#a)}select(){super.select(),this.#f&&this.parent?.drawLayer.updateProperties(this.#f,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#f&&(this.parent?.drawLayer.updateProperties(this.#f,{rootClass:{selected:!1}}),this.#l||this.#T(!1))}get _mustFixPosition(){return!this.#l}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#f,{rootClass:{hidden:!t}}))}#_(){return this.#l?this.rotation:0}#M(){if(this.#l)return null;const[t,e]=this.pageDimensions,[n,r]=this.pageTranslation,a=this.#n,l=new Float32Array(a.length*8);let c=0;for(const{x:h,y:d,width:p,height:m}of a){const y=h*t+n,w=(1-d)*e+r;l[c]=l[c+4]=y,l[c+1]=l[c+3]=w,l[c+2]=l[c+6]=y+p*t,l[c+5]=l[c+7]=w-m*e,c+=8}return l}#O(t){return this.#c.serialize(t,this.#_())}static startHighlighting(t,e,{target:n,x:r,y:a}){const{x:l,y:c,width:h,height:d}=n.getBoundingClientRect(),p=new AbortController,m=t.combinedSignal(p),y=w=>{p.abort(),this.#z(t,w)};window.addEventListener("blur",y,{signal:m}),window.addEventListener("pointerup",y,{signal:m}),window.addEventListener("pointerdown",se,{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",tn,{signal:m}),n.addEventListener("pointermove",this.#I.bind(this,t),{signal:m}),this._freeHighlight=new Nh({x:r,y:a},[l,c,h,d],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#I(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#z(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,e,n){let r=null;if(t instanceof tw){const{data:{quadPoints:A,rect:x,rotation:E,id:S,color:_,opacity:C,popupRef:R,contentsObj:k},parent:{page:{pageNumber:I}}}=t;r=t={annotationType:bt.HIGHLIGHT,color:Array.from(_),opacity:C,quadPoints:A,boxes:null,pageIndex:I-1,rect:x.slice(0),rotation:E,annotationElementId:S,id:S,deleted:!1,popupRef:R,comment:k?.str||null}}else if(t instanceof Od){const{data:{inkLists:A,rect:x,rotation:E,id:S,color:_,borderStyle:{rawWidth:C},popupRef:R,contentsObj:k},parent:{page:{pageNumber:I}}}=t;r=t={annotationType:bt.HIGHLIGHT,color:Array.from(_),thickness:C,inkLists:A,boxes:null,pageIndex:I-1,rect:x.slice(0),rotation:E,annotationElementId:S,id:S,deleted:!1,popupRef:R,comment:k?.str||null}}const{color:a,quadPoints:l,inkLists:c,opacity:h}=t,d=await super.deserialize(t,e,n);d.color=ct.makeHexColor(...a),d.#g=h||1,c&&(d.#m=t.thickness),d._initialData=r,t.comment&&d.setCommentData(t.comment);const[p,m]=d.pageDimensions,[y,w]=d.pageTranslation;if(l){const A=d.#n=[];for(let x=0;x<l.length;x+=8)A.push({x:(l[x]-y)/p,y:1-(l[x+1]-w)/m,width:(l[x+2]-l[x])/p,height:(l[x+1]-l[x+5])/m});d.#y(),d.#S(),d.rotate(d.rotation)}else if(c){d.#l=!0;const A=c[0],x={x:A[0]-y,y:m-(A[1]-w)},E=new Nh(x,[0,0,p,m],1,d.#m/2,!0,.001);for(let C=0,R=A.length;C<R;C+=2)x.x=A[C]-y,x.y=m-(A[C+1]-w),E.add(x);const{id:S,clipPathId:_}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:d.color,"fill-opacity":d._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:E.toSVGPath()}},!0,!0);d.#A({highlightOutlines:E.getOutlines(),highlightId:S,clipPathId:_}),d.#S(),d.rotate(d.parentRotation)}return d}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=this.getRect(0,0),n=mt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),r={annotationType:bt.HIGHLIGHT,color:n,opacity:this.#g,thickness:this.#m,quadPoints:this.#M(),outlines:this.#O(e),pageIndex:this.pageIndex,rect:e,rotation:this.#_(),structTreeParentId:this._structTreeParentId};return this.addComment(r),this.annotationElementId&&!this.#C(r)?null:(r.id=this.annotationElementId,r)}#C(t){const{color:e}=this._initialData;return this.hasEditedComment||t.color.some((n,r)=>n!==e[r])}renderAnnotationElement(t){const e={rect:this.getRect(0,0)};return this.hasEditedComment&&(e.popup=this.comment),t.updateEdited(e),null}static canCreateNewEmptyEditor(){return!1}}class sw{#t=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,n]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,n)}updateSVGProperty(t,e){this.#t[t]=e}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){Ot("Not implemented")}}class gt extends mt{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#n=null;static#i=null;static#r=null;static#s=NaN;static#o=null;static#a=null;static#u=NaN;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}_addOutlines(t){t.drawOutlines&&(this.#c(t),this.#p())}#c({drawOutlines:t,drawId:e,drawingOptions:n}){this.#t=t,this._drawingOptions||=n,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),e>=0?(this._drawId=e,this.parent.drawLayer.finalizeDraw(e,t.defaultProperties)):this._drawId=this.#d(t,this.parent),this.#h(t.box)}#d(t,e){const{id:n}=e.drawLayer.draw(gt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return n}static _mergeSVGProperties(t,e){const n=new Set(Object.keys(t));for(const[r,a]of Object.entries(e))n.has(r)?Object.assign(t[r],a):t[r]=a;return t}static getDefaultDrawingOptions(t){Ot("Not implemented")}static get typesMap(){Ot("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){const n=this.typesMap.get(t);n&&this._defaultDrawingOptions.updateProperty(n,e),this._currentParent&&(gt.#n.updateProperty(n,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const n=this.constructor.typesMap.get(t);n&&this._updateProperty(t,n,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[n,r]of this.typesMap)t.push([n,e[r]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[n,r]of this.constructor.typesMap)t.push([n,e[r]]);return t}_updateProperty(t,e,n){const r=this._drawingOptions,a=r[e],l=c=>{r.updateProperty(e,c);const h=this.#t.updateProperty(e,c);h&&this.#h(h),this.parent?.drawLayer.updateProperties(this._drawId,r.toSVGProperties()),t===this.colorType&&this._colorPicker?.update(c)};this.addCommands({cmd:l.bind(this,n),undo:l.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,gt._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#f()),{bbox:this.#m()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,gt._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#f()),{bbox:this.#m()}))}_onTranslating(t,e){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#m()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,gt._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#f(),this.parentDimensions),{bbox:this.#m()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#l(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#p(),this.#h(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#l()):t&&(this._uiManager.addShouldRescale(this),this.#p(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}#l(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#p(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#d(this.#t,t)}}#g([t,e,n,r]){const{parentDimensions:[a,l],rotation:c}=this;switch(c){case 90:return[e,1-t,n*(l/a),r*(a/l)];case 180:return[1-t,1-e,n,r];case 270:return[1-e,t,n*(l/a),r*(a/l)];default:return[t,e,n,r]}}#f(){const{x:t,y:e,width:n,height:r,parentDimensions:[a,l],rotation:c}=this;switch(c){case 90:return[1-e,t,n*(a/l),r*(l/a)];case 180:return[1-t,1-e,n,r];case 270:return[e,1-t,n*(a/l),r*(l/a)];default:return[t,e,n,r]}}#h(t){if([this.x,this.y,this.width,this.height]=this.#g(t),this.div){this.fixAndSetPosition();const[e,n]=this.parentDimensions;this.setDims(this.width*e,this.height*n)}this._onResized()}#m(){const{x:t,y:e,width:n,height:r,rotation:a,parentRotation:l,parentDimensions:[c,h]}=this;switch((a*4+l)/90){case 1:return[1-e-r,t,r,n];case 2:return[1-t-n,1-e-r,n,r];case 3:return[e,1-t-n,r,n];case 4:return[t,e-n*(c/h),r*(h/c),n*(c/h)];case 5:return[1-e,t,n*(c/h),r*(h/c)];case 6:return[1-t-r*(h/c),1-e,r*(h/c),n*(c/h)];case 7:return[e-n*(c/h),1-t-r*(h/c),n*(c/h),r*(h/c)];case 8:return[t-n,e-r,n,r];case 9:return[1-e,t-n,r,n];case 10:return[1-t,1-e,n,r];case 11:return[e-r,1-t,r,n];case 12:return[t-r*(h/c),e,r*(h/c),n*(c/h)];case 13:return[1-e-n*(c/h),t-r*(h/c),n*(c/h),r*(h/c)];case 14:return[1-t,1-e-n*(c/h),r*(h/c),n*(c/h)];case 15:return[e,1-t,n*(c/h),r*(h/c)];default:return[t,e,n,r]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,gt._mergeSVGProperties({bbox:this.#m()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#h(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,e;this._isCopy&&(t=this.x,e=this.y);const n=super.render();n.classList.add("draw");const r=document.createElement("div");n.append(r),r.setAttribute("aria-hidden","true"),r.className="internal";const[a,l]=this.parentDimensions;return this.setDims(this.width*a,this.height*l),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,e),n}static createDrawerInstance(t,e,n,r,a){Ot("Not implemented")}static startDrawing(t,e,n,r){const{target:a,offsetX:l,offsetY:c,pointerId:h,pointerType:d}=r;if(gt.#o&&gt.#o!==d)return;const{viewport:{rotation:p}}=t,{width:m,height:y}=a.getBoundingClientRect(),w=gt.#i=new AbortController,A=t.combinedSignal(w);if(gt.#s||=h,gt.#o??=d,window.addEventListener("pointerup",x=>{gt.#s===x.pointerId?this._endDraw(x):gt.#a?.delete(x.pointerId)},{signal:A}),window.addEventListener("pointercancel",x=>{gt.#s===x.pointerId?this._currentParent.endDrawingSession():gt.#a?.delete(x.pointerId)},{signal:A}),window.addEventListener("pointerdown",x=>{gt.#o===x.pointerType&&((gt.#a||=new Set).add(x.pointerId),gt.#n.isCancellable()&&(gt.#n.removeLastElement(),gt.#n.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:A}),window.addEventListener("contextmenu",tn,{signal:A}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:A}),a.addEventListener("touchmove",x=>{x.timeStamp===gt.#u&&se(x)},{signal:A}),t.toggleDrawing(),e._editorUndoBar?.hide(),gt.#n){t.drawLayer.updateProperties(this._currentDrawId,gt.#n.startNew(l,c,m,y,p));return}e.updateUIForDefaultProperties(this),gt.#n=this.createDrawerInstance(l,c,m,y,p),gt.#r=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(gt.#r.toSVGProperties(),gt.#n.defaultSVGProperties),!0,!1)}static _drawMove(t){if(gt.#u=-1,!gt.#n)return;const{offsetX:e,offsetY:n,pointerId:r}=t;if(gt.#s===r){if(gt.#a?.size>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,gt.#n.add(e,n)),gt.#u=t.timeStamp,se(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,gt.#n=null,gt.#r=null,gt.#o=null,gt.#u=NaN),gt.#i&&(gt.#i.abort(),gt.#i=null,gt.#s=NaN,gt.#a=null)}static _endDraw(t){const e=this._currentParent;if(e){if(e.toggleDrawing(!0),this._cleanup(!1),t?.target===e.div&&e.drawLayer.updateProperties(this._currentDrawId,gt.#n.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const n=gt.#n,r=this._currentDrawId,a=n.getLastElement();e.addCommands({cmd:()=>{e.drawLayer.updateProperties(r,n.setLastElement(a))},undo:()=>{e.drawLayer.updateProperties(r,n.removeLastElement())},mustExec:!1,type:Lt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(Lt.DRAW_STEP),!gt.#n.isEmpty()){const{pageDimensions:[n,r],scale:a}=e,l=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:gt.#n.getOutlines(n*a,r*a,a,this._INNER_MARGIN),drawingOptions:gt.#r,mustBeCommitted:!t});return this._cleanup(!0),l}return e.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,n,r,a,l){Ot("Not implemented")}static async deserialize(t,e,n){const{rawDims:{pageWidth:r,pageHeight:a,pageX:l,pageY:c}}=e.viewport,h=this.deserializeDraw(l,c,r,a,this._INNER_MARGIN,t),d=await super.deserialize(t,e,n);return d.createDrawingOptions(t),d.#c({drawOutlines:h}),d.#p(),d.onScaleChanging(),d.rotate(),d}serializeDraw(t){const[e,n]=this.pageTranslation,[r,a]=this.pageDimensions;return this.#t.serialize([e,n,r,a],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class NT{#t=new Float64Array(6);#e;#n;#i;#r;#s;#o="";#a=0;#u=new Io;#c;#d;constructor(t,e,n,r,a,l){this.#c=n,this.#d=r,this.#i=a,this.#r=l,[t,e]=this.#l(t,e);const c=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#s=[t,e],this.#n=[{line:c,points:this.#s}],this.#t.set(c,0)}updateProperty(t,e){t==="stroke-width"&&(this.#r=e)}#l(t,e){return st._normalizePoint(t,e,this.#c,this.#d,this.#i)}isEmpty(){return!this.#n||this.#n.length===0}isCancellable(){return this.#s.length<=10}add(t,e){[t,e]=this.#l(t,e);const[n,r,a,l]=this.#t.subarray(2,6),c=t-a,h=e-l;return Math.hypot(this.#c*c,this.#d*h)<=2?null:(this.#s.push(t,e),isNaN(n)?(this.#t.set([a,l,t,e],2),this.#e.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([n,r,a,l,t,e],0),this.#e.push(...st.createBezierPoints(n,r,a,l,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const n=this.add(t,e);return n||(this.#s.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,r,a){this.#c=n,this.#d=r,this.#i=a,[t,e]=this.#l(t,e);const l=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#s=[t,e];const c=this.#n.at(-1);return c&&(c.line=new Float32Array(c.line),c.points=new Float32Array(c.points)),this.#n.push({line:l,points:this.#s}),this.#t.set(l,0),this.#a=0,this.toSVGPath(),null}getLastElement(){return this.#n.at(-1)}setLastElement(t){return this.#n?(this.#n.push(t),this.#e=t.line,this.#s=t.points,this.#a=0,{path:{d:this.toSVGPath()}}):this.#u.setLastElement(t)}removeLastElement(){if(!this.#n)return this.#u.removeLastElement();this.#n.pop(),this.#o="";for(let t=0,e=this.#n.length;t<e;t++){const{line:n,points:r}=this.#n[t];this.#e=n,this.#s=r,this.#a=0,this.toSVGPath()}return{path:{d:this.#o}}}toSVGPath(){const t=st.svgRound(this.#e[4]),e=st.svgRound(this.#e[5]);if(this.#s.length===2)return this.#o=`${this.#o} M ${t} ${e} Z`,this.#o;if(this.#s.length<=6){const r=this.#o.lastIndexOf("M");this.#o=`${this.#o.slice(0,r)} M ${t} ${e}`,this.#a=6}if(this.#s.length===4){const r=st.svgRound(this.#e[10]),a=st.svgRound(this.#e[11]);return this.#o=`${this.#o} L ${r} ${a}`,this.#a=12,this.#o}const n=[];this.#a===0&&(n.push(`M ${t} ${e}`),this.#a=6);for(let r=this.#a,a=this.#e.length;r<a;r+=6){const[l,c,h,d,p,m]=this.#e.slice(r,r+6).map(st.svgRound);n.push(`C${l} ${c} ${h} ${d} ${p} ${m}`)}return this.#o+=n.join(" "),this.#a=this.#e.length,this.#o}getOutlines(t,e,n,r){const a=this.#n.at(-1);return a.line=new Float32Array(a.line),a.points=new Float32Array(a.points),this.#u.build(this.#n,t,e,n,this.#i,this.#r,r),this.#t=null,this.#e=null,this.#n=null,this.#o=null,this.#u}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class Io extends st{#t;#e=0;#n;#i;#r;#s;#o;#a;#u;build(t,e,n,r,a,l,c){this.#r=e,this.#s=n,this.#o=r,this.#a=a,this.#u=l,this.#n=c??0,this.#i=t,this.#l()}get thickness(){return this.#u}setLastElement(t){return this.#i.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#i.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of this.#i){if(t.push(`M${st.svgRound(e[4])} ${st.svgRound(e[5])}`),e.length===6){t.push("Z");continue}if(e.length===12&&isNaN(e[6])){t.push(`L${st.svgRound(e[10])} ${st.svgRound(e[11])}`);continue}for(let n=6,r=e.length;n<r;n+=6){const[a,l,c,h,d,p]=e.subarray(n,n+6).map(st.svgRound);t.push(`C${a} ${l} ${c} ${h} ${d} ${p}`)}}return t.join("")}serialize([t,e,n,r],a){const l=[],c=[],[h,d,p,m]=this.#d();let y,w,A,x,E,S,_,C,R;switch(this.#a){case 0:R=st._rescale,y=t,w=e+r,A=n,x=-r,E=t+h*n,S=e+(1-d-m)*r,_=t+(h+p)*n,C=e+(1-d)*r;break;case 90:R=st._rescaleAndSwap,y=t,w=e,A=n,x=r,E=t+d*n,S=e+h*r,_=t+(d+m)*n,C=e+(h+p)*r;break;case 180:R=st._rescale,y=t+n,w=e,A=-n,x=r,E=t+(1-h-p)*n,S=e+d*r,_=t+(1-h)*n,C=e+(d+m)*r;break;case 270:R=st._rescaleAndSwap,y=t+n,w=e+r,A=-n,x=-r,E=t+(1-d-m)*n,S=e+(1-h-p)*r,_=t+(1-d)*n,C=e+(1-h)*r;break}for(const{line:k,points:I}of this.#i)l.push(R(k,y,w,A,x,a?new Array(k.length):null)),c.push(R(I,y,w,A,x,a?new Array(I.length):null));return{lines:l,points:c,rect:[E,S,_,C]}}static deserialize(t,e,n,r,a,{paths:{lines:l,points:c},rotation:h,thickness:d}){const p=[];let m,y,w,A,x;switch(h){case 0:x=st._rescale,m=-t/n,y=e/r+1,w=1/n,A=-1/r;break;case 90:x=st._rescaleAndSwap,m=-e/r,y=-t/n,w=1/r,A=1/n;break;case 180:x=st._rescale,m=t/n+1,y=-e/r,w=-1/n,A=1/r;break;case 270:x=st._rescaleAndSwap,m=e/r+1,y=t/n+1,w=-1/r,A=-1/n;break}if(!l){l=[];for(const S of c){const _=S.length;if(_===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,S[0],S[1]]));continue}if(_===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,S[0],S[1],NaN,NaN,NaN,NaN,S[2],S[3]]));continue}const C=new Float32Array(3*(_-2));l.push(C);let[R,k,I,D]=S.subarray(0,4);C.set([NaN,NaN,NaN,NaN,R,k],0);for(let B=4;B<_;B+=2){const H=S[B],G=S[B+1];C.set(st.createBezierPoints(R,k,I,D,H,G),(B-2)*3),[R,k,I,D]=[I,D,H,G]}}}for(let S=0,_=l.length;S<_;S++)p.push({line:x(l[S].map(C=>C??NaN),m,y,w,A),points:x(c[S].map(C=>C??NaN),m,y,w,A)});const E=new this.prototype.constructor;return E.build(p,n,r,1,h,d,a),E}#c(t=this.#u){const e=this.#n+t/2*this.#o;return this.#a%180===0?[e/this.#r,e/this.#s]:[e/this.#s,e/this.#r]}#d(){const[t,e,n,r]=this.#t,[a,l]=this.#c(0);return[t+a,e+l,n-2*a,r-2*l]}#l(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:r}of this.#i){if(r.length<=12){for(let c=4,h=r.length;c<h;c+=6)ct.pointBoundingBox(r[c],r[c+1],t);continue}let a=r[4],l=r[5];for(let c=6,h=r.length;c<h;c+=6){const[d,p,m,y,w,A]=r.subarray(c,c+6);ct.bezierBoundingBox(a,l,d,p,m,y,w,A,t),a=w,l=A}}const[e,n]=this.#c();t[0]=Te(t[0]-e,0,1),t[1]=Te(t[1]-n,0,1),t[2]=Te(t[2]+e,0,1),t[3]=Te(t[3]+n,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,e){return t==="stroke-width"?this.#p(e):null}#p(t){const[e,n]=this.#c();this.#u=t;const[r,a]=this.#c(),[l,c]=[r-e,a-n],h=this.#t;return h[0]-=l,h[1]-=c,h[2]+=2*l,h[3]+=2*c,h}updateParentDimensions([t,e],n){const[r,a]=this.#c();this.#r=t,this.#s=e,this.#o=n;const[l,c]=this.#c(),h=l-r,d=c-a,p=this.#t;return p[0]-=h,p[1]-=d,p[2]+=2*h,p[3]+=2*d,p}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(st.svgRound).join(" ")}get defaultProperties(){const[t,e]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${st.svgRound(t)} ${st.svgRound(e)}`}}}get rotationTransform(){const[,,t,e]=this.#t;let n=0,r=0,a=0,l=0,c=0,h=0;switch(this.#e){case 90:r=e/t,a=-t/e,c=t;break;case 180:n=-1,l=-1,c=t,h=e;break;case 270:r=-e/t,a=t/e,h=e;break;default:return""}return`matrix(${n} ${r} ${a} ${l} ${st.svgRound(c)} ${st.svgRound(h)})`}getPathResizingSVGProperties([t,e,n,r]){const[a,l]=this.#c(),[c,h,d,p]=this.#t;if(Math.abs(d-a)<=st.PRECISION||Math.abs(p-l)<=st.PRECISION){const x=t+n/2-(c+d/2),E=e+r/2-(h+p/2);return{path:{"transform-origin":`${st.svgRound(t)} ${st.svgRound(e)}`,transform:`${this.rotationTransform} translate(${x} ${E})`}}}const m=(n-2*a)/(d-2*a),y=(r-2*l)/(p-2*l),w=d/n,A=p/r;return{path:{"transform-origin":`${st.svgRound(c)} ${st.svgRound(h)}`,transform:`${this.rotationTransform} scale(${w} ${A}) translate(${st.svgRound(a)} ${st.svgRound(l)}) scale(${m} ${y}) translate(${st.svgRound(-a)} ${st.svgRound(-l)})`}}}getPathResizedSVGProperties([t,e,n,r]){const[a,l]=this.#c(),c=this.#t,[h,d,p,m]=c;if(c[0]=t,c[1]=e,c[2]=n,c[3]=r,Math.abs(p-a)<=st.PRECISION||Math.abs(m-l)<=st.PRECISION){const E=t+n/2-(h+p/2),S=e+r/2-(d+m/2);for(const{line:_,points:C}of this.#i)st._translate(_,E,S,_),st._translate(C,E,S,C);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${st.svgRound(t)} ${st.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const y=(n-2*a)/(p-2*a),w=(r-2*l)/(m-2*l),A=-y*(h+a)+t+a,x=-w*(d+l)+e+l;if(y!==1||w!==1||A!==0||x!==0)for(const{line:E,points:S}of this.#i)st._rescale(E,A,x,y,w,E),st._rescale(S,A,x,y,w,S);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${st.svgRound(t)} ${st.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],n){const[r,a]=n,l=this.#t,c=t-l[0],h=e-l[1];if(this.#r===r&&this.#s===a)for(const{line:d,points:p}of this.#i)st._translate(d,c,h,d),st._translate(p,c,h,p);else{const d=this.#r/r,p=this.#s/a;this.#r=r,this.#s=a;for(const{line:m,points:y}of this.#i)st._rescale(m,c,h,d,p,m),st._rescale(y,c,h,d,p,y);l[2]*=d,l[3]*=p}return l[0]=t,l[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${st.svgRound(t)} ${st.svgRound(e)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${st.svgRound(t[0])} ${st.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class Nl extends sw{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:mt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??=this["stroke-width"],e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new Nl(this._viewParameters);return t.updateAll(this),t}}class Bd extends gt{static _type="ink";static _editorType=bt.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){mt.initialize(t,e),this._defaultDrawingOptions=new Nl(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return _t(this,"typesMap",new Map([[Lt.INK_THICKNESS,"stroke-width"],[Lt.INK_COLOR,"stroke"],[Lt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,n,r,a){return new NT(t,e,n,r,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,n,r,a,l){return Io.deserialize(t,e,n,r,a,l)}static async deserialize(t,e,n){let r=null;if(t instanceof Od){const{data:{inkLists:l,rect:c,rotation:h,id:d,color:p,opacity:m,borderStyle:{rawWidth:y},popupRef:w,contentsObj:A},parent:{page:{pageNumber:x}}}=t;r=t={annotationType:bt.INK,color:Array.from(p),thickness:y,opacity:m,paths:{points:l},boxes:null,pageIndex:x-1,rect:c.slice(0),rotation:h,annotationElementId:d,id:d,deleted:!1,popupRef:w,comment:A?.str||null}}const a=await super.deserialize(t,e,n);return a._initialData=r,t.comment&&a.setCommentData(t.comment),a}get toolbarButtons(){return this._colorPicker||=new wo(this),[["colorPicker",this._colorPicker]]}get colorType(){return Lt.INK_COLOR}get colorValue(){return this._drawingOptions.stroke}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:n}=this;e.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:n}){this._drawingOptions=Bd.getDefaultDrawingOptions({stroke:ct.makeHexColor(...t),"stroke-width":e,"stroke-opacity":n})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:n,rect:r}=this.serializeDraw(t),{_drawingOptions:{stroke:a,"stroke-opacity":l,"stroke-width":c}}=this,h={annotationType:bt.INK,color:mt._colorManager.convert(a),opacity:l,thickness:c,paths:{lines:e,points:n},pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(h),t?(h.isCopy=!0,h):this.annotationElementId&&!this.#t(h)?null:(h.id=this.annotationElementId,h)}#t(t){const{color:e,thickness:n,opacity:r,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((l,c)=>l!==e[c])||t.thickness!==n||t.opacity!==r||t.pageIndex!==a}renderAnnotationElement(t){const{points:e,rect:n}=this.serializeDraw(!1),r={rect:n,thickness:this._drawingOptions["stroke-width"],points:e};return this.hasEditedComment&&(r.popup=this.comment),t.updateEdited(r),null}}class Fh extends Io{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const rl=8,qr=3;class Qi{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,e,n,r){return n-=t,r-=e,n===0?r>0?0:4:n===1?r+6:2-r}static#n=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#i(t,e,n,r,a,l,c){const h=this.#e(n,r,a,l);for(let d=0;d<8;d++){const p=(-d+h-c+16)%8,m=this.#n[2*p],y=this.#n[2*p+1];if(t[(n+m)*e+(r+y)]!==0)return p}return-1}static#r(t,e,n,r,a,l,c){const h=this.#e(n,r,a,l);for(let d=0;d<8;d++){const p=(d+h+c+16)%8,m=this.#n[2*p],y=this.#n[2*p+1];if(t[(n+m)*e+(r+y)]!==0)return p}return-1}static#s(t,e,n,r){const a=t.length,l=new Int32Array(a);for(let p=0;p<a;p++)l[p]=t[p]<=r?1:0;for(let p=1;p<n-1;p++)l[p*e]=l[p*e+e-1]=0;for(let p=0;p<e;p++)l[p]=l[e*n-1-p]=0;let c=1,h;const d=[];for(let p=1;p<n-1;p++){h=1;for(let m=1;m<e-1;m++){const y=p*e+m,w=l[y];if(w===0)continue;let A=p,x=m;if(w===1&&l[y-1]===0)c+=1,x-=1;else if(w>=1&&l[y+1]===0)c+=1,x+=1,w>1&&(h=w);else{w!==1&&(h=Math.abs(w));continue}const E=[m,p],S=x===m+1,_={isHole:S,points:E,id:c,parent:0};d.push(_);let C;for(const Q of d)if(Q.id===h){C=Q;break}C?C.isHole?_.parent=S?C.parent:h:_.parent=S?h:C.parent:_.parent=S?h:0;const R=this.#i(l,e,p,m,A,x,0);if(R===-1){l[y]=-c,l[y]!==1&&(h=Math.abs(l[y]));continue}let k=this.#n[2*R],I=this.#n[2*R+1];const D=p+k,B=m+I;A=D,x=B;let H=p,G=m;for(;;){const Q=this.#r(l,e,H,G,A,x,1);k=this.#n[2*Q],I=this.#n[2*Q+1];const ht=H+k,lt=G+I;E.push(lt,ht);const et=H*e+G;if(l[et+1]===0?l[et]=-c:l[et]===1&&(l[et]=c),ht===p&&lt===m&&H===D&&G===B){l[y]!==1&&(h=Math.abs(l[y]));break}else A=H,x=G,H=ht,G=lt}}}return d}static#o(t,e,n,r){if(n-e<=4){for(let D=e;D<n-2;D+=2)r.push(t[D],t[D+1]);return}const a=t[e],l=t[e+1],c=t[n-4]-a,h=t[n-3]-l,d=Math.hypot(c,h),p=c/d,m=h/d,y=p*l-m*a,w=h/c,A=1/d,x=Math.atan(w),E=Math.cos(x),S=Math.sin(x),_=A*(Math.abs(E)+Math.abs(S)),C=A*(1-_+_**2),R=Math.max(Math.atan(Math.abs(S+E)*C),Math.atan(Math.abs(S-E)*C));let k=0,I=e;for(let D=e+2;D<n-2;D+=2){const B=Math.abs(y-p*t[D+1]+m*t[D]);B>k&&(I=D,k=B)}k>(d*R)**2?(this.#o(t,e,I+2,r),this.#o(t,I,n,r)):r.push(a,l)}static#a(t){const e=[],n=t.length;return this.#o(t,0,n,e),e.push(t[n-2],t[n-1]),e.length<=4?null:e}static#u(t,e,n,r,a,l){const c=new Float32Array(l**2),h=-2*r**2,d=l>>1;for(let x=0;x<l;x++){const E=(x-d)**2;for(let S=0;S<l;S++)c[x*l+S]=Math.exp((E+(S-d)**2)/h)}const p=new Float32Array(256),m=-2*a**2;for(let x=0;x<256;x++)p[x]=Math.exp(x**2/m);const y=t.length,w=new Uint8Array(y),A=new Uint32Array(256);for(let x=0;x<n;x++)for(let E=0;E<e;E++){const S=x*e+E,_=t[S];let C=0,R=0;for(let I=0;I<l;I++){const D=x+I-d;if(!(D<0||D>=n))for(let B=0;B<l;B++){const H=E+B-d;if(H<0||H>=e)continue;const G=t[D*e+H],Q=c[I*l+B]*p[Math.abs(G-_)];C+=G*Q,R+=Q}}const k=w[S]=Math.round(C/R);A[k]++}return[w,A]}static#c(t){const e=new Uint32Array(256);for(const n of t)e[n]++;return e}static#d(t){const e=t.length,n=new Uint8ClampedArray(e>>2);let r=-1/0,a=1/0;for(let c=0,h=n.length;c<h;c++){const d=n[c]=t[c<<2];r=Math.max(r,d),a=Math.min(a,d)}const l=255/(r-a);for(let c=0,h=n.length;c<h;c++)n[c]=(n[c]-a)*l;return n}static#l(t){let e,n=-1/0,r=-1/0;const a=t.findIndex(h=>h!==0);let l=a,c=a;for(e=a;e<256;e++){const h=t[e];h>n&&(e-l>r&&(r=e-l,c=e-1),n=h,l=e)}for(e=c-1;e>=0&&!(t[e]>t[e+1]);e--);return e}static#p(t){const e=t,{width:n,height:r}=t,{maxDim:a}=this.#t;let l=n,c=r;if(n>a||r>a){let y=n,w=r,A=Math.log2(Math.max(n,r)/a);const x=Math.floor(A);A=A===x?x-1:x;for(let S=0;S<A;S++){l=Math.ceil(y/2),c=Math.ceil(w/2);const _=new OffscreenCanvas(l,c);_.getContext("2d").drawImage(t,0,0,y,w,0,0,l,c),y=l,w=c,t!==e&&t.close(),t=_.transferToImageBitmap()}const E=Math.min(a/l,a/c);l=Math.round(l*E),c=Math.round(c*E)}const d=new OffscreenCanvas(l,c).getContext("2d",{willReadFrequently:!0});d.fillStyle="white",d.fillRect(0,0,l,c),d.filter="grayscale(1)",d.drawImage(t,0,0,t.width,t.height,0,0,l,c);const p=d.getImageData(0,0,l,c).data;return[this.#d(p),l,c]}static extractContoursFromText(t,{fontFamily:e,fontStyle:n,fontWeight:r},a,l,c,h){let d=new OffscreenCanvas(1,1),p=d.getContext("2d",{alpha:!1});const m=200,y=p.font=`${n} ${r} ${m}px ${e}`,{actualBoundingBoxLeft:w,actualBoundingBoxRight:A,actualBoundingBoxAscent:x,actualBoundingBoxDescent:E,fontBoundingBoxAscent:S,fontBoundingBoxDescent:_,width:C}=p.measureText(t),R=1.5,k=Math.ceil(Math.max(Math.abs(w)+Math.abs(A)||0,C)*R),I=Math.ceil(Math.max(Math.abs(x)+Math.abs(E)||m,Math.abs(S)+Math.abs(_)||m)*R);d=new OffscreenCanvas(k,I),p=d.getContext("2d",{alpha:!0,willReadFrequently:!0}),p.font=y,p.filter="grayscale(1)",p.fillStyle="white",p.fillRect(0,0,k,I),p.fillStyle="black",p.fillText(t,k*(R-1)/2,I*(3-R)/2);const D=this.#d(p.getImageData(0,0,k,I).data),B=this.#c(D),H=this.#l(B),G=this.#s(D,k,I,H);return this.processDrawnLines({lines:{curves:G,width:k,height:I},pageWidth:a,pageHeight:l,rotation:c,innerMargin:h,mustSmooth:!0,areContours:!0})}static process(t,e,n,r,a){const[l,c,h]=this.#p(t),[d,p]=this.#u(l,c,h,Math.hypot(c,h)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),m=this.#l(p),y=this.#s(d,c,h,m);return this.processDrawnLines({lines:{curves:y,width:c,height:h},pageWidth:e,pageHeight:n,rotation:r,innerMargin:a,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:r,innerMargin:a,mustSmooth:l,areContours:c}){r%180!==0&&([e,n]=[n,e]);const{curves:h,width:d,height:p}=t,m=t.thickness??0,y=[],w=Math.min(e/d,n/p),A=w/e,x=w/n,E=[];for(const{points:_}of h){const C=l?this.#a(_):_;if(!C)continue;E.push(C);const R=C.length,k=new Float32Array(R),I=new Float32Array(3*(R===2?2:R-2));if(y.push({line:I,points:k}),R===2){k[0]=C[0]*A,k[1]=C[1]*x,I.set([NaN,NaN,NaN,NaN,k[0],k[1]],0);continue}let[D,B,H,G]=C;D*=A,B*=x,H*=A,G*=x,k.set([D,B,H,G],0),I.set([NaN,NaN,NaN,NaN,D,B],0);for(let Q=4;Q<R;Q+=2){const ht=k[Q]=C[Q]*A,lt=k[Q+1]=C[Q+1]*x;I.set(st.createBezierPoints(D,B,H,G,ht,lt),(Q-2)*3),[D,B,H,G]=[H,G,ht,lt]}}if(y.length===0)return null;const S=c?new Fh:new Io;return S.build(y,e,n,1,r,c?0:m,a),{outline:S,newCurves:E,areContours:c,thickness:m,width:d,height:p}}static async compressSignature({outlines:t,areContours:e,thickness:n,width:r,height:a}){let l=1/0,c=-1/0,h=0;for(const C of t){h+=C.length;for(let R=2,k=C.length;R<k;R++){const I=C[R]-C[R-2];l=Math.min(l,I),c=Math.max(c,I)}}let d;l>=-128&&c<=127?d=Int8Array:l>=-32768&&c<=32767?d=Int16Array:d=Int32Array;const p=t.length,m=rl+qr*p,y=new Uint32Array(m);let w=0;y[w++]=m*Uint32Array.BYTES_PER_ELEMENT+(h-2*p)*d.BYTES_PER_ELEMENT,y[w++]=0,y[w++]=r,y[w++]=a,y[w++]=e?0:1,y[w++]=Math.max(0,Math.floor(n??0)),y[w++]=p,y[w++]=d.BYTES_PER_ELEMENT;for(const C of t)y[w++]=C.length-2,y[w++]=C[0],y[w++]=C[1];const A=new CompressionStream("deflate-raw"),x=A.writable.getWriter();await x.ready,x.write(y);const E=d.prototype.constructor;for(const C of t){const R=new E(C.length-2);for(let k=2,I=C.length;k<I;k++)R[k-2]=C[k]-C[k-2];x.write(R)}x.close();const S=await new Response(A.readable).arrayBuffer(),_=new Uint8Array(S);return Tv(_)}static async decompressSignature(t){try{const e=u_(t),{readable:n,writable:r}=new DecompressionStream("deflate-raw"),a=r.getWriter();await a.ready,a.write(e).then(async()=>{await a.ready,await a.close()}).catch(()=>{});let l=null,c=0;for await(const C of n)l||=new Uint8Array(new Uint32Array(C.buffer,0,4)[0]),l.set(C,c),c+=C.length;const h=new Uint32Array(l.buffer,0,l.length>>2),d=h[1];if(d!==0)throw new Error(`Invalid version: ${d}`);const p=h[2],m=h[3],y=h[4]===0,w=h[5],A=h[6],x=h[7],E=[],S=(rl+qr*A)*Uint32Array.BYTES_PER_ELEMENT;let _;switch(x){case Int8Array.BYTES_PER_ELEMENT:_=new Int8Array(l.buffer,S);break;case Int16Array.BYTES_PER_ELEMENT:_=new Int16Array(l.buffer,S);break;case Int32Array.BYTES_PER_ELEMENT:_=new Int32Array(l.buffer,S);break}c=0;for(let C=0;C<A;C++){const R=h[qr*C+rl],k=new Float32Array(R+2);E.push(k);for(let I=0;I<qr-1;I++)k[I]=h[qr*C+rl+I+1];for(let I=0;I<R;I++)k[I+2]=k[I]+_[c++]}return{areContours:y,thickness:w,outlines:E,width:p,height:m}}catch(e){return St(`decompressSignature: ${e}`),null}}}class Vd extends sw{constructor(){super(),super.updateProperties({fill:mt._defaultLineColor,"stroke-width":0})}clone(){const t=new Vd;return t.updateAll(this),t}}class zd extends Nl{constructor(t){super(t),super.updateProperties({stroke:mt._defaultLineColor,"stroke-width":1})}clone(){const t=new zd(this._viewParameters);return t.updateAll(this),t}}class Bn extends gt{#t=!1;#e=null;#n=null;#i=null;static _type="signature";static _editorType=bt.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#n=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){mt.initialize(t,e),this._defaultDrawingOptions=new Vd,this._defaultDrawnSignatureOptions=new zd(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return _t(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const e=t.get("hasDescription");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,e;const{_isCopy:n}=this;if(n&&(this._isCopy=!1,t=this.x,e=this.y),super.render(),this._drawId===null)if(this.#n){const{lines:r,mustSmooth:a,areContours:l,description:c,uuid:h,heightInPage:d}=this.#n,{rawDims:{pageWidth:p,pageHeight:m},rotation:y}=this.parent.viewport,w=Qi.processDrawnLines({lines:r,pageWidth:p,pageHeight:m,rotation:y,innerMargin:Bn._INNER_MARGIN,mustSmooth:a,areContours:l});this.addSignature(w,d,c,h)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return n&&(this._isCopy=!0,this._moveAfterPaste(t,e)),this.div}setUuid(t){this.#i=t,this.addEditToolbar()}getUuid(){return this.#i}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(e=>{e?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:e,thickness:n,width:r,height:a}=this.#n,l=Math.max(r,a),c=Qi.processDrawnLines({lines:{curves:t.map(h=>({points:h})),thickness:n,width:r,height:a},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e});return{areContours:e,outline:c.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,e,n,r){const{x:a,y:l}=this,{outline:c}=this.#n=t;this.#t=c instanceof Fh,this.description=n;let h;this.#t?h=Bn.getDefaultDrawingOptions():(h=Bn._defaultDrawnSignatureOptions.clone(),h.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:h});const[d,p]=this.parentDimensions,[,m]=this.pageDimensions;let y=e/m;y=y>=1?.5:y,this.width*=y/this.height,this.width>=1&&(y*=.9/this.width,this.width=.9),this.height=y,this.setDims(d*this.width,p*this.height),this.x=a,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!n}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:e,pageHeight:n},rotation:r}=this.parent.viewport;return Qi.process(t,e,n,r,Bn._INNER_MARGIN)}getFromText(t,e){const{rawDims:{pageWidth:n,pageHeight:r},rotation:a}=this.parent.viewport;return Qi.extractContoursFromText(t,e,n,r,a,Bn._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:e,pageHeight:n},rotation:r}=this.parent.viewport;return Qi.processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:r,innerMargin:Bn._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:e}){t?this._drawingOptions=Bn.getDefaultDrawingOptions():(this._drawingOptions=Bn._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":e}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:e,points:n,rect:r}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":a}}=this,l={annotationType:bt.SIGNATURE,isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:a,pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(l),t?(l.paths={lines:e,points:n},l.uuid=this.#i,l.isCopy=!0):l.lines=e,this.#e&&(l.accessibilityData={type:"Figure",alt:this.#e}),l}static deserializeDraw(t,e,n,r,a,l){return l.areContours?Fh.deserialize(t,e,n,r,a,l):Io.deserialize(t,e,n,r,a,l)}static async deserialize(t,e,n){const r=await super.deserialize(t,e,n);return r.#t=t.areContours,r.description=t.accessibilityData?.alt||"",r.#i=t.uuid,r}}class FT extends mt{#t=null;#e=null;#n=null;#i=null;#r=null;#s="";#o=null;#a=!1;#u=null;#c=!1;#d=!1;static _type="stamp";static _editorType=bt.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#i=t.bitmapUrl,this.#r=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){mt.initialize(t,e)}static isHandlingMimeForPasting(t){return bl.includes(t)}static paste(t,e){e.pasteEditor({mode:bt.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#l(t,e=!1){if(!t){this.remove();return}this.#t=t.bitmap,e||(this.#e=t.id,this.#c=t.isSvg),t.file&&(this.#s=t.file.name),this.#f()}#p(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#o){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:a,height:l}=t||this.copyCanvas(null,null,!0).imageData,c=await n.guess({name:"altText",request:{data:r,width:a,height:l,channels:r.length/(a*l)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const h=c.output;return await this.setGuessedAltText(h),e&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}#g(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(n=>this.#l(n,!0)).finally(()=>this.#p());return}if(this.#i){const n=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(n).then(r=>this.#l(r)).finally(()=>this.#p());return}if(this.#r){const n=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(n).then(r=>this.#l(r)).finally(()=>this.#p());return}const t=document.createElement("input");t.type="file",t.accept=bl.join(",");const e=this._uiManager._signal;this.#n=new Promise(n=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#l(r)}n()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),n()},{signal:e})}).finally(()=>this.#p()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#o?.remove(),this.#o=null,this.#u&&(clearTimeout(this.#u),this.#u=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#g();return}super.rebuild(),this.div!==null&&(this.#e&&this.#o===null&&this.#g(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#n||this.#t||this.#i||this.#r||this.#e||this.#a)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#a||(this.#t?this.#f():this.#g()),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){const{id:n,bitmap:r}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),n&&this._uiManager.imageManager.isValidId(n)&&(this.#e=n,r&&(this.#t=r),this.#a=!1,this.#f())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#u!==null&&clearTimeout(this.#u);const t=200;this.#u=setTimeout(()=>{this.#u=null,this.#m()},t)}#f(){const{div:t}=this;let{width:e,height:n}=this.#t;const[r,a]=this.pageDimensions,l=.75;if(this.width)e=this.width*r,n=this.height*a;else if(e>l*r||n>l*a){const p=Math.min(l*r/e,l*a/n);e*=p,n*=p}const[c,h]=this.parentDimensions;this.setDims(e*c/r,n*h/a),this._uiManager.enableWaiting(!1);const d=this.#o=document.createElement("canvas");d.setAttribute("role","img"),this.addContainer(d),this.width=e/r,this.height=n/a,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#m(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#s&&this.div.setAttribute("aria-description",this.#s),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,e,n=!1){t||(t=224);const{width:r,height:a}=this.#t,l=new Pn;let c=this.#t,h=r,d=a,p=null;if(e){if(r>e||a>e){const I=Math.min(e/r,e/a);h=Math.floor(r*I),d=Math.floor(a*I)}p=document.createElement("canvas");const y=p.width=Math.ceil(h*l.sx),w=p.height=Math.ceil(d*l.sy);this.#c||(c=this.#h(y,w));const A=p.getContext("2d");A.filter=this._uiManager.hcmFilter;let x="white",E="#cfcfd8";this._uiManager.hcmFilter!=="none"?E="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(x="#8f8f9d",E="#42414d");const S=15,_=S*l.sx,C=S*l.sy,R=new OffscreenCanvas(_*2,C*2),k=R.getContext("2d");k.fillStyle=x,k.fillRect(0,0,_*2,C*2),k.fillStyle=E,k.fillRect(0,0,_,C),k.fillRect(_,C,_,C),A.fillStyle=A.createPattern(R,"repeat"),A.fillRect(0,0,y,w),A.drawImage(c,0,0,c.width,c.height,0,0,y,w)}let m=null;if(n){let y,w;if(l.symmetric&&c.width<t&&c.height<t)y=c.width,w=c.height;else if(c=this.#t,r>t||a>t){const E=Math.min(t/r,t/a);y=Math.floor(r*E),w=Math.floor(a*E),this.#c||(c=this.#h(y,w))}const x=new OffscreenCanvas(y,w).getContext("2d",{willReadFrequently:!0});x.drawImage(c,0,0,c.width,c.height,0,0,y,w),m={width:y,height:w,data:x.getImageData(0,0,y,w).data}}return{canvas:p,width:h,height:d,imageData:m}}#h(t,e){const{width:n,height:r}=this.#t;let a=n,l=r,c=this.#t;for(;a>2*t||l>2*e;){const h=a,d=l;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),l>2*e&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const p=new OffscreenCanvas(a,l);p.getContext("2d").drawImage(c,0,0,h,d,0,0,a,l),c=p.transferToImageBitmap()}return c}#m(){const[t,e]=this.parentDimensions,{width:n,height:r}=this,a=new Pn,l=Math.ceil(n*t*a.sx),c=Math.ceil(r*e*a.sy),h=this.#o;if(!h||h.width===l&&h.height===c)return;h.width=l,h.height=c;const d=this.#c?this.#t:this.#h(l,c),p=h.getContext("2d");p.filter=this._uiManager.hcmFilter,p.drawImage(d,0,0,d.width,d.height,0,0,l,c)}#w(t){if(t){if(this.#c){const r=this._uiManager.imageManager.getSvgUrl(this.#e);if(r)return r}const e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#t,e.getContext("2d").drawImage(this.#t,0,0),e.toDataURL()}if(this.#c){const[e,n]=this.pageDimensions,r=Math.round(this.width*e*os.PDF_TO_CSS_UNITS),a=Math.round(this.height*n*os.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(r,a);return l.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,r,a),l.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,e,n){let r=null,a=!1;if(t instanceof ew){const{data:{rect:x,rotation:E,id:S,structParent:_,popupRef:C,contentsObj:R},container:k,parent:{page:{pageNumber:I}},canvas:D}=t;let B,H;D?(delete t.canvas,{id:B,bitmap:H}=n.imageManager.getFromCanvas(k.id,D),D.remove()):(a=!0,t._hasNoCanvas=!0);const G=(await e._structTree.getAriaAttributes(`${Cd}${S}`))?.get("aria-label")||"";r=t={annotationType:bt.STAMP,bitmapId:B,bitmap:H,pageIndex:I-1,rect:x.slice(0),rotation:E,annotationElementId:S,id:S,deleted:!1,accessibilityData:{decorative:!1,altText:G},isSvg:!1,structParent:_,popupRef:C,comment:R?.str||null}}const l=await super.deserialize(t,e,n),{rect:c,bitmap:h,bitmapUrl:d,bitmapId:p,isSvg:m,accessibilityData:y}=t;a?(n.addMissingCanvas(t.id,l),l.#a=!0):p&&n.imageManager.isValidId(p)?(l.#e=p,h&&(l.#t=h)):l.#i=d,l.#c=m;const[w,A]=l.pageDimensions;return l.width=(c[2]-c[0])/w,l.height=(c[3]-c[1])/A,y&&(l.altTextData=y),l._initialData=r,t.comment&&l.setCommentData(t.comment),l.#d=!!r,l}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n={annotationType:bt.STAMP,bitmapId:this.#e,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#c,structTreeParentId:this._structTreeParentId};if(this.addComment(n),t)return n.bitmapUrl=this.#w(!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;const{decorative:r,altText:a}=this.serializeAltText(!1);if(!r&&a&&(n.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const c=this.#y(n);if(c.isSame)return null;c.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=this._initialData.structParent??-1}if(n.id=this.annotationElementId,e===null)return n;e.stamps||=new Map;const l=this.#c?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!e.stamps.has(this.#e))e.stamps.set(this.#e,{area:l,serialized:n}),n.bitmap=this.#w(!1);else if(this.#c){const c=e.stamps.get(this.#e);l>c.area&&(c.area=l,c.serialized.bitmap.close(),c.serialized.bitmap=this.#w(!1))}return n}#y(t){const{pageIndex:e,accessibilityData:{altText:n}}=this._initialData,r=t.pageIndex===e,a=(t.accessibilityData?.alt||"")===n;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&r&&a,isSameAltText:a}}renderAnnotationElement(t){const e={rect:this.getRect(0,0)};return this.hasEditedComment&&(e.popup=this.comment),t.updateEdited(e),null}}class zn{#t;#e=!1;#n=null;#i=null;#r=null;#s=new Map;#o=!1;#a=!1;#u=!1;#c=null;#d=null;#l=null;#p=null;#g=null;#f=-1;#h;static _initialized=!1;static#m=new Map([de,Bd,FT,ne,Bn].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:r,accessibilityManager:a,annotationLayer:l,drawLayer:c,textLayer:h,viewport:d,l10n:p}){const m=[...zn.#m.values()];if(!zn._initialized){zn._initialized=!0;for(const y of m)y.initialize(p,t)}t.registerEditorTypes(m),this.#h=t,this.pageIndex=e,this.div=n,this.#t=a,this.#n=l,this.viewport=d,this.#l=h,this.drawLayer=c,this._structTree=r,this.#h.addLayer(this)}get isEmpty(){return this.#s.size===0}get isInvisible(){return this.isEmpty&&this.#h.getMode()===bt.NONE}updateToolbar(t){this.#h.updateToolbar(t)}updateMode(t=this.#h.getMode()){switch(this.#v(),t){case bt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case bt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case bt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const n of zn.#m.values())e.toggle(`${n._type}Editing`,t===n._editorType);this.div.hidden=!1}hasTextLayer(t){return t===this.#l?.div}setEditingState(t){this.#h.setEditingState(t)}addCommands(t){this.#h.addCommands(t)}cleanUndoStack(t){this.#h.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#n?.div.classList.toggle("disabled",!t)}async enable(){this.#u=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.#g?.abort(),this.#g=null;const t=new Set;for(const n of this.#s.values())n.enableEditing(),n.show(!0),n.annotationElementId&&(this.#h.removeChangedExistingAnnotation(n),t.add(n.annotationElementId));if(!this.#n){this.#u=!1;return}const e=this.#n.getEditableAnnotations();for(const n of e){if(n.hide(),this.#h.isDeletedAnnotationElement(n.data.id)||t.has(n.data.id))continue;const r=await this.deserialize(n);r&&(this.addOrRebuild(r),r.enableEditing())}this.#u=!1}disable(){if(this.#a=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.#l&&!this.#g){this.#g=new AbortController;const r=this.#h.combinedSignal(this.#g);this.#l.div.addEventListener("pointerdown",a=>{const{clientX:c,clientY:h,timeStamp:d}=a,p=this.#f;if(d-p>500){this.#f=d;return}this.#f=-1;const{classList:m}=this.div;m.toggle("getElements",!0);const y=document.elementsFromPoint(c,h);if(m.toggle("getElements",!1),!this.div.contains(y[0]))return;let w;const A=new RegExp(`^${bv}[0-9]+$`);for(const E of y)if(A.test(E.id)){w=E.id;break}if(!w)return;const x=this.#s.get(w);x?.annotationElementId===null&&(a.stopPropagation(),a.preventDefault(),x.dblclick())},{signal:r,capture:!0})}const t=new Map,e=new Map;for(const r of this.#s.values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){t.set(r.annotationElementId,r);continue}else e.set(r.annotationElementId,r);this.getEditableAnnotation(r.annotationElementId)?.show(),r.remove()}if(this.#n){const r=this.#n.getEditableAnnotations();for(const a of r){const{id:l}=a.data;if(this.#h.isDeletedAnnotationElement(l)){a.updateEdited({deleted:!0});continue}let c=e.get(l);if(c){c.resetAnnotationElement(a),c.show(!1),a.show();continue}c=t.get(l),c&&(this.#h.addChangedExistingAnnotation(c),c.renderAnnotationElement(a)&&c.show(!1)),a.show()}}this.#v(),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const r of zn.#m.values())n.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#a=!1}getEditableAnnotation(t){return this.#n?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#h.getActive()!==t&&this.#h.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#l?.div&&!this.#p){this.#p=new AbortController;const t=this.#h.combinedSignal(this.#p);this.#l.div.addEventListener("pointerdown",this.#w.bind(this),{signal:t}),this.#l.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#l?.div&&this.#p&&(this.#p.abort(),this.#p=null,this.#l.div.classList.remove("highlighting"))}#w(t){this.#h.unselectAll();const{target:e}=t;if(e===this.#l.div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&this.#l.div.contains(e)){const{isMac:n}=ve.platform;if(t.button!==0||t.ctrlKey&&n)return;this.#h.showAllEditors("highlight",!0,!0),this.#l.div.classList.add("free"),this.toggleDrawing(),ne.startHighlighting(this,this.#h.direction==="ltr",{target:this.#l.div,x:t.x,y:t.y}),this.#l.div.addEventListener("pointerup",()=>{this.#l.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#h._signal}),t.preventDefault()}}enableClick(){if(this.#i)return;this.#i=new AbortController;const t=this.#h.combinedSignal(this.#i);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){this.#i?.abort(),this.#i=null}attach(t){this.#s.set(t.id,t);const{annotationElementId:e}=t;e&&this.#h.isDeletedAnnotationElement(e)&&this.#h.removeDeletedAnnotationElement(t)}detach(t){this.#s.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#a&&t.annotationElementId&&this.#h.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#h.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#h.addDeletedAnnotationElement(t.annotationElementId),mt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#h.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#u),this.#h.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#r&&(t._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#h._signal}),e.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getNextId(){return this.#h.getId()}get#y(){return zn.#m.get(this.#h.getMode())}combinedSignal(t){return this.#h.combinedSignal(t)}#A(t){const e=this.#y;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#y?.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await this.#h.updateMode(t.mode);const{offsetX:n,offsetY:r}=this.#b(),a=this.getNextId(),l=this.#A({parent:this,id:a,x:n,y:r,uiManager:this.#h,isCentered:!0,...e});l&&this.add(l)}async deserialize(t){return await zn.#m.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#h)||null}createAndAddNewEditor(t,e,n={}){const r=this.getNextId(),a=this.#A({parent:this,id:r,x:t.offsetX,y:t.offsetY,uiManager:this.#h,isCentered:e,...n});return a&&this.add(a),a}#b(){const{x:t,y:e,width:n,height:r}=this.div.getBoundingClientRect(),a=Math.max(0,t),l=Math.max(0,e),c=Math.min(window.innerWidth,t+n),h=Math.min(window.innerHeight,e+r),d=(a+c)/2-t,p=(l+h)/2-e,[m,y]=this.viewport.rotation%180===0?[d,p]:[p,d];return{offsetX:m,offsetY:y}}addNewEditor(t={}){this.createAndAddNewEditor(this.#b(),!0,t)}setSelected(t){this.#h.setSelected(t)}toggleSelected(t){this.#h.toggleSelected(t)}unselect(t){this.#h.unselect(t)}pointerup(t){const{isMac:e}=ve.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!this.#o||(this.#o=!1,this.#y?.isDrawer&&this.#y.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const n=this.#h.getMode();if(n===bt.STAMP||n===bt.SIGNATURE){this.#h.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#h.getMode()===bt.HIGHLIGHT&&this.enableTextSelection(),this.#o){this.#o=!1;return}const{isMac:e}=ve.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(this.#o=!0,this.#y?.isDrawer){this.startDrawingSession(t);return}const n=this.#h.getActive();this.#e=!n||n.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#c){this.#y.startDrawing(this,this.#h,!1,t);return}this.#h.setCurrentDrawingSession(this),this.#c=new AbortController;const e=this.#h.combinedSignal(this.#c);this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(this.#d=null,this.commitOrRemove())},{signal:e}),this.#y.startDrawing(this,this.#h,!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&(this.#d=e);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#c?(this.#h.setCurrentDrawingSession(null),this.#c.abort(),this.#c=null,this.#d=null,this.#y.endDrawing(t)):null}findNewParent(t,e,n){const r=this.#h.findParent(e,n);return r===null||r===this?!1:(r.changeParent(t),!0)}commitOrRemove(){return this.#c?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#c&&this.#y.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#h.getActive()?.parent===this&&(this.#h.commitOrRemove(),this.#h.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const t of this.#s.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#s.clear(),this.#h.removeLayer(this)}#v(){for(const t of this.#s.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,Li(this.div,t);for(const e of this.#h.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){this.#h.commitOrRemove(),this.#v();const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,Li(this.div,{rotation:n}),e!==n)for(const r of this.#s.values())r.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#h.viewParameters.realScale}}class ge{#t=null;#e=new Map;#n=new Map;static#i=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const e of this.#e.values())e.remove(),t.append(e);this.#t=t}}static get _svgFactory(){return _t(this,"_svgFactory",new xo)}static#r(t,[e,n,r,a]){const{style:l}=t;l.top=`${100*n}%`,l.left=`${100*e}%`,l.width=`${100*r}%`,l.height=`${100*a}%`}#s(){const t=ge._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#o(t,e){const n=ge._svgFactory.createElement("clipPath");t.append(n);const r=`clip_${e}`;n.setAttribute("id",r),n.setAttribute("clipPathUnits","objectBoundingBox");const a=ge._svgFactory.createElement("use");return n.append(a),a.setAttribute("href",`#${e}`),a.classList.add("clip"),r}#a(t,e){for(const[n,r]of Object.entries(e))r===null?t.removeAttribute(n):t.setAttribute(n,r)}draw(t,e=!1,n=!1){const r=ge.#i++,a=this.#s(),l=ge._svgFactory.createElement("defs");a.append(l);const c=ge._svgFactory.createElement("path");l.append(c);const h=`path_p${this.pageIndex}_${r}`;c.setAttribute("id",h),c.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#n.set(r,c);const d=n?this.#o(l,h):null,p=ge._svgFactory.createElement("use");return a.append(p),p.setAttribute("href",`#${h}`),this.updateProperties(a,t),this.#e.set(r,a),{id:r,clipPathId:`url(#${d})`}}drawOutline(t,e){const n=ge.#i++,r=this.#s(),a=ge._svgFactory.createElement("defs");r.append(a);const l=ge._svgFactory.createElement("path");a.append(l);const c=`path_p${this.pageIndex}_${n}`;l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke");let h;if(e){const m=ge._svgFactory.createElement("mask");a.append(m),h=`mask_p${this.pageIndex}_${n}`,m.setAttribute("id",h),m.setAttribute("maskUnits","objectBoundingBox");const y=ge._svgFactory.createElement("rect");m.append(y),y.setAttribute("width","1"),y.setAttribute("height","1"),y.setAttribute("fill","white");const w=ge._svgFactory.createElement("use");m.append(w),w.setAttribute("href",`#${c}`),w.setAttribute("stroke","none"),w.setAttribute("fill","black"),w.setAttribute("fill-rule","nonzero"),w.classList.add("mask")}const d=ge._svgFactory.createElement("use");r.append(d),d.setAttribute("href",`#${c}`),h&&d.setAttribute("mask",`url(#${h})`);const p=d.cloneNode();return r.append(p),d.classList.add("mainOutline"),p.classList.add("secondaryOutline"),this.updateProperties(r,t),this.#e.set(n,r),n}finalizeDraw(t,e){this.#n.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;const{root:n,bbox:r,rootClass:a,path:l}=e,c=typeof t=="number"?this.#e.get(t):t;if(c){if(n&&this.#a(c,n),r&&ge.#r(c,r),a){const{classList:h}=c;for(const[d,p]of Object.entries(a))h.toggle(d,p)}if(l){const d=c.firstChild.firstChild;this.#a(d,l)}}}updateParent(t,e){if(e===this)return;const n=this.#e.get(t);n&&(e.#t.append(n),this.#e.delete(t),e.#e.set(t,n))}remove(t){this.#n.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#n.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:Dh};globalThis.pdfjsLib={AbortException:ri,AnnotationEditorLayer:zn,AnnotationEditorParamsType:Lt,AnnotationEditorType:bt,AnnotationEditorUIManager:oi,AnnotationLayer:jd,AnnotationMode:Hn,AnnotationType:ee,build:Yv,ColorPicker:Ze,createValidAbsoluteUrl:bd,DOMSVGFactory:xo,DrawLayer:ge,FeatureTest:ve,fetchData:sr,getDocument:Md,getFilenameFromUrl:Pv,getPdfFilenameFromUrl:kv,getRGB:ko,getUuid:Ed,getXfaPageViewport:Rv,GlobalWorkerOptions:ki,ImageKind:oo,InvalidPDFException:xl,isDataScheme:Po,isPdfFile:Il,isValidExplicitDest:Dv,MathClamp:Te,noContextMenu:tn,normalizeUnicode:_v,OPS:mo,OutputScale:Pn,PasswordResponses:Ev,PDFDataRangeTransport:Dd,PDFDateString:Al,PDFWorker:Zs,PermissionFlag:Sv,PixelsPerInch:os,RenderingCancelledException:Ml,ResponseException:go,setLayerDimensions:Li,shadow:_t,SignatureExtractor:Qi,stopEvent:se,SupportedImageMimeTypes:bl,TextLayer:yo,TouchManager:Lo,updateUrlHash:Sd,Util:ct,VerbosityLevel:Co,version:qv,XfaLayer:Nd};const OT=Object.freeze(Object.defineProperty({__proto__:null,AbortException:ri,AnnotationEditorLayer:zn,AnnotationEditorParamsType:Lt,AnnotationEditorType:bt,AnnotationEditorUIManager:oi,AnnotationLayer:jd,AnnotationMode:Hn,AnnotationType:ee,ColorPicker:Ze,DOMSVGFactory:xo,DrawLayer:ge,FeatureTest:ve,GlobalWorkerOptions:ki,ImageKind:oo,InvalidPDFException:xl,MathClamp:Te,OPS:mo,OutputScale:Pn,PDFDataRangeTransport:Dd,PDFDateString:Al,PDFWorker:Zs,PasswordResponses:Ev,PermissionFlag:Sv,PixelsPerInch:os,RenderingCancelledException:Ml,ResponseException:go,SignatureExtractor:Qi,SupportedImageMimeTypes:bl,TextLayer:yo,TouchManager:Lo,Util:ct,VerbosityLevel:Co,XfaLayer:Nd,build:Yv,createValidAbsoluteUrl:bd,fetchData:sr,getDocument:Md,getFilenameFromUrl:Pv,getPdfFilenameFromUrl:kv,getRGB:ko,getUuid:Ed,getXfaPageViewport:Rv,isDataScheme:Po,isPdfFile:Il,isValidExplicitDest:Dv,noContextMenu:tn,normalizeUnicode:_v,setLayerDimensions:Li,shadow:_t,stopEvent:se,updateUrlHash:Sd,version:qv},Symbol.toStringTag,{value:"Module"}));function rw(s){var t,e,n="";if(typeof s=="string"||typeof s=="number")n+=s;else if(typeof s=="object")if(Array.isArray(s)){var r=s.length;for(t=0;t<r;t++)s[t]&&(e=rw(s[t]))&&(n&&(n+=" "),n+=e)}else for(e in s)s[e]&&(n&&(n+=" "),n+=e);return n}function Fl(){for(var s,t,e=0,n="",r=arguments.length;e<r;e++)(s=arguments[e])&&(t=rw(s))&&(n&&(n+=" "),n+=t);return n}var Py=Object.prototype.hasOwnProperty;function ky(s,t,e){for(e of s.keys())if(Xs(e,t))return e}function Xs(s,t){var e,n,r;if(s===t)return!0;if(s&&t&&(e=s.constructor)===t.constructor){if(e===Date)return s.getTime()===t.getTime();if(e===RegExp)return s.toString()===t.toString();if(e===Array){if((n=s.length)===t.length)for(;n--&&Xs(s[n],t[n]););return n===-1}if(e===Set){if(s.size!==t.size)return!1;for(n of s)if(r=n,r&&typeof r=="object"&&(r=ky(t,r),!r)||!t.has(r))return!1;return!0}if(e===Map){if(s.size!==t.size)return!1;for(n of s)if(r=n[0],r&&typeof r=="object"&&(r=ky(t,r),!r)||!Xs(n[1],t.get(r)))return!1;return!0}if(e===ArrayBuffer)s=new Uint8Array(s),t=new Uint8Array(t);else if(e===DataView){if((n=s.byteLength)===t.byteLength)for(;n--&&s.getInt8(n)===t.getInt8(n););return n===-1}if(ArrayBuffer.isView(s)){if((n=s.byteLength)===t.byteLength)for(;n--&&s[n]===t[n];);return n===-1}if(!e||typeof s=="object"){n=0;for(e in s)if(Py.call(s,e)&&++n&&!Py.call(t,e)||!(e in t)||!Xs(s[e],t[e]))return!1;return Object.keys(t).length===n}}return s!==s&&t!==t}function Do(s){let t=!1;return{promise:new Promise((n,r)=>{s.then(a=>!t&&n(a)).catch(a=>!t&&r(a))}),cancel(){t=!0}}}const jT=["onCopy","onCut","onPaste"],BT=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],VT=["onFocus","onBlur"],zT=["onInput","onInvalid","onReset","onSubmit"],HT=["onLoad","onError"],UT=["onKeyDown","onKeyPress","onKeyUp"],$T=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],WT=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],GT=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],XT=["onSelect"],KT=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],qT=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],YT=["onScroll"],QT=["onWheel"],ZT=["onAnimationStart","onAnimationEnd","onAnimationIteration"],JT=["onTransitionEnd"],tP=["onToggle"],eP=["onChange"],nP=[...jT,...BT,...VT,...zT,...HT,...UT,...$T,...WT,...GT,...XT,...KT,...qT,...YT,...QT,...ZT,...JT,...eP,...tP];function ow(s,t){const e={};for(const n of nP){const r=s[n];r&&(t?e[n]=(a=>r(a,t(n))):e[n]=r)}return e}var iP="Invariant failed";function jt(s,t){if(!s)throw new Error(iP)}var rh,Ry;function sP(){if(Ry)return rh;Ry=1;var s=function(){};return rh=s,rh}var rP=sP();const Pe=Bh(rP),aw=O.createContext(null),oP="noopener noreferrer nofollow";class aP{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return jt(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){jt(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}goToDestination(t){return new Promise(e=>{jt(this.pdfDocument),jt(t),typeof t=="string"?this.pdfDocument.getDestination(t).then(e):Array.isArray(t)?e(t):t.then(e)}).then(e=>{jt(Array.isArray(e));const n=e[0];new Promise(r=>{jt(this.pdfDocument),n instanceof Object?this.pdfDocument.getPageIndex(n).then(a=>{r(a)}).catch(()=>{jt(!1)}):typeof n=="number"?r(n):jt(!1)}).then(r=>{const a=r+1;jt(this.pdfViewer),jt(a>=1&&a<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:e,pageIndex:r,pageNumber:a})})})}navigateTo(t){this.goToDestination(t)}goToPage(t){const e=t-1;jt(this.pdfViewer),jt(t>=1&&t<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:e,pageNumber:t})}addLinkAttributes(t,e,n){t.href=e,t.rel=this.externalLinkRel||oP,t.target=n?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}function Ks({children:s,type:t}){return T.jsx("div",{className:`react-pdf__message react-pdf__message--${t}`,children:s})}const Ly={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function lP(s,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return s}}function Js(){return O.useReducer(lP,{value:void 0,error:void 0})}const Ol=typeof window<"u",lw=Ol&&window.location.protocol==="file:";function cP(s){return typeof s<"u"}function qi(s){return cP(s)&&s!==null}function uP(s){return typeof s=="string"}function hP(s){return s instanceof ArrayBuffer}function dP(s){return jt(Ol),s instanceof Blob}function Oh(s){return uP(s)&&/^data:/.test(s)}function My(s){jt(Oh(s));const[t="",e=""]=s.split(",");return t.split(";").indexOf("base64")!==-1?atob(e):unescape(e)}function fP(){return Ol&&window.devicePixelRatio||1}const cw="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function Iy(){Pe(!lw,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${cw}`)}function pP(){Pe(!lw,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${cw}`)}function ls(s){s?.cancel&&s.cancel()}function jh(s,t){return Object.defineProperty(s,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(s,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(s,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(s,"originalHeight",{get(){return this.view[3]},configurable:!0}),s}function mP(s){return s.name==="RenderingCancelledException"}function gP(s){return new Promise((t,e)=>{const n=new FileReader;n.onload=()=>{if(!n.result)return e(new Error("Error while reading a file."));t(n.result)},n.onerror=r=>{if(!r.target)return e(new Error("Error while reading a file."));const{error:a}=r.target;if(!a)return e(new Error("Error while reading a file."));switch(a.code){case a.NOT_FOUND_ERR:return e(new Error("Error while reading a file: File not found."));case a.SECURITY_ERR:return e(new Error("Error while reading a file: Security error."));case a.ABORT_ERR:return e(new Error("Error while reading a file: Aborted."));default:return e(new Error("Error while reading a file."))}},n.readAsArrayBuffer(s)})}const{PDFDataRangeTransport:yP}=OT,vP=(s,t)=>{switch(t){case Ly.NEED_PASSWORD:{const e=prompt("Enter the password to open this PDF file.");s(e);break}case Ly.INCORRECT_PASSWORD:{const e=prompt("Invalid password. Please try again.");s(e);break}}};function Dy(s){return typeof s=="object"&&s!==null&&("data"in s||"range"in s||"url"in s)}const wP=O.forwardRef(function({children:t,className:e,error:n="Failed to load PDF file.",externalLinkRel:r,externalLinkTarget:a,file:l,inputRef:c,imageResourcesPath:h,loading:d="Loading PDF",noData:p="No PDF file specified.",onItemClick:m,onLoadError:y,onLoadProgress:w,onLoadSuccess:A,onPassword:x=vP,onSourceError:E,onSourceSuccess:S,options:_,renderMode:C,rotate:R,scale:k,...I},D){const[B,H]=Js(),{value:G,error:Q}=B,[ht,lt]=Js(),{value:et,error:Et}=ht,q=O.useRef(new aP),U=O.useRef([]),$=O.useRef(void 0),J=O.useRef(void 0);l&&l!==$.current&&Dy(l)&&(Pe(!Xs(l,$.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),$.current=l),_&&_!==J.current&&(Pe(!Xs(_,J.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),J.current=_);const Z=O.useRef({scrollPageIntoView:Rt=>{const{dest:Ft,pageNumber:qt,pageIndex:Zt=qt-1}=Rt;if(m){m({dest:Ft,pageIndex:Zt,pageNumber:qt});return}const kn=U.current[Zt];if(kn){kn.scrollIntoView();return}Pe(!1,`An internal link leading to page ${qt} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});O.useImperativeHandle(D,()=>({linkService:q,pages:U,viewer:Z}),[]);function N(){S&&S()}function z(){Q&&(Pe(!1,Q.toString()),E&&E(Q))}function nt(){H({type:"RESET"})}O.useEffect(nt,[l,H]);const dt=O.useCallback(async()=>{if(!l)return null;if(typeof l=="string")return Oh(l)?{data:My(l)}:(Iy(),{url:l});if(l instanceof yP)return{range:l};if(hP(l))return{data:l};if(Ol&&dP(l))return{data:await gP(l)};if(jt(typeof l=="object"),jt(Dy(l)),"url"in l&&typeof l.url=="string"){if(Oh(l.url)){const{url:Rt,...Ft}=l;return{data:My(Rt),...Ft}}Iy()}return l},[l]);O.useEffect(()=>{const Rt=Do(dt());return Rt.promise.then(Ft=>{H({type:"RESOLVE",value:Ft})}).catch(Ft=>{H({type:"REJECT",error:Ft})}),()=>{ls(Rt)}},[dt,H]),O.useEffect(()=>{if(!(typeof G>"u")){if(G===!1){z();return}N()}},[G]);function wt(){et&&(A&&A(et),U.current=new Array(et.numPages),q.current.setDocument(et))}function yt(){Et&&(Pe(!1,Et.toString()),y&&y(Et))}O.useEffect(function(){lt({type:"RESET"})},[lt,G]),O.useEffect(function(){if(!G)return;const Ft=_?{...G,..._}:G,qt=Md(Ft);w&&(qt.onProgress=w),x&&(qt.onPassword=x);const Zt=qt,kn=Zt.promise.then(ai=>{lt({type:"RESOLVE",value:ai})}).catch(ai=>{Zt.destroyed||lt({type:"REJECT",error:ai})});return()=>{kn.finally(()=>Zt.destroy())}},[_,lt,G]),O.useEffect(()=>{if(!(typeof et>"u")){if(et===!1){yt();return}wt()}},[et]),O.useEffect(function(){q.current.setViewer(Z.current),q.current.setExternalLinkRel(r),q.current.setExternalLinkTarget(a)},[r,a]);const ut=O.useCallback((Rt,Ft)=>{U.current[Rt]=Ft},[]),Ct=O.useCallback(Rt=>{delete U.current[Rt]},[]),kt=O.useMemo(()=>({imageResourcesPath:h,linkService:q.current,onItemClick:m,pdf:et,registerPage:ut,renderMode:C,rotate:R,scale:k,unregisterPage:Ct}),[h,m,et,ut,C,R,k,Ct]),Pt=O.useMemo(()=>ow(I,()=>et),[I,et]);function Ne(){function Rt(qt){return!!qt?.pdf}if(!Rt(kt))throw new Error("pdf is undefined");const Ft=typeof t=="function"?t(kt):t;return T.jsx(aw.Provider,{value:kt,children:Ft})}function en(){return l?et==null?T.jsx(Ks,{type:"loading",children:typeof d=="function"?d():d}):et===!1?T.jsx(Ks,{type:"error",children:typeof n=="function"?n():n}):Ne():T.jsx(Ks,{type:"no-data",children:typeof p=="function"?p():p})}return T.jsx("div",{className:Fl("react-pdf__Document",e),ref:c,...Pt,children:en()})});function uw(){return O.useContext(aw)}function hw(){for(var s=[],t=0;t<arguments.length;t++)s[t]=arguments[t];var e=s.filter(Boolean);if(e.length<=1){var n=e[0];return n||null}return function(a){for(var l=0,c=e;l<c.length;l++){var h=c[l];typeof h=="function"?h(a):h&&(h.current=a)}}}const dw=O.createContext(null);function jl(){return O.useContext(dw)}function xP(){const s=uw(),t=jl();jt(t);const e={...s,...t},{imageResourcesPath:n,linkService:r,onGetAnnotationsError:a,onGetAnnotationsSuccess:l,onRenderAnnotationLayerError:c,onRenderAnnotationLayerSuccess:h,page:d,pdf:p,renderForms:m,rotate:y,scale:w=1}=e;jt(p),jt(d),jt(r);const[A,x]=Js(),{value:E,error:S}=A,_=O.useRef(null);Pe(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function C(){E&&l&&l(E)}function R(){S&&(Pe(!1,S.toString()),a&&a(S))}O.useEffect(function(){x({type:"RESET"})},[x,d]),O.useEffect(function(){if(!d)return;const H=Do(d.getAnnotations()),G=H;return H.promise.then(Q=>{x({type:"RESOLVE",value:Q})}).catch(Q=>{x({type:"REJECT",error:Q})}),()=>{ls(G)}},[x,d]),O.useEffect(()=>{if(E!==void 0){if(E===!1){R();return}C()}},[E]);function k(){h&&h()}function I(B){Pe(!1,`${B}`),c&&c(B)}const D=O.useMemo(()=>d.getViewport({scale:w,rotation:y}),[d,y,w]);return O.useEffect(function(){if(!p||!d||!r||!E)return;const{current:H}=_;if(!H)return;const G=D.clone({dontFlip:!0}),Q={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:H,l10n:null,page:d,structTreeLayer:null,viewport:G},ht={annotations:E,annotationStorage:p.annotationStorage,div:H,imageResourcesPath:n,linkService:r,page:d,renderForms:m,viewport:G};H.innerHTML="";try{new jd(Q).render(ht),k()}catch(lt){I(lt)}return()=>{}},[E,n,r,d,p,m,D]),T.jsx("div",{className:Fl("react-pdf__Page__annotations","annotationLayer"),ref:_})}const fw={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},AP=/^H(\d+)$/;function bP(s){return s in fw}function Bl(s){return"children"in s}function pw(s){return Bl(s)?s.children.length===1&&0 in s.children&&"id"in s.children[0]:!1}function SP(s){const t={};if(Bl(s)){const{role:e}=s,n=e.match(AP);if(n)t.role="heading",t["aria-level"]=Number(n[1]);else if(bP(e)){const r=fw[e];r&&(t.role=r)}}return t}function mw(s){const t={};if(Bl(s)){if(s.alt!==void 0&&(t["aria-label"]=s.alt),s.lang!==void 0&&(t.lang=s.lang),pw(s)){const[e]=s.children;if(e){const n=mw(e);return{...t,...n}}}}else"id"in s&&(t["aria-owns"]=s.id);return t}function EP(s){return s?{...SP(s),...mw(s)}:null}function gw({className:s,node:t}){const e=O.useMemo(()=>EP(t),[t]),n=O.useMemo(()=>!Bl(t)||pw(t)?null:t.children.map((r,a)=>T.jsx(gw,{node:r},a)),[t]);return T.jsx("span",{className:s,...e,children:n})}function CP(){const s=jl();jt(s);const{onGetStructTreeError:t,onGetStructTreeSuccess:e}=s,[n,r]=Js(),{value:a,error:l}=n,{customTextRenderer:c,page:h}=s;function d(){a&&e&&e(a)}function p(){l&&(Pe(!1,l.toString()),t&&t(l))}return O.useEffect(function(){r({type:"RESET"})},[r,h]),O.useEffect(function(){if(c||!h)return;const y=Do(h.getStructTree()),w=y;return y.promise.then(A=>{r({type:"RESOLVE",value:A})}).catch(A=>{r({type:"REJECT",error:A})}),()=>ls(w)},[c,h,r]),O.useEffect(()=>{if(a!==void 0){if(a===!1){p();return}d()}},[a]),a?T.jsx(gw,{className:"react-pdf__Page__structTree structTree",node:a}):null}const Ny=Hn;function _P(s){const t=jl();jt(t);const e={...t,...s},{_className:n,canvasBackground:r,devicePixelRatio:a=fP(),onRenderError:l,onRenderSuccess:c,page:h,renderForms:d,renderTextLayer:p,rotate:m,scale:y}=e,{canvasRef:w}=s;jt(h);const A=O.useRef(null);function x(){h&&c&&c(jh(h,y))}function E(R){mP(R)||(Pe(!1,R.toString()),l&&l(R))}const S=O.useMemo(()=>h.getViewport({scale:y*a,rotation:m}),[a,h,m,y]),_=O.useMemo(()=>h.getViewport({scale:y,rotation:m}),[h,m,y]);O.useEffect(function(){if(!h)return;h.cleanup();const{current:k}=A;if(!k)return;k.width=S.width,k.height=S.height,k.style.width=`${Math.floor(_.width)}px`,k.style.height=`${Math.floor(_.height)}px`,k.style.visibility="hidden";const I={annotationMode:d?Ny.ENABLE_FORMS:Ny.ENABLE,canvasContext:k.getContext("2d",{alpha:!1}),viewport:S};r&&(I.background=r);const D=h.render(I),B=D;return D.promise.then(()=>{k.style.visibility="",x()}).catch(E),()=>ls(B)},[r,h,d,S,_]);const C=O.useCallback(()=>{const{current:R}=A;R&&(R.width=0,R.height=0)},[]);return O.useEffect(()=>C,[C]),T.jsx("canvas",{className:`${n}__canvas`,dir:"ltr",ref:hw(w,A),style:{display:"block",userSelect:"none"},children:p?T.jsx(CP,{}):null})}function TP(s){return"str"in s}function PP(){const s=jl();jt(s);const{customTextRenderer:t,onGetTextError:e,onGetTextSuccess:n,onRenderTextLayerError:r,onRenderTextLayerSuccess:a,page:l,pageIndex:c,pageNumber:h,rotate:d,scale:p}=s;jt(l);const[m,y]=Js(),{value:w,error:A}=m,x=O.useRef(null);Pe(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function E(){w&&n&&n(w)}function S(){A&&(Pe(!1,A.toString()),e&&e(A))}O.useEffect(function(){y({type:"RESET"})},[l,y]),O.useEffect(function(){if(!l)return;const B=Do(l.getTextContent()),H=B;return B.promise.then(G=>{y({type:"RESOLVE",value:G})}).catch(G=>{y({type:"REJECT",error:G})}),()=>ls(H)},[l,y]),O.useEffect(()=>{if(w!==void 0){if(w===!1){S();return}E()}},[w]);const _=O.useCallback(()=>{a&&a()},[a]),C=O.useCallback(D=>{Pe(!1,D.toString()),r&&r(D)},[r]);function R(){const D=x.current;D&&D.classList.add("selecting")}function k(){const D=x.current;D&&D.classList.remove("selecting")}const I=O.useMemo(()=>l.getViewport({scale:p,rotation:d}),[l,d,p]);return O.useLayoutEffect(function(){if(!l||!w)return;const{current:B}=x;if(!B)return;B.innerHTML="";const H=l.streamTextContent({includeMarkedContent:!0}),G={container:B,textContentSource:H,viewport:I},Q=new yo(G),ht=Q;return Q.render().then(()=>{const lt=document.createElement("div");lt.className="endOfContent",B.append(lt);const et=B.querySelectorAll('[role="presentation"]');if(t){let Et=0;w.items.forEach((q,U)=>{if(!TP(q))return;const $=et[Et];if(!$)return;const J=t({pageIndex:c,pageNumber:h,itemIndex:U,...q});$.innerHTML=J,Et+=q.str&&q.hasEOL?2:1})}_()}).catch(C),()=>ls(ht)},[t,C,_,l,c,h,w,I]),T.jsx("div",{className:Fl("react-pdf__Page__textContent","textLayer"),onMouseUp:k,onMouseDown:R,ref:x})}const Fy=1;function Oy(s){const e={...uw(),...s},{_className:n="react-pdf__Page",_enableRegisterUnregisterPage:r=!0,canvasBackground:a,canvasRef:l,children:c,className:h,customRenderer:d,customTextRenderer:p,devicePixelRatio:m,error:y="Failed to load the page.",height:w,inputRef:A,loading:x="Loading page",noData:E="No page specified.",onGetAnnotationsError:S,onGetAnnotationsSuccess:_,onGetStructTreeError:C,onGetStructTreeSuccess:R,onGetTextError:k,onGetTextSuccess:I,onLoadError:D,onLoadSuccess:B,onRenderAnnotationLayerError:H,onRenderAnnotationLayerSuccess:G,onRenderError:Q,onRenderSuccess:ht,onRenderTextLayerError:lt,onRenderTextLayerSuccess:et,pageIndex:Et,pageNumber:q,pdf:U,registerPage:$,renderAnnotationLayer:J=!0,renderForms:Z=!1,renderMode:N="canvas",renderTextLayer:z=!0,rotate:nt,scale:dt=Fy,unregisterPage:wt,width:yt,...ut}=e,[Ct,kt]=Js(),{value:Pt,error:Ne}=Ct,en=O.useRef(null);jt(U);const Rt=qi(q)?q-1:Et??null,Ft=q??(qi(Et)?Et+1:null),qt=nt??(Pt?Pt.rotate:null),Zt=O.useMemo(()=>{if(!Pt)return null;let nn=1;const mn=dt??Fy;if(yt||w){const gn=Pt.getViewport({scale:1,rotation:qt});yt?nn=yt/gn.width:w&&(nn=w/gn.height)}return mn*nn},[w,Pt,qt,dt,yt]);O.useEffect(function(){return()=>{qi(Rt)&&r&&wt&&wt(Rt)}},[r,U,Rt,wt]);function kn(){if(B){if(!Pt||!Zt)return;B(jh(Pt,Zt))}if(r&&$){if(!qi(Rt)||!en.current)return;$(Rt,en.current)}}function ai(){Ne&&(Pe(!1,Ne.toString()),D&&D(Ne))}O.useEffect(function(){kt({type:"RESET"})},[kt,U,Rt]),O.useEffect(function(){if(!U||!Ft)return;const mn=Do(U.getPage(Ft)),gn=mn;return mn.promise.then(Xn=>{kt({type:"RESOLVE",value:Xn})}).catch(Xn=>{kt({type:"REJECT",error:Xn})}),()=>ls(gn)},[kt,U,Ft]),O.useEffect(()=>{if(Pt!==void 0){if(Pt===!1){ai();return}kn()}},[Pt,Zt]);const Ii=O.useMemo(()=>qi(Rt)&&Ft&&qi(qt)&&qi(Zt)?{_className:n,canvasBackground:a,customTextRenderer:p,devicePixelRatio:m,onGetAnnotationsError:S,onGetAnnotationsSuccess:_,onGetStructTreeError:C,onGetStructTreeSuccess:R,onGetTextError:k,onGetTextSuccess:I,onRenderAnnotationLayerError:H,onRenderAnnotationLayerSuccess:G,onRenderError:Q,onRenderSuccess:ht,onRenderTextLayerError:lt,onRenderTextLayerSuccess:et,page:Pt,pageIndex:Rt,pageNumber:Ft,renderForms:Z,renderTextLayer:z,rotate:qt,scale:Zt}:null,[n,a,p,m,S,_,C,R,k,I,H,G,Q,ht,lt,et,Pt,Rt,Ft,Z,z,qt,Zt]),Di=O.useMemo(()=>ow(ut,()=>Pt&&(Zt?jh(Pt,Zt):void 0)),[ut,Pt,Zt]),pn=`${Rt}@${Zt}/${qt}`;function rr(){switch(N){case"custom":return jt(d),T.jsx(d,{},`${pn}_custom`);case"none":return null;case"canvas":default:return T.jsx(_P,{canvasRef:l},`${pn}_canvas`)}}function No(){return z?T.jsx(PP,{},`${pn}_text`):null}function Fo(){return J?T.jsx(xP,{},`${pn}_annotations`):null}function Oo(){function nn(gn){return!!gn?.page}if(!nn(Ii))throw new Error("page is undefined");const mn=typeof c=="function"?c(Ii):c;return T.jsxs(dw.Provider,{value:Ii,children:[rr(),No(),Fo(),mn]})}function jo(){return Ft?U===null||Pt===void 0||Pt===null?T.jsx(Ks,{type:"loading",children:typeof x=="function"?x():x}):U===!1||Pt===!1?T.jsx(Ks,{type:"error",children:typeof y=="function"?y():y}):Oo():T.jsx(Ks,{type:"no-data",children:typeof E=="function"?E():E})}return T.jsx("div",{className:Fl(n,h),"data-page-number":Ft,ref:hw(A,en),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${Zt}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:a||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...Di,children:jo()})}pP();ki.workerSrc="pdf.worker.mjs";const kP="/assets/pdf.worker.min-DbR_HJhJ.mjs";var RP={};ki.workerSrc=kP;function LP({onClose:s}){const t=O.useRef(null),[e,n]=O.useState(800),[r,a]=O.useState(null),[l,c]=O.useState(0);O.useEffect(()=>{const p=()=>{t.current&&n(Math.min(t.current.clientWidth-24,1100))};return p(),window.addEventListener("resize",p),()=>window.removeEventListener("resize",p)},[]);const d=`${(typeof import.meta<"u"&&"/"||typeof process<"u"&&RP?.PUBLIC_URL||"/").replace(/\/+$/,"")}/Kiran_Mulawad_CV.pdf`;return T.jsx(At.div,{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/75",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:T.jsxs(At.div,{className:"bg-white dark:bg-gray-900 p-6 rounded-xl shadow-2xl max-w-4xl w-full h-[80vh] flex flex-col overflow-hidden",initial:{scale:.96,y:8},animate:{scale:1,y:0},exit:{scale:.96,y:8},children:[T.jsxs("div",{className:"flex justify-between items-center mb-4",children:[T.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"Kiran's CV"}),T.jsx("button",{onClick:s,className:"text-3xl leading-none text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-white",children:""})]}),T.jsx("div",{ref:t,className:"flex-grow overflow-auto border rounded-md bg-gray-50 dark:bg-gray-800",children:r?T.jsxs("div",{className:"p-6 text-center space-y-3",children:[T.jsx("p",{className:"text-red-600",children:"Couldnt render the PDF."}),T.jsx("a",{className:"underline",href:d,target:"_blank",rel:"noreferrer",children:"Open PDF in new tab"})]}):T.jsxs(wP,{file:d,onLoadSuccess:({numPages:p})=>{p<2&&console.warn(`PDF has only ${p} page(s).`)},onLoadError:p=>{console.error("onLoadError:",p),a(p)},onSourceError:p=>{console.error("onSourceError:",p),a(p)},loading:T.jsx("div",{className:"p-6 text-center",children:"Loading PDF"}),children:[T.jsx(Oy,{pageNumber:1,width:Math.max(320,Math.floor(e)),renderTextLayer:!0,renderAnnotationLayer:!0,className:"m-0"}),T.jsx(Oy,{pageNumber:2,width:Math.max(320,Math.floor(e)),renderTextLayer:!0,renderAnnotationLayer:!0,className:"mt-6"})]})}),T.jsx("div",{className:"mt-4 text-center",children:T.jsx("a",{href:d,download:"Kiran_Mulawad_CV.pdf",className:"inline-block bg-[#3B82F6] text-white font-semibold py-2 px-6 rounded-lg hover:bg-opacity-90 transition-colors",children:"Download PDF"})})]})})}const MP=({theme:s})=>{const t=O.useRef(null);return O.useEffect(()=>{const e=t.current;if(!e)return;const n=e.getContext("2d");let r,a=0;const l=()=>{e.width=window.innerWidth,e.height=window.innerHeight};l(),window.addEventListener("resize",l);const c=()=>{a+=.003,n.clearRect(0,0,e.width,e.height),(s==="dark"?[{x:.2,y:.3,color:"rgba(218, 165, 32, 0.08)"},{x:.8,y:.2,color:"rgba(139, 69, 19, 0.06)"},{x:.5,y:.8,color:"rgba(255, 215, 0, 0.05)"},{x:.1,y:.7,color:"rgba(184, 134, 11, 0.07)"}]:[{x:.2,y:.3,color:"rgba(218, 165, 32, 0.12)"},{x:.8,y:.2,color:"rgba(255, 215, 0, 0.08)"},{x:.5,y:.8,color:"rgba(184, 134, 11, 0.10)"},{x:.1,y:.7,color:"rgba(139, 69, 19, 0.06)"}]).forEach((d,p)=>{const m=Math.sin(a+p*2)*100,y=Math.cos(a+p*2)*100,w=e.width*d.x+m,A=e.height*d.y+y,x=n.createRadialGradient(w,A,0,w,A,e.width*.5);x.addColorStop(0,d.color),x.addColorStop(1,"rgba(0, 0, 0, 0)"),n.fillStyle=x,n.fillRect(0,0,e.width,e.height)}),r=requestAnimationFrame(c)};return c(),()=>{window.removeEventListener("resize",l),cancelAnimationFrame(r)}},[s]),T.jsx(At.canvas,{ref:t,className:"fixed top-0 left-0 w-full h-full pointer-events-none",style:{zIndex:0},initial:{opacity:0},animate:{opacity:1},transition:{duration:1}})},IP=()=>{const[s,t]=O.useState(0);return O.useEffect(()=>{const e=()=>{const n=document.documentElement.scrollHeight-document.documentElement.clientHeight,r=window.scrollY/n*100;t(r)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),T.jsx(At.div,{className:"fixed top-0 left-0 right-0 h-1 bg-gradient-to-r from-primary-500 via-primary-400 to-primary-600 origin-left z-[9999]",style:{scaleX:s/100},initial:{scaleX:0}})},DP=()=>{const[s,t]=O.useState(!1);O.useEffect(()=>{const n=()=>{window.scrollY>300?t(!0):t(!1)};return window.addEventListener("scroll",n),()=>window.removeEventListener("scroll",n)},[]);const e=()=>{window.scrollTo({top:0,behavior:"smooth"})};return T.jsx(wh,{children:s&&T.jsx(At.button,{initial:{opacity:0,scale:.5,y:100},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.5,y:100},whileHover:{scale:1.1},whileTap:{scale:.9},onClick:e,className:"fixed bottom-8 right-8 z-50 bg-gradient-to-r from-primary-500 to-primary-600 text-white p-4 rounded-full shadow-glow hover:shadow-glow-lg transition-all duration-300 group","aria-label":"Back to top",children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 transform group-hover:-translate-y-1 transition-transform duration-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 10l7-7m0 0l7 7m-7-7v18"})})})})},NP=({end:s,duration:t=2,suffix:e="",prefix:n=""})=>{const[r,a]=O.useState(0),[l,c]=O.useState(!1),h=O.useRef(null);return O.useEffect(()=>{const d=new IntersectionObserver(([p])=>{if(p.isIntersecting&&!l){c(!0);const m=s/(t*60);let y=0;const w=setInterval(()=>{y+=m,y>=s?(a(s),clearInterval(w)):a(Math.floor(y))},1e3/60);return()=>clearInterval(w)}},{threshold:.5});return h.current&&d.observe(h.current),()=>d.disconnect()},[s,t,l]),T.jsxs("span",{ref:h,children:[n,r,e]})},FP=()=>{const s=[{icon:"",label:"Projects Completed",value:4,suffix:"+"},{icon:"",label:"Years Experience",value:2,suffix:"+"},{icon:"",label:"Certifications",value:5,suffix:"+"},{icon:"",label:"Client Satisfaction",value:100,suffix:"%"}];return T.jsx("section",{className:"py-16 bg-transparent relative",children:T.jsx("div",{className:"container mx-auto px-6",children:T.jsx(At.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},className:"glass-card rounded-3xl p-8 md:p-12",children:T.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8",children:s.map((t,e)=>T.jsxs(At.div,{initial:{opacity:0,scale:.5},whileInView:{opacity:1,scale:1},transition:{duration:.5,delay:e*.1},viewport:{once:!0},className:"text-center",children:[T.jsx("div",{className:"text-4xl md:text-5xl mb-3",children:t.icon}),T.jsx("div",{className:"text-3xl md:text-4xl font-bold text-gray-800 dark:text-white mb-2",children:T.jsx(NP,{end:t.value,duration:2,suffix:t.suffix})}),T.jsx("div",{className:"text-sm md:text-base text-gray-600 dark:text-gray-300",children:t.label})]},e))})})})})},OP=()=>{const[s,t]=O.useState(()=>typeof window<"u"&&localStorage.getItem("theme")?localStorage.getItem("theme"):"dark"),[e,n]=O.useState(!1);O.useEffect(()=>{const a=document.documentElement;s==="dark"?(a.classList.add("dark"),localStorage.setItem("theme","dark")):(a.classList.remove("dark"),localStorage.setItem("theme","light"))},[s]);const r=()=>{t(a=>a==="light"?"dark":"light")};return O.useEffect(()=>{const a=document.querySelectorAll("main section"),l=document.querySelectorAll(".nav-link"),c=()=>{let h="";a.forEach(d=>{const p=d.offsetTop,m=window.scrollY+80;m>=p&&m<p+d.clientHeight&&(h=d.getAttribute("id"))}),l.forEach(d=>{d.classList.remove("active"),d.getAttribute("href")&&d.getAttribute("href").includes(h)&&d.classList.add("active")})};return window.addEventListener("scroll",c),c(),()=>{window.removeEventListener("scroll",c)}},[]),T.jsxs(wh,{children:[T.jsx(IP,{}),T.jsx(DP,{}),T.jsx(MP,{theme:s}),T.jsxs("div",{className:"antialiased font-inter bg-[#FDFBF7] dark:bg-gray-900 transition-colors duration-500 relative",children:[T.jsx(MC,{theme:s,toggleTheme:r}),T.jsxs("main",{className:"relative z-10",children:[T.jsx(DC,{onShowResume:()=>n(!0)}),T.jsx(OC,{}),T.jsx(FP,{}),T.jsx(VC,{}),T.jsx(qC,{}),T.jsx(QC,{}),T.jsx(JC,{}),T.jsx(t_,{})]}),T.jsx(IC,{})]}),e&&T.jsx(wh,{children:T.jsx(LP,{onClose:()=>n(!1)})})]})},jy=document.getElementById("root");jy?S1.createRoot(jy).render(T.jsx(g1.StrictMode,{children:T.jsx(OP,{})})):console.error("Root element with ID 'root' not found in the DOM.");
