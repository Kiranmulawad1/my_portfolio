var Qc=l=>{throw TypeError(l)};var co=(l,t,e)=>t.has(l)||Qc("Cannot "+e);var $t=(l,t,e)=>(co(l,t,"read from private field"),e?e.call(l):t.get(l)),Qe=(l,t,e)=>t.has(l)?Qc("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(l):t.set(l,e),we=(l,t,e,a)=>(co(l,t,"write to private field"),a?a.call(l,e):t.set(l,e),e),Ze=(l,t,e)=>(co(l,t,"access private method"),e);var Zc=(l,t,e,a)=>({set _(c){we(l,t,c,e)},get _(){return $t(l,t,a)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))a(c);new MutationObserver(c=>{for(const h of c)if(h.type==="childList")for(const d of h.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function e(c){const h={};return c.integrity&&(h.integrity=c.integrity),c.referrerPolicy&&(h.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?h.credentials="include":c.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function a(c){if(c.ep)return;c.ep=!0;const h=e(c);fetch(c.href,h)}})();function getDefaultExportFromCjs(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production_min;function requireReact_production_min(){if(hasRequiredReact_production_min)return react_production_min;hasRequiredReact_production_min=1;var l=Symbol.for("react.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),h=Symbol.for("react.provider"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),w=Symbol.iterator;function E(B){return B===null||typeof B!="object"?null:(B=w&&B[w]||B["@@iterator"],typeof B=="function"?B:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,T={};function k(B,st,mt){this.props=B,this.context=st,this.refs=T,this.updater=mt||S}k.prototype.isReactComponent={},k.prototype.setState=function(B,st){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,st,"setState")},k.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function D(){}D.prototype=k.prototype;function N(B,st,mt){this.props=B,this.context=st,this.refs=T,this.updater=mt||S}var L=N.prototype=new D;L.constructor=N,C(L,k.prototype),L.isPureReactComponent=!0;var j=Array.isArray,F=Object.prototype.hasOwnProperty,$={current:null},G={key:!0,ref:!0,__self:!0,__source:!0};function nt(B,st,mt){var vt,Ct={},_t=null,bt=null;if(st!=null)for(vt in st.ref!==void 0&&(bt=st.ref),st.key!==void 0&&(_t=""+st.key),st)F.call(st,vt)&&!G.hasOwnProperty(vt)&&(Ct[vt]=st[vt]);var Dt=arguments.length-2;if(Dt===1)Ct.children=mt;else if(1<Dt){for(var It=Array(Dt),Lt=0;Lt<Dt;Lt++)It[Lt]=arguments[Lt+2];Ct.children=It}if(B&&B.defaultProps)for(vt in Dt=B.defaultProps,Dt)Ct[vt]===void 0&&(Ct[vt]=Dt[vt]);return{$$typeof:l,type:B,key:_t,ref:bt,props:Ct,_owner:$.current}}function ot(B,st){return{$$typeof:l,type:B.type,key:st,ref:B.ref,props:B.props,_owner:B._owner}}function ct(B){return typeof B=="object"&&B!==null&&B.$$typeof===l}function ft(B){var st={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(mt){return st[mt]})}var Tt=/\/+/g;function At(B,st){return typeof B=="object"&&B!==null&&B.key!=null?ft(""+B.key):st.toString(36)}function gt(B,st,mt,vt,Ct){var _t=typeof B;(_t==="undefined"||_t==="boolean")&&(B=null);var bt=!1;if(B===null)bt=!0;else switch(_t){case"string":case"number":bt=!0;break;case"object":switch(B.$$typeof){case l:case t:bt=!0}}if(bt)return bt=B,Ct=Ct(bt),B=vt===""?"."+At(bt,0):vt,j(Ct)?(mt="",B!=null&&(mt=B.replace(Tt,"$&/")+"/"),gt(Ct,st,mt,"",function(Lt){return Lt})):Ct!=null&&(ct(Ct)&&(Ct=ot(Ct,mt+(!Ct.key||bt&&bt.key===Ct.key?"":(""+Ct.key).replace(Tt,"$&/")+"/")+B)),st.push(Ct)),1;if(bt=0,vt=vt===""?".":vt+":",j(B))for(var Dt=0;Dt<B.length;Dt++){_t=B[Dt];var It=vt+At(_t,Dt);bt+=gt(_t,st,mt,It,Ct)}else if(It=E(B),typeof It=="function")for(B=It.call(B),Dt=0;!(_t=B.next()).done;)_t=_t.value,It=vt+At(_t,Dt++),bt+=gt(_t,st,mt,It,Ct);else if(_t==="object")throw st=String(B),Error("Objects are not valid as a React child (found: "+(st==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":st)+"). If you meant to render a collection of children, use an array instead.");return bt}function Mt(B,st,mt){if(B==null)return B;var vt=[],Ct=0;return gt(B,vt,"","",function(_t){return st.call(mt,_t,Ct++)}),vt}function q(B){if(B._status===-1){var st=B._result;st=st(),st.then(function(mt){(B._status===0||B._status===-1)&&(B._status=1,B._result=mt)},function(mt){(B._status===0||B._status===-1)&&(B._status=2,B._result=mt)}),B._status===-1&&(B._status=0,B._result=st)}if(B._status===1)return B._result.default;throw B._result}var z={current:null},J={transition:null},lt={ReactCurrentDispatcher:z,ReactCurrentBatchConfig:J,ReactCurrentOwner:$};function at(){throw Error("act(...) is not supported in production builds of React.")}return react_production_min.Children={map:Mt,forEach:function(B,st,mt){Mt(B,function(){st.apply(this,arguments)},mt)},count:function(B){var st=0;return Mt(B,function(){st++}),st},toArray:function(B){return Mt(B,function(st){return st})||[]},only:function(B){if(!ct(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},react_production_min.Component=k,react_production_min.Fragment=e,react_production_min.Profiler=c,react_production_min.PureComponent=N,react_production_min.StrictMode=a,react_production_min.Suspense=m,react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lt,react_production_min.act=at,react_production_min.cloneElement=function(B,st,mt){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var vt=C({},B.props),Ct=B.key,_t=B.ref,bt=B._owner;if(st!=null){if(st.ref!==void 0&&(_t=st.ref,bt=$.current),st.key!==void 0&&(Ct=""+st.key),B.type&&B.type.defaultProps)var Dt=B.type.defaultProps;for(It in st)F.call(st,It)&&!G.hasOwnProperty(It)&&(vt[It]=st[It]===void 0&&Dt!==void 0?Dt[It]:st[It])}var It=arguments.length-2;if(It===1)vt.children=mt;else if(1<It){Dt=Array(It);for(var Lt=0;Lt<It;Lt++)Dt[Lt]=arguments[Lt+2];vt.children=Dt}return{$$typeof:l,type:B.type,key:Ct,ref:_t,props:vt,_owner:bt}},react_production_min.createContext=function(B){return B={$$typeof:d,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:h,_context:B},B.Consumer=B},react_production_min.createElement=nt,react_production_min.createFactory=function(B){var st=nt.bind(null,B);return st.type=B,st},react_production_min.createRef=function(){return{current:null}},react_production_min.forwardRef=function(B){return{$$typeof:f,render:B}},react_production_min.isValidElement=ct,react_production_min.lazy=function(B){return{$$typeof:y,_payload:{_status:-1,_result:B},_init:q}},react_production_min.memo=function(B,st){return{$$typeof:g,type:B,compare:st===void 0?null:st}},react_production_min.startTransition=function(B){var st=J.transition;J.transition={};try{B()}finally{J.transition=st}},react_production_min.unstable_act=at,react_production_min.useCallback=function(B,st){return z.current.useCallback(B,st)},react_production_min.useContext=function(B){return z.current.useContext(B)},react_production_min.useDebugValue=function(){},react_production_min.useDeferredValue=function(B){return z.current.useDeferredValue(B)},react_production_min.useEffect=function(B,st){return z.current.useEffect(B,st)},react_production_min.useId=function(){return z.current.useId()},react_production_min.useImperativeHandle=function(B,st,mt){return z.current.useImperativeHandle(B,st,mt)},react_production_min.useInsertionEffect=function(B,st){return z.current.useInsertionEffect(B,st)},react_production_min.useLayoutEffect=function(B,st){return z.current.useLayoutEffect(B,st)},react_production_min.useMemo=function(B,st){return z.current.useMemo(B,st)},react_production_min.useReducer=function(B,st,mt){return z.current.useReducer(B,st,mt)},react_production_min.useRef=function(B){return z.current.useRef(B)},react_production_min.useState=function(B){return z.current.useState(B)},react_production_min.useSyncExternalStore=function(B,st,mt){return z.current.useSyncExternalStore(B,st,mt)},react_production_min.useTransition=function(){return z.current.useTransition()},react_production_min.version="18.3.1",react_production_min}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production_min()),react.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production_min;function requireReactJsxRuntime_production_min(){if(hasRequiredReactJsxRuntime_production_min)return reactJsxRuntime_production_min;hasRequiredReactJsxRuntime_production_min=1;var l=requireReact(),t=Symbol.for("react.element"),e=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,c=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,h={key:!0,ref:!0,__self:!0,__source:!0};function d(f,m,g){var y,w={},E=null,S=null;g!==void 0&&(E=""+g),m.key!==void 0&&(E=""+m.key),m.ref!==void 0&&(S=m.ref);for(y in m)a.call(m,y)&&!h.hasOwnProperty(y)&&(w[y]=m[y]);if(f&&f.defaultProps)for(y in m=f.defaultProps,m)w[y]===void 0&&(w[y]=m[y]);return{$$typeof:t,type:f,key:E,ref:S,props:w,_owner:c.current}}return reactJsxRuntime_production_min.Fragment=e,reactJsxRuntime_production_min.jsx=d,reactJsxRuntime_production_min.jsxs=d,reactJsxRuntime_production_min}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production_min()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports);var client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production_min;function requireScheduler_production_min(){return hasRequiredScheduler_production_min||(hasRequiredScheduler_production_min=1,(function(l){function t(J,lt){var at=J.length;J.push(lt);t:for(;0<at;){var B=at-1>>>1,st=J[B];if(0<c(st,lt))J[B]=lt,J[at]=st,at=B;else break t}}function e(J){return J.length===0?null:J[0]}function a(J){if(J.length===0)return null;var lt=J[0],at=J.pop();if(at!==lt){J[0]=at;t:for(var B=0,st=J.length,mt=st>>>1;B<mt;){var vt=2*(B+1)-1,Ct=J[vt],_t=vt+1,bt=J[_t];if(0>c(Ct,at))_t<st&&0>c(bt,Ct)?(J[B]=bt,J[_t]=at,B=_t):(J[B]=Ct,J[vt]=at,B=vt);else if(_t<st&&0>c(bt,at))J[B]=bt,J[_t]=at,B=_t;else break t}}return lt}function c(J,lt){var at=J.sortIndex-lt.sortIndex;return at!==0?at:J.id-lt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var h=performance;l.unstable_now=function(){return h.now()}}else{var d=Date,f=d.now();l.unstable_now=function(){return d.now()-f}}var m=[],g=[],y=1,w=null,E=3,S=!1,C=!1,T=!1,k=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(J){for(var lt=e(g);lt!==null;){if(lt.callback===null)a(g);else if(lt.startTime<=J)a(g),lt.sortIndex=lt.expirationTime,t(m,lt);else break;lt=e(g)}}function j(J){if(T=!1,L(J),!C)if(e(m)!==null)C=!0,q(F);else{var lt=e(g);lt!==null&&z(j,lt.startTime-J)}}function F(J,lt){C=!1,T&&(T=!1,D(nt),nt=-1),S=!0;var at=E;try{for(L(lt),w=e(m);w!==null&&(!(w.expirationTime>lt)||J&&!ft());){var B=w.callback;if(typeof B=="function"){w.callback=null,E=w.priorityLevel;var st=B(w.expirationTime<=lt);lt=l.unstable_now(),typeof st=="function"?w.callback=st:w===e(m)&&a(m),L(lt)}else a(m);w=e(m)}if(w!==null)var mt=!0;else{var vt=e(g);vt!==null&&z(j,vt.startTime-lt),mt=!1}return mt}finally{w=null,E=at,S=!1}}var $=!1,G=null,nt=-1,ot=5,ct=-1;function ft(){return!(l.unstable_now()-ct<ot)}function Tt(){if(G!==null){var J=l.unstable_now();ct=J;var lt=!0;try{lt=G(!0,J)}finally{lt?At():($=!1,G=null)}}else $=!1}var At;if(typeof N=="function")At=function(){N(Tt)};else if(typeof MessageChannel<"u"){var gt=new MessageChannel,Mt=gt.port2;gt.port1.onmessage=Tt,At=function(){Mt.postMessage(null)}}else At=function(){k(Tt,0)};function q(J){G=J,$||($=!0,At())}function z(J,lt){nt=k(function(){J(l.unstable_now())},lt)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(J){J.callback=null},l.unstable_continueExecution=function(){C||S||(C=!0,q(F))},l.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ot=0<J?Math.floor(1e3/J):5},l.unstable_getCurrentPriorityLevel=function(){return E},l.unstable_getFirstCallbackNode=function(){return e(m)},l.unstable_next=function(J){switch(E){case 1:case 2:case 3:var lt=3;break;default:lt=E}var at=E;E=lt;try{return J()}finally{E=at}},l.unstable_pauseExecution=function(){},l.unstable_requestPaint=function(){},l.unstable_runWithPriority=function(J,lt){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var at=E;E=J;try{return lt()}finally{E=at}},l.unstable_scheduleCallback=function(J,lt,at){var B=l.unstable_now();switch(typeof at=="object"&&at!==null?(at=at.delay,at=typeof at=="number"&&0<at?B+at:B):at=B,J){case 1:var st=-1;break;case 2:st=250;break;case 5:st=1073741823;break;case 4:st=1e4;break;default:st=5e3}return st=at+st,J={id:y++,callback:lt,priorityLevel:J,startTime:at,expirationTime:st,sortIndex:-1},at>B?(J.sortIndex=at,t(g,J),e(m)===null&&J===e(g)&&(T?(D(nt),nt=-1):T=!0,z(j,at-B))):(J.sortIndex=st,t(m,J),C||S||(C=!0,q(F))),J},l.unstable_shouldYield=ft,l.unstable_wrapCallback=function(J){var lt=E;return function(){var at=E;E=lt;try{return J.apply(this,arguments)}finally{E=at}}}})(scheduler_production_min)),scheduler_production_min}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production_min()),scheduler.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production_min;function requireReactDom_production_min(){if(hasRequiredReactDom_production_min)return reactDom_production_min;hasRequiredReactDom_production_min=1;var l=requireReact(),t=requireScheduler();function e(o){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+o,p=1;p<arguments.length;p++)u+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+o+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,c={};function h(o,u){d(o,u),d(o+"Capture",u)}function d(o,u){for(c[o]=u,o=0;o<u.length;o++)a.add(u[o])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},w={};function E(o){return m.call(w,o)?!0:m.call(y,o)?!1:g.test(o)?w[o]=!0:(y[o]=!0,!1)}function S(o,u,p,x){if(p!==null&&p.type===0)return!1;switch(typeof u){case"function":case"symbol":return!0;case"boolean":return x?!1:p!==null?!p.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function C(o,u,p,x){if(u===null||typeof u>"u"||S(o,u,p,x))return!0;if(x)return!1;if(p!==null)switch(p.type){case 3:return!u;case 4:return u===!1;case 5:return isNaN(u);case 6:return isNaN(u)||1>u}return!1}function T(o,u,p,x,b,A,P){this.acceptsBooleans=u===2||u===3||u===4,this.attributeName=x,this.attributeNamespace=b,this.mustUseProperty=p,this.propertyName=o,this.type=u,this.sanitizeURL=A,this.removeEmptyString=P}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){k[o]=new T(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var u=o[0];k[u]=new T(u,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){k[o]=new T(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){k[o]=new T(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){k[o]=new T(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){k[o]=new T(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){k[o]=new T(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){k[o]=new T(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){k[o]=new T(o,5,!1,o.toLowerCase(),null,!1,!1)});var D=/[\-:]([a-z])/g;function N(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var u=o.replace(D,N);k[u]=new T(u,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var u=o.replace(D,N);k[u]=new T(u,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var u=o.replace(D,N);k[u]=new T(u,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){k[o]=new T(o,1,!1,o.toLowerCase(),null,!1,!1)}),k.xlinkHref=new T("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){k[o]=new T(o,1,!1,o.toLowerCase(),null,!0,!0)});function L(o,u,p,x){var b=k.hasOwnProperty(u)?k[u]:null;(b!==null?b.type!==0:x||!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(C(u,p,b,x)&&(p=null),x||b===null?E(u)&&(p===null?o.removeAttribute(u):o.setAttribute(u,""+p)):b.mustUseProperty?o[b.propertyName]=p===null?b.type===3?!1:"":p:(u=b.attributeName,x=b.attributeNamespace,p===null?o.removeAttribute(u):(b=b.type,p=b===3||b===4&&p===!0?"":""+p,x?o.setAttributeNS(x,u,p):o.setAttribute(u,p))))}var j=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,F=Symbol.for("react.element"),$=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),nt=Symbol.for("react.strict_mode"),ot=Symbol.for("react.profiler"),ct=Symbol.for("react.provider"),ft=Symbol.for("react.context"),Tt=Symbol.for("react.forward_ref"),At=Symbol.for("react.suspense"),gt=Symbol.for("react.suspense_list"),Mt=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),z=Symbol.for("react.offscreen"),J=Symbol.iterator;function lt(o){return o===null||typeof o!="object"?null:(o=J&&o[J]||o["@@iterator"],typeof o=="function"?o:null)}var at=Object.assign,B;function st(o){if(B===void 0)try{throw Error()}catch(p){var u=p.stack.trim().match(/\n( *(at )?)/);B=u&&u[1]||""}return`
`+B+o}var mt=!1;function vt(o,u){if(!o||mt)return"";mt=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(rt){var x=rt}Reflect.construct(o,[],u)}else{try{u.call()}catch(rt){x=rt}o.call(u.prototype)}else{try{throw Error()}catch(rt){x=rt}o()}}catch(rt){if(rt&&x&&typeof rt.stack=="string"){for(var b=rt.stack.split(`
`),A=x.stack.split(`
`),P=b.length-1,O=A.length-1;1<=P&&0<=O&&b[P]!==A[O];)O--;for(;1<=P&&0<=O;P--,O--)if(b[P]!==A[O]){if(P!==1||O!==1)do if(P--,O--,0>O||b[P]!==A[O]){var H=`
`+b[P].replace(" at new "," at ");return o.displayName&&H.includes("<anonymous>")&&(H=H.replace("<anonymous>",o.displayName)),H}while(1<=P&&0<=O);break}}}finally{mt=!1,Error.prepareStackTrace=p}return(o=o?o.displayName||o.name:"")?st(o):""}function Ct(o){switch(o.tag){case 5:return st(o.type);case 16:return st("Lazy");case 13:return st("Suspense");case 19:return st("SuspenseList");case 0:case 2:case 15:return o=vt(o.type,!1),o;case 11:return o=vt(o.type.render,!1),o;case 1:return o=vt(o.type,!0),o;default:return""}}function _t(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case G:return"Fragment";case $:return"Portal";case ot:return"Profiler";case nt:return"StrictMode";case At:return"Suspense";case gt:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case ft:return(o.displayName||"Context")+".Consumer";case ct:return(o._context.displayName||"Context")+".Provider";case Tt:var u=o.render;return o=o.displayName,o||(o=u.displayName||u.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case Mt:return u=o.displayName||null,u!==null?u:_t(o.type)||"Memo";case q:u=o._payload,o=o._init;try{return _t(o(u))}catch{}}return null}function bt(o){var u=o.type;switch(o.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=u.render,o=o.displayName||o.name||"",u.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _t(u);case 8:return u===nt?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function Dt(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function It(o){var u=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function Lt(o){var u=It(o)?"checked":"value",p=Object.getOwnPropertyDescriptor(o.constructor.prototype,u),x=""+o[u];if(!o.hasOwnProperty(u)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var b=p.get,A=p.set;return Object.defineProperty(o,u,{configurable:!0,get:function(){return b.call(this)},set:function(P){x=""+P,A.call(this,P)}}),Object.defineProperty(o,u,{enumerable:p.enumerable}),{getValue:function(){return x},setValue:function(P){x=""+P},stopTracking:function(){o._valueTracker=null,delete o[u]}}}}function pe(o){o._valueTracker||(o._valueTracker=Lt(o))}function Te(o){if(!o)return!1;var u=o._valueTracker;if(!u)return!0;var p=u.getValue(),x="";return o&&(x=It(o)?o.checked?"true":"false":o.value),o=x,o!==p?(u.setValue(o),!0):!1}function Nt(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function Vt(o,u){var p=u.checked;return at({},u,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:p??o._wrapperState.initialChecked})}function Xt(o,u){var p=u.defaultValue==null?"":u.defaultValue,x=u.checked!=null?u.checked:u.defaultChecked;p=Dt(u.value!=null?u.value:p),o._wrapperState={initialChecked:x,initialValue:p,controlled:u.type==="checkbox"||u.type==="radio"?u.checked!=null:u.value!=null}}function Yt(o,u){u=u.checked,u!=null&&L(o,"checked",u,!1)}function Ge(o,u){Yt(o,u);var p=Dt(u.value),x=u.type;if(p!=null)x==="number"?(p===0&&o.value===""||o.value!=p)&&(o.value=""+p):o.value!==""+p&&(o.value=""+p);else if(x==="submit"||x==="reset"){o.removeAttribute("value");return}u.hasOwnProperty("value")?Dn(o,u.type,p):u.hasOwnProperty("defaultValue")&&Dn(o,u.type,Dt(u.defaultValue)),u.checked==null&&u.defaultChecked!=null&&(o.defaultChecked=!!u.defaultChecked)}function hn(o,u,p){if(u.hasOwnProperty("value")||u.hasOwnProperty("defaultValue")){var x=u.type;if(!(x!=="submit"&&x!=="reset"||u.value!==void 0&&u.value!==null))return;u=""+o._wrapperState.initialValue,p||u===o.value||(o.value=u),o.defaultValue=u}p=o.name,p!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,p!==""&&(o.name=p)}function Dn(o,u,p){(u!=="number"||Nt(o.ownerDocument)!==o)&&(p==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+p&&(o.defaultValue=""+p))}var Ln=Array.isArray;function Ie(o,u,p,x){if(o=o.options,u){u={};for(var b=0;b<p.length;b++)u["$"+p[b]]=!0;for(p=0;p<o.length;p++)b=u.hasOwnProperty("$"+o[p].value),o[p].selected!==b&&(o[p].selected=b),b&&x&&(o[p].defaultSelected=!0)}else{for(p=""+Dt(p),u=null,b=0;b<o.length;b++){if(o[b].value===p){o[b].selected=!0,x&&(o[b].defaultSelected=!0);return}u!==null||o[b].disabled||(u=o[b])}u!==null&&(u.selected=!0)}}function bi(o,u){if(u.dangerouslySetInnerHTML!=null)throw Error(e(91));return at({},u,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function as(o,u){var p=u.value;if(p==null){if(p=u.children,u=u.defaultValue,p!=null){if(u!=null)throw Error(e(92));if(Ln(p)){if(1<p.length)throw Error(e(93));p=p[0]}u=p}u==null&&(u=""),p=u}o._wrapperState={initialValue:Dt(p)}}function os(o,u){var p=Dt(u.value),x=Dt(u.defaultValue);p!=null&&(p=""+p,p!==o.value&&(o.value=p),u.defaultValue==null&&o.defaultValue!==p&&(o.defaultValue=p)),x!=null&&(o.defaultValue=""+x)}function ls(o){var u=o.textContent;u===o._wrapperState.initialValue&&u!==""&&u!==null&&(o.value=u)}function cs(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ce(o,u){return o==null||o==="http://www.w3.org/1999/xhtml"?cs(u):o==="http://www.w3.org/2000/svg"&&u==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var Ne,Oe=(function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(u,p,x,b){MSApp.execUnsafeLocalFunction(function(){return o(u,p,x,b)})}:o})(function(o,u){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=u;else{for(Ne=Ne||document.createElement("div"),Ne.innerHTML="<svg>"+u.valueOf().toString()+"</svg>",u=Ne.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;u.firstChild;)o.appendChild(u.firstChild)}});function Je(o,u){if(u){var p=o.firstChild;if(p&&p===o.lastChild&&p.nodeType===3){p.nodeValue=u;return}}o.textContent=u}var Ei={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nu=["Webkit","ms","Moz","O"];Object.keys(Ei).forEach(function(o){nu.forEach(function(u){u=u+o.charAt(0).toUpperCase()+o.substring(1),Ei[u]=Ei[o]})});function uo(o,u,p){return u==null||typeof u=="boolean"||u===""?"":p||typeof u!="number"||u===0||Ei.hasOwnProperty(o)&&Ei[o]?(""+u).trim():u+"px"}function ho(o,u){o=o.style;for(var p in u)if(u.hasOwnProperty(p)){var x=p.indexOf("--")===0,b=uo(p,u[p],x);p==="float"&&(p="cssFloat"),x?o.setProperty(p,b):o[p]=b}}var iu=at({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function br(o,u){if(u){if(iu[o]&&(u.children!=null||u.dangerouslySetInnerHTML!=null))throw Error(e(137,o));if(u.dangerouslySetInnerHTML!=null){if(u.children!=null)throw Error(e(60));if(typeof u.dangerouslySetInnerHTML!="object"||!("__html"in u.dangerouslySetInnerHTML))throw Error(e(61))}if(u.style!=null&&typeof u.style!="object")throw Error(e(62))}}function Er(o,u){if(o.indexOf("-")===-1)return typeof u.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ar=null;function Sr(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Tr=null,Yn=null,Qn=null;function fo(o){if(o=$i(o)){if(typeof Tr!="function")throw Error(e(280));var u=o.stateNode;u&&(u=Ds(u),Tr(o.stateNode,o.type,u))}}function po(o){Yn?Qn?Qn.push(o):Qn=[o]:Yn=o}function mo(){if(Yn){var o=Yn,u=Qn;if(Qn=Yn=null,fo(o),u)for(o=0;o<u.length;o++)fo(u[o])}}function go(o,u){return o(u)}function yo(){}var Cr=!1;function vo(o,u,p){if(Cr)return o(u,p);Cr=!0;try{return go(o,u,p)}finally{Cr=!1,(Yn!==null||Qn!==null)&&(yo(),mo())}}function Ai(o,u){var p=o.stateNode;if(p===null)return null;var x=Ds(p);if(x===null)return null;p=x[u];t:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(o=o.type,x=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!x;break t;default:o=!1}if(o)return null;if(p&&typeof p!="function")throw Error(e(231,u,typeof p));return p}var _r=!1;if(f)try{var Si={};Object.defineProperty(Si,"passive",{get:function(){_r=!0}}),window.addEventListener("test",Si,Si),window.removeEventListener("test",Si,Si)}catch{_r=!1}function su(o,u,p,x,b,A,P,O,H){var rt=Array.prototype.slice.call(arguments,3);try{u.apply(p,rt)}catch(ht){this.onError(ht)}}var Ti=!1,us=null,hs=!1,Pr=null,ru={onError:function(o){Ti=!0,us=o}};function au(o,u,p,x,b,A,P,O,H){Ti=!1,us=null,su.apply(ru,arguments)}function ou(o,u,p,x,b,A,P,O,H){if(au.apply(this,arguments),Ti){if(Ti){var rt=us;Ti=!1,us=null}else throw Error(e(198));hs||(hs=!0,Pr=rt)}}function In(o){var u=o,p=o;if(o.alternate)for(;u.return;)u=u.return;else{o=u;do u=o,(u.flags&4098)!==0&&(p=u.return),o=u.return;while(o)}return u.tag===3?p:null}function xo(o){if(o.tag===13){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function wo(o){if(In(o)!==o)throw Error(e(188))}function lu(o){var u=o.alternate;if(!u){if(u=In(o),u===null)throw Error(e(188));return u!==o?null:o}for(var p=o,x=u;;){var b=p.return;if(b===null)break;var A=b.alternate;if(A===null){if(x=b.return,x!==null){p=x;continue}break}if(b.child===A.child){for(A=b.child;A;){if(A===p)return wo(b),o;if(A===x)return wo(b),u;A=A.sibling}throw Error(e(188))}if(p.return!==x.return)p=b,x=A;else{for(var P=!1,O=b.child;O;){if(O===p){P=!0,p=b,x=A;break}if(O===x){P=!0,x=b,p=A;break}O=O.sibling}if(!P){for(O=A.child;O;){if(O===p){P=!0,p=A,x=b;break}if(O===x){P=!0,x=A,p=b;break}O=O.sibling}if(!P)throw Error(e(189))}}if(p.alternate!==x)throw Error(e(190))}if(p.tag!==3)throw Error(e(188));return p.stateNode.current===p?o:u}function bo(o){return o=lu(o),o!==null?Eo(o):null}function Eo(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var u=Eo(o);if(u!==null)return u;o=o.sibling}return null}var Ao=t.unstable_scheduleCallback,So=t.unstable_cancelCallback,cu=t.unstable_shouldYield,uu=t.unstable_requestPaint,Qt=t.unstable_now,hu=t.unstable_getCurrentPriorityLevel,Rr=t.unstable_ImmediatePriority,To=t.unstable_UserBlockingPriority,ds=t.unstable_NormalPriority,du=t.unstable_LowPriority,Co=t.unstable_IdlePriority,fs=null,We=null;function fu(o){if(We&&typeof We.onCommitFiberRoot=="function")try{We.onCommitFiberRoot(fs,o,void 0,(o.current.flags&128)===128)}catch{}}var Fe=Math.clz32?Math.clz32:gu,pu=Math.log,mu=Math.LN2;function gu(o){return o>>>=0,o===0?32:31-(pu(o)/mu|0)|0}var ps=64,ms=4194304;function Ci(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function gs(o,u){var p=o.pendingLanes;if(p===0)return 0;var x=0,b=o.suspendedLanes,A=o.pingedLanes,P=p&268435455;if(P!==0){var O=P&~b;O!==0?x=Ci(O):(A&=P,A!==0&&(x=Ci(A)))}else P=p&~b,P!==0?x=Ci(P):A!==0&&(x=Ci(A));if(x===0)return 0;if(u!==0&&u!==x&&(u&b)===0&&(b=x&-x,A=u&-u,b>=A||b===16&&(A&4194240)!==0))return u;if((x&4)!==0&&(x|=p&16),u=o.entangledLanes,u!==0)for(o=o.entanglements,u&=x;0<u;)p=31-Fe(u),b=1<<p,x|=o[p],u&=~b;return x}function yu(o,u){switch(o){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vu(o,u){for(var p=o.suspendedLanes,x=o.pingedLanes,b=o.expirationTimes,A=o.pendingLanes;0<A;){var P=31-Fe(A),O=1<<P,H=b[P];H===-1?((O&p)===0||(O&x)!==0)&&(b[P]=yu(O,u)):H<=u&&(o.expiredLanes|=O),A&=~O}}function kr(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function _o(){var o=ps;return ps<<=1,(ps&4194240)===0&&(ps=64),o}function Mr(o){for(var u=[],p=0;31>p;p++)u.push(o);return u}function _i(o,u,p){o.pendingLanes|=u,u!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,u=31-Fe(u),o[u]=p}function xu(o,u){var p=o.pendingLanes&~u;o.pendingLanes=u,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=u,o.mutableReadLanes&=u,o.entangledLanes&=u,u=o.entanglements;var x=o.eventTimes;for(o=o.expirationTimes;0<p;){var b=31-Fe(p),A=1<<b;u[b]=0,x[b]=-1,o[b]=-1,p&=~A}}function Dr(o,u){var p=o.entangledLanes|=u;for(o=o.entanglements;p;){var x=31-Fe(p),b=1<<x;b&u|o[x]&u&&(o[x]|=u),p&=~b}}var jt=0;function Po(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var Ro,Lr,ko,Mo,Do,Ir=!1,ys=[],dn=null,fn=null,pn=null,Pi=new Map,Ri=new Map,mn=[],wu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lo(o,u){switch(o){case"focusin":case"focusout":dn=null;break;case"dragenter":case"dragleave":fn=null;break;case"mouseover":case"mouseout":pn=null;break;case"pointerover":case"pointerout":Pi.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ri.delete(u.pointerId)}}function ki(o,u,p,x,b,A){return o===null||o.nativeEvent!==A?(o={blockedOn:u,domEventName:p,eventSystemFlags:x,nativeEvent:A,targetContainers:[b]},u!==null&&(u=$i(u),u!==null&&Lr(u)),o):(o.eventSystemFlags|=x,u=o.targetContainers,b!==null&&u.indexOf(b)===-1&&u.push(b),o)}function bu(o,u,p,x,b){switch(u){case"focusin":return dn=ki(dn,o,u,p,x,b),!0;case"dragenter":return fn=ki(fn,o,u,p,x,b),!0;case"mouseover":return pn=ki(pn,o,u,p,x,b),!0;case"pointerover":var A=b.pointerId;return Pi.set(A,ki(Pi.get(A)||null,o,u,p,x,b)),!0;case"gotpointercapture":return A=b.pointerId,Ri.set(A,ki(Ri.get(A)||null,o,u,p,x,b)),!0}return!1}function Io(o){var u=Nn(o.target);if(u!==null){var p=In(u);if(p!==null){if(u=p.tag,u===13){if(u=xo(p),u!==null){o.blockedOn=u,Do(o.priority,function(){ko(p)});return}}else if(u===3&&p.stateNode.current.memoizedState.isDehydrated){o.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}o.blockedOn=null}function vs(o){if(o.blockedOn!==null)return!1;for(var u=o.targetContainers;0<u.length;){var p=Or(o.domEventName,o.eventSystemFlags,u[0],o.nativeEvent);if(p===null){p=o.nativeEvent;var x=new p.constructor(p.type,p);Ar=x,p.target.dispatchEvent(x),Ar=null}else return u=$i(p),u!==null&&Lr(u),o.blockedOn=p,!1;u.shift()}return!0}function No(o,u,p){vs(o)&&p.delete(u)}function Eu(){Ir=!1,dn!==null&&vs(dn)&&(dn=null),fn!==null&&vs(fn)&&(fn=null),pn!==null&&vs(pn)&&(pn=null),Pi.forEach(No),Ri.forEach(No)}function Mi(o,u){o.blockedOn===u&&(o.blockedOn=null,Ir||(Ir=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Eu)))}function Di(o){function u(b){return Mi(b,o)}if(0<ys.length){Mi(ys[0],o);for(var p=1;p<ys.length;p++){var x=ys[p];x.blockedOn===o&&(x.blockedOn=null)}}for(dn!==null&&Mi(dn,o),fn!==null&&Mi(fn,o),pn!==null&&Mi(pn,o),Pi.forEach(u),Ri.forEach(u),p=0;p<mn.length;p++)x=mn[p],x.blockedOn===o&&(x.blockedOn=null);for(;0<mn.length&&(p=mn[0],p.blockedOn===null);)Io(p),p.blockedOn===null&&mn.shift()}var Zn=j.ReactCurrentBatchConfig,xs=!0;function Au(o,u,p,x){var b=jt,A=Zn.transition;Zn.transition=null;try{jt=1,Nr(o,u,p,x)}finally{jt=b,Zn.transition=A}}function Su(o,u,p,x){var b=jt,A=Zn.transition;Zn.transition=null;try{jt=4,Nr(o,u,p,x)}finally{jt=b,Zn.transition=A}}function Nr(o,u,p,x){if(xs){var b=Or(o,u,p,x);if(b===null)Jr(o,u,x,ws,p),Lo(o,x);else if(bu(b,o,u,p,x))x.stopPropagation();else if(Lo(o,x),u&4&&-1<wu.indexOf(o)){for(;b!==null;){var A=$i(b);if(A!==null&&Ro(A),A=Or(o,u,p,x),A===null&&Jr(o,u,x,ws,p),A===b)break;b=A}b!==null&&x.stopPropagation()}else Jr(o,u,x,null,p)}}var ws=null;function Or(o,u,p,x){if(ws=null,o=Sr(x),o=Nn(o),o!==null)if(u=In(o),u===null)o=null;else if(p=u.tag,p===13){if(o=xo(u),o!==null)return o;o=null}else if(p===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;o=null}else u!==o&&(o=null);return ws=o,null}function Oo(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hu()){case Rr:return 1;case To:return 4;case ds:case du:return 16;case Co:return 536870912;default:return 16}default:return 16}}var gn=null,Fr=null,bs=null;function Fo(){if(bs)return bs;var o,u=Fr,p=u.length,x,b="value"in gn?gn.value:gn.textContent,A=b.length;for(o=0;o<p&&u[o]===b[o];o++);var P=p-o;for(x=1;x<=P&&u[p-x]===b[A-x];x++);return bs=b.slice(o,1<x?1-x:void 0)}function Es(o){var u=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&u===13&&(o=13)):o=u,o===10&&(o=13),32<=o||o===13?o:0}function As(){return!0}function jo(){return!1}function be(o){function u(p,x,b,A,P){this._reactName=p,this._targetInst=b,this.type=x,this.nativeEvent=A,this.target=P,this.currentTarget=null;for(var O in o)o.hasOwnProperty(O)&&(p=o[O],this[O]=p?p(A):A[O]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?As:jo,this.isPropagationStopped=jo,this}return at(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=As)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=As)},persist:function(){},isPersistent:As}),u}var Jn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jr=be(Jn),Li=at({},Jn,{view:0,detail:0}),Tu=be(Li),Vr,Br,Ii,Ss=at({},Li,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hr,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Ii&&(Ii&&o.type==="mousemove"?(Vr=o.screenX-Ii.screenX,Br=o.screenY-Ii.screenY):Br=Vr=0,Ii=o),Vr)},movementY:function(o){return"movementY"in o?o.movementY:Br}}),Vo=be(Ss),Cu=at({},Ss,{dataTransfer:0}),_u=be(Cu),Pu=at({},Li,{relatedTarget:0}),zr=be(Pu),Ru=at({},Jn,{animationName:0,elapsedTime:0,pseudoElement:0}),ku=be(Ru),Mu=at({},Jn,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Du=be(Mu),Lu=at({},Jn,{data:0}),Bo=be(Lu),Iu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ou={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fu(o){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(o):(o=Ou[o])?!!u[o]:!1}function Hr(){return Fu}var ju=at({},Li,{key:function(o){if(o.key){var u=Iu[o.key]||o.key;if(u!=="Unidentified")return u}return o.type==="keypress"?(o=Es(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Nu[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hr,charCode:function(o){return o.type==="keypress"?Es(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Es(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Vu=be(ju),Bu=at({},Ss,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zo=be(Bu),zu=at({},Li,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hr}),Hu=be(zu),Uu=at({},Jn,{propertyName:0,elapsedTime:0,pseudoElement:0}),$u=be(Uu),Gu=at({},Ss,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Wu=be(Gu),Ku=[9,13,27,32],Ur=f&&"CompositionEvent"in window,Ni=null;f&&"documentMode"in document&&(Ni=document.documentMode);var Xu=f&&"TextEvent"in window&&!Ni,Ho=f&&(!Ur||Ni&&8<Ni&&11>=Ni),Uo=" ",$o=!1;function Go(o,u){switch(o){case"keyup":return Ku.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wo(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var ti=!1;function qu(o,u){switch(o){case"compositionend":return Wo(u);case"keypress":return u.which!==32?null:($o=!0,Uo);case"textInput":return o=u.data,o===Uo&&$o?null:o;default:return null}}function Yu(o,u){if(ti)return o==="compositionend"||!Ur&&Go(o,u)?(o=Fo(),bs=Fr=gn=null,ti=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return Ho&&u.locale!=="ko"?null:u.data;default:return null}}var Qu={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ko(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u==="input"?!!Qu[o.type]:u==="textarea"}function Xo(o,u,p,x){po(x),u=Rs(u,"onChange"),0<u.length&&(p=new jr("onChange","change",null,p,x),o.push({event:p,listeners:u}))}var Oi=null,Fi=null;function Zu(o){fl(o,0)}function Ts(o){var u=ri(o);if(Te(u))return o}function Ju(o,u){if(o==="change")return u}var qo=!1;if(f){var $r;if(f){var Gr="oninput"in document;if(!Gr){var Yo=document.createElement("div");Yo.setAttribute("oninput","return;"),Gr=typeof Yo.oninput=="function"}$r=Gr}else $r=!1;qo=$r&&(!document.documentMode||9<document.documentMode)}function Qo(){Oi&&(Oi.detachEvent("onpropertychange",Zo),Fi=Oi=null)}function Zo(o){if(o.propertyName==="value"&&Ts(Fi)){var u=[];Xo(u,Fi,o,Sr(o)),vo(Zu,u)}}function th(o,u,p){o==="focusin"?(Qo(),Oi=u,Fi=p,Oi.attachEvent("onpropertychange",Zo)):o==="focusout"&&Qo()}function eh(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Ts(Fi)}function nh(o,u){if(o==="click")return Ts(u)}function ih(o,u){if(o==="input"||o==="change")return Ts(u)}function sh(o,u){return o===u&&(o!==0||1/o===1/u)||o!==o&&u!==u}var je=typeof Object.is=="function"?Object.is:sh;function ji(o,u){if(je(o,u))return!0;if(typeof o!="object"||o===null||typeof u!="object"||u===null)return!1;var p=Object.keys(o),x=Object.keys(u);if(p.length!==x.length)return!1;for(x=0;x<p.length;x++){var b=p[x];if(!m.call(u,b)||!je(o[b],u[b]))return!1}return!0}function Jo(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function tl(o,u){var p=Jo(o);o=0;for(var x;p;){if(p.nodeType===3){if(x=o+p.textContent.length,o<=u&&x>=u)return{node:p,offset:u-o};o=x}t:{for(;p;){if(p.nextSibling){p=p.nextSibling;break t}p=p.parentNode}p=void 0}p=Jo(p)}}function nl(o,u){return o&&u?o===u?!0:o&&o.nodeType===3?!1:u&&u.nodeType===3?nl(o,u.parentNode):"contains"in o?o.contains(u):o.compareDocumentPosition?!!(o.compareDocumentPosition(u)&16):!1:!1}function il(){for(var o=window,u=Nt();u instanceof o.HTMLIFrameElement;){try{var p=typeof u.contentWindow.location.href=="string"}catch{p=!1}if(p)o=u.contentWindow;else break;u=Nt(o.document)}return u}function Wr(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u&&(u==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||u==="textarea"||o.contentEditable==="true")}function rh(o){var u=il(),p=o.focusedElem,x=o.selectionRange;if(u!==p&&p&&p.ownerDocument&&nl(p.ownerDocument.documentElement,p)){if(x!==null&&Wr(p)){if(u=x.start,o=x.end,o===void 0&&(o=u),"selectionStart"in p)p.selectionStart=u,p.selectionEnd=Math.min(o,p.value.length);else if(o=(u=p.ownerDocument||document)&&u.defaultView||window,o.getSelection){o=o.getSelection();var b=p.textContent.length,A=Math.min(x.start,b);x=x.end===void 0?A:Math.min(x.end,b),!o.extend&&A>x&&(b=x,x=A,A=b),b=tl(p,A);var P=tl(p,x);b&&P&&(o.rangeCount!==1||o.anchorNode!==b.node||o.anchorOffset!==b.offset||o.focusNode!==P.node||o.focusOffset!==P.offset)&&(u=u.createRange(),u.setStart(b.node,b.offset),o.removeAllRanges(),A>x?(o.addRange(u),o.extend(P.node,P.offset)):(u.setEnd(P.node,P.offset),o.addRange(u)))}}for(u=[],o=p;o=o.parentNode;)o.nodeType===1&&u.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<u.length;p++)o=u[p],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var ah=f&&"documentMode"in document&&11>=document.documentMode,ei=null,Kr=null,Vi=null,Xr=!1;function sl(o,u,p){var x=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;Xr||ei==null||ei!==Nt(x)||(x=ei,"selectionStart"in x&&Wr(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),Vi&&ji(Vi,x)||(Vi=x,x=Rs(Kr,"onSelect"),0<x.length&&(u=new jr("onSelect","select",null,u,p),o.push({event:u,listeners:x}),u.target=ei)))}function Cs(o,u){var p={};return p[o.toLowerCase()]=u.toLowerCase(),p["Webkit"+o]="webkit"+u,p["Moz"+o]="moz"+u,p}var ni={animationend:Cs("Animation","AnimationEnd"),animationiteration:Cs("Animation","AnimationIteration"),animationstart:Cs("Animation","AnimationStart"),transitionend:Cs("Transition","TransitionEnd")},qr={},rl={};f&&(rl=document.createElement("div").style,"AnimationEvent"in window||(delete ni.animationend.animation,delete ni.animationiteration.animation,delete ni.animationstart.animation),"TransitionEvent"in window||delete ni.transitionend.transition);function _s(o){if(qr[o])return qr[o];if(!ni[o])return o;var u=ni[o],p;for(p in u)if(u.hasOwnProperty(p)&&p in rl)return qr[o]=u[p];return o}var al=_s("animationend"),ol=_s("animationiteration"),ll=_s("animationstart"),cl=_s("transitionend"),ul=new Map,hl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yn(o,u){ul.set(o,u),h(u,[o])}for(var Yr=0;Yr<hl.length;Yr++){var Qr=hl[Yr],oh=Qr.toLowerCase(),lh=Qr[0].toUpperCase()+Qr.slice(1);yn(oh,"on"+lh)}yn(al,"onAnimationEnd"),yn(ol,"onAnimationIteration"),yn(ll,"onAnimationStart"),yn("dblclick","onDoubleClick"),yn("focusin","onFocus"),yn("focusout","onBlur"),yn(cl,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),h("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),h("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),h("onBeforeInput",["compositionend","keypress","textInput","paste"]),h("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),h("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),h("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ch=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bi));function dl(o,u,p){var x=o.type||"unknown-event";o.currentTarget=p,ou(x,u,void 0,o),o.currentTarget=null}function fl(o,u){u=(u&4)!==0;for(var p=0;p<o.length;p++){var x=o[p],b=x.event;x=x.listeners;t:{var A=void 0;if(u)for(var P=x.length-1;0<=P;P--){var O=x[P],H=O.instance,rt=O.currentTarget;if(O=O.listener,H!==A&&b.isPropagationStopped())break t;dl(b,O,rt),A=H}else for(P=0;P<x.length;P++){if(O=x[P],H=O.instance,rt=O.currentTarget,O=O.listener,H!==A&&b.isPropagationStopped())break t;dl(b,O,rt),A=H}}}if(hs)throw o=Pr,hs=!1,Pr=null,o}function zt(o,u){var p=u[ra];p===void 0&&(p=u[ra]=new Set);var x=o+"__bubble";p.has(x)||(pl(u,o,2,!1),p.add(x))}function Zr(o,u,p){var x=0;u&&(x|=4),pl(p,o,x,u)}var Ps="_reactListening"+Math.random().toString(36).slice(2);function zi(o){if(!o[Ps]){o[Ps]=!0,a.forEach(function(p){p!=="selectionchange"&&(ch.has(p)||Zr(p,!1,o),Zr(p,!0,o))});var u=o.nodeType===9?o:o.ownerDocument;u===null||u[Ps]||(u[Ps]=!0,Zr("selectionchange",!1,u))}}function pl(o,u,p,x){switch(Oo(u)){case 1:var b=Au;break;case 4:b=Su;break;default:b=Nr}p=b.bind(null,u,p,o),b=void 0,!_r||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(b=!0),x?b!==void 0?o.addEventListener(u,p,{capture:!0,passive:b}):o.addEventListener(u,p,!0):b!==void 0?o.addEventListener(u,p,{passive:b}):o.addEventListener(u,p,!1)}function Jr(o,u,p,x,b){var A=x;if((u&1)===0&&(u&2)===0&&x!==null)t:for(;;){if(x===null)return;var P=x.tag;if(P===3||P===4){var O=x.stateNode.containerInfo;if(O===b||O.nodeType===8&&O.parentNode===b)break;if(P===4)for(P=x.return;P!==null;){var H=P.tag;if((H===3||H===4)&&(H=P.stateNode.containerInfo,H===b||H.nodeType===8&&H.parentNode===b))return;P=P.return}for(;O!==null;){if(P=Nn(O),P===null)return;if(H=P.tag,H===5||H===6){x=A=P;continue t}O=O.parentNode}}x=x.return}vo(function(){var rt=A,ht=Sr(p),dt=[];t:{var ut=ul.get(o);if(ut!==void 0){var yt=jr,wt=o;switch(o){case"keypress":if(Es(p)===0)break t;case"keydown":case"keyup":yt=Vu;break;case"focusin":wt="focus",yt=zr;break;case"focusout":wt="blur",yt=zr;break;case"beforeblur":case"afterblur":yt=zr;break;case"click":if(p.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":yt=Vo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":yt=_u;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":yt=Hu;break;case al:case ol:case ll:yt=ku;break;case cl:yt=$u;break;case"scroll":yt=Tu;break;case"wheel":yt=Wu;break;case"copy":case"cut":case"paste":yt=Du;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":yt=zo}var Et=(u&4)!==0,Zt=!Et&&o==="scroll",et=Et?ut!==null?ut+"Capture":null:ut;Et=[];for(var K=rt,it;K!==null;){it=K;var pt=it.stateNode;if(it.tag===5&&pt!==null&&(it=pt,et!==null&&(pt=Ai(K,et),pt!=null&&Et.push(Hi(K,pt,it)))),Zt)break;K=K.return}0<Et.length&&(ut=new yt(ut,wt,null,p,ht),dt.push({event:ut,listeners:Et}))}}if((u&7)===0){t:{if(ut=o==="mouseover"||o==="pointerover",yt=o==="mouseout"||o==="pointerout",ut&&p!==Ar&&(wt=p.relatedTarget||p.fromElement)&&(Nn(wt)||wt[en]))break t;if((yt||ut)&&(ut=ht.window===ht?ht:(ut=ht.ownerDocument)?ut.defaultView||ut.parentWindow:window,yt?(wt=p.relatedTarget||p.toElement,yt=rt,wt=wt?Nn(wt):null,wt!==null&&(Zt=In(wt),wt!==Zt||wt.tag!==5&&wt.tag!==6)&&(wt=null)):(yt=null,wt=rt),yt!==wt)){if(Et=Vo,pt="onMouseLeave",et="onMouseEnter",K="mouse",(o==="pointerout"||o==="pointerover")&&(Et=zo,pt="onPointerLeave",et="onPointerEnter",K="pointer"),Zt=yt==null?ut:ri(yt),it=wt==null?ut:ri(wt),ut=new Et(pt,K+"leave",yt,p,ht),ut.target=Zt,ut.relatedTarget=it,pt=null,Nn(ht)===rt&&(Et=new Et(et,K+"enter",wt,p,ht),Et.target=it,Et.relatedTarget=Zt,pt=Et),Zt=pt,yt&&wt)e:{for(Et=yt,et=wt,K=0,it=Et;it;it=ii(it))K++;for(it=0,pt=et;pt;pt=ii(pt))it++;for(;0<K-it;)Et=ii(Et),K--;for(;0<it-K;)et=ii(et),it--;for(;K--;){if(Et===et||et!==null&&Et===et.alternate)break e;Et=ii(Et),et=ii(et)}Et=null}else Et=null;yt!==null&&ml(dt,ut,yt,Et,!1),wt!==null&&Zt!==null&&ml(dt,Zt,wt,Et,!0)}}t:{if(ut=rt?ri(rt):window,yt=ut.nodeName&&ut.nodeName.toLowerCase(),yt==="select"||yt==="input"&&ut.type==="file")var St=Ju;else if(Ko(ut))if(qo)St=ih;else{St=eh;var Pt=th}else(yt=ut.nodeName)&&yt.toLowerCase()==="input"&&(ut.type==="checkbox"||ut.type==="radio")&&(St=nh);if(St&&(St=St(o,rt))){Xo(dt,St,p,ht);break t}Pt&&Pt(o,ut,rt),o==="focusout"&&(Pt=ut._wrapperState)&&Pt.controlled&&ut.type==="number"&&Dn(ut,"number",ut.value)}switch(Pt=rt?ri(rt):window,o){case"focusin":(Ko(Pt)||Pt.contentEditable==="true")&&(ei=Pt,Kr=rt,Vi=null);break;case"focusout":Vi=Kr=ei=null;break;case"mousedown":Xr=!0;break;case"contextmenu":case"mouseup":case"dragend":Xr=!1,sl(dt,p,ht);break;case"selectionchange":if(ah)break;case"keydown":case"keyup":sl(dt,p,ht)}var Rt;if(Ur)t:{switch(o){case"compositionstart":var kt="onCompositionStart";break t;case"compositionend":kt="onCompositionEnd";break t;case"compositionupdate":kt="onCompositionUpdate";break t}kt=void 0}else ti?Go(o,p)&&(kt="onCompositionEnd"):o==="keydown"&&p.keyCode===229&&(kt="onCompositionStart");kt&&(Ho&&p.locale!=="ko"&&(ti||kt!=="onCompositionStart"?kt==="onCompositionEnd"&&ti&&(Rt=Fo()):(gn=ht,Fr="value"in gn?gn.value:gn.textContent,ti=!0)),Pt=Rs(rt,kt),0<Pt.length&&(kt=new Bo(kt,o,null,p,ht),dt.push({event:kt,listeners:Pt}),Rt?kt.data=Rt:(Rt=Wo(p),Rt!==null&&(kt.data=Rt)))),(Rt=Xu?qu(o,p):Yu(o,p))&&(rt=Rs(rt,"onBeforeInput"),0<rt.length&&(ht=new Bo("onBeforeInput","beforeinput",null,p,ht),dt.push({event:ht,listeners:rt}),ht.data=Rt))}fl(dt,u)})}function Hi(o,u,p){return{instance:o,listener:u,currentTarget:p}}function Rs(o,u){for(var p=u+"Capture",x=[];o!==null;){var b=o,A=b.stateNode;b.tag===5&&A!==null&&(b=A,A=Ai(o,p),A!=null&&x.unshift(Hi(o,A,b)),A=Ai(o,u),A!=null&&x.push(Hi(o,A,b))),o=o.return}return x}function ii(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function ml(o,u,p,x,b){for(var A=u._reactName,P=[];p!==null&&p!==x;){var O=p,H=O.alternate,rt=O.stateNode;if(H!==null&&H===x)break;O.tag===5&&rt!==null&&(O=rt,b?(H=Ai(p,A),H!=null&&P.unshift(Hi(p,H,O))):b||(H=Ai(p,A),H!=null&&P.push(Hi(p,H,O)))),p=p.return}P.length!==0&&o.push({event:u,listeners:P})}var uh=/\r\n?/g,hh=/\u0000|\uFFFD/g;function gl(o){return(typeof o=="string"?o:""+o).replace(uh,`
`).replace(hh,"")}function ks(o,u,p){if(u=gl(u),gl(o)!==u&&p)throw Error(e(425))}function Ms(){}var ta=null,ea=null;function na(o,u){return o==="textarea"||o==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var ia=typeof setTimeout=="function"?setTimeout:void 0,dh=typeof clearTimeout=="function"?clearTimeout:void 0,yl=typeof Promise=="function"?Promise:void 0,fh=typeof queueMicrotask=="function"?queueMicrotask:typeof yl<"u"?function(o){return yl.resolve(null).then(o).catch(ph)}:ia;function ph(o){setTimeout(function(){throw o})}function sa(o,u){var p=u,x=0;do{var b=p.nextSibling;if(o.removeChild(p),b&&b.nodeType===8)if(p=b.data,p==="/$"){if(x===0){o.removeChild(b),Di(u);return}x--}else p!=="$"&&p!=="$?"&&p!=="$!"||x++;p=b}while(p);Di(u)}function vn(o){for(;o!=null;o=o.nextSibling){var u=o.nodeType;if(u===1||u===3)break;if(u===8){if(u=o.data,u==="$"||u==="$!"||u==="$?")break;if(u==="/$")return null}}return o}function vl(o){o=o.previousSibling;for(var u=0;o;){if(o.nodeType===8){var p=o.data;if(p==="$"||p==="$!"||p==="$?"){if(u===0)return o;u--}else p==="/$"&&u++}o=o.previousSibling}return null}var si=Math.random().toString(36).slice(2),Ke="__reactFiber$"+si,Ui="__reactProps$"+si,en="__reactContainer$"+si,ra="__reactEvents$"+si,mh="__reactListeners$"+si,gh="__reactHandles$"+si;function Nn(o){var u=o[Ke];if(u)return u;for(var p=o.parentNode;p;){if(u=p[en]||p[Ke]){if(p=u.alternate,u.child!==null||p!==null&&p.child!==null)for(o=vl(o);o!==null;){if(p=o[Ke])return p;o=vl(o)}return u}o=p,p=o.parentNode}return null}function $i(o){return o=o[Ke]||o[en],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function ri(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(e(33))}function Ds(o){return o[Ui]||null}var aa=[],ai=-1;function xn(o){return{current:o}}function Ht(o){0>ai||(o.current=aa[ai],aa[ai]=null,ai--)}function Bt(o,u){ai++,aa[ai]=o.current,o.current=u}var wn={},oe=xn(wn),me=xn(!1),On=wn;function oi(o,u){var p=o.type.contextTypes;if(!p)return wn;var x=o.stateNode;if(x&&x.__reactInternalMemoizedUnmaskedChildContext===u)return x.__reactInternalMemoizedMaskedChildContext;var b={},A;for(A in p)b[A]=u[A];return x&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=u,o.__reactInternalMemoizedMaskedChildContext=b),b}function ge(o){return o=o.childContextTypes,o!=null}function Ls(){Ht(me),Ht(oe)}function xl(o,u,p){if(oe.current!==wn)throw Error(e(168));Bt(oe,u),Bt(me,p)}function wl(o,u,p){var x=o.stateNode;if(u=u.childContextTypes,typeof x.getChildContext!="function")return p;x=x.getChildContext();for(var b in x)if(!(b in u))throw Error(e(108,bt(o)||"Unknown",b));return at({},p,x)}function Is(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||wn,On=oe.current,Bt(oe,o),Bt(me,me.current),!0}function bl(o,u,p){var x=o.stateNode;if(!x)throw Error(e(169));p?(o=wl(o,u,On),x.__reactInternalMemoizedMergedChildContext=o,Ht(me),Ht(oe),Bt(oe,o)):Ht(me),Bt(me,p)}var nn=null,Ns=!1,oa=!1;function El(o){nn===null?nn=[o]:nn.push(o)}function yh(o){Ns=!0,El(o)}function bn(){if(!oa&&nn!==null){oa=!0;var o=0,u=jt;try{var p=nn;for(jt=1;o<p.length;o++){var x=p[o];do x=x(!0);while(x!==null)}nn=null,Ns=!1}catch(b){throw nn!==null&&(nn=nn.slice(o+1)),Ao(Rr,bn),b}finally{jt=u,oa=!1}}return null}var li=[],ci=0,Os=null,Fs=0,_e=[],Pe=0,Fn=null,sn=1,rn="";function jn(o,u){li[ci++]=Fs,li[ci++]=Os,Os=o,Fs=u}function Al(o,u,p){_e[Pe++]=sn,_e[Pe++]=rn,_e[Pe++]=Fn,Fn=o;var x=sn;o=rn;var b=32-Fe(x)-1;x&=~(1<<b),p+=1;var A=32-Fe(u)+b;if(30<A){var P=b-b%5;A=(x&(1<<P)-1).toString(32),x>>=P,b-=P,sn=1<<32-Fe(u)+b|p<<b|x,rn=A+o}else sn=1<<A|p<<b|x,rn=o}function la(o){o.return!==null&&(jn(o,1),Al(o,1,0))}function ca(o){for(;o===Os;)Os=li[--ci],li[ci]=null,Fs=li[--ci],li[ci]=null;for(;o===Fn;)Fn=_e[--Pe],_e[Pe]=null,rn=_e[--Pe],_e[Pe]=null,sn=_e[--Pe],_e[Pe]=null}var Ee=null,Ae=null,Ut=!1,Ve=null;function Sl(o,u){var p=De(5,null,null,0);p.elementType="DELETED",p.stateNode=u,p.return=o,u=o.deletions,u===null?(o.deletions=[p],o.flags|=16):u.push(p)}function Tl(o,u){switch(o.tag){case 5:var p=o.type;return u=u.nodeType!==1||p.toLowerCase()!==u.nodeName.toLowerCase()?null:u,u!==null?(o.stateNode=u,Ee=o,Ae=vn(u.firstChild),!0):!1;case 6:return u=o.pendingProps===""||u.nodeType!==3?null:u,u!==null?(o.stateNode=u,Ee=o,Ae=null,!0):!1;case 13:return u=u.nodeType!==8?null:u,u!==null?(p=Fn!==null?{id:sn,overflow:rn}:null,o.memoizedState={dehydrated:u,treeContext:p,retryLane:1073741824},p=De(18,null,null,0),p.stateNode=u,p.return=o,o.child=p,Ee=o,Ae=null,!0):!1;default:return!1}}function ua(o){return(o.mode&1)!==0&&(o.flags&128)===0}function ha(o){if(Ut){var u=Ae;if(u){var p=u;if(!Tl(o,u)){if(ua(o))throw Error(e(418));u=vn(p.nextSibling);var x=Ee;u&&Tl(o,u)?Sl(x,p):(o.flags=o.flags&-4097|2,Ut=!1,Ee=o)}}else{if(ua(o))throw Error(e(418));o.flags=o.flags&-4097|2,Ut=!1,Ee=o}}}function Cl(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;Ee=o}function js(o){if(o!==Ee)return!1;if(!Ut)return Cl(o),Ut=!0,!1;var u;if((u=o.tag!==3)&&!(u=o.tag!==5)&&(u=o.type,u=u!=="head"&&u!=="body"&&!na(o.type,o.memoizedProps)),u&&(u=Ae)){if(ua(o))throw _l(),Error(e(418));for(;u;)Sl(o,u),u=vn(u.nextSibling)}if(Cl(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(e(317));t:{for(o=o.nextSibling,u=0;o;){if(o.nodeType===8){var p=o.data;if(p==="/$"){if(u===0){Ae=vn(o.nextSibling);break t}u--}else p!=="$"&&p!=="$!"&&p!=="$?"||u++}o=o.nextSibling}Ae=null}}else Ae=Ee?vn(o.stateNode.nextSibling):null;return!0}function _l(){for(var o=Ae;o;)o=vn(o.nextSibling)}function ui(){Ae=Ee=null,Ut=!1}function da(o){Ve===null?Ve=[o]:Ve.push(o)}var xh=j.ReactCurrentBatchConfig;function Gi(o,u,p){if(o=p.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(e(309));var x=p.stateNode}if(!x)throw Error(e(147,o));var b=x,A=""+o;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===A?u.ref:(u=function(P){var O=b.refs;P===null?delete O[A]:O[A]=P},u._stringRef=A,u)}if(typeof o!="string")throw Error(e(284));if(!p._owner)throw Error(e(290,o))}return o}function Vs(o,u){throw o=Object.prototype.toString.call(u),Error(e(31,o==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":o))}function Pl(o){var u=o._init;return u(o._payload)}function Rl(o){function u(et,K){if(o){var it=et.deletions;it===null?(et.deletions=[K],et.flags|=16):it.push(K)}}function p(et,K){if(!o)return null;for(;K!==null;)u(et,K),K=K.sibling;return null}function x(et,K){for(et=new Map;K!==null;)K.key!==null?et.set(K.key,K):et.set(K.index,K),K=K.sibling;return et}function b(et,K){return et=Rn(et,K),et.index=0,et.sibling=null,et}function A(et,K,it){return et.index=it,o?(it=et.alternate,it!==null?(it=it.index,it<K?(et.flags|=2,K):it):(et.flags|=2,K)):(et.flags|=1048576,K)}function P(et){return o&&et.alternate===null&&(et.flags|=2),et}function O(et,K,it,pt){return K===null||K.tag!==6?(K=io(it,et.mode,pt),K.return=et,K):(K=b(K,it),K.return=et,K)}function H(et,K,it,pt){var St=it.type;return St===G?ht(et,K,it.props.children,pt,it.key):K!==null&&(K.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===q&&Pl(St)===K.type)?(pt=b(K,it.props),pt.ref=Gi(et,K,it),pt.return=et,pt):(pt=ur(it.type,it.key,it.props,null,et.mode,pt),pt.ref=Gi(et,K,it),pt.return=et,pt)}function rt(et,K,it,pt){return K===null||K.tag!==4||K.stateNode.containerInfo!==it.containerInfo||K.stateNode.implementation!==it.implementation?(K=so(it,et.mode,pt),K.return=et,K):(K=b(K,it.children||[]),K.return=et,K)}function ht(et,K,it,pt,St){return K===null||K.tag!==7?(K=Wn(it,et.mode,pt,St),K.return=et,K):(K=b(K,it),K.return=et,K)}function dt(et,K,it){if(typeof K=="string"&&K!==""||typeof K=="number")return K=io(""+K,et.mode,it),K.return=et,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case F:return it=ur(K.type,K.key,K.props,null,et.mode,it),it.ref=Gi(et,null,K),it.return=et,it;case $:return K=so(K,et.mode,it),K.return=et,K;case q:var pt=K._init;return dt(et,pt(K._payload),it)}if(Ln(K)||lt(K))return K=Wn(K,et.mode,it,null),K.return=et,K;Vs(et,K)}return null}function ut(et,K,it,pt){var St=K!==null?K.key:null;if(typeof it=="string"&&it!==""||typeof it=="number")return St!==null?null:O(et,K,""+it,pt);if(typeof it=="object"&&it!==null){switch(it.$$typeof){case F:return it.key===St?H(et,K,it,pt):null;case $:return it.key===St?rt(et,K,it,pt):null;case q:return St=it._init,ut(et,K,St(it._payload),pt)}if(Ln(it)||lt(it))return St!==null?null:ht(et,K,it,pt,null);Vs(et,it)}return null}function yt(et,K,it,pt,St){if(typeof pt=="string"&&pt!==""||typeof pt=="number")return et=et.get(it)||null,O(K,et,""+pt,St);if(typeof pt=="object"&&pt!==null){switch(pt.$$typeof){case F:return et=et.get(pt.key===null?it:pt.key)||null,H(K,et,pt,St);case $:return et=et.get(pt.key===null?it:pt.key)||null,rt(K,et,pt,St);case q:var Pt=pt._init;return yt(et,K,it,Pt(pt._payload),St)}if(Ln(pt)||lt(pt))return et=et.get(it)||null,ht(K,et,pt,St,null);Vs(K,pt)}return null}function wt(et,K,it,pt){for(var St=null,Pt=null,Rt=K,kt=K=0,se=null;Rt!==null&&kt<it.length;kt++){Rt.index>kt?(se=Rt,Rt=null):se=Rt.sibling;var Ft=ut(et,Rt,it[kt],pt);if(Ft===null){Rt===null&&(Rt=se);break}o&&Rt&&Ft.alternate===null&&u(et,Rt),K=A(Ft,K,kt),Pt===null?St=Ft:Pt.sibling=Ft,Pt=Ft,Rt=se}if(kt===it.length)return p(et,Rt),Ut&&jn(et,kt),St;if(Rt===null){for(;kt<it.length;kt++)Rt=dt(et,it[kt],pt),Rt!==null&&(K=A(Rt,K,kt),Pt===null?St=Rt:Pt.sibling=Rt,Pt=Rt);return Ut&&jn(et,kt),St}for(Rt=x(et,Rt);kt<it.length;kt++)se=yt(Rt,et,kt,it[kt],pt),se!==null&&(o&&se.alternate!==null&&Rt.delete(se.key===null?kt:se.key),K=A(se,K,kt),Pt===null?St=se:Pt.sibling=se,Pt=se);return o&&Rt.forEach(function(kn){return u(et,kn)}),Ut&&jn(et,kt),St}function Et(et,K,it,pt){var St=lt(it);if(typeof St!="function")throw Error(e(150));if(it=St.call(it),it==null)throw Error(e(151));for(var Pt=St=null,Rt=K,kt=K=0,se=null,Ft=it.next();Rt!==null&&!Ft.done;kt++,Ft=it.next()){Rt.index>kt?(se=Rt,Rt=null):se=Rt.sibling;var kn=ut(et,Rt,Ft.value,pt);if(kn===null){Rt===null&&(Rt=se);break}o&&Rt&&kn.alternate===null&&u(et,Rt),K=A(kn,K,kt),Pt===null?St=kn:Pt.sibling=kn,Pt=kn,Rt=se}if(Ft.done)return p(et,Rt),Ut&&jn(et,kt),St;if(Rt===null){for(;!Ft.done;kt++,Ft=it.next())Ft=dt(et,Ft.value,pt),Ft!==null&&(K=A(Ft,K,kt),Pt===null?St=Ft:Pt.sibling=Ft,Pt=Ft);return Ut&&jn(et,kt),St}for(Rt=x(et,Rt);!Ft.done;kt++,Ft=it.next())Ft=yt(Rt,et,kt,Ft.value,pt),Ft!==null&&(o&&Ft.alternate!==null&&Rt.delete(Ft.key===null?kt:Ft.key),K=A(Ft,K,kt),Pt===null?St=Ft:Pt.sibling=Ft,Pt=Ft);return o&&Rt.forEach(function(Zh){return u(et,Zh)}),Ut&&jn(et,kt),St}function Zt(et,K,it,pt){if(typeof it=="object"&&it!==null&&it.type===G&&it.key===null&&(it=it.props.children),typeof it=="object"&&it!==null){switch(it.$$typeof){case F:t:{for(var St=it.key,Pt=K;Pt!==null;){if(Pt.key===St){if(St=it.type,St===G){if(Pt.tag===7){p(et,Pt.sibling),K=b(Pt,it.props.children),K.return=et,et=K;break t}}else if(Pt.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===q&&Pl(St)===Pt.type){p(et,Pt.sibling),K=b(Pt,it.props),K.ref=Gi(et,Pt,it),K.return=et,et=K;break t}p(et,Pt);break}else u(et,Pt);Pt=Pt.sibling}it.type===G?(K=Wn(it.props.children,et.mode,pt,it.key),K.return=et,et=K):(pt=ur(it.type,it.key,it.props,null,et.mode,pt),pt.ref=Gi(et,K,it),pt.return=et,et=pt)}return P(et);case $:t:{for(Pt=it.key;K!==null;){if(K.key===Pt)if(K.tag===4&&K.stateNode.containerInfo===it.containerInfo&&K.stateNode.implementation===it.implementation){p(et,K.sibling),K=b(K,it.children||[]),K.return=et,et=K;break t}else{p(et,K);break}else u(et,K);K=K.sibling}K=so(it,et.mode,pt),K.return=et,et=K}return P(et);case q:return Pt=it._init,Zt(et,K,Pt(it._payload),pt)}if(Ln(it))return wt(et,K,it,pt);if(lt(it))return Et(et,K,it,pt);Vs(et,it)}return typeof it=="string"&&it!==""||typeof it=="number"?(it=""+it,K!==null&&K.tag===6?(p(et,K.sibling),K=b(K,it),K.return=et,et=K):(p(et,K),K=io(it,et.mode,pt),K.return=et,et=K),P(et)):p(et,K)}return Zt}var hi=Rl(!0),kl=Rl(!1),Bs=xn(null),zs=null,di=null,fa=null;function pa(){fa=di=zs=null}function ma(o){var u=Bs.current;Ht(Bs),o._currentValue=u}function ga(o,u,p){for(;o!==null;){var x=o.alternate;if((o.childLanes&u)!==u?(o.childLanes|=u,x!==null&&(x.childLanes|=u)):x!==null&&(x.childLanes&u)!==u&&(x.childLanes|=u),o===p)break;o=o.return}}function fi(o,u){zs=o,fa=di=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&u)!==0&&(ye=!0),o.firstContext=null)}function Re(o){var u=o._currentValue;if(fa!==o)if(o={context:o,memoizedValue:u,next:null},di===null){if(zs===null)throw Error(e(308));di=o,zs.dependencies={lanes:0,firstContext:o}}else di=di.next=o;return u}var Vn=null;function ya(o){Vn===null?Vn=[o]:Vn.push(o)}function Ml(o,u,p,x){var b=u.interleaved;return b===null?(p.next=p,ya(u)):(p.next=b.next,b.next=p),u.interleaved=p,an(o,x)}function an(o,u){o.lanes|=u;var p=o.alternate;for(p!==null&&(p.lanes|=u),p=o,o=o.return;o!==null;)o.childLanes|=u,p=o.alternate,p!==null&&(p.childLanes|=u),p=o,o=o.return;return p.tag===3?p.stateNode:null}var En=!1;function va(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Dl(o,u){o=o.updateQueue,u.updateQueue===o&&(u.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function on(o,u){return{eventTime:o,lane:u,tag:0,payload:null,callback:null,next:null}}function An(o,u,p){var x=o.updateQueue;if(x===null)return null;if(x=x.shared,(Ot&2)!==0){var b=x.pending;return b===null?u.next=u:(u.next=b.next,b.next=u),x.pending=u,an(o,p)}return b=x.interleaved,b===null?(u.next=u,ya(x)):(u.next=b.next,b.next=u),x.interleaved=u,an(o,p)}function Hs(o,u,p){if(u=u.updateQueue,u!==null&&(u=u.shared,(p&4194240)!==0)){var x=u.lanes;x&=o.pendingLanes,p|=x,u.lanes=p,Dr(o,p)}}function Ll(o,u){var p=o.updateQueue,x=o.alternate;if(x!==null&&(x=x.updateQueue,p===x)){var b=null,A=null;if(p=p.firstBaseUpdate,p!==null){do{var P={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};A===null?b=A=P:A=A.next=P,p=p.next}while(p!==null);A===null?b=A=u:A=A.next=u}else b=A=u;p={baseState:x.baseState,firstBaseUpdate:b,lastBaseUpdate:A,shared:x.shared,effects:x.effects},o.updateQueue=p;return}o=p.lastBaseUpdate,o===null?p.firstBaseUpdate=u:o.next=u,p.lastBaseUpdate=u}function Us(o,u,p,x){var b=o.updateQueue;En=!1;var A=b.firstBaseUpdate,P=b.lastBaseUpdate,O=b.shared.pending;if(O!==null){b.shared.pending=null;var H=O,rt=H.next;H.next=null,P===null?A=rt:P.next=rt,P=H;var ht=o.alternate;ht!==null&&(ht=ht.updateQueue,O=ht.lastBaseUpdate,O!==P&&(O===null?ht.firstBaseUpdate=rt:O.next=rt,ht.lastBaseUpdate=H))}if(A!==null){var dt=b.baseState;P=0,ht=rt=H=null,O=A;do{var ut=O.lane,yt=O.eventTime;if((x&ut)===ut){ht!==null&&(ht=ht.next={eventTime:yt,lane:0,tag:O.tag,payload:O.payload,callback:O.callback,next:null});t:{var wt=o,Et=O;switch(ut=u,yt=p,Et.tag){case 1:if(wt=Et.payload,typeof wt=="function"){dt=wt.call(yt,dt,ut);break t}dt=wt;break t;case 3:wt.flags=wt.flags&-65537|128;case 0:if(wt=Et.payload,ut=typeof wt=="function"?wt.call(yt,dt,ut):wt,ut==null)break t;dt=at({},dt,ut);break t;case 2:En=!0}}O.callback!==null&&O.lane!==0&&(o.flags|=64,ut=b.effects,ut===null?b.effects=[O]:ut.push(O))}else yt={eventTime:yt,lane:ut,tag:O.tag,payload:O.payload,callback:O.callback,next:null},ht===null?(rt=ht=yt,H=dt):ht=ht.next=yt,P|=ut;if(O=O.next,O===null){if(O=b.shared.pending,O===null)break;ut=O,O=ut.next,ut.next=null,b.lastBaseUpdate=ut,b.shared.pending=null}}while(!0);if(ht===null&&(H=dt),b.baseState=H,b.firstBaseUpdate=rt,b.lastBaseUpdate=ht,u=b.shared.interleaved,u!==null){b=u;do P|=b.lane,b=b.next;while(b!==u)}else A===null&&(b.shared.lanes=0);Hn|=P,o.lanes=P,o.memoizedState=dt}}function Il(o,u,p){if(o=u.effects,u.effects=null,o!==null)for(u=0;u<o.length;u++){var x=o[u],b=x.callback;if(b!==null){if(x.callback=null,x=p,typeof b!="function")throw Error(e(191,b));b.call(x)}}}var Wi={},Xe=xn(Wi),Ki=xn(Wi),Xi=xn(Wi);function Bn(o){if(o===Wi)throw Error(e(174));return o}function xa(o,u){switch(Bt(Xi,u),Bt(Ki,o),Bt(Xe,Wi),o=u.nodeType,o){case 9:case 11:u=(u=u.documentElement)?u.namespaceURI:Ce(null,"");break;default:o=o===8?u.parentNode:u,u=o.namespaceURI||null,o=o.tagName,u=Ce(u,o)}Ht(Xe),Bt(Xe,u)}function pi(){Ht(Xe),Ht(Ki),Ht(Xi)}function Nl(o){Bn(Xi.current);var u=Bn(Xe.current),p=Ce(u,o.type);u!==p&&(Bt(Ki,o),Bt(Xe,p))}function wa(o){Ki.current===o&&(Ht(Xe),Ht(Ki))}var Wt=xn(0);function $s(o){for(var u=o;u!==null;){if(u.tag===13){var p=u.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||p.data==="$!"))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var ba=[];function Ea(){for(var o=0;o<ba.length;o++)ba[o]._workInProgressVersionPrimary=null;ba.length=0}var Gs=j.ReactCurrentDispatcher,Aa=j.ReactCurrentBatchConfig,zn=0,Kt=null,te=null,ne=null,Ws=!1,qi=!1,Yi=0,wh=0;function le(){throw Error(e(321))}function Sa(o,u){if(u===null)return!1;for(var p=0;p<u.length&&p<o.length;p++)if(!je(o[p],u[p]))return!1;return!0}function Ta(o,u,p,x,b,A){if(zn=A,Kt=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,Gs.current=o===null||o.memoizedState===null?Sh:Th,o=p(x,b),qi){A=0;do{if(qi=!1,Yi=0,25<=A)throw Error(e(301));A+=1,ne=te=null,u.updateQueue=null,Gs.current=Ch,o=p(x,b)}while(qi)}if(Gs.current=qs,u=te!==null&&te.next!==null,zn=0,ne=te=Kt=null,Ws=!1,u)throw Error(e(300));return o}function Ca(){var o=Yi!==0;return Yi=0,o}function qe(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ne===null?Kt.memoizedState=ne=o:ne=ne.next=o,ne}function ke(){if(te===null){var o=Kt.alternate;o=o!==null?o.memoizedState:null}else o=te.next;var u=ne===null?Kt.memoizedState:ne.next;if(u!==null)ne=u,te=o;else{if(o===null)throw Error(e(310));te=o,o={memoizedState:te.memoizedState,baseState:te.baseState,baseQueue:te.baseQueue,queue:te.queue,next:null},ne===null?Kt.memoizedState=ne=o:ne=ne.next=o}return ne}function Qi(o,u){return typeof u=="function"?u(o):u}function _a(o){var u=ke(),p=u.queue;if(p===null)throw Error(e(311));p.lastRenderedReducer=o;var x=te,b=x.baseQueue,A=p.pending;if(A!==null){if(b!==null){var P=b.next;b.next=A.next,A.next=P}x.baseQueue=b=A,p.pending=null}if(b!==null){A=b.next,x=x.baseState;var O=P=null,H=null,rt=A;do{var ht=rt.lane;if((zn&ht)===ht)H!==null&&(H=H.next={lane:0,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null}),x=rt.hasEagerState?rt.eagerState:o(x,rt.action);else{var dt={lane:ht,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null};H===null?(O=H=dt,P=x):H=H.next=dt,Kt.lanes|=ht,Hn|=ht}rt=rt.next}while(rt!==null&&rt!==A);H===null?P=x:H.next=O,je(x,u.memoizedState)||(ye=!0),u.memoizedState=x,u.baseState=P,u.baseQueue=H,p.lastRenderedState=x}if(o=p.interleaved,o!==null){b=o;do A=b.lane,Kt.lanes|=A,Hn|=A,b=b.next;while(b!==o)}else b===null&&(p.lanes=0);return[u.memoizedState,p.dispatch]}function Pa(o){var u=ke(),p=u.queue;if(p===null)throw Error(e(311));p.lastRenderedReducer=o;var x=p.dispatch,b=p.pending,A=u.memoizedState;if(b!==null){p.pending=null;var P=b=b.next;do A=o(A,P.action),P=P.next;while(P!==b);je(A,u.memoizedState)||(ye=!0),u.memoizedState=A,u.baseQueue===null&&(u.baseState=A),p.lastRenderedState=A}return[A,x]}function Ol(){}function Fl(o,u){var p=Kt,x=ke(),b=u(),A=!je(x.memoizedState,b);if(A&&(x.memoizedState=b,ye=!0),x=x.queue,Ra(Bl.bind(null,p,x,o),[o]),x.getSnapshot!==u||A||ne!==null&&ne.memoizedState.tag&1){if(p.flags|=2048,Zi(9,Vl.bind(null,p,x,b,u),void 0,null),ie===null)throw Error(e(349));(zn&30)!==0||jl(p,u,b)}return b}function jl(o,u,p){o.flags|=16384,o={getSnapshot:u,value:p},u=Kt.updateQueue,u===null?(u={lastEffect:null,stores:null},Kt.updateQueue=u,u.stores=[o]):(p=u.stores,p===null?u.stores=[o]:p.push(o))}function Vl(o,u,p,x){u.value=p,u.getSnapshot=x,zl(u)&&Hl(o)}function Bl(o,u,p){return p(function(){zl(u)&&Hl(o)})}function zl(o){var u=o.getSnapshot;o=o.value;try{var p=u();return!je(o,p)}catch{return!0}}function Hl(o){var u=an(o,1);u!==null&&Ue(u,o,1,-1)}function Ul(o){var u=qe();return typeof o=="function"&&(o=o()),u.memoizedState=u.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:o},u.queue=o,o=o.dispatch=Ah.bind(null,Kt,o),[u.memoizedState,o]}function Zi(o,u,p,x){return o={tag:o,create:u,destroy:p,deps:x,next:null},u=Kt.updateQueue,u===null?(u={lastEffect:null,stores:null},Kt.updateQueue=u,u.lastEffect=o.next=o):(p=u.lastEffect,p===null?u.lastEffect=o.next=o:(x=p.next,p.next=o,o.next=x,u.lastEffect=o)),o}function $l(){return ke().memoizedState}function Ks(o,u,p,x){var b=qe();Kt.flags|=o,b.memoizedState=Zi(1|u,p,void 0,x===void 0?null:x)}function Xs(o,u,p,x){var b=ke();x=x===void 0?null:x;var A=void 0;if(te!==null){var P=te.memoizedState;if(A=P.destroy,x!==null&&Sa(x,P.deps)){b.memoizedState=Zi(u,p,A,x);return}}Kt.flags|=o,b.memoizedState=Zi(1|u,p,A,x)}function Gl(o,u){return Ks(8390656,8,o,u)}function Ra(o,u){return Xs(2048,8,o,u)}function Wl(o,u){return Xs(4,2,o,u)}function Kl(o,u){return Xs(4,4,o,u)}function Xl(o,u){if(typeof u=="function")return o=o(),u(o),function(){u(null)};if(u!=null)return o=o(),u.current=o,function(){u.current=null}}function ql(o,u,p){return p=p!=null?p.concat([o]):null,Xs(4,4,Xl.bind(null,u,o),p)}function ka(){}function Yl(o,u){var p=ke();u=u===void 0?null:u;var x=p.memoizedState;return x!==null&&u!==null&&Sa(u,x[1])?x[0]:(p.memoizedState=[o,u],o)}function Ql(o,u){var p=ke();u=u===void 0?null:u;var x=p.memoizedState;return x!==null&&u!==null&&Sa(u,x[1])?x[0]:(o=o(),p.memoizedState=[o,u],o)}function Zl(o,u,p){return(zn&21)===0?(o.baseState&&(o.baseState=!1,ye=!0),o.memoizedState=p):(je(p,u)||(p=_o(),Kt.lanes|=p,Hn|=p,o.baseState=!0),u)}function bh(o,u){var p=jt;jt=p!==0&&4>p?p:4,o(!0);var x=Aa.transition;Aa.transition={};try{o(!1),u()}finally{jt=p,Aa.transition=x}}function Jl(){return ke().memoizedState}function Eh(o,u,p){var x=_n(o);if(p={lane:x,action:p,hasEagerState:!1,eagerState:null,next:null},tc(o))ec(u,p);else if(p=Ml(o,u,p,x),p!==null){var b=de();Ue(p,o,x,b),nc(p,u,x)}}function Ah(o,u,p){var x=_n(o),b={lane:x,action:p,hasEagerState:!1,eagerState:null,next:null};if(tc(o))ec(u,b);else{var A=o.alternate;if(o.lanes===0&&(A===null||A.lanes===0)&&(A=u.lastRenderedReducer,A!==null))try{var P=u.lastRenderedState,O=A(P,p);if(b.hasEagerState=!0,b.eagerState=O,je(O,P)){var H=u.interleaved;H===null?(b.next=b,ya(u)):(b.next=H.next,H.next=b),u.interleaved=b;return}}catch{}finally{}p=Ml(o,u,b,x),p!==null&&(b=de(),Ue(p,o,x,b),nc(p,u,x))}}function tc(o){var u=o.alternate;return o===Kt||u!==null&&u===Kt}function ec(o,u){qi=Ws=!0;var p=o.pending;p===null?u.next=u:(u.next=p.next,p.next=u),o.pending=u}function nc(o,u,p){if((p&4194240)!==0){var x=u.lanes;x&=o.pendingLanes,p|=x,u.lanes=p,Dr(o,p)}}var qs={readContext:Re,useCallback:le,useContext:le,useEffect:le,useImperativeHandle:le,useInsertionEffect:le,useLayoutEffect:le,useMemo:le,useReducer:le,useRef:le,useState:le,useDebugValue:le,useDeferredValue:le,useTransition:le,useMutableSource:le,useSyncExternalStore:le,useId:le,unstable_isNewReconciler:!1},Sh={readContext:Re,useCallback:function(o,u){return qe().memoizedState=[o,u===void 0?null:u],o},useContext:Re,useEffect:Gl,useImperativeHandle:function(o,u,p){return p=p!=null?p.concat([o]):null,Ks(4194308,4,Xl.bind(null,u,o),p)},useLayoutEffect:function(o,u){return Ks(4194308,4,o,u)},useInsertionEffect:function(o,u){return Ks(4,2,o,u)},useMemo:function(o,u){var p=qe();return u=u===void 0?null:u,o=o(),p.memoizedState=[o,u],o},useReducer:function(o,u,p){var x=qe();return u=p!==void 0?p(u):u,x.memoizedState=x.baseState=u,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:u},x.queue=o,o=o.dispatch=Eh.bind(null,Kt,o),[x.memoizedState,o]},useRef:function(o){var u=qe();return o={current:o},u.memoizedState=o},useState:Ul,useDebugValue:ka,useDeferredValue:function(o){return qe().memoizedState=o},useTransition:function(){var o=Ul(!1),u=o[0];return o=bh.bind(null,o[1]),qe().memoizedState=o,[u,o]},useMutableSource:function(){},useSyncExternalStore:function(o,u,p){var x=Kt,b=qe();if(Ut){if(p===void 0)throw Error(e(407));p=p()}else{if(p=u(),ie===null)throw Error(e(349));(zn&30)!==0||jl(x,u,p)}b.memoizedState=p;var A={value:p,getSnapshot:u};return b.queue=A,Gl(Bl.bind(null,x,A,o),[o]),x.flags|=2048,Zi(9,Vl.bind(null,x,A,p,u),void 0,null),p},useId:function(){var o=qe(),u=ie.identifierPrefix;if(Ut){var p=rn,x=sn;p=(x&~(1<<32-Fe(x)-1)).toString(32)+p,u=":"+u+"R"+p,p=Yi++,0<p&&(u+="H"+p.toString(32)),u+=":"}else p=wh++,u=":"+u+"r"+p.toString(32)+":";return o.memoizedState=u},unstable_isNewReconciler:!1},Th={readContext:Re,useCallback:Yl,useContext:Re,useEffect:Ra,useImperativeHandle:ql,useInsertionEffect:Wl,useLayoutEffect:Kl,useMemo:Ql,useReducer:_a,useRef:$l,useState:function(){return _a(Qi)},useDebugValue:ka,useDeferredValue:function(o){var u=ke();return Zl(u,te.memoizedState,o)},useTransition:function(){var o=_a(Qi)[0],u=ke().memoizedState;return[o,u]},useMutableSource:Ol,useSyncExternalStore:Fl,useId:Jl,unstable_isNewReconciler:!1},Ch={readContext:Re,useCallback:Yl,useContext:Re,useEffect:Ra,useImperativeHandle:ql,useInsertionEffect:Wl,useLayoutEffect:Kl,useMemo:Ql,useReducer:Pa,useRef:$l,useState:function(){return Pa(Qi)},useDebugValue:ka,useDeferredValue:function(o){var u=ke();return te===null?u.memoizedState=o:Zl(u,te.memoizedState,o)},useTransition:function(){var o=Pa(Qi)[0],u=ke().memoizedState;return[o,u]},useMutableSource:Ol,useSyncExternalStore:Fl,useId:Jl,unstable_isNewReconciler:!1};function Be(o,u){if(o&&o.defaultProps){u=at({},u),o=o.defaultProps;for(var p in o)u[p]===void 0&&(u[p]=o[p]);return u}return u}function Ma(o,u,p,x){u=o.memoizedState,p=p(x,u),p=p==null?u:at({},u,p),o.memoizedState=p,o.lanes===0&&(o.updateQueue.baseState=p)}var Ys={isMounted:function(o){return(o=o._reactInternals)?In(o)===o:!1},enqueueSetState:function(o,u,p){o=o._reactInternals;var x=de(),b=_n(o),A=on(x,b);A.payload=u,p!=null&&(A.callback=p),u=An(o,A,b),u!==null&&(Ue(u,o,b,x),Hs(u,o,b))},enqueueReplaceState:function(o,u,p){o=o._reactInternals;var x=de(),b=_n(o),A=on(x,b);A.tag=1,A.payload=u,p!=null&&(A.callback=p),u=An(o,A,b),u!==null&&(Ue(u,o,b,x),Hs(u,o,b))},enqueueForceUpdate:function(o,u){o=o._reactInternals;var p=de(),x=_n(o),b=on(p,x);b.tag=2,u!=null&&(b.callback=u),u=An(o,b,x),u!==null&&(Ue(u,o,x,p),Hs(u,o,x))}};function ic(o,u,p,x,b,A,P){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(x,A,P):u.prototype&&u.prototype.isPureReactComponent?!ji(p,x)||!ji(b,A):!0}function sc(o,u,p){var x=!1,b=wn,A=u.contextType;return typeof A=="object"&&A!==null?A=Re(A):(b=ge(u)?On:oe.current,x=u.contextTypes,A=(x=x!=null)?oi(o,b):wn),u=new u(p,A),o.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Ys,o.stateNode=u,u._reactInternals=o,x&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=b,o.__reactInternalMemoizedMaskedChildContext=A),u}function rc(o,u,p,x){o=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(p,x),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(p,x),u.state!==o&&Ys.enqueueReplaceState(u,u.state,null)}function Da(o,u,p,x){var b=o.stateNode;b.props=p,b.state=o.memoizedState,b.refs={},va(o);var A=u.contextType;typeof A=="object"&&A!==null?b.context=Re(A):(A=ge(u)?On:oe.current,b.context=oi(o,A)),b.state=o.memoizedState,A=u.getDerivedStateFromProps,typeof A=="function"&&(Ma(o,u,A,p),b.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(u=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),u!==b.state&&Ys.enqueueReplaceState(b,b.state,null),Us(o,p,b,x),b.state=o.memoizedState),typeof b.componentDidMount=="function"&&(o.flags|=4194308)}function mi(o,u){try{var p="",x=u;do p+=Ct(x),x=x.return;while(x);var b=p}catch(A){b=`
Error generating stack: `+A.message+`
`+A.stack}return{value:o,source:u,stack:b,digest:null}}function La(o,u,p){return{value:o,source:null,stack:p??null,digest:u??null}}function Ia(o,u){try{console.error(u.value)}catch(p){setTimeout(function(){throw p})}}var _h=typeof WeakMap=="function"?WeakMap:Map;function ac(o,u,p){p=on(-1,p),p.tag=3,p.payload={element:null};var x=u.value;return p.callback=function(){sr||(sr=!0,qa=x),Ia(o,u)},p}function oc(o,u,p){p=on(-1,p),p.tag=3;var x=o.type.getDerivedStateFromError;if(typeof x=="function"){var b=u.value;p.payload=function(){return x(b)},p.callback=function(){Ia(o,u)}}var A=o.stateNode;return A!==null&&typeof A.componentDidCatch=="function"&&(p.callback=function(){Ia(o,u),typeof x!="function"&&(Tn===null?Tn=new Set([this]):Tn.add(this));var P=u.stack;this.componentDidCatch(u.value,{componentStack:P!==null?P:""})}),p}function lc(o,u,p){var x=o.pingCache;if(x===null){x=o.pingCache=new _h;var b=new Set;x.set(u,b)}else b=x.get(u),b===void 0&&(b=new Set,x.set(u,b));b.has(p)||(b.add(p),o=zh.bind(null,o,u,p),u.then(o,o))}function cc(o){do{var u;if((u=o.tag===13)&&(u=o.memoizedState,u=u!==null?u.dehydrated!==null:!0),u)return o;o=o.return}while(o!==null);return null}function uc(o,u,p,x,b){return(o.mode&1)===0?(o===u?o.flags|=65536:(o.flags|=128,p.flags|=131072,p.flags&=-52805,p.tag===1&&(p.alternate===null?p.tag=17:(u=on(-1,1),u.tag=2,An(p,u,1))),p.lanes|=1),o):(o.flags|=65536,o.lanes=b,o)}var Ph=j.ReactCurrentOwner,ye=!1;function he(o,u,p,x){u.child=o===null?kl(u,null,p,x):hi(u,o.child,p,x)}function hc(o,u,p,x,b){p=p.render;var A=u.ref;return fi(u,b),x=Ta(o,u,p,x,A,b),p=Ca(),o!==null&&!ye?(u.updateQueue=o.updateQueue,u.flags&=-2053,o.lanes&=~b,ln(o,u,b)):(Ut&&p&&la(u),u.flags|=1,he(o,u,x,b),u.child)}function dc(o,u,p,x,b){if(o===null){var A=p.type;return typeof A=="function"&&!no(A)&&A.defaultProps===void 0&&p.compare===null&&p.defaultProps===void 0?(u.tag=15,u.type=A,fc(o,u,A,x,b)):(o=ur(p.type,null,x,u,u.mode,b),o.ref=u.ref,o.return=u,u.child=o)}if(A=o.child,(o.lanes&b)===0){var P=A.memoizedProps;if(p=p.compare,p=p!==null?p:ji,p(P,x)&&o.ref===u.ref)return ln(o,u,b)}return u.flags|=1,o=Rn(A,x),o.ref=u.ref,o.return=u,u.child=o}function fc(o,u,p,x,b){if(o!==null){var A=o.memoizedProps;if(ji(A,x)&&o.ref===u.ref)if(ye=!1,u.pendingProps=x=A,(o.lanes&b)!==0)(o.flags&131072)!==0&&(ye=!0);else return u.lanes=o.lanes,ln(o,u,b)}return Na(o,u,p,x,b)}function pc(o,u,p){var x=u.pendingProps,b=x.children,A=o!==null?o.memoizedState:null;if(x.mode==="hidden")if((u.mode&1)===0)u.memoizedState={baseLanes:0,cachePool:null,transitions:null},Bt(yi,Se),Se|=p;else{if((p&1073741824)===0)return o=A!==null?A.baseLanes|p:p,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:o,cachePool:null,transitions:null},u.updateQueue=null,Bt(yi,Se),Se|=o,null;u.memoizedState={baseLanes:0,cachePool:null,transitions:null},x=A!==null?A.baseLanes:p,Bt(yi,Se),Se|=x}else A!==null?(x=A.baseLanes|p,u.memoizedState=null):x=p,Bt(yi,Se),Se|=x;return he(o,u,b,p),u.child}function mc(o,u){var p=u.ref;(o===null&&p!==null||o!==null&&o.ref!==p)&&(u.flags|=512,u.flags|=2097152)}function Na(o,u,p,x,b){var A=ge(p)?On:oe.current;return A=oi(u,A),fi(u,b),p=Ta(o,u,p,x,A,b),x=Ca(),o!==null&&!ye?(u.updateQueue=o.updateQueue,u.flags&=-2053,o.lanes&=~b,ln(o,u,b)):(Ut&&x&&la(u),u.flags|=1,he(o,u,p,b),u.child)}function gc(o,u,p,x,b){if(ge(p)){var A=!0;Is(u)}else A=!1;if(fi(u,b),u.stateNode===null)Zs(o,u),sc(u,p,x),Da(u,p,x,b),x=!0;else if(o===null){var P=u.stateNode,O=u.memoizedProps;P.props=O;var H=P.context,rt=p.contextType;typeof rt=="object"&&rt!==null?rt=Re(rt):(rt=ge(p)?On:oe.current,rt=oi(u,rt));var ht=p.getDerivedStateFromProps,dt=typeof ht=="function"||typeof P.getSnapshotBeforeUpdate=="function";dt||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(O!==x||H!==rt)&&rc(u,P,x,rt),En=!1;var ut=u.memoizedState;P.state=ut,Us(u,x,P,b),H=u.memoizedState,O!==x||ut!==H||me.current||En?(typeof ht=="function"&&(Ma(u,p,ht,x),H=u.memoizedState),(O=En||ic(u,p,O,x,ut,H,rt))?(dt||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(u.flags|=4194308)):(typeof P.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=x,u.memoizedState=H),P.props=x,P.state=H,P.context=rt,x=O):(typeof P.componentDidMount=="function"&&(u.flags|=4194308),x=!1)}else{P=u.stateNode,Dl(o,u),O=u.memoizedProps,rt=u.type===u.elementType?O:Be(u.type,O),P.props=rt,dt=u.pendingProps,ut=P.context,H=p.contextType,typeof H=="object"&&H!==null?H=Re(H):(H=ge(p)?On:oe.current,H=oi(u,H));var yt=p.getDerivedStateFromProps;(ht=typeof yt=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(O!==dt||ut!==H)&&rc(u,P,x,H),En=!1,ut=u.memoizedState,P.state=ut,Us(u,x,P,b);var wt=u.memoizedState;O!==dt||ut!==wt||me.current||En?(typeof yt=="function"&&(Ma(u,p,yt,x),wt=u.memoizedState),(rt=En||ic(u,p,rt,x,ut,wt,H)||!1)?(ht||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(x,wt,H),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(x,wt,H)),typeof P.componentDidUpdate=="function"&&(u.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof P.componentDidUpdate!="function"||O===o.memoizedProps&&ut===o.memoizedState||(u.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||O===o.memoizedProps&&ut===o.memoizedState||(u.flags|=1024),u.memoizedProps=x,u.memoizedState=wt),P.props=x,P.state=wt,P.context=H,x=rt):(typeof P.componentDidUpdate!="function"||O===o.memoizedProps&&ut===o.memoizedState||(u.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||O===o.memoizedProps&&ut===o.memoizedState||(u.flags|=1024),x=!1)}return Oa(o,u,p,x,A,b)}function Oa(o,u,p,x,b,A){mc(o,u);var P=(u.flags&128)!==0;if(!x&&!P)return b&&bl(u,p,!1),ln(o,u,A);x=u.stateNode,Ph.current=u;var O=P&&typeof p.getDerivedStateFromError!="function"?null:x.render();return u.flags|=1,o!==null&&P?(u.child=hi(u,o.child,null,A),u.child=hi(u,null,O,A)):he(o,u,O,A),u.memoizedState=x.state,b&&bl(u,p,!0),u.child}function yc(o){var u=o.stateNode;u.pendingContext?xl(o,u.pendingContext,u.pendingContext!==u.context):u.context&&xl(o,u.context,!1),xa(o,u.containerInfo)}function vc(o,u,p,x,b){return ui(),da(b),u.flags|=256,he(o,u,p,x),u.child}var Fa={dehydrated:null,treeContext:null,retryLane:0};function ja(o){return{baseLanes:o,cachePool:null,transitions:null}}function xc(o,u,p){var x=u.pendingProps,b=Wt.current,A=!1,P=(u.flags&128)!==0,O;if((O=P)||(O=o!==null&&o.memoizedState===null?!1:(b&2)!==0),O?(A=!0,u.flags&=-129):(o===null||o.memoizedState!==null)&&(b|=1),Bt(Wt,b&1),o===null)return ha(u),o=u.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((u.mode&1)===0?u.lanes=1:o.data==="$!"?u.lanes=8:u.lanes=1073741824,null):(P=x.children,o=x.fallback,A?(x=u.mode,A=u.child,P={mode:"hidden",children:P},(x&1)===0&&A!==null?(A.childLanes=0,A.pendingProps=P):A=hr(P,x,0,null),o=Wn(o,x,p,null),A.return=u,o.return=u,A.sibling=o,u.child=A,u.child.memoizedState=ja(p),u.memoizedState=Fa,o):Va(u,P));if(b=o.memoizedState,b!==null&&(O=b.dehydrated,O!==null))return Rh(o,u,P,x,O,b,p);if(A){A=x.fallback,P=u.mode,b=o.child,O=b.sibling;var H={mode:"hidden",children:x.children};return(P&1)===0&&u.child!==b?(x=u.child,x.childLanes=0,x.pendingProps=H,u.deletions=null):(x=Rn(b,H),x.subtreeFlags=b.subtreeFlags&14680064),O!==null?A=Rn(O,A):(A=Wn(A,P,p,null),A.flags|=2),A.return=u,x.return=u,x.sibling=A,u.child=x,x=A,A=u.child,P=o.child.memoizedState,P=P===null?ja(p):{baseLanes:P.baseLanes|p,cachePool:null,transitions:P.transitions},A.memoizedState=P,A.childLanes=o.childLanes&~p,u.memoizedState=Fa,x}return A=o.child,o=A.sibling,x=Rn(A,{mode:"visible",children:x.children}),(u.mode&1)===0&&(x.lanes=p),x.return=u,x.sibling=null,o!==null&&(p=u.deletions,p===null?(u.deletions=[o],u.flags|=16):p.push(o)),u.child=x,u.memoizedState=null,x}function Va(o,u){return u=hr({mode:"visible",children:u},o.mode,0,null),u.return=o,o.child=u}function Qs(o,u,p,x){return x!==null&&da(x),hi(u,o.child,null,p),o=Va(u,u.pendingProps.children),o.flags|=2,u.memoizedState=null,o}function Rh(o,u,p,x,b,A,P){if(p)return u.flags&256?(u.flags&=-257,x=La(Error(e(422))),Qs(o,u,P,x)):u.memoizedState!==null?(u.child=o.child,u.flags|=128,null):(A=x.fallback,b=u.mode,x=hr({mode:"visible",children:x.children},b,0,null),A=Wn(A,b,P,null),A.flags|=2,x.return=u,A.return=u,x.sibling=A,u.child=x,(u.mode&1)!==0&&hi(u,o.child,null,P),u.child.memoizedState=ja(P),u.memoizedState=Fa,A);if((u.mode&1)===0)return Qs(o,u,P,null);if(b.data==="$!"){if(x=b.nextSibling&&b.nextSibling.dataset,x)var O=x.dgst;return x=O,A=Error(e(419)),x=La(A,x,void 0),Qs(o,u,P,x)}if(O=(P&o.childLanes)!==0,ye||O){if(x=ie,x!==null){switch(P&-P){case 4:b=2;break;case 16:b=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:b=32;break;case 536870912:b=268435456;break;default:b=0}b=(b&(x.suspendedLanes|P))!==0?0:b,b!==0&&b!==A.retryLane&&(A.retryLane=b,an(o,b),Ue(x,o,b,-1))}return eo(),x=La(Error(e(421))),Qs(o,u,P,x)}return b.data==="$?"?(u.flags|=128,u.child=o.child,u=Hh.bind(null,o),b._reactRetry=u,null):(o=A.treeContext,Ae=vn(b.nextSibling),Ee=u,Ut=!0,Ve=null,o!==null&&(_e[Pe++]=sn,_e[Pe++]=rn,_e[Pe++]=Fn,sn=o.id,rn=o.overflow,Fn=u),u=Va(u,x.children),u.flags|=4096,u)}function wc(o,u,p){o.lanes|=u;var x=o.alternate;x!==null&&(x.lanes|=u),ga(o.return,u,p)}function Ba(o,u,p,x,b){var A=o.memoizedState;A===null?o.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:x,tail:p,tailMode:b}:(A.isBackwards=u,A.rendering=null,A.renderingStartTime=0,A.last=x,A.tail=p,A.tailMode=b)}function bc(o,u,p){var x=u.pendingProps,b=x.revealOrder,A=x.tail;if(he(o,u,x.children,p),x=Wt.current,(x&2)!==0)x=x&1|2,u.flags|=128;else{if(o!==null&&(o.flags&128)!==0)t:for(o=u.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&wc(o,p,u);else if(o.tag===19)wc(o,p,u);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===u)break t;for(;o.sibling===null;){if(o.return===null||o.return===u)break t;o=o.return}o.sibling.return=o.return,o=o.sibling}x&=1}if(Bt(Wt,x),(u.mode&1)===0)u.memoizedState=null;else switch(b){case"forwards":for(p=u.child,b=null;p!==null;)o=p.alternate,o!==null&&$s(o)===null&&(b=p),p=p.sibling;p=b,p===null?(b=u.child,u.child=null):(b=p.sibling,p.sibling=null),Ba(u,!1,b,p,A);break;case"backwards":for(p=null,b=u.child,u.child=null;b!==null;){if(o=b.alternate,o!==null&&$s(o)===null){u.child=b;break}o=b.sibling,b.sibling=p,p=b,b=o}Ba(u,!0,p,null,A);break;case"together":Ba(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function Zs(o,u){(u.mode&1)===0&&o!==null&&(o.alternate=null,u.alternate=null,u.flags|=2)}function ln(o,u,p){if(o!==null&&(u.dependencies=o.dependencies),Hn|=u.lanes,(p&u.childLanes)===0)return null;if(o!==null&&u.child!==o.child)throw Error(e(153));if(u.child!==null){for(o=u.child,p=Rn(o,o.pendingProps),u.child=p,p.return=u;o.sibling!==null;)o=o.sibling,p=p.sibling=Rn(o,o.pendingProps),p.return=u;p.sibling=null}return u.child}function kh(o,u,p){switch(u.tag){case 3:yc(u),ui();break;case 5:Nl(u);break;case 1:ge(u.type)&&Is(u);break;case 4:xa(u,u.stateNode.containerInfo);break;case 10:var x=u.type._context,b=u.memoizedProps.value;Bt(Bs,x._currentValue),x._currentValue=b;break;case 13:if(x=u.memoizedState,x!==null)return x.dehydrated!==null?(Bt(Wt,Wt.current&1),u.flags|=128,null):(p&u.child.childLanes)!==0?xc(o,u,p):(Bt(Wt,Wt.current&1),o=ln(o,u,p),o!==null?o.sibling:null);Bt(Wt,Wt.current&1);break;case 19:if(x=(p&u.childLanes)!==0,(o.flags&128)!==0){if(x)return bc(o,u,p);u.flags|=128}if(b=u.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),Bt(Wt,Wt.current),x)break;return null;case 22:case 23:return u.lanes=0,pc(o,u,p)}return ln(o,u,p)}var Ec,za,Ac,Sc;Ec=function(o,u){for(var p=u.child;p!==null;){if(p.tag===5||p.tag===6)o.appendChild(p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===u)break;for(;p.sibling===null;){if(p.return===null||p.return===u)return;p=p.return}p.sibling.return=p.return,p=p.sibling}},za=function(){},Ac=function(o,u,p,x){var b=o.memoizedProps;if(b!==x){o=u.stateNode,Bn(Xe.current);var A=null;switch(p){case"input":b=Vt(o,b),x=Vt(o,x),A=[];break;case"select":b=at({},b,{value:void 0}),x=at({},x,{value:void 0}),A=[];break;case"textarea":b=bi(o,b),x=bi(o,x),A=[];break;default:typeof b.onClick!="function"&&typeof x.onClick=="function"&&(o.onclick=Ms)}br(p,x);var P;p=null;for(rt in b)if(!x.hasOwnProperty(rt)&&b.hasOwnProperty(rt)&&b[rt]!=null)if(rt==="style"){var O=b[rt];for(P in O)O.hasOwnProperty(P)&&(p||(p={}),p[P]="")}else rt!=="dangerouslySetInnerHTML"&&rt!=="children"&&rt!=="suppressContentEditableWarning"&&rt!=="suppressHydrationWarning"&&rt!=="autoFocus"&&(c.hasOwnProperty(rt)?A||(A=[]):(A=A||[]).push(rt,null));for(rt in x){var H=x[rt];if(O=b?.[rt],x.hasOwnProperty(rt)&&H!==O&&(H!=null||O!=null))if(rt==="style")if(O){for(P in O)!O.hasOwnProperty(P)||H&&H.hasOwnProperty(P)||(p||(p={}),p[P]="");for(P in H)H.hasOwnProperty(P)&&O[P]!==H[P]&&(p||(p={}),p[P]=H[P])}else p||(A||(A=[]),A.push(rt,p)),p=H;else rt==="dangerouslySetInnerHTML"?(H=H?H.__html:void 0,O=O?O.__html:void 0,H!=null&&O!==H&&(A=A||[]).push(rt,H)):rt==="children"?typeof H!="string"&&typeof H!="number"||(A=A||[]).push(rt,""+H):rt!=="suppressContentEditableWarning"&&rt!=="suppressHydrationWarning"&&(c.hasOwnProperty(rt)?(H!=null&&rt==="onScroll"&&zt("scroll",o),A||O===H||(A=[])):(A=A||[]).push(rt,H))}p&&(A=A||[]).push("style",p);var rt=A;(u.updateQueue=rt)&&(u.flags|=4)}},Sc=function(o,u,p,x){p!==x&&(u.flags|=4)};function Ji(o,u){if(!Ut)switch(o.tailMode){case"hidden":u=o.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?o.tail=null:p.sibling=null;break;case"collapsed":p=o.tail;for(var x=null;p!==null;)p.alternate!==null&&(x=p),p=p.sibling;x===null?u||o.tail===null?o.tail=null:o.tail.sibling=null:x.sibling=null}}function ce(o){var u=o.alternate!==null&&o.alternate.child===o.child,p=0,x=0;if(u)for(var b=o.child;b!==null;)p|=b.lanes|b.childLanes,x|=b.subtreeFlags&14680064,x|=b.flags&14680064,b.return=o,b=b.sibling;else for(b=o.child;b!==null;)p|=b.lanes|b.childLanes,x|=b.subtreeFlags,x|=b.flags,b.return=o,b=b.sibling;return o.subtreeFlags|=x,o.childLanes=p,u}function Mh(o,u,p){var x=u.pendingProps;switch(ca(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ce(u),null;case 1:return ge(u.type)&&Ls(),ce(u),null;case 3:return x=u.stateNode,pi(),Ht(me),Ht(oe),Ea(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(o===null||o.child===null)&&(js(u)?u.flags|=4:o===null||o.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,Ve!==null&&(Za(Ve),Ve=null))),za(o,u),ce(u),null;case 5:wa(u);var b=Bn(Xi.current);if(p=u.type,o!==null&&u.stateNode!=null)Ac(o,u,p,x,b),o.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!x){if(u.stateNode===null)throw Error(e(166));return ce(u),null}if(o=Bn(Xe.current),js(u)){x=u.stateNode,p=u.type;var A=u.memoizedProps;switch(x[Ke]=u,x[Ui]=A,o=(u.mode&1)!==0,p){case"dialog":zt("cancel",x),zt("close",x);break;case"iframe":case"object":case"embed":zt("load",x);break;case"video":case"audio":for(b=0;b<Bi.length;b++)zt(Bi[b],x);break;case"source":zt("error",x);break;case"img":case"image":case"link":zt("error",x),zt("load",x);break;case"details":zt("toggle",x);break;case"input":Xt(x,A),zt("invalid",x);break;case"select":x._wrapperState={wasMultiple:!!A.multiple},zt("invalid",x);break;case"textarea":as(x,A),zt("invalid",x)}br(p,A),b=null;for(var P in A)if(A.hasOwnProperty(P)){var O=A[P];P==="children"?typeof O=="string"?x.textContent!==O&&(A.suppressHydrationWarning!==!0&&ks(x.textContent,O,o),b=["children",O]):typeof O=="number"&&x.textContent!==""+O&&(A.suppressHydrationWarning!==!0&&ks(x.textContent,O,o),b=["children",""+O]):c.hasOwnProperty(P)&&O!=null&&P==="onScroll"&&zt("scroll",x)}switch(p){case"input":pe(x),hn(x,A,!0);break;case"textarea":pe(x),ls(x);break;case"select":case"option":break;default:typeof A.onClick=="function"&&(x.onclick=Ms)}x=b,u.updateQueue=x,x!==null&&(u.flags|=4)}else{P=b.nodeType===9?b:b.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=cs(p)),o==="http://www.w3.org/1999/xhtml"?p==="script"?(o=P.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof x.is=="string"?o=P.createElement(p,{is:x.is}):(o=P.createElement(p),p==="select"&&(P=o,x.multiple?P.multiple=!0:x.size&&(P.size=x.size))):o=P.createElementNS(o,p),o[Ke]=u,o[Ui]=x,Ec(o,u,!1,!1),u.stateNode=o;t:{switch(P=Er(p,x),p){case"dialog":zt("cancel",o),zt("close",o),b=x;break;case"iframe":case"object":case"embed":zt("load",o),b=x;break;case"video":case"audio":for(b=0;b<Bi.length;b++)zt(Bi[b],o);b=x;break;case"source":zt("error",o),b=x;break;case"img":case"image":case"link":zt("error",o),zt("load",o),b=x;break;case"details":zt("toggle",o),b=x;break;case"input":Xt(o,x),b=Vt(o,x),zt("invalid",o);break;case"option":b=x;break;case"select":o._wrapperState={wasMultiple:!!x.multiple},b=at({},x,{value:void 0}),zt("invalid",o);break;case"textarea":as(o,x),b=bi(o,x),zt("invalid",o);break;default:b=x}br(p,b),O=b;for(A in O)if(O.hasOwnProperty(A)){var H=O[A];A==="style"?ho(o,H):A==="dangerouslySetInnerHTML"?(H=H?H.__html:void 0,H!=null&&Oe(o,H)):A==="children"?typeof H=="string"?(p!=="textarea"||H!=="")&&Je(o,H):typeof H=="number"&&Je(o,""+H):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(c.hasOwnProperty(A)?H!=null&&A==="onScroll"&&zt("scroll",o):H!=null&&L(o,A,H,P))}switch(p){case"input":pe(o),hn(o,x,!1);break;case"textarea":pe(o),ls(o);break;case"option":x.value!=null&&o.setAttribute("value",""+Dt(x.value));break;case"select":o.multiple=!!x.multiple,A=x.value,A!=null?Ie(o,!!x.multiple,A,!1):x.defaultValue!=null&&Ie(o,!!x.multiple,x.defaultValue,!0);break;default:typeof b.onClick=="function"&&(o.onclick=Ms)}switch(p){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break t;case"img":x=!0;break t;default:x=!1}}x&&(u.flags|=4)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return ce(u),null;case 6:if(o&&u.stateNode!=null)Sc(o,u,o.memoizedProps,x);else{if(typeof x!="string"&&u.stateNode===null)throw Error(e(166));if(p=Bn(Xi.current),Bn(Xe.current),js(u)){if(x=u.stateNode,p=u.memoizedProps,x[Ke]=u,(A=x.nodeValue!==p)&&(o=Ee,o!==null))switch(o.tag){case 3:ks(x.nodeValue,p,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&ks(x.nodeValue,p,(o.mode&1)!==0)}A&&(u.flags|=4)}else x=(p.nodeType===9?p:p.ownerDocument).createTextNode(x),x[Ke]=u,u.stateNode=x}return ce(u),null;case 13:if(Ht(Wt),x=u.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(Ut&&Ae!==null&&(u.mode&1)!==0&&(u.flags&128)===0)_l(),ui(),u.flags|=98560,A=!1;else if(A=js(u),x!==null&&x.dehydrated!==null){if(o===null){if(!A)throw Error(e(318));if(A=u.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(e(317));A[Ke]=u}else ui(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;ce(u),A=!1}else Ve!==null&&(Za(Ve),Ve=null),A=!0;if(!A)return u.flags&65536?u:null}return(u.flags&128)!==0?(u.lanes=p,u):(x=x!==null,x!==(o!==null&&o.memoizedState!==null)&&x&&(u.child.flags|=8192,(u.mode&1)!==0&&(o===null||(Wt.current&1)!==0?ee===0&&(ee=3):eo())),u.updateQueue!==null&&(u.flags|=4),ce(u),null);case 4:return pi(),za(o,u),o===null&&zi(u.stateNode.containerInfo),ce(u),null;case 10:return ma(u.type._context),ce(u),null;case 17:return ge(u.type)&&Ls(),ce(u),null;case 19:if(Ht(Wt),A=u.memoizedState,A===null)return ce(u),null;if(x=(u.flags&128)!==0,P=A.rendering,P===null)if(x)Ji(A,!1);else{if(ee!==0||o!==null&&(o.flags&128)!==0)for(o=u.child;o!==null;){if(P=$s(o),P!==null){for(u.flags|=128,Ji(A,!1),x=P.updateQueue,x!==null&&(u.updateQueue=x,u.flags|=4),u.subtreeFlags=0,x=p,p=u.child;p!==null;)A=p,o=x,A.flags&=14680066,P=A.alternate,P===null?(A.childLanes=0,A.lanes=o,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=P.childLanes,A.lanes=P.lanes,A.child=P.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=P.memoizedProps,A.memoizedState=P.memoizedState,A.updateQueue=P.updateQueue,A.type=P.type,o=P.dependencies,A.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),p=p.sibling;return Bt(Wt,Wt.current&1|2),u.child}o=o.sibling}A.tail!==null&&Qt()>vi&&(u.flags|=128,x=!0,Ji(A,!1),u.lanes=4194304)}else{if(!x)if(o=$s(P),o!==null){if(u.flags|=128,x=!0,p=o.updateQueue,p!==null&&(u.updateQueue=p,u.flags|=4),Ji(A,!0),A.tail===null&&A.tailMode==="hidden"&&!P.alternate&&!Ut)return ce(u),null}else 2*Qt()-A.renderingStartTime>vi&&p!==1073741824&&(u.flags|=128,x=!0,Ji(A,!1),u.lanes=4194304);A.isBackwards?(P.sibling=u.child,u.child=P):(p=A.last,p!==null?p.sibling=P:u.child=P,A.last=P)}return A.tail!==null?(u=A.tail,A.rendering=u,A.tail=u.sibling,A.renderingStartTime=Qt(),u.sibling=null,p=Wt.current,Bt(Wt,x?p&1|2:p&1),u):(ce(u),null);case 22:case 23:return to(),x=u.memoizedState!==null,o!==null&&o.memoizedState!==null!==x&&(u.flags|=8192),x&&(u.mode&1)!==0?(Se&1073741824)!==0&&(ce(u),u.subtreeFlags&6&&(u.flags|=8192)):ce(u),null;case 24:return null;case 25:return null}throw Error(e(156,u.tag))}function Dh(o,u){switch(ca(u),u.tag){case 1:return ge(u.type)&&Ls(),o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 3:return pi(),Ht(me),Ht(oe),Ea(),o=u.flags,(o&65536)!==0&&(o&128)===0?(u.flags=o&-65537|128,u):null;case 5:return wa(u),null;case 13:if(Ht(Wt),o=u.memoizedState,o!==null&&o.dehydrated!==null){if(u.alternate===null)throw Error(e(340));ui()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 19:return Ht(Wt),null;case 4:return pi(),null;case 10:return ma(u.type._context),null;case 22:case 23:return to(),null;case 24:return null;default:return null}}var Js=!1,ue=!1,Lh=typeof WeakSet=="function"?WeakSet:Set,xt=null;function gi(o,u){var p=o.ref;if(p!==null)if(typeof p=="function")try{p(null)}catch(x){qt(o,u,x)}else p.current=null}function Ha(o,u,p){try{p()}catch(x){qt(o,u,x)}}var Tc=!1;function Ih(o,u){if(ta=xs,o=il(),Wr(o)){if("selectionStart"in o)var p={start:o.selectionStart,end:o.selectionEnd};else t:{p=(p=o.ownerDocument)&&p.defaultView||window;var x=p.getSelection&&p.getSelection();if(x&&x.rangeCount!==0){p=x.anchorNode;var b=x.anchorOffset,A=x.focusNode;x=x.focusOffset;try{p.nodeType,A.nodeType}catch{p=null;break t}var P=0,O=-1,H=-1,rt=0,ht=0,dt=o,ut=null;e:for(;;){for(var yt;dt!==p||b!==0&&dt.nodeType!==3||(O=P+b),dt!==A||x!==0&&dt.nodeType!==3||(H=P+x),dt.nodeType===3&&(P+=dt.nodeValue.length),(yt=dt.firstChild)!==null;)ut=dt,dt=yt;for(;;){if(dt===o)break e;if(ut===p&&++rt===b&&(O=P),ut===A&&++ht===x&&(H=P),(yt=dt.nextSibling)!==null)break;dt=ut,ut=dt.parentNode}dt=yt}p=O===-1||H===-1?null:{start:O,end:H}}else p=null}p=p||{start:0,end:0}}else p=null;for(ea={focusedElem:o,selectionRange:p},xs=!1,xt=u;xt!==null;)if(u=xt,o=u.child,(u.subtreeFlags&1028)!==0&&o!==null)o.return=u,xt=o;else for(;xt!==null;){u=xt;try{var wt=u.alternate;if((u.flags&1024)!==0)switch(u.tag){case 0:case 11:case 15:break;case 1:if(wt!==null){var Et=wt.memoizedProps,Zt=wt.memoizedState,et=u.stateNode,K=et.getSnapshotBeforeUpdate(u.elementType===u.type?Et:Be(u.type,Et),Zt);et.__reactInternalSnapshotBeforeUpdate=K}break;case 3:var it=u.stateNode.containerInfo;it.nodeType===1?it.textContent="":it.nodeType===9&&it.documentElement&&it.removeChild(it.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(e(163))}}catch(pt){qt(u,u.return,pt)}if(o=u.sibling,o!==null){o.return=u.return,xt=o;break}xt=u.return}return wt=Tc,Tc=!1,wt}function ts(o,u,p){var x=u.updateQueue;if(x=x!==null?x.lastEffect:null,x!==null){var b=x=x.next;do{if((b.tag&o)===o){var A=b.destroy;b.destroy=void 0,A!==void 0&&Ha(u,p,A)}b=b.next}while(b!==x)}}function er(o,u){if(u=u.updateQueue,u=u!==null?u.lastEffect:null,u!==null){var p=u=u.next;do{if((p.tag&o)===o){var x=p.create;p.destroy=x()}p=p.next}while(p!==u)}}function Ua(o){var u=o.ref;if(u!==null){var p=o.stateNode;switch(o.tag){case 5:o=p;break;default:o=p}typeof u=="function"?u(o):u.current=o}}function Cc(o){var u=o.alternate;u!==null&&(o.alternate=null,Cc(u)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(u=o.stateNode,u!==null&&(delete u[Ke],delete u[Ui],delete u[ra],delete u[mh],delete u[gh])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function _c(o){return o.tag===5||o.tag===3||o.tag===4}function Pc(o){t:for(;;){for(;o.sibling===null;){if(o.return===null||_c(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue t;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function $a(o,u,p){var x=o.tag;if(x===5||x===6)o=o.stateNode,u?p.nodeType===8?p.parentNode.insertBefore(o,u):p.insertBefore(o,u):(p.nodeType===8?(u=p.parentNode,u.insertBefore(o,p)):(u=p,u.appendChild(o)),p=p._reactRootContainer,p!=null||u.onclick!==null||(u.onclick=Ms));else if(x!==4&&(o=o.child,o!==null))for($a(o,u,p),o=o.sibling;o!==null;)$a(o,u,p),o=o.sibling}function Ga(o,u,p){var x=o.tag;if(x===5||x===6)o=o.stateNode,u?p.insertBefore(o,u):p.appendChild(o);else if(x!==4&&(o=o.child,o!==null))for(Ga(o,u,p),o=o.sibling;o!==null;)Ga(o,u,p),o=o.sibling}var re=null,ze=!1;function Sn(o,u,p){for(p=p.child;p!==null;)Rc(o,u,p),p=p.sibling}function Rc(o,u,p){if(We&&typeof We.onCommitFiberUnmount=="function")try{We.onCommitFiberUnmount(fs,p)}catch{}switch(p.tag){case 5:ue||gi(p,u);case 6:var x=re,b=ze;re=null,Sn(o,u,p),re=x,ze=b,re!==null&&(ze?(o=re,p=p.stateNode,o.nodeType===8?o.parentNode.removeChild(p):o.removeChild(p)):re.removeChild(p.stateNode));break;case 18:re!==null&&(ze?(o=re,p=p.stateNode,o.nodeType===8?sa(o.parentNode,p):o.nodeType===1&&sa(o,p),Di(o)):sa(re,p.stateNode));break;case 4:x=re,b=ze,re=p.stateNode.containerInfo,ze=!0,Sn(o,u,p),re=x,ze=b;break;case 0:case 11:case 14:case 15:if(!ue&&(x=p.updateQueue,x!==null&&(x=x.lastEffect,x!==null))){b=x=x.next;do{var A=b,P=A.destroy;A=A.tag,P!==void 0&&((A&2)!==0||(A&4)!==0)&&Ha(p,u,P),b=b.next}while(b!==x)}Sn(o,u,p);break;case 1:if(!ue&&(gi(p,u),x=p.stateNode,typeof x.componentWillUnmount=="function"))try{x.props=p.memoizedProps,x.state=p.memoizedState,x.componentWillUnmount()}catch(O){qt(p,u,O)}Sn(o,u,p);break;case 21:Sn(o,u,p);break;case 22:p.mode&1?(ue=(x=ue)||p.memoizedState!==null,Sn(o,u,p),ue=x):Sn(o,u,p);break;default:Sn(o,u,p)}}function kc(o){var u=o.updateQueue;if(u!==null){o.updateQueue=null;var p=o.stateNode;p===null&&(p=o.stateNode=new Lh),u.forEach(function(x){var b=Uh.bind(null,o,x);p.has(x)||(p.add(x),x.then(b,b))})}}function He(o,u){var p=u.deletions;if(p!==null)for(var x=0;x<p.length;x++){var b=p[x];try{var A=o,P=u,O=P;t:for(;O!==null;){switch(O.tag){case 5:re=O.stateNode,ze=!1;break t;case 3:re=O.stateNode.containerInfo,ze=!0;break t;case 4:re=O.stateNode.containerInfo,ze=!0;break t}O=O.return}if(re===null)throw Error(e(160));Rc(A,P,b),re=null,ze=!1;var H=b.alternate;H!==null&&(H.return=null),b.return=null}catch(rt){qt(b,u,rt)}}if(u.subtreeFlags&12854)for(u=u.child;u!==null;)Mc(u,o),u=u.sibling}function Mc(o,u){var p=o.alternate,x=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(He(u,o),Ye(o),x&4){try{ts(3,o,o.return),er(3,o)}catch(Et){qt(o,o.return,Et)}try{ts(5,o,o.return)}catch(Et){qt(o,o.return,Et)}}break;case 1:He(u,o),Ye(o),x&512&&p!==null&&gi(p,p.return);break;case 5:if(He(u,o),Ye(o),x&512&&p!==null&&gi(p,p.return),o.flags&32){var b=o.stateNode;try{Je(b,"")}catch(Et){qt(o,o.return,Et)}}if(x&4&&(b=o.stateNode,b!=null)){var A=o.memoizedProps,P=p!==null?p.memoizedProps:A,O=o.type,H=o.updateQueue;if(o.updateQueue=null,H!==null)try{O==="input"&&A.type==="radio"&&A.name!=null&&Yt(b,A),Er(O,P);var rt=Er(O,A);for(P=0;P<H.length;P+=2){var ht=H[P],dt=H[P+1];ht==="style"?ho(b,dt):ht==="dangerouslySetInnerHTML"?Oe(b,dt):ht==="children"?Je(b,dt):L(b,ht,dt,rt)}switch(O){case"input":Ge(b,A);break;case"textarea":os(b,A);break;case"select":var ut=b._wrapperState.wasMultiple;b._wrapperState.wasMultiple=!!A.multiple;var yt=A.value;yt!=null?Ie(b,!!A.multiple,yt,!1):ut!==!!A.multiple&&(A.defaultValue!=null?Ie(b,!!A.multiple,A.defaultValue,!0):Ie(b,!!A.multiple,A.multiple?[]:"",!1))}b[Ui]=A}catch(Et){qt(o,o.return,Et)}}break;case 6:if(He(u,o),Ye(o),x&4){if(o.stateNode===null)throw Error(e(162));b=o.stateNode,A=o.memoizedProps;try{b.nodeValue=A}catch(Et){qt(o,o.return,Et)}}break;case 3:if(He(u,o),Ye(o),x&4&&p!==null&&p.memoizedState.isDehydrated)try{Di(u.containerInfo)}catch(Et){qt(o,o.return,Et)}break;case 4:He(u,o),Ye(o);break;case 13:He(u,o),Ye(o),b=o.child,b.flags&8192&&(A=b.memoizedState!==null,b.stateNode.isHidden=A,!A||b.alternate!==null&&b.alternate.memoizedState!==null||(Xa=Qt())),x&4&&kc(o);break;case 22:if(ht=p!==null&&p.memoizedState!==null,o.mode&1?(ue=(rt=ue)||ht,He(u,o),ue=rt):He(u,o),Ye(o),x&8192){if(rt=o.memoizedState!==null,(o.stateNode.isHidden=rt)&&!ht&&(o.mode&1)!==0)for(xt=o,ht=o.child;ht!==null;){for(dt=xt=ht;xt!==null;){switch(ut=xt,yt=ut.child,ut.tag){case 0:case 11:case 14:case 15:ts(4,ut,ut.return);break;case 1:gi(ut,ut.return);var wt=ut.stateNode;if(typeof wt.componentWillUnmount=="function"){x=ut,p=ut.return;try{u=x,wt.props=u.memoizedProps,wt.state=u.memoizedState,wt.componentWillUnmount()}catch(Et){qt(x,p,Et)}}break;case 5:gi(ut,ut.return);break;case 22:if(ut.memoizedState!==null){Ic(dt);continue}}yt!==null?(yt.return=ut,xt=yt):Ic(dt)}ht=ht.sibling}t:for(ht=null,dt=o;;){if(dt.tag===5){if(ht===null){ht=dt;try{b=dt.stateNode,rt?(A=b.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none"):(O=dt.stateNode,H=dt.memoizedProps.style,P=H!=null&&H.hasOwnProperty("display")?H.display:null,O.style.display=uo("display",P))}catch(Et){qt(o,o.return,Et)}}}else if(dt.tag===6){if(ht===null)try{dt.stateNode.nodeValue=rt?"":dt.memoizedProps}catch(Et){qt(o,o.return,Et)}}else if((dt.tag!==22&&dt.tag!==23||dt.memoizedState===null||dt===o)&&dt.child!==null){dt.child.return=dt,dt=dt.child;continue}if(dt===o)break t;for(;dt.sibling===null;){if(dt.return===null||dt.return===o)break t;ht===dt&&(ht=null),dt=dt.return}ht===dt&&(ht=null),dt.sibling.return=dt.return,dt=dt.sibling}}break;case 19:He(u,o),Ye(o),x&4&&kc(o);break;case 21:break;default:He(u,o),Ye(o)}}function Ye(o){var u=o.flags;if(u&2){try{t:{for(var p=o.return;p!==null;){if(_c(p)){var x=p;break t}p=p.return}throw Error(e(160))}switch(x.tag){case 5:var b=x.stateNode;x.flags&32&&(Je(b,""),x.flags&=-33);var A=Pc(o);Ga(o,A,b);break;case 3:case 4:var P=x.stateNode.containerInfo,O=Pc(o);$a(o,O,P);break;default:throw Error(e(161))}}catch(H){qt(o,o.return,H)}o.flags&=-3}u&4096&&(o.flags&=-4097)}function Nh(o,u,p){xt=o,Dc(o)}function Dc(o,u,p){for(var x=(o.mode&1)!==0;xt!==null;){var b=xt,A=b.child;if(b.tag===22&&x){var P=b.memoizedState!==null||Js;if(!P){var O=b.alternate,H=O!==null&&O.memoizedState!==null||ue;O=Js;var rt=ue;if(Js=P,(ue=H)&&!rt)for(xt=b;xt!==null;)P=xt,H=P.child,P.tag===22&&P.memoizedState!==null?Nc(b):H!==null?(H.return=P,xt=H):Nc(b);for(;A!==null;)xt=A,Dc(A),A=A.sibling;xt=b,Js=O,ue=rt}Lc(o)}else(b.subtreeFlags&8772)!==0&&A!==null?(A.return=b,xt=A):Lc(o)}}function Lc(o){for(;xt!==null;){var u=xt;if((u.flags&8772)!==0){var p=u.alternate;try{if((u.flags&8772)!==0)switch(u.tag){case 0:case 11:case 15:ue||er(5,u);break;case 1:var x=u.stateNode;if(u.flags&4&&!ue)if(p===null)x.componentDidMount();else{var b=u.elementType===u.type?p.memoizedProps:Be(u.type,p.memoizedProps);x.componentDidUpdate(b,p.memoizedState,x.__reactInternalSnapshotBeforeUpdate)}var A=u.updateQueue;A!==null&&Il(u,A,x);break;case 3:var P=u.updateQueue;if(P!==null){if(p=null,u.child!==null)switch(u.child.tag){case 5:p=u.child.stateNode;break;case 1:p=u.child.stateNode}Il(u,P,p)}break;case 5:var O=u.stateNode;if(p===null&&u.flags&4){p=O;var H=u.memoizedProps;switch(u.type){case"button":case"input":case"select":case"textarea":H.autoFocus&&p.focus();break;case"img":H.src&&(p.src=H.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(u.memoizedState===null){var rt=u.alternate;if(rt!==null){var ht=rt.memoizedState;if(ht!==null){var dt=ht.dehydrated;dt!==null&&Di(dt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(e(163))}ue||u.flags&512&&Ua(u)}catch(ut){qt(u,u.return,ut)}}if(u===o){xt=null;break}if(p=u.sibling,p!==null){p.return=u.return,xt=p;break}xt=u.return}}function Ic(o){for(;xt!==null;){var u=xt;if(u===o){xt=null;break}var p=u.sibling;if(p!==null){p.return=u.return,xt=p;break}xt=u.return}}function Nc(o){for(;xt!==null;){var u=xt;try{switch(u.tag){case 0:case 11:case 15:var p=u.return;try{er(4,u)}catch(H){qt(u,p,H)}break;case 1:var x=u.stateNode;if(typeof x.componentDidMount=="function"){var b=u.return;try{x.componentDidMount()}catch(H){qt(u,b,H)}}var A=u.return;try{Ua(u)}catch(H){qt(u,A,H)}break;case 5:var P=u.return;try{Ua(u)}catch(H){qt(u,P,H)}}}catch(H){qt(u,u.return,H)}if(u===o){xt=null;break}var O=u.sibling;if(O!==null){O.return=u.return,xt=O;break}xt=u.return}}var Oh=Math.ceil,nr=j.ReactCurrentDispatcher,Wa=j.ReactCurrentOwner,Me=j.ReactCurrentBatchConfig,Ot=0,ie=null,Jt=null,ae=0,Se=0,yi=xn(0),ee=0,es=null,Hn=0,ir=0,Ka=0,ns=null,ve=null,Xa=0,vi=1/0,cn=null,sr=!1,qa=null,Tn=null,rr=!1,Cn=null,ar=0,is=0,Ya=null,or=-1,lr=0;function de(){return(Ot&6)!==0?Qt():or!==-1?or:or=Qt()}function _n(o){return(o.mode&1)===0?1:(Ot&2)!==0&&ae!==0?ae&-ae:xh.transition!==null?(lr===0&&(lr=_o()),lr):(o=jt,o!==0||(o=window.event,o=o===void 0?16:Oo(o.type)),o)}function Ue(o,u,p,x){if(50<is)throw is=0,Ya=null,Error(e(185));_i(o,p,x),((Ot&2)===0||o!==ie)&&(o===ie&&((Ot&2)===0&&(ir|=p),ee===4&&Pn(o,ae)),xe(o,x),p===1&&Ot===0&&(u.mode&1)===0&&(vi=Qt()+500,Ns&&bn()))}function xe(o,u){var p=o.callbackNode;vu(o,u);var x=gs(o,o===ie?ae:0);if(x===0)p!==null&&So(p),o.callbackNode=null,o.callbackPriority=0;else if(u=x&-x,o.callbackPriority!==u){if(p!=null&&So(p),u===1)o.tag===0?yh(Fc.bind(null,o)):El(Fc.bind(null,o)),fh(function(){(Ot&6)===0&&bn()}),p=null;else{switch(Po(x)){case 1:p=Rr;break;case 4:p=To;break;case 16:p=ds;break;case 536870912:p=Co;break;default:p=ds}p=Gc(p,Oc.bind(null,o))}o.callbackPriority=u,o.callbackNode=p}}function Oc(o,u){if(or=-1,lr=0,(Ot&6)!==0)throw Error(e(327));var p=o.callbackNode;if(xi()&&o.callbackNode!==p)return null;var x=gs(o,o===ie?ae:0);if(x===0)return null;if((x&30)!==0||(x&o.expiredLanes)!==0||u)u=cr(o,x);else{u=x;var b=Ot;Ot|=2;var A=Vc();(ie!==o||ae!==u)&&(cn=null,vi=Qt()+500,$n(o,u));do try{Vh();break}catch(O){jc(o,O)}while(!0);pa(),nr.current=A,Ot=b,Jt!==null?u=0:(ie=null,ae=0,u=ee)}if(u!==0){if(u===2&&(b=kr(o),b!==0&&(x=b,u=Qa(o,b))),u===1)throw p=es,$n(o,0),Pn(o,x),xe(o,Qt()),p;if(u===6)Pn(o,x);else{if(b=o.current.alternate,(x&30)===0&&!Fh(b)&&(u=cr(o,x),u===2&&(A=kr(o),A!==0&&(x=A,u=Qa(o,A))),u===1))throw p=es,$n(o,0),Pn(o,x),xe(o,Qt()),p;switch(o.finishedWork=b,o.finishedLanes=x,u){case 0:case 1:throw Error(e(345));case 2:Gn(o,ve,cn);break;case 3:if(Pn(o,x),(x&130023424)===x&&(u=Xa+500-Qt(),10<u)){if(gs(o,0)!==0)break;if(b=o.suspendedLanes,(b&x)!==x){de(),o.pingedLanes|=o.suspendedLanes&b;break}o.timeoutHandle=ia(Gn.bind(null,o,ve,cn),u);break}Gn(o,ve,cn);break;case 4:if(Pn(o,x),(x&4194240)===x)break;for(u=o.eventTimes,b=-1;0<x;){var P=31-Fe(x);A=1<<P,P=u[P],P>b&&(b=P),x&=~A}if(x=b,x=Qt()-x,x=(120>x?120:480>x?480:1080>x?1080:1920>x?1920:3e3>x?3e3:4320>x?4320:1960*Oh(x/1960))-x,10<x){o.timeoutHandle=ia(Gn.bind(null,o,ve,cn),x);break}Gn(o,ve,cn);break;case 5:Gn(o,ve,cn);break;default:throw Error(e(329))}}}return xe(o,Qt()),o.callbackNode===p?Oc.bind(null,o):null}function Qa(o,u){var p=ns;return o.current.memoizedState.isDehydrated&&($n(o,u).flags|=256),o=cr(o,u),o!==2&&(u=ve,ve=p,u!==null&&Za(u)),o}function Za(o){ve===null?ve=o:ve.push.apply(ve,o)}function Fh(o){for(var u=o;;){if(u.flags&16384){var p=u.updateQueue;if(p!==null&&(p=p.stores,p!==null))for(var x=0;x<p.length;x++){var b=p[x],A=b.getSnapshot;b=b.value;try{if(!je(A(),b))return!1}catch{return!1}}}if(p=u.child,u.subtreeFlags&16384&&p!==null)p.return=u,u=p;else{if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Pn(o,u){for(u&=~Ka,u&=~ir,o.suspendedLanes|=u,o.pingedLanes&=~u,o=o.expirationTimes;0<u;){var p=31-Fe(u),x=1<<p;o[p]=-1,u&=~x}}function Fc(o){if((Ot&6)!==0)throw Error(e(327));xi();var u=gs(o,0);if((u&1)===0)return xe(o,Qt()),null;var p=cr(o,u);if(o.tag!==0&&p===2){var x=kr(o);x!==0&&(u=x,p=Qa(o,x))}if(p===1)throw p=es,$n(o,0),Pn(o,u),xe(o,Qt()),p;if(p===6)throw Error(e(345));return o.finishedWork=o.current.alternate,o.finishedLanes=u,Gn(o,ve,cn),xe(o,Qt()),null}function Ja(o,u){var p=Ot;Ot|=1;try{return o(u)}finally{Ot=p,Ot===0&&(vi=Qt()+500,Ns&&bn())}}function Un(o){Cn!==null&&Cn.tag===0&&(Ot&6)===0&&xi();var u=Ot;Ot|=1;var p=Me.transition,x=jt;try{if(Me.transition=null,jt=1,o)return o()}finally{jt=x,Me.transition=p,Ot=u,(Ot&6)===0&&bn()}}function to(){Se=yi.current,Ht(yi)}function $n(o,u){o.finishedWork=null,o.finishedLanes=0;var p=o.timeoutHandle;if(p!==-1&&(o.timeoutHandle=-1,dh(p)),Jt!==null)for(p=Jt.return;p!==null;){var x=p;switch(ca(x),x.tag){case 1:x=x.type.childContextTypes,x!=null&&Ls();break;case 3:pi(),Ht(me),Ht(oe),Ea();break;case 5:wa(x);break;case 4:pi();break;case 13:Ht(Wt);break;case 19:Ht(Wt);break;case 10:ma(x.type._context);break;case 22:case 23:to()}p=p.return}if(ie=o,Jt=o=Rn(o.current,null),ae=Se=u,ee=0,es=null,Ka=ir=Hn=0,ve=ns=null,Vn!==null){for(u=0;u<Vn.length;u++)if(p=Vn[u],x=p.interleaved,x!==null){p.interleaved=null;var b=x.next,A=p.pending;if(A!==null){var P=A.next;A.next=b,x.next=P}p.pending=x}Vn=null}return o}function jc(o,u){do{var p=Jt;try{if(pa(),Gs.current=qs,Ws){for(var x=Kt.memoizedState;x!==null;){var b=x.queue;b!==null&&(b.pending=null),x=x.next}Ws=!1}if(zn=0,ne=te=Kt=null,qi=!1,Yi=0,Wa.current=null,p===null||p.return===null){ee=1,es=u,Jt=null;break}t:{var A=o,P=p.return,O=p,H=u;if(u=ae,O.flags|=32768,H!==null&&typeof H=="object"&&typeof H.then=="function"){var rt=H,ht=O,dt=ht.tag;if((ht.mode&1)===0&&(dt===0||dt===11||dt===15)){var ut=ht.alternate;ut?(ht.updateQueue=ut.updateQueue,ht.memoizedState=ut.memoizedState,ht.lanes=ut.lanes):(ht.updateQueue=null,ht.memoizedState=null)}var yt=cc(P);if(yt!==null){yt.flags&=-257,uc(yt,P,O,A,u),yt.mode&1&&lc(A,rt,u),u=yt,H=rt;var wt=u.updateQueue;if(wt===null){var Et=new Set;Et.add(H),u.updateQueue=Et}else wt.add(H);break t}else{if((u&1)===0){lc(A,rt,u),eo();break t}H=Error(e(426))}}else if(Ut&&O.mode&1){var Zt=cc(P);if(Zt!==null){(Zt.flags&65536)===0&&(Zt.flags|=256),uc(Zt,P,O,A,u),da(mi(H,O));break t}}A=H=mi(H,O),ee!==4&&(ee=2),ns===null?ns=[A]:ns.push(A),A=P;do{switch(A.tag){case 3:A.flags|=65536,u&=-u,A.lanes|=u;var et=ac(A,H,u);Ll(A,et);break t;case 1:O=H;var K=A.type,it=A.stateNode;if((A.flags&128)===0&&(typeof K.getDerivedStateFromError=="function"||it!==null&&typeof it.componentDidCatch=="function"&&(Tn===null||!Tn.has(it)))){A.flags|=65536,u&=-u,A.lanes|=u;var pt=oc(A,O,u);Ll(A,pt);break t}}A=A.return}while(A!==null)}zc(p)}catch(St){u=St,Jt===p&&p!==null&&(Jt=p=p.return);continue}break}while(!0)}function Vc(){var o=nr.current;return nr.current=qs,o===null?qs:o}function eo(){(ee===0||ee===3||ee===2)&&(ee=4),ie===null||(Hn&268435455)===0&&(ir&268435455)===0||Pn(ie,ae)}function cr(o,u){var p=Ot;Ot|=2;var x=Vc();(ie!==o||ae!==u)&&(cn=null,$n(o,u));do try{jh();break}catch(b){jc(o,b)}while(!0);if(pa(),Ot=p,nr.current=x,Jt!==null)throw Error(e(261));return ie=null,ae=0,ee}function jh(){for(;Jt!==null;)Bc(Jt)}function Vh(){for(;Jt!==null&&!cu();)Bc(Jt)}function Bc(o){var u=$c(o.alternate,o,Se);o.memoizedProps=o.pendingProps,u===null?zc(o):Jt=u,Wa.current=null}function zc(o){var u=o;do{var p=u.alternate;if(o=u.return,(u.flags&32768)===0){if(p=Mh(p,u,Se),p!==null){Jt=p;return}}else{if(p=Dh(p,u),p!==null){p.flags&=32767,Jt=p;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{ee=6,Jt=null;return}}if(u=u.sibling,u!==null){Jt=u;return}Jt=u=o}while(u!==null);ee===0&&(ee=5)}function Gn(o,u,p){var x=jt,b=Me.transition;try{Me.transition=null,jt=1,Bh(o,u,p,x)}finally{Me.transition=b,jt=x}return null}function Bh(o,u,p,x){do xi();while(Cn!==null);if((Ot&6)!==0)throw Error(e(327));p=o.finishedWork;var b=o.finishedLanes;if(p===null)return null;if(o.finishedWork=null,o.finishedLanes=0,p===o.current)throw Error(e(177));o.callbackNode=null,o.callbackPriority=0;var A=p.lanes|p.childLanes;if(xu(o,A),o===ie&&(Jt=ie=null,ae=0),(p.subtreeFlags&2064)===0&&(p.flags&2064)===0||rr||(rr=!0,Gc(ds,function(){return xi(),null})),A=(p.flags&15990)!==0,(p.subtreeFlags&15990)!==0||A){A=Me.transition,Me.transition=null;var P=jt;jt=1;var O=Ot;Ot|=4,Wa.current=null,Ih(o,p),Mc(p,o),rh(ea),xs=!!ta,ea=ta=null,o.current=p,Nh(p),uu(),Ot=O,jt=P,Me.transition=A}else o.current=p;if(rr&&(rr=!1,Cn=o,ar=b),A=o.pendingLanes,A===0&&(Tn=null),fu(p.stateNode),xe(o,Qt()),u!==null)for(x=o.onRecoverableError,p=0;p<u.length;p++)b=u[p],x(b.value,{componentStack:b.stack,digest:b.digest});if(sr)throw sr=!1,o=qa,qa=null,o;return(ar&1)!==0&&o.tag!==0&&xi(),A=o.pendingLanes,(A&1)!==0?o===Ya?is++:(is=0,Ya=o):is=0,bn(),null}function xi(){if(Cn!==null){var o=Po(ar),u=Me.transition,p=jt;try{if(Me.transition=null,jt=16>o?16:o,Cn===null)var x=!1;else{if(o=Cn,Cn=null,ar=0,(Ot&6)!==0)throw Error(e(331));var b=Ot;for(Ot|=4,xt=o.current;xt!==null;){var A=xt,P=A.child;if((xt.flags&16)!==0){var O=A.deletions;if(O!==null){for(var H=0;H<O.length;H++){var rt=O[H];for(xt=rt;xt!==null;){var ht=xt;switch(ht.tag){case 0:case 11:case 15:ts(8,ht,A)}var dt=ht.child;if(dt!==null)dt.return=ht,xt=dt;else for(;xt!==null;){ht=xt;var ut=ht.sibling,yt=ht.return;if(Cc(ht),ht===rt){xt=null;break}if(ut!==null){ut.return=yt,xt=ut;break}xt=yt}}}var wt=A.alternate;if(wt!==null){var Et=wt.child;if(Et!==null){wt.child=null;do{var Zt=Et.sibling;Et.sibling=null,Et=Zt}while(Et!==null)}}xt=A}}if((A.subtreeFlags&2064)!==0&&P!==null)P.return=A,xt=P;else t:for(;xt!==null;){if(A=xt,(A.flags&2048)!==0)switch(A.tag){case 0:case 11:case 15:ts(9,A,A.return)}var et=A.sibling;if(et!==null){et.return=A.return,xt=et;break t}xt=A.return}}var K=o.current;for(xt=K;xt!==null;){P=xt;var it=P.child;if((P.subtreeFlags&2064)!==0&&it!==null)it.return=P,xt=it;else t:for(P=K;xt!==null;){if(O=xt,(O.flags&2048)!==0)try{switch(O.tag){case 0:case 11:case 15:er(9,O)}}catch(St){qt(O,O.return,St)}if(O===P){xt=null;break t}var pt=O.sibling;if(pt!==null){pt.return=O.return,xt=pt;break t}xt=O.return}}if(Ot=b,bn(),We&&typeof We.onPostCommitFiberRoot=="function")try{We.onPostCommitFiberRoot(fs,o)}catch{}x=!0}return x}finally{jt=p,Me.transition=u}}return!1}function Hc(o,u,p){u=mi(p,u),u=ac(o,u,1),o=An(o,u,1),u=de(),o!==null&&(_i(o,1,u),xe(o,u))}function qt(o,u,p){if(o.tag===3)Hc(o,o,p);else for(;u!==null;){if(u.tag===3){Hc(u,o,p);break}else if(u.tag===1){var x=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(Tn===null||!Tn.has(x))){o=mi(p,o),o=oc(u,o,1),u=An(u,o,1),o=de(),u!==null&&(_i(u,1,o),xe(u,o));break}}u=u.return}}function zh(o,u,p){var x=o.pingCache;x!==null&&x.delete(u),u=de(),o.pingedLanes|=o.suspendedLanes&p,ie===o&&(ae&p)===p&&(ee===4||ee===3&&(ae&130023424)===ae&&500>Qt()-Xa?$n(o,0):Ka|=p),xe(o,u)}function Uc(o,u){u===0&&((o.mode&1)===0?u=1:(u=ms,ms<<=1,(ms&130023424)===0&&(ms=4194304)));var p=de();o=an(o,u),o!==null&&(_i(o,u,p),xe(o,p))}function Hh(o){var u=o.memoizedState,p=0;u!==null&&(p=u.retryLane),Uc(o,p)}function Uh(o,u){var p=0;switch(o.tag){case 13:var x=o.stateNode,b=o.memoizedState;b!==null&&(p=b.retryLane);break;case 19:x=o.stateNode;break;default:throw Error(e(314))}x!==null&&x.delete(u),Uc(o,p)}var $c;$c=function(o,u,p){if(o!==null)if(o.memoizedProps!==u.pendingProps||me.current)ye=!0;else{if((o.lanes&p)===0&&(u.flags&128)===0)return ye=!1,kh(o,u,p);ye=(o.flags&131072)!==0}else ye=!1,Ut&&(u.flags&1048576)!==0&&Al(u,Fs,u.index);switch(u.lanes=0,u.tag){case 2:var x=u.type;Zs(o,u),o=u.pendingProps;var b=oi(u,oe.current);fi(u,p),b=Ta(null,u,x,o,b,p);var A=Ca();return u.flags|=1,typeof b=="object"&&b!==null&&typeof b.render=="function"&&b.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,ge(x)?(A=!0,Is(u)):A=!1,u.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,va(u),b.updater=Ys,u.stateNode=b,b._reactInternals=u,Da(u,x,o,p),u=Oa(null,u,x,!0,A,p)):(u.tag=0,Ut&&A&&la(u),he(null,u,b,p),u=u.child),u;case 16:x=u.elementType;t:{switch(Zs(o,u),o=u.pendingProps,b=x._init,x=b(x._payload),u.type=x,b=u.tag=Gh(x),o=Be(x,o),b){case 0:u=Na(null,u,x,o,p);break t;case 1:u=gc(null,u,x,o,p);break t;case 11:u=hc(null,u,x,o,p);break t;case 14:u=dc(null,u,x,Be(x.type,o),p);break t}throw Error(e(306,x,""))}return u;case 0:return x=u.type,b=u.pendingProps,b=u.elementType===x?b:Be(x,b),Na(o,u,x,b,p);case 1:return x=u.type,b=u.pendingProps,b=u.elementType===x?b:Be(x,b),gc(o,u,x,b,p);case 3:t:{if(yc(u),o===null)throw Error(e(387));x=u.pendingProps,A=u.memoizedState,b=A.element,Dl(o,u),Us(u,x,null,p);var P=u.memoizedState;if(x=P.element,A.isDehydrated)if(A={element:x,isDehydrated:!1,cache:P.cache,pendingSuspenseBoundaries:P.pendingSuspenseBoundaries,transitions:P.transitions},u.updateQueue.baseState=A,u.memoizedState=A,u.flags&256){b=mi(Error(e(423)),u),u=vc(o,u,x,p,b);break t}else if(x!==b){b=mi(Error(e(424)),u),u=vc(o,u,x,p,b);break t}else for(Ae=vn(u.stateNode.containerInfo.firstChild),Ee=u,Ut=!0,Ve=null,p=kl(u,null,x,p),u.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(ui(),x===b){u=ln(o,u,p);break t}he(o,u,x,p)}u=u.child}return u;case 5:return Nl(u),o===null&&ha(u),x=u.type,b=u.pendingProps,A=o!==null?o.memoizedProps:null,P=b.children,na(x,b)?P=null:A!==null&&na(x,A)&&(u.flags|=32),mc(o,u),he(o,u,P,p),u.child;case 6:return o===null&&ha(u),null;case 13:return xc(o,u,p);case 4:return xa(u,u.stateNode.containerInfo),x=u.pendingProps,o===null?u.child=hi(u,null,x,p):he(o,u,x,p),u.child;case 11:return x=u.type,b=u.pendingProps,b=u.elementType===x?b:Be(x,b),hc(o,u,x,b,p);case 7:return he(o,u,u.pendingProps,p),u.child;case 8:return he(o,u,u.pendingProps.children,p),u.child;case 12:return he(o,u,u.pendingProps.children,p),u.child;case 10:t:{if(x=u.type._context,b=u.pendingProps,A=u.memoizedProps,P=b.value,Bt(Bs,x._currentValue),x._currentValue=P,A!==null)if(je(A.value,P)){if(A.children===b.children&&!me.current){u=ln(o,u,p);break t}}else for(A=u.child,A!==null&&(A.return=u);A!==null;){var O=A.dependencies;if(O!==null){P=A.child;for(var H=O.firstContext;H!==null;){if(H.context===x){if(A.tag===1){H=on(-1,p&-p),H.tag=2;var rt=A.updateQueue;if(rt!==null){rt=rt.shared;var ht=rt.pending;ht===null?H.next=H:(H.next=ht.next,ht.next=H),rt.pending=H}}A.lanes|=p,H=A.alternate,H!==null&&(H.lanes|=p),ga(A.return,p,u),O.lanes|=p;break}H=H.next}}else if(A.tag===10)P=A.type===u.type?null:A.child;else if(A.tag===18){if(P=A.return,P===null)throw Error(e(341));P.lanes|=p,O=P.alternate,O!==null&&(O.lanes|=p),ga(P,p,u),P=A.sibling}else P=A.child;if(P!==null)P.return=A;else for(P=A;P!==null;){if(P===u){P=null;break}if(A=P.sibling,A!==null){A.return=P.return,P=A;break}P=P.return}A=P}he(o,u,b.children,p),u=u.child}return u;case 9:return b=u.type,x=u.pendingProps.children,fi(u,p),b=Re(b),x=x(b),u.flags|=1,he(o,u,x,p),u.child;case 14:return x=u.type,b=Be(x,u.pendingProps),b=Be(x.type,b),dc(o,u,x,b,p);case 15:return fc(o,u,u.type,u.pendingProps,p);case 17:return x=u.type,b=u.pendingProps,b=u.elementType===x?b:Be(x,b),Zs(o,u),u.tag=1,ge(x)?(o=!0,Is(u)):o=!1,fi(u,p),sc(u,x,b),Da(u,x,b,p),Oa(null,u,x,!0,o,p);case 19:return bc(o,u,p);case 22:return pc(o,u,p)}throw Error(e(156,u.tag))};function Gc(o,u){return Ao(o,u)}function $h(o,u,p,x){this.tag=o,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function De(o,u,p,x){return new $h(o,u,p,x)}function no(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Gh(o){if(typeof o=="function")return no(o)?1:0;if(o!=null){if(o=o.$$typeof,o===Tt)return 11;if(o===Mt)return 14}return 2}function Rn(o,u){var p=o.alternate;return p===null?(p=De(o.tag,u,o.key,o.mode),p.elementType=o.elementType,p.type=o.type,p.stateNode=o.stateNode,p.alternate=o,o.alternate=p):(p.pendingProps=u,p.type=o.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=o.flags&14680064,p.childLanes=o.childLanes,p.lanes=o.lanes,p.child=o.child,p.memoizedProps=o.memoizedProps,p.memoizedState=o.memoizedState,p.updateQueue=o.updateQueue,u=o.dependencies,p.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},p.sibling=o.sibling,p.index=o.index,p.ref=o.ref,p}function ur(o,u,p,x,b,A){var P=2;if(x=o,typeof o=="function")no(o)&&(P=1);else if(typeof o=="string")P=5;else t:switch(o){case G:return Wn(p.children,b,A,u);case nt:P=8,b|=8;break;case ot:return o=De(12,p,u,b|2),o.elementType=ot,o.lanes=A,o;case At:return o=De(13,p,u,b),o.elementType=At,o.lanes=A,o;case gt:return o=De(19,p,u,b),o.elementType=gt,o.lanes=A,o;case z:return hr(p,b,A,u);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case ct:P=10;break t;case ft:P=9;break t;case Tt:P=11;break t;case Mt:P=14;break t;case q:P=16,x=null;break t}throw Error(e(130,o==null?o:typeof o,""))}return u=De(P,p,u,b),u.elementType=o,u.type=x,u.lanes=A,u}function Wn(o,u,p,x){return o=De(7,o,x,u),o.lanes=p,o}function hr(o,u,p,x){return o=De(22,o,x,u),o.elementType=z,o.lanes=p,o.stateNode={isHidden:!1},o}function io(o,u,p){return o=De(6,o,null,u),o.lanes=p,o}function so(o,u,p){return u=De(4,o.children!==null?o.children:[],o.key,u),u.lanes=p,u.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},u}function Wh(o,u,p,x,b){this.tag=u,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mr(0),this.expirationTimes=Mr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mr(0),this.identifierPrefix=x,this.onRecoverableError=b,this.mutableSourceEagerHydrationData=null}function ro(o,u,p,x,b,A,P,O,H){return o=new Wh(o,u,p,O,H),u===1?(u=1,A===!0&&(u|=8)):u=0,A=De(3,null,null,u),o.current=A,A.stateNode=o,A.memoizedState={element:x,isDehydrated:p,cache:null,transitions:null,pendingSuspenseBoundaries:null},va(A),o}function Kh(o,u,p){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$,key:x==null?null:""+x,children:o,containerInfo:u,implementation:p}}function Wc(o){if(!o)return wn;o=o._reactInternals;t:{if(In(o)!==o||o.tag!==1)throw Error(e(170));var u=o;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(ge(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(u!==null);throw Error(e(171))}if(o.tag===1){var p=o.type;if(ge(p))return wl(o,p,u)}return u}function Kc(o,u,p,x,b,A,P,O,H){return o=ro(p,x,!0,o,b,A,P,O,H),o.context=Wc(null),p=o.current,x=de(),b=_n(p),A=on(x,b),A.callback=u??null,An(p,A,b),o.current.lanes=b,_i(o,b,x),xe(o,x),o}function dr(o,u,p,x){var b=u.current,A=de(),P=_n(b);return p=Wc(p),u.context===null?u.context=p:u.pendingContext=p,u=on(A,P),u.payload={element:o},x=x===void 0?null:x,x!==null&&(u.callback=x),o=An(b,u,P),o!==null&&(Ue(o,b,P,A),Hs(o,b,P)),P}function fr(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function Xc(o,u){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var p=o.retryLane;o.retryLane=p!==0&&p<u?p:u}}function ao(o,u){Xc(o,u),(o=o.alternate)&&Xc(o,u)}function Xh(){return null}var qc=typeof reportError=="function"?reportError:function(o){console.error(o)};function oo(o){this._internalRoot=o}pr.prototype.render=oo.prototype.render=function(o){var u=this._internalRoot;if(u===null)throw Error(e(409));dr(o,u,null,null)},pr.prototype.unmount=oo.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var u=o.containerInfo;Un(function(){dr(null,o,null,null)}),u[en]=null}};function pr(o){this._internalRoot=o}pr.prototype.unstable_scheduleHydration=function(o){if(o){var u=Mo();o={blockedOn:null,target:o,priority:u};for(var p=0;p<mn.length&&u!==0&&u<mn[p].priority;p++);mn.splice(p,0,o),p===0&&Io(o)}};function lo(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function mr(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function Yc(){}function qh(o,u,p,x,b){if(b){if(typeof x=="function"){var A=x;x=function(){var rt=fr(P);A.call(rt)}}var P=Kc(u,x,o,0,null,!1,!1,"",Yc);return o._reactRootContainer=P,o[en]=P.current,zi(o.nodeType===8?o.parentNode:o),Un(),P}for(;b=o.lastChild;)o.removeChild(b);if(typeof x=="function"){var O=x;x=function(){var rt=fr(H);O.call(rt)}}var H=ro(o,0,!1,null,null,!1,!1,"",Yc);return o._reactRootContainer=H,o[en]=H.current,zi(o.nodeType===8?o.parentNode:o),Un(function(){dr(u,H,p,x)}),H}function gr(o,u,p,x,b){var A=p._reactRootContainer;if(A){var P=A;if(typeof b=="function"){var O=b;b=function(){var H=fr(P);O.call(H)}}dr(u,P,o,b)}else P=qh(p,u,o,b,x);return fr(P)}Ro=function(o){switch(o.tag){case 3:var u=o.stateNode;if(u.current.memoizedState.isDehydrated){var p=Ci(u.pendingLanes);p!==0&&(Dr(u,p|1),xe(u,Qt()),(Ot&6)===0&&(vi=Qt()+500,bn()))}break;case 13:Un(function(){var x=an(o,1);if(x!==null){var b=de();Ue(x,o,1,b)}}),ao(o,1)}},Lr=function(o){if(o.tag===13){var u=an(o,134217728);if(u!==null){var p=de();Ue(u,o,134217728,p)}ao(o,134217728)}},ko=function(o){if(o.tag===13){var u=_n(o),p=an(o,u);if(p!==null){var x=de();Ue(p,o,u,x)}ao(o,u)}},Mo=function(){return jt},Do=function(o,u){var p=jt;try{return jt=o,u()}finally{jt=p}},Tr=function(o,u,p){switch(u){case"input":if(Ge(o,p),u=p.name,p.type==="radio"&&u!=null){for(p=o;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll("input[name="+JSON.stringify(""+u)+'][type="radio"]'),u=0;u<p.length;u++){var x=p[u];if(x!==o&&x.form===o.form){var b=Ds(x);if(!b)throw Error(e(90));Te(x),Ge(x,b)}}}break;case"textarea":os(o,p);break;case"select":u=p.value,u!=null&&Ie(o,!!p.multiple,u,!1)}},go=Ja,yo=Un;var Yh={usingClientEntryPoint:!1,Events:[$i,ri,Ds,po,mo,Ja]},ss={findFiberByHostInstance:Nn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Qh={bundleType:ss.bundleType,version:ss.version,rendererPackageName:ss.rendererPackageName,rendererConfig:ss.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:j.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=bo(o),o===null?null:o.stateNode},findFiberByHostInstance:ss.findFiberByHostInstance||Xh,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yr.isDisabled&&yr.supportsFiber)try{fs=yr.inject(Qh),We=yr}catch{}}return reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yh,reactDom_production_min.createPortal=function(o,u){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lo(u))throw Error(e(200));return Kh(o,u,null,p)},reactDom_production_min.createRoot=function(o,u){if(!lo(o))throw Error(e(299));var p=!1,x="",b=qc;return u!=null&&(u.unstable_strictMode===!0&&(p=!0),u.identifierPrefix!==void 0&&(x=u.identifierPrefix),u.onRecoverableError!==void 0&&(b=u.onRecoverableError)),u=ro(o,1,!1,null,null,p,!1,x,b),o[en]=u.current,zi(o.nodeType===8?o.parentNode:o),new oo(u)},reactDom_production_min.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var u=o._reactInternals;if(u===void 0)throw typeof o.render=="function"?Error(e(188)):(o=Object.keys(o).join(","),Error(e(268,o)));return o=bo(u),o=o===null?null:o.stateNode,o},reactDom_production_min.flushSync=function(o){return Un(o)},reactDom_production_min.hydrate=function(o,u,p){if(!mr(u))throw Error(e(200));return gr(null,o,u,!0,p)},reactDom_production_min.hydrateRoot=function(o,u,p){if(!lo(o))throw Error(e(405));var x=p!=null&&p.hydratedSources||null,b=!1,A="",P=qc;if(p!=null&&(p.unstable_strictMode===!0&&(b=!0),p.identifierPrefix!==void 0&&(A=p.identifierPrefix),p.onRecoverableError!==void 0&&(P=p.onRecoverableError)),u=Kc(u,null,o,1,p??null,b,!1,A,P),o[en]=u.current,zi(o),x)for(o=0;o<x.length;o++)p=x[o],b=p._getVersion,b=b(p._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[p,b]:u.mutableSourceEagerHydrationData.push(p,b);return new pr(u)},reactDom_production_min.render=function(o,u,p){if(!mr(u))throw Error(e(200));return gr(null,o,u,!1,p)},reactDom_production_min.unmountComponentAtNode=function(o){if(!mr(o))throw Error(e(40));return o._reactRootContainer?(Un(function(){gr(null,null,o,!1,function(){o._reactRootContainer=null,o[en]=null})}),!0):!1},reactDom_production_min.unstable_batchedUpdates=Ja,reactDom_production_min.unstable_renderSubtreeIntoContainer=function(o,u,p,x){if(!mr(p))throw Error(e(200));if(o==null||o._reactInternals===void 0)throw Error(e(38));return gr(o,u,p,!1,x)},reactDom_production_min.version="18.3.1-next-f1338f8080-20240426",reactDom_production_min}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(t){console.error(t)}}return l(),reactDom.exports=requireReactDom_production_min(),reactDom.exports}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client;hasRequiredClient=1;var l=requireReactDom();return client.createRoot=l.createRoot,client.hydrateRoot=l.hydrateRoot,client}var clientExports=requireClient();const ReactDOM=getDefaultExportFromCjs(clientExports),LayoutGroupContext=reactExports.createContext({});function useConstant(l){const t=reactExports.useRef(null);return t.current===null&&(t.current=l()),t.current}const isBrowser$1=typeof window<"u",useIsomorphicLayoutEffect=isBrowser$1?reactExports.useLayoutEffect:reactExports.useEffect,PresenceContext=reactExports.createContext(null);function addUniqueItem(l,t){l.indexOf(t)===-1&&l.push(t)}function removeItem(l,t){const e=l.indexOf(t);e>-1&&l.splice(e,1)}const clamp=(l,t,e)=>e>t?t:e<l?l:e;let invariant$1=()=>{};const MotionGlobalConfig={},isNumericalString=l=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(l);function isObject(l){return typeof l=="object"&&l!==null}const isZeroValueString=l=>/^0[^.\s]+$/u.test(l);function memo(l){let t;return()=>(t===void 0&&(t=l()),t)}const noop=l=>l,combineFunctions=(l,t)=>e=>t(l(e)),pipe=(...l)=>l.reduce(combineFunctions),progress=(l,t,e)=>{const a=t-l;return a===0?1:(e-l)/a};class SubscriptionManager{constructor(){this.subscriptions=[]}add(t){return addUniqueItem(this.subscriptions,t),()=>removeItem(this.subscriptions,t)}notify(t,e,a){const c=this.subscriptions.length;if(c)if(c===1)this.subscriptions[0](t,e,a);else for(let h=0;h<c;h++){const d=this.subscriptions[h];d&&d(t,e,a)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const secondsToMilliseconds=l=>l*1e3,millisecondsToSeconds=l=>l/1e3;function velocityPerSecond(l,t){return t?l*(1e3/t):0}const calcBezier=(l,t,e)=>(((1-3*e+3*t)*l+(3*e-6*t))*l+3*t)*l,subdivisionPrecision=1e-7,subdivisionMaxIterations=12;function binarySubdivide(l,t,e,a,c){let h,d,f=0;do d=t+(e-t)/2,h=calcBezier(d,a,c)-l,h>0?e=d:t=d;while(Math.abs(h)>subdivisionPrecision&&++f<subdivisionMaxIterations);return d}function cubicBezier(l,t,e,a){if(l===t&&e===a)return noop;const c=h=>binarySubdivide(h,0,1,l,e);return h=>h===0||h===1?h:calcBezier(c(h),t,a)}const mirrorEasing=l=>t=>t<=.5?l(2*t)/2:(2-l(2*(1-t)))/2,reverseEasing=l=>t=>1-l(1-t),backOut=cubicBezier(.33,1.53,.69,.99),backIn=reverseEasing(backOut),backInOut=mirrorEasing(backIn),anticipate=l=>(l*=2)<1?.5*backIn(l):.5*(2-Math.pow(2,-10*(l-1))),circIn=l=>1-Math.sin(Math.acos(l)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circIn),easeIn=cubicBezier(.42,0,1,1),easeOut=cubicBezier(0,0,.58,1),easeInOut=cubicBezier(.42,0,.58,1),isEasingArray=l=>Array.isArray(l)&&typeof l[0]!="number",isBezierDefinition=l=>Array.isArray(l)&&typeof l[0]=="number",easingLookup={linear:noop,easeIn,easeInOut,easeOut,circIn,circInOut,circOut,backIn,backInOut,backOut,anticipate},isValidEasing=l=>typeof l=="string",easingDefinitionToFunction=l=>{if(isBezierDefinition(l)){invariant$1(l.length===4);const[t,e,a,c]=l;return cubicBezier(t,e,a,c)}else if(isValidEasing(l))return easingLookup[l];return l},stepsOrder=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function createRenderStep(l,t){let e=new Set,a=new Set,c=!1,h=!1;const d=new WeakSet;let f={delta:0,timestamp:0,isProcessing:!1};function m(y){d.has(y)&&(g.schedule(y),l()),y(f)}const g={schedule:(y,w=!1,E=!1)=>{const C=E&&c?e:a;return w&&d.add(y),C.has(y)||C.add(y),y},cancel:y=>{a.delete(y),d.delete(y)},process:y=>{if(f=y,c){h=!0;return}c=!0,[e,a]=[a,e],e.forEach(m),e.clear(),c=!1,h&&(h=!1,g.process(y))}};return g}const maxElapsed$1=40;function createRenderBatcher(l,t){let e=!1,a=!0;const c={delta:0,timestamp:0,isProcessing:!1},h=()=>e=!0,d=stepsOrder.reduce((L,j)=>(L[j]=createRenderStep(h),L),{}),{setup:f,read:m,resolveKeyframes:g,preUpdate:y,update:w,preRender:E,render:S,postRender:C}=d,T=()=>{const L=MotionGlobalConfig.useManualTiming?c.timestamp:performance.now();e=!1,MotionGlobalConfig.useManualTiming||(c.delta=a?1e3/60:Math.max(Math.min(L-c.timestamp,maxElapsed$1),1)),c.timestamp=L,c.isProcessing=!0,f.process(c),m.process(c),g.process(c),y.process(c),w.process(c),E.process(c),S.process(c),C.process(c),c.isProcessing=!1,e&&t&&(a=!1,l(T))},k=()=>{e=!0,a=!0,c.isProcessing||l(T)};return{schedule:stepsOrder.reduce((L,j)=>{const F=d[j];return L[j]=($,G=!1,nt=!1)=>(e||k(),F.schedule($,G,nt)),L},{}),cancel:L=>{for(let j=0;j<stepsOrder.length;j++)d[stepsOrder[j]].cancel(L)},state:c,steps:d}}const{schedule:frame,cancel:cancelFrame,state:frameData,steps:frameSteps}=createRenderBatcher(typeof requestAnimationFrame<"u"?requestAnimationFrame:noop,!0);let now;function clearTime(){now=void 0}const time={now:()=>(now===void 0&&time.set(frameData.isProcessing||MotionGlobalConfig.useManualTiming?frameData.timestamp:performance.now()),now),set:l=>{now=l,queueMicrotask(clearTime)}},checkStringStartsWith=l=>t=>typeof t=="string"&&t.startsWith(l),isCSSVariableName=checkStringStartsWith("--"),startsAsVariableToken=checkStringStartsWith("var(--"),isCSSVariableToken=l=>startsAsVariableToken(l)?singleCssVariableRegex.test(l.split("/*")[0].trim()):!1,singleCssVariableRegex=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,number={test:l=>typeof l=="number",parse:parseFloat,transform:l=>l},alpha={...number,transform:l=>clamp(0,1,l)},scale={...number,default:1},sanitize=l=>Math.round(l*1e5)/1e5,floatRegex=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function isNullish(l){return l==null}const singleColorRegex=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,isColorString=(l,t)=>e=>!!(typeof e=="string"&&singleColorRegex.test(e)&&e.startsWith(l)||t&&!isNullish(e)&&Object.prototype.hasOwnProperty.call(e,t)),splitColor=(l,t,e)=>a=>{if(typeof a!="string")return a;const[c,h,d,f]=a.match(floatRegex);return{[l]:parseFloat(c),[t]:parseFloat(h),[e]:parseFloat(d),alpha:f!==void 0?parseFloat(f):1}},clampRgbUnit=l=>clamp(0,255,l),rgbUnit={...number,transform:l=>Math.round(clampRgbUnit(l))},rgba={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:({red:l,green:t,blue:e,alpha:a=1})=>"rgba("+rgbUnit.transform(l)+", "+rgbUnit.transform(t)+", "+rgbUnit.transform(e)+", "+sanitize(alpha.transform(a))+")"};function parseHex(l){let t="",e="",a="",c="";return l.length>5?(t=l.substring(1,3),e=l.substring(3,5),a=l.substring(5,7),c=l.substring(7,9)):(t=l.substring(1,2),e=l.substring(2,3),a=l.substring(3,4),c=l.substring(4,5),t+=t,e+=e,a+=a,c+=c),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(a,16),alpha:c?parseInt(c,16)/255:1}}const hex={test:isColorString("#"),parse:parseHex,transform:rgba.transform},createUnitType=l=>({test:t=>typeof t=="string"&&t.endsWith(l)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${l}`}),degrees=createUnitType("deg"),percent=createUnitType("%"),px=createUnitType("px"),vh=createUnitType("vh"),vw=createUnitType("vw"),progressPercentage={...percent,parse:l=>percent.parse(l)/100,transform:l=>percent.transform(l*100)},hsla={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:({hue:l,saturation:t,lightness:e,alpha:a=1})=>"hsla("+Math.round(l)+", "+percent.transform(sanitize(t))+", "+percent.transform(sanitize(e))+", "+sanitize(alpha.transform(a))+")"},color={test:l=>rgba.test(l)||hex.test(l)||hsla.test(l),parse:l=>rgba.test(l)?rgba.parse(l):hsla.test(l)?hsla.parse(l):hex.parse(l),transform:l=>typeof l=="string"?l:l.hasOwnProperty("red")?rgba.transform(l):hsla.transform(l),getAnimatableNone:l=>{const t=color.parse(l);return t.alpha=0,color.transform(t)}},colorRegex=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function test(l){return isNaN(l)&&typeof l=="string"&&(l.match(floatRegex)?.length||0)+(l.match(colorRegex)?.length||0)>0}const NUMBER_TOKEN="number",COLOR_TOKEN="color",VAR_TOKEN="var",VAR_FUNCTION_TOKEN="var(",SPLIT_TOKEN="${}",complexRegex=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function analyseComplexValue(l){const t=l.toString(),e=[],a={color:[],number:[],var:[]},c=[];let h=0;const f=t.replace(complexRegex,m=>(color.test(m)?(a.color.push(h),c.push(COLOR_TOKEN),e.push(color.parse(m))):m.startsWith(VAR_FUNCTION_TOKEN)?(a.var.push(h),c.push(VAR_TOKEN),e.push(m)):(a.number.push(h),c.push(NUMBER_TOKEN),e.push(parseFloat(m))),++h,SPLIT_TOKEN)).split(SPLIT_TOKEN);return{values:e,split:f,indexes:a,types:c}}function parseComplexValue(l){return analyseComplexValue(l).values}function createTransformer(l){const{split:t,types:e}=analyseComplexValue(l),a=t.length;return c=>{let h="";for(let d=0;d<a;d++)if(h+=t[d],c[d]!==void 0){const f=e[d];f===NUMBER_TOKEN?h+=sanitize(c[d]):f===COLOR_TOKEN?h+=color.transform(c[d]):h+=c[d]}return h}}const convertNumbersToZero=l=>typeof l=="number"?0:color.test(l)?color.getAnimatableNone(l):l;function getAnimatableNone$1(l){const t=parseComplexValue(l);return createTransformer(l)(t.map(convertNumbersToZero))}const complex={test,parse:parseComplexValue,createTransformer,getAnimatableNone:getAnimatableNone$1};function hueToRgb(l,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?l+(t-l)*6*e:e<1/2?t:e<2/3?l+(t-l)*(2/3-e)*6:l}function hslaToRgba({hue:l,saturation:t,lightness:e,alpha:a}){l/=360,t/=100,e/=100;let c=0,h=0,d=0;if(!t)c=h=d=e;else{const f=e<.5?e*(1+t):e+t-e*t,m=2*e-f;c=hueToRgb(m,f,l+1/3),h=hueToRgb(m,f,l),d=hueToRgb(m,f,l-1/3)}return{red:Math.round(c*255),green:Math.round(h*255),blue:Math.round(d*255),alpha:a}}function mixImmediate(l,t){return e=>e>0?t:l}const mixNumber$1=(l,t,e)=>l+(t-l)*e,mixLinearColor=(l,t,e)=>{const a=l*l,c=e*(t*t-a)+a;return c<0?0:Math.sqrt(c)},colorTypes=[hex,rgba,hsla],getColorType=l=>colorTypes.find(t=>t.test(l));function asRGBA(l){const t=getColorType(l);if(!t)return!1;let e=t.parse(l);return t===hsla&&(e=hslaToRgba(e)),e}const mixColor=(l,t)=>{const e=asRGBA(l),a=asRGBA(t);if(!e||!a)return mixImmediate(l,t);const c={...e};return h=>(c.red=mixLinearColor(e.red,a.red,h),c.green=mixLinearColor(e.green,a.green,h),c.blue=mixLinearColor(e.blue,a.blue,h),c.alpha=mixNumber$1(e.alpha,a.alpha,h),rgba.transform(c))},invisibleValues=new Set(["none","hidden"]);function mixVisibility(l,t){return invisibleValues.has(l)?e=>e<=0?l:t:e=>e>=1?t:l}function mixNumber(l,t){return e=>mixNumber$1(l,t,e)}function getMixer(l){return typeof l=="number"?mixNumber:typeof l=="string"?isCSSVariableToken(l)?mixImmediate:color.test(l)?mixColor:mixComplex:Array.isArray(l)?mixArray:typeof l=="object"?color.test(l)?mixColor:mixObject:mixImmediate}function mixArray(l,t){const e=[...l],a=e.length,c=l.map((h,d)=>getMixer(h)(h,t[d]));return h=>{for(let d=0;d<a;d++)e[d]=c[d](h);return e}}function mixObject(l,t){const e={...l,...t},a={};for(const c in e)l[c]!==void 0&&t[c]!==void 0&&(a[c]=getMixer(l[c])(l[c],t[c]));return c=>{for(const h in a)e[h]=a[h](c);return e}}function matchOrder(l,t){const e=[],a={color:0,var:0,number:0};for(let c=0;c<t.values.length;c++){const h=t.types[c],d=l.indexes[h][a[h]],f=l.values[d]??0;e[c]=f,a[h]++}return e}const mixComplex=(l,t)=>{const e=complex.createTransformer(t),a=analyseComplexValue(l),c=analyseComplexValue(t);return a.indexes.var.length===c.indexes.var.length&&a.indexes.color.length===c.indexes.color.length&&a.indexes.number.length>=c.indexes.number.length?invisibleValues.has(l)&&!c.values.length||invisibleValues.has(t)&&!a.values.length?mixVisibility(l,t):pipe(mixArray(matchOrder(a,c),c.values),e):mixImmediate(l,t)};function mix(l,t,e){return typeof l=="number"&&typeof t=="number"&&typeof e=="number"?mixNumber$1(l,t,e):getMixer(l)(l,t)}const frameloopDriver=l=>{const t=({timestamp:e})=>l(e);return{start:(e=!0)=>frame.update(t,e),stop:()=>cancelFrame(t),now:()=>frameData.isProcessing?frameData.timestamp:time.now()}},generateLinearEasing=(l,t,e=10)=>{let a="";const c=Math.max(Math.round(t/e),2);for(let h=0;h<c;h++)a+=Math.round(l(h/(c-1))*1e4)/1e4+", ";return`linear(${a.substring(0,a.length-2)})`},maxGeneratorDuration=2e4;function calcGeneratorDuration(l){let t=0;const e=50;let a=l.next(t);for(;!a.done&&t<maxGeneratorDuration;)t+=e,a=l.next(t);return t>=maxGeneratorDuration?1/0:t}function createGeneratorEasing(l,t=100,e){const a=e({...l,keyframes:[0,t]}),c=Math.min(calcGeneratorDuration(a),maxGeneratorDuration);return{type:"keyframes",ease:h=>a.next(c*h).value/t,duration:millisecondsToSeconds(c)}}const velocitySampleDuration=5;function calcGeneratorVelocity(l,t,e){const a=Math.max(t-velocitySampleDuration,0);return velocityPerSecond(e-l(a),t-a)}const springDefaults={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},safeMin=.001;function findSpring({duration:l=springDefaults.duration,bounce:t=springDefaults.bounce,velocity:e=springDefaults.velocity,mass:a=springDefaults.mass}){let c,h,d=1-t;d=clamp(springDefaults.minDamping,springDefaults.maxDamping,d),l=clamp(springDefaults.minDuration,springDefaults.maxDuration,millisecondsToSeconds(l)),d<1?(c=g=>{const y=g*d,w=y*l,E=y-e,S=calcAngularFreq(g,d),C=Math.exp(-w);return safeMin-E/S*C},h=g=>{const w=g*d*l,E=w*e+e,S=Math.pow(d,2)*Math.pow(g,2)*l,C=Math.exp(-w),T=calcAngularFreq(Math.pow(g,2),d);return(-c(g)+safeMin>0?-1:1)*((E-S)*C)/T}):(c=g=>{const y=Math.exp(-g*l),w=(g-e)*l+1;return-safeMin+y*w},h=g=>{const y=Math.exp(-g*l),w=(e-g)*(l*l);return y*w});const f=5/l,m=approximateRoot(c,h,f);if(l=secondsToMilliseconds(l),isNaN(m))return{stiffness:springDefaults.stiffness,damping:springDefaults.damping,duration:l};{const g=Math.pow(m,2)*a;return{stiffness:g,damping:d*2*Math.sqrt(a*g),duration:l}}}const rootIterations=12;function approximateRoot(l,t,e){let a=e;for(let c=1;c<rootIterations;c++)a=a-l(a)/t(a);return a}function calcAngularFreq(l,t){return l*Math.sqrt(1-t*t)}const durationKeys=["duration","bounce"],physicsKeys=["stiffness","damping","mass"];function isSpringType(l,t){return t.some(e=>l[e]!==void 0)}function getSpringOptions(l){let t={velocity:springDefaults.velocity,stiffness:springDefaults.stiffness,damping:springDefaults.damping,mass:springDefaults.mass,isResolvedFromDuration:!1,...l};if(!isSpringType(l,physicsKeys)&&isSpringType(l,durationKeys))if(l.visualDuration){const e=l.visualDuration,a=2*Math.PI/(e*1.2),c=a*a,h=2*clamp(.05,1,1-(l.bounce||0))*Math.sqrt(c);t={...t,mass:springDefaults.mass,stiffness:c,damping:h}}else{const e=findSpring(l);t={...t,...e,mass:springDefaults.mass},t.isResolvedFromDuration=!0}return t}function spring(l=springDefaults.visualDuration,t=springDefaults.bounce){const e=typeof l!="object"?{visualDuration:l,keyframes:[0,1],bounce:t}:l;let{restSpeed:a,restDelta:c}=e;const h=e.keyframes[0],d=e.keyframes[e.keyframes.length-1],f={done:!1,value:h},{stiffness:m,damping:g,mass:y,duration:w,velocity:E,isResolvedFromDuration:S}=getSpringOptions({...e,velocity:-millisecondsToSeconds(e.velocity||0)}),C=E||0,T=g/(2*Math.sqrt(m*y)),k=d-h,D=millisecondsToSeconds(Math.sqrt(m/y)),N=Math.abs(k)<5;a||(a=N?springDefaults.restSpeed.granular:springDefaults.restSpeed.default),c||(c=N?springDefaults.restDelta.granular:springDefaults.restDelta.default);let L;if(T<1){const F=calcAngularFreq(D,T);L=$=>{const G=Math.exp(-T*D*$);return d-G*((C+T*D*k)/F*Math.sin(F*$)+k*Math.cos(F*$))}}else if(T===1)L=F=>d-Math.exp(-D*F)*(k+(C+D*k)*F);else{const F=D*Math.sqrt(T*T-1);L=$=>{const G=Math.exp(-T*D*$),nt=Math.min(F*$,300);return d-G*((C+T*D*k)*Math.sinh(nt)+F*k*Math.cosh(nt))/F}}const j={calculatedDuration:S&&w||null,next:F=>{const $=L(F);if(S)f.done=F>=w;else{let G=F===0?C:0;T<1&&(G=F===0?secondsToMilliseconds(C):calcGeneratorVelocity(L,F,$));const nt=Math.abs(G)<=a,ot=Math.abs(d-$)<=c;f.done=nt&&ot}return f.value=f.done?d:$,f},toString:()=>{const F=Math.min(calcGeneratorDuration(j),maxGeneratorDuration),$=generateLinearEasing(G=>j.next(F*G).value,F,30);return F+"ms "+$},toTransition:()=>{}};return j}spring.applyToOptions=l=>{const t=createGeneratorEasing(l,100,spring);return l.ease=t.ease,l.duration=secondsToMilliseconds(t.duration),l.type="keyframes",l};function inertia({keyframes:l,velocity:t=0,power:e=.8,timeConstant:a=325,bounceDamping:c=10,bounceStiffness:h=500,modifyTarget:d,min:f,max:m,restDelta:g=.5,restSpeed:y}){const w=l[0],E={done:!1,value:w},S=nt=>f!==void 0&&nt<f||m!==void 0&&nt>m,C=nt=>f===void 0?m:m===void 0||Math.abs(f-nt)<Math.abs(m-nt)?f:m;let T=e*t;const k=w+T,D=d===void 0?k:d(k);D!==k&&(T=D-w);const N=nt=>-T*Math.exp(-nt/a),L=nt=>D+N(nt),j=nt=>{const ot=N(nt),ct=L(nt);E.done=Math.abs(ot)<=g,E.value=E.done?D:ct};let F,$;const G=nt=>{S(E.value)&&(F=nt,$=spring({keyframes:[E.value,C(E.value)],velocity:calcGeneratorVelocity(L,nt,E.value),damping:c,stiffness:h,restDelta:g,restSpeed:y}))};return G(0),{calculatedDuration:null,next:nt=>{let ot=!1;return!$&&F===void 0&&(ot=!0,j(nt),G(nt)),F!==void 0&&nt>=F?$.next(nt-F):(!ot&&j(nt),E)}}}function createMixers(l,t,e){const a=[],c=e||MotionGlobalConfig.mix||mix,h=l.length-1;for(let d=0;d<h;d++){let f=c(l[d],l[d+1]);if(t){const m=Array.isArray(t)?t[d]||noop:t;f=pipe(m,f)}a.push(f)}return a}function interpolate(l,t,{clamp:e=!0,ease:a,mixer:c}={}){const h=l.length;if(invariant$1(h===t.length),h===1)return()=>t[0];if(h===2&&t[0]===t[1])return()=>t[1];const d=l[0]===l[1];l[0]>l[h-1]&&(l=[...l].reverse(),t=[...t].reverse());const f=createMixers(t,a,c),m=f.length,g=y=>{if(d&&y<l[0])return t[0];let w=0;if(m>1)for(;w<l.length-2&&!(y<l[w+1]);w++);const E=progress(l[w],l[w+1],y);return f[w](E)};return e?y=>g(clamp(l[0],l[h-1],y)):g}function fillOffset(l,t){const e=l[l.length-1];for(let a=1;a<=t;a++){const c=progress(0,t,a);l.push(mixNumber$1(e,1,c))}}function defaultOffset$1(l){const t=[0];return fillOffset(t,l.length-1),t}function convertOffsetToTimes(l,t){return l.map(e=>e*t)}function defaultEasing(l,t){return l.map(()=>t||easeInOut).splice(0,l.length-1)}function keyframes({duration:l=300,keyframes:t,times:e,ease:a="easeInOut"}){const c=isEasingArray(a)?a.map(easingDefinitionToFunction):easingDefinitionToFunction(a),h={done:!1,value:t[0]},d=convertOffsetToTimes(e&&e.length===t.length?e:defaultOffset$1(t),l),f=interpolate(d,t,{ease:Array.isArray(c)?c:defaultEasing(t,c)});return{calculatedDuration:l,next:m=>(h.value=f(m),h.done=m>=l,h)}}const isNotNull$1=l=>l!==null;function getFinalKeyframe$1(l,{repeat:t,repeatType:e="loop"},a,c=1){const h=l.filter(isNotNull$1),f=c<0||t&&e!=="loop"&&t%2===1?0:h.length-1;return!f||a===void 0?h[f]:a}const transitionTypeMap={decay:inertia,inertia,tween:keyframes,keyframes,spring};function replaceTransitionType(l){typeof l.type=="string"&&(l.type=transitionTypeMap[l.type])}class WithPromise{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,e){return this.finished.then(t,e)}}const percentToProgress=l=>l/100;class JSAnimation extends WithPromise{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:e}=this.options;e&&e.updatedAt!==time.now()&&this.tick(time.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;replaceTransitionType(t);const{type:e=keyframes,repeat:a=0,repeatDelay:c=0,repeatType:h,velocity:d=0}=t;let{keyframes:f}=t;const m=e||keyframes;m!==keyframes&&typeof f[0]!="number"&&(this.mixKeyframes=pipe(percentToProgress,mix(f[0],f[1])),f=[0,100]);const g=m({...t,keyframes:f});h==="mirror"&&(this.mirroredGenerator=m({...t,keyframes:[...f].reverse(),velocity:-d})),g.calculatedDuration===null&&(g.calculatedDuration=calcGeneratorDuration(g));const{calculatedDuration:y}=g;this.calculatedDuration=y,this.resolvedDuration=y+c,this.totalDuration=this.resolvedDuration*(a+1)-c,this.generator=g}updateTime(t){const e=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=e}tick(t,e=!1){const{generator:a,totalDuration:c,mixKeyframes:h,mirroredGenerator:d,resolvedDuration:f,calculatedDuration:m}=this;if(this.startTime===null)return a.next(0);const{delay:g=0,keyframes:y,repeat:w,repeatType:E,repeatDelay:S,type:C,onUpdate:T,finalKeyframe:k}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-c/this.speed,this.startTime)),e?this.currentTime=t:this.updateTime(t);const D=this.currentTime-g*(this.playbackSpeed>=0?1:-1),N=this.playbackSpeed>=0?D<0:D>c;this.currentTime=Math.max(D,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=c);let L=this.currentTime,j=a;if(w){const nt=Math.min(this.currentTime,c)/f;let ot=Math.floor(nt),ct=nt%1;!ct&&nt>=1&&(ct=1),ct===1&&ot--,ot=Math.min(ot,w+1),!!(ot%2)&&(E==="reverse"?(ct=1-ct,S&&(ct-=S/f)):E==="mirror"&&(j=d)),L=clamp(0,1,ct)*f}const F=N?{done:!1,value:y[0]}:j.next(L);h&&(F.value=h(F.value));let{done:$}=F;!N&&m!==null&&($=this.playbackSpeed>=0?this.currentTime>=c:this.currentTime<=0);const G=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&$);return G&&C!==inertia&&(F.value=getFinalKeyframe$1(y,this.options,k,this.speed)),T&&T(F.value),G&&this.finish(),F}then(t,e){return this.finished.then(t,e)}get duration(){return millisecondsToSeconds(this.calculatedDuration)}get time(){return millisecondsToSeconds(this.currentTime)}set time(t){t=secondsToMilliseconds(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(time.now());const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=millisecondsToSeconds(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=frameloopDriver,startTime:e}=this.options;this.driver||(this.driver=t(c=>this.tick(c))),this.options.onPlay?.();const a=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=a):this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime||(this.startTime=e??a),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(time.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function fillWildcards(l){for(let t=1;t<l.length;t++)l[t]??(l[t]=l[t-1])}const radToDeg=l=>l*180/Math.PI,rotate=l=>{const t=radToDeg(Math.atan2(l[1],l[0]));return rebaseAngle(t)},matrix2dParsers={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:l=>(Math.abs(l[0])+Math.abs(l[3]))/2,rotate,rotateZ:rotate,skewX:l=>radToDeg(Math.atan(l[1])),skewY:l=>radToDeg(Math.atan(l[2])),skew:l=>(Math.abs(l[1])+Math.abs(l[2]))/2},rebaseAngle=l=>(l=l%360,l<0&&(l+=360),l),rotateZ=rotate,scaleX=l=>Math.sqrt(l[0]*l[0]+l[1]*l[1]),scaleY=l=>Math.sqrt(l[4]*l[4]+l[5]*l[5]),matrix3dParsers={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX,scaleY,scale:l=>(scaleX(l)+scaleY(l))/2,rotateX:l=>rebaseAngle(radToDeg(Math.atan2(l[6],l[5]))),rotateY:l=>rebaseAngle(radToDeg(Math.atan2(-l[2],l[0]))),rotateZ,rotate:rotateZ,skewX:l=>radToDeg(Math.atan(l[4])),skewY:l=>radToDeg(Math.atan(l[1])),skew:l=>(Math.abs(l[1])+Math.abs(l[4]))/2};function defaultTransformValue(l){return l.includes("scale")?1:0}function parseValueFromTransform(l,t){if(!l||l==="none")return defaultTransformValue(t);const e=l.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let a,c;if(e)a=matrix3dParsers,c=e;else{const f=l.match(/^matrix\(([-\d.e\s,]+)\)$/u);a=matrix2dParsers,c=f}if(!c)return defaultTransformValue(t);const h=a[t],d=c[1].split(",").map(convertTransformToNumber);return typeof h=="function"?h(d):d[h]}const readTransformValue=(l,t)=>{const{transform:e="none"}=getComputedStyle(l);return parseValueFromTransform(e,t)};function convertTransformToNumber(l){return parseFloat(l.trim())}const transformPropOrder=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],transformProps=new Set(transformPropOrder),isNumOrPxType=l=>l===number||l===px,transformKeys=new Set(["x","y","z"]),nonTranslationalTransformKeys=transformPropOrder.filter(l=>!transformKeys.has(l));function removeNonTranslationalTransform(l){const t=[];return nonTranslationalTransformKeys.forEach(e=>{const a=l.getValue(e);a!==void 0&&(t.push([e,a.get()]),a.set(e.startsWith("scale")?1:0))}),t}const positionalValues={width:({x:l},{paddingLeft:t="0",paddingRight:e="0"})=>l.max-l.min-parseFloat(t)-parseFloat(e),height:({y:l},{paddingTop:t="0",paddingBottom:e="0"})=>l.max-l.min-parseFloat(t)-parseFloat(e),top:(l,{top:t})=>parseFloat(t),left:(l,{left:t})=>parseFloat(t),bottom:({y:l},{top:t})=>parseFloat(t)+(l.max-l.min),right:({x:l},{left:t})=>parseFloat(t)+(l.max-l.min),x:(l,{transform:t})=>parseValueFromTransform(t,"x"),y:(l,{transform:t})=>parseValueFromTransform(t,"y")};positionalValues.translateX=positionalValues.x;positionalValues.translateY=positionalValues.y;const toResolve=new Set;let isScheduled=!1,anyNeedsMeasurement=!1,isForced=!1;function measureAllKeyframes(){if(anyNeedsMeasurement){const l=Array.from(toResolve).filter(a=>a.needsMeasurement),t=new Set(l.map(a=>a.element)),e=new Map;t.forEach(a=>{const c=removeNonTranslationalTransform(a);c.length&&(e.set(a,c),a.render())}),l.forEach(a=>a.measureInitialState()),t.forEach(a=>{a.render();const c=e.get(a);c&&c.forEach(([h,d])=>{a.getValue(h)?.set(d)})}),l.forEach(a=>a.measureEndState()),l.forEach(a=>{a.suspendedScrollY!==void 0&&window.scrollTo(0,a.suspendedScrollY)})}anyNeedsMeasurement=!1,isScheduled=!1,toResolve.forEach(l=>l.complete(isForced)),toResolve.clear()}function readAllKeyframes(){toResolve.forEach(l=>{l.readKeyframes(),l.needsMeasurement&&(anyNeedsMeasurement=!0)})}function flushKeyframeResolvers(){isForced=!0,readAllKeyframes(),measureAllKeyframes(),isForced=!1}class KeyframeResolver{constructor(t,e,a,c,h,d=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=a,this.motionValue=c,this.element=h,this.isAsync=d}scheduleResolve(){this.state="scheduled",this.isAsync?(toResolve.add(this),isScheduled||(isScheduled=!0,frame.read(readAllKeyframes),frame.resolveKeyframes(measureAllKeyframes))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:a,motionValue:c}=this;if(t[0]===null){const h=c?.get(),d=t[t.length-1];if(h!==void 0)t[0]=h;else if(a&&e){const f=a.readValue(e,d);f!=null&&(t[0]=f)}t[0]===void 0&&(t[0]=d),c&&h===void 0&&c.set(t[0])}fillWildcards(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),toResolve.delete(this)}cancel(){this.state==="scheduled"&&(toResolve.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const isCSSVar=l=>l.startsWith("--");function setStyle(l,t,e){isCSSVar(t)?l.style.setProperty(t,e):l.style[t]=e}const supportsScrollTimeline=memo(()=>window.ScrollTimeline!==void 0),supportsFlags={};function memoSupports(l,t){const e=memo(l);return()=>supportsFlags[t]??e()}const supportsLinearEasing=memoSupports(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),cubicBezierAsString=([l,t,e,a])=>`cubic-bezier(${l}, ${t}, ${e}, ${a})`,supportedWaapiEasing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(l,t){if(l)return typeof l=="function"?supportsLinearEasing()?generateLinearEasing(l,t):"ease-out":isBezierDefinition(l)?cubicBezierAsString(l):Array.isArray(l)?l.map(e=>mapEasingToNativeEasing(e,t)||supportedWaapiEasing.easeOut):supportedWaapiEasing[l]}function startWaapiAnimation(l,t,e,{delay:a=0,duration:c=300,repeat:h=0,repeatType:d="loop",ease:f="easeOut",times:m}={},g=void 0){const y={[t]:e};m&&(y.offset=m);const w=mapEasingToNativeEasing(f,c);Array.isArray(w)&&(y.easing=w);const E={delay:a,duration:c,easing:Array.isArray(w)?"linear":w,fill:"both",iterations:h+1,direction:d==="reverse"?"alternate":"normal"};return g&&(E.pseudoElement=g),l.animate(y,E)}function isGenerator(l){return typeof l=="function"&&"applyToOptions"in l}function applyGeneratorOptions({type:l,...t}){return isGenerator(l)&&supportsLinearEasing()?l.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class NativeAnimation extends WithPromise{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:e,name:a,keyframes:c,pseudoElement:h,allowFlatten:d=!1,finalKeyframe:f,onComplete:m}=t;this.isPseudoElement=!!h,this.allowFlatten=d,this.options=t,invariant$1(typeof t.type!="string");const g=applyGeneratorOptions(t);this.animation=startWaapiAnimation(e,a,c,g,h),g.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!h){const y=getFinalKeyframe$1(c,this.options,f,this.speed);this.updateMotionValue?this.updateMotionValue(y):setStyle(e,a,y),this.animation.cancel()}m?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return millisecondsToSeconds(Number(t))}get time(){return millisecondsToSeconds(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=secondsToMilliseconds(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:e}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&supportsScrollTimeline()?(this.animation.timeline=t,noop):e(this)}}const unsupportedEasingFunctions={anticipate,backInOut,circInOut};function isUnsupportedEase(l){return l in unsupportedEasingFunctions}function replaceStringEasing(l){typeof l.ease=="string"&&isUnsupportedEase(l.ease)&&(l.ease=unsupportedEasingFunctions[l.ease])}const sampleDelta=10;class NativeAnimationExtended extends NativeAnimation{constructor(t){replaceStringEasing(t),replaceTransitionType(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:e,onUpdate:a,onComplete:c,element:h,...d}=this.options;if(!e)return;if(t!==void 0){e.set(t);return}const f=new JSAnimation({...d,autoplay:!1}),m=secondsToMilliseconds(this.finishedTime??this.time);e.setWithVelocity(f.sample(m-sampleDelta).value,f.sample(m).value,sampleDelta),f.stop()}}const isAnimatable=(l,t)=>t==="zIndex"?!1:!!(typeof l=="number"||Array.isArray(l)||typeof l=="string"&&(complex.test(l)||l==="0")&&!l.startsWith("url("));function hasKeyframesChanged(l){const t=l[0];if(l.length===1)return!0;for(let e=0;e<l.length;e++)if(l[e]!==t)return!0}function canAnimate(l,t,e,a){const c=l[0];if(c===null)return!1;if(t==="display"||t==="visibility")return!0;const h=l[l.length-1],d=isAnimatable(c,t),f=isAnimatable(h,t);return!d||!f?!1:hasKeyframesChanged(l)||(e==="spring"||isGenerator(e))&&a}function makeAnimationInstant(l){l.duration=0,l.type}const acceleratedValues=new Set(["opacity","clipPath","filter","transform"]),supportsWaapi=memo(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function supportsBrowserAnimation(l){const{motionValue:t,name:e,repeatDelay:a,repeatType:c,damping:h,type:d}=l;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:m,transformTemplate:g}=t.owner.getProps();return supportsWaapi()&&e&&acceleratedValues.has(e)&&(e!=="transform"||!g)&&!m&&!a&&c!=="mirror"&&h!==0&&d!=="inertia"}const MAX_RESOLVE_DELAY=40;class AsyncMotionValueAnimation extends WithPromise{constructor({autoplay:t=!0,delay:e=0,type:a="keyframes",repeat:c=0,repeatDelay:h=0,repeatType:d="loop",keyframes:f,name:m,motionValue:g,element:y,...w}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=time.now();const E={autoplay:t,delay:e,type:a,repeat:c,repeatDelay:h,repeatType:d,name:m,motionValue:g,element:y,...w},S=y?.KeyframeResolver||KeyframeResolver;this.keyframeResolver=new S(f,(C,T,k)=>this.onKeyframesResolved(C,T,E,!k),m,g,y),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,e,a,c){this.keyframeResolver=void 0;const{name:h,type:d,velocity:f,delay:m,isHandoff:g,onUpdate:y}=a;this.resolvedAt=time.now(),canAnimate(t,h,d,f)||((MotionGlobalConfig.instantAnimations||!m)&&y?.(getFinalKeyframe$1(t,a,e)),t[0]=t[t.length-1],makeAnimationInstant(a),a.repeat=0);const E={startTime:c?this.resolvedAt?this.resolvedAt-this.createdAt>MAX_RESOLVE_DELAY?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:e,...a,keyframes:t},S=!g&&supportsBrowserAnimation(E)?new NativeAnimationExtended({...E,element:E.motionValue.owner.current}):new JSAnimation(E);S.finished.then(()=>this.notifyFinished()).catch(noop),this.pendingTimeline&&(this.stopTimeline=S.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=S}get finished(){return this._animation?this.animation.finished:this._finished}then(t,e){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),flushKeyframeResolvers()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const splitCSSVariableRegex=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function parseCSSVariable(l){const t=splitCSSVariableRegex.exec(l);if(!t)return[,];const[,e,a,c]=t;return[`--${e??a}`,c]}function getVariableValue(l,t,e=1){const[a,c]=parseCSSVariable(l);if(!a)return;const h=window.getComputedStyle(t).getPropertyValue(a);if(h){const d=h.trim();return isNumericalString(d)?parseFloat(d):d}return isCSSVariableToken(c)?getVariableValue(c,t,e+1):c}function getValueTransition(l,t){return l?.[t]??l?.default??l}const positionalKeys=new Set(["width","height","top","left","right","bottom",...transformPropOrder]),auto={test:l=>l==="auto",parse:l=>l},testValueType=l=>t=>t.test(l),dimensionValueTypes=[number,px,percent,degrees,vw,vh,auto],findDimensionValueType=l=>dimensionValueTypes.find(testValueType(l));function isNone(l){return typeof l=="number"?l===0:l!==null?l==="none"||l==="0"||isZeroValueString(l):!0}const maxDefaults=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(l){const[t,e]=l.slice(0,-1).split("(");if(t==="drop-shadow")return l;const[a]=e.match(floatRegex)||[];if(!a)return l;const c=e.replace(a,"");let h=maxDefaults.has(t)?1:0;return a!==e&&(h*=100),t+"("+h+c+")"}const functionRegex=/\b([a-z-]*)\(.*?\)/gu,filter={...complex,getAnimatableNone:l=>{const t=l.match(functionRegex);return t?t.map(applyDefaultFilter).join(" "):l}},int={...number,transform:Math.round},transformValueTypes={rotate:degrees,rotateX:degrees,rotateY:degrees,rotateZ:degrees,scale,scaleX:scale,scaleY:scale,scaleZ:scale,skew:degrees,skewX:degrees,skewY:degrees,distance:px,translateX:px,translateY:px,translateZ:px,x:px,y:px,z:px,perspective:px,transformPerspective:px,opacity:alpha,originX:progressPercentage,originY:progressPercentage,originZ:px},numberValueTypes={borderWidth:px,borderTopWidth:px,borderRightWidth:px,borderBottomWidth:px,borderLeftWidth:px,borderRadius:px,radius:px,borderTopLeftRadius:px,borderTopRightRadius:px,borderBottomRightRadius:px,borderBottomLeftRadius:px,width:px,maxWidth:px,height:px,maxHeight:px,top:px,right:px,bottom:px,left:px,padding:px,paddingTop:px,paddingRight:px,paddingBottom:px,paddingLeft:px,margin:px,marginTop:px,marginRight:px,marginBottom:px,marginLeft:px,backgroundPositionX:px,backgroundPositionY:px,...transformValueTypes,zIndex:int,fillOpacity:alpha,strokeOpacity:alpha,numOctaves:int},defaultValueTypes={...numberValueTypes,color,backgroundColor:color,outlineColor:color,fill:color,stroke:color,borderColor:color,borderTopColor:color,borderRightColor:color,borderBottomColor:color,borderLeftColor:color,filter,WebkitFilter:filter},getDefaultValueType=l=>defaultValueTypes[l];function getAnimatableNone(l,t){let e=getDefaultValueType(l);return e!==filter&&(e=complex),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const invalidTemplates=new Set(["auto","none","0"]);function makeNoneKeyframesAnimatable(l,t,e){let a=0,c;for(;a<l.length&&!c;){const h=l[a];typeof h=="string"&&!invalidTemplates.has(h)&&analyseComplexValue(h).values.length&&(c=l[a]),a++}if(c&&e)for(const h of t)l[h]=getAnimatableNone(e,c)}class DOMKeyframesResolver extends KeyframeResolver{constructor(t,e,a,c,h){super(t,e,a,c,h,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:a}=this;if(!e||!e.current)return;super.readKeyframes();for(let m=0;m<t.length;m++){let g=t[m];if(typeof g=="string"&&(g=g.trim(),isCSSVariableToken(g))){const y=getVariableValue(g,e.current);y!==void 0&&(t[m]=y),m===t.length-1&&(this.finalKeyframe=g)}}if(this.resolveNoneKeyframes(),!positionalKeys.has(a)||t.length!==2)return;const[c,h]=t,d=findDimensionValueType(c),f=findDimensionValueType(h);if(d!==f)if(isNumOrPxType(d)&&isNumOrPxType(f))for(let m=0;m<t.length;m++){const g=t[m];typeof g=="string"&&(t[m]=parseFloat(g))}else positionalValues[a]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,a=[];for(let c=0;c<t.length;c++)(t[c]===null||isNone(t[c]))&&a.push(c);a.length&&makeNoneKeyframesAnimatable(t,a,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:a}=this;if(!t||!t.current)return;a==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=positionalValues[a](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const c=e[e.length-1];c!==void 0&&t.getValue(a,c).jump(c,!1)}measureEndState(){const{element:t,name:e,unresolvedKeyframes:a}=this;if(!t||!t.current)return;const c=t.getValue(e);c&&c.jump(this.measuredOrigin,!1);const h=a.length-1,d=a[h];a[h]=positionalValues[e](t.measureViewportBox(),window.getComputedStyle(t.current)),d!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=d),this.removedTransforms?.length&&this.removedTransforms.forEach(([f,m])=>{t.getValue(f).set(m)}),this.resolveNoneKeyframes()}}function resolveElements(l,t,e){if(l instanceof EventTarget)return[l];if(typeof l=="string"){const c=document.querySelectorAll(l);return c?Array.from(c):[]}return Array.from(l)}const getValueAsType=(l,t)=>t&&typeof l=="number"?t.transform(l):l;function isHTMLElement(l){return isObject(l)&&"offsetHeight"in l}const MAX_VELOCITY_DELTA=30,isFloat=l=>!isNaN(parseFloat(l)),collectMotionValues={current:void 0};class MotionValue{constructor(t,e={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=a=>{const c=time.now();if(this.updatedAt!==c&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(a),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const h of this.dependents)h.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=time.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=isFloat(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new SubscriptionManager);const a=this.events[t].add(e);return t==="change"?()=>{a(),frame.read(()=>{this.events.change.getSize()||this.stop()})}:a}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,e,a){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-a}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return collectMotionValues.current&&collectMotionValues.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const t=time.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>MAX_VELOCITY_DELTA)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,MAX_VELOCITY_DELTA);return velocityPerSecond(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function motionValue(l,t){return new MotionValue(l,t)}const{schedule:microtask}=createRenderBatcher(queueMicrotask,!1),isDragging={x:!1,y:!1};function isDragActive(){return isDragging.x||isDragging.y}function setDragLock(l){return l==="x"||l==="y"?isDragging[l]?null:(isDragging[l]=!0,()=>{isDragging[l]=!1}):isDragging.x||isDragging.y?null:(isDragging.x=isDragging.y=!0,()=>{isDragging.x=isDragging.y=!1})}function setupGesture(l,t){const e=resolveElements(l),a=new AbortController,c={passive:!0,...t,signal:a.signal};return[e,c,()=>a.abort()]}function isValidHover(l){return!(l.pointerType==="touch"||isDragActive())}function hover(l,t,e={}){const[a,c,h]=setupGesture(l,e),d=f=>{if(!isValidHover(f))return;const{target:m}=f,g=t(m,f);if(typeof g!="function"||!m)return;const y=w=>{isValidHover(w)&&(g(w),m.removeEventListener("pointerleave",y))};m.addEventListener("pointerleave",y,c)};return a.forEach(f=>{f.addEventListener("pointerenter",d,c)}),h}const isNodeOrChild=(l,t)=>t?l===t?!0:isNodeOrChild(l,t.parentElement):!1,isPrimaryPointer=l=>l.pointerType==="mouse"?typeof l.button!="number"||l.button<=0:l.isPrimary!==!1,focusableElements=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function isElementKeyboardAccessible(l){return focusableElements.has(l.tagName)||l.tabIndex!==-1}const isPressing=new WeakSet;function filterEvents(l){return t=>{t.key==="Enter"&&l(t)}}function firePointerEvent(l,t){l.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const enableKeyboardPress=(l,t)=>{const e=l.currentTarget;if(!e)return;const a=filterEvents(()=>{if(isPressing.has(e))return;firePointerEvent(e,"down");const c=filterEvents(()=>{firePointerEvent(e,"up")}),h=()=>firePointerEvent(e,"cancel");e.addEventListener("keyup",c,t),e.addEventListener("blur",h,t)});e.addEventListener("keydown",a,t),e.addEventListener("blur",()=>e.removeEventListener("keydown",a),t)};function isValidPressEvent(l){return isPrimaryPointer(l)&&!isDragActive()}function press(l,t,e={}){const[a,c,h]=setupGesture(l,e),d=f=>{const m=f.currentTarget;if(!isValidPressEvent(f))return;isPressing.add(m);const g=t(m,f),y=(S,C)=>{window.removeEventListener("pointerup",w),window.removeEventListener("pointercancel",E),isPressing.has(m)&&isPressing.delete(m),isValidPressEvent(S)&&typeof g=="function"&&g(S,{success:C})},w=S=>{y(S,m===window||m===document||e.useGlobalTarget||isNodeOrChild(m,S.target))},E=S=>{y(S,!1)};window.addEventListener("pointerup",w,c),window.addEventListener("pointercancel",E,c)};return a.forEach(f=>{(e.useGlobalTarget?window:f).addEventListener("pointerdown",d,c),isHTMLElement(f)&&(f.addEventListener("focus",g=>enableKeyboardPress(g,c)),!isElementKeyboardAccessible(f)&&!f.hasAttribute("tabindex")&&(f.tabIndex=0))}),h}function isSVGElement(l){return isObject(l)&&"ownerSVGElement"in l}const resizeHandlers=new WeakMap;let observer;const getSize=(l,t,e)=>(a,c)=>c&&c[0]?c[0][l+"Size"]:isSVGElement(a)&&"getBBox"in a?a.getBBox()[t]:a[e],getWidth=getSize("inline","width","offsetWidth"),getHeight=getSize("block","height","offsetHeight");function notifyTarget({target:l,borderBoxSize:t}){resizeHandlers.get(l)?.forEach(e=>{e(l,{get width(){return getWidth(l,t)},get height(){return getHeight(l,t)}})})}function notifyAll(l){l.forEach(notifyTarget)}function createResizeObserver(){typeof ResizeObserver>"u"||(observer=new ResizeObserver(notifyAll))}function resizeElement(l,t){observer||createResizeObserver();const e=resolveElements(l);return e.forEach(a=>{let c=resizeHandlers.get(a);c||(c=new Set,resizeHandlers.set(a,c)),c.add(t),observer?.observe(a)}),()=>{e.forEach(a=>{const c=resizeHandlers.get(a);c?.delete(t),c?.size||observer?.unobserve(a)})}}const windowCallbacks=new Set;let windowResizeHandler;function createWindowResizeHandler(){windowResizeHandler=()=>{const l={get width(){return window.innerWidth},get height(){return window.innerHeight}};windowCallbacks.forEach(t=>t(l))},window.addEventListener("resize",windowResizeHandler)}function resizeWindow(l){return windowCallbacks.add(l),windowResizeHandler||createWindowResizeHandler(),()=>{windowCallbacks.delete(l),!windowCallbacks.size&&typeof windowResizeHandler=="function"&&(window.removeEventListener("resize",windowResizeHandler),windowResizeHandler=void 0)}}function resize(l,t){return typeof l=="function"?resizeWindow(l):resizeElement(l,t)}function observeTimeline(l,t){let e;const a=()=>{const{currentTime:c}=t,d=(c===null?0:c.value)/100;e!==d&&l(d),e=d};return frame.preUpdate(a,!0),()=>cancelFrame(a)}function isSVGSVGElement(l){return isSVGElement(l)&&l.tagName==="svg"}function transform(...l){const t=!Array.isArray(l[0]),e=t?0:-1,a=l[0+e],c=l[1+e],h=l[2+e],d=l[3+e],f=interpolate(c,h,d);return t?f(a):f}const isMotionValue=l=>!!(l&&l.getVelocity),valueTypes=[...dimensionValueTypes,color,complex],findValueType=l=>valueTypes.find(testValueType(l)),MotionConfigContext=reactExports.createContext({transformPagePoint:l=>l,isStatic:!1,reducedMotion:"never"});class PopChildMeasure extends reactExports.Component{getSnapshotBeforeUpdate(t){const e=this.props.childRef.current;if(e&&t.isPresent&&!this.props.isPresent){const a=e.offsetParent,c=isHTMLElement(a)&&a.offsetWidth||0,h=this.props.sizeRef.current;h.height=e.offsetHeight||0,h.width=e.offsetWidth||0,h.top=e.offsetTop,h.left=e.offsetLeft,h.right=c-h.width-h.left}return null}componentDidUpdate(){}render(){return this.props.children}}function PopChild({children:l,isPresent:t,anchorX:e,root:a}){const c=reactExports.useId(),h=reactExports.useRef(null),d=reactExports.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:f}=reactExports.useContext(MotionConfigContext);return reactExports.useInsertionEffect(()=>{const{width:m,height:g,top:y,left:w,right:E}=d.current;if(t||!h.current||!m||!g)return;const S=e==="left"?`left: ${w}`:`right: ${E}`;h.current.dataset.motionPopId=c;const C=document.createElement("style");f&&(C.nonce=f);const T=a??document.head;return T.appendChild(C),C.sheet&&C.sheet.insertRule(`
          [data-motion-pop-id="${c}"] {
            position: absolute !important;
            width: ${m}px !important;
            height: ${g}px !important;
            ${S}px !important;
            top: ${y}px !important;
          }
        `),()=>{T.contains(C)&&T.removeChild(C)}},[t]),jsxRuntimeExports.jsx(PopChildMeasure,{isPresent:t,childRef:h,sizeRef:d,children:reactExports.cloneElement(l,{ref:h})})}const PresenceChild=({children:l,initial:t,isPresent:e,onExitComplete:a,custom:c,presenceAffectsLayout:h,mode:d,anchorX:f,root:m})=>{const g=useConstant(newChildrenMap),y=reactExports.useId();let w=!0,E=reactExports.useMemo(()=>(w=!1,{id:y,initial:t,isPresent:e,custom:c,onExitComplete:S=>{g.set(S,!0);for(const C of g.values())if(!C)return;a&&a()},register:S=>(g.set(S,!1),()=>g.delete(S))}),[e,g,a]);return h&&w&&(E={...E}),reactExports.useMemo(()=>{g.forEach((S,C)=>g.set(C,!1))},[e]),reactExports.useEffect(()=>{!e&&!g.size&&a&&a()},[e]),d==="popLayout"&&(l=jsxRuntimeExports.jsx(PopChild,{isPresent:e,anchorX:f,root:m,children:l})),jsxRuntimeExports.jsx(PresenceContext.Provider,{value:E,children:l})};function newChildrenMap(){return new Map}function usePresence(l=!0){const t=reactExports.useContext(PresenceContext);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:a,register:c}=t,h=reactExports.useId();reactExports.useEffect(()=>{if(l)return c(h)},[l]);const d=reactExports.useCallback(()=>l&&a&&a(h),[h,a,l]);return!e&&a?[!1,d]:[!0]}const getChildKey=l=>l.key||"";function onlyElements(l){const t=[];return reactExports.Children.forEach(l,e=>{reactExports.isValidElement(e)&&t.push(e)}),t}const AnimatePresence=({children:l,custom:t,initial:e=!0,onExitComplete:a,presenceAffectsLayout:c=!0,mode:h="sync",propagate:d=!1,anchorX:f="left",root:m})=>{const[g,y]=usePresence(d),w=reactExports.useMemo(()=>onlyElements(l),[l]),E=d&&!g?[]:w.map(getChildKey),S=reactExports.useRef(!0),C=reactExports.useRef(w),T=useConstant(()=>new Map),[k,D]=reactExports.useState(w),[N,L]=reactExports.useState(w);useIsomorphicLayoutEffect(()=>{S.current=!1,C.current=w;for(let $=0;$<N.length;$++){const G=getChildKey(N[$]);E.includes(G)?T.delete(G):T.get(G)!==!0&&T.set(G,!1)}},[N,E.length,E.join("-")]);const j=[];if(w!==k){let $=[...w];for(let G=0;G<N.length;G++){const nt=N[G],ot=getChildKey(nt);E.includes(ot)||($.splice(G,0,nt),j.push(nt))}return h==="wait"&&j.length&&($=j),L(onlyElements($)),D(w),null}const{forceRender:F}=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:N.map($=>{const G=getChildKey($),nt=d&&!g?!1:w===N||E.includes(G),ot=()=>{if(T.has(G))T.set(G,!0);else return;let ct=!0;T.forEach(ft=>{ft||(ct=!1)}),ct&&(F?.(),L(C.current),d&&y?.(),a&&a())};return jsxRuntimeExports.jsx(PresenceChild,{isPresent:nt,initial:!S.current||e?void 0:!1,custom:t,presenceAffectsLayout:c,mode:h,root:m,onExitComplete:nt?void 0:ot,anchorX:f,children:$},G)})})},LazyContext=reactExports.createContext({strict:!1}),featureProps={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},featureDefinitions={};for(const l in featureProps)featureDefinitions[l]={isEnabled:t=>featureProps[l].some(e=>!!t[e])};function loadFeatures(l){for(const t in l)featureDefinitions[t]={...featureDefinitions[t],...l[t]}}const validMotionProps=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function isValidMotionProp(l){return l.startsWith("while")||l.startsWith("drag")&&l!=="draggable"||l.startsWith("layout")||l.startsWith("onTap")||l.startsWith("onPan")||l.startsWith("onLayout")||validMotionProps.has(l)}let shouldForward=l=>!isValidMotionProp(l);function loadExternalIsValidProp(l){typeof l=="function"&&(shouldForward=t=>t.startsWith("on")?!isValidMotionProp(t):l(t))}try{loadExternalIsValidProp(require("@emotion/is-prop-valid").default)}catch{}function filterProps(l,t,e){const a={};for(const c in l)c==="values"&&typeof l.values=="object"||(shouldForward(c)||e===!0&&isValidMotionProp(c)||!t&&!isValidMotionProp(c)||l.draggable&&c.startsWith("onDrag"))&&(a[c]=l[c]);return a}const MotionContext=reactExports.createContext({});function isAnimationControls(l){return l!==null&&typeof l=="object"&&typeof l.start=="function"}function isVariantLabel(l){return typeof l=="string"||Array.isArray(l)}const variantPriorityOrder=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],variantProps=["initial",...variantPriorityOrder];function isControllingVariants(l){return isAnimationControls(l.animate)||variantProps.some(t=>isVariantLabel(l[t]))}function isVariantNode(l){return!!(isControllingVariants(l)||l.variants)}function getCurrentTreeVariants(l,t){if(isControllingVariants(l)){const{initial:e,animate:a}=l;return{initial:e===!1||isVariantLabel(e)?e:void 0,animate:isVariantLabel(a)?a:void 0}}return l.inherit!==!1?t:{}}function useCreateMotionContext(l){const{initial:t,animate:e}=getCurrentTreeVariants(l,reactExports.useContext(MotionContext));return reactExports.useMemo(()=>({initial:t,animate:e}),[variantLabelsAsDependency(t),variantLabelsAsDependency(e)])}function variantLabelsAsDependency(l){return Array.isArray(l)?l.join(" "):l}const scaleCorrectors={};function addScaleCorrector(l){for(const t in l)scaleCorrectors[t]=l[t],isCSSVariableName(t)&&(scaleCorrectors[t].isCSSVariable=!0)}function isForcedMotionValue(l,{layout:t,layoutId:e}){return transformProps.has(l)||l.startsWith("origin")||(t||e!==void 0)&&(!!scaleCorrectors[l]||l==="opacity")}const translateAlias={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},numTransforms=transformPropOrder.length;function buildTransform(l,t,e){let a="",c=!0;for(let h=0;h<numTransforms;h++){const d=transformPropOrder[h],f=l[d];if(f===void 0)continue;let m=!0;if(typeof f=="number"?m=f===(d.startsWith("scale")?1:0):m=parseFloat(f)===0,!m||e){const g=getValueAsType(f,numberValueTypes[d]);if(!m){c=!1;const y=translateAlias[d]||d;a+=`${y}(${g}) `}e&&(t[d]=g)}}return a=a.trim(),e?a=e(t,c?"":a):c&&(a="none"),a}function buildHTMLStyles(l,t,e){const{style:a,vars:c,transformOrigin:h}=l;let d=!1,f=!1;for(const m in t){const g=t[m];if(transformProps.has(m)){d=!0;continue}else if(isCSSVariableName(m)){c[m]=g;continue}else{const y=getValueAsType(g,numberValueTypes[m]);m.startsWith("origin")?(f=!0,h[m]=y):a[m]=y}}if(t.transform||(d||e?a.transform=buildTransform(t,l.transform,e):a.transform&&(a.transform="none")),f){const{originX:m="50%",originY:g="50%",originZ:y=0}=h;a.transformOrigin=`${m} ${g} ${y}`}}const createHtmlRenderState=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function copyRawValuesOnly(l,t,e){for(const a in t)!isMotionValue(t[a])&&!isForcedMotionValue(a,e)&&(l[a]=t[a])}function useInitialMotionValues({transformTemplate:l},t){return reactExports.useMemo(()=>{const e=createHtmlRenderState();return buildHTMLStyles(e,t,l),Object.assign({},e.vars,e.style)},[t])}function useStyle(l,t){const e=l.style||{},a={};return copyRawValuesOnly(a,e,l),Object.assign(a,useInitialMotionValues(l,t)),a}function useHTMLProps(l,t){const e={},a=useStyle(l,t);return l.drag&&l.dragListener!==!1&&(e.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=l.drag===!0?"none":`pan-${l.drag==="x"?"y":"x"}`),l.tabIndex===void 0&&(l.onTap||l.onTapStart||l.whileTap)&&(e.tabIndex=0),e.style=a,e}const dashKeys={offset:"stroke-dashoffset",array:"stroke-dasharray"},camelKeys={offset:"strokeDashoffset",array:"strokeDasharray"};function buildSVGPath(l,t,e=1,a=0,c=!0){l.pathLength=1;const h=c?dashKeys:camelKeys;l[h.offset]=px.transform(-a);const d=px.transform(t),f=px.transform(e);l[h.array]=`${d} ${f}`}function buildSVGAttrs(l,{attrX:t,attrY:e,attrScale:a,pathLength:c,pathSpacing:h=1,pathOffset:d=0,...f},m,g,y){if(buildHTMLStyles(l,f,g),m){l.style.viewBox&&(l.attrs.viewBox=l.style.viewBox);return}l.attrs=l.style,l.style={};const{attrs:w,style:E}=l;w.transform&&(E.transform=w.transform,delete w.transform),(E.transform||w.transformOrigin)&&(E.transformOrigin=w.transformOrigin??"50% 50%",delete w.transformOrigin),E.transform&&(E.transformBox=y?.transformBox??"fill-box",delete w.transformBox),t!==void 0&&(w.x=t),e!==void 0&&(w.y=e),a!==void 0&&(w.scale=a),c!==void 0&&buildSVGPath(w,c,h,d,!1)}const createSvgRenderState=()=>({...createHtmlRenderState(),attrs:{}}),isSVGTag=l=>typeof l=="string"&&l.toLowerCase()==="svg";function useSVGProps(l,t,e,a){const c=reactExports.useMemo(()=>{const h=createSvgRenderState();return buildSVGAttrs(h,t,isSVGTag(a),l.transformTemplate,l.style),{...h.attrs,style:{...h.style}}},[t]);if(l.style){const h={};copyRawValuesOnly(h,l.style,l),c.style={...h,...c.style}}return c}const lowercaseSVGElements=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function isSVGComponent(l){return typeof l!="string"||l.includes("-")?!1:!!(lowercaseSVGElements.indexOf(l)>-1||/[A-Z]/u.test(l))}function useRender(l,t,e,{latestValues:a},c,h=!1){const f=(isSVGComponent(l)?useSVGProps:useHTMLProps)(t,a,c,l),m=filterProps(t,typeof l=="string",h),g=l!==reactExports.Fragment?{...m,...f,ref:e}:{},{children:y}=t,w=reactExports.useMemo(()=>isMotionValue(y)?y.get():y,[y]);return reactExports.createElement(l,{...g,children:w})}function getValueState(l){const t=[{},{}];return l?.values.forEach((e,a)=>{t[0][a]=e.get(),t[1][a]=e.getVelocity()}),t}function resolveVariantFromProps(l,t,e,a){if(typeof t=="function"){const[c,h]=getValueState(a);t=t(e!==void 0?e:l.custom,c,h)}if(typeof t=="string"&&(t=l.variants&&l.variants[t]),typeof t=="function"){const[c,h]=getValueState(a);t=t(e!==void 0?e:l.custom,c,h)}return t}function resolveMotionValue(l){return isMotionValue(l)?l.get():l}function makeState({scrapeMotionValuesFromProps:l,createRenderState:t},e,a,c){return{latestValues:makeLatestValues(e,a,c,l),renderState:t()}}function makeLatestValues(l,t,e,a){const c={},h=a(l,{});for(const E in h)c[E]=resolveMotionValue(h[E]);let{initial:d,animate:f}=l;const m=isControllingVariants(l),g=isVariantNode(l);t&&g&&!m&&l.inherit!==!1&&(d===void 0&&(d=t.initial),f===void 0&&(f=t.animate));let y=e?e.initial===!1:!1;y=y||d===!1;const w=y?f:d;if(w&&typeof w!="boolean"&&!isAnimationControls(w)){const E=Array.isArray(w)?w:[w];for(let S=0;S<E.length;S++){const C=resolveVariantFromProps(l,E[S]);if(C){const{transitionEnd:T,transition:k,...D}=C;for(const N in D){let L=D[N];if(Array.isArray(L)){const j=y?L.length-1:0;L=L[j]}L!==null&&(c[N]=L)}for(const N in T)c[N]=T[N]}}}return c}const makeUseVisualState=l=>(t,e)=>{const a=reactExports.useContext(MotionContext),c=reactExports.useContext(PresenceContext),h=()=>makeState(l,t,a,c);return e?h():useConstant(h)};function scrapeMotionValuesFromProps$1(l,t,e){const{style:a}=l,c={};for(const h in a)(isMotionValue(a[h])||t.style&&isMotionValue(t.style[h])||isForcedMotionValue(h,l)||e?.getValue(h)?.liveStyle!==void 0)&&(c[h]=a[h]);return c}const useHTMLVisualState=makeUseVisualState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps$1,createRenderState:createHtmlRenderState});function scrapeMotionValuesFromProps(l,t,e){const a=scrapeMotionValuesFromProps$1(l,t,e);for(const c in l)if(isMotionValue(l[c])||isMotionValue(t[c])){const h=transformPropOrder.indexOf(c)!==-1?"attr"+c.charAt(0).toUpperCase()+c.substring(1):c;a[h]=l[c]}return a}const useSVGVisualState=makeUseVisualState({scrapeMotionValuesFromProps,createRenderState:createSvgRenderState}),motionComponentSymbol=Symbol.for("motionComponentSymbol");function isRefObject(l){return l&&typeof l=="object"&&Object.prototype.hasOwnProperty.call(l,"current")}function useMotionRef(l,t,e){return reactExports.useCallback(a=>{a&&l.onMount&&l.onMount(a),t&&(a?t.mount(a):t.unmount()),e&&(typeof e=="function"?e(a):isRefObject(e)&&(e.current=a))},[t])}const camelToDash=l=>l.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),optimizedAppearDataId="framerAppearId",optimizedAppearDataAttribute="data-"+camelToDash(optimizedAppearDataId),SwitchLayoutGroupContext=reactExports.createContext({});function useVisualElement(l,t,e,a,c){const{visualElement:h}=reactExports.useContext(MotionContext),d=reactExports.useContext(LazyContext),f=reactExports.useContext(PresenceContext),m=reactExports.useContext(MotionConfigContext).reducedMotion,g=reactExports.useRef(null);a=a||d.renderer,!g.current&&a&&(g.current=a(l,{visualState:t,parent:h,props:e,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:m}));const y=g.current,w=reactExports.useContext(SwitchLayoutGroupContext);y&&!y.projection&&c&&(y.type==="html"||y.type==="svg")&&createProjectionNode$1(g.current,e,c,w);const E=reactExports.useRef(!1);reactExports.useInsertionEffect(()=>{y&&E.current&&y.update(e,f)});const S=e[optimizedAppearDataAttribute],C=reactExports.useRef(!!S&&!window.MotionHandoffIsComplete?.(S)&&window.MotionHasOptimisedAnimation?.(S));return useIsomorphicLayoutEffect(()=>{y&&(E.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),y.scheduleRenderMicrotask(),C.current&&y.animationState&&y.animationState.animateChanges())}),reactExports.useEffect(()=>{y&&(!C.current&&y.animationState&&y.animationState.animateChanges(),C.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(S)}),C.current=!1),y.enteringChildren=void 0)}),y}function createProjectionNode$1(l,t,e,a){const{layoutId:c,layout:h,drag:d,dragConstraints:f,layoutScroll:m,layoutRoot:g,layoutCrossfade:y}=t;l.projection=new e(l.latestValues,t["data-framer-portal-id"]?void 0:getClosestProjectingNode(l.parent)),l.projection.setOptions({layoutId:c,layout:h,alwaysMeasureLayout:!!d||f&&isRefObject(f),visualElement:l,animationType:typeof h=="string"?h:"both",initialPromotionConfig:a,crossfade:y,layoutScroll:m,layoutRoot:g})}function getClosestProjectingNode(l){if(l)return l.options.allowProjection!==!1?l.projection:getClosestProjectingNode(l.parent)}function createMotionComponent(l,{forwardMotionProps:t=!1}={},e,a){e&&loadFeatures(e);const c=isSVGComponent(l)?useSVGVisualState:useHTMLVisualState;function h(f,m){let g;const y={...reactExports.useContext(MotionConfigContext),...f,layoutId:useLayoutId(f)},{isStatic:w}=y,E=useCreateMotionContext(f),S=c(f,w);if(!w&&isBrowser$1){useStrictMode();const C=getProjectionFunctionality(y);g=C.MeasureLayout,E.visualElement=useVisualElement(l,S,y,a,C.ProjectionNode)}return jsxRuntimeExports.jsxs(MotionContext.Provider,{value:E,children:[g&&E.visualElement?jsxRuntimeExports.jsx(g,{visualElement:E.visualElement,...y}):null,useRender(l,f,useMotionRef(S,E.visualElement,m),S,w,t)]})}h.displayName=`motion.${typeof l=="string"?l:`create(${l.displayName??l.name??""})`}`;const d=reactExports.forwardRef(h);return d[motionComponentSymbol]=l,d}function useLayoutId({layoutId:l}){const t=reactExports.useContext(LayoutGroupContext).id;return t&&l!==void 0?t+"-"+l:l}function useStrictMode(l,t){reactExports.useContext(LazyContext).strict}function getProjectionFunctionality(l){const{drag:t,layout:e}=featureDefinitions;if(!t&&!e)return{};const a={...t,...e};return{MeasureLayout:t?.isEnabled(l)||e?.isEnabled(l)?a.MeasureLayout:void 0,ProjectionNode:a.ProjectionNode}}function createMotionProxy(l,t){if(typeof Proxy>"u")return createMotionComponent;const e=new Map,a=(h,d)=>createMotionComponent(h,d,l,t),c=(h,d)=>a(h,d);return new Proxy(c,{get:(h,d)=>d==="create"?a:(e.has(d)||e.set(d,createMotionComponent(d,void 0,l,t)),e.get(d))})}function convertBoundingBoxToBox({top:l,left:t,right:e,bottom:a}){return{x:{min:t,max:e},y:{min:l,max:a}}}function convertBoxToBoundingBox({x:l,y:t}){return{top:t.min,right:l.max,bottom:t.max,left:l.min}}function transformBoxPoints(l,t){if(!t)return l;const e=t({x:l.left,y:l.top}),a=t({x:l.right,y:l.bottom});return{top:e.y,left:e.x,bottom:a.y,right:a.x}}function isIdentityScale(l){return l===void 0||l===1}function hasScale({scale:l,scaleX:t,scaleY:e}){return!isIdentityScale(l)||!isIdentityScale(t)||!isIdentityScale(e)}function hasTransform(l){return hasScale(l)||has2DTranslate(l)||l.z||l.rotate||l.rotateX||l.rotateY||l.skewX||l.skewY}function has2DTranslate(l){return is2DTranslate(l.x)||is2DTranslate(l.y)}function is2DTranslate(l){return l&&l!=="0%"}function scalePoint(l,t,e){const a=l-e,c=t*a;return e+c}function applyPointDelta(l,t,e,a,c){return c!==void 0&&(l=scalePoint(l,c,a)),scalePoint(l,e,a)+t}function applyAxisDelta(l,t=0,e=1,a,c){l.min=applyPointDelta(l.min,t,e,a,c),l.max=applyPointDelta(l.max,t,e,a,c)}function applyBoxDelta(l,{x:t,y:e}){applyAxisDelta(l.x,t.translate,t.scale,t.originPoint),applyAxisDelta(l.y,e.translate,e.scale,e.originPoint)}const TREE_SCALE_SNAP_MIN=.999999999999,TREE_SCALE_SNAP_MAX=1.0000000000001;function applyTreeDeltas(l,t,e,a=!1){const c=e.length;if(!c)return;t.x=t.y=1;let h,d;for(let f=0;f<c;f++){h=e[f],d=h.projectionDelta;const{visualElement:m}=h.options;m&&m.props.style&&m.props.style.display==="contents"||(a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&transformBox(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),d&&(t.x*=d.x.scale,t.y*=d.y.scale,applyBoxDelta(l,d)),a&&hasTransform(h.latestValues)&&transformBox(l,h.latestValues))}t.x<TREE_SCALE_SNAP_MAX&&t.x>TREE_SCALE_SNAP_MIN&&(t.x=1),t.y<TREE_SCALE_SNAP_MAX&&t.y>TREE_SCALE_SNAP_MIN&&(t.y=1)}function translateAxis(l,t){l.min=l.min+t,l.max=l.max+t}function transformAxis(l,t,e,a,c=.5){const h=mixNumber$1(l.min,l.max,c);applyAxisDelta(l,t,e,h,a)}function transformBox(l,t){transformAxis(l.x,t.x,t.scaleX,t.scale,t.originX),transformAxis(l.y,t.y,t.scaleY,t.scale,t.originY)}function measureViewportBox(l,t){return convertBoundingBoxToBox(transformBoxPoints(l.getBoundingClientRect(),t))}function measurePageBox(l,t,e){const a=measureViewportBox(l,e),{scroll:c}=t;return c&&(translateAxis(a.x,c.offset.x),translateAxis(a.y,c.offset.y)),a}const createAxisDelta=()=>({translate:0,scale:1,origin:0,originPoint:0}),createDelta=()=>({x:createAxisDelta(),y:createAxisDelta()}),createAxis=()=>({min:0,max:0}),createBox=()=>({x:createAxis(),y:createAxis()}),prefersReducedMotion={current:null},hasReducedMotionListener={current:!1};function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,!!isBrowser$1)if(window.matchMedia){const l=window.matchMedia("(prefers-reduced-motion)"),t=()=>prefersReducedMotion.current=l.matches;l.addEventListener("change",t),t()}else prefersReducedMotion.current=!1}const visualElementStore=new WeakMap;function updateMotionValuesFromProps(l,t,e){for(const a in t){const c=t[a],h=e[a];if(isMotionValue(c))l.addValue(a,c);else if(isMotionValue(h))l.addValue(a,motionValue(c,{owner:l}));else if(h!==c)if(l.hasValue(a)){const d=l.getValue(a);d.liveStyle===!0?d.jump(c):d.hasAnimated||d.set(c)}else{const d=l.getStaticValue(a);l.addValue(a,motionValue(d!==void 0?d:c,{owner:l}))}}for(const a in e)t[a]===void 0&&l.removeValue(a);return t}const propEventHandlers=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class VisualElement{scrapeMotionValuesFromProps(t,e,a){return{}}constructor({parent:t,props:e,presenceContext:a,reducedMotionConfig:c,blockInitialAnimation:h,visualState:d},f={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=KeyframeResolver,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const E=time.now();this.renderScheduledAt<E&&(this.renderScheduledAt=E,frame.render(this.render,!1,!0))};const{latestValues:m,renderState:g}=d;this.latestValues=m,this.baseTarget={...m},this.initialValues=e.initial?{...m}:{},this.renderState=g,this.parent=t,this.props=e,this.presenceContext=a,this.depth=t?t.depth+1:0,this.reducedMotionConfig=c,this.options=f,this.blockInitialAnimation=!!h,this.isControllingVariants=isControllingVariants(e),this.isVariantNode=isVariantNode(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:y,...w}=this.scrapeMotionValuesFromProps(e,{},this);for(const E in w){const S=w[E];m[E]!==void 0&&isMotionValue(S)&&S.set(m[E])}}mount(t){this.current=t,visualElementStore.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,a)=>this.bindToMotionValue(a,e)),hasReducedMotionListener.current||initPrefersReducedMotion(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:prefersReducedMotion.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),cancelFrame(this.notifyUpdate),cancelFrame(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,e){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const a=transformProps.has(t);a&&this.onBindTransform&&this.onBindTransform();const c=e.on("change",d=>{this.latestValues[t]=d,this.props.onUpdate&&frame.preRender(this.notifyUpdate),a&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let h;window.MotionCheckAppearSync&&(h=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{c(),h&&h(),e.owner&&e.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in featureDefinitions){const e=featureDefinitions[t];if(!e)continue;const{isEnabled:a,Feature:c}=e;if(!this.features[t]&&c&&a(this.props)&&(this.features[t]=new c(this)),this.features[t]){const h=this.features[t];h.isMounted?h.update():(h.mount(),h.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):createBox()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let a=0;a<propEventHandlers.length;a++){const c=propEventHandlers[a];this.propEventSubscriptions[c]&&(this.propEventSubscriptions[c](),delete this.propEventSubscriptions[c]);const h="on"+c,d=t[h];d&&(this.propEventSubscriptions[c]=this.on(c,d))}this.prevMotionValues=updateMotionValuesFromProps(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const a=this.values.get(t);e!==a&&(a&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let a=this.values.get(t);return a===void 0&&e!==void 0&&(a=motionValue(e===null?void 0:e,{owner:this}),this.addValue(t,a)),a}readValue(t,e){let a=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return a!=null&&(typeof a=="string"&&(isNumericalString(a)||isZeroValueString(a))?a=parseFloat(a):!findValueType(a)&&complex.test(e)&&(a=getAnimatableNone(t,e)),this.setBaseTarget(t,isMotionValue(a)?a.get():a)),isMotionValue(a)?a.get():a}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){const{initial:e}=this.props;let a;if(typeof e=="string"||typeof e=="object"){const h=resolveVariantFromProps(this.props,e,this.presenceContext?.custom);h&&(a=h[t])}if(e&&a!==void 0)return a;const c=this.getBaseTargetFromProps(this.props,t);return c!==void 0&&!isMotionValue(c)?c:this.initialValues[t]!==void 0&&a===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new SubscriptionManager),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}scheduleRenderMicrotask(){microtask.render(this.render)}}class DOMVisualElement extends VisualElement{constructor(){super(...arguments),this.KeyframeResolver=DOMKeyframesResolver}sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:a}){delete e[t],delete a[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;isMotionValue(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function renderHTML(l,{style:t,vars:e},a,c){const h=l.style;let d;for(d in t)h[d]=t[d];c?.applyProjectionStyles(h,a);for(d in e)h.setProperty(d,e[d])}function getComputedStyle$1(l){return window.getComputedStyle(l)}class HTMLVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="html",this.renderInstance=renderHTML}readValueFromInstance(t,e){if(transformProps.has(e))return this.projection?.isProjecting?defaultTransformValue(e):readTransformValue(t,e);{const a=getComputedStyle$1(t),c=(isCSSVariableName(e)?a.getPropertyValue(e):a[e])||0;return typeof c=="string"?c.trim():c}}measureInstanceViewportBox(t,{transformPagePoint:e}){return measureViewportBox(t,e)}build(t,e,a){buildHTMLStyles(t,e,a.transformTemplate)}scrapeMotionValuesFromProps(t,e,a){return scrapeMotionValuesFromProps$1(t,e,a)}}const camelCaseAttributes=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function renderSVG(l,t,e,a){renderHTML(l,t,void 0,a);for(const c in t.attrs)l.setAttribute(camelCaseAttributes.has(c)?c:camelToDash(c),t.attrs[c])}class SVGVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=createBox}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(transformProps.has(e)){const a=getDefaultValueType(e);return a&&a.default||0}return e=camelCaseAttributes.has(e)?e:camelToDash(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,a){return scrapeMotionValuesFromProps(t,e,a)}build(t,e,a){buildSVGAttrs(t,e,this.isSVGTag,a.transformTemplate,a.style)}renderInstance(t,e,a,c){renderSVG(t,e,a,c)}mount(t){this.isSVGTag=isSVGTag(t.tagName),super.mount(t)}}const createDomVisualElement=(l,t)=>isSVGComponent(l)?new SVGVisualElement(t):new HTMLVisualElement(t,{allowProjection:l!==reactExports.Fragment});function resolveVariant(l,t,e){const a=l.getProps();return resolveVariantFromProps(a,t,e!==void 0?e:a.custom,l)}const isKeyframesTarget=l=>Array.isArray(l);function setMotionValue(l,t,e){l.hasValue(t)?l.getValue(t).set(e):l.addValue(t,motionValue(e))}function resolveFinalValueInKeyframes(l){return isKeyframesTarget(l)?l[l.length-1]||0:l}function setTarget(l,t){const e=resolveVariant(l,t);let{transitionEnd:a={},transition:c={},...h}=e||{};h={...h,...a};for(const d in h){const f=resolveFinalValueInKeyframes(h[d]);setMotionValue(l,d,f)}}function isWillChangeMotionValue(l){return!!(isMotionValue(l)&&l.add)}function addValueToWillChange(l,t){const e=l.getValue("willChange");if(isWillChangeMotionValue(e))return e.add(t);if(!e&&MotionGlobalConfig.WillChange){const a=new MotionGlobalConfig.WillChange("auto");l.addValue("willChange",a),a.add(t)}}function getOptimisedAppearId(l){return l.props[optimizedAppearDataAttribute]}const isNotNull=l=>l!==null;function getFinalKeyframe(l,{repeat:t,repeatType:e="loop"},a){const c=l.filter(isNotNull),h=t&&e!=="loop"&&t%2===1?0:c.length-1;return c[h]}const underDampedSpring={type:"spring",stiffness:500,damping:25,restSpeed:10},criticallyDampedSpring=l=>({type:"spring",stiffness:550,damping:l===0?2*Math.sqrt(550):30,restSpeed:10}),keyframesTransition={type:"keyframes",duration:.8},ease={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},getDefaultTransition=(l,{keyframes:t})=>t.length>2?keyframesTransition:transformProps.has(l)?l.startsWith("scale")?criticallyDampedSpring(t[1]):underDampedSpring:ease;function isTransitionDefined({when:l,delay:t,delayChildren:e,staggerChildren:a,staggerDirection:c,repeat:h,repeatType:d,repeatDelay:f,from:m,elapsed:g,...y}){return!!Object.keys(y).length}const animateMotionValue=(l,t,e,a={},c,h)=>d=>{const f=getValueTransition(a,l)||{},m=f.delay||a.delay||0;let{elapsed:g=0}=a;g=g-secondsToMilliseconds(m);const y={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:t.getVelocity(),...f,delay:-g,onUpdate:E=>{t.set(E),f.onUpdate&&f.onUpdate(E)},onComplete:()=>{d(),f.onComplete&&f.onComplete()},name:l,motionValue:t,element:h?void 0:c};isTransitionDefined(f)||Object.assign(y,getDefaultTransition(l,y)),y.duration&&(y.duration=secondsToMilliseconds(y.duration)),y.repeatDelay&&(y.repeatDelay=secondsToMilliseconds(y.repeatDelay)),y.from!==void 0&&(y.keyframes[0]=y.from);let w=!1;if((y.type===!1||y.duration===0&&!y.repeatDelay)&&(makeAnimationInstant(y),y.delay===0&&(w=!0)),(MotionGlobalConfig.instantAnimations||MotionGlobalConfig.skipAnimations)&&(w=!0,makeAnimationInstant(y),y.delay=0),y.allowFlatten=!f.type&&!f.ease,w&&!h&&t.get()!==void 0){const E=getFinalKeyframe(y.keyframes,f);if(E!==void 0){frame.update(()=>{y.onUpdate(E),y.onComplete()});return}}return f.isSync?new JSAnimation(y):new AsyncMotionValueAnimation(y)};function shouldBlockAnimation({protectedKeys:l,needsAnimating:t},e){const a=l.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,a}function animateTarget(l,t,{delay:e=0,transitionOverride:a,type:c}={}){let{transition:h=l.getDefaultTransition(),transitionEnd:d,...f}=t;a&&(h=a);const m=[],g=c&&l.animationState&&l.animationState.getState()[c];for(const y in f){const w=l.getValue(y,l.latestValues[y]??null),E=f[y];if(E===void 0||g&&shouldBlockAnimation(g,y))continue;const S={delay:e,...getValueTransition(h||{},y)},C=w.get();if(C!==void 0&&!w.isAnimating&&!Array.isArray(E)&&E===C&&!S.velocity)continue;let T=!1;if(window.MotionHandoffAnimation){const D=getOptimisedAppearId(l);if(D){const N=window.MotionHandoffAnimation(D,y,frame);N!==null&&(S.startTime=N,T=!0)}}addValueToWillChange(l,y),w.start(animateMotionValue(y,w,E,l.shouldReduceMotion&&positionalKeys.has(y)?{type:!1}:S,l,T));const k=w.animation;k&&m.push(k)}return d&&Promise.all(m).then(()=>{frame.update(()=>{d&&setTarget(l,d)})}),m}function calcChildStagger(l,t,e,a=0,c=1){const h=Array.from(l).sort((g,y)=>g.sortNodePosition(y)).indexOf(t),d=l.size,f=(d-1)*a;return typeof e=="function"?e(h,d):c===1?h*a:f-h*a}function animateVariant(l,t,e={}){const a=resolveVariant(l,t,e.type==="exit"?l.presenceContext?.custom:void 0);let{transition:c=l.getDefaultTransition()||{}}=a||{};e.transitionOverride&&(c=e.transitionOverride);const h=a?()=>Promise.all(animateTarget(l,a,e)):()=>Promise.resolve(),d=l.variantChildren&&l.variantChildren.size?(m=0)=>{const{delayChildren:g=0,staggerChildren:y,staggerDirection:w}=c;return animateChildren(l,t,m,g,y,w,e)}:()=>Promise.resolve(),{when:f}=c;if(f){const[m,g]=f==="beforeChildren"?[h,d]:[d,h];return m().then(()=>g())}else return Promise.all([h(),d(e.delay)])}function animateChildren(l,t,e=0,a=0,c=0,h=1,d){const f=[];for(const m of l.variantChildren)m.notify("AnimationStart",t),f.push(animateVariant(m,t,{...d,delay:e+(typeof a=="function"?0:a)+calcChildStagger(l.variantChildren,m,a,c,h)}).then(()=>m.notify("AnimationComplete",t)));return Promise.all(f)}function animateVisualElement(l,t,e={}){l.notify("AnimationStart",t);let a;if(Array.isArray(t)){const c=t.map(h=>animateVariant(l,h,e));a=Promise.all(c)}else if(typeof t=="string")a=animateVariant(l,t,e);else{const c=typeof t=="function"?resolveVariant(l,t,e.custom):t;a=Promise.all(animateTarget(l,c,e))}return a.then(()=>{l.notify("AnimationComplete",t)})}function shallowCompare(l,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==l.length)return!1;for(let a=0;a<e;a++)if(t[a]!==l[a])return!1;return!0}const numVariantProps=variantProps.length;function getVariantContext(l){if(!l)return;if(!l.isControllingVariants){const e=l.parent?getVariantContext(l.parent)||{}:{};return l.props.initial!==void 0&&(e.initial=l.props.initial),e}const t={};for(let e=0;e<numVariantProps;e++){const a=variantProps[e],c=l.props[a];(isVariantLabel(c)||c===!1)&&(t[a]=c)}return t}const reversePriorityOrder=[...variantPriorityOrder].reverse(),numAnimationTypes=variantPriorityOrder.length;function animateList(l){return t=>Promise.all(t.map(({animation:e,options:a})=>animateVisualElement(l,e,a)))}function createAnimationState(l){let t=animateList(l),e=createState(),a=!0;const c=m=>(g,y)=>{const w=resolveVariant(l,y,m==="exit"?l.presenceContext?.custom:void 0);if(w){const{transition:E,transitionEnd:S,...C}=w;g={...g,...C,...S}}return g};function h(m){t=m(l)}function d(m){const{props:g}=l,y=getVariantContext(l.parent)||{},w=[],E=new Set;let S={},C=1/0;for(let k=0;k<numAnimationTypes;k++){const D=reversePriorityOrder[k],N=e[D],L=g[D]!==void 0?g[D]:y[D],j=isVariantLabel(L),F=D===m?N.isActive:null;F===!1&&(C=k);let $=L===y[D]&&L!==g[D]&&j;if($&&a&&l.manuallyAnimateOnMount&&($=!1),N.protectedKeys={...S},!N.isActive&&F===null||!L&&!N.prevProp||isAnimationControls(L)||typeof L=="boolean")continue;const G=checkVariantsDidChange(N.prevProp,L);let nt=G||D===m&&N.isActive&&!$&&j||k>C&&j,ot=!1;const ct=Array.isArray(L)?L:[L];let ft=ct.reduce(c(D),{});F===!1&&(ft={});const{prevResolvedValues:Tt={}}=N,At={...Tt,...ft},gt=z=>{nt=!0,E.has(z)&&(ot=!0,E.delete(z)),N.needsAnimating[z]=!0;const J=l.getValue(z);J&&(J.liveStyle=!1)};for(const z in At){const J=ft[z],lt=Tt[z];if(S.hasOwnProperty(z))continue;let at=!1;isKeyframesTarget(J)&&isKeyframesTarget(lt)?at=!shallowCompare(J,lt):at=J!==lt,at?J!=null?gt(z):E.add(z):J!==void 0&&E.has(z)?gt(z):N.protectedKeys[z]=!0}N.prevProp=L,N.prevResolvedValues=ft,N.isActive&&(S={...S,...ft}),a&&l.blockInitialAnimation&&(nt=!1);const Mt=$&&G;nt&&(!Mt||ot)&&w.push(...ct.map(z=>{const J={type:D};if(typeof z=="string"&&a&&!Mt&&l.manuallyAnimateOnMount&&l.parent){const{parent:lt}=l,at=resolveVariant(lt,z);if(lt.enteringChildren&&at){const{delayChildren:B}=at.transition||{};J.delay=calcChildStagger(lt.enteringChildren,l,B)}}return{animation:z,options:J}}))}if(E.size){const k={};if(typeof g.initial!="boolean"){const D=resolveVariant(l,Array.isArray(g.initial)?g.initial[0]:g.initial);D&&D.transition&&(k.transition=D.transition)}E.forEach(D=>{const N=l.getBaseTarget(D),L=l.getValue(D);L&&(L.liveStyle=!0),k[D]=N??null}),w.push({animation:k})}let T=!!w.length;return a&&(g.initial===!1||g.initial===g.animate)&&!l.manuallyAnimateOnMount&&(T=!1),a=!1,T?t(w):Promise.resolve()}function f(m,g){if(e[m].isActive===g)return Promise.resolve();l.variantChildren?.forEach(w=>w.animationState?.setActive(m,g)),e[m].isActive=g;const y=d(m);for(const w in e)e[w].protectedKeys={};return y}return{animateChanges:d,setActive:f,setAnimateFunction:h,getState:()=>e,reset:()=>{e=createState(),a=!0}}}function checkVariantsDidChange(l,t){return typeof t=="string"?t!==l:Array.isArray(t)?!shallowCompare(t,l):!1}function createTypeState(l=!1){return{isActive:l,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}class Feature{constructor(t){this.isMounted=!1,this.node=t}update(){}}class AnimationFeature extends Feature{constructor(t){super(t),t.animationState||(t.animationState=createAnimationState(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();isAnimationControls(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let id$1=0;class ExitAnimationFeature extends Feature{constructor(){super(...arguments),this.id=id$1++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===a)return;const c=this.node.animationState.setActive("exit",!t);e&&!t&&c.then(()=>{e(this.id)})}mount(){const{register:t,onExitComplete:e}=this.node.presenceContext||{};e&&e(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const animations={animation:{Feature:AnimationFeature},exit:{Feature:ExitAnimationFeature}};function addDomEvent(l,t,e,a={passive:!0}){return l.addEventListener(t,e,a),()=>l.removeEventListener(t,e)}function extractEventInfo(l){return{point:{x:l.pageX,y:l.pageY}}}const addPointerInfo=l=>t=>isPrimaryPointer(t)&&l(t,extractEventInfo(t));function addPointerEvent(l,t,e,a){return addDomEvent(l,t,addPointerInfo(e),a)}const SCALE_PRECISION=1e-4,SCALE_MIN=1-SCALE_PRECISION,SCALE_MAX=1+SCALE_PRECISION,TRANSLATE_PRECISION=.01,TRANSLATE_MIN=0-TRANSLATE_PRECISION,TRANSLATE_MAX=0+TRANSLATE_PRECISION;function calcLength(l){return l.max-l.min}function isNear(l,t,e){return Math.abs(l-t)<=e}function calcAxisDelta(l,t,e,a=.5){l.origin=a,l.originPoint=mixNumber$1(t.min,t.max,l.origin),l.scale=calcLength(e)/calcLength(t),l.translate=mixNumber$1(e.min,e.max,l.origin)-l.originPoint,(l.scale>=SCALE_MIN&&l.scale<=SCALE_MAX||isNaN(l.scale))&&(l.scale=1),(l.translate>=TRANSLATE_MIN&&l.translate<=TRANSLATE_MAX||isNaN(l.translate))&&(l.translate=0)}function calcBoxDelta(l,t,e,a){calcAxisDelta(l.x,t.x,e.x,a?a.originX:void 0),calcAxisDelta(l.y,t.y,e.y,a?a.originY:void 0)}function calcRelativeAxis(l,t,e){l.min=e.min+t.min,l.max=l.min+calcLength(t)}function calcRelativeBox(l,t,e){calcRelativeAxis(l.x,t.x,e.x),calcRelativeAxis(l.y,t.y,e.y)}function calcRelativeAxisPosition(l,t,e){l.min=t.min-e.min,l.max=l.min+calcLength(t)}function calcRelativePosition(l,t,e){calcRelativeAxisPosition(l.x,t.x,e.x),calcRelativeAxisPosition(l.y,t.y,e.y)}function eachAxis(l){return[l("x"),l("y")]}const getContextWindow=({current:l})=>l?l.ownerDocument.defaultView:null,distance=(l,t)=>Math.abs(l-t);function distance2D(l,t){const e=distance(l.x,t.x),a=distance(l.y,t.y);return Math.sqrt(e**2+a**2)}class PanSession{constructor(t,e,{transformPagePoint:a,contextWindow:c=window,dragSnapToOrigin:h=!1,distanceThreshold:d=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=getPanInfo(this.lastMoveEventInfo,this.history),S=this.startEvent!==null,C=distance2D(E.offset,{x:0,y:0})>=this.distanceThreshold;if(!S&&!C)return;const{point:T}=E,{timestamp:k}=frameData;this.history.push({...T,timestamp:k});const{onStart:D,onMove:N}=this.handlers;S||(D&&D(this.lastMoveEvent,E),this.startEvent=this.lastMoveEvent),N&&N(this.lastMoveEvent,E)},this.handlePointerMove=(E,S)=>{this.lastMoveEvent=E,this.lastMoveEventInfo=transformPoint(S,this.transformPagePoint),frame.update(this.updatePoint,!0)},this.handlePointerUp=(E,S)=>{this.end();const{onEnd:C,onSessionEnd:T,resumeAnimation:k}=this.handlers;if(this.dragSnapToOrigin&&k&&k(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const D=getPanInfo(E.type==="pointercancel"?this.lastMoveEventInfo:transformPoint(S,this.transformPagePoint),this.history);this.startEvent&&C&&C(E,D),T&&T(E,D)},!isPrimaryPointer(t))return;this.dragSnapToOrigin=h,this.handlers=e,this.transformPagePoint=a,this.distanceThreshold=d,this.contextWindow=c||window;const f=extractEventInfo(t),m=transformPoint(f,this.transformPagePoint),{point:g}=m,{timestamp:y}=frameData;this.history=[{...g,timestamp:y}];const{onSessionStart:w}=e;w&&w(t,getPanInfo(m,this.history)),this.removeListeners=pipe(addPointerEvent(this.contextWindow,"pointermove",this.handlePointerMove),addPointerEvent(this.contextWindow,"pointerup",this.handlePointerUp),addPointerEvent(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),cancelFrame(this.updatePoint)}}function transformPoint(l,t){return t?{point:t(l.point)}:l}function subtractPoint(l,t){return{x:l.x-t.x,y:l.y-t.y}}function getPanInfo({point:l},t){return{point:l,delta:subtractPoint(l,lastDevicePoint(t)),offset:subtractPoint(l,startDevicePoint(t)),velocity:getVelocity(t,.1)}}function startDevicePoint(l){return l[0]}function lastDevicePoint(l){return l[l.length-1]}function getVelocity(l,t){if(l.length<2)return{x:0,y:0};let e=l.length-1,a=null;const c=lastDevicePoint(l);for(;e>=0&&(a=l[e],!(c.timestamp-a.timestamp>secondsToMilliseconds(t)));)e--;if(!a)return{x:0,y:0};const h=millisecondsToSeconds(c.timestamp-a.timestamp);if(h===0)return{x:0,y:0};const d={x:(c.x-a.x)/h,y:(c.y-a.y)/h};return d.x===1/0&&(d.x=0),d.y===1/0&&(d.y=0),d}function applyConstraints(l,{min:t,max:e},a){return t!==void 0&&l<t?l=a?mixNumber$1(t,l,a.min):Math.max(l,t):e!==void 0&&l>e&&(l=a?mixNumber$1(e,l,a.max):Math.min(l,e)),l}function calcRelativeAxisConstraints(l,t,e){return{min:t!==void 0?l.min+t:void 0,max:e!==void 0?l.max+e-(l.max-l.min):void 0}}function calcRelativeConstraints(l,{top:t,left:e,bottom:a,right:c}){return{x:calcRelativeAxisConstraints(l.x,e,c),y:calcRelativeAxisConstraints(l.y,t,a)}}function calcViewportAxisConstraints(l,t){let e=t.min-l.min,a=t.max-l.max;return t.max-t.min<l.max-l.min&&([e,a]=[a,e]),{min:e,max:a}}function calcViewportConstraints(l,t){return{x:calcViewportAxisConstraints(l.x,t.x),y:calcViewportAxisConstraints(l.y,t.y)}}function calcOrigin(l,t){let e=.5;const a=calcLength(l),c=calcLength(t);return c>a?e=progress(t.min,t.max-a,l.min):a>c&&(e=progress(l.min,l.max-c,t.min)),clamp(0,1,e)}function rebaseAxisConstraints(l,t){const e={};return t.min!==void 0&&(e.min=t.min-l.min),t.max!==void 0&&(e.max=t.max-l.min),e}const defaultElastic=.35;function resolveDragElastic(l=defaultElastic){return l===!1?l=0:l===!0&&(l=defaultElastic),{x:resolveAxisElastic(l,"left","right"),y:resolveAxisElastic(l,"top","bottom")}}function resolveAxisElastic(l,t,e){return{min:resolvePointElastic(l,t),max:resolvePointElastic(l,e)}}function resolvePointElastic(l,t){return typeof l=="number"?l:l[t]||0}const elementDragControls=new WeakMap;class VisualElementDragControls{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=createBox(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:e=!1,distanceThreshold:a}={}){const{presenceContext:c}=this.visualElement;if(c&&c.isPresent===!1)return;const h=w=>{const{dragSnapToOrigin:E}=this.getProps();E?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(extractEventInfo(w).point)},d=(w,E)=>{const{drag:S,dragPropagation:C,onDragStart:T}=this.getProps();if(S&&!C&&(this.openDragLock&&this.openDragLock(),this.openDragLock=setDragLock(S),!this.openDragLock))return;this.latestPointerEvent=w,this.latestPanInfo=E,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),eachAxis(D=>{let N=this.getAxisMotionValue(D).get()||0;if(percent.test(N)){const{projection:L}=this.visualElement;if(L&&L.layout){const j=L.layout.layoutBox[D];j&&(N=calcLength(j)*(parseFloat(N)/100))}}this.originPoint[D]=N}),T&&frame.postRender(()=>T(w,E)),addValueToWillChange(this.visualElement,"transform");const{animationState:k}=this.visualElement;k&&k.setActive("whileDrag",!0)},f=(w,E)=>{this.latestPointerEvent=w,this.latestPanInfo=E;const{dragPropagation:S,dragDirectionLock:C,onDirectionLock:T,onDrag:k}=this.getProps();if(!S&&!this.openDragLock)return;const{offset:D}=E;if(C&&this.currentDirection===null){this.currentDirection=getCurrentDirection(D),this.currentDirection!==null&&T&&T(this.currentDirection);return}this.updateAxis("x",E.point,D),this.updateAxis("y",E.point,D),this.visualElement.render(),k&&k(w,E)},m=(w,E)=>{this.latestPointerEvent=w,this.latestPanInfo=E,this.stop(w,E),this.latestPointerEvent=null,this.latestPanInfo=null},g=()=>eachAxis(w=>this.getAnimationState(w)==="paused"&&this.getAxisMotionValue(w).animation?.play()),{dragSnapToOrigin:y}=this.getProps();this.panSession=new PanSession(t,{onSessionStart:h,onStart:d,onMove:f,onSessionEnd:m,resumeAnimation:g},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:y,distanceThreshold:a,contextWindow:getContextWindow(this.visualElement)})}stop(t,e){const a=t||this.latestPointerEvent,c=e||this.latestPanInfo,h=this.isDragging;if(this.cancel(),!h||!c||!a)return;const{velocity:d}=c;this.startAnimation(d);const{onDragEnd:f}=this.getProps();f&&frame.postRender(()=>f(a,c))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:a}=this.getProps();!a&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,a){const{drag:c}=this.getProps();if(!a||!shouldDrag(t,c,this.currentDirection))return;const h=this.getAxisMotionValue(t);let d=this.originPoint[t]+a[t];this.constraints&&this.constraints[t]&&(d=applyConstraints(d,this.constraints[t],this.elastic[t])),h.set(d)}resolveConstraints(){const{dragConstraints:t,dragElastic:e}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,c=this.constraints;t&&isRefObject(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&a?this.constraints=calcRelativeConstraints(a.layoutBox,t):this.constraints=!1,this.elastic=resolveDragElastic(e),c!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&eachAxis(h=>{this.constraints!==!1&&this.getAxisMotionValue(h)&&(this.constraints[h]=rebaseAxisConstraints(a.layoutBox[h],this.constraints[h]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!isRefObject(t))return!1;const a=t.current,{projection:c}=this.visualElement;if(!c||!c.layout)return!1;const h=measurePageBox(a,c.root,this.visualElement.getTransformPagePoint());let d=calcViewportConstraints(c.layout.layoutBox,h);if(e){const f=e(convertBoxToBoundingBox(d));this.hasMutatedConstraints=!!f,f&&(d=convertBoundingBoxToBox(f))}return d}startAnimation(t){const{drag:e,dragMomentum:a,dragElastic:c,dragTransition:h,dragSnapToOrigin:d,onDragTransitionEnd:f}=this.getProps(),m=this.constraints||{},g=eachAxis(y=>{if(!shouldDrag(y,e,this.currentDirection))return;let w=m&&m[y]||{};d&&(w={min:0,max:0});const E=c?200:1e6,S=c?40:1e7,C={type:"inertia",velocity:a?t[y]:0,bounceStiffness:E,bounceDamping:S,timeConstant:750,restDelta:1,restSpeed:10,...h,...w};return this.startAxisValueAnimation(y,C)});return Promise.all(g).then(f)}startAxisValueAnimation(t,e){const a=this.getAxisMotionValue(t);return addValueToWillChange(this.visualElement,t),a.start(animateMotionValue(t,a,0,e,this.visualElement,!1))}stopAnimation(){eachAxis(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){eachAxis(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,a=this.visualElement.getProps(),c=a[e];return c||this.visualElement.getValue(t,(a.initial?a.initial[t]:void 0)||0)}snapToCursor(t){eachAxis(e=>{const{drag:a}=this.getProps();if(!shouldDrag(e,a,this.currentDirection))return;const{projection:c}=this.visualElement,h=this.getAxisMotionValue(e);if(c&&c.layout){const{min:d,max:f}=c.layout.layoutBox[e];h.set(t[e]-mixNumber$1(d,f,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:a}=this.visualElement;if(!isRefObject(e)||!a||!this.constraints)return;this.stopAnimation();const c={x:0,y:0};eachAxis(d=>{const f=this.getAxisMotionValue(d);if(f&&this.constraints!==!1){const m=f.get();c[d]=calcOrigin({min:m,max:m},this.constraints[d])}});const{transformTemplate:h}=this.visualElement.getProps();this.visualElement.current.style.transform=h?h({},""):"none",a.root&&a.root.updateScroll(),a.updateLayout(),this.resolveConstraints(),eachAxis(d=>{if(!shouldDrag(d,t,null))return;const f=this.getAxisMotionValue(d),{min:m,max:g}=this.constraints[d];f.set(mixNumber$1(m,g,c[d]))})}addListeners(){if(!this.visualElement.current)return;elementDragControls.set(this.visualElement,this);const t=this.visualElement.current,e=addPointerEvent(t,"pointerdown",m=>{const{drag:g,dragListener:y=!0}=this.getProps();g&&y&&this.start(m)}),a=()=>{const{dragConstraints:m}=this.getProps();isRefObject(m)&&m.current&&(this.constraints=this.resolveRefConstraints())},{projection:c}=this.visualElement,h=c.addEventListener("measure",a);c&&!c.layout&&(c.root&&c.root.updateScroll(),c.updateLayout()),frame.read(a);const d=addDomEvent(window,"resize",()=>this.scalePositionWithinConstraints()),f=c.addEventListener("didUpdate",(({delta:m,hasLayoutChanged:g})=>{this.isDragging&&g&&(eachAxis(y=>{const w=this.getAxisMotionValue(y);w&&(this.originPoint[y]+=m[y].translate,w.set(w.get()+m[y].translate))}),this.visualElement.render())}));return()=>{d(),e(),h(),f&&f()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:a=!1,dragPropagation:c=!1,dragConstraints:h=!1,dragElastic:d=defaultElastic,dragMomentum:f=!0}=t;return{...t,drag:e,dragDirectionLock:a,dragPropagation:c,dragConstraints:h,dragElastic:d,dragMomentum:f}}}function shouldDrag(l,t,e){return(t===!0||t===l)&&(e===null||e===l)}function getCurrentDirection(l,t=10){let e=null;return Math.abs(l.y)>t?e="y":Math.abs(l.x)>t&&(e="x"),e}class DragGesture extends Feature{constructor(t){super(t),this.removeGroupControls=noop,this.removeListeners=noop,this.controls=new VisualElementDragControls(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||noop}unmount(){this.removeGroupControls(),this.removeListeners()}}const asyncHandler=l=>(t,e)=>{l&&frame.postRender(()=>l(t,e))};class PanGesture extends Feature{constructor(){super(...arguments),this.removePointerDownListener=noop}onPointerDown(t){this.session=new PanSession(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:getContextWindow(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:a,onPanEnd:c}=this.node.getProps();return{onSessionStart:asyncHandler(t),onStart:asyncHandler(e),onMove:a,onEnd:(h,d)=>{delete this.session,c&&frame.postRender(()=>c(h,d))}}}mount(){this.removePointerDownListener=addPointerEvent(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const globalProjectionState={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pixelsToPercent(l,t){return t.max===t.min?0:l/(t.max-t.min)*100}const correctBorderRadius={correct:(l,t)=>{if(!t.target)return l;if(typeof l=="string")if(px.test(l))l=parseFloat(l);else return l;const e=pixelsToPercent(l,t.target.x),a=pixelsToPercent(l,t.target.y);return`${e}% ${a}%`}},correctBoxShadow={correct:(l,{treeScale:t,projectionDelta:e})=>{const a=l,c=complex.parse(l);if(c.length>5)return a;const h=complex.createTransformer(l),d=typeof c[0]!="number"?1:0,f=e.x.scale*t.x,m=e.y.scale*t.y;c[0+d]/=f,c[1+d]/=m;const g=mixNumber$1(f,m,.5);return typeof c[2+d]=="number"&&(c[2+d]/=g),typeof c[3+d]=="number"&&(c[3+d]/=g),h(c)}};let hasTakenAnySnapshot=!1;class MeasureLayoutWithContext extends reactExports.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:a,layoutId:c}=this.props,{projection:h}=t;addScaleCorrector(defaultScaleCorrectors),h&&(e.group&&e.group.add(h),a&&a.register&&c&&a.register(h),hasTakenAnySnapshot&&h.root.didUpdate(),h.addEventListener("animationComplete",()=>{this.safeToRemove()}),h.setOptions({...h.options,onExitComplete:()=>this.safeToRemove()})),globalProjectionState.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:a,drag:c,isPresent:h}=this.props,{projection:d}=a;return d&&(d.isPresent=h,hasTakenAnySnapshot=!0,c||t.layoutDependency!==e||e===void 0||t.isPresent!==h?d.willUpdate():this.safeToRemove(),t.isPresent!==h&&(h?d.promote():d.relegate()||frame.postRender(()=>{const f=d.getStack();(!f||!f.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),microtask.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:a}=this.props,{projection:c}=t;hasTakenAnySnapshot=!0,c&&(c.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(c),a&&a.deregister&&a.deregister(c))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function MeasureLayout(l){const[t,e]=usePresence(),a=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(MeasureLayoutWithContext,{...l,layoutGroup:a,switchLayoutGroup:reactExports.useContext(SwitchLayoutGroupContext),isPresent:t,safeToRemove:e})}const defaultScaleCorrectors={borderRadius:{...correctBorderRadius,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:correctBorderRadius,borderTopRightRadius:correctBorderRadius,borderBottomLeftRadius:correctBorderRadius,borderBottomRightRadius:correctBorderRadius,boxShadow:correctBoxShadow};function animateSingleValue(l,t,e){const a=isMotionValue(l)?l:motionValue(l);return a.start(animateMotionValue("",a,t,e)),a.animation}const compareByDepth=(l,t)=>l.depth-t.depth;class FlatTree{constructor(){this.children=[],this.isDirty=!1}add(t){addUniqueItem(this.children,t),this.isDirty=!0}remove(t){removeItem(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(compareByDepth),this.isDirty=!1,this.children.forEach(t)}}function delay(l,t){const e=time.now(),a=({timestamp:c})=>{const h=c-e;h>=t&&(cancelFrame(a),l(h-t))};return frame.setup(a,!0),()=>cancelFrame(a)}const borders=["TopLeft","TopRight","BottomLeft","BottomRight"],numBorders=borders.length,asNumber=l=>typeof l=="string"?parseFloat(l):l,isPx=l=>typeof l=="number"||px.test(l);function mixValues(l,t,e,a,c,h){c?(l.opacity=mixNumber$1(0,e.opacity??1,easeCrossfadeIn(a)),l.opacityExit=mixNumber$1(t.opacity??1,0,easeCrossfadeOut(a))):h&&(l.opacity=mixNumber$1(t.opacity??1,e.opacity??1,a));for(let d=0;d<numBorders;d++){const f=`border${borders[d]}Radius`;let m=getRadius(t,f),g=getRadius(e,f);if(m===void 0&&g===void 0)continue;m||(m=0),g||(g=0),m===0||g===0||isPx(m)===isPx(g)?(l[f]=Math.max(mixNumber$1(asNumber(m),asNumber(g),a),0),(percent.test(g)||percent.test(m))&&(l[f]+="%")):l[f]=g}(t.rotate||e.rotate)&&(l.rotate=mixNumber$1(t.rotate||0,e.rotate||0,a))}function getRadius(l,t){return l[t]!==void 0?l[t]:l.borderRadius}const easeCrossfadeIn=compress(0,.5,circOut),easeCrossfadeOut=compress(.5,.95,noop);function compress(l,t,e){return a=>a<l?0:a>t?1:e(progress(l,t,a))}function copyAxisInto(l,t){l.min=t.min,l.max=t.max}function copyBoxInto(l,t){copyAxisInto(l.x,t.x),copyAxisInto(l.y,t.y)}function copyAxisDeltaInto(l,t){l.translate=t.translate,l.scale=t.scale,l.originPoint=t.originPoint,l.origin=t.origin}function removePointDelta(l,t,e,a,c){return l-=t,l=scalePoint(l,1/e,a),c!==void 0&&(l=scalePoint(l,1/c,a)),l}function removeAxisDelta(l,t=0,e=1,a=.5,c,h=l,d=l){if(percent.test(t)&&(t=parseFloat(t),t=mixNumber$1(d.min,d.max,t/100)-d.min),typeof t!="number")return;let f=mixNumber$1(h.min,h.max,a);l===h&&(f-=t),l.min=removePointDelta(l.min,t,e,f,c),l.max=removePointDelta(l.max,t,e,f,c)}function removeAxisTransforms(l,t,[e,a,c],h,d){removeAxisDelta(l,t[e],t[a],t[c],t.scale,h,d)}const xKeys=["x","scaleX","originX"],yKeys=["y","scaleY","originY"];function removeBoxTransforms(l,t,e,a){removeAxisTransforms(l.x,t,xKeys,e?e.x:void 0,a?a.x:void 0),removeAxisTransforms(l.y,t,yKeys,e?e.y:void 0,a?a.y:void 0)}function isAxisDeltaZero(l){return l.translate===0&&l.scale===1}function isDeltaZero(l){return isAxisDeltaZero(l.x)&&isAxisDeltaZero(l.y)}function axisEquals(l,t){return l.min===t.min&&l.max===t.max}function boxEquals(l,t){return axisEquals(l.x,t.x)&&axisEquals(l.y,t.y)}function axisEqualsRounded(l,t){return Math.round(l.min)===Math.round(t.min)&&Math.round(l.max)===Math.round(t.max)}function boxEqualsRounded(l,t){return axisEqualsRounded(l.x,t.x)&&axisEqualsRounded(l.y,t.y)}function aspectRatio(l){return calcLength(l.x)/calcLength(l.y)}function axisDeltaEquals(l,t){return l.translate===t.translate&&l.scale===t.scale&&l.originPoint===t.originPoint}class NodeStack{constructor(){this.members=[]}add(t){addUniqueItem(this.members,t),t.scheduleRender()}remove(t){if(removeItem(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(c=>t===c);if(e===0)return!1;let a;for(let c=e;c>=0;c--){const h=this.members[c];if(h.isPresent!==!1){a=h;break}}return a?(this.promote(a),!0):!1}promote(t,e){const a=this.lead;if(t!==a&&(this.prevLead=a,this.lead=t,t.show(),a)){a.instance&&a.scheduleRender(),t.scheduleRender(),t.resumeFrom=a,e&&(t.resumeFrom.preserveOpacity=!0),a.snapshot&&(t.snapshot=a.snapshot,t.snapshot.latestValues=a.animationValues||a.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:c}=t.options;c===!1&&a.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:a}=t;e.onExitComplete&&e.onExitComplete(),a&&a.options.onExitComplete&&a.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function buildProjectionTransform(l,t,e){let a="";const c=l.x.translate/t.x,h=l.y.translate/t.y,d=e?.z||0;if((c||h||d)&&(a=`translate3d(${c}px, ${h}px, ${d}px) `),(t.x!==1||t.y!==1)&&(a+=`scale(${1/t.x}, ${1/t.y}) `),e){const{transformPerspective:g,rotate:y,rotateX:w,rotateY:E,skewX:S,skewY:C}=e;g&&(a=`perspective(${g}px) ${a}`),y&&(a+=`rotate(${y}deg) `),w&&(a+=`rotateX(${w}deg) `),E&&(a+=`rotateY(${E}deg) `),S&&(a+=`skewX(${S}deg) `),C&&(a+=`skewY(${C}deg) `)}const f=l.x.scale*t.x,m=l.y.scale*t.y;return(f!==1||m!==1)&&(a+=`scale(${f}, ${m})`),a||"none"}const transformAxes=["","X","Y","Z"],animationTarget=1e3;let id=0;function resetDistortingTransform(l,t,e,a){const{latestValues:c}=t;c[l]&&(e[l]=c[l],t.setStaticValue(l,0),a&&(a[l]=0))}function cancelTreeOptimisedTransformAnimations(l){if(l.hasCheckedOptimisedAppear=!0,l.root===l)return;const{visualElement:t}=l.options;if(!t)return;const e=getOptimisedAppearId(t);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:c,layoutId:h}=l.options;window.MotionCancelOptimisedAnimation(e,"transform",frame,!(c||h))}const{parent:a}=l;a&&!a.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(a)}function createProjectionNode({attachResizeListener:l,defaultParent:t,measureScroll:e,checkIsScrollRoot:a,resetTransform:c}){return class{constructor(d={},f=t?.()){this.id=id++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(propagateDirtyNodes),this.nodes.forEach(resolveTargetDelta),this.nodes.forEach(calcProjection),this.nodes.forEach(cleanDirtyNodes)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=d,this.root=f?f.root||f:this,this.path=f?[...f.path,f]:[],this.parent=f,this.depth=f?f.depth+1:0;for(let m=0;m<this.path.length;m++)this.path[m].shouldResetTransform=!0;this.root===this&&(this.nodes=new FlatTree)}addEventListener(d,f){return this.eventHandlers.has(d)||this.eventHandlers.set(d,new SubscriptionManager),this.eventHandlers.get(d).add(f)}notifyListeners(d,...f){const m=this.eventHandlers.get(d);m&&m.notify(...f)}hasListeners(d){return this.eventHandlers.has(d)}mount(d){if(this.instance)return;this.isSVG=isSVGElement(d)&&!isSVGSVGElement(d),this.instance=d;const{layoutId:f,layout:m,visualElement:g}=this.options;if(g&&!g.current&&g.mount(d),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(m||f)&&(this.isLayoutDirty=!0),l){let y,w=0;const E=()=>this.root.updateBlockedByResize=!1;frame.read(()=>{w=window.innerWidth}),l(d,()=>{const S=window.innerWidth;S!==w&&(w=S,this.root.updateBlockedByResize=!0,y&&y(),y=delay(E,250),globalProjectionState.hasAnimatedSinceResize&&(globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(finishAnimation)))})}f&&this.root.registerSharedNode(f,this),this.options.animate!==!1&&g&&(f||m)&&this.addEventListener("didUpdate",({delta:y,hasLayoutChanged:w,hasRelativeLayoutChanged:E,layout:S})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const C=this.options.transition||g.getDefaultTransition()||defaultLayoutTransition,{onLayoutAnimationStart:T,onLayoutAnimationComplete:k}=g.getProps(),D=!this.targetLayout||!boxEqualsRounded(this.targetLayout,S),N=!w&&E;if(this.options.layoutRoot||this.resumeFrom||N||w&&(D||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const L={...getValueTransition(C,"layout"),onPlay:T,onComplete:k};(g.shouldReduceMotion||this.options.layoutRoot)&&(L.delay=0,L.type=!1),this.startAnimation(L),this.setAnimationOrigin(y,N)}else w||finishAnimation(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=S})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const d=this.getStack();d&&d.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),cancelFrame(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(resetSkewAndRotation),this.animationId++)}getTransformTemplate(){const{visualElement:d}=this.options;return d&&d.getProps().transformTemplate}willUpdate(d=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let y=0;y<this.path.length;y++){const w=this.path[y];w.shouldResetTransform=!0,w.updateScroll("snapshot"),w.options.layoutRoot&&w.willUpdate(!1)}const{layoutId:f,layout:m}=this.options;if(f===void 0&&!m)return;const g=this.getTransformTemplate();this.prevTransformTemplateValue=g?g(this.latestValues,""):void 0,this.updateSnapshot(),d&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(clearMeasurements);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(clearIsLayoutDirty);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate)):this.nodes.forEach(clearIsLayoutDirty),this.clearAllSnapshots();const f=time.now();frameData.delta=clamp(0,1e3/60,f-frameData.timestamp),frameData.timestamp=f,frameData.isProcessing=!0,frameSteps.update.process(frameData),frameSteps.preRender.process(frameData),frameSteps.render.process(frameData),frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,microtask.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,frame.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){frame.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!calcLength(this.snapshot.measuredBox.x)&&!calcLength(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let m=0;m<this.path.length;m++)this.path[m].updateScroll();const d=this.layout;this.layout=this.measure(!1),this.layoutCorrected=createBox(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:f}=this.options;f&&f.notify("LayoutMeasure",this.layout.layoutBox,d?d.layoutBox:void 0)}updateScroll(d="measure"){let f=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===d&&(f=!1),f&&this.instance){const m=a(this.instance);this.scroll={animationId:this.root.animationId,phase:d,isRoot:m,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:m}}}resetTransform(){if(!c)return;const d=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,f=this.projectionDelta&&!isDeltaZero(this.projectionDelta),m=this.getTransformTemplate(),g=m?m(this.latestValues,""):void 0,y=g!==this.prevTransformTemplateValue;d&&this.instance&&(f||hasTransform(this.latestValues)||y)&&(c(this.instance,g),this.shouldResetTransform=!1,this.scheduleRender())}measure(d=!0){const f=this.measurePageBox();let m=this.removeElementScroll(f);return d&&(m=this.removeTransform(m)),roundBox(m),{animationId:this.root.animationId,measuredBox:f,layoutBox:m,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:d}=this.options;if(!d)return createBox();const f=d.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(checkNodeWasScrollRoot))){const{scroll:g}=this.root;g&&(translateAxis(f.x,g.offset.x),translateAxis(f.y,g.offset.y))}return f}removeElementScroll(d){const f=createBox();if(copyBoxInto(f,d),this.scroll?.wasRoot)return f;for(let m=0;m<this.path.length;m++){const g=this.path[m],{scroll:y,options:w}=g;g!==this.root&&y&&w.layoutScroll&&(y.wasRoot&&copyBoxInto(f,d),translateAxis(f.x,y.offset.x),translateAxis(f.y,y.offset.y))}return f}applyTransform(d,f=!1){const m=createBox();copyBoxInto(m,d);for(let g=0;g<this.path.length;g++){const y=this.path[g];!f&&y.options.layoutScroll&&y.scroll&&y!==y.root&&transformBox(m,{x:-y.scroll.offset.x,y:-y.scroll.offset.y}),hasTransform(y.latestValues)&&transformBox(m,y.latestValues)}return hasTransform(this.latestValues)&&transformBox(m,this.latestValues),m}removeTransform(d){const f=createBox();copyBoxInto(f,d);for(let m=0;m<this.path.length;m++){const g=this.path[m];if(!g.instance||!hasTransform(g.latestValues))continue;hasScale(g.latestValues)&&g.updateSnapshot();const y=createBox(),w=g.measurePageBox();copyBoxInto(y,w),removeBoxTransforms(f,g.latestValues,g.snapshot?g.snapshot.layoutBox:void 0,y)}return hasTransform(this.latestValues)&&removeBoxTransforms(f,this.latestValues),f}setTargetDelta(d){this.targetDelta=d,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(d){this.options={...this.options,...d,crossfade:d.crossfade!==void 0?d.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(d=!1){const f=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=f.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=f.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=f.isSharedProjectionDirty);const m=!!this.resumingFrom||this!==f;if(!(d||m&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:y,layoutId:w}=this.options;if(!(!this.layout||!(y||w))){if(this.resolvedRelativeTargetAt=frameData.timestamp,!this.targetDelta&&!this.relativeTarget){const E=this.getClosestProjectingParent();E&&E.layout&&this.animationProgress!==1?(this.relativeParent=E,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.layout.layoutBox,E.layout.layoutBox),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=createBox(),this.targetWithTransforms=createBox()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),calcRelativeBox(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):copyBoxInto(this.target,this.layout.layoutBox),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const E=this.getClosestProjectingParent();E&&!!E.resumingFrom==!!this.resumingFrom&&!E.options.layoutScroll&&E.target&&this.animationProgress!==1?(this.relativeParent=E,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.target,E.target),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||hasScale(this.parent.latestValues)||has2DTranslate(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const d=this.getLead(),f=!!this.resumingFrom||this!==d;let m=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(m=!1),f&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(m=!1),this.resolvedRelativeTargetAt===frameData.timestamp&&(m=!1),m)return;const{layout:g,layoutId:y}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(g||y))return;copyBoxInto(this.layoutCorrected,this.layout.layoutBox);const w=this.treeScale.x,E=this.treeScale.y;applyTreeDeltas(this.layoutCorrected,this.treeScale,this.path,f),d.layout&&!d.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(d.target=d.layout.layoutBox,d.targetWithTransforms=createBox());const{target:S}=d;if(!S){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(copyAxisDeltaInto(this.prevProjectionDelta.x,this.projectionDelta.x),copyAxisDeltaInto(this.prevProjectionDelta.y,this.projectionDelta.y)),calcBoxDelta(this.projectionDelta,this.layoutCorrected,S,this.latestValues),(this.treeScale.x!==w||this.treeScale.y!==E||!axisDeltaEquals(this.projectionDelta.x,this.prevProjectionDelta.x)||!axisDeltaEquals(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",S))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(d=!0){if(this.options.visualElement?.scheduleRender(),d){const f=this.getStack();f&&f.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=createDelta(),this.projectionDelta=createDelta(),this.projectionDeltaWithTransform=createDelta()}setAnimationOrigin(d,f=!1){const m=this.snapshot,g=m?m.latestValues:{},y={...this.latestValues},w=createDelta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!f;const E=createBox(),S=m?m.source:void 0,C=this.layout?this.layout.source:void 0,T=S!==C,k=this.getStack(),D=!k||k.members.length<=1,N=!!(T&&!D&&this.options.crossfade===!0&&!this.path.some(hasOpacityCrossfade));this.animationProgress=0;let L;this.mixTargetDelta=j=>{const F=j/1e3;mixAxisDelta(w.x,d.x,F),mixAxisDelta(w.y,d.y,F),this.setTargetDelta(w),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(calcRelativePosition(E,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mixBox(this.relativeTarget,this.relativeTargetOrigin,E,F),L&&boxEquals(this.relativeTarget,L)&&(this.isProjectionDirty=!1),L||(L=createBox()),copyBoxInto(L,this.relativeTarget)),T&&(this.animationValues=y,mixValues(y,g,this.latestValues,F,N,D)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=F},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(d){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(cancelFrame(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=frame.update(()=>{globalProjectionState.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=motionValue(0)),this.currentAnimation=animateSingleValue(this.motionValue,[0,1e3],{...d,velocity:0,isSync:!0,onUpdate:f=>{this.mixTargetDelta(f),d.onUpdate&&d.onUpdate(f)},onStop:()=>{},onComplete:()=>{d.onComplete&&d.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const d=this.getStack();d&&d.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(animationTarget),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const d=this.getLead();let{targetWithTransforms:f,target:m,layout:g,latestValues:y}=d;if(!(!f||!m||!g)){if(this!==d&&this.layout&&g&&shouldAnimatePositionOnly(this.options.animationType,this.layout.layoutBox,g.layoutBox)){m=this.target||createBox();const w=calcLength(this.layout.layoutBox.x);m.x.min=d.target.x.min,m.x.max=m.x.min+w;const E=calcLength(this.layout.layoutBox.y);m.y.min=d.target.y.min,m.y.max=m.y.min+E}copyBoxInto(f,m),transformBox(f,y),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,f,y)}}registerSharedNode(d,f){this.sharedNodes.has(d)||this.sharedNodes.set(d,new NodeStack),this.sharedNodes.get(d).add(f);const g=f.options.initialPromotionConfig;f.promote({transition:g?g.transition:void 0,preserveFollowOpacity:g&&g.shouldPreserveFollowOpacity?g.shouldPreserveFollowOpacity(f):void 0})}isLead(){const d=this.getStack();return d?d.lead===this:!0}getLead(){const{layoutId:d}=this.options;return d?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:d}=this.options;return d?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:d}=this.options;if(d)return this.root.sharedNodes.get(d)}promote({needsReset:d,transition:f,preserveFollowOpacity:m}={}){const g=this.getStack();g&&g.promote(this,m),d&&(this.projectionDelta=void 0,this.needsReset=!0),f&&this.setOptions({transition:f})}relegate(){const d=this.getStack();return d?d.relegate(this):!1}resetSkewAndRotation(){const{visualElement:d}=this.options;if(!d)return;let f=!1;const{latestValues:m}=d;if((m.z||m.rotate||m.rotateX||m.rotateY||m.rotateZ||m.skewX||m.skewY)&&(f=!0),!f)return;const g={};m.z&&resetDistortingTransform("z",d,g,this.animationValues);for(let y=0;y<transformAxes.length;y++)resetDistortingTransform(`rotate${transformAxes[y]}`,d,g,this.animationValues),resetDistortingTransform(`skew${transformAxes[y]}`,d,g,this.animationValues);d.render();for(const y in g)d.setStaticValue(y,g[y]),this.animationValues&&(this.animationValues[y]=g[y]);d.scheduleRender()}applyProjectionStyles(d,f){if(!this.instance||this.isSVG)return;if(!this.isVisible){d.visibility="hidden";return}const m=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,d.visibility="",d.opacity="",d.pointerEvents=resolveMotionValue(f?.pointerEvents)||"",d.transform=m?m(this.latestValues,""):"none";return}const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){this.options.layoutId&&(d.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,d.pointerEvents=resolveMotionValue(f?.pointerEvents)||""),this.hasProjected&&!hasTransform(this.latestValues)&&(d.transform=m?m({},""):"none",this.hasProjected=!1);return}d.visibility="";const y=g.animationValues||g.latestValues;this.applyTransformsToTarget();let w=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,y);m&&(w=m(y,w)),d.transform=w;const{x:E,y:S}=this.projectionDelta;d.transformOrigin=`${E.origin*100}% ${S.origin*100}% 0`,g.animationValues?d.opacity=g===this?y.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:y.opacityExit:d.opacity=g===this?y.opacity!==void 0?y.opacity:"":y.opacityExit!==void 0?y.opacityExit:0;for(const C in scaleCorrectors){if(y[C]===void 0)continue;const{correct:T,applyTo:k,isCSSVariable:D}=scaleCorrectors[C],N=w==="none"?y[C]:T(y[C],g);if(k){const L=k.length;for(let j=0;j<L;j++)d[k[j]]=N}else D?this.options.visualElement.renderState.vars[C]=N:d[C]=N}this.options.layoutId&&(d.pointerEvents=g===this?resolveMotionValue(f?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(d=>d.currentAnimation?.stop()),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()}}}function updateLayout(l){l.updateLayout()}function notifyLayoutUpdate(l){const t=l.resumeFrom?.snapshot||l.snapshot;if(l.isLead()&&l.layout&&t&&l.hasListeners("didUpdate")){const{layoutBox:e,measuredBox:a}=l.layout,{animationType:c}=l.options,h=t.source!==l.layout.source;c==="size"?eachAxis(y=>{const w=h?t.measuredBox[y]:t.layoutBox[y],E=calcLength(w);w.min=e[y].min,w.max=w.min+E}):shouldAnimatePositionOnly(c,t.layoutBox,e)&&eachAxis(y=>{const w=h?t.measuredBox[y]:t.layoutBox[y],E=calcLength(e[y]);w.max=w.min+E,l.relativeTarget&&!l.currentAnimation&&(l.isProjectionDirty=!0,l.relativeTarget[y].max=l.relativeTarget[y].min+E)});const d=createDelta();calcBoxDelta(d,e,t.layoutBox);const f=createDelta();h?calcBoxDelta(f,l.applyTransform(a,!0),t.measuredBox):calcBoxDelta(f,e,t.layoutBox);const m=!isDeltaZero(d);let g=!1;if(!l.resumeFrom){const y=l.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:w,layout:E}=y;if(w&&E){const S=createBox();calcRelativePosition(S,t.layoutBox,w.layoutBox);const C=createBox();calcRelativePosition(C,e,E.layoutBox),boxEqualsRounded(S,C)||(g=!0),y.options.layoutRoot&&(l.relativeTarget=C,l.relativeTargetOrigin=S,l.relativeParent=y)}}}l.notifyListeners("didUpdate",{layout:e,snapshot:t,delta:f,layoutDelta:d,hasLayoutChanged:m,hasRelativeLayoutChanged:g})}else if(l.isLead()){const{onExitComplete:e}=l.options;e&&e()}l.options.transition=void 0}function propagateDirtyNodes(l){l.parent&&(l.isProjecting()||(l.isProjectionDirty=l.parent.isProjectionDirty),l.isSharedProjectionDirty||(l.isSharedProjectionDirty=!!(l.isProjectionDirty||l.parent.isProjectionDirty||l.parent.isSharedProjectionDirty)),l.isTransformDirty||(l.isTransformDirty=l.parent.isTransformDirty))}function cleanDirtyNodes(l){l.isProjectionDirty=l.isSharedProjectionDirty=l.isTransformDirty=!1}function clearSnapshot(l){l.clearSnapshot()}function clearMeasurements(l){l.clearMeasurements()}function clearIsLayoutDirty(l){l.isLayoutDirty=!1}function resetTransformStyle(l){const{visualElement:t}=l.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),l.resetTransform()}function finishAnimation(l){l.finishAnimation(),l.targetDelta=l.relativeTarget=l.target=void 0,l.isProjectionDirty=!0}function resolveTargetDelta(l){l.resolveTargetDelta()}function calcProjection(l){l.calcProjection()}function resetSkewAndRotation(l){l.resetSkewAndRotation()}function removeLeadSnapshots(l){l.removeLeadSnapshot()}function mixAxisDelta(l,t,e){l.translate=mixNumber$1(t.translate,0,e),l.scale=mixNumber$1(t.scale,1,e),l.origin=t.origin,l.originPoint=t.originPoint}function mixAxis(l,t,e,a){l.min=mixNumber$1(t.min,e.min,a),l.max=mixNumber$1(t.max,e.max,a)}function mixBox(l,t,e,a){mixAxis(l.x,t.x,e.x,a),mixAxis(l.y,t.y,e.y,a)}function hasOpacityCrossfade(l){return l.animationValues&&l.animationValues.opacityExit!==void 0}const defaultLayoutTransition={duration:.45,ease:[.4,0,.1,1]},userAgentContains=l=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(l),roundPoint=userAgentContains("applewebkit/")&&!userAgentContains("chrome/")?Math.round:noop;function roundAxis(l){l.min=roundPoint(l.min),l.max=roundPoint(l.max)}function roundBox(l){roundAxis(l.x),roundAxis(l.y)}function shouldAnimatePositionOnly(l,t,e){return l==="position"||l==="preserve-aspect"&&!isNear(aspectRatio(t),aspectRatio(e),.2)}function checkNodeWasScrollRoot(l){return l!==l.root&&l.scroll?.wasRoot}const DocumentProjectionNode=createProjectionNode({attachResizeListener:(l,t)=>addDomEvent(l,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rootProjectionNode={current:void 0},HTMLProjectionNode=createProjectionNode({measureScroll:l=>({x:l.scrollLeft,y:l.scrollTop}),defaultParent:()=>{if(!rootProjectionNode.current){const l=new DocumentProjectionNode({});l.mount(window),l.setOptions({layoutScroll:!0}),rootProjectionNode.current=l}return rootProjectionNode.current},resetTransform:(l,t)=>{l.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:l=>window.getComputedStyle(l).position==="fixed"}),drag={pan:{Feature:PanGesture},drag:{Feature:DragGesture,ProjectionNode:HTMLProjectionNode,MeasureLayout}};function handleHoverEvent(l,t,e){const{props:a}=l;l.animationState&&a.whileHover&&l.animationState.setActive("whileHover",e==="Start");const c="onHover"+e,h=a[c];h&&frame.postRender(()=>h(t,extractEventInfo(t)))}class HoverGesture extends Feature{mount(){const{current:t}=this.node;t&&(this.unmount=hover(t,(e,a)=>(handleHoverEvent(this.node,a,"Start"),c=>handleHoverEvent(this.node,c,"End"))))}unmount(){}}class FocusGesture extends Feature{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pipe(addDomEvent(this.node.current,"focus",()=>this.onFocus()),addDomEvent(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function handlePressEvent(l,t,e){const{props:a}=l;if(l.current instanceof HTMLButtonElement&&l.current.disabled)return;l.animationState&&a.whileTap&&l.animationState.setActive("whileTap",e==="Start");const c="onTap"+(e==="End"?"":e),h=a[c];h&&frame.postRender(()=>h(t,extractEventInfo(t)))}class PressGesture extends Feature{mount(){const{current:t}=this.node;t&&(this.unmount=press(t,(e,a)=>(handlePressEvent(this.node,a,"Start"),(c,{success:h})=>handlePressEvent(this.node,c,h?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const observerCallbacks=new WeakMap,observers=new WeakMap,fireObserverCallback=l=>{const t=observerCallbacks.get(l.target);t&&t(l)},fireAllObserverCallbacks=l=>{l.forEach(fireObserverCallback)};function initIntersectionObserver({root:l,...t}){const e=l||document;observers.has(e)||observers.set(e,{});const a=observers.get(e),c=JSON.stringify(t);return a[c]||(a[c]=new IntersectionObserver(fireAllObserverCallbacks,{root:l,...t})),a[c]}function observeIntersection(l,t,e){const a=initIntersectionObserver(t);return observerCallbacks.set(l,e),a.observe(l),()=>{observerCallbacks.delete(l),a.unobserve(l)}}const thresholdNames={some:0,all:1};class InViewFeature extends Feature{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:a,amount:c="some",once:h}=t,d={root:e?e.current:void 0,rootMargin:a,threshold:typeof c=="number"?c:thresholdNames[c]},f=m=>{const{isIntersecting:g}=m;if(this.isInView===g||(this.isInView=g,h&&!g&&this.hasEnteredView))return;g&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",g);const{onViewportEnter:y,onViewportLeave:w}=this.node.getProps(),E=g?y:w;E&&E(m)};return observeIntersection(this.node.current,d,f)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(hasViewportOptionChanged(t,e))&&this.startObserver()}unmount(){}}function hasViewportOptionChanged({viewport:l={}},{viewport:t={}}={}){return e=>l[e]!==t[e]}const gestureAnimations={inView:{Feature:InViewFeature},tap:{Feature:PressGesture},focus:{Feature:FocusGesture},hover:{Feature:HoverGesture}},layout={layout:{ProjectionNode:HTMLProjectionNode,MeasureLayout}},featureBundle={...animations,...gestureAnimations,...drag,...layout},motion=createMotionProxy(featureBundle,createDomVisualElement),maxElapsed=50,createAxisInfo=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),createScrollInfo=()=>({time:0,x:createAxisInfo(),y:createAxisInfo()}),keys={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function updateAxisInfo(l,t,e,a){const c=e[t],{length:h,position:d}=keys[t],f=c.current,m=e.time;c.current=l[`scroll${d}`],c.scrollLength=l[`scroll${h}`]-l[`client${h}`],c.offset.length=0,c.offset[0]=0,c.offset[1]=c.scrollLength,c.progress=progress(0,c.scrollLength,c.current);const g=a-m;c.velocity=g>maxElapsed?0:velocityPerSecond(c.current-f,g)}function updateScrollInfo(l,t,e){updateAxisInfo(l,"x",t,e),updateAxisInfo(l,"y",t,e),t.time=e}function calcInset(l,t){const e={x:0,y:0};let a=l;for(;a&&a!==t;)if(isHTMLElement(a))e.x+=a.offsetLeft,e.y+=a.offsetTop,a=a.offsetParent;else if(a.tagName==="svg"){const c=a.getBoundingClientRect();a=a.parentElement;const h=a.getBoundingClientRect();e.x+=c.left-h.left,e.y+=c.top-h.top}else if(a instanceof SVGGraphicsElement){const{x:c,y:h}=a.getBBox();e.x+=c,e.y+=h;let d=null,f=a.parentNode;for(;!d;)f.tagName==="svg"&&(d=f),f=a.parentNode;a=d}else break;return e}const namedEdges={start:0,center:.5,end:1};function resolveEdge(l,t,e=0){let a=0;if(l in namedEdges&&(l=namedEdges[l]),typeof l=="string"){const c=parseFloat(l);l.endsWith("px")?a=c:l.endsWith("%")?l=c/100:l.endsWith("vw")?a=c/100*document.documentElement.clientWidth:l.endsWith("vh")?a=c/100*document.documentElement.clientHeight:l=c}return typeof l=="number"&&(a=t*l),e+a}const defaultOffset=[0,0];function resolveOffset(l,t,e,a){let c=Array.isArray(l)?l:defaultOffset,h=0,d=0;return typeof l=="number"?c=[l,l]:typeof l=="string"&&(l=l.trim(),l.includes(" ")?c=l.split(" "):c=[l,namedEdges[l]?l:"0"]),h=resolveEdge(c[0],e,a),d=resolveEdge(c[1],t),h-d}const ScrollOffset={All:[[0,0],[1,1]]},point={x:0,y:0};function getTargetSize(l){return"getBBox"in l&&l.tagName!=="svg"?l.getBBox():{width:l.clientWidth,height:l.clientHeight}}function resolveOffsets(l,t,e){const{offset:a=ScrollOffset.All}=e,{target:c=l,axis:h="y"}=e,d=h==="y"?"height":"width",f=c!==l?calcInset(c,l):point,m=c===l?{width:l.scrollWidth,height:l.scrollHeight}:getTargetSize(c),g={width:l.clientWidth,height:l.clientHeight};t[h].offset.length=0;let y=!t[h].interpolate;const w=a.length;for(let E=0;E<w;E++){const S=resolveOffset(a[E],g[d],m[d],f[h]);!y&&S!==t[h].interpolatorOffsets[E]&&(y=!0),t[h].offset[E]=S}y&&(t[h].interpolate=interpolate(t[h].offset,defaultOffset$1(a),{clamp:!1}),t[h].interpolatorOffsets=[...t[h].offset]),t[h].progress=clamp(0,1,t[h].interpolate(t[h].current))}function measure(l,t=l,e){if(e.x.targetOffset=0,e.y.targetOffset=0,t!==l){let a=t;for(;a&&a!==l;)e.x.targetOffset+=a.offsetLeft,e.y.targetOffset+=a.offsetTop,a=a.offsetParent}e.x.targetLength=t===l?t.scrollWidth:t.clientWidth,e.y.targetLength=t===l?t.scrollHeight:t.clientHeight,e.x.containerLength=l.clientWidth,e.y.containerLength=l.clientHeight}function createOnScrollHandler(l,t,e,a={}){return{measure:c=>{measure(l,a.target,e),updateScrollInfo(l,e,c),(a.offset||a.target)&&resolveOffsets(l,e,a)},notify:()=>t(e)}}const scrollListeners=new WeakMap,resizeListeners=new WeakMap,onScrollHandlers=new WeakMap,getEventTarget=l=>l===document.scrollingElement?window:l;function scrollInfo(l,{container:t=document.scrollingElement,...e}={}){if(!t)return noop;let a=onScrollHandlers.get(t);a||(a=new Set,onScrollHandlers.set(t,a));const c=createScrollInfo(),h=createOnScrollHandler(t,l,c,e);if(a.add(h),!scrollListeners.has(t)){const f=()=>{for(const w of a)w.measure(frameData.timestamp);frame.preUpdate(m)},m=()=>{for(const w of a)w.notify()},g=()=>frame.read(f);scrollListeners.set(t,g);const y=getEventTarget(t);window.addEventListener("resize",g,{passive:!0}),t!==document.documentElement&&resizeListeners.set(t,resize(t,g)),y.addEventListener("scroll",g,{passive:!0}),g()}const d=scrollListeners.get(t);return frame.read(d,!1,!0),()=>{cancelFrame(d);const f=onScrollHandlers.get(t);if(!f||(f.delete(h),f.size))return;const m=scrollListeners.get(t);scrollListeners.delete(t),m&&(getEventTarget(t).removeEventListener("scroll",m),resizeListeners.get(t)?.(),window.removeEventListener("resize",m))}}const timelineCache=new Map;function scrollTimelineFallback(l){const t={value:0},e=scrollInfo(a=>{t.value=a[l.axis].progress*100},l);return{currentTime:t,cancel:e}}function getTimeline({source:l,container:t,...e}){const{axis:a}=e;l&&(t=l);const c=timelineCache.get(t)??new Map;timelineCache.set(t,c);const h=e.target??"self",d=c.get(h)??{},f=a+(e.offset??[]).join(",");return d[f]||(d[f]=!e.target&&supportsScrollTimeline()?new ScrollTimeline({source:t,axis:a}):scrollTimelineFallback({container:t,...e})),d[f]}function attachToAnimation(l,t){const e=getTimeline(t);return l.attachTimeline({timeline:t.target?void 0:e,observe:a=>(a.pause(),observeTimeline(c=>{a.time=a.duration*c},e))})}function isOnScrollWithInfo(l){return l.length===2}function attachToFunction(l,t){return isOnScrollWithInfo(l)?scrollInfo(e=>{l(e[t.axis].progress,e)},t):observeTimeline(l,getTimeline(t))}function scroll(l,{axis:t="y",container:e=document.scrollingElement,...a}={}){if(!e)return noop;const c={axis:t,container:e,...a};return typeof l=="function"?attachToFunction(l,c):attachToAnimation(l,c)}const createScrollMotionValues=()=>({scrollX:motionValue(0),scrollY:motionValue(0),scrollXProgress:motionValue(0),scrollYProgress:motionValue(0)}),isRefPending=l=>l?!l.current:!1;function useScroll({container:l,target:t,...e}={}){const a=useConstant(createScrollMotionValues),c=reactExports.useRef(null),h=reactExports.useRef(!1),d=reactExports.useCallback(()=>(c.current=scroll((f,{x:m,y:g})=>{a.scrollX.set(m.current),a.scrollXProgress.set(m.progress),a.scrollY.set(g.current),a.scrollYProgress.set(g.progress)},{...e,container:l?.current||void 0,target:t?.current||void 0}),()=>{c.current?.()}),[l,t,JSON.stringify(e.offset)]);return useIsomorphicLayoutEffect(()=>{if(h.current=!1,isRefPending(l)||isRefPending(t)){h.current=!0;return}else return d()},[d]),reactExports.useEffect(()=>{if(h.current)return invariant$1(!isRefPending(l)),invariant$1(!isRefPending(t)),d()},[d]),a}function useMotionValue(l){const t=useConstant(()=>motionValue(l)),{isStatic:e}=reactExports.useContext(MotionConfigContext);if(e){const[,a]=reactExports.useState(l);reactExports.useEffect(()=>t.on("change",a),[])}return t}function useCombineMotionValues(l,t){const e=useMotionValue(t()),a=()=>e.set(t());return a(),useIsomorphicLayoutEffect(()=>{const c=()=>frame.preRender(a,!1,!0),h=l.map(d=>d.on("change",c));return()=>{h.forEach(d=>d()),cancelFrame(a)}}),e}function useComputed(l){collectMotionValues.current=[],l();const t=useCombineMotionValues(collectMotionValues.current,l);return collectMotionValues.current=void 0,t}function useTransform(l,t,e,a){if(typeof l=="function")return useComputed(l);const c=typeof t=="function"?t:transform(t,e,a);return Array.isArray(l)?useListTransform(l,c):useListTransform([l],([h])=>c(h))}function useListTransform(l,t){const e=useConstant(()=>[]);return useCombineMotionValues(l,()=>{e.length=0;const a=l.length;for(let c=0;c<a;c++)e[c]=l[c].get();return t(e)})}const ThemeToggle=({theme:l,toggleTheme:t})=>{const e=l==="dark",a={hidden:{scale:0,opacity:0},visible:c=>({scale:1,opacity:1,transition:{delay:c*.05,duration:.2}})};return jsxRuntimeExports.jsxs(motion.button,{onClick:t,className:"relative w-16 h-8 rounded-full p-1 transition-colors duration-500 focus:outline-none focus:ring-2 focus:ring-violet-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900",style:{backgroundColor:e?"#1e1b4b":"#fef3c7"},"aria-label":"Toggle theme",whileHover:{scale:1.05},whileTap:{scale:.95},children:[jsxRuntimeExports.jsx(motion.div,{className:"absolute inset-0 rounded-full",style:{background:e?"linear-gradient(to right, #312e81, #4c1d95)":"linear-gradient(to right, #fde68a, #fbbf24)"},initial:!1,animate:{opacity:.6},transition:{duration:.3}}),jsxRuntimeExports.jsxs(motion.div,{className:"relative w-6 h-6 rounded-full shadow-lg flex items-center justify-center overflow-hidden",style:{backgroundColor:e?"#8b5cf6":"#f59e0b"},initial:!1,animate:{x:e?32:0},transition:{type:"spring",stiffness:500,damping:30},children:[jsxRuntimeExports.jsxs(motion.div,{className:"absolute inset-0 flex items-center justify-center",initial:!1,animate:{opacity:e?0:1,rotate:e?-45:0,scale:e?0:1},transition:{duration:.3},children:[jsxRuntimeExports.jsx("div",{className:"w-2.5 h-2.5 bg-white rounded-full"}),[...Array(8)].map((c,h)=>jsxRuntimeExports.jsx(motion.div,{className:"absolute w-0.5 h-1 bg-white rounded-full",style:{transform:`rotate(${h*45}deg) translateY(-6px)`},custom:h,variants:a,initial:"hidden",animate:e?"hidden":"visible"},h))]}),jsxRuntimeExports.jsxs(motion.div,{className:"absolute inset-0 flex items-center justify-center",initial:!1,animate:{opacity:e?1:0,rotate:e?0:45,scale:e?1:0},transition:{duration:.3},children:[jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-white rounded-full"}),jsxRuntimeExports.jsx(motion.div,{className:"absolute -top-0.5 -right-0.5 w-2.5 h-2.5 rounded-full",style:{backgroundColor:"#8b5cf6"},animate:{x:e?0:5},transition:{duration:.3}})]}),jsxRuntimeExports.jsx(motion.div,{className:"absolute top-1 right-1.5 w-0.5 h-0.5 bg-white rounded-full",animate:{opacity:[.5,1,.5],scale:[1,1.5,1]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}})]})]}),e&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(motion.div,{className:"absolute w-1 h-1 bg-yellow-200 rounded-full",style:{top:"20%",left:"12%"},animate:{opacity:[.2,1,.2],scale:[.8,1.2,.8]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}}),jsxRuntimeExports.jsx(motion.div,{className:"absolute w-0.5 h-0.5 bg-violet-200 rounded-full",style:{top:"65%",left:"20%"},animate:{opacity:[.3,1,.3],scale:[1,1.4,1]},transition:{duration:1.8,repeat:1/0,ease:"easeInOut",delay:.3}}),jsxRuntimeExports.jsx(motion.div,{className:"absolute w-0.5 h-0.5 bg-white rounded-full",style:{top:"35%",left:"28%"},animate:{opacity:[.4,.9,.4],scale:[1,1.3,1]},transition:{duration:2.2,repeat:1/0,ease:"easeInOut",delay:.7}})]}),!e&&jsxRuntimeExports.jsx(motion.div,{className:"absolute w-2 h-1 bg-white/60 rounded-full",style:{top:"30%",right:"15%"},animate:{x:[0,3,0],opacity:[.4,.7,.4]},transition:{duration:3,repeat:1/0,ease:"easeInOut"}})]})},AnimatedName=({firstName:l,lastName:t})=>{const e={hover:{y:-3,transition:{type:"spring",stiffness:500,damping:15}}};return jsxRuntimeExports.jsxs(motion.a,{href:"#hero",className:"flex items-center gap-1 text-2xl md:text-3xl font-black tracking-tight cursor-pointer",whileHover:"hover",children:[jsxRuntimeExports.jsx(motion.span,{className:"bg-gradient-to-r from-violet-600 to-purple-600 bg-clip-text text-transparent",variants:e,children:l}),jsxRuntimeExports.jsx(motion.span,{className:"text-violet-500 mx-0.5",animate:{scale:[1,1.2,1],opacity:[.7,1,.7]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:"."}),jsxRuntimeExports.jsx(motion.span,{className:"bg-gradient-to-r from-purple-600 to-indigo-600 bg-clip-text text-transparent",variants:e,children:t})]})},Header=({theme:l,toggleTheme:t})=>jsxRuntimeExports.jsx(motion.header,{initial:{y:-100},animate:{y:0},transition:{type:"spring",stiffness:120},className:"glass-card backdrop-blur-xl sticky top-0 z-50 border-b border-gray-200/20 dark:border-gray-700/20",children:jsxRuntimeExports.jsxs("nav",{className:"container mx-auto px-6 py-4 flex justify-between items-center",children:[jsxRuntimeExports.jsx(AnimatedName,{firstName:"Kiran",lastName:"Mulawad"}),jsxRuntimeExports.jsxs("div",{className:"hidden md:flex space-x-8 items-center",children:[[{name:"About",href:"#about"},{name:"Skills",href:"#skills"},{name:"Projects",href:"#projects"},{name:"Experience",href:"#experience"},{name:"Education",href:"#education"},{name:"Contact",href:"#contact"}].map(e=>jsxRuntimeExports.jsx(motion.a,{whileHover:{scale:1.1},href:e.href,className:"nav-link animated-underline text-gray-600 dark:text-gray-300 font-medium",children:e.name},e.name)),jsxRuntimeExports.jsx(ThemeToggle,{theme:l,toggleTheme:t})]}),jsxRuntimeExports.jsx(motion.a,{whileHover:{scale:1.05},href:"#contact",className:"hidden md:inline-block bg-gradient-to-r from-violet-500 to-violet-600 text-white font-bold py-2.5 px-6 rounded-full hover:shadow-glow transition-all duration-300",children:"Let's Connect"})]})}),Footer=()=>jsxRuntimeExports.jsx(motion.footer,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:1},className:"bg-gray-800 text-white dark:bg-gray-950",children:jsxRuntimeExports.jsxs("div",{className:"container mx-auto px-6 py-12 text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Let's Connect!"}),jsxRuntimeExports.jsx("p",{className:"max-w-2xl mx-auto mb-8 text-gray-300",children:"Connect with me on my social platforms:"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row justify-center items-center gap-4",children:[jsxRuntimeExports.jsxs("a",{href:"https://www.linkedin.com/in/kiran-mulawad-4573b8229/",target:"_blank",rel:"noopener noreferrer",className:"bg-gray-700 dark:bg-gray-800 text-white font-bold py-3 px-6 rounded-full hover:bg-opacity-90 transition-colors flex items-center gap-2",children:[jsxRuntimeExports.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z",clipRule:"evenodd"})}),"LinkedIn"]}),jsxRuntimeExports.jsxs("a",{href:"https://github.com/Kiranmulawad1",target:"_blank",rel:"noopener noreferrer",className:"bg-gray-700 dark:bg-gray-800 text-white font-bold py-3 px-6 rounded-full hover:bg-opacity-90 transition-colors flex items-center gap-2",children:[jsxRuntimeExports.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M12 0C5.373 0 0 5.373 0 12c0 5.302 3.438 9.799 8.205 11.387.6.111.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.73.084-.73 1.205.084 1.838 1.238 1.838 1.238 1.07 1.835 2.809 1.305 3.49.998.108-.775.418-1.305.762-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.13-3.18 0 0 1-.322 3.3-.998 1.125-.313 2.32-.47 3.515-.47.195 0 .39.01.585.03 1.2.14 2.385.45 3.515.998 2.3.676 3.3.998 3.3.998.67 1.657.265 2.877.13 3.18.77.84 1.235 1.91 1.235 3.22 0 4.61-2.805 5.625-5.475 5.92.43.37.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .32.21.69.825.57C20.565 21.802 24 17.305 24 12c0-6.627-5.373-12-12-12z",clipRule:"evenodd"})}),"GitHub"]}),jsxRuntimeExports.jsxs("a",{href:"https://www.instagram.com/kiran_mulawad1/",target:"_blank",rel:"noopener noreferrer",className:"bg-gray-700 dark:bg-gray-800 text-white font-bold py-3 px-6 rounded-full hover:bg-opacity-90 transition-colors flex items-center gap-2",children:[jsxRuntimeExports.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:jsxRuntimeExports.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.204-.012 3.584-.069 4.849-1.691 4.919-1.691 4.919-4.919 4.919-1.265.058-1.645-.069-4.849-.069-3.204 0-3.584-.012-4.849-.069-3.252-.148-4.771-1.691-4.919-4.919-.058-1.265-.069-1.645-.069-4.849 0-3.204.012-3.584.069-4.849 1.691-4.919 1.691-4.919 4.919-4.919zm0 2.163c-3.204 0-3.584.012-4.85.07-3.252.148-4.771 1.691-4.919 4.919-.058 1.265-.069 1.645-.069 4.849 0 3.204.012 3.584.069 4.849 1.691 4.919 1.691 4.919 4.919 4.919 1.265-.058 1.645-.069 4.849-.069 3.204 0 3.584.012 4.849-.069 3.252-.148 4.771-1.691 4.919-4.919.058-1.265.069-1.645.069-4.849 0-3.204-.012-3.584-.069-4.849-1.691-4.919-1.691-4.919-4.919-4.919zm0 5.838c-2.32 0-4.2 1.88-4.2 4.2s1.88 4.2 4.2 4.2 4.2-1.88 4.2-4.2-1.88-4.2-4.2-4.2zm0 2.163c1.015 0 1.837.822 1.837 1.837s-.822 1.837-1.837 1.837-1.837-.822-1.837-1.837.822-1.837 1.837-1.837zm6.262-7.272c-.817 0-1.48-.665-1.48-1.48s.663-1.48 1.48-1.48 1.48.665 1.48 1.48-.663 1.48-1.48 1.48z"})}),"Instagram"]})]}),jsxRuntimeExports.jsx("p",{className:"mt-12 text-gray-400 text-sm",children:" 2025 Kiran Mulawad. All rights reserved."})]})});function n(l,t){return(function(e){if(Array.isArray(e))return e})(l)||(function(e,a){var c=[],h=!0,d=!1,f=void 0;try{for(var m,g=e[Symbol.iterator]();!(h=(m=g.next()).done)&&(c.push(m.value),!a||c.length!==a);h=!0);}catch(y){d=!0,f=y}finally{try{h||g.return==null||g.return()}finally{if(d)throw f}}return c})(l,t)||(function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")})()}const i=1e8,v=Math.max,M=Math.min,I=Math.pow;function Q(l,t){return(function(e,a){const c=v(e,a),h=M(e,a);return(c*i+.05*i)/(h*i+.05*i)})(R(...l),R(...t))}function R(l,t,e){return(U(l)*X+U(t)*Y+U(e)*Z)/i}const U=l=>l<=3.928?l/W:V(l),V=l=>I((l+5.5)/105.5,2.4),W=1292,X=.2126*i,Y=.7152*i,Z=.0722*i;function _(l){const t=n(l.match(tn)||[],9),e=t[1],a=t[2],c=t[3],h=t[4],d=t[5],f=t[6],m=t[7],g=t[8];if(d!==void 0||e!==void 0)return[parseInt(d!==void 0?d:e+e,16),parseInt(f!==void 0?f:a+a,16),parseInt(m!==void 0?m:c+c,16),g!==void 0?parseInt(g,16):h!==void 0?parseInt(h+h,16):255].map(y=>100*y/255)}const tn=/^#?(?:([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])?|([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})?)$/i;function tt(l,t){return Q(_(l),_(t))}function asyncGeneratorStep(l,t,e,a,c,h,d){try{var f=l[h](d),m=f.value}catch(g){return void e(g)}f.done?t(m):Promise.resolve(m).then(a,c)}function _asyncToGenerator(l){return function(){var t=this,e=arguments;return new Promise(function(a,c){var h=l.apply(t,e);function d(m){asyncGeneratorStep(h,a,c,d,f,"next",m)}function f(m){asyncGeneratorStep(h,a,c,d,f,"throw",m)}d(void 0)})}}function _extends(){return _extends=Object.assign?Object.assign.bind():function(l){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var a in e)({}).hasOwnProperty.call(e,a)&&(l[a]=e[a])}return l},_extends.apply(null,arguments)}function _regeneratorRuntime(){_regeneratorRuntime=function(){return t};var l,t={},e=Object.prototype,a=e.hasOwnProperty,c=Object.defineProperty||function(q,z,J){q[z]=J.value},h=typeof Symbol=="function"?Symbol:{},d=h.iterator||"@@iterator",f=h.asyncIterator||"@@asyncIterator",m=h.toStringTag||"@@toStringTag";function g(q,z,J){return Object.defineProperty(q,z,{value:J,enumerable:!0,configurable:!0,writable:!0}),q[z]}try{g({},"")}catch{g=function(z,J,lt){return z[J]=lt}}function y(q,z,J,lt){var at=z&&z.prototype instanceof D?z:D,B=Object.create(at.prototype),st=new gt(lt||[]);return c(B,"_invoke",{value:ct(q,J,st)}),B}function w(q,z,J){try{return{type:"normal",arg:q.call(z,J)}}catch(lt){return{type:"throw",arg:lt}}}t.wrap=y;var E="suspendedStart",S="suspendedYield",C="executing",T="completed",k={};function D(){}function N(){}function L(){}var j={};g(j,d,function(){return this});var F=Object.getPrototypeOf,$=F&&F(F(Mt([])));$&&$!==e&&a.call($,d)&&(j=$);var G=L.prototype=D.prototype=Object.create(j);function nt(q){["next","throw","return"].forEach(function(z){g(q,z,function(J){return this._invoke(z,J)})})}function ot(q,z){function J(at,B,st,mt){var vt=w(q[at],q,B);if(vt.type!=="throw"){var Ct=vt.arg,_t=Ct.value;return _t&&typeof _t=="object"&&a.call(_t,"__await")?z.resolve(_t.__await).then(function(bt){J("next",bt,st,mt)},function(bt){J("throw",bt,st,mt)}):z.resolve(_t).then(function(bt){Ct.value=bt,st(Ct)},function(bt){return J("throw",bt,st,mt)})}mt(vt.arg)}var lt;c(this,"_invoke",{value:function(at,B){function st(){return new z(function(mt,vt){J(at,B,mt,vt)})}return lt=lt?lt.then(st,st):st()}})}function ct(q,z,J){var lt=E;return function(at,B){if(lt===C)throw Error("Generator is already running");if(lt===T){if(at==="throw")throw B;return{value:l,done:!0}}for(J.method=at,J.arg=B;;){var st=J.delegate;if(st){var mt=ft(st,J);if(mt){if(mt===k)continue;return mt}}if(J.method==="next")J.sent=J._sent=J.arg;else if(J.method==="throw"){if(lt===E)throw lt=T,J.arg;J.dispatchException(J.arg)}else J.method==="return"&&J.abrupt("return",J.arg);lt=C;var vt=w(q,z,J);if(vt.type==="normal"){if(lt=J.done?T:S,vt.arg===k)continue;return{value:vt.arg,done:J.done}}vt.type==="throw"&&(lt=T,J.method="throw",J.arg=vt.arg)}}}function ft(q,z){var J=z.method,lt=q.iterator[J];if(lt===l)return z.delegate=null,J==="throw"&&q.iterator.return&&(z.method="return",z.arg=l,ft(q,z),z.method==="throw")||J!=="return"&&(z.method="throw",z.arg=new TypeError("The iterator does not provide a '"+J+"' method")),k;var at=w(lt,q.iterator,z.arg);if(at.type==="throw")return z.method="throw",z.arg=at.arg,z.delegate=null,k;var B=at.arg;return B?B.done?(z[q.resultName]=B.value,z.next=q.nextLoc,z.method!=="return"&&(z.method="next",z.arg=l),z.delegate=null,k):B:(z.method="throw",z.arg=new TypeError("iterator result is not an object"),z.delegate=null,k)}function Tt(q){var z={tryLoc:q[0]};1 in q&&(z.catchLoc=q[1]),2 in q&&(z.finallyLoc=q[2],z.afterLoc=q[3]),this.tryEntries.push(z)}function At(q){var z=q.completion||{};z.type="normal",delete z.arg,q.completion=z}function gt(q){this.tryEntries=[{tryLoc:"root"}],q.forEach(Tt,this),this.reset(!0)}function Mt(q){if(q||q===""){var z=q[d];if(z)return z.call(q);if(typeof q.next=="function")return q;if(!isNaN(q.length)){var J=-1,lt=function at(){for(;++J<q.length;)if(a.call(q,J))return at.value=q[J],at.done=!1,at;return at.value=l,at.done=!0,at};return lt.next=lt}}throw new TypeError(typeof q+" is not iterable")}return N.prototype=L,c(G,"constructor",{value:L,configurable:!0}),c(L,"constructor",{value:N,configurable:!0}),N.displayName=g(L,m,"GeneratorFunction"),t.isGeneratorFunction=function(q){var z=typeof q=="function"&&q.constructor;return!!z&&(z===N||(z.displayName||z.name)==="GeneratorFunction")},t.mark=function(q){return Object.setPrototypeOf?Object.setPrototypeOf(q,L):(q.__proto__=L,g(q,m,"GeneratorFunction")),q.prototype=Object.create(G),q},t.awrap=function(q){return{__await:q}},nt(ot.prototype),g(ot.prototype,f,function(){return this}),t.AsyncIterator=ot,t.async=function(q,z,J,lt,at){at===void 0&&(at=Promise);var B=new ot(y(q,z,J,lt),at);return t.isGeneratorFunction(z)?B:B.next().then(function(st){return st.done?st.value:B.next()})},nt(G),g(G,m,"Generator"),g(G,d,function(){return this}),g(G,"toString",function(){return"[object Generator]"}),t.keys=function(q){var z=Object(q),J=[];for(var lt in z)J.push(lt);return J.reverse(),function at(){for(;J.length;){var B=J.pop();if(B in z)return at.value=B,at.done=!1,at}return at.done=!0,at}},t.values=Mt,gt.prototype={constructor:gt,reset:function(q){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(At),!q)for(var z in this)z.charAt(0)==="t"&&a.call(this,z)&&!isNaN(+z.slice(1))&&(this[z]=l)},stop:function(){this.done=!0;var q=this.tryEntries[0].completion;if(q.type==="throw")throw q.arg;return this.rval},dispatchException:function(q){if(this.done)throw q;var z=this;function J(vt,Ct){return B.type="throw",B.arg=q,z.next=vt,Ct&&(z.method="next",z.arg=l),!!Ct}for(var lt=this.tryEntries.length-1;lt>=0;--lt){var at=this.tryEntries[lt],B=at.completion;if(at.tryLoc==="root")return J("end");if(at.tryLoc<=this.prev){var st=a.call(at,"catchLoc"),mt=a.call(at,"finallyLoc");if(st&&mt){if(this.prev<at.catchLoc)return J(at.catchLoc,!0);if(this.prev<at.finallyLoc)return J(at.finallyLoc)}else if(st){if(this.prev<at.catchLoc)return J(at.catchLoc,!0)}else{if(!mt)throw Error("try statement without catch or finally");if(this.prev<at.finallyLoc)return J(at.finallyLoc)}}}},abrupt:function(q,z){for(var J=this.tryEntries.length-1;J>=0;--J){var lt=this.tryEntries[J];if(lt.tryLoc<=this.prev&&a.call(lt,"finallyLoc")&&this.prev<lt.finallyLoc){var at=lt;break}}at&&(q==="break"||q==="continue")&&at.tryLoc<=z&&z<=at.finallyLoc&&(at=null);var B=at?at.completion:{};return B.type=q,B.arg=z,at?(this.method="next",this.next=at.finallyLoc,k):this.complete(B)},complete:function(q,z){if(q.type==="throw")throw q.arg;return q.type==="break"||q.type==="continue"?this.next=q.arg:q.type==="return"?(this.rval=this.arg=q.arg,this.method="return",this.next="end"):q.type==="normal"&&z&&(this.next=z),k},finish:function(q){for(var z=this.tryEntries.length-1;z>=0;--z){var J=this.tryEntries[z];if(J.finallyLoc===q)return this.complete(J.completion,J.afterLoc),At(J),k}},catch:function(q){for(var z=this.tryEntries.length-1;z>=0;--z){var J=this.tryEntries[z];if(J.tryLoc===q){var lt=J.completion;if(lt.type==="throw"){var at=lt.arg;At(J)}return at}}throw Error("illegal catch attempt")},delegateYield:function(q,z,J){return this.delegate={iterator:Mt(q),resultName:z,nextLoc:J},this.method==="next"&&(this.arg=l),k}},t}var tagCanvasString=`(function(){"use strict"; var r,C,p=Math.abs,o=Math.sin,l=Math.cos,g=Math.max,h=Math.min,af=Math.ceil,E=Math.sqrt,w=Math.pow,I={},D={},R={0:"0,",1:"17,",2:"34,",3:"51,",4:"68,",5:"85,",6:"102,",7:"119,",8:"136,",9:"153,",a:"170,",A:"170,",b:"187,",B:"187,",c:"204,",C:"204,",d:"221,",D:"221,",e:"238,",E:"238,",f:"255,",F:"255,"},f,d,b,T,z,F,M,c=document,v,e,P,j={};for(r=0;r<256;++r)C=r.toString(16),r<16&&(C='0'+C),D[C]=D[C.toUpperCase()]=r.toString()+',';function n(a){return typeof a!='undefined'}function B(a){return typeof a=='object'&&a!=null}function G(a,c,b){return isNaN(a)?b:h(b,g(c,a))}function x(){return!1}function q(){return(new Date).valueOf()}function ak(c,d){var b=[],e=c.length,a;for(a=0;a<e;++a)b.push(c[a]);return b.sort(d),b}function ai(a){for(var b=a.length-1,d,c;b;)c=~~(Math.random()*b),d=a[b],a[b]=a[c],a[c]=d,--b}function ag(){var a=window.AudioContext||window.webkitAudioContext;if(e=new a,!e){e='off';return}return e}function $(u,a,t,s,r,q,p){var j=s,h=r,i=t*.01,n=80*i,m=100*i,o=40*i,l=30*i,c=l/2,b=j+n,f=b-o,k=h+m,d=k-l,g=h+l,e=h+m/2;if(a.setTransform(1,0,0,1,0,0),a.setLineDash([]),a.globalAlpha=1,a.strokeStyle=p,a.lineWidth=q,a.lineJoin='round',a.beginPath(),a.moveTo(f,g),a.lineTo(f,d),a.moveTo(b,k),a.lineTo(f,d),a.lineTo(j,d),a.lineTo(j,g),a.lineTo(f,g),a.lineTo(b,h),u){a.lineTo(b,g),a.moveTo(b,d),a.lineTo(b,k),a.moveTo(b-c,e-c),a.lineTo(b+c,e+c),a.moveTo(b+c,e-c),a.lineTo(b-c,e+c),a.stroke();return}a.closePath(),a.stroke()}function s(a,b,c){this.x=a,this.y=b,this.z=c}z=s.prototype,z.length=function(){return E(this.x*this.x+this.y*this.y+this.z*this.z)},z.dot=function(a){return this.x*a.x+this.y*a.y+this.z*a.z},z.cross=function(a){var b=this.y*a.z-this.z*a.y,c=this.z*a.x-this.x*a.z,d=this.x*a.y-this.y*a.x;return new s(b,c,d)},z.angle=function(b){var c=this.dot(b),a;return c==0?Math.PI/2:(a=c/(this.length()*b.length()),a>=1)?0:a<=-1?Math.PI:Math.acos(a)},z.unit=function(){var a=this.length();return new s(this.x/a,this.y/a,this.z/a)};function ay(b,a){a=a*Math.PI/180,b=b*Math.PI/180;var c=o(b)*l(a),d=-o(a),e=-l(b)*l(a);return new s(c,d,e)}function m(a){this[1]={1:a[0],2:a[1],3:a[2]},this[2]={1:a[3],2:a[4],3:a[5]},this[3]={1:a[6],2:a[7],3:a[8]}}T=m.prototype,m.Identity=function(){return new m([1,0,0,0,1,0,0,0,1])},m.Rotation=function(e,a){var c=o(e),d=l(e),b=1-d;return new m([d+w(a.x,2)*b,a.x*a.y*b-a.z*c,a.x*a.z*b+a.y*c,a.y*a.x*b+a.z*c,d+w(a.y,2)*b,a.y*a.z*b-a.x*c,a.z*a.x*b-a.y*c,a.z*a.y*b+a.x*c,d+w(a.z,2)*b])},T.mul=function(c){var d=[],a,b,e=c.xform?1:0;for(a=1;a<=3;++a)for(b=1;b<=3;++b)e?d.push(this[a][1]*c[1][b]+this[a][2]*c[2][b]+this[a][3]*c[3][b]):d.push(this[a][b]*c);return new m(d)},T.xform=function(b){var a={},c=b.x,d=b.y,e=b.z;return a.x=c*this[1][1]+d*this[2][1]+e*this[3][1],a.y=c*this[1][2]+d*this[2][2]+e*this[3][2],a.z=c*this[1][3]+d*this[2][3]+e*this[3][3],a};function aB(g,j,k,m,f){var a,b,c,d,e=[],h=2/g,i;i=Math.PI*(3-E(5)+(parseFloat(f)?parseFloat(f):0));for(a=0;a<g;++a)b=a*h-1+h/2,c=E(1-b*b),d=a*i,e.push([l(d)*c*j,b*k,o(d)*c*m]);return e}function U(n,p,m,k,h,g){var b,f=[],i=2/n,j,a,d,c,e;j=Math.PI*(3-E(5)+(parseFloat(g)?parseFloat(g):0));for(a=0;a<n;++a)d=a*i-1+i/2,b=a*j,c=l(b),e=o(b),f.push(p?[d*m,c*k,e*h]:[c*m,d*k,e*h]);return f}function aa(k,e,f,h,i,j){var b,g=[],m=Math.PI*2/e,a,c,d;for(a=0;a<e;++a)b=a*m,c=l(b),d=o(b),g.push(k?[j*f,c*h,d*i]:[c*f,j*h,d*i]);return g}function ax(a,b,c,d,e){return U(a,0,b,c,d,e)}function aH(a,b,c,d,e){return U(a,1,b,c,d,e)}function aG(b,c,d,e,a){return a=isNaN(a)?0:a*1,aa(0,b,c,d,e,a)}function aF(b,c,d,e,a){return a=isNaN(a)?0:a*1,aa(1,b,c,d,e,a)}function av(b){var a=new Image;a.onload=function(){var c=a.width/2,d=a.height/2;b.centreFunc=function(b,g,h,e,f){b.setTransform(1,0,0,1,0,0),b.globalAlpha=1,b.drawImage(a,e-c,f-d)}},a.src=b.centreImage}function aE(a,c){var b=a,d,e,f=(c*1).toPrecision(3)+')';return a[0]==='#'?(I[a]||(a.length===4?I[a]='rgba('+R[a[1]]+R[a[2]]+R[a[3]]:I[a]='rgba('+D[a.substr(1,2)]+D[a.substr(3,2)]+D[a.substr(5,2)]),b=I[a]+f):a.substr(0,4)==='rgb('||a.substr(0,4)==='hsl('?b=a.replace('(','a(').replace(')',','+f):(a.substr(0,5)==='rgba('||a.substr(0,5)==='hsla(')&&(d=a.lastIndexOf(',')+1,e=a.indexOf(')'),c*=parseFloat(a.substring(d,e)),b=a.substr(0,d)+c.toPrecision(3)+')'),b}function k(b,d){if(window.G_vmlCanvasManager)return null;var a=c.createElement('canvas');return a.width=b,a.height=d,a}function aD(){var b=k(3,3),a,c;return!!b&&(a=b.getContext('2d'),a.strokeStyle='#000',a.shadowColor='#fff',a.shadowBlur=3,a.globalAlpha=0,a.strokeRect(2,2,2,2),a.globalAlpha=1,c=a.getImageData(2,2,1,1),b=null,c.data[0]>0)}function aC(a,c,f,d){var e=a.createLinearGradient(0,0,c,0),b;for(b in d)e.addColorStop(1-b,d[b]);a.fillStyle=e,a.fillRect(0,f,c,1)}function L(a,m,j){var l=1024,d=1,e=a.weightGradient,i,f,b,c;if(a.gCanvas)f=a.gCanvas.getContext('2d'),d=a.gCanvas.height;else{if(B(e[0])?d=e.length:e=[e],a.gCanvas=i=k(l,d),!i)return null;f=i.getContext('2d');for(b=0;b<d;++b)aC(f,l,b,e[b])}return j=g(h(j||0,d-1),0),c=f.getImageData(~~((l-1)*m),j,1,1).data,'rgba('+c[0]+','+c[1]+','+c[2]+','+c[3]/255+')'}function Y(b,i,q,k,o,n,h,d,a,g,f,l){var m=o+(d||0)+(a.length&&a[0]<0?p(a[0]):0),j=n+(d||0)+(a.length&&a[1]<0?p(a[1]):0),c,e;b.font=i,b.textBaseline='top',b.fillStyle=q,h&&(b.shadowColor=h),d&&(b.shadowBlur=d),a.length&&(b.shadowOffsetX=a[0],b.shadowOffsetY=a[1]);for(c=0;c<k.length;++c)e=0,f&&('right'==l?e=g-f[c]:'centre'==l&&(e=(g-f[c])/2)),b.fillText(k[c],m+e,j),j+=parseInt(i)}function y(d,a,b,f,e,c,g){c?(d.beginPath(),d.moveTo(a,b+e-c),d.arcTo(a,b,a+c,b,c),d.arcTo(a+f,b,a+f,b+c,c),d.arcTo(a+f,b+e,a+f-c,b+e,c),d.arcTo(a,b+e,a,b+e-c,c),d.closePath(),d[g?'stroke':'fill']()):d[g?'strokeRect':'fillRect'](a,b,f,e)}function O(a,b,c,d,e,f,g,h,i){this.strings=a,this.font=b,this.width=c,this.height=d,this.maxWidth=e,this.stringWidths=f,this.align=g,this.valign=h,this.scale=i}M=O.prototype,M.SetImage=function(a,b,c,d,e,f,g,h){this.image=a,this.iwidth=b*this.scale,this.iheight=c*this.scale,this.ipos=d,this.ipad=e*this.scale,this.iscale=h,this.ialign=f,this.ivalign=g},M.Align=function(c,d,a){var b=0;return a=='right'||a=='bottom'?b=d-c:a!='left'&&a!='top'&&(b=(d-c)/2),b},M.Create=function(G,D,F,b,A,m,q,j,E){var o,e,f,a,l,s,i,u,v,r,w,n,c,d,x,B=p(q[0]),C=p(q[1]),t,z;return j=g(j,B+m,C+m),l=2*(j+b),i=2*(j+b),e=this.width+l,f=this.height+i,v=r=j+b,this.image&&(w=n=j+b,c=this.iwidth,d=this.iheight,this.ipos=='top'||this.ipos=='bottom'?(c<this.width?w+=this.Align(c,this.width,this.ialign):v+=this.Align(this.width,c,this.align),this.ipos=='top'?r+=d+this.ipad:n+=this.height+this.ipad,e=g(e,c+l),f+=d+this.ipad):(d<this.height?n+=this.Align(d,this.height,this.ivalign):r+=this.Align(this.height,d,this.valign),this.ipos=='right'?w+=this.width+this.ipad:v+=c+this.ipad,e+=c+this.ipad,f=g(f,d+i))),o=k(e,f),!o?null:(l=i=b/2,s=e-b,u=f-b,x=h(E,s/2,u/2),a=o.getContext('2d'),D&&(a.fillStyle=D,y(a,l,i,s,u,x)),b&&(a.strokeStyle=F,a.lineWidth=b,y(a,l,i,s,u,x,!0)),(m||B||C)&&(t=k(e,f),t&&(z=a,a=t.getContext('2d'))),Y(a,this.font,G,this.strings,v,r,0,0,[],this.maxWidth,this.stringWidths,this.align),this.image&&a.drawImage(this.image,w,n,c,d),z&&(a=z,A&&(a.shadowColor=A),m&&(a.shadowBlur=m),a.shadowOffsetX=q[0],a.shadowOffsetY=q[1],a.drawImage(t,0,0)),o)};function H(a,c,d){var b=k(c,d),e;return b?(e=b.getContext('2d'),e.drawImage(a,(c-a.width)/2,(d-a.height)/2),b):null}function S(e,b,c){var a=k(b,c),d;return a?(d=a.getContext('2d'),d.drawImage(e,0,0,b,c),a):null}function W(n,u,t,e,s,c,v,d,r,w){var g=u+(2*d+c)*e,f=t+(2*d+c)*e,l=k(g,f),b,i,q,m,j,o,a,p;return l?(c*=e,r*=e,i=q=c/2,m=g-c,j=f-c,d=d*e+i,b=l.getContext('2d'),p=h(r,m/2,j/2),s&&(b.fillStyle=s,y(b,i,q,m,j,p)),c&&(b.strokeStyle=v,b.lineWidth=c,y(b,i,q,m,j,p,!0)),w?(o=k(g,f),a=o.getContext('2d'),a.drawImage(n,d,d,u,t),a.globalCompositeOperation='source-in',a.fillStyle=v,a.fillRect(0,0,g,f),a.globalCompositeOperation='destination-over',a.drawImage(l,0,0),a.globalCompositeOperation='source-over',b.drawImage(o,0,0)):b.drawImage(n,d,d,n.width,n.height),{image:l,width:g/e,height:f/e}):null}function at(l,f,c,d,j){var e,a,b=parseFloat(f),i=g(c,d);return e=k(c,d),!e?null:(f.indexOf('%')>0?b=i*b/100:b=b*j,a=e.getContext('2d'),a.globalCompositeOperation='source-over',a.fillStyle='#fff',b>=i/2?(b=h(c,d)/2,a.beginPath(),a.moveTo(c/2,d/2),a.arc(c/2,d/2,b,0,2*Math.PI,!1),a.fill(),a.closePath()):(b=h(c/2,d/2,b),y(a,0,0,c,d,b,!0),a.fill()),a.globalCompositeOperation='source-in',a.drawImage(l,0,0,c,d),e)}function ao(q,m,i,b,h,a,c){var g=p(c[0]),f=p(c[1]),j=m+(g>a?g+a:a*2)*b,l=i+(f>a?f+a:a*2)*b,n=b*((a||0)+(c[0]<0?g:0)),o=b*((a||0)+(c[1]<0?f:0)),e,d;return e=k(j,l),!e?null:(d=e.getContext('2d'),h&&(d.shadowColor=h),a&&(d.shadowBlur=a*b),c&&(d.shadowOffsetX=c[0]*b,d.shadowOffsetY=c[1]*b),d.drawImage(q,n,o,m,i),{image:e,width:j/b,height:l/b})}function ae(m,o,l){var c=parseInt(m.toString().length*l),h=parseInt(l*2*m.length),j=k(c,h),g,i,e,f,b,d,n,a;if(!j)return null;g=j.getContext('2d'),g.fillStyle='#000',g.fillRect(0,0,c,h),Y(g,l+'px '+o,'#fff',m,0,0,0,0,[],'centre'),i=g.getImageData(0,0,c,h),e=i.width,f=i.height,a={min:{x:e,y:f},max:{x:-1,y:-1}};for(d=0;d<f;++d)for(b=0;b<e;++b)n=(d*e+b)*4,i.data[n+1]>0&&(b<a.min.x&&(a.min.x=b),b>a.max.x&&(a.max.x=b),d<a.min.y&&(a.min.y=d),d>a.max.y&&(a.max.y=d));return e!=c&&(a.min.x*=c/e,a.max.x*=c/e),f!=h&&(a.min.y*=c/f,a.max.y*=c/f),j=null,a}function Q(a){return"'"+a.replace(/('|")/g,'').replace(/s*,s*/g,"', '")+"'"}function t(b,d,a){a=a||c,a.addEventListener?a.addEventListener(b,d,!1):a.attachEvent('on'+b,d)}function am(b,d,a){a=a||c,a.removeEventListener?a.removeEventListener(b,d):a.detachEvent('on'+b,d)}function A(g,e,j,a,b){var l=b.imageScale,h,c,k,m,f,d;if(!e.complete)return t('load',function(){A(g,e,j,a,b)},e);if(!g.complete)return t('load',function(){A(g,e,j,a,b)},g);if(j&&!j.complete)return t('load',function(){A(g,e,j,a,b)},j);e.width=e.width,e.height=e.height,l&&(g.width=e.width*l,g.height=e.height*l),a.iw=g.width,a.ih=g.height,b.txtOpt&&(c=g,h=b.zoomMax*b.txtScale,f=a.iw*h,d=a.ih*h,f<e.naturalWidth||d<e.naturalHeight?(c=S(g,f,d),c&&(a.fimage=c)):(f=a.iw,d=a.ih,h=1),parseFloat(b.imageRadius)&&(a.image=a.fimage=g=at(a.image,b.imageRadius,f,d,h)),a.HasText()||(b.shadow&&(c=ao(a.image,f,d,h,b.shadow,b.shadowBlur,b.shadowOffset),c&&(a.fimage=c.image,a.w=c.width,a.h=c.height)),(b.bgColour||b.bgOutlineThickness)&&(k=b.bgColour=='tag'?i(a.a,'background-color'):b.bgColour,m=b.bgOutline=='tag'?i(a.a,'color'):b.bgOutline||b.textColour,f=a.fimage.width,d=a.fimage.height,b.outlineMethod=='colour'&&(c=W(a.fimage,f,d,h,k,b.bgOutlineThickness,a.outline.colour,b.padding,b.bgRadius,1),c&&(a.oimage=c.image)),c=W(a.fimage,f,d,h,k,b.bgOutlineThickness,m,b.padding,b.bgRadius),c&&(a.fimage=c.image,a.w=c.width,a.h=c.height)),b.outlineMethod=='size'&&(b.outlineIncrease>0?(a.iw+=2*b.outlineIncrease,a.ih+=2*b.outlineIncrease,f=h*a.iw,d=h*a.ih,c=S(a.fimage,f,d),a.oimage=c,a.fimage=H(a.fimage,a.oimage.width,a.oimage.height)):(f=h*(a.iw+2*b.outlineIncrease),d=h*(a.ih+2*b.outlineIncrease),c=S(a.fimage,f,d),a.oimage=H(c,a.fimage.width,a.fimage.height))))),a.alt=j,a.Init()}function i(a,d){var b=c.defaultView,e=d.replace(/-([a-z])/g,function(a){return a.charAt(1).toUpperCase()});return b&&b.getComputedStyle&&b.getComputedStyle(a,null).getPropertyValue(d)||a.currentStyle&&a.currentStyle[e]}function aj(c,d,e){var b=1,a;return d?b=1*(c.getAttribute(d)||e):(a=i(c,'font-size'))&&(b=a.indexOf('px')>-1&&a.replace('px','')*1||a.indexOf('pt')>-1&&a.replace('pt','')*1.25||a*3.3),b}function u(a){return a.target&&n(a.target.id)?a.target.id:a.srcElement.parentNode.id}function K(a,c){var b,d,e=parseInt(i(c,'width'))/c.width,f=parseInt(i(c,'height'))/c.height;return n(a.offsetX)?b={x:a.offsetX,y:a.offsetY}:(d=X(c.id),n(a.changedTouches)&&(a=a.changedTouches[0]),a.pageX&&(b={x:a.pageX-d.x,y:a.pageY-d.y})),b&&e&&f&&(b.x/=e,b.y/=f),b}function an(c){var d=c.target||c.fromElement.parentNode,b=a.tc[d.id];b&&(b.mx=b.my=-1,b.UnFreeze(),b.EndDrag())}function ad(e){var g,c=a,b,d,f=u(e);for(g in c.tc)b=c.tc[g],b.tttimer&&(clearTimeout(b.tttimer),b.tttimer=null);f&&c.tc[f]&&(b=c.tc[f],(d=K(e,b.canvas))&&(b.mx=d.x,b.my=d.y,b.Drag(e,d)),b.drawn=0)}function ap(b){var e=a,f=c.addEventListener?0:1,d=u(b);d&&b.button==f&&e.tc[d]&&e.tc[d].BeginDrag(b)}function aq(b){var f=a,g=c.addEventListener?0:1,e=u(b),d;e&&b.button==g&&f.tc[e]&&(d=f.tc[e],ad(b),!d.EndDrag()&&!d.touchState&&d.Clicked(b))}function ar(c){var e=u(c),b=e&&a.tc[e],d;b&&c.changedTouches&&(c.touches.length==1&&b.touchState==0?(b.touchState=1,b.BeginDrag(c),(d=K(c,b.canvas))&&(b.mx=d.x,b.my=d.y,b.drawn=0)):c.targetTouches.length==2&&b.pinchZoom?(b.touchState=3,b.EndDrag(),b.BeginPinch(c)):(b.EndDrag(),b.EndPinch(),b.touchState=0))}function ac(c){var d=u(c),b=d&&a.tc[d];if(b&&c.changedTouches){switch(b.touchState){case 1:b.Draw(),b.Clicked();break;break;case 2:b.EndDrag();break;case 3:b.EndPinch()}b.touchState=0}}function au(c){var f,e=a,b,d,g=u(c);for(f in e.tc)b=e.tc[f],b.tttimer&&(clearTimeout(b.tttimer),b.tttimer=null);if(b=g&&e.tc[g],b&&c.changedTouches&&b.touchState){switch(b.touchState){case 1:case 2:(d=K(c,b.canvas))&&(b.mx=d.x,b.my=d.y,b.Drag(c,d)&&(b.touchState=2));break;case 3:b.Pinch(c)}b.drawn=0}}function ab(b){var d=a,c=u(b);c&&d.tc[c]&&(b.cancelBubble=!0,b.returnValue=!1,b.preventDefault&&b.preventDefault(),d.tc[c].Wheel((b.wheelDelta||b.detail)>0))}function aw(d){var c,b=a;clearTimeout(b.scrollTimer);for(c in b.tc)b.tc[c].Pause();b.scrollTimer=setTimeout(function(){var b,c=a;for(b in c.tc)c.tc[b].Resume()},b.scrollPause)}function al(){Z(q())}function Z(b){var c=a.tc,d;a.NextFrame(a.interval),b=b||q();for(d in c)c[d].Draw(b)}function az(){requestAnimationFrame(Z)}function aA(a){setTimeout(al,a)}function X(f){var g=c.getElementById(f),b=g.getBoundingClientRect(),a=c.documentElement,d=c.body,e=window,h=e.pageXOffset||a.scrollLeft,i=e.pageYOffset||a.scrollTop,j=a.clientLeft||d.clientLeft,k=a.clientTop||d.clientTop;return{x:b.left+h-j,y:b.top+i-k}}function aI(a,b,d,e){var c=a.radius*a.z1/(a.z1+a.z2+b.z);return{x:b.x*c*d,y:b.y*c*e,z:b.z,w:(a.z1-b.z)/a.z2}}function V(a){this.e=a,this.br=0,this.line=[],this.text=[],this.original=a.innerText||a.textContent}F=V.prototype,F.Empty=function(){for(var a=0;a<this.text.length;++a)if(this.text[a].length)return!1;return!0},F.Lines=function(c){var e=c?1:0,b,d,a;c=c||this.e,b=c.childNodes,d=b.length;for(a=0;a<d;++a)b[a].nodeName=='BR'?(this.text.push(this.line.join(' ')),this.br=1):b[a].nodeType==3?this.br?(this.line=[b[a].nodeValue],this.br=0):this.line.push(b[a].nodeValue):this.Lines(b[a]);return e||this.br||this.text.push(this.line.join(' ')),this.text},F.SplitWidth=function(h,e,f,g){var c,b,a,d=[];e.font=g+'px '+f;for(c=0;c<this.text.length;++c){a=this.text[c].split(/s+/),this.line=[a[0]];for(b=1;b<a.length;++b)e.measureText(this.line.join(' ')+' '+a[b]).width>h?(d.push(this.line.join(' ')),this.line=[a[b]]):this.line.push(a[b]);d.push(this.line.join(' '))}return this.text=d};function _(a,b){this.ts=null,this.tc=a,this.tag=b,this.x=this.y=this.w=this.h=this.sc=1,this.z=0,this.pulse=1,this.pulsate=a.pulsateTo<1,this.colour=a.outlineColour,this.adash=~~a.outlineDash,this.agap=~~a.outlineDashSpace||this.adash,this.aspeed=a.outlineDashSpeed*1,this.colour=='tag'?this.colour=i(b.a,'color'):this.colour=='tagbg'&&(this.colour=i(b.a,'background-color')),this.Draw=this.pulsate?this.DrawPulsate:this.DrawSimple,this.radius=a.outlineRadius|0,this.SetMethod(a.outlineMethod,a.altImage)}f=_.prototype,f.SetMethod=function(a,d){var b={block:['PreDraw','DrawBlock'],colour:['PreDraw','DrawColour'],outline:['PostDraw','DrawOutline'],classic:['LastDraw','DrawOutline'],size:['PreDraw','DrawSize'],none:['LastDraw']},c=b[a]||b.outline;a=='none'?this.Draw=function(){return 1}:this.drawFunc=this[c[1]],this[c[0]]=this.Draw,d&&(this.RealPreDraw=this.PreDraw,this.PreDraw=this.DrawAlt)},f.Update=function(d,e,i,j,a,f,g,h){var b=this.tc.outlineOffset,c=2*b;this.x=a*d+g-b,this.y=a*e+h-b,this.w=a*i+c,this.h=a*j+c,this.sc=a,this.z=f},f.Ants=function(k){if(!this.adash)return;var b=this.adash,c=this.agap,a=this.aspeed,j=b+c,h=0,g=b,f=c,i=0,d=0,e;a&&(d=p(a)*(q()-this.ts)/50,a<0&&(d=864e4-d),a=~~d%j),a?(b>=a?(h=b-a,g=a):(f=j-a,i=c-f),e=[h,f,g,i]):e=[b,c],k.setLineDash(e)},f.DrawOutline=function(a,d,e,b,c,f){var g=h(this.radius,c/2,b/2);a.strokeStyle=f,this.Ants(a),y(a,d,e,b,c,g,!0)},f.DrawSize=function(i,n,m,l,k,j,a,h,g){var f=a.w,e=a.h,c,b,d;return this.pulsate?(a.image?d=(a.image.height+this.tc.outlineIncrease)/a.image.height:d=a.oscale,b=a.fimage||a.image,c=1+(d-1)*(1-this.pulse),a.h*=c,a.w*=c):b=a.oimage,a.alpha=1,a.Draw(i,h,g,b),a.h=e,a.w=f,1},f.DrawColour=function(d,h,i,e,f,g,a,b,c){return a.oimage?(this.pulse<1?(a.alpha=1-w(this.pulse,2),a.Draw(d,b,c,a.fimage),a.alpha=this.pulse):a.alpha=1,a.Draw(d,b,c,a.oimage),1):this[a.image?'DrawColourImage':'DrawColourText'](d,h,i,e,f,g,a,b,c)},f.DrawColourText=function(f,h,i,j,g,e,a,b,c){var d=a.colour;return a.colour=e,a.alpha=1,a.Draw(f,b,c),a.colour=d,1},f.DrawColourImage=function(a,q,p,o,n,m,i,r,l){var f=a.canvas,e=~~g(q,0),d=~~g(p,0),c=h(f.width-e,o)+.5|0,b=h(f.height-d,n)+.5|0,j;return v?(v.width=c,v.height=b):v=k(c,b),!v?this.SetMethod('outline'):(j=v.getContext('2d'),j.drawImage(f,e,d,c,b,0,0,c,b),a.clearRect(e,d,c,b),this.pulsate?i.alpha=1-w(this.pulse,2):i.alpha=1,i.Draw(a,r,l),a.setTransform(1,0,0,1,0,0),a.save(),a.beginPath(),a.rect(e,d,c,b),a.clip(),a.globalCompositeOperation='source-in',a.fillStyle=m,a.fillRect(e,d,c,b),a.restore(),a.globalAlpha=1,a.globalCompositeOperation='destination-over',a.drawImage(v,0,0,c,b,e,d,c,b),a.globalCompositeOperation='source-over',1)},f.DrawAlt=function(b,a,c,d,f,g){var e=this.RealPreDraw(b,a,c,d,f,g);return a.alt&&(a.DrawImage(b,c,d,a.alt),e=1),e},f.DrawBlock=function(a,d,e,b,c,f){var g=h(this.radius,c/2,b/2);a.fillStyle=f,y(a,d,e,b,c,g)},f.DrawSimple=function(a,b,c,d,e,f){var g=this.tc;return a.setTransform(1,0,0,1,0,0),a.strokeStyle=this.colour,a.lineWidth=g.outlineThickness,a.shadowBlur=a.shadowOffsetX=a.shadowOffsetY=0,a.globalAlpha=f?e:1,this.drawFunc(a,this.x,this.y,this.w,this.h,this.colour,b,c,d)},f.DrawPulsate=function(h,d,e,f){var g=q()-this.ts,c=this.tc,b=c.pulsateTo+(1-c.pulsateTo)*(.5+l(2*Math.PI*g/(1e3*c.pulsateTime))/2);return this.pulse=b=a.Smooth(1,b),this.DrawSimple(h,d,e,f,b,1)},f.Active=function(d,a,b){var c=a>=this.x&&b>=this.y&&a<=this.x+this.w&&b<=this.y+this.h;return c?this.ts=this.ts||q():this.ts=null,c},f.PreDraw=f.PostDraw=f.LastDraw=x;function J(a,h,c,b,e,f,g,d,i,j,k,l,m,n){this.tc=a,this.image=null,this.text=h,this.text_original=n,this.line_widths=[],this.title=c.title||null,this.a=c,this.position=new s(b[0],b[1],b[2]),this.x=this.y=this.z=0,this.w=e,this.h=f,this.colour=g||a.textColour,this.bgColour=d||a.bgColour,this.bgRadius=i|0,this.bgOutline=j||this.colour,this.bgOutlineThickness=k|0,this.textFont=l||a.textFont,this.padding=m|0,this.sc=this.alpha=1,this.weighted=!a.weight,this.outline=new _(a,this),this.audio=null}d=J.prototype,d.Init=function(b){var a=this.tc;this.textHeight=a.textHeight,this.HasText()?this.Measure(a.ctxt,a):(this.w=this.iw,this.h=this.ih),this.SetShadowColour=a.shadowAlpha?this.SetShadowColourAlpha:this.SetShadowColourFixed,this.SetDraw(a)},d.Draw=x,d.HasText=function(){return this.text&&this.text[0].length>0},d.EqualTo=function(a){var b=a.getElementsByTagName('img');return this.a.href!=a.href?0:b.length?this.image.src==b[0].src:(a.innerText||a.textContent)==this.text_original},d.SetImage=function(a){this.image=this.fimage=a},d.SetAudio=function(a){this.audio=a,this.audio.load()},d.SetDraw=function(a){this.Draw=this.fimage?a.ie>7?this.DrawImageIE:this.DrawImage:this.DrawText,a.noSelect&&(this.CheckActive=x)},d.MeasureText=function(d){var a,e=this.text.length,b=0,c;for(a=0;a<e;++a)this.line_widths[a]=c=d.measureText(this.text[a]).width,b=g(b,c);return b},d.Measure=function(e,a){var f=ae(this.text,this.textFont,this.textHeight),b,k,h,i,g,l,j,c,d;j=f?f.max.y+f.min.y:this.textHeight,e.font=this.font=this.textHeight+'px '+this.textFont,l=this.MeasureText(e),a.txtOpt&&(b=a.txtScale,k=b*this.textHeight,h=k+'px '+this.textFont,i=[b*a.shadowOffset[0],b*a.shadowOffset[1]],e.font=h,g=this.MeasureText(e),d=new O(this.text,h,g+b,b*j+b,g,this.line_widths,a.textAlign,a.textVAlign,b),this.image&&d.SetImage(this.image,this.iw,this.ih,a.imagePosition,a.imagePadding,a.imageAlign,a.imageVAlign,a.imageScale),c=d.Create(this.colour,this.bgColour,this.bgOutline,b*this.bgOutlineThickness,a.shadow,b*a.shadowBlur,i,b*this.padding,b*this.bgRadius),a.outlineMethod=='colour'?this.oimage=d.Create(this.outline.colour,this.bgColour,this.outline.colour,b*this.bgOutlineThickness,a.shadow,b*a.shadowBlur,i,b*this.padding,b*this.bgRadius):a.outlineMethod=='size'&&(f=ae(this.text,this.textFont,this.textHeight+a.outlineIncrease),k=f.max.y+f.min.y,h=b*(this.textHeight+a.outlineIncrease)+'px '+this.textFont,e.font=h,g=this.MeasureText(e),d=new O(this.text,h,g+b,b*k+b,g,this.line_widths,a.textAlign,a.textVAlign,b),this.image&&d.SetImage(this.image,this.iw+a.outlineIncrease,this.ih+a.outlineIncrease,a.imagePosition,a.imagePadding,a.imageAlign,a.imageVAlign,a.imageScale),this.oimage=d.Create(this.colour,this.bgColour,this.bgOutline,b*this.bgOutlineThickness,a.shadow,b*a.shadowBlur,i,b*this.padding,b*this.bgRadius),this.oscale=this.oimage.width/c.width,a.outlineIncrease>0?c=H(c,this.oimage.width,this.oimage.height):this.oimage=H(this.oimage,c.width,c.height)),c&&(this.fimage=c,l=this.fimage.width/b,j=this.fimage.height/b),this.SetDraw(a),a.txtOpt=!!this.fimage),this.h=j,this.w=l},d.SetFont=function(a,b,c,d){this.textFont=a,this.colour=b,this.bgColour=c,this.bgOutline=d,this.Measure(this.tc.ctxt,this.tc)},d.SetWeight=function(c){var b=this.tc,e=b.weightMode.split(/[, ]/),d,a,f=c.length;if(!this.HasText())return;this.weighted=!0;for(a=0;a<f;++a)d=e[a]||'size','both'==d?(this.Weight(c[a],b.ctxt,b,'size',b.min_weight[a],b.max_weight[a],a),this.Weight(c[a],b.ctxt,b,'colour',b.min_weight[a],b.max_weight[a],a)):this.Weight(c[a],b.ctxt,b,d,b.min_weight[a],b.max_weight[a],a);this.Measure(b.ctxt,b)},d.Weight=function(b,i,a,d,f,h,e){b=isNaN(b)?1:b;var c=(b-f)/(h-f);'colour'==d?this.colour=L(a,c,e):'bgcolour'==d?this.bgColour=L(a,c,e):'bgoutline'==d?this.bgOutline=L(a,c,e):'outline'==d?this.outline.colour=L(a,c,e):'size'==d&&(a.weightSizeMin>0&&a.weightSizeMax>a.weightSizeMin?this.textHeight=a.weightSize*(a.weightSizeMin+(a.weightSizeMax-a.weightSizeMin)*c):this.textHeight=g(1,b*a.weightSize))},d.SetShadowColourFixed=function(a,b,c){a.shadowColor=b},d.SetShadowColourAlpha=function(a,b,c){a.shadowColor=aE(b,c)},d.DrawText=function(a,h,i){var e=this.tc,g=this.x,f=this.y,c=this.sc,b,d;a.globalAlpha=this.alpha,a.fillStyle=this.colour,e.shadow&&this.SetShadowColour(a,e.shadow,this.alpha),a.font=this.font,g+=h/c,f+=i/c-this.h/2;for(b=0;b<this.text.length;++b)d=g,'right'==e.textAlign?d+=this.w/2-this.line_widths[b]:'centre'==e.textAlign?d-=this.line_widths[b]/2:d-=this.w/2,a.setTransform(c,0,0,c,c*d,c*f),a.fillText(this.text[b],0,0),f+=this.textHeight},d.DrawImage=function(b,i,k,l){var e=this.x,f=this.y,a=this.sc,j=l||this.fimage,c=this.w,d=this.h,g=this.alpha,h=this.shadow;b.globalAlpha=g,h&&this.SetShadowColour(b,h,g),e+=i/a-c/2,f+=k/a-d/2,b.setTransform(a,0,0,a,a*e,a*f),b.drawImage(j,0,0,c,d)},d.DrawImageIE=function(b,d,e){var c=this.fimage,a=this.sc,f=c.width=this.w*a,g=c.height=this.h*a,h=this.x*a+d-f/2,i=this.y*a+e-g/2;b.setTransform(1,0,0,1,0,0),b.globalAlpha=this.alpha,b.drawImage(c,h,i)},d.Calc=function(g,e){var a,b=this.tc,d=b.minBrightness,f=b.maxBrightness,c=b.max_radius;return a=g.xform(this.position),this.xformed=a,a=aI(b,a,b.stretchX,b.stretchY),this.x=a.x,this.y=a.y,this.z=a.z,this.sc=a.w,this.alpha=e*G(d+(f-d)*(c-this.z)/(2*c),0,1),this.xformed},d.UpdateActive=function(h,e,f){var a=this.outline,b=this.w,c=this.h,d=this.x-b/2,g=this.y-c/2;return a.Update(d,g,b,c,this.sc,this.z,e,f),a},d.CheckActive=function(a,d,e){var b=this.tc,c=this.UpdateActive(a,d,e);return c.Active(a,b.mx,b.my)?c:null},d.Clicked=function(f){var b=this.a,a=b.target,d=b.href,e;if(a!=''&&a!='_self'){if(self.frames[a])self.frames[a].document.location=d;else{try{if(top.frames[a]){top.frames[a].document.location=d;return}}catch(a){}window.open(d,a)}return}if(c.createEvent){if(e=c.createEvent('MouseEvents'),e.initMouseEvent('click',1,1,window,0,0,0,0,0,0,0,0,0,0,null),!b.dispatchEvent(e))return}else if(b.fireEvent)if(!b.fireEvent('onclick'))return;c.location=d},d.StopAudio=function(){this.audio&&this.playing&&this.audio.pause(),this.stopped=1,this.playing=0},d.PlayAudio=function(){if(e==='off'||this.tc.audioOff)return;if(!e&&!ag())return;var a=this.tc.audio,c=this.tc.gain,d='suspended',b;if(this.audio)if(this.track||(this.track=e.createMediaElementSource(this.audio),this.gain=e.createGain(),this.track.connect(this.gain),this.gain.connect(e.destination)),a=this.audio,c=this.gain,!a.paused)return 1;if(a){if(e.state==d&&e.resume(),e.state==d)return;return c.gain.value=h(2,g(0,this.tc.audioVolume*1)),a.currentTime=0,this.stopped=0,b=a.play(),b!==void 0&&b.then(a=>{this.stopped?this.audio.pause():this.playing=1}),1}};function a(f,o,k){var d,i,b=c.getElementById(f),l=['id','class','innerHTML'];if(!b)throw 0;if(n(window.G_vmlCanvasManager)&&(b=window.G_vmlCanvasManager.initElement(b),this.ie=parseFloat(navigator.appVersion.split('MSIE')[1])),b&&(!b.getContext||!b.getContext('2d').fillText)){i=c.createElement('DIV');for(d=0;d<l.length;++d)i[l[d]]=b[l[d]];throw b.parentNode.insertBefore(i,b),b.parentNode.removeChild(b),0}for(d in a.options)this[d]=k&&n(k[d])?k[d]:n(a[d])?a[d]:a.options[d];if(this.canvas=b,this.ctxt=b.getContext('2d'),this.z1=250/g(this.depth,.001),this.z2=this.z1/this.zoom,this.radius=h(b.height,b.width)*.0075,this.max_radius=100,this.max_weight=[],this.min_weight=[],this.textFont=this.textFont&&Q(this.textFont),this.textHeight*=1,this.imageRadius=this.imageRadius.toString(),this.pulsateTo=G(this.pulsateTo,0,1),this.minBrightness=G(this.minBrightness,0,1),this.maxBrightness=G(this.maxBrightness,this.minBrightness,1),this.ctxt.textBaseline='top',this.lx=(this.lock+'').indexOf('x')+1,this.ly=(this.lock+'').indexOf('y')+1,this.frozen=this.dx=this.dy=this.fixedAnim=this.touchState=0,this.fixedAlpha=1,this.source=o||f,this.repeatTags=h(64,~~this.repeatTags),this.minTags=h(200,~~this.minTags),~~this.scrollPause>0?a.scrollPause=~~this.scrollPause:this.scrollPause=0,this.minTags>0&&this.repeatTags<1&&(d=this.GetTags().length)&&(this.repeatTags=af(this.minTags/d)-1),this.transform=m.Identity(),this.startTime=this.time=q(),this.mx=this.my=-1,this.centreImage&&av(this),this.Animate=this.dragControl?this.AnimateDrag:this.AnimatePosition,this.animTiming=typeof a[this.animTiming]=='function'?a[this.animTiming]:a.Smooth,this.shadowBlur||this.shadowOffset[0]||this.shadowOffset[1]?(this.ctxt.shadowColor=this.shadow,this.shadow=this.ctxt.shadowColor,this.shadowAlpha=aD()):delete this.shadow,this.activeAudio===!1?e='off':this.activeAudio&&this.LoadAudio(),this.Load(),o&&this.hideTags&&function(b){a.loaded?b.HideTags():t('load',function(){b.HideTags()},window)}(this),this.yaw=this.initial?this.initial[0]*this.maxSpeed:0,this.pitch=this.initial?this.initial[1]*this.maxSpeed:0,this.tooltip?(this.ctitle=b.title,b.title='',this.tooltip=='native'?this.Tooltip=this.TooltipNative:(this.Tooltip=this.TooltipDiv,this.ttdiv||(this.ttdiv=c.createElement('div'),this.ttdiv.className=this.tooltipClass,this.ttdiv.style.position='absolute',this.ttdiv.style.zIndex=b.style.zIndex+1,t('mouseover',function(a){a.target.style.display='none'},this.ttdiv),c.body.appendChild(this.ttdiv)))):this.Tooltip=this.TooltipNone,!this.noMouse&&!j[f]){j[f]=[['mousemove',ad],['mouseout',an],['mouseup',aq],['touchstart',ar],['touchend',ac],['touchcancel',ac],['touchmove',au]],this.dragControl&&(j[f].push(['mousedown',ap]),j[f].push(['selectstart',x])),this.wheelZoom&&(j[f].push(['mousewheel',ab]),j[f].push(['DOMMouseScroll',ab])),this.scrollPause&&j[f].push(['scroll',aw,window]);for(d=0;d<j[f].length;++d)i=j[f][d],t(i[0],i[1],i[2]?i[2]:b)}a.started||(a.NextFrame=window.requestAnimationFrame?az:aA,a.interval=this.interval,a.NextFrame(this.interval),a.started=1)}b=a.prototype,b.SourceElements=function(){return c.querySelectorAll?c.querySelectorAll('#'+this.source):[c.getElementById(this.source)]},b.HideTags=function(){var b=this.SourceElements(),a;for(a=0;a<b.length;++a)b[a].style.display='none'},b.GetTags=function(){var e=this.SourceElements(),c,f=[],a,b,d;for(d=0;d<=this.repeatTags;++d)for(a=0;a<e.length;++a){c=e[a].getElementsByTagName('a');for(b=0;b<c.length;++b)f.push(c[b])}return f},b.Message=function(j){var g=[],a,f,b=j.split(''),d,e,h,i;for(a=0;a<b.length;++a)b[a]!=' '&&(f=a-b.length/2,d=c.createElement('A'),d.href='#',d.innerText=b[a],h=100*o(f/9),i=-100*l(f/9),e=new J(this,b[a],d,[h,0,i],2,18,'#000','#fff',0,0,0,'monospace',2,b[a]),e.Init(),g.push(e));return g},b.AddAudio=function(b,c){if(e==='off')return;var a=b.getElementsByTagName('audio');a.length&&(c.SetAudio(a[0]),this.hasAudio=1)},b.CreateTag=function(b){var e,c,a,f,d,g,h,j,k=[0,0,0],l;if('text'!=this.imageMode)if(e=b.getElementsByTagName('img'),e.length)if(c=new Image,c.src=e[0].src,!this.imageMode)return a=new J(this,"",b,k,0,0),a.SetImage(c),A(c,e[0],e[1],a,this),this.AddAudio(b,a),a;if('image'!=this.imageMode&&(d=new V(b),f=d.Lines(),d.Empty()?d=null:(g=this.textFont||Q(i(b,'font-family')),this.splitWidth&&(f=d.SplitWidth(this.splitWidth,this.ctxt,g,this.textHeight)),h=this.bgColour=='tag'?i(b,'background-color'):this.bgColour,j=this.bgOutline=='tag'?i(b,'color'):this.bgOutline)),d||c)return a=new J(this,f,b,k,2,this.textHeight+2,this.textColour||i(b,'color'),h,this.bgRadius,j,this.bgOutlineThickness,g,this.padding,d&&d.original),c?(a.SetImage(c),A(c,e[0],e[1],a,this)):a.Init(),this.AddAudio(b,a),a},b.UpdateTag=function(a,b){var c=this.textColour||i(b,'color'),d=this.textFont||Q(i(b,'font-family')),e=this.bgColour=='tag'?i(b,'background-color'):this.bgColour,f=this.bgOutline=='tag'?i(b,'color'):this.bgOutline;a.a=b,a.title=b.title,(a.colour!=c||a.textFont!=d||a.bgColour!=e||a.bgOutline!=f)&&a.SetFont(d,c,e,f)},b.Weight=function(d){var f=d.length,c,b,a,e=[],g,h=this.weightFrom?this.weightFrom.split(/[, ]/):[null],i=h.length;for(b=0;b<f;++b){e[b]=[];for(a=0;a<i;++a)c=aj(d[b].a,h[a],this.textHeight),(!this.max_weight[a]||c>this.max_weight[a])&&(this.max_weight[a]=c),(!this.min_weight[a]||c<this.min_weight[a])&&(this.min_weight[a]=c),e[b][a]=c}for(a=0;a<i;++a)this.max_weight[a]>this.min_weight[a]&&(g=1);if(g)for(b=0;b<f;++b)d[b].SetWeight(e[b])},b.Load=function(){var c=this.GetTags(),b=[],d,k,l,h,i,j,f,a,e=[],m={sphere:aB,vcylinder:ax,hcylinder:aH,vring:aG,hring:aF};if(c.length){e.length=c.length;for(a=0;a<c.length;++a)e[a]=a;this.shuffleTags&&ai(e),h=100*this.radiusX,i=100*this.radiusY,j=100*this.radiusZ,this.max_radius=g(h,g(i,j));for(a=0;a<c.length;++a)k=this.CreateTag(c[e[a]]),k&&b.push(k);this.weight&&this.Weight(b,!0),this.shapeArgs?this.shapeArgs[0]=b.length:(l=this.shape.toString().split(/[(),]/),d=l.shift(),typeof window[d]=='function'?this.shape=window[d]:this.shape=m[d]||m.sphere,this.shapeArgs=[b.length,h,i,j].concat(l)),f=this.shape.apply(this,this.shapeArgs),this.listLength=b.length;for(a=0;a<b.length;++a)b[a].position=new s(f[a][0],f[a][1],f[a][2])}this.noTagsMessage&&!b.length&&(a=this.imageMode&&this.imageMode!='both'?this.imageMode+' ':'',b=this.Message('No '+a+'tags')),this.taglist=b},b.Update=function(){var e=this.GetTags(),d=[],j=this.taglist,k,f=[],c=[],h,i,g,a,b;if(!this.shapeArgs)return this.Load();if(e.length){g=this.listLength=e.length,i=j.length;for(a=0;a<i;++a)d.push(j[a]),c.push(a);for(a=0;a<g;++a){for(b=0,k=0;b<i;++b)j[b].EqualTo(e[a])&&(this.UpdateTag(d[b],e[a]),k=c[b]=-1);k||f.push(a)}for(a=0,b=0;a<i;++a)c[b]==-1?c.splice(b,1):++b;if(c.length){for(ai(c);c.length&&f.length;)a=c.shift(),b=f.shift(),d[a]=this.CreateTag(e[b]);for(c.sort(function(a,b){return a-b});c.length;)d.splice(c.pop(),1)}for(b=d.length/(f.length+1),a=0;f.length;)d.splice(af(++a*b),0,this.CreateTag(e[f.shift()]));this.shapeArgs[0]=g=d.length,h=this.shape.apply(this,this.shapeArgs);for(a=0;a<g;++a)d[a].position=new s(h[a][0],h[a][1],h[a][2]);this.weight&&this.Weight(d)}this.taglist=d},b.SetShadow=function(a){a.shadowBlur=this.shadowBlur,a.shadowOffsetX=this.shadowOffset[0],a.shadowOffsetY=this.shadowOffset[1]},b.LoadAudio=function(){if(!e&&!ag())return;this.audio=c.createElement('audio'),this.audio.src=this.activeAudio,this.track=e.createMediaElementSource(this.audio),this.gain=e.createGain(),this.track.connect(this.gain),this.gain.connect(e.destination),this.hasAudio=1,P=function(a){e.resume(),c.removeEventListener('click',P)},c.addEventListener('click',P)},b.ShowAudioIcon=function(){var a=this.audioIconSize,c=this.canvas,d=this.ctxt,k=c.width-a-3,f=c.height-a-3,g=this.audioIconThickness,h='#000',i='#fff',j=this.audioIconDark,b=this.audioOff,l='suspended';if(!e)return;b||(b=e.state===l),this.audioIcon&&this.hasAudio&&($(b,d,a,k,f,g+1,j?i:h),$(b,d,a,k,f,g,j?h:i))},b.CheckAudioIcon=function(){var a=this.audioIconSize,b=this.canvas,c=this.audioIconThickness/2,d=b.width-a-3-c,e=b.height-a-3-c;if(this.audioIcon&&this.mx>=d&&this.my>=e)return!0},b.ToggleAudio=function(){var a=this.audioOff||e&&e.state==='suspended';a||this.currentAudio&&this.currentAudio.StopAudio(),this.audioOff=!a},b.Draw=function(s){if(this.paused)return;var l=this.canvas,i=l.width,j=l.height,q=0,p=(s-this.time)*a.interval/1e3,h=i/2+this.offsetX,g=j/2+this.offsetY,d=this.ctxt,b,f,c,o=-1,e=this.taglist,k=e.length,t=this.active&&this.active.tag,m='',u=this.frontSelect,r=this.centreFunc==x,n;if(this.time=s,this.frozen&&this.drawn)return this.Animate(i,j,p);n=this.AnimateFixed(),d.setTransform(1,0,0,1,0,0);for(c=0;c<k;++c)e[c].Calc(this.transform,this.fixedAlpha);if(e=ak(e,function(a,b){return b.z-a.z}),n&&this.fixedAnim.active)b=this.fixedAnim.tag.UpdateActive(d,h,g);else if(this.active=null,this.CheckAudioIcon())m='pointer';else{for(c=0;c<k;++c)f=this.mx>=0&&this.my>=0&&this.taglist[c].CheckActive(d,h,g),f&&f.sc>q&&(!u||f.z<=0)&&(b=f,o=c,b.tag=this.taglist[c],q=f.sc);this.active=b}this.txtOpt||this.shadow&&this.SetShadow(d),d.clearRect(0,0,i,j);for(c=0;c<k;++c){if(!r&&e[c].z<=0){try{this.centreFunc(d,i,j,h,g)}catch(a){alert(a),this.centreFunc=x}r=!0}b&&b.tag==e[c]&&b.PreDraw(d,e[c],h,g)||e[c].Draw(d,h,g),b&&b.tag==e[c]&&b.PostDraw(d)}this.freezeActive&&b?this.Freeze():(this.UnFreeze(),this.drawn=k==this.listLength),this.fixedCallback&&(this.fixedCallback(this,this.fixedCallbackTag),this.fixedCallback=null),n||this.Animate(i,j,p),b&&(b.LastDraw(d),b.tag!=t&&(this.currentAudio&&this.currentAudio!=b.tag&&this.currentAudio.StopAudio(),b.tag.PlayAudio()&&(this.currentAudio=b.tag)),m=this.activeCursor),l.style.cursor=m,this.Tooltip(b,this.taglist[o]),this.audioIcon&&this.ShowAudioIcon()},b.TooltipNone=function(){},b.TooltipNative=function(b,a){b?this.canvas.title=a&&a.title?a.title:'':this.canvas.title=this.ctitle},b.SetTTDiv=function(c,d){var a=this,b=a.ttdiv.style;c!=a.ttdiv.innerHTML&&(b.display='none'),a.ttdiv.innerHTML=c,d&&(d.title=a.ttdiv.innerHTML),b.display=='none'&&!a.tttimer&&(a.tttimer=setTimeout(function(){var c=X(a.canvas.id);b.display='block',b.left=c.x+a.mx+'px',b.top=c.y+a.my+24+'px',a.tttimer=null},a.tooltipDelay))},b.TooltipDiv=function(b,a){b&&a&&a.title?this.SetTTDiv(a.title,a):!b&&this.mx!=-1&&this.my!=-1&&this.ctitle.length?this.SetTTDiv(this.ctitle):this.ttdiv.style.display='none'},b.Transform=function(c,a,b){if(a||b){var d=o(a),e=l(a),f=o(b),g=l(b),h=new m([g,0,f,0,1,0,-f,0,g]),i=new m([1,0,0,0,e,-d,0,d,e]);c.transform=c.transform.mul(h.mul(i))}},b.AnimateFixed=function(){var a,b,c,d,e;return!!(this.fadeIn&&(b=q()-this.startTime,b>=this.fadeIn?(this.fadeIn=0,this.fixedAlpha=1):this.fixedAlpha=b/this.fadeIn),this.fixedAnim)&&(this.fixedAnim.transform||(this.fixedAnim.transform=this.transform),a=this.fixedAnim,b=q()-a.t0,c=a.angle,d,e=this.animTiming(a.t,b),this.transform=a.transform,b>=a.t?(this.fixedCallbackTag=a.tag,this.fixedCallback=a.cb,this.fixedAnim=this.yaw=this.pitch=0):c*=e,d=m.Rotation(c,a.axis),this.transform=this.transform.mul(d),this.fixedAnim!=0)},b.AnimatePosition=function(g,h,f){var a=this,d=a.mx,e=a.my,b,c;!a.frozen&&d>=0&&e>=0&&d<g&&e<h?(b=a.maxSpeed,c=a.reverse?-1:1,a.lx||(a.yaw=(d*2*b/g-b)*c*f),a.ly||(a.pitch=(e*2*b/h-b)*-c*f),a.initial=null):a.initial||(a.frozen&&!a.freezeDecel?a.yaw=a.pitch=0:a.Decel(a)),this.Transform(a,a.pitch,a.yaw)},b.AnimateDrag=function(d,e,c){var a=this,b=100*c*a.maxSpeed/a.max_radius/a.zoom;a.dx||a.dy?(a.lx||(a.yaw=a.dx*b/a.stretchX),a.ly||(a.pitch=a.dy*-b/a.stretchY),a.dx=a.dy=0,a.initial=null):a.initial||a.Decel(a),this.Transform(a,a.pitch,a.yaw)},b.Freeze=function(){this.frozen||(this.preFreeze=[this.yaw,this.pitch],this.frozen=1,this.drawn=0)},b.UnFreeze=function(){this.frozen&&(this.yaw=this.preFreeze[0],this.pitch=this.preFreeze[1],this.frozen=0)},b.Decel=function(a){var b=a.minSpeed,c=p(a.yaw),d=p(a.pitch);!a.lx&&c>b&&(a.yaw=c>a.z0?a.yaw*a.decel:0),!a.ly&&d>b&&(a.pitch=d>a.z0?a.pitch*a.decel:0)},b.Zoom=function(a){this.z2=this.z1*(1/a),this.drawn=0},b.Clicked=function(b){if(this.CheckAudioIcon()){this.ToggleAudio();return}var a=this.active;try{a&&a.tag&&(this.clickToFront===!1||this.clickToFront===null?a.tag.Clicked(b):this.TagToFront(a.tag,this.clickToFront,function(){a.tag.Clicked(b)},!0))}catch(a){}},b.Wheel=function(a){var b=this.zoom+this.zoomStep*(a?1:-1);this.zoom=h(this.zoomMax,g(this.zoomMin,b)),this.Zoom(this.zoom)},b.BeginDrag=function(a){this.down=K(a,this.canvas),a.cancelBubble=!0,a.returnValue=!1,a.preventDefault&&a.preventDefault()},b.Drag=function(e,a){if(this.dragControl&&this.down){var d=this.dragThreshold*this.dragThreshold,b=a.x-this.down.x,c=a.y-this.down.y;(this.dragging||b*b+c*c>d)&&(this.dx=b,this.dy=c,this.dragging=1,this.down=a)}return this.dragging},b.EndDrag=function(){var a=this.dragging;return this.dragging=this.down=null,a};function ah(a){var b=a.targetTouches[0],c=a.targetTouches[1];return E(w(c.pageX-b.pageX,2)+w(c.pageY-b.pageY,2))}b.BeginPinch=function(a){this.pinched=[ah(a),this.zoom],a.preventDefault&&a.preventDefault()},b.Pinch=function(d){var b,c,a=this.pinched;if(!a)return;c=ah(d),b=a[1]*c/a[0],this.zoom=h(this.zoomMax,g(this.zoomMin,b)),this.Zoom(this.zoom)},b.EndPinch=function(a){this.pinched=null},b.Pause=function(){this.paused=!0},b.Resume=function(){this.paused=!1},b.SetSpeed=function(a){this.initial=a,this.yaw=a[0]*this.maxSpeed,this.pitch=a[1]*this.maxSpeed},b.FindTag=function(a){if(!n(a))return null;if(n(a.index)&&(a=a.index),!B(a))return this.taglist[a];var c,d,b;n(a.id)?(c='id',d=a.id):n(a.text)&&(c='innerText',d=a.text);for(b=0;b<this.taglist.length;++b)if(this.taglist[b].a[c]==d)return this.taglist[b]},b.RotateTag=function(a,h,i,j,f,g){var b=a.Calc(this.transform,1),c=new s(b.x,b.y,b.z),d=ay(i,h),e=c.angle(d),k=c.cross(d).unit();e==0?(this.fixedCallbackTag=a,this.fixedCallback=f):this.fixedAnim={angle:-e,axis:k,t:j,t0:q(),cb:f,tag:a,active:g}},b.TagToFront=function(a,b,c,d){this.RotateTag(a,0,0,b,c,d)},b.Volume=function(a){this.audioVolume=a*1},a.Start=function(b,c,d){a.Delete(b),a.tc[b]=new a(b,c,d)};function N(c,b){a.tc[b]&&a.tc[b][c]()}a.Linear=function(a,b){return b/a},a.Smooth=function(a,b){return.5-l(b*Math.PI/a)/2},a.Pause=function(a){N('Pause',a)},a.Resume=function(a){N('Resume',a)},a.Reload=function(a){N('Load',a)},a.Update=function(a){N('Update',a)},a.SetSpeed=function(c,b){return!!(B(b)&&a.tc[c]&&!isNaN(b[0])&&!isNaN(b[1]))&&(a.tc[c].SetSpeed(b),!0)},a.TagToFront=function(c,b){return!!B(b)&&(b.lat=b.lng=0,a.RotateTag(c,b))},a.RotateTag=function(c,b){if(B(b)&&a.tc[c]){isNaN(b.time)&&(b.time=500);var d=a.tc[c].FindTag(b);if(d)return a.tc[c].RotateTag(d,b.lat,b.lng,b.time,b.callback,b.active),!0}return!1},a.Delete=function(b){var d,e;if(j[b])if(e=c.getElementById(b),e)for(d=0;d<j[b].length;++d)am(j[b][d][0],j[b][d][1],e);delete j[b],delete a.tc[b]},a.tc={},a.options={z1:2e4,z2:2e4,z0:2e-4,freezeActive:!1,freezeDecel:!1,activeCursor:'pointer',pulsateTo:1,pulsateTime:3,reverse:!1,depth:.5,maxSpeed:.05,minSpeed:0,decel:.95,interval:20,minBrightness:.1,maxBrightness:1,outlineColour:'#ffff99',outlineThickness:2,outlineOffset:5,outlineMethod:'outline',outlineRadius:0,textColour:'#ff99ff',textHeight:15,textFont:'Helvetica, Arial, sans-serif',shadow:'#000',shadowBlur:0,shadowOffset:[0,0],initial:null,hideTags:!0,zoom:1,weight:!1,weightMode:'size',weightFrom:null,weightSize:1,weightSizeMin:null,weightSizeMax:null,weightGradient:{0:'#f00',0.33:'#ff0',0.66:'#0f0',1:'#00f'},txtOpt:!0,txtScale:2,frontSelect:!1,wheelZoom:!0,zoomMin:.3,zoomMax:3,zoomStep:.05,shape:'sphere',lock:null,tooltip:null,tooltipDelay:300,tooltipClass:'tctooltip',radiusX:1,radiusY:1,radiusZ:1,stretchX:1,stretchY:1,offsetX:0,offsetY:0,shuffleTags:!1,noSelect:!1,noMouse:!1,imageScale:1,paused:!1,dragControl:!1,dragThreshold:4,centreFunc:x,splitWidth:0,animTiming:'Smooth',clickToFront:!1,fadeIn:0,padding:0,bgColour:null,bgRadius:0,bgOutline:null,bgOutlineThickness:0,outlineIncrease:4,textAlign:'centre',textVAlign:'middle',imageMode:null,imagePosition:null,imagePadding:2,imageAlign:'centre',imageVAlign:'middle',noTagsMessage:!0,centreImage:null,pinchZoom:!1,repeatTags:0,minTags:0,imageRadius:0,scrollPause:!1,outlineDash:0,outlineDashSpace:0,outlineDashSpeed:1,activeAudio:'',audioVolume:1,audioIcon:1,audioIconSize:20,audioIconThickness:2,audioIconDark:0,altImage:0};for(r in a.options)a[r]=a.options[r];window.TagCanvas=a,t('load',function(){a.loaded=1},window)})()`,s=function(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)},guid=function(){return""+s()+s()+"-"+s()+"-"+s()+"-"+s()+"-"+s()+s()+s()},UseInViewport=function(t){var e=t.cb,a=t.children,c=React.useRef(null);return React.useEffect(function(){var h={root:null,rootMargin:"0px",threshold:.1},d=function(g){e(g.some(function(y){return y.isIntersecting}))},f=new IntersectionObserver(d,h);return c!=null&&c.current&&f.observe(c.current),function(){f.disconnect()}},[e]),React.createElement("div",{ref:c},a)},isScriptLoaded=!1,tr=function(t){try{t()}catch{try{t()}catch{}}},CloudWrapped=function CloudWrapped(_ref){var _ref$options=_ref.options,options=_ref$options===void 0?{}:_ref$options,_ref$containerProps=_ref.containerProps,containerProps=_ref$containerProps===void 0?{}:_ref$containerProps,_ref$canvasProps=_ref.canvasProps,canvasProps=_ref$canvasProps===void 0?{}:_ref$canvasProps,children=_ref.children,_ref$id=_ref.id,id=_ref$id===void 0?guid():_ref$id,state=React.useRef({canvasContainerId:"canvas-container-"+id,canvasId:"canvas-"+id,hasStarted:!1}).current,_React$useState=React.useState(!1),mounted=_React$useState[0],setMounted=_React$useState[1];React.useEffect(function(){return setMounted(!0),function(){return tr(function(){eval("TagCanvas.Delete('"+state.canvasId+"')")})}},[]);var supportsTouch=typeof window<"u"?"ontouchstart"in window||navigator.maxTouchPoints:!1,ops=JSON.stringify(_extends({dragControl:!!supportsTouch,maxSpeed:supportsTouch?.01:.05,textFont:null,textColour:null},options)),onVisibilityChange=function onVisibilityChange(isVisible){return tr(function(){if(isVisible&&mounted)if(isScriptLoaded||(eval(tagCanvasString),isScriptLoaded=!0),state.hasStarted)eval("TagCanvas.Resume('"+state.canvasId+"')");else try{eval("TagCanvas.Start('"+state.canvasId+"', null, "+ops+")"),state.hasStarted=!0}catch(l){var el=document.getElementById(state.canvasContainerId);throw el&&(el.style.display="none"),l}else state.hasStarted&&eval("TagCanvas.Pause('"+state.canvasId+"')")})};return React.createElement(UseInViewport,{cb:onVisibilityChange},React.createElement("div",Object.assign({id:state.canvasContainerId},containerProps),React.createElement("canvas",Object.assign({id:state.canvasId,style:{width:"100%",maxWidth:"70vh"},width:1e3,height:1e3},canvasProps),children)))},Cloud$1=function l(t){return React.createElement(CloudWrapped,Object.assign({},t,{key:guid()}))},addHash=function l(t){return t[0]==="#"?t:"#"+t},renderSimpleIcon=function l(t){var e=t.aProps,a=e===void 0?{}:e,c=t.bgHex,h=c===void 0?"#fff":c,d=t.fallbackHex,f=d===void 0?"#000":d,m=t.icon,g=t.imgProps,y=g===void 0?{}:g,w=t.minContrastRatio,E=w===void 0?1:w,S=t.size,C=S===void 0?42:S,T=addHash(m.hex),k=addHash(h),D=addHash(f),N=tt(k,T)>E,L=_(N?T:D),j=L.map(function(ft){return Math.round(ft/100*255)}),F=j[0],$=j[1],G=j[2],nt='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" style="fill: rgb('+F+", "+$+", "+G+');" viewBox="0 0 24 24" height="'+C+'px" width="'+C+'px"> <title>'+m.title+'</title> <path d="'+m.path+'"></path> </svg>',ot=_extends({key:guid(),title:m.title,style:{cursor:"pointer"}},a),ct=_extends({height:C,width:C,alt:m.title,src:nt},y);return React.createElement("a",Object.assign({},ot),React.createElement("img",Object.assign({},ct)))},svgToPath=function l(t){var e=t.indexOf('d="'),a=t.indexOf('"',e+3);return t.substring(e+3,a)},url="https://cdn.jsdelivr.net/npm/simple-icons@14.0.0/icons/",cache={},fallback="",getSlugPath=(function(){var l=_asyncToGenerator(_regeneratorRuntime().mark(function t(e){var a,c,h,d;return _regeneratorRuntime().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(cache[e]){m.next=15;break}return m.prev=1,a=""+url+e+".svg",m.next=5,fetch(a,{cache:"force-cache"});case 5:return c=m.sent,m.next=8,c.text();case 8:h=m.sent,d=svgToPath(h),cache[e]=d,m.next=15;break;case 13:m.prev=13,m.t0=m.catch(1);case 15:if(!cache[e]){m.next=17;break}return m.abrupt("return",cache[e]);case 17:return m.abrupt("return",fallback);case 18:case"end":return m.stop()}},t,null,[[1,13]])}));return function(e){return l.apply(this,arguments)}})(),getSlugsPath=(function(){var l=_asyncToGenerator(_regeneratorRuntime().mark(function t(e){var a;return _regeneratorRuntime().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return a={},e.forEach(function(d){a[d]=d}),h.next=4,Promise.all(Object.keys(a).map(getSlugPath));case 4:return h.abrupt("return",e.map(function(d){var f;return{slug:d,path:(f=cache[d])!=null?f:fallback}}));case 5:case"end":return h.stop()}},t)}));return function(e){return l.apply(this,arguments)}})(),TITLE_TO_SLUG_REPLACEMENTS={"+":"plus",".":"dot","&":"and",:"d",:"h",:"i",:"k",:"l",:"l",:"ss",:"t"},TITLE_TO_SLUG_CHARS_REGEX=RegExp("["+Object.keys(TITLE_TO_SLUG_REPLACEMENTS).join("")+"]","g"),TITLE_TO_SLUG_RANGE_REGEX=/[^a-z0-9]/g,getSlug=function l(t){var e=t.title;return e.toLowerCase().replace(TITLE_TO_SLUG_CHARS_REGEX,function(a){return TITLE_TO_SLUG_REPLACEMENTS[a]}).normalize("NFD").replace(TITLE_TO_SLUG_RANGE_REGEX,"")},url$1="https://raw.githubusercontent.com/simple-icons/simple-icons/14.0.0/_data/simple-icons.json",cache$1,fallback$1="#000",primeCache=(function(){var l=_asyncToGenerator(_regeneratorRuntime().mark(function t(){var e,a;return _regeneratorRuntime().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(cache$1){h.next=14;break}return h.prev=1,h.next=4,fetch(url$1,{cache:"force-cache"});case 4:return e=h.sent,h.next=7,e.json();case 7:a=h.sent,cache$1={},a.forEach(function(d){var f,m=getSlug({title:d.title});cache$1[m]={hex:addHash((f=d.hex)!=null?f:fallback$1),title:d.title,slug:m}}),h.next=14;break;case 12:h.prev=12,h.t0=h.catch(1);case 14:case"end":return h.stop()}},t,null,[[1,12]])}));return function(){return l.apply(this,arguments)}})(),getSlugHexs=(function(){var l=_asyncToGenerator(_regeneratorRuntime().mark(function t(e){return _regeneratorRuntime().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,primeCache();case 2:return c.abrupt("return",{hexs:e.map(function(h){var d,f,m,g;return{slug:h,hex:cache$1&&(d=(f=cache$1[h])==null?void 0:f.hex)!=null?d:fallback$1,title:cache$1&&(m=(g=cache$1[h])==null?void 0:g.title)!=null?m:"icon"}}),cache:cache$1});case 3:case"end":return c.stop()}},t)}));return function(e){return l.apply(this,arguments)}})(),fetchSimpleIcons=(function(){var l=_asyncToGenerator(_regeneratorRuntime().mark(function t(e){var a,c,h,d,f,m,g;return _regeneratorRuntime().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return a=e.slugs,w.next=3,Promise.all([getSlugsPath(a),getSlugHexs(a)]);case 3:return c=w.sent,h=c[0],d=c[1],f=d.hexs,m=d.cache,g={},f.forEach(function(E){g[E.slug]=E}),h.forEach(function(E){g[E.slug].path=E.path}),a.forEach(function(E){var S=g[E];(!S.hex||!S.path)&&delete g[E]}),w.abrupt("return",{simpleIcons:g,allIcon:m});case 13:case"end":return w.stop()}},t)}));return function(e){return l.apply(this,arguments)}})();const useIcons=l=>{const[t,e]=reactExports.useState(null);return reactExports.useEffect(()=>{fetchSimpleIcons({slugs:l}).then(e)},[l]),t?Object.values(t.simpleIcons).map(a=>renderSimpleIcon({icon:a,size:42,aProps:{onClick:c=>c.preventDefault()}})):jsxRuntimeExports.jsx("a",{children:"Loading..."})},slugs=["javascript","typescript","react","html5","css3","nodedotjs","express","nextdotjs","postgresql","firebase","vercel","testinglibrary","jest","cypress","docker","git","github","gitlab","visualstudiocode","androidstudio","sonarqube","figma"],IconCloud=()=>{const l=useIcons(slugs);return jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center p-4",children:jsxRuntimeExports.jsx(Cloud$1,{options:{clickToFront:500,depth:1,imageScale:2,initial:[.1,-.1],outlineColour:"#0000",reverse:!0,tooltip:"native",tooltipDelay:0,wheelZoom:!1},children:l})})},TypeWriter=({words:l,typingSpeed:t=100,deletingSpeed:e=50,pauseTime:a=2e3})=>{const[c,h]=reactExports.useState(0),[d,f]=reactExports.useState(""),[m,g]=reactExports.useState(!1);return reactExports.useEffect(()=>{const y=l[c],w=setTimeout(()=>{m?d.length>0?f(d.slice(0,-1)):(g(!1),h(E=>(E+1)%l.length)):d.length<y.length?f(y.slice(0,d.length+1)):setTimeout(()=>g(!0),a)},m?e:t);return()=>clearTimeout(w)},[d,m,c,l,t,e,a]),jsxRuntimeExports.jsxs("span",{className:"inline-flex items-center",children:[jsxRuntimeExports.jsx("span",{className:"bg-gradient-to-r from-violet-600 to-purple-600 bg-clip-text text-transparent font-semibold",children:d}),jsxRuntimeExports.jsx(motion.span,{className:"ml-1 w-0.5 h-6 bg-violet-500 inline-block",animate:{opacity:[1,0,1]},transition:{duration:.8,repeat:1/0,ease:"linear"}})]})},Hero=({onShowResume:l})=>{const{scrollY:t}=useScroll(),e=useTransform(t,[0,500],[0,150]),a=useTransform(t,[0,500],[0,-100]),c=useTransform(t,[0,500],[0,200]);return jsxRuntimeExports.jsxs("section",{id:"hero",className:"bg-transparent min-h-screen flex items-center justify-center relative overflow-hidden",children:[jsxRuntimeExports.jsx(motion.div,{style:{y:e},className:"absolute top-20 left-10 w-72 h-72 bg-violet-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob"}),jsxRuntimeExports.jsx(motion.div,{style:{y:a},className:"absolute top-40 right-10 w-72 h-72 bg-violet-400 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-2000"}),jsxRuntimeExports.jsx(motion.div,{style:{y:c},className:"absolute -bottom-8 left-20 w-72 h-72 bg-violet-300 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-4000"}),jsxRuntimeExports.jsx("div",{className:"container mx-auto px-6 py-24 relative z-10",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-between gap-12",children:[jsxRuntimeExports.jsxs("div",{className:"lg:w-1/2 text-center lg:text-left",children:[jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},children:[jsxRuntimeExports.jsx("span",{className:"text-2xl md:text-3xl font-medium text-gray-600 dark:text-gray-400 block mb-2",children:"Hi, I'm"}),jsxRuntimeExports.jsxs("h1",{className:"text-6xl md:text-8xl lg:text-9xl font-black leading-none tracking-tight",children:[jsxRuntimeExports.jsx("span",{className:"bg-gradient-to-r from-violet-600 via-purple-500 to-indigo-600 bg-clip-text text-transparent drop-shadow-sm",style:{backgroundSize:"200% 200%",animation:"gradientShift 4s ease infinite"},children:"Kiran"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{className:"bg-gradient-to-r from-indigo-500 via-violet-500 to-purple-600 bg-clip-text text-transparent",style:{backgroundSize:"200% 200%",animation:"gradientShift 4s ease infinite",animationDelay:"0.5s"},children:"Mulawad"})]})]}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"mt-6 text-xl md:text-2xl text-gray-600 dark:text-gray-300 font-medium h-8",children:jsxRuntimeExports.jsx(TypeWriter,{words:["AI Engineer","Data Engineer","Data Scientist"],typingSpeed:80,deletingSpeed:40,pauseTime:1500})}),jsxRuntimeExports.jsx(motion.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},className:"mt-3 text-lg text-gray-500 dark:text-gray-400",children:"Crafting intuitive experiences and insightful solutions."}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.6},className:"mt-10 flex flex-col sm:flex-row justify-center lg:justify-start gap-6",children:[jsxRuntimeExports.jsxs("a",{href:"#projects",className:"group relative inline-block bg-gradient-to-r from-violet-500 to-violet-600 text-white font-bold py-4 px-10 rounded-full text-lg overflow-hidden transition-all duration-300 hover:shadow-glow hover:scale-105",children:[jsxRuntimeExports.jsx("span",{className:"relative z-10",children:"View My Work"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-violet-600 to-violet-700 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),jsxRuntimeExports.jsxs("button",{onClick:l,className:"group relative inline-block bg-transparent border-2 border-gray-700 dark:border-gray-300 text-gray-700 dark:text-gray-300 font-bold py-4 px-10 rounded-full text-lg overflow-hidden transition-all duration-300 hover:shadow-lg hover:scale-105",children:[jsxRuntimeExports.jsx("span",{className:"relative z-10 group-hover:text-white transition-colors duration-300",children:"View CV "}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gray-700 dark:bg-gray-300 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-300 origin-left"})]})]})]}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{duration:.8},className:"lg:w-1/2 flex justify-center",children:jsxRuntimeExports.jsx(IconCloud,{})})]})})]})},profilePic="/assets/HD-Profile-C4j-8dpa.png",useInView$4=l=>{const[t,e]=reactExports.useState(!1);return reactExports.useEffect(()=>{const a=new IntersectionObserver(([c])=>{c.isIntersecting&&e(!0)});return l.current&&a.observe(l.current),()=>a.disconnect()},[l]),t},About=()=>{const l=reactExports.useRef(null),t=useInView$4(l);return jsxRuntimeExports.jsx("section",{id:"about",ref:l,className:"py-20 bg-transparent relative",children:jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:50},animate:t?{opacity:1,y:0}:{},transition:{duration:.6},className:"container mx-auto px-6 grid grid-cols-1 md:grid-cols-2 gap-x-12 gap-y-12 items-center",children:[jsxRuntimeExports.jsxs(motion.div,{initial:{x:-50,opacity:0},animate:t?{x:0,opacity:1}:{},transition:{duration:.6,delay:.2},className:"w-fit mx-auto relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute -inset-4 bg-gradient-to-r from-violet-500 to-violet-600 rounded-full blur-2xl opacity-30 animate-pulse"}),jsxRuntimeExports.jsx("div",{className:"relative",children:jsxRuntimeExports.jsx("img",{src:profilePic,alt:"Kiran Mulawad Photo",className:"rounded-full w-72 h-72 shadow-2xl object-cover border-4 border-white/20 dark:border-gray-700/20"})})]}),jsxRuntimeExports.jsxs(motion.div,{initial:{x:50,opacity:0},animate:t?{x:0,opacity:1}:{},transition:{duration:.6,delay:.4},className:"text-center md:text-left",children:[jsxRuntimeExports.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-6",children:jsxRuntimeExports.jsx("span",{className:"gradient-text",children:"About Me"})}),jsxRuntimeExports.jsxs("div",{className:"glass-card p-6 rounded-2xl",children:[jsxRuntimeExports.jsxs("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed text-lg",children:["AI/Data Engineer passionate about building intelligent systems. I specialize in ",jsxRuntimeExports.jsx("span",{className:"text-violet-600 dark:text-violet-400 font-semibold",children:"LLMs, data pipelines, and cloud technologies"}),"  turning complex data into actionable insights."]}),jsxRuntimeExports.jsxs("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed mt-4 text-lg",children:["Master's in Applied Data Science, actively seeking full-time opportunities as an ",jsxRuntimeExports.jsx("span",{className:"text-violet-600 dark:text-violet-400 font-semibold",children:"AI Engineer, Data Engineer, or Data Scientist"}),"."]})]})]})]})})};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=l=>l.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),toCamelCase=l=>l.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,a)=>a?a.toUpperCase():e.toLowerCase()),toPascalCase=l=>{const t=toCamelCase(l);return t.charAt(0).toUpperCase()+t.slice(1)},mergeClasses=(...l)=>l.filter((t,e,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===e).join(" ").trim(),hasA11yProp=l=>{for(const t in l)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Icon=reactExports.forwardRef(({color:l="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:a,className:c="",children:h,iconNode:d,...f},m)=>reactExports.createElement("svg",{ref:m,...defaultAttributes,width:t,height:t,stroke:l,strokeWidth:a?Number(e)*24/Number(t):e,className:mergeClasses("lucide",c),...!h&&!hasA11yProp(f)&&{"aria-hidden":"true"},...f},[...d.map(([g,y])=>reactExports.createElement(g,y)),...Array.isArray(h)?h:[h]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const createLucideIcon=(l,t)=>{const e=reactExports.forwardRef(({className:a,...c},h)=>reactExports.createElement(Icon,{ref:h,iconNode:t,className:mergeClasses(`lucide-${toKebabCase(toPascalCase(l))}`,`lucide-${l}`,a),...c}));return e.displayName=toPascalCase(l),e};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$6=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],Brain=createLucideIcon("brain",__iconNode$6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$5=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V9",key:"uvy0l4"}],["path",{d:"M19 21V3",key:"11j9sm"}]],ChartNoAxesColumnIncreasing=createLucideIcon("chart-no-axes-column-increasing",__iconNode$5);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$4=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],Cloud=createLucideIcon("cloud",__iconNode$4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$3=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],Code=createLucideIcon("code",__iconNode$3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$2=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],Languages=createLucideIcon("languages",__iconNode$2);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Settings=createLucideIcon("settings",__iconNode$1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Users=createLucideIcon("users",__iconNode),skillsData=[{icon:jsxRuntimeExports.jsx(Code,{size:40}),title:"Programming",description:"Python, SQL, R, HTML, JS"},{icon:jsxRuntimeExports.jsx(Brain,{size:40}),title:"ML & DL",description:"Scikit-learn, PyTorch, TensorFlow, Hugging Face Transformers"},{icon:jsxRuntimeExports.jsx(Settings,{size:40}),title:"Data Engineering",description:"ETL, Data Pipelines, Apache Airflow, APIs, PostgreSQL, MySQL, SQLite"},{icon:jsxRuntimeExports.jsx(Cloud,{size:40}),title:"Cloud & Tools",description:"GCP, BigQuery, Azure, Docker, Git, Streamlit, Pinecone"},{icon:jsxRuntimeExports.jsx(ChartNoAxesColumnIncreasing,{size:40}),title:"Visualization",description:"Tableau, Excel, SAS Visual Analytics"},{icon:jsxRuntimeExports.jsx(Users,{size:40}),title:"Soft Skills",description:"Collaboration, Agile, Communication"},{icon:jsxRuntimeExports.jsx(Languages,{size:40}),title:"Languages",description:"English (Fluent), German (A2), Kannada (Fluent), Hindi (Fluent)"}],useInView$3=l=>{const[t,e]=reactExports.useState(!1);return reactExports.useEffect(()=>{const a=new IntersectionObserver(([c])=>{c.isIntersecting&&e(!0)});return l.current&&a.observe(l.current),()=>a.disconnect()},[l]),t},Skills=()=>{const l=reactExports.useRef(null),t=useInView$3(l),e={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},a={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return jsxRuntimeExports.jsx("section",{id:"skills",ref:l,className:"py-20 bg-transparent relative",children:jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:50},animate:t?{opacity:1,y:0}:{},transition:{duration:.6},className:"container mx-auto px-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-16",children:[jsxRuntimeExports.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-4",children:jsxRuntimeExports.jsx("span",{className:"gradient-text",children:"My Skills"})}),jsxRuntimeExports.jsx("p",{className:"mt-3 text-lg text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:"A blend of technical expertise and creative problem-solving."})]}),jsxRuntimeExports.jsx(motion.div,{variants:e,initial:"hidden",animate:t?"show":"hidden",className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:skillsData.map((c,h)=>jsxRuntimeExports.jsxs(motion.div,{className:"glass-card p-6 rounded-2xl text-center text-gray-800 dark:text-white group hover:shadow-neu-light dark:hover:shadow-neu-dark transition-all duration-300",variants:a,whileHover:{y:-8,scale:1.02},transition:{type:"spring",stiffness:300,damping:20},children:[jsxRuntimeExports.jsx(motion.div,{className:"text-5xl mb-4 inline-block",whileHover:{rotate:[0,-10,10,-10,0],scale:1.2},transition:{duration:.5},children:c.icon}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold mb-2 group-hover:text-violet-500 transition-colors duration-300",children:c.title}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:c.description})]},h))})]})})},useTilt=(l={})=>{const t=reactExports.useRef(null),{max:e=15,perspective:a=1e3,scale:c=1.05,speed:h=400}=l;return reactExports.useEffect(()=>{const d=t.current;if(!d)return;let f;const m=w=>{const E=d.getBoundingClientRect(),S=w.clientX-E.left,C=w.clientY-E.top,T=E.width/2,k=E.height/2,D=(C-k)/k*e,N=(T-S)/T*e;d.style.transform=`perspective(${a}px) rotateX(${D}deg) rotateY(${N}deg) scale3d(${c}, ${c}, ${c})`},g=()=>{clearTimeout(f),d.style.transition=`transform ${h}ms cubic-bezier(0.03, 0.98, 0.52, 0.99)`},y=()=>{f=setTimeout(()=>{d.style.transform="perspective(1000px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)"},100)};return d.addEventListener("mousemove",m),d.addEventListener("mouseenter",g),d.addEventListener("mouseleave",y),()=>{clearTimeout(f),d.removeEventListener("mousemove",m),d.removeEventListener("mouseenter",g),d.removeEventListener("mouseleave",y)}},[e,a,c,h]),t},ProjectCard=({project:l,onDetailsClick:t,variants:e,isBento:a})=>{const c=useTilt({max:10,perspective:1500,scale:1.02,speed:300});return jsxRuntimeExports.jsxs(motion.div,{ref:c,className:`glass-card p-6 rounded-2xl shadow-xl project-card overflow-visible group ${a?"h-full w-full":"max-w-xs mx-auto"}`,variants:e,style:{transformStyle:"preserve-3d"},children:[jsxRuntimeExports.jsxs("div",{className:"relative overflow-hidden rounded-xl mb-4",style:{transform:"translateZ(20px)"},children:[jsxRuntimeExports.jsx("img",{src:l.image,alt:l.title,className:"rounded-xl w-full h-40 object-cover transition-transform duration-500 group-hover:scale-110"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),jsxRuntimeExports.jsxs("div",{style:{transform:"translateZ(30px)"},children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-2 group-hover:text-violet-500 transition-colors duration-300",children:l.title}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-4 line-clamp-2",children:l.description.split(".")[0]+"."}),jsxRuntimeExports.jsx("button",{onClick:()=>t(l.id),className:"w-full bg-gradient-to-r from-violet-500 to-violet-600 text-white font-bold py-2.5 px-4 rounded-lg text-sm hover:shadow-glow transition-all duration-300 hover:scale-105",style:{transform:"translateZ(40px)"},children:"View Details"})]})]})},ProjectModal=({project:l,onClose:t,isOpen:e})=>{if(reactExports.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[e]),!e||!l)return null;const a={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.3}}};return jsxRuntimeExports.jsx(motion.div,{initial:"hidden",animate:"visible",exit:"hidden",variants:a,className:"modal fixed inset-0 flex items-center justify-center z-50 p-4",children:jsxRuntimeExports.jsxs("div",{className:"modal-content bg-white dark:bg-gray-800 rounded-xl shadow-2xl p-8 max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:l.title}),jsxRuntimeExports.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-3xl leading-none",children:""})]}),jsxRuntimeExports.jsx("img",{src:l.image,alt:l.title,className:"rounded-md mb-6 w-full h-64 object-cover"}),jsxRuntimeExports.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed mb-4",children:l.description}),jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx("p",{className:"font-semibold text-gray-800 dark:text-white",children:"Technologies Used:"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:l.tech})]}),jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx("p",{className:"font-semibold text-gray-800 dark:text-white",children:"My Role:"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:l.role})]}),jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx("p",{className:"font-semibold text-gray-800 dark:text-white",children:"Challenges & Solutions:"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:l.challenges})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("p",{className:"font-semibold text-gray-800 dark:text-white",children:"Key Outcomes:"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:l.outcomes})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-4",children:[l.liveLink&&l.liveLink!=="#"&&jsxRuntimeExports.jsxs("a",{href:l.liveLink,target:"_blank",rel:"noopener noreferrer",className:"bg-[#DAA520] text-white font-bold py-2 px-4 rounded-lg hover:bg-opacity-90 transition-colors flex items-center gap-2",children:["Live Demo ",jsxRuntimeExports.jsx("span",{className:"text-lg",children:""})]}),l.githubLink&&l.githubLink!=="#"&&jsxRuntimeExports.jsxs("a",{href:l.githubLink,target:"_blank",rel:"noopener noreferrer",className:"bg-gray-700 text-white font-bold py-2 px-4 rounded-lg hover:bg-opacity-90 transition-colors flex items-center gap-2",children:["GitHub Repo ",jsxRuntimeExports.jsx("span",{className:"text-lg",children:""})]})]})]})})},ragChatbotImage="/assets/RAG-Chatbot-B0t3AGqt.png",dataPipelineImage="/assets/Data-Engineering-Cbtg2Auy.png",marsOrbiterImage="/assets/MARS-Orbiter-BNArmwMT.png",recruiterSystemImage="/assets/HUSHHUSH-Recruiter-D0VR-xhG.png",projectsData=[{id:"rag-chatbot",title:"RAG Chatbot for Student Support",image:ragChatbotImage,description:"Built a Retrieval-Augmented Generation chatbot using LLAMA3 to answer student queries. This project focused on enhancing information retrieval and response generation for educational support.",tech:"LLAMA3, Python, PDF Chunking, Embedding Search, Modular Flow Control",role:"AI/ML Engineer",challenges:"Optimizing LLM orchestration for accurate and relevant responses from chunked PDF inputs. Ensured efficient embedding search to provide contextually appropriate answers.",outcomes:"Successfully developed a functional RAG chatbot capable of providing precise and timely answers to student inquiries, significantly improving access to information.",liveLink:"#",githubLink:"https://github.com/Kiranmulawad1/rag-chatbot"},{id:"data-pipeline",title:"End-to-End Data Pipeline with BigQuery",image:dataPipelineImage,description:"Automated data extraction, cleaning, and loading to Google BigQuery, culminating in Tableau dashboarding for business insights. This project showcased comprehensive data engineering skills from raw data to visualization.",tech:"Docker, Python, Google BigQuery, GCP SDK, MySQL, Tableau",role:"Data Engineer",challenges:"Designing a robust and scalable pipeline for automated data ingestion and transformation. Ensured data integrity and efficient loading into BigQuery for analytics.",outcomes:"Successfully implemented an automated, end-to-end data pipeline, providing clean and structured data for analysis. Enabled stakeholders to make data-driven decisions through interactive Tableau dashboards.",liveLink:"#",githubLink:"https://github.com/Kiranmulawad1/data-pipeline"},{id:"thermal-power",title:"Thermal Power Prediction Mars Express Orbiter",image:marsOrbiterImage,description:"Designed and containerized a full Machine Learning pipeline for thermal power prediction using satellite data from the Mars Express Orbiter. This involved data preprocessing, model training, and deployment.",tech:"PostgreSQL, XGBoost, CatBoost, Docker Compose",role:"ML Engineer",challenges:"Handling large volumes of satellite data and optimizing ML models for accurate thermal power predictions. Ensured the pipeline was robust and reproducible through containerization.",outcomes:"Developed a fully containerized ML pipeline that accurately predicts thermal power, demonstrating strong skills in machine learning, data handling, and MLOps.",liveLink:"#",githubLink:"https://github.com/Kiranmulawad1/mars-express-orbiter"},{id:"recruiter-system",title:"Recruiter Candidate Filtering System",image:recruiterSystemImage,description:"Developed a system to scrape GitHub profiles, cluster candidates using K-means algorithm, and automate email outreach. This project streamlined the recruitment process by identifying suitable candidates efficiently.",tech:"Python, PostgreSQL, Machine Learning (K-means), HTML, JS",role:"Software Developer & ML Practitioner",challenges:"Effectively scraping and parsing diverse GitHub profile data, and accurately clustering candidates based on their skills and experience. Automated email outreach while ensuring personalization.",outcomes:"Created an efficient system that significantly reduced manual effort in candidate sourcing and filtering, demonstrating practical application of machine learning and web development skills.",liveLink:"#",githubLink:"https://github.com/Kiranmulawad1/Hush-Hush-Recruiter"}],useInView$2=l=>{const[t,e]=reactExports.useState(!1);return reactExports.useEffect(()=>{const a=new IntersectionObserver(([c])=>{c.isIntersecting&&e(!0)});return l.current&&a.observe(l.current),()=>{l.current&&a.unobserve(l.current)}},[l]),t},Projects=()=>{const l=reactExports.useRef(null),t=useInView$2(l),[e,a]=reactExports.useState(!1),[c,h]=reactExports.useState(null),d=g=>{const y=projectsData.find(w=>w.id===g);h(y),a(!0)},f=()=>{a(!1),h(null)},m={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return jsxRuntimeExports.jsxs("section",{id:"projects",ref:l,className:"py-20 dark:bg-gray-900",children:[jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:50},animate:t?{opacity:1,y:0}:{},transition:{duration:.6},className:"container mx-auto px-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-12",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"My Projects"}),jsxRuntimeExports.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"A selection of my work demonstrating my skills and problem-solving approach."})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 auto-rows-[300px]",children:projectsData.map((g,y)=>jsxRuntimeExports.jsx(motion.div,{className:`relative rounded-xl overflow-hidden group ${y===0||y===3?"md:col-span-2":""}`,variants:m,children:jsxRuntimeExports.jsx(ProjectCard,{project:g,onDetailsClick:d,variants:m,isBento:!0})},g.id))})]}),jsxRuntimeExports.jsx(ProjectModal,{project:c,isOpen:e,onClose:f})]})},TimelineItem=({item:l,index:t})=>jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:t*.1},viewport:{once:!0,margin:"-50px"},whileHover:{y:-8},className:"group",children:jsxRuntimeExports.jsxs("div",{className:"glass-card p-6 md:p-8 rounded-2xl shadow-lg hover:shadow-violet-500/20 transition-all duration-300 border border-transparent hover:border-violet-500/20",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[l.icon&&jsxRuntimeExports.jsx(motion.span,{className:"text-3xl",whileHover:{scale:1.2,rotate:10},transition:{type:"spring",stiffness:300},children:l.icon}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-xl md:text-2xl font-bold text-gray-800 dark:text-white group-hover:text-violet-600 dark:group-hover:text-violet-400 transition-colors",children:l.title}),l.company&&jsxRuntimeExports.jsx("p",{className:"text-violet-600 dark:text-violet-400 font-semibold",children:l.company}),l.institution&&jsxRuntimeExports.jsx("p",{className:"text-violet-600 dark:text-violet-400 font-semibold",children:l.institution})]})]}),jsxRuntimeExports.jsx("span",{className:"inline-flex items-center px-4 py-1.5 bg-violet-500/10 text-violet-600 dark:text-violet-400 rounded-full text-sm font-medium whitespace-nowrap",children:l.period})]}),l.description&&jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed mb-4",children:l.description}),l.achievements&&l.achievements.length>0&&jsxRuntimeExports.jsx("ul",{className:"space-y-2 mb-4",children:l.achievements.map((e,a)=>jsxRuntimeExports.jsxs(motion.li,{initial:{opacity:0,x:-10},whileInView:{opacity:1,x:0},transition:{delay:a*.1},viewport:{once:!0},className:"flex items-start gap-3 text-gray-600 dark:text-gray-300 text-sm",children:[jsxRuntimeExports.jsx("span",{className:"text-violet-500 mt-0.5 flex-shrink-0",children:jsxRuntimeExports.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),jsxRuntimeExports.jsx("span",{children:e})]},a))}),l.skills&&l.skills.length>0&&jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2 pt-2 border-t border-gray-200 dark:border-gray-700",children:l.skills.map((e,a)=>jsxRuntimeExports.jsx(motion.span,{initial:{opacity:0,scale:.8},whileInView:{opacity:1,scale:1},transition:{delay:a*.05},viewport:{once:!0},className:"px-3 py-1 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-full text-xs font-medium hover:bg-violet-500/20 hover:text-violet-600 dark:hover:text-violet-400 transition-colors cursor-default",children:e},a))})]})}),experienceData=[{id:1,title:"Thesis Intern - AI Funding Finder",company:"iiterate Technologies GmbH",period:"April 2025 - Present",icon:"",description:"Working on AI-based grant discovery automation as part of master's thesis internship.",achievements:["Built custom ETL pipelines for ingesting and embedding grant metadata","Used Pinecone for vector search, Streamlit for UI, Llama for GPT recommendations","Simulated real-world data engineering tasks: chunking, translation, reranking, citation","Deployed and tested app in cloud-like dev setup"],skills:["AI/ML","Python","NLP","Pinecone","Streamlit","ETL","Vector Search"]},{id:2,title:"AI/Data Engineering Projects",company:"Academic & Personal",period:"2023 - 2024",icon:"",description:"Developed multiple AI and data engineering projects showcasing expertise in modern tech stack.",achievements:["Built RAG-based chatbot with Ollama, Pinecone, and Streamlit","Created scalable semantic search pipelines","Implemented data engineering solutions with cloud technologies","Worked on MARS Orbiter simulation and HUSHHUSH recruiter projects"],skills:["Python","Ollama","Pinecone","Streamlit","Cloud","Data Pipelines"]}],useInView$1=l=>{const[t,e]=reactExports.useState(!1);return reactExports.useEffect(()=>{const a=new IntersectionObserver(([c])=>{c.isIntersecting&&e(!0)});return l.current&&a.observe(l.current),()=>a.disconnect()},[l]),t};function Experience(){const l=reactExports.useRef(null),t=useInView$1(l);return jsxRuntimeExports.jsx("section",{id:"experience",ref:l,className:"py-20 bg-transparent relative overflow-hidden",children:jsxRuntimeExports.jsxs("div",{className:"container mx-auto px-6",children:[jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:50},animate:t?{opacity:1,y:0}:{},transition:{duration:.6},className:"text-center mb-16",children:[jsxRuntimeExports.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-4",children:jsxRuntimeExports.jsx("span",{className:"gradient-text",children:"Experience"})}),jsxRuntimeExports.jsx("p",{className:"mt-3 text-lg text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:"My professional journey and key accomplishments."})]}),jsxRuntimeExports.jsx("div",{className:"max-w-4xl mx-auto space-y-6",children:experienceData.map((e,a)=>jsxRuntimeExports.jsx(TimelineItem,{item:e,index:a},e.id))})]})})}const educationData=[{id:1,title:"M.Sc. Applied Data Science & Analytics",institution:"SRH Hochschule Heidelberg, Germany",period:"October 2023 - Present",icon:"",description:"Pursuing Master's degree with focus on AI, machine learning, and data analytics. Currently completing thesis on AI-based grant discovery automation.",achievements:["Specialization in AI/ML and Data Engineering","Hands-on experience with LLM-based projects","Thesis on AI-based grant discovery automation at iiterate Technologies","Strong foundation in data science and analytics"],skills:["Machine Learning","Data Science","AI","Analytics","Research"]},{id:2,title:"Bachelor of Computer Applications (BCA)",institution:"P.C. Jabin Science College, Hubballi, India",period:"June 2019 - August 2022",icon:"",description:"Completed undergraduate studies with strong foundation in computer science and software development.",achievements:["Built strong programming fundamentals","Gained expertise in software development","Participated in various technical projects","Developed problem-solving and analytical skills"],skills:["Programming","Software Development","Problem Solving","Algorithms"]}],useInView=l=>{const[t,e]=reactExports.useState(!1);return reactExports.useEffect(()=>{const a=new IntersectionObserver(([c])=>{c.isIntersecting&&e(!0)});return l.current&&a.observe(l.current),()=>a.disconnect()},[l]),t};function Education(){const l=reactExports.useRef(null),t=useInView(l);return jsxRuntimeExports.jsx("section",{id:"education",ref:l,className:"py-20 bg-transparent relative",children:jsxRuntimeExports.jsxs("div",{className:"container mx-auto px-6",children:[jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:50},animate:t?{opacity:1,y:0}:{},transition:{duration:.6},className:"text-center mb-16",children:[jsxRuntimeExports.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-4",children:jsxRuntimeExports.jsx("span",{className:"gradient-text",children:"Education"})}),jsxRuntimeExports.jsx("p",{className:"mt-3 text-lg text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:"My academic background and achievements."})]}),jsxRuntimeExports.jsx("div",{className:"max-w-4xl mx-auto space-y-6",children:educationData.map((e,a)=>jsxRuntimeExports.jsx(TimelineItem,{item:e,index:a},e.id))})]})})}function Contact(){return jsxRuntimeExports.jsxs("section",{id:"contact",className:"py-20 bg-transparent relative overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-10 right-10 w-96 h-96 bg-violet-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-10 left-10 w-96 h-96 bg-violet-400 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000"}),jsxRuntimeExports.jsx("div",{className:"container mx-auto px-6 text-center relative z-10",children:jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},children:[jsxRuntimeExports.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-6",children:jsxRuntimeExports.jsx("span",{className:"gradient-text",children:"Let's Connect"})}),jsxRuntimeExports.jsx("p",{className:"max-w-2xl mx-auto mb-12 text-lg text-gray-700 dark:text-gray-300",children:"Feel free to reach out to me via email for any inquiries or collaborations."}),jsxRuntimeExports.jsx("div",{className:"flex flex-col sm:flex-row justify-center items-center gap-6",children:jsxRuntimeExports.jsxs(motion.a,{href:"mailto:kiranmulawad1@gmail.com",className:"group relative bg-gradient-to-r from-violet-500 to-violet-600 text-white font-bold py-4 px-10 rounded-full hover:shadow-glow transition-all duration-300 flex items-center gap-3 overflow-hidden",whileHover:{scale:1.05},whileTap:{scale:.95},children:[jsxRuntimeExports.jsx("span",{className:"relative z-10 text-lg",children:"Email Me"}),jsxRuntimeExports.jsx("span",{className:"relative z-10 text-xl",children:""}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-violet-600 to-violet-700 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.2},viewport:{once:!0},className:"glass-card max-w-2xl mx-auto mt-16 p-8 rounded-2xl",children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-4",children:"Let's Build Something Amazing Together"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"I'm always open to discussing new projects, creative ideas, or opportunities to be part of your vision."})]})]})})]})}const isNodeJS=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],LINE_FACTOR=1.35,RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},AnnotationEditorPrefix="pdfjs_internal_editor_",AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101,COMMENT:102},AnnotationEditorParamsType={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},util_ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},VerbosityLevel={ERRORS:0,WARNINGS:1,INFOS:5},OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},DrawOPS={moveTo:0,lineTo:1,curveTo:2,closePath:3},PasswordResponses$1={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let verbosity=VerbosityLevel.WARNINGS;function setVerbosityLevel(l){Number.isInteger(l)&&(verbosity=l)}function getVerbosityLevel(){return verbosity}function info(l){verbosity>=VerbosityLevel.INFOS&&console.log(`Info: ${l}`)}function warn(l){verbosity>=VerbosityLevel.WARNINGS&&console.log(`Warning: ${l}`)}function unreachable(l){throw new Error(l)}function assert(l,t){l||unreachable(t)}function _isValidProtocol(l){switch(l?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function createValidAbsoluteUrl(l,t=null,e=null){if(!l)return null;if(e&&typeof l=="string"&&(e.addDefaultProtocol&&l.startsWith("www.")&&l.match(/\./g)?.length>=2&&(l=`http://${l}`),e.tryConvertEncoding))try{l=stringToUTF8String(l)}catch{}const a=t?URL.parse(l,t):URL.parse(l);return _isValidProtocol(a)?a:null}function updateUrlHash(l,t,e=!1){const a=URL.parse(l);return a?(a.hash=t,a.href):e&&createValidAbsoluteUrl(l,"http://example.com")?l.split("#",1)[0]+`${t?`#${t}`:""}`:""}function shadow(l,t,e,a=!1){return Object.defineProperty(l,t,{value:e,enumerable:!a,configurable:!0,writable:!1}),e}const BaseException=(function l(){function t(e,a){this.message=e,this.name=a}return t.prototype=new Error,t.constructor=t,t})();class PasswordException extends BaseException{constructor(t,e){super(t,"PasswordException"),this.code=e}}class UnknownErrorException extends BaseException{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class InvalidPDFException extends BaseException{constructor(t){super(t,"InvalidPDFException")}}class ResponseException extends BaseException{constructor(t,e,a){super(t,"ResponseException"),this.status=e,this.missing=a}}class FormatError extends BaseException{constructor(t){super(t,"FormatError")}}class AbortException extends BaseException{constructor(t){super(t,"AbortException")}}function bytesToString(l){(typeof l!="object"||l?.length===void 0)&&unreachable("Invalid argument for bytesToString");const t=l.length,e=8192;if(t<e)return String.fromCharCode.apply(null,l);const a=[];for(let c=0;c<t;c+=e){const h=Math.min(c+e,t),d=l.subarray(c,h);a.push(String.fromCharCode.apply(null,d))}return a.join("")}function stringToBytes(l){typeof l!="string"&&unreachable("Invalid argument for stringToBytes");const t=l.length,e=new Uint8Array(t);for(let a=0;a<t;++a)e[a]=l.charCodeAt(a)&255;return e}function string32(l){return String.fromCharCode(l>>24&255,l>>16&255,l>>8&255,l&255)}function isLittleEndian(){const l=new Uint8Array(4);return l[0]=1,new Uint32Array(l.buffer,0,1)[0]===1}function isEvalSupported(){try{return new Function(""),!0}catch{return!1}}class util_FeatureTest{static get isLittleEndian(){return shadow(this,"isLittleEndian",isLittleEndian())}static get isEvalSupported(){return shadow(this,"isEvalSupported",isEvalSupported())}static get isOffscreenCanvasSupported(){return shadow(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return shadow(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return shadow(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){return shadow(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const hexNumbers=Array.from(Array(256).keys(),l=>l.toString(16).padStart(2,"0"));class Util{static makeHexColor(t,e,a){return`#${hexNumbers[t]}${hexNumbers[e]}${hexNumbers[a]}`}static scaleMinMax(t,e){let a;t[0]?(t[0]<0&&(a=e[0],e[0]=e[2],e[2]=a),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(a=e[1],e[1]=e[3],e[3]=a),e[1]*=t[3],e[3]*=t[3]):(a=e[0],e[0]=e[1],e[1]=a,a=e[2],e[2]=e[3],e[3]=a,t[1]<0&&(a=e[1],e[1]=e[3],e[3]=a),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(a=e[0],e[0]=e[2],e[2]=a),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e,a=0){const c=t[a],h=t[a+1];t[a]=c*e[0]+h*e[2]+e[4],t[a+1]=c*e[1]+h*e[3]+e[5]}static applyTransformToBezier(t,e,a=0){const c=e[0],h=e[1],d=e[2],f=e[3],m=e[4],g=e[5];for(let y=0;y<6;y+=2){const w=t[a+y],E=t[a+y+1];t[a+y]=w*c+E*d+m,t[a+y+1]=w*h+E*f+g}}static applyInverseTransform(t,e){const a=t[0],c=t[1],h=e[0]*e[3]-e[1]*e[2];t[0]=(a*e[3]-c*e[2]+e[2]*e[5]-e[4]*e[3])/h,t[1]=(-a*e[1]+c*e[0]+e[4]*e[1]-e[5]*e[0])/h}static axialAlignedBoundingBox(t,e,a){const c=e[0],h=e[1],d=e[2],f=e[3],m=e[4],g=e[5],y=t[0],w=t[1],E=t[2],S=t[3];let C=c*y+m,T=C,k=c*E+m,D=k,N=f*w+g,L=N,j=f*S+g,F=j;if(h!==0||d!==0){const $=h*y,G=h*E,nt=d*w,ot=d*S;C+=nt,D+=nt,k+=ot,T+=ot,N+=$,F+=$,j+=G,L+=G}a[0]=Math.min(a[0],C,k,T,D),a[1]=Math.min(a[1],N,j,L,F),a[2]=Math.max(a[2],C,k,T,D),a[3]=Math.max(a[3],N,j,L,F)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const a=t[0],c=t[1],h=t[2],d=t[3],f=a**2+c**2,m=a*h+c*d,g=h**2+d**2,y=(f+g)/2,w=Math.sqrt(y**2-(f*g-m**2));e[0]=Math.sqrt(y+w||1),e[1]=Math.sqrt(y-w||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const a=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),c=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(a>c)return null;const h=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),d=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return h>d?null:[a,h,c,d]}static pointBoundingBox(t,e,a){a[0]=Math.min(a[0],t),a[1]=Math.min(a[1],e),a[2]=Math.max(a[2],t),a[3]=Math.max(a[3],e)}static rectBoundingBox(t,e,a,c,h){h[0]=Math.min(h[0],t,a),h[1]=Math.min(h[1],e,c),h[2]=Math.max(h[2],t,a),h[3]=Math.max(h[3],e,c)}static#t(t,e,a,c,h,d,f,m,g,y){if(g<=0||g>=1)return;const w=1-g,E=g*g,S=E*g,C=w*(w*(w*t+3*g*e)+3*E*a)+S*c,T=w*(w*(w*h+3*g*d)+3*E*f)+S*m;y[0]=Math.min(y[0],C),y[1]=Math.min(y[1],T),y[2]=Math.max(y[2],C),y[3]=Math.max(y[3],T)}static#e(t,e,a,c,h,d,f,m,g,y,w,E){if(Math.abs(g)<1e-12){Math.abs(y)>=1e-12&&this.#t(t,e,a,c,h,d,f,m,-w/y,E);return}const S=y**2-4*w*g;if(S<0)return;const C=Math.sqrt(S),T=2*g;this.#t(t,e,a,c,h,d,f,m,(-y+C)/T,E),this.#t(t,e,a,c,h,d,f,m,(-y-C)/T,E)}static bezierBoundingBox(t,e,a,c,h,d,f,m,g){g[0]=Math.min(g[0],t,f),g[1]=Math.min(g[1],e,m),g[2]=Math.max(g[2],t,f),g[3]=Math.max(g[3],e,m),this.#e(t,a,h,f,e,c,d,m,3*(-t+3*(a-h)+f),6*(t-2*a+h),3*(a-t),g),this.#e(t,a,h,f,e,c,d,m,3*(-e+3*(c-d)+m),6*(e-2*c+d),3*(c-e),g)}}function stringToUTF8String(l){return decodeURIComponent(escape(l))}let NormalizeRegex=null,NormalizationMap=null;function normalizeUnicode(l){return NormalizeRegex||(NormalizeRegex=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,NormalizationMap=new Map([["","t"]])),l.replaceAll(NormalizeRegex,(t,e,a)=>e?e.normalize("NFKC"):NormalizationMap.get(a))}function getUuid(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const l=new Uint8Array(32);return crypto.getRandomValues(l),bytesToString(l)}const AnnotationPrefix="pdfjs_internal_id_";function _isValidExplicitDest(l,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[a,c,...h]=e;if(!l(a)&&!Number.isInteger(a)||!t(c))return!1;const d=h.length;let f=!0;switch(c.name){case"XYZ":if(d<2||d>3)return!1;break;case"Fit":case"FitB":return d===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(d>1)return!1;break;case"FitR":if(d!==4)return!1;f=!1;break;default:return!1}for(const m of h)if(!(typeof m=="number"||f&&m===null))return!1;return!0}function MathClamp(l,t,e){return Math.min(Math.max(l,t),e)}function toBase64Util(l){return Uint8Array.prototype.toBase64?l.toBase64():btoa(bytesToString(l))}function fromBase64Util(l){return Uint8Array.fromBase64?Uint8Array.fromBase64(l):stringToBytes(atob(l))}typeof Promise.try!="function"&&(Promise.try=function(l,...t){return new Promise(e=>{e(l(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(l){return l.reduce((t,e)=>t+e,0)});const SVG_NS="http://www.w3.org/2000/svg";class PixelsPerInch{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function fetchData(l,t="text"){if(isValidFetchUrl(l,document.baseURI)){const e=await fetch(l);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,a)=>{const c=new XMLHttpRequest;c.open("GET",l,!0),c.responseType=t,c.onreadystatechange=()=>{if(c.readyState===XMLHttpRequest.DONE){if(c.status===200||c.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(c.response);return}e(c.responseText);return}a(new Error(c.statusText))}},c.send(null)})}class PageViewport{constructor({viewBox:t,userUnit:e,scale:a,rotation:c,offsetX:h=0,offsetY:d=0,dontFlip:f=!1}){this.viewBox=t,this.userUnit=e,this.scale=a,this.rotation=c,this.offsetX=h,this.offsetY=d,a*=e;const m=(t[2]+t[0])/2,g=(t[3]+t[1])/2;let y,w,E,S;switch(c%=360,c<0&&(c+=360),c){case 180:y=-1,w=0,E=0,S=1;break;case 90:y=0,w=1,E=1,S=0;break;case 270:y=0,w=-1,E=-1,S=0;break;case 0:y=1,w=0,E=0,S=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}f&&(E=-E,S=-S);let C,T,k,D;y===0?(C=Math.abs(g-t[1])*a+h,T=Math.abs(m-t[0])*a+d,k=(t[3]-t[1])*a,D=(t[2]-t[0])*a):(C=Math.abs(m-t[0])*a+h,T=Math.abs(g-t[1])*a+d,k=(t[2]-t[0])*a,D=(t[3]-t[1])*a),this.transform=[y*a,w*a,E*a,S*a,C-y*a*m-E*a*g,T-w*a*m-S*a*g],this.width=k,this.height=D}get rawDims(){const t=this.viewBox;return shadow(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:a=this.offsetX,offsetY:c=this.offsetY,dontFlip:h=!1}={}){return new PageViewport({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:a,offsetY:c,dontFlip:h})}convertToViewportPoint(t,e){const a=[t,e];return Util.applyTransform(a,this.transform),a}convertToViewportRectangle(t){const e=[t[0],t[1]];Util.applyTransform(e,this.transform);const a=[t[2],t[3]];return Util.applyTransform(a,this.transform),[e[0],e[1],a[0],a[1]]}convertToPdfPoint(t,e){const a=[t,e];return Util.applyInverseTransform(a,this.transform),a}}class RenderingCancelledException extends BaseException{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function isDataScheme(l){const t=l.length;let e=0;for(;e<t&&l[e].trim()==="";)e++;return l.substring(e,e+5).toLowerCase()==="data:"}function isPdfFile(l){return typeof l=="string"&&/\.pdf$/i.test(l)}function getFilenameFromUrl(l){return[l]=l.split(/[#?]/,1),l.substring(l.lastIndexOf("/")+1)}function getPdfFilenameFromUrl(l,t="document.pdf"){if(typeof l!="string")return t;if(isDataScheme(l))return warn('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const a=(f=>{try{return new URL(f)}catch{try{return new URL(decodeURIComponent(f))}catch{try{return new URL(f,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(f),"https://foo.bar")}catch{return null}}}}})(l);if(!a)return t;const c=f=>{try{let m=decodeURIComponent(f);return m.includes("/")?(m=m.split("/").at(-1),m.test(/^\.pdf$/i)?m:f):m}catch{return f}},h=/\.pdf$/i,d=a.pathname.split("/").at(-1);if(h.test(d))return c(d);if(a.searchParams.size>0){const f=Array.from(a.searchParams.values()).reverse();for(const g of f)if(h.test(g))return c(g);const m=Array.from(a.searchParams.keys()).reverse();for(const g of m)if(h.test(g))return c(g)}if(a.hash){const m=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(a.hash);if(m)return c(m[0])}return t}class StatTimer{started=Object.create(null);times=[];time(t){t in this.started&&warn(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||warn(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:a}of this.times)e=Math.max(a.length,e);for(const{name:a,start:c,end:h}of this.times)t.push(`${a.padEnd(e)} ${h-c}ms
`);return t.join("")}}function isValidFetchUrl(l,t){const e=t?URL.parse(l,t):URL.parse(l);return e?.protocol==="http:"||e?.protocol==="https:"}function noContextMenu(l){l.preventDefault()}function stopEvent(l){l.preventDefault(),l.stopPropagation()}function deprecated(l){console.log("Deprecated API usage: "+l)}class PDFDateString{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=this.#t.exec(t);if(!e)return null;const a=parseInt(e[1],10);let c=parseInt(e[2],10);c=c>=1&&c<=12?c-1:0;let h=parseInt(e[3],10);h=h>=1&&h<=31?h:1;let d=parseInt(e[4],10);d=d>=0&&d<=23?d:0;let f=parseInt(e[5],10);f=f>=0&&f<=59?f:0;let m=parseInt(e[6],10);m=m>=0&&m<=59?m:0;const g=e[7]||"Z";let y=parseInt(e[8],10);y=y>=0&&y<=23?y:0;let w=parseInt(e[9],10)||0;return w=w>=0&&w<=59?w:0,g==="-"?(d+=y,f+=w):g==="+"&&(d-=y,f-=w),new Date(Date.UTC(a,c,h,d,f,m))}}function getXfaPageViewport(l,{scale:t=1,rotation:e=0}){const{width:a,height:c}=l.attributes.style,h=[0,0,parseInt(a),parseInt(c)];return new PageViewport({viewBox:h,userUnit:1,scale:t,rotation:e})}function getRGB(l){if(l.startsWith("#")){const t=parseInt(l.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return l.startsWith("rgb(")?l.slice(4,-1).split(",").map(t=>parseInt(t)):l.startsWith("rgba(")?l.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(warn(`Not a valid color format: "${l}"`),[0,0,0])}function getColorValues(l){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of l.keys()){t.style.color=e;const a=window.getComputedStyle(t).color;l.set(e,getRGB(a))}t.remove()}function getCurrentTransform(l){const{a:t,b:e,c:a,d:c,e:h,f:d}=l.getTransform();return[t,e,a,c,h,d]}function getCurrentTransformInverse(l){const{a:t,b:e,c:a,d:c,e:h,f:d}=l.getTransform().invertSelf();return[t,e,a,c,h,d]}function setLayerDimensions(l,t,e=!1,a=!0){if(t instanceof PageViewport){const{pageWidth:c,pageHeight:h}=t.rawDims,{style:d}=l,f=util_FeatureTest.isCSSRoundSupported,m=`var(--total-scale-factor) * ${c}px`,g=`var(--total-scale-factor) * ${h}px`,y=f?`round(down, ${m}, var(--scale-round-x))`:`calc(${m})`,w=f?`round(down, ${g}, var(--scale-round-y))`:`calc(${g})`;!e||t.rotation%180===0?(d.width=y,d.height=w):(d.width=w,d.height=y)}a&&l.setAttribute("data-main-rotation",t.rotation)}class OutputScale{constructor(){const{pixelRatio:t}=OutputScale;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,a,c,h=-1){let d=1/0,f=1/0,m=1/0;a=OutputScale.capPixels(a,h),a>0&&(d=Math.sqrt(a/(t*e))),c!==-1&&(f=c/t,m=c/e);const g=Math.min(d,f,m);return this.sx>g||this.sy>g?(this.sx=g,this.sy=g,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const a=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,a):a}return t}}const SupportedImageMimeTypes=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class EditorToolbar{#t=null;#e=null;#n;#i=null;#r=null;#s=null;#a=null;static#o=null;constructor(t){this.#n=t,EditorToolbar.#o||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=this.#n._uiManager._signal;t.addEventListener("contextmenu",noContextMenu,{signal:e}),t.addEventListener("pointerdown",EditorToolbar.#u,{signal:e});const a=this.#i=document.createElement("div");a.className="buttons",t.append(a);const c=this.#n.toolbarPosition;if(c){const{style:h}=t,d=this.#n._uiManager.direction==="ltr"?1-c[0]:c[0];h.insetInlineEnd=`${100*d}%`,h.top=`calc(${100*c[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#u(t){t.stopPropagation()}#c(t){this.#n._focusEventsAllowed=!1,stopEvent(t)}#d(t){this.#n._focusEventsAllowed=!0,stopEvent(t)}#l(t){const e=this.#n._uiManager._signal;t.addEventListener("focusin",this.#c.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#d.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",noContextMenu,{signal:e})}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#r?.shown(),this.#s?.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=this.#n,a=document.createElement("button");a.className="delete",a.tabIndex=0,a.setAttribute("data-l10n-id",EditorToolbar.#o[t]),this.#l(a),a.addEventListener("click",c=>{e.delete()},{signal:e._signal}),this.#i.append(a)}get#p(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const e=await t.render();this.#l(e),this.#i.append(e,this.#p),this.#r=t}addComment(t){if(this.#s)return;const e=t.render();e&&(this.#l(e),this.#i.prepend(e,this.#p),this.#s=t,t.toolbar=this)}addColorPicker(t){if(this.#e)return;this.#e=t;const e=t.renderButton();this.#l(e),this.#i.append(e,this.#p)}async addEditSignatureButton(t){const e=this.#a=await t.renderEditButton(this.#n);this.#l(e),this.#i.append(e,this.#p)}async addButton(t,e){switch(t){case"colorPicker":this.addColorPicker(e);break;case"altText":await this.addAltText(e);break;case"editSignature":await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(e);break}}updateEditSignatureButton(t){this.#a&&(this.#a.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class HighlightToolbar{#t=null;#e=null;#n;constructor(t){this.#n=t}#i(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",noContextMenu,{signal:this.#n._signal});const e=this.#t=document.createElement("div");return e.className="buttons",t.append(e),this.#s(),t}#r(t,e){let a=0,c=0;for(const h of t){const d=h.y+h.height;if(d<a)continue;const f=h.x+(e?h.width:0);if(d>a){c=f,a=d;continue}e?f>c&&(c=f):f<c&&(c=f)}return[e?1-c:c,a]}show(t,e,a){const[c,h]=this.#r(e,a),{style:d}=this.#e||=this.#i();t.append(this.#e),d.insetInlineEnd=`${100*c}%`,d.top=`calc(${100*h}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#s(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const a=this.#n._signal;t.addEventListener("contextmenu",noContextMenu,{signal:a}),t.addEventListener("click",()=>{this.#n.highlightSelection("floating_button")},{signal:a}),this.#t.append(t)}}function bindEvents(l,t,e){for(const a of e)t.addEventListener(a,l[a].bind(l))}class IdManager{#t=0;get id(){return`${AnnotationEditorPrefix}${this.#t++}`}}class ImageManager{#t=getUuid();#e=0;#n=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',a=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),c=new Image;c.src=t;const h=c.decode().then(()=>(a.drawImage(c,0,0,1,1,0,0,1,3),new Uint32Array(a.getImageData(0,0,1,1).data.buffer)[0]===0));return shadow(this,"_isSVGFittingCanvas",h)}async#i(t,e){this.#n||=new Map;let a=this.#n.get(t);if(a===null)return null;if(a?.bitmap)return a.refCounter+=1,a;try{a||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let c;if(typeof e=="string"?(a.url=e,c=await fetchData(e,"blob")):e instanceof File?c=a.file=e:e instanceof Blob&&(c=e),c.type==="image/svg+xml"){const h=ImageManager._isSVGFittingCanvas,d=new FileReader,f=new Image,m=new Promise((g,y)=>{f.onload=()=>{a.bitmap=f,a.isSvg=!0,g()},d.onload=async()=>{const w=a.svgUrl=d.result;f.src=await h?`${w}#svgView(preserveAspectRatio(none))`:w},f.onerror=d.onerror=y});d.readAsDataURL(c),await m}else a.bitmap=await createImageBitmap(c);a.refCounter=1}catch(c){warn(c),a=null}return this.#n.set(t,a),a&&this.#n.set(a.id,a),a}async getFromFile(t){const{lastModified:e,name:a,size:c,type:h}=t;return this.#i(`${e}_${a}_${c}_${h}`,t)}async getFromUrl(t){return this.#i(t,t)}async getFromBlob(t,e){const a=await e;return this.#i(t,a)}async getFromId(t){this.#n||=new Map;const e=this.#n.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:a}=e;return delete e.blobPromise,this.getFromBlob(e.id,a)}return this.getFromUrl(e.url)}getFromCanvas(t,e){this.#n||=new Map;let a=this.#n.get(t);if(a?.bitmap)return a.refCounter+=1,a;const c=new OffscreenCanvas(e.width,e.height);return c.getContext("2d").drawImage(e,0,0),a={bitmap:c.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#n.set(t,a),this.#n.set(a.id,a),a}getSvgUrl(t){const e=this.#n.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#n||=new Map;const e=this.#n.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:a}=e;if(!e.url&&!e.file){const c=new OffscreenCanvas(a.width,a.height);c.getContext("bitmaprenderer").transferFromImageBitmap(a),e.blobPromise=c.convertToBlob()}a.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class CommandManager{#t=[];#e=!1;#n;#i=-1;constructor(t=128){this.#n=t}add({cmd:t,undo:e,post:a,mustExec:c,type:h=NaN,overwriteIfSameType:d=!1,keepUndo:f=!1}){if(c&&t(),this.#e)return;const m={cmd:t,undo:e,post:a,type:h};if(this.#i===-1){this.#t.length>0&&(this.#t.length=0),this.#i=0,this.#t.push(m);return}if(d&&this.#t[this.#i].type===h){f&&(m.undo=this.#t[this.#i].undo),this.#t[this.#i]=m;return}const g=this.#i+1;g===this.#n?this.#t.splice(0,1):(this.#i=g,g<this.#t.length&&this.#t.splice(g)),this.#t.push(m)}undo(){if(this.#i===-1)return;this.#e=!0;const{undo:t,post:e}=this.#t[this.#i];t(),e?.(),this.#e=!1,this.#i-=1}redo(){if(this.#i<this.#t.length-1){this.#i+=1,this.#e=!0;const{cmd:t,post:e}=this.#t[this.#i];t(),e?.(),this.#e=!1}}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#t.length-1}cleanType(t){if(this.#i!==-1){for(let e=this.#i;e>=0;e--)if(this.#t[e].type!==t){this.#t.splice(e+1,this.#i-e),this.#i=e;return}this.#t.length=0,this.#i=-1}}destroy(){this.#t=null}}class KeyboardManager{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=util_FeatureTest.platform;for(const[a,c,h={}]of t)for(const d of a){const f=d.startsWith("mac+");e&&f?(this.callbacks.set(d.slice(4),{callback:c,options:h}),this.allKeys.add(d.split("+").at(-1))):!e&&!f&&(this.callbacks.set(d,{callback:c,options:h}),this.allKeys.add(d.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const a=this.callbacks.get(this.#t(e));if(!a)return;const{callback:c,options:{bubbles:h=!1,args:d=[],checker:f=null}}=a;f&&!f(t,e)||(c.bind(t,...d,e)(),h||stopEvent(e))}}class ColorManager{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return getColorValues(t),shadow(this,"_colors",t)}convert(t){const e=getRGB(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[a,c]of this._colors)if(c.every((h,d)=>h===e[d]))return ColorManager._colorsMapping.get(a);return e}getHexCode(t){const e=this._colors.get(t);return e?Util.makeHexColor(...e):t}}class AnnotationEditorUIManager{#t=new AbortController;#e=null;#n=new Map;#i=new Map;#r=null;#s=null;#a=null;#o=new CommandManager;#u=null;#c=null;#d=null;#l=0;#p=new Set;#g=null;#f=null;#h=new Set;_editorUndoBar=null;#m=!1;#x=!1;#y=!1;#b=null;#E=null;#v=null;#S=null;#R=!1;#A=null;#k=new IdManager;#P=!1;#_=!1;#C=null;#D=null;#F=null;#L=null;#z=null;#T=AnnotationEditorType.NONE;#w=new Set;#j=null;#V=null;#H=null;#G=null;#W={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#U=[0,0];#I=null;#N=null;#$=null;#Y=null;#O=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=AnnotationEditorUIManager.prototype,e=d=>d.#N.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&d.hasSomethingToControl(),a=(d,{target:f})=>{if(f instanceof HTMLInputElement){const{type:m}=f;return m!=="text"&&m!=="number"}return!0},c=this.TRANSLATE_SMALL,h=this.TRANSLATE_BIG;return shadow(this,"_keyboardManager",new KeyboardManager([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:a}],[["ctrl+z","mac+meta+z"],t.undo,{checker:a}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:a}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:a}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(d,{target:f})=>!(f instanceof HTMLButtonElement)&&d.#N.contains(f)&&!d.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(d,{target:f})=>!(f instanceof HTMLButtonElement)&&d.#N.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-c,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-h,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[c,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[h,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-c],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-h],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,c],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,h],checker:e}]]))}constructor(t,e,a,c,h,d,f,m,g,y,w,E,S,C,T,k){const D=this._signal=this.#t.signal;this.#N=t,this.#$=e,this.#Y=a,this.#r=c,this.#u=h,this.#V=d,this._eventBus=f,f._on("editingaction",this.onEditingAction.bind(this),{signal:D}),f._on("pagechanging",this.onPageChanging.bind(this),{signal:D}),f._on("scalechanging",this.onScaleChanging.bind(this),{signal:D}),f._on("rotationchanging",this.onRotationChanging.bind(this),{signal:D}),f._on("setpreference",this.onSetPreference.bind(this),{signal:D}),f._on("switchannotationeditorparams",N=>this.updateParams(N.type,N.value),{signal:D}),this.#rt(),this.#ct(),this.#Z(),this.#s=m.annotationStorage,this.#b=m.filterFactory,this.#H=g,this.#S=y||null,this.#m=w,this.#x=E,this.#y=S,this.#z=C||null,this.viewParameters={realScale:PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=T||null,this._supportsPinchToZoom=k!==!1}destroy(){this.#O?.resolve(),this.#O=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#i.values())t.destroy();this.#i.clear(),this.#n.clear(),this.#h.clear(),this.#L?.clear(),this.#e=null,this.#w.clear(),this.#o.destroy(),this.#r?.destroy(),this.#u?.destroy(),this.#V?.destroy(),this.#A?.hide(),this.#A=null,this.#F?.destroy(),this.#F=null,this.#E&&(clearTimeout(this.#E),this.#E=null),this.#I&&(clearTimeout(this.#I),this.#I=null),this._editorUndoBar?.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#z}get useNewAltTextFlow(){return this.#x}get useNewAltTextWhenAddingImage(){return this.#y}get hcmFilter(){return shadow(this,"hcmFilter",this.#H?this.#b.addHCMFilter(this.#H.foreground,this.#H.background):"none")}get direction(){return shadow(this,"direction",getComputedStyle(this.#N).direction)}get _highlightColors(){return shadow(this,"_highlightColors",this.#S?new Map(this.#S.split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return shadow(this,"highlightColors",null);const e=new Map,a=!!this.#H;for(const[c,h]of t){const d=c.endsWith("_HCM");if(a&&d){e.set(c.replace("_HCM",""),h);continue}!a&&!d&&e.set(c,h)}return shadow(this,"highlightColors",e)}get highlightColorNames(){return shadow(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#d=t}setMainHighlightColorPicker(t){this.#F=t}editAltText(t,e=!1){this.#r?.editAltText(this,t,e)}hasCommentManager(){return!!this.#u}editComment(t,e){this.#u?.open(this,t,e)}getSignature(t){this.#V?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#V}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":this.#y=e;break}}onPageChanging({pageNumber:t}){this.#l=t-1}focusMainContainer(){this.#N.focus()}findParent(t,e){for(const a of this.#i.values()){const{x:c,y:h,width:d,height:f}=a.div.getBoundingClientRect();if(t>=c&&t<=c+d&&e>=h&&e<=h+f)return a}return null}disableUserSelect(t=!1){this.#$.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#h.add(t)}removeShouldRescale(t){this.#h.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*PixelsPerInch.PDF_TO_CSS_UNITS;for(const e of this.#h)e.onScaleChanging();this.#d?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#X({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#Q(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const a of this.#i.values())if(a.hasTextLayer(t))return a;return null}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:a,anchorOffset:c,focusNode:h,focusOffset:d}=e,f=e.toString(),g=this.#X(e).closest(".textLayer"),y=this.getSelectionBoxes(g);if(!y)return;e.empty();const w=this.#Q(g),E=this.#T===AnnotationEditorType.NONE,S=()=>{w?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:y,anchorNode:a,anchorOffset:c,focusNode:h,focusOffset:d,text:f}),E&&this.showAllEditors("highlight",!0,!0)};if(E){this.switchToMode(AnnotationEditorType.HIGHLIGHT,S);return}S()}#it(){const t=document.getSelection();if(!t||t.isCollapsed)return;const a=this.#X(t).closest(".textLayer"),c=this.getSelectionBoxes(a);c&&(this.#A||=new HighlightToolbar(this),this.#A.show(a,c,this.direction==="ltr"))}addToAnnotationStorage(t){!t.isEmpty()&&this.#s&&!this.#s.has(t.id)&&this.#s.setValue(t.id,t)}a11yAlert(t,e=null){const a=this.#Y;a&&(a.setAttribute("data-l10n-id",t),e?a.setAttribute("data-l10n-args",JSON.stringify(e)):a.removeAttribute("data-l10n-args"))}#st(){const t=document.getSelection();if(!t||t.isCollapsed){this.#j&&(this.#A?.hide(),this.#j=null,this.#M({hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===this.#j)return;const c=this.#X(t).closest(".textLayer");if(!c){this.#j&&(this.#A?.hide(),this.#j=null,this.#M({hasSelectedText:!1}));return}if(this.#A?.hide(),this.#j=e,this.#M({hasSelectedText:!0}),!(this.#T!==AnnotationEditorType.HIGHLIGHT&&this.#T!==AnnotationEditorType.NONE)&&(this.#T===AnnotationEditorType.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#R=this.isShiftKeyDown,!this.isShiftKeyDown)){const h=this.#T===AnnotationEditorType.HIGHLIGHT?this.#Q(c):null;h?.toggleDrawing();const d=new AbortController,f=this.combinedSignal(d),m=g=>{g.type==="pointerup"&&g.button!==0||(d.abort(),h?.toggleDrawing(!0),g.type==="pointerup"&&this.#q("main_toolbar"))};window.addEventListener("pointerup",m,{signal:f}),window.addEventListener("blur",m,{signal:f})}}#q(t=""){this.#T===AnnotationEditorType.HIGHLIGHT?this.highlightSelection(t):this.#m&&this.#it()}#rt(){document.addEventListener("selectionchange",this.#st.bind(this),{signal:this._signal})}#at(){if(this.#v)return;this.#v=new AbortController;const t=this.combinedSignal(this.#v);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#ot(){this.#v?.abort(),this.#v=null}blur(){if(this.isShiftKeyDown=!1,this.#R&&(this.#R=!1,this.#q("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#w)if(e.div.contains(t)){this.#D=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#D)return;const[t,e]=this.#D;this.#D=null,e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}#Z(){if(this.#C)return;this.#C=new AbortController;const t=this.combinedSignal(this.#C);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#lt(){this.#C?.abort(),this.#C=null}#J(){if(this.#c)return;this.#c=new AbortController;const t=this.combinedSignal(this.#c);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#tt(){this.#c?.abort(),this.#c=null}#ct(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#Z(),this.#J()}removeEditListeners(){this.#lt(),this.#tt()}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const a of this.#f)if(a.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const a of this.#f)if(a.isHandlingMimeForPasting(e.type)){a.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const a of this.#w){const c=a.serialize(!0);c&&e.push(c)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const h of e.items)for(const d of this.#f)if(d.isHandlingMimeForPasting(h.type)){d.paste(h,this.currentLayer);return}let a=e.getData("application/pdfjs");if(!a)return;try{a=JSON.parse(a)}catch(h){warn(`paste: "${h.message}".`);return}if(!Array.isArray(a))return;this.unselectAll();const c=this.currentLayer;try{const h=[];for(const m of a){const g=await c.deserialize(m);if(!g)return;h.push(g)}const d=()=>{for(const m of h)this.#et(m);this.#nt(h)},f=()=>{for(const m of h)m.remove()};this.addCommands({cmd:d,undo:f,mustExec:!0})}catch(h){warn(`paste: "${h.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#T!==AnnotationEditorType.NONE&&!this.isEditorHandlingKeyboard&&AnnotationEditorUIManager._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#R&&(this.#R=!1,this.#q("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}#M(t){Object.entries(t).some(([a,c])=>this.#W[a]!==c)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#W,t)}),this.#T===AnnotationEditorType.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#B([[AnnotationEditorParamsType.HIGHLIGHT_FREE,!0]]))}#B(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#at(),this.#J(),this.#M({isEditing:this.#T!==AnnotationEditorType.NONE,isEmpty:this.#K(),hasSomethingToUndo:this.#o.hasSomethingToUndo(),hasSomethingToRedo:this.#o.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ot(),this.#tt(),this.#M({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#f){this.#f=t;for(const e of this.#f)this.#B(e.defaultPropertiesToUpdate)}}getId(){return this.#k.id}get currentLayer(){return this.#i.get(this.#l)}getLayer(t){return this.#i.get(t)}get currentPageIndex(){return this.#l}addLayer(t){this.#i.set(t.pageIndex,t),this.#P?t.enable():t.disable()}removeLayer(t){this.#i.delete(t.pageIndex)}async updateMode(t,e=null,a=!1,c=!1,h=!1){if(this.#T!==t&&!(this.#O&&(await this.#O.promise,!this.#O))){if(this.#O=Promise.withResolvers(),this.#d?.commitOrRemove(),this.#T=t,t===AnnotationEditorType.NONE){this.setEditingState(!1),this.#ht(),this._editorUndoBar?.hide(),this.#O.resolve();return}t===AnnotationEditorType.SIGNATURE&&await this.#V?.loadSignatures(),this.setEditingState(!0),await this.#ut(),this.unselectAll();for(const d of this.#i.values())d.updateMode(t);if(!e){a&&this.addNewEditorFromKeyboard(),this.#O.resolve();return}for(const d of this.#n.values())d.annotationElementId===e||d.id===e?(this.setSelected(d),h?d.editComment():c&&d.enterInEditMode()):d.unselect();this.#O.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#T&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(this.#f){switch(t){case AnnotationEditorParamsType.CREATE:this.currentLayer.addNewEditor(e);return;case AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#G||=new Map).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const a of this.#w)a.updateParams(t,e);else for(const a of this.#f)a.updateDefaultParams(t,e)}}showAllEditors(t,e,a=!1){for(const h of this.#n.values())h.editorType===t&&h.show(e);(this.#G?.get(AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#B([[AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#_!==t){this.#_=t;for(const e of this.#i.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}async#ut(){if(!this.#P){this.#P=!0;const t=[];for(const e of this.#i.values())t.push(e.enable());await Promise.all(t);for(const e of this.#n.values())e.enable()}}#ht(){if(this.unselectAll(),this.#P){this.#P=!1;for(const t of this.#i.values())t.disable();for(const t of this.#n.values())t.disable()}}getEditors(t){const e=[];for(const a of this.#n.values())a.pageIndex===t&&e.push(a);return e}getEditor(t){return this.#n.get(t)}addEditor(t){this.#n.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#E&&clearTimeout(this.#E),this.#E=setTimeout(()=>{this.focusMainContainer(),this.#E=null},0)),this.#n.delete(t.id),t.annotationElementId&&this.#L?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#p.has(t.annotationElementId))&&this.#s?.remove(t.id)}addDeletedAnnotationElement(t){this.#p.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#p.has(t)}removeDeletedAnnotationElement(t){this.#p.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#et(t){const e=this.#i.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#B(t.propertiesToUpdate))}get#dt(){let t=null;for(t of this.#w);return t}updateUI(t){this.#dt===t&&this.#B(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#B(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#w.has(t)){this.#w.delete(t),t.unselect(),this.#M({hasSelectedEditor:this.hasSelection});return}this.#w.add(t),t.select(),this.#B(t.propertiesToUpdate),this.#M({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.id}),this.#d?.commitOrRemove();for(const e of this.#w)e!==t&&e.unselect();this.#w.clear(),this.#w.add(t),t.select(),this.#B(t.propertiesToUpdate),this.#M({hasSelectedEditor:!0})}isSelected(t){return this.#w.has(t)}get firstSelectedEditor(){return this.#w.values().next().value}unselect(t){t.unselect(),this.#w.delete(t),this.#M({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#w.size!==0}get isEnterHandled(){return this.#w.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#o.undo(),this.#M({hasSomethingToUndo:this.#o.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#K()}),this._editorUndoBar?.hide()}redo(){this.#o.redo(),this.#M({hasSomethingToUndo:!0,hasSomethingToRedo:this.#o.hasSomethingToRedo(),isEmpty:this.#K()})}addCommands(t){this.#o.add(t),this.#M({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#K()})}cleanUndoStack(t){this.#o.cleanType(t)}#K(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const t of this.#n.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...this.#w],a=()=>{this._editorUndoBar?.show(c,e.length===1?e[0].editorType:e.length);for(const h of e)h.remove()},c=()=>{for(const h of e)this.#et(h)};this.addCommands({cmd:a,undo:c,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#nt(t){for(const e of this.#w)e.unselect();this.#w.clear();for(const e of t)e.isEmpty()||(this.#w.add(e),e.select());this.#M({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#w)t.commit();this.#nt(this.#n.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#T!==AnnotationEditorType.NONE))&&!this.#d?.commitOrRemove()&&this.hasSelection){for(const t of this.#w)t.unselect();this.#w.clear(),this.#M({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,a=!1){if(a||this.commitOrRemove(),!this.hasSelection)return;this.#U[0]+=t,this.#U[1]+=e;const[c,h]=this.#U,d=[...this.#w],f=1e3;this.#I&&clearTimeout(this.#I),this.#I=setTimeout(()=>{this.#I=null,this.#U[0]=this.#U[1]=0,this.addCommands({cmd:()=>{for(const m of d)this.#n.has(m.id)&&(m.translateInPage(c,h),m.translationDone())},undo:()=>{for(const m of d)this.#n.has(m.id)&&(m.translateInPage(-c,-h),m.translationDone())},mustExec:!1})},f);for(const m of d)m.translateInPage(t,e),m.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#g=new Map;for(const t of this.#w)this.#g.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#g)return!1;this.disableUserSelect(!1);const t=this.#g;this.#g=null;let e=!1;for(const[{x:c,y:h,pageIndex:d},f]of t)f.newX=c,f.newY=h,f.newPageIndex=d,e||=c!==f.savedX||h!==f.savedY||d!==f.savedPageIndex;if(!e)return!1;const a=(c,h,d,f)=>{if(this.#n.has(c.id)){const m=this.#i.get(f);m?c._setParentAndPosition(m,h,d):(c.pageIndex=f,c.x=h,c.y=d)}};return this.addCommands({cmd:()=>{for(const[c,{newX:h,newY:d,newPageIndex:f}]of t)a(c,h,d,f)},undo:()=>{for(const[c,{savedX:h,savedY:d,savedPageIndex:f}]of t)a(c,h,d,f)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#g)for(const a of this.#g.keys())a.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#w.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#T}get imageManager(){return shadow(this,"imageManager",new ImageManager)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let g=0,y=e.rangeCount;g<y;g++)if(!t.contains(e.getRangeAt(g).commonAncestorContainer))return null;const{x:a,y:c,width:h,height:d}=t.getBoundingClientRect();let f;switch(t.getAttribute("data-main-rotation")){case"90":f=(g,y,w,E)=>({x:(y-c)/d,y:1-(g+w-a)/h,width:E/d,height:w/h});break;case"180":f=(g,y,w,E)=>({x:1-(g+w-a)/h,y:1-(y+E-c)/d,width:w/h,height:E/d});break;case"270":f=(g,y,w,E)=>({x:1-(y+E-c)/d,y:(g-a)/h,width:E/d,height:w/h});break;default:f=(g,y,w,E)=>({x:(g-a)/h,y:(y-c)/d,width:w/h,height:E/d});break}const m=[];for(let g=0,y=e.rangeCount;g<y;g++){const w=e.getRangeAt(g);if(!w.collapsed)for(const{x:E,y:S,width:C,height:T}of w.getClientRects())C===0||T===0||m.push(f(E,S,C,T))}return m.length===0?null:m}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#a||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#a?.delete(t)}renderAnnotationElement(t){const e=this.#a?.get(t.data.id);if(!e)return;const a=this.#s.getRawValue(e);a&&(this.#T===AnnotationEditorType.NONE&&!a.hasBeenModified||a.renderAnnotationElement(t))}setMissingCanvas(t,e,a){const c=this.#L?.get(t);c&&(c.setCanvas(e,a),this.#L.delete(t))}addMissingCanvas(t,e){(this.#L||=new Map).set(t,e)}}class AltText{#t=null;#e=!1;#n=null;#i=null;#r=null;#s=null;#a=!1;#o=null;#u=null;#c=null;#d=null;#l=!1;static#p=null;static _l10n=null;constructor(t){this.#u=t,this.#l=t._uiManager.useNewAltTextFlow,AltText.#p||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){AltText._l10n??=t}async render(){const t=this.#n=document.createElement("button");t.className="altText",t.tabIndex="0";const e=this.#i=document.createElement("span");t.append(e),this.#l?(t.classList.add("new"),t.setAttribute("data-l10n-id",AltText.#p.missing),e.setAttribute("data-l10n-id",AltText.#p["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const a=this.#u._uiManager._signal;t.addEventListener("contextmenu",noContextMenu,{signal:a}),t.addEventListener("pointerdown",h=>h.stopPropagation(),{signal:a});const c=h=>{h.preventDefault(),this.#u._uiManager.editAltText(this.#u),this.#l&&this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#g}})};return t.addEventListener("click",c,{capture:!0,signal:a}),t.addEventListener("keydown",h=>{h.target===t&&h.key==="Enter"&&(this.#a=!0,c(h))},{signal:a}),await this.#f(),t}get#g(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#a}),this.#a=!1)}isEmpty(){return this.#l?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#l?this.#t!==null||!!this.#c:this.isEmpty()}get guessedText(){return this.#c}async setGuessedText(t){this.#t===null&&(this.#c=t,this.#d=await AltText._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#f())}toggleAltTextBadge(t=!1){if(!this.#l||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const e=this.#o=document.createElement("div");e.className="noAltTextBadge",this.#u.div.append(e)}this.#o.classList.toggle("hidden",!t)}serialize(t){let e=this.#t;return!t&&this.#c===e&&(e=this.#d),{altText:e,decorative:this.#e,guessedText:this.#c,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:e,guessedText:a,textWithDisclaimer:c,cancel:h=!1}){a&&(this.#c=a,this.#d=c),!(this.#t===t&&this.#e===e)&&(h||(this.#t=t,this.#e=e),this.#f())}toggle(t=!1){this.#n&&(!t&&this.#s&&(clearTimeout(this.#s),this.#s=null),this.#n.disabled=!t)}shown(){this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#g}})}destroy(){this.#n?.remove(),this.#n=null,this.#i=null,this.#r=null,this.#o?.remove(),this.#o=null}async#f(){const t=this.#n;if(!t)return;if(this.#l){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",AltText.#p[this.#g]),this.#i?.setAttribute("data-l10n-id",AltText.#p[`${this.#g}-label`]),!this.#t){this.#r?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#r?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=this.#r;if(!e){this.#r=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${this.#u.id}`;const c=100,h=this.#u._uiManager._signal;h.addEventListener("abort",()=>{clearTimeout(this.#s),this.#s=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#s=setTimeout(()=>{this.#s=null,this.#r.classList.add("show"),this.#u._reportTelemetry({action:"alt_text_tooltip"})},c)},{signal:h}),t.addEventListener("mouseleave",()=>{this.#s&&(clearTimeout(this.#s),this.#s=null),this.#r?.classList.remove("show")},{signal:h})}this.#e?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=this.#t),e.parentNode||t.append(e),this.#u.getElementForAltText()?.setAttribute("aria-describedby",e.id)}}class Comment{#t=null;#e=!1;#n=null;#i=null;#r=null;#s=null;#a=!1;constructor(t){this.#n=t,this.toolbar=null}render(){if(!this.#n._uiManager.hasCommentManager())return null;const t=this.#t=document.createElement("button");t.className="comment",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button");const e=this.#n._uiManager._signal;t.addEventListener("contextmenu",noContextMenu,{signal:e}),t.addEventListener("pointerdown",c=>c.stopPropagation(),{signal:e});const a=c=>{c.preventDefault(),this.edit()};return t.addEventListener("click",a,{capture:!0,signal:e}),t.addEventListener("keydown",c=>{c.target===t&&c.key==="Enter"&&(this.#e=!0,a(c))},{signal:e}),t}edit(){const{bottom:t,left:e,right:a}=this.#n.getClientDimensions(),c={top:t};this.#n._uiManager.direction==="ltr"?c.right=a:c.left=e,this.#n._uiManager.editComment(this.#n,c)}finish(){this.#t&&(this.#t.focus({focusVisible:this.#e}),this.#e=!1)}isDeleted(){return this.#a||this.#r===""}hasBeenEdited(){return this.isDeleted()||this.#r!==this.#i}serialize(){return this.data}get data(){return{text:this.#r,date:this.#s,deleted:this.#a}}set data(t){if(t===null){this.#r="",this.#a=!0;return}this.#r=t,this.#s=new Date,this.#a=!1}setInitialText(t){this.#i=t,this.data=t}toggle(t=!1){this.#t&&(this.#t.disabled=!t)}shown(){}destroy(){this.#t?.remove(),this.#t=null,this.#r="",this.#s=null,this.#n=null,this.#e=!1,this.#a=!1}}class TouchManager{#t;#e=!1;#n=null;#i;#r;#s;#a;#o=null;#u;#c=null;#d;#l=null;constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:a=null,onPinchStart:c=null,onPinching:h=null,onPinchEnd:d=null,signal:f}){this.#t=t,this.#n=a,this.#i=e,this.#r=c,this.#s=h,this.#a=d,this.#d=new AbortController,this.#u=AbortSignal.any([f,this.#d.signal]),t.addEventListener("touchstart",this.#p.bind(this),{passive:!1,signal:this.#u})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/OutputScale.pixelRatio}#p(t){if(this.#i?.())return;if(t.touches.length===1){if(this.#o)return;const c=this.#o=new AbortController,h=AbortSignal.any([this.#u,c.signal]),d=this.#t,f={capture:!0,signal:h,passive:!1},m=g=>{g.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};d.addEventListener("pointerdown",g=>{g.pointerType==="touch"&&(stopEvent(g),m(g))},f),d.addEventListener("pointerup",m,f),d.addEventListener("pointercancel",m,f);return}if(!this.#l){this.#l=new AbortController;const c=AbortSignal.any([this.#u,this.#l.signal]),h=this.#t,d={signal:c,capture:!1,passive:!1};h.addEventListener("touchmove",this.#g.bind(this),d);const f=this.#f.bind(this);h.addEventListener("touchend",f,d),h.addEventListener("touchcancel",f,d),d.capture=!0,h.addEventListener("pointerdown",stopEvent,d),h.addEventListener("pointermove",stopEvent,d),h.addEventListener("pointercancel",stopEvent,d),h.addEventListener("pointerup",stopEvent,d),this.#r?.()}if(stopEvent(t),t.touches.length!==2||this.#n?.()){this.#c=null;return}let[e,a]=t.touches;e.identifier>a.identifier&&([e,a]=[a,e]),this.#c={touch0X:e.screenX,touch0Y:e.screenY,touch1X:a.screenX,touch1Y:a.screenY}}#g(t){if(!this.#c||t.touches.length!==2)return;stopEvent(t);let[e,a]=t.touches;e.identifier>a.identifier&&([e,a]=[a,e]);const{screenX:c,screenY:h}=e,{screenX:d,screenY:f}=a,m=this.#c,{touch0X:g,touch0Y:y,touch1X:w,touch1Y:E}=m,S=w-g,C=E-y,T=d-c,k=f-h,D=Math.hypot(T,k)||1,N=Math.hypot(S,C)||1;if(!this.#e&&Math.abs(N-D)<=TouchManager.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(m.touch0X=c,m.touch0Y=h,m.touch1X=d,m.touch1Y=f,!this.#e){this.#e=!0;return}const L=[(c+d)/2,(h+f)/2];this.#s?.(L,N,D)}#f(t){t.touches.length>=2||(this.#l&&(this.#l.abort(),this.#l=null,this.#a?.()),this.#c&&(stopEvent(t),this.#c=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#o?.abort(),this.#o=null}}class AnnotationEditor{#t=null;#e=null;#n=null;#i=null;#r=!1;#s=null;#a="";#o=!1;#u=null;#c=null;#d=null;#l=null;#p="";#g=!1;#f=null;#h=!1;#m=!1;#x=!1;#y=null;#b=0;#E=0;#v=null;#S=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#R=!1;#A=AnnotationEditor._zIndex++;static _borderLineWidth=-1;static _colorManager=new ColorManager;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=AnnotationEditor.prototype._resizeWithKeyboard,e=AnnotationEditorUIManager.TRANSLATE_SMALL,a=AnnotationEditorUIManager.TRANSLATE_BIG;return shadow(this,"_resizerKeyboardManager",new KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-a,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[a,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-a]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,a]}],[["Escape","mac+Escape"],AnnotationEditor.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null;const{rotation:e,rawDims:{pageWidth:a,pageHeight:c,pageX:h,pageY:d}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[a,c],this.pageTranslation=[h,d];const[f,m]=this.parentDimensions;this.x=t.x/f,this.y=t.y/m,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return shadow(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new FakeEditor({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(AnnotationEditor._l10n??=t,AnnotationEditor._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),AnnotationEditor._borderLineWidth!==-1)return;const a=getComputedStyle(document.documentElement);AnnotationEditor._borderLineWidth=parseFloat(a.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){unreachable("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#R}set _isDraggable(t){this.#R=t,this.div?.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#A}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):this.#$(),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#g?this.#g=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,a,c){const[h,d]=this.parentDimensions;[a,c]=this.screenToPageTranslation(a,c),this.x=(t+a)/h,this.y=(e+c)/d,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[a,c]=this.parentDimensions;this.setAt(t*a,e*c,this.width*a,this.height*c),this._onTranslated()}#k([t,e],a,c){[a,c]=this.screenToPageTranslation(a,c),this.x+=a/t,this.y+=c/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#k(this.parentDimensions,t,e)}translateInPage(t,e){this.#f||=[this.x,this.y,this.width,this.height],this.#k(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){this.#f||=[this.x,this.y,this.width,this.height];const{div:a,parentDimensions:[c,h]}=this;if(this.x+=t/c,this.y+=e/h,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:w,y:E}=this.div.getBoundingClientRect();this.parent.findNewParent(this,w,E)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:d,y:f}=this;const[m,g]=this.getBaseTranslation();d+=m,f+=g;const{style:y}=a;y.left=`${(100*d).toFixed(2)}%`,y.top=`${(100*f).toFixed(2)}%`,this._onTranslating(d,f),a.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#f&&(this.#f[0]!==this.x||this.#f[1]!==this.y)}get _hasBeenResized(){return!!this.#f&&(this.#f[2]!==this.width||this.#f[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:a}=AnnotationEditor,c=a/t,h=a/e;switch(this.rotation){case 90:return[-c,h];case 180:return[c,h];case 270:return[c,-h];default:return[-c,-h]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[a,c]}=this;let{x:h,y:d,width:f,height:m}=this;if(f*=a,m*=c,h*=a,d*=c,this._mustFixPosition)switch(t){case 0:h=MathClamp(h,0,a-f),d=MathClamp(d,0,c-m);break;case 90:h=MathClamp(h,0,a-m),d=MathClamp(d,f,c);break;case 180:h=MathClamp(h,f,a),d=MathClamp(d,m,c);break;case 270:h=MathClamp(h,m,a),d=MathClamp(d,0,c-f);break}this.x=h/=a,this.y=d/=c;const[g,y]=this.getBaseTranslation();h+=g,d+=y,e.left=`${(100*h).toFixed(2)}%`,e.top=`${(100*d).toFixed(2)}%`,this.moveInDOM()}static#P(t,e,a){switch(a){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return AnnotationEditor.#P(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return AnnotationEditor.#P(t,e,360-this.parentRotation)}#_(t){switch(t){case 90:{const[e,a]=this.pageDimensions;return[0,-e/a,a/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,a]=this.pageDimensions;return[0,e/a,-a/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,a]}=this;return[e*t,a*t]}setDims(t,e){const[a,c]=this.parentDimensions,{style:h}=this.div;h.width=`${(100*t/a).toFixed(2)}%`,this.#o||(h.height=`${(100*e/c).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:a}=t,c=a.endsWith("%"),h=!this.#o&&e.endsWith("%");if(c&&h)return;const[d,f]=this.parentDimensions;c||(t.width=`${(100*parseFloat(a)/d).toFixed(2)}%`),!this.#o&&!h&&(t.height=`${(100*parseFloat(e)/f).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#C(){if(this.#u)return;this.#u=document.createElement("div"),this.#u.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const a of t){const c=document.createElement("div");this.#u.append(c),c.classList.add("resizer",a),c.setAttribute("data-resizer-name",a),c.addEventListener("pointerdown",this.#D.bind(this,a),{signal:e}),c.addEventListener("contextmenu",noContextMenu,{signal:e}),c.tabIndex=-1}this.div.prepend(this.#u)}#D(t,e){e.preventDefault();const{isMac:a}=util_FeatureTest.platform;if(e.button!==0||e.ctrlKey&&a)return;this.#n?.toggle(!1);const c=this._isDraggable;this._isDraggable=!1,this.#c=[e.screenX,e.screenY];const h=new AbortController,d=this._uiManager.combinedSignal(h);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#z.bind(this,t),{passive:!0,capture:!0,signal:d}),window.addEventListener("touchmove",stopEvent,{passive:!1,signal:d}),window.addEventListener("contextmenu",noContextMenu,{signal:d}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const f=this.parent.div.style.cursor,m=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const g=()=>{h.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=c,this.parent.div.style.cursor=f,this.div.style.cursor=m,this.#L()};window.addEventListener("pointerup",g,{signal:d}),window.addEventListener("blur",g,{signal:d})}#F(t,e,a,c){this.width=a,this.height=c,this.x=t,this.y=e;const[h,d]=this.parentDimensions;this.setDims(h*a,d*c),this.fixAndSetPosition(),this._onResized()}_onResized(){}#L(){if(!this.#d)return;const{savedX:t,savedY:e,savedWidth:a,savedHeight:c}=this.#d;this.#d=null;const h=this.x,d=this.y,f=this.width,m=this.height;h===t&&d===e&&f===a&&m===c||this.addCommands({cmd:this.#F.bind(this,h,d,f,m),undo:this.#F.bind(this,t,e,a,c),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#z(t,e){const[a,c]=this.parentDimensions,h=this.x,d=this.y,f=this.width,m=this.height,g=AnnotationEditor.MIN_SIZE/a,y=AnnotationEditor.MIN_SIZE/c,w=this.#_(this.rotation),E=(q,z)=>[w[0]*q+w[2]*z,w[1]*q+w[3]*z],S=this.#_(360-this.rotation),C=(q,z)=>[S[0]*q+S[2]*z,S[1]*q+S[3]*z];let T,k,D=!1,N=!1;switch(t){case"topLeft":D=!0,T=(q,z)=>[0,0],k=(q,z)=>[q,z];break;case"topMiddle":T=(q,z)=>[q/2,0],k=(q,z)=>[q/2,z];break;case"topRight":D=!0,T=(q,z)=>[q,0],k=(q,z)=>[0,z];break;case"middleRight":N=!0,T=(q,z)=>[q,z/2],k=(q,z)=>[0,z/2];break;case"bottomRight":D=!0,T=(q,z)=>[q,z],k=(q,z)=>[0,0];break;case"bottomMiddle":T=(q,z)=>[q/2,z],k=(q,z)=>[q/2,0];break;case"bottomLeft":D=!0,T=(q,z)=>[0,z],k=(q,z)=>[q,0];break;case"middleLeft":N=!0,T=(q,z)=>[0,z/2],k=(q,z)=>[q,z/2];break}const L=T(f,m),j=k(f,m);let F=E(...j);const $=AnnotationEditor._round(h+F[0]),G=AnnotationEditor._round(d+F[1]);let nt=1,ot=1,ct,ft;if(e.fromKeyboard)({deltaX:ct,deltaY:ft}=e);else{const{screenX:q,screenY:z}=e,[J,lt]=this.#c;[ct,ft]=this.screenToPageTranslation(q-J,z-lt),this.#c[0]=q,this.#c[1]=z}if([ct,ft]=C(ct/a,ft/c),D){const q=Math.hypot(f,m);nt=ot=Math.max(Math.min(Math.hypot(j[0]-L[0]-ct,j[1]-L[1]-ft)/q,1/f,1/m),g/f,y/m)}else N?nt=MathClamp(Math.abs(j[0]-L[0]-ct),g,1)/f:ot=MathClamp(Math.abs(j[1]-L[1]-ft),y,1)/m;const Tt=AnnotationEditor._round(f*nt),At=AnnotationEditor._round(m*ot);F=E(...k(Tt,At));const gt=$-F[0],Mt=G-F[1];this.#f||=[this.x,this.y,this.width,this.height],this.width=Tt,this.height=At,this.x=gt,this.y=Mt,this.setDims(a*Tt,c*At),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#n?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#m)return this._editToolbar;this._editToolbar=new EditorToolbar(this),this.div.append(this._editToolbar.render()),this._editToolbar.addButton("comment",this.addCommentButton());const{toolbarButtons:t}=this;if(t)for(const[e,a]of t)await this._editToolbar.addButton(e,a);return this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#n?.destroy())}addContainer(t){const e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#n||(AltText.initialize(AnnotationEditor._l10n),this.#n=new AltText(this),this.#t&&(this.#n.data=this.#t,this.#t=null)),this.#n}get altTextData(){return this.#n?.data}set altTextData(t){this.#n&&(this.#n.data=t)}get guessedAltText(){return this.#n?.guessedText}async setGuessedAltText(t){await this.#n?.setGuessedText(t)}serializeAltText(t){return this.#n?.serialize(t)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}addCommentButton(){return this.#i?this.#i:this.#i=new Comment(this)}get commentColor(){return null}get comment(){const t=this.#i;return{text:t.data.text,date:t.data.date,deleted:t.isDeleted(),color:this.commentColor}}set comment(t){this.#i||(this.#i=new Comment(this)),this.#i.data=t}setCommentData(t){this.#i||(this.#i=new Comment(this)),this.#i.setInitialText(t)}get hasEditedComment(){return this.#i?.hasBeenEdited()}async editComment(){this.#i||(this.#i=new Comment(this)),this.#i.edit()}addComment(t){this.hasEditedComment&&(t.popup={contents:this.comment.text,deleted:this.comment.deleted})}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#r?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#G();const[e,a]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*a/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/a).toFixed(2)}%`);const[c,h]=this.getInitialTranslation();return this.translate(c,h),bindEvents(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#S||=new TouchManager({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#T.bind(this),onPinching:this.#w.bind(this),onPinchEnd:this.#j.bind(this),signal:this._uiManager._signal})),this._uiManager._editorUndoBar?.hide(),t}#T(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#n?.toggle(!1),this.parent.togglePointerEvents(!1)}#w(t,e,a){let h=.7*(a/e)+1-.7;if(h===1)return;const d=this.#_(this.rotation),f=($,G)=>[d[0]*$+d[2]*G,d[1]*$+d[3]*G],[m,g]=this.parentDimensions,y=this.x,w=this.y,E=this.width,S=this.height,C=AnnotationEditor.MIN_SIZE/m,T=AnnotationEditor.MIN_SIZE/g;h=Math.max(Math.min(h,1/E,1/S),C/E,T/S);const k=AnnotationEditor._round(E*h),D=AnnotationEditor._round(S*h);if(k===E&&D===S)return;this.#f||=[y,w,E,S];const N=f(E/2,S/2),L=AnnotationEditor._round(y+N[0]),j=AnnotationEditor._round(w+N[1]),F=f(k/2,D/2);this.x=L-F[0],this.y=j-F[1],this.width=k,this.height=D,this.setDims(m*k,g*D),this.fixAndSetPosition(),this._onResizing()}#j(){this.#n?.toggle(!0),this.parent.togglePointerEvents(!0),this.#L()}pointerdown(t){const{isMac:e}=util_FeatureTest.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#g=!0,this._isDraggable){this.#H(t);return}this.#V(t)}#V(t){const{isMac:e}=util_FeatureTest.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#H(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let a=!1;const c=new AbortController,h=this._uiManager.combinedSignal(c),d={capture:!0,passive:!1,signal:h},f=g=>{c.abort(),this.#s=null,this.#g=!1,this._uiManager.endDragSession()||this.#V(g),a&&this._onStopDragging()};e&&(this.#b=t.clientX,this.#E=t.clientY,this.#s=t.pointerId,this.#a=t.pointerType,window.addEventListener("pointermove",g=>{a||(a=!0,this._onStartDragging());const{clientX:y,clientY:w,pointerId:E}=g;if(E!==this.#s){stopEvent(g);return}const[S,C]=this.screenToPageTranslation(y-this.#b,w-this.#E);this.#b=y,this.#E=w,this._uiManager.dragSelectedEditors(S,C)},d),window.addEventListener("touchmove",stopEvent,d),window.addEventListener("pointerdown",g=>{g.pointerType===this.#a&&(this.#S||g.isPrimary)&&f(g),stopEvent(g)},d));const m=g=>{if(!this.#s||this.#s===g.pointerId){f(g);return}stopEvent(g)};window.addEventListener("pointerup",m,{signal:h}),window.addEventListener("blur",m,{signal:h})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.#y=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,a){t.changeParent(this),this.x=e,this.y=a,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,a=this.rotation){const c=this.parentScale,[h,d]=this.pageDimensions,[f,m]=this.pageTranslation,g=t/c,y=e/c,w=this.x*h,E=this.y*d,S=this.width*h,C=this.height*d;switch(a){case 0:return[w+g+f,d-E-y-C+m,w+g+S+f,d-E-y+m];case 90:return[w+y+f,d-E+g+m,w+y+C+f,d-E+g+S+m];case 180:return[w-g-S+f,d-E+y+m,w-g+f,d-E+y+C+m];case 270:return[w-y-C+f,d-E-g-S+m,w-y+f,d-E-g+m];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[a,c,h,d]=t,f=h-a,m=d-c;switch(this.rotation){case 0:return[a,e-d,f,m];case 90:return[a,e-c,m,f];case 180:return[h,e-c,f,m];case 270:return[h,e-d,m,f];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#m=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#m=!1,!0):!1}isInEditMode(){return this.#m}shouldGetKeyboardEvents(){return this.#x}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:a,right:c}=this.getClientDimensions(),{innerHeight:h,innerWidth:d}=window;return e<d&&c>0&&t<h&&a>0}#G(){if(this.#l||!this.div)return;this.#l=new AbortController;const t=this._uiManager.combinedSignal(this.#l);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#G()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){unreachable("An editor must be serializable")}static async deserialize(t,e,a){const c=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:a,annotationElementId:t.annotationElementId});c.rotation=t.rotation,c.#t=t.accessibilityData,c._isCopy=t.isCopy||!1;const[h,d]=c.pageDimensions,[f,m,g,y]=c.getRectInCurrentCoords(t.rect,d);return c.x=f/h,c.y=m/d,c.width=g/h,c.height=y/d,c}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#l?.abort(),this.#l=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#y&&(clearTimeout(this.#y),this.#y=null),this.#$(),this.removeEditToolbar(),this.#v){for(const t of this.#v.values())clearTimeout(t);this.#v=null}this.parent=null,this.#S?.destroy(),this.#S=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#C(),this.#u.classList.remove("hidden"))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#u.children;if(!this.#e){this.#e=Array.from(e);const d=this.#W.bind(this),f=this.#U.bind(this),m=this._uiManager._signal;for(const g of this.#e){const y=g.getAttribute("data-resizer-name");g.setAttribute("role","spinbutton"),g.addEventListener("keydown",d,{signal:m}),g.addEventListener("blur",f,{signal:m}),g.addEventListener("focus",this.#I.bind(this,y),{signal:m}),g.setAttribute("data-l10n-id",AnnotationEditor._l10nResizer[y])}}const a=this.#e[0];let c=0;for(const d of e){if(d===a)break;c++}const h=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(h!==c){if(h<c)for(let f=0;f<c-h;f++)this.#u.append(this.#u.firstChild);else if(h>c)for(let f=0;f<h-c;f++)this.#u.firstChild.before(this.#u.lastChild);let d=0;for(const f of e){const g=this.#e[d++].getAttribute("data-resizer-name");f.setAttribute("data-l10n-id",AnnotationEditor._l10nResizer[g])}}this.#N(0),this.#x=!0,this.#u.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#W(t){AnnotationEditor._resizerKeyboardManager.exec(this,t)}#U(t){this.#x&&t.relatedTarget?.parentNode!==this.#u&&this.#$()}#I(t){this.#p=this.#x?t:""}#N(t){if(this.#e)for(const e of this.#e)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#x&&this.#z(this.#p,{deltaX:t,deltaY:e,fromKeyboard:!0})}#$(){this.#x=!1,this.#N(-1),this.#L()}_stopResizingWithKeyboard(){this.#$(),this.div.focus()}select(){if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}}unselect(){this.isSelected&&(this.isSelected=!1,this.#u?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#h}set isEditing(t){this.#h=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){this.#o=!0;const a=t/e,{style:c}=this.div;c.aspectRatio=a,c.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#v||=new Map;const{action:a}=t;let c=this.#v.get(a);c&&clearTimeout(c),c=setTimeout(()=>{this._reportTelemetry(t),this.#v.delete(a),this.#v.size===0&&(this.#v=null)},AnnotationEditor._telemetryTimeout),this.#v.set(a,c);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#r=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#r=!0}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const a=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),a.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}}class FakeEditor extends AnnotationEditor{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const SEED=3285377520,MASK_HIGH=4294901760,MASK_LOW=65535;class MurmurHash3_64{constructor(t){this.h1=t?t&4294967295:SEED,this.h2=t?t&4294967295:SEED}update(t){let e,a;if(typeof t=="string"){e=new Uint8Array(t.length*2),a=0;for(let T=0,k=t.length;T<k;T++){const D=t.charCodeAt(T);D<=255?e[a++]=D:(e[a++]=D>>>8,e[a++]=D&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),a=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const c=a>>2,h=a-c*4,d=new Uint32Array(e.buffer,0,c);let f=0,m=0,g=this.h1,y=this.h2;const w=3432918353,E=461845907,S=w&MASK_LOW,C=E&MASK_LOW;for(let T=0;T<c;T++)T&1?(f=d[T],f=f*w&MASK_HIGH|f*S&MASK_LOW,f=f<<15|f>>>17,f=f*E&MASK_HIGH|f*C&MASK_LOW,g^=f,g=g<<13|g>>>19,g=g*5+3864292196):(m=d[T],m=m*w&MASK_HIGH|m*S&MASK_LOW,m=m<<15|m>>>17,m=m*E&MASK_HIGH|m*C&MASK_LOW,y^=m,y=y<<13|y>>>19,y=y*5+3864292196);switch(f=0,h){case 3:f^=e[c*4+2]<<16;case 2:f^=e[c*4+1]<<8;case 1:f^=e[c*4],f=f*w&MASK_HIGH|f*S&MASK_LOW,f=f<<15|f>>>17,f=f*E&MASK_HIGH|f*C&MASK_LOW,c&1?g^=f:y^=f}this.h1=g,this.h2=y}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&MASK_HIGH|t*36045&MASK_LOW,e=e*4283543511&MASK_HIGH|((e<<16|t>>>16)*2950163797&MASK_HIGH)>>>16,t^=e>>>1,t=t*444984403&MASK_HIGH|t*60499&MASK_LOW,e=e*3301882366&MASK_HIGH|((e<<16|t>>>16)*3120437893&MASK_HIGH)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const SerializableEmpty=Object.freeze({map:null,hash:"",transfer:void 0});class AnnotationStorage{#t=!1;#e=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const a=this.#n.get(t);return a===void 0?e:Object.assign(e,a)}getRawValue(t){return this.#n.get(t)}remove(t){if(this.#n.delete(t),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of this.#n.values())if(e instanceof AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(t,e){const a=this.#n.get(t);let c=!1;if(a!==void 0)for(const[h,d]of Object.entries(e))a[h]!==d&&(c=!0,a[h]=d);else c=!0,this.#n.set(t,e);c&&this.#i(),e instanceof AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return this.#n.has(t)}get size(){return this.#n.size}#i(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new PrintAnnotationStorage(this)}get serializable(){if(this.#n.size===0)return SerializableEmpty;const t=new Map,e=new MurmurHash3_64,a=[],c=Object.create(null);let h=!1;for(const[d,f]of this.#n){const m=f instanceof AnnotationEditor?f.serialize(!1,c):f;m&&(t.set(d,m),e.update(`${d}:${JSON.stringify(m)}`),h||=!!m.bitmap)}if(h)for(const d of t.values())d.bitmap&&a.push(d.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:a}:SerializableEmpty}get editorStats(){let t=null;const e=new Map;for(const a of this.#n.values()){if(!(a instanceof AnnotationEditor))continue;const c=a.telemetryFinalData;if(!c)continue;const{type:h}=c;e.has(h)||e.set(h,Object.getPrototypeOf(a).constructor),t||=Object.create(null);const d=t[h]||=new Map;for(const[f,m]of Object.entries(c)){if(f==="type")continue;let g=d.get(f);g||(g=new Map,d.set(f,g));const y=g.get(m)??0;g.set(m,y+1)}}for(const[a,c]of e)t[a]=c.computeTelemetryFinalData(t[a]);return t}resetModifiedIds(){this.#e=null}get modifiedIds(){if(this.#e)return this.#e;const t=[];for(const e of this.#n.values())!(e instanceof AnnotationEditor)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class PrintAnnotationStorage extends AnnotationStorage{#t;constructor(t){super();const{map:e,hash:a,transfer:c}=t.serializable,h=structuredClone(e,c?{transfer:c}:null);this.#t={map:h,hash:a,transfer:c}}get print(){unreachable("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return shadow(this,"modifiedIds",{ids:new Set,hash:""})}}class FontLoader{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:a}){if(!(!t||this.#t.has(t.loadedName))){if(assert(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:c,src:h,style:d}=t,f=new FontFace(c,h,d);this.addNativeFontFace(f);try{await f.load(),this.#t.add(c),a?.(t)}catch{warn(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(f)}return}unreachable("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const a=t.createNativeFontFace();if(a){this.addNativeFontFace(a);try{await a.loaded}catch(c){throw warn(`Failed to load font '${a.family}': '${c}'.`),t.disableFontFace=!0,c}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(a=>{const c=this._queueLoadingCallback(a);this._prepareFontLoadEvent(t,c)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return shadow(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return shadow(this,"isSyncFontLoadingSupported",isNodeJS||util_FeatureTest.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(assert(!c.done,"completeRequest() cannot be called twice."),c.done=!0;a.length>0&&a[0].done;){const h=a.shift();setTimeout(h.callback,0)}}const{loadingRequests:a}=this,c={done:!1,complete:e,callback:t};return a.push(c),c}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return shadow(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function a(j,F){return j.charCodeAt(F)<<24|j.charCodeAt(F+1)<<16|j.charCodeAt(F+2)<<8|j.charCodeAt(F+3)&255}function c(j,F,$,G){const nt=j.substring(0,F),ot=j.substring(F+$);return nt+G+ot}let h,d;const f=this._document.createElement("canvas");f.width=1,f.height=1;const m=f.getContext("2d");let g=0;function y(j,F){if(++g>30){warn("Load test font never loaded."),F();return}if(m.font="30px "+j,m.fillText(".",0,20),m.getImageData(0,0,1,1).data[3]>0){F();return}setTimeout(y.bind(null,j,F))}const w=`lt${Date.now()}${this.loadTestFontId++}`;let E=this._loadTestFont;E=c(E,976,w.length,w);const C=16,T=1482184792;let k=a(E,C);for(h=0,d=w.length-3;h<d;h+=4)k=k-T+a(w,h)|0;h<w.length&&(k=k-T+a(w+"XXX",h)|0),E=c(E,C,4,string32(k));const D=`url(data:font/opentype;base64,${btoa(E)});`,N=`@font-face {font-family:"${w}";src:${D}}`;this.insertRule(N);const L=this._document.createElement("div");L.style.visibility="hidden",L.style.width=L.style.height="10px",L.style.position="absolute",L.style.top=L.style.left="0px";for(const j of[t.loadedName,w]){const F=this._document.createElement("span");F.textContent="Hi",F.style.fontFamily=j,L.append(F)}this._document.body.append(L),y(w,()=>{L.remove(),e.complete()})}}class FontFaceObject{constructor(t,e=null){this.compiledGlyphs=Object.create(null);for(const a in t)this[a]=t[a];this._inspectFont=e}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${toBase64Util(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let a=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(a+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${a}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const a=this.loadedName+"_path_"+e;let c;try{c=t.get(a)}catch(d){warn(`getPathGenerator - ignoring character: "${d}".`)}const h=new Path2D(c||"");return this.fontExtraProperties||t.delete(a),this.compiledGlyphs[e]=h}}function getUrlProp(l){if(l instanceof URL)return l.href;if(typeof l=="string"){if(isNodeJS)return l;const t=URL.parse(l,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(l){if(isNodeJS&&typeof Buffer<"u"&&l instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength)return l;if(typeof l=="string")return stringToBytes(l);if(l instanceof ArrayBuffer||ArrayBuffer.isView(l)||typeof l=="object"&&!isNaN(l?.length))return new Uint8Array(l);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function getFactoryUrlProp(l){if(typeof l!="string")return null;if(l.endsWith("/"))return l;throw new Error(`Invalid factory url: "${l}" must include trailing slash.`)}const isRefProxy=l=>typeof l=="object"&&Number.isInteger(l?.num)&&l.num>=0&&Number.isInteger(l?.gen)&&l.gen>=0,isNameProxy=l=>typeof l=="object"&&typeof l?.name=="string",isValidExplicitDest=_isValidExplicitDest.bind(null,isRefProxy,isNameProxy);class LoopbackPort{#t=new Map;#e=Promise.resolve();postMessage(t,e){const a={data:structuredClone(t,e?{transfer:e}:null)};this.#e.then(()=>{for(const[c]of this.#t)c.call(this,a)})}addEventListener(t,e,a=null){let c=null;if(a?.signal instanceof AbortSignal){const{signal:h}=a;if(h.aborted){warn("LoopbackPort - cannot use an `aborted` signal.");return}const d=()=>this.removeEventListener(t,e);c=()=>h.removeEventListener("abort",d),h.addEventListener("abort",d)}this.#t.set(e,c)}removeEventListener(t,e){this.#t.get(e)?.(),this.#t.delete(e)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const CallbackKind={DATA:1,ERROR:2},StreamKind={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function onFn(){}function wrapReason(l){if(l instanceof AbortException||l instanceof InvalidPDFException||l instanceof PasswordException||l instanceof ResponseException||l instanceof UnknownErrorException)return l;switch(l instanceof Error||typeof l=="object"&&l!==null||unreachable('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),l.name){case"AbortException":return new AbortException(l.message);case"InvalidPDFException":return new InvalidPDFException(l.message);case"PasswordException":return new PasswordException(l.message,l.code);case"ResponseException":return new ResponseException(l.message,l.status,l.missing);case"UnknownErrorException":return new UnknownErrorException(l.message,l.details)}return new UnknownErrorException(l.message,l.toString())}class MessageHandler{#t=new AbortController;constructor(t,e,a){this.sourceName=t,this.targetName=e,this.comObj=a,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),a.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#i(t);return}if(t.callback){const a=t.callbackId,c=this.callbackCapabilities[a];if(!c)throw new Error(`Cannot resolve callback ${a}`);if(delete this.callbackCapabilities[a],t.callback===CallbackKind.DATA)c.resolve(t.data);else if(t.callback===CallbackKind.ERROR)c.reject(wrapReason(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const a=this.sourceName,c=t.sourceName,h=this.comObj;Promise.try(e,t.data).then(function(d){h.postMessage({sourceName:a,targetName:c,callback:CallbackKind.DATA,callbackId:t.callbackId,data:d})},function(d){h.postMessage({sourceName:a,targetName:c,callback:CallbackKind.ERROR,callbackId:t.callbackId,reason:wrapReason(d)})});return}if(t.streamId){this.#n(t);return}e(t.data)}on(t,e){const a=this.actionHandler;if(a[t])throw new Error(`There is already an actionName called "${t}"`);a[t]=e}send(t,e,a){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},a)}sendWithPromise(t,e,a){const c=this.callbackId++,h=Promise.withResolvers();this.callbackCapabilities[c]=h;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:c,data:e},a)}catch(d){h.reject(d)}return h.promise}sendWithStream(t,e,a,c){const h=this.streamId++,d=this.sourceName,f=this.targetName,m=this.comObj;return new ReadableStream({start:g=>{const y=Promise.withResolvers();return this.streamControllers[h]={controller:g,startCall:y,pullCall:null,cancelCall:null,isClosed:!1},m.postMessage({sourceName:d,targetName:f,action:t,streamId:h,data:e,desiredSize:g.desiredSize},c),y.promise},pull:g=>{const y=Promise.withResolvers();return this.streamControllers[h].pullCall=y,m.postMessage({sourceName:d,targetName:f,stream:StreamKind.PULL,streamId:h,desiredSize:g.desiredSize}),y.promise},cancel:g=>{assert(g instanceof Error,"cancel must have a valid reason");const y=Promise.withResolvers();return this.streamControllers[h].cancelCall=y,this.streamControllers[h].isClosed=!0,m.postMessage({sourceName:d,targetName:f,stream:StreamKind.CANCEL,streamId:h,reason:wrapReason(g)}),y.promise}},a)}#n(t){const e=t.streamId,a=this.sourceName,c=t.sourceName,h=this.comObj,d=this,f=this.actionHandler[t.action],m={enqueue(g,y=1,w){if(this.isCancelled)return;const E=this.desiredSize;this.desiredSize-=y,E>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),h.postMessage({sourceName:a,targetName:c,stream:StreamKind.ENQUEUE,streamId:e,chunk:g},w)},close(){this.isCancelled||(this.isCancelled=!0,h.postMessage({sourceName:a,targetName:c,stream:StreamKind.CLOSE,streamId:e}),delete d.streamSinks[e])},error(g){assert(g instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,h.postMessage({sourceName:a,targetName:c,stream:StreamKind.ERROR,streamId:e,reason:wrapReason(g)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};m.sinkCapability.resolve(),m.ready=m.sinkCapability.promise,this.streamSinks[e]=m,Promise.try(f,t.data,m).then(function(){h.postMessage({sourceName:a,targetName:c,stream:StreamKind.START_COMPLETE,streamId:e,success:!0})},function(g){h.postMessage({sourceName:a,targetName:c,stream:StreamKind.START_COMPLETE,streamId:e,reason:wrapReason(g)})})}#i(t){const e=t.streamId,a=this.sourceName,c=t.sourceName,h=this.comObj,d=this.streamControllers[e],f=this.streamSinks[e];switch(t.stream){case StreamKind.START_COMPLETE:t.success?d.startCall.resolve():d.startCall.reject(wrapReason(t.reason));break;case StreamKind.PULL_COMPLETE:t.success?d.pullCall.resolve():d.pullCall.reject(wrapReason(t.reason));break;case StreamKind.PULL:if(!f){h.postMessage({sourceName:a,targetName:c,stream:StreamKind.PULL_COMPLETE,streamId:e,success:!0});break}f.desiredSize<=0&&t.desiredSize>0&&f.sinkCapability.resolve(),f.desiredSize=t.desiredSize,Promise.try(f.onPull||onFn).then(function(){h.postMessage({sourceName:a,targetName:c,stream:StreamKind.PULL_COMPLETE,streamId:e,success:!0})},function(g){h.postMessage({sourceName:a,targetName:c,stream:StreamKind.PULL_COMPLETE,streamId:e,reason:wrapReason(g)})});break;case StreamKind.ENQUEUE:if(assert(d,"enqueue should have stream controller"),d.isClosed)break;d.controller.enqueue(t.chunk);break;case StreamKind.CLOSE:if(assert(d,"close should have stream controller"),d.isClosed)break;d.isClosed=!0,d.controller.close(),this.#r(d,e);break;case StreamKind.ERROR:assert(d,"error should have stream controller"),d.controller.error(wrapReason(t.reason)),this.#r(d,e);break;case StreamKind.CANCEL_COMPLETE:t.success?d.cancelCall.resolve():d.cancelCall.reject(wrapReason(t.reason)),this.#r(d,e);break;case StreamKind.CANCEL:if(!f)break;const m=wrapReason(t.reason);Promise.try(f.onCancel||onFn,m).then(function(){h.postMessage({sourceName:a,targetName:c,stream:StreamKind.CANCEL_COMPLETE,streamId:e,success:!0})},function(g){h.postMessage({sourceName:a,targetName:c,stream:StreamKind.CANCEL_COMPLETE,streamId:e,reason:wrapReason(g)})}),f.sinkCapability.reject(m),f.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#r(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.#t?.abort(),this.#t=null}}class BaseCanvasFactory{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const a=this._createCanvas(t,e);return{canvas:a,context:a.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,e,a){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||a<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=a}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){unreachable("Abstract method `_createCanvas` called.")}}class DOMCanvasFactory extends BaseCanvasFactory{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const a=this._document.createElement("canvas");return a.width=t,a.height=e,a}}class BaseCMapReaderFactory{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(a=>({cMapData:a,isCompressed:this.isCompressed})).catch(a=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){unreachable("Abstract method `_fetch` called.")}}class DOMCMapReaderFactory extends BaseCMapReaderFactory{async _fetch(t){const e=await fetchData(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):stringToBytes(e)}}class BaseFilterFactory{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,a,c,h){return"none"}destroy(t=!1){}}class DOMFilterFactory extends BaseFilterFactory{#t;#e;#n;#i;#r;#s;#a=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#i=t,this.#r=e}get#o(){return this.#e||=new Map}get#u(){return this.#s||=new Map}get#c(){if(!this.#n){const t=this.#r.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const a=this.#r.createElementNS(SVG_NS,"svg");a.setAttribute("width",0),a.setAttribute("height",0),this.#n=this.#r.createElementNS(SVG_NS,"defs"),t.append(a),a.append(this.#n),this.#r.body.append(t)}return this.#n}#d(t){if(t.length===1){const m=t[0],g=new Array(256);for(let w=0;w<256;w++)g[w]=m[w]/255;const y=g.join(",");return[y,y,y]}const[e,a,c]=t,h=new Array(256),d=new Array(256),f=new Array(256);for(let m=0;m<256;m++)h[m]=e[m]/255,d[m]=a[m]/255,f[m]=c[m]/255;return[h.join(","),d.join(","),f.join(",")]}#l(t){if(this.#t===void 0){this.#t="";const e=this.#r.URL;e!==this.#r.baseURI&&(isDataScheme(e)?warn('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=updateUrlHash(e,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let e=this.#o.get(t);if(e)return e;const[a,c,h]=this.#d(t),d=t.length===1?a:`${a}${c}${h}`;if(e=this.#o.get(d),e)return this.#o.set(t,e),e;const f=`g_${this.#i}_transfer_map_${this.#a++}`,m=this.#l(f);this.#o.set(t,m),this.#o.set(d,m);const g=this.#f(f);return this.#m(a,c,h,g),m}addHCMFilter(t,e){const a=`${t}-${e}`,c="base";let h=this.#u.get(c);if(h?.key===a||(h?(h.filter?.remove(),h.key=a,h.url="none",h.filter=null):(h={key:a,url:"none",filter:null},this.#u.set(c,h)),!t||!e))return h.url;const d=this.#y(t);t=Util.makeHexColor(...d);const f=this.#y(e);if(e=Util.makeHexColor(...f),this.#c.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return h.url;const m=new Array(256);for(let S=0;S<=255;S++){const C=S/255;m[S]=C<=.03928?C/12.92:((C+.055)/1.055)**2.4}const g=m.join(","),y=`g_${this.#i}_hcm_filter`,w=h.filter=this.#f(y);this.#m(g,g,g,w),this.#g(w);const E=(S,C)=>{const T=d[S]/255,k=f[S]/255,D=new Array(C+1);for(let N=0;N<=C;N++)D[N]=T+N/C*(k-T);return D.join(",")};return this.#m(E(0,5),E(1,5),E(2,5),w),h.url=this.#l(y),h.url}addAlphaFilter(t){let e=this.#o.get(t);if(e)return e;const[a]=this.#d([t]),c=`alpha_${a}`;if(e=this.#o.get(c),e)return this.#o.set(t,e),e;const h=`g_${this.#i}_alpha_map_${this.#a++}`,d=this.#l(h);this.#o.set(t,d),this.#o.set(c,d);const f=this.#f(h);return this.#x(a,f),d}addLuminosityFilter(t){let e=this.#o.get(t||"luminosity");if(e)return e;let a,c;if(t?([a]=this.#d([t]),c=`luminosity_${a}`):c="luminosity",e=this.#o.get(c),e)return this.#o.set(t,e),e;const h=`g_${this.#i}_luminosity_map_${this.#a++}`,d=this.#l(h);this.#o.set(t,d),this.#o.set(c,d);const f=this.#f(h);return this.#p(f),t&&this.#x(a,f),d}addHighlightHCMFilter(t,e,a,c,h){const d=`${e}-${a}-${c}-${h}`;let f=this.#u.get(t);if(f?.key===d||(f?(f.filter?.remove(),f.key=d,f.url="none",f.filter=null):(f={key:d,url:"none",filter:null},this.#u.set(t,f)),!e||!a))return f.url;const[m,g]=[e,a].map(this.#y.bind(this));let y=Math.round(.2126*m[0]+.7152*m[1]+.0722*m[2]),w=Math.round(.2126*g[0]+.7152*g[1]+.0722*g[2]),[E,S]=[c,h].map(this.#y.bind(this));w<y&&([y,w,E,S]=[w,y,S,E]),this.#c.style.color="";const C=(D,N,L)=>{const j=new Array(256),F=(w-y)/L,$=D/255,G=(N-D)/(255*L);let nt=0;for(let ot=0;ot<=L;ot++){const ct=Math.round(y+ot*F),ft=$+ot*G;for(let Tt=nt;Tt<=ct;Tt++)j[Tt]=ft;nt=ct+1}for(let ot=nt;ot<256;ot++)j[ot]=j[nt-1];return j.join(",")},T=`g_${this.#i}_hcm_${t}_filter`,k=f.filter=this.#f(T);return this.#g(k),this.#m(C(E[0],S[0],5),C(E[1],S[1],5),C(E[2],S[2],5),k),f.url=this.#l(T),f.url}destroy(t=!1){t&&this.#s?.size||(this.#n?.parentNode.parentNode.remove(),this.#n=null,this.#e?.clear(),this.#e=null,this.#s?.clear(),this.#s=null,this.#a=0)}#p(t){const e=this.#r.createElementNS(SVG_NS,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#g(t){const e=this.#r.createElementNS(SVG_NS,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#f(t){const e=this.#r.createElementNS(SVG_NS,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#c.append(e),e}#h(t,e,a){const c=this.#r.createElementNS(SVG_NS,e);c.setAttribute("type","discrete"),c.setAttribute("tableValues",a),t.append(c)}#m(t,e,a,c){const h=this.#r.createElementNS(SVG_NS,"feComponentTransfer");c.append(h),this.#h(h,"feFuncR",t),this.#h(h,"feFuncG",e),this.#h(h,"feFuncB",a)}#x(t,e){const a=this.#r.createElementNS(SVG_NS,"feComponentTransfer");e.append(a),this.#h(a,"feFuncA",t)}#y(t){return this.#c.style.color=t,getRGB(getComputedStyle(this.#c).getPropertyValue("color"))}}class BaseStandardFontDataFactory{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(a=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){unreachable("Abstract method `_fetch` called.")}}class DOMStandardFontDataFactory extends BaseStandardFontDataFactory{async _fetch(t){const e=await fetchData(t,"arraybuffer");return new Uint8Array(e)}}class BaseWasmFactory{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(a=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){unreachable("Abstract method `_fetch` called.")}}class DOMWasmFactory extends BaseWasmFactory{async _fetch(t){const e=await fetchData(t,"arraybuffer");return new Uint8Array(e)}}isNodeJS&&warn("Please use the `legacy` build in Node.js environments.");async function node_utils_fetchData(l){const e=await process.getBuiltinModule("fs").promises.readFile(l);return new Uint8Array(e)}class NodeFilterFactory extends BaseFilterFactory{}class NodeCanvasFactory extends BaseCanvasFactory{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class NodeCMapReaderFactory extends BaseCMapReaderFactory{async _fetch(t){return node_utils_fetchData(t)}}class NodeStandardFontDataFactory extends BaseStandardFontDataFactory{async _fetch(t){return node_utils_fetchData(t)}}class NodeWasmFactory extends BaseWasmFactory{async _fetch(t){return node_utils_fetchData(t)}}const PathType={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function applyBoundingBox(l,t){if(!t)return;const e=t[2]-t[0],a=t[3]-t[1],c=new Path2D;c.rect(t[0],t[1],e,a),l.clip(c)}class BaseShadingPattern{isModifyingCurrentTransform(){return!1}getPattern(){unreachable("Abstract method `getPattern` called.")}}class RadialAxialShadingPattern extends BaseShadingPattern{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const a of this._colorStops)e.addColorStop(a[0],a[1]);return e}getPattern(t,e,a,c){let h;if(c===PathType.STROKE||c===PathType.FILL){const d=e.current.getClippedPathBoundingBox(c,getCurrentTransform(t))||[0,0,0,0],f=Math.ceil(d[2]-d[0])||1,m=Math.ceil(d[3]-d[1])||1,g=e.cachedCanvases.getCanvas("pattern",f,m),y=g.context;y.clearRect(0,0,y.canvas.width,y.canvas.height),y.beginPath(),y.rect(0,0,y.canvas.width,y.canvas.height),y.translate(-d[0],-d[1]),a=Util.transform(a,[1,0,0,1,d[0],d[1]]),y.transform(...e.baseTransform),this.matrix&&y.transform(...this.matrix),applyBoundingBox(y,this._bbox),y.fillStyle=this._createGradient(y),y.fill(),h=t.createPattern(g.canvas,"no-repeat");const w=new DOMMatrix(a);h.setTransform(w)}else applyBoundingBox(t,this._bbox),h=this._createGradient(t);return h}}function drawTriangle(l,t,e,a,c,h,d,f){const m=t.coords,g=t.colors,y=l.data,w=l.width*4;let E;m[e+1]>m[a+1]&&(E=e,e=a,a=E,E=h,h=d,d=E),m[a+1]>m[c+1]&&(E=a,a=c,c=E,E=d,d=f,f=E),m[e+1]>m[a+1]&&(E=e,e=a,a=E,E=h,h=d,d=E);const S=(m[e]+t.offsetX)*t.scaleX,C=(m[e+1]+t.offsetY)*t.scaleY,T=(m[a]+t.offsetX)*t.scaleX,k=(m[a+1]+t.offsetY)*t.scaleY,D=(m[c]+t.offsetX)*t.scaleX,N=(m[c+1]+t.offsetY)*t.scaleY;if(C>=N)return;const L=g[h],j=g[h+1],F=g[h+2],$=g[d],G=g[d+1],nt=g[d+2],ot=g[f],ct=g[f+1],ft=g[f+2],Tt=Math.round(C),At=Math.round(N);let gt,Mt,q,z,J,lt,at,B;for(let st=Tt;st<=At;st++){if(st<k){const bt=st<C?0:(C-st)/(C-k);gt=S-(S-T)*bt,Mt=L-(L-$)*bt,q=j-(j-G)*bt,z=F-(F-nt)*bt}else{let bt;st>N?bt=1:k===N?bt=0:bt=(k-st)/(k-N),gt=T-(T-D)*bt,Mt=$-($-ot)*bt,q=G-(G-ct)*bt,z=nt-(nt-ft)*bt}let mt;st<C?mt=0:st>N?mt=1:mt=(C-st)/(C-N),J=S-(S-D)*mt,lt=L-(L-ot)*mt,at=j-(j-ct)*mt,B=F-(F-ft)*mt;const vt=Math.round(Math.min(gt,J)),Ct=Math.round(Math.max(gt,J));let _t=w*st+vt*4;for(let bt=vt;bt<=Ct;bt++)mt=(gt-bt)/(gt-J),mt<0?mt=0:mt>1&&(mt=1),y[_t++]=Mt-(Mt-lt)*mt|0,y[_t++]=q-(q-at)*mt|0,y[_t++]=z-(z-B)*mt|0,y[_t++]=255}}function drawFigure(l,t,e){const a=t.coords,c=t.colors;let h,d;switch(t.type){case"lattice":const f=t.verticesPerRow,m=Math.floor(a.length/f)-1,g=f-1;for(h=0;h<m;h++){let y=h*f;for(let w=0;w<g;w++,y++)drawTriangle(l,e,a[y],a[y+1],a[y+f],c[y],c[y+1],c[y+f]),drawTriangle(l,e,a[y+f+1],a[y+1],a[y+f],c[y+f+1],c[y+1],c[y+f])}break;case"triangles":for(h=0,d=a.length;h<d;h+=3)drawTriangle(l,e,a[h],a[h+1],a[h+2],c[h],c[h+1],c[h+2]);break;default:throw new Error("illegal figure")}}class MeshShadingPattern extends BaseShadingPattern{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,a){const f=Math.floor(this._bounds[0]),m=Math.floor(this._bounds[1]),g=Math.ceil(this._bounds[2])-f,y=Math.ceil(this._bounds[3])-m,w=Math.min(Math.ceil(Math.abs(g*t[0]*1.1)),3e3),E=Math.min(Math.ceil(Math.abs(y*t[1]*1.1)),3e3),S=g/w,C=y/E,T={coords:this._coords,colors:this._colors,offsetX:-f,offsetY:-m,scaleX:1/S,scaleY:1/C},k=w+4,D=E+4,N=a.getCanvas("mesh",k,D),L=N.context,j=L.createImageData(w,E);if(e){const $=j.data;for(let G=0,nt=$.length;G<nt;G+=4)$[G]=e[0],$[G+1]=e[1],$[G+2]=e[2],$[G+3]=255}for(const $ of this._figures)drawFigure(j,$,T);return L.putImageData(j,2,2),{canvas:N.canvas,offsetX:f-2*S,offsetY:m-2*C,scaleX:S,scaleY:C}}isModifyingCurrentTransform(){return!0}getPattern(t,e,a,c){applyBoundingBox(t,this._bbox);const h=new Float32Array(2);if(c===PathType.SHADING)Util.singularValueDecompose2dScale(getCurrentTransform(t),h);else if(this.matrix){Util.singularValueDecompose2dScale(this.matrix,h);const[f,m]=h;Util.singularValueDecompose2dScale(e.baseTransform,h),h[0]*=f,h[1]*=m}else Util.singularValueDecompose2dScale(e.baseTransform,h);const d=this._createMeshCanvas(h,c===PathType.SHADING?null:this._background,e.cachedCanvases);return c!==PathType.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(d.offsetX,d.offsetY),t.scale(d.scaleX,d.scaleY),t.createPattern(d.canvas,"no-repeat")}}class DummyShadingPattern extends BaseShadingPattern{getPattern(){return"hotpink"}}function getShadingPattern(l){switch(l[0]){case"RadialAxial":return new RadialAxialShadingPattern(l);case"Mesh":return new MeshShadingPattern(l);case"Dummy":return new DummyShadingPattern}throw new Error(`Unknown IR type: ${l[0]}`)}const PaintType={COLORED:1,UNCOLORED:2};class TilingPattern{static MAX_PATTERN_SIZE=3e3;constructor(t,e,a,c){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=a,this.baseTransform=c}createPatternCanvas(t){const{bbox:e,operatorList:a,paintType:c,tilingType:h,color:d,canvasGraphicsFactory:f}=this;let{xstep:m,ystep:g}=this;m=Math.abs(m),g=Math.abs(g),info("TilingType: "+h);const y=e[0],w=e[1],E=e[2],S=e[3],C=E-y,T=S-w,k=new Float32Array(2);Util.singularValueDecompose2dScale(this.matrix,k);const[D,N]=k;Util.singularValueDecompose2dScale(this.baseTransform,k);const L=D*k[0],j=N*k[1];let F=C,$=T,G=!1,nt=!1;const ot=Math.ceil(m*L),ct=Math.ceil(g*j),ft=Math.ceil(C*L),Tt=Math.ceil(T*j);ot>=ft?F=m:G=!0,ct>=Tt?$=g:nt=!0;const At=this.getSizeAndScale(F,this.ctx.canvas.width,L),gt=this.getSizeAndScale($,this.ctx.canvas.height,j),Mt=t.cachedCanvases.getCanvas("pattern",At.size,gt.size),q=Mt.context,z=f.createCanvasGraphics(q);if(z.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(z,c,d),q.translate(-At.scale*y,-gt.scale*w),z.transform(At.scale,0,0,gt.scale,0,0),q.save(),this.clipBbox(z,y,w,E,S),z.baseTransform=getCurrentTransform(z.ctx),z.executeOperatorList(a),z.endDrawing(),q.restore(),G||nt){const J=Mt.canvas;G&&(F=m),nt&&($=g);const lt=this.getSizeAndScale(F,this.ctx.canvas.width,L),at=this.getSizeAndScale($,this.ctx.canvas.height,j),B=lt.size,st=at.size,mt=t.cachedCanvases.getCanvas("pattern-workaround",B,st),vt=mt.context,Ct=G?Math.floor(C/m):0,_t=nt?Math.floor(T/g):0;for(let bt=0;bt<=Ct;bt++)for(let Dt=0;Dt<=_t;Dt++)vt.drawImage(J,B*bt,st*Dt,B,st,0,0,B,st);return{canvas:mt.canvas,scaleX:lt.scale,scaleY:at.scale,offsetX:y,offsetY:w}}return{canvas:Mt.canvas,scaleX:At.scale,scaleY:gt.scale,offsetX:y,offsetY:w}}getSizeAndScale(t,e,a){const c=Math.max(TilingPattern.MAX_PATTERN_SIZE,e);let h=Math.ceil(t*a);return h>=c?h=c:a=h/t,{scale:a,size:h}}clipBbox(t,e,a,c,h){const d=c-e,f=h-a;t.ctx.rect(e,a,d,f),Util.axialAlignedBoundingBox([e,a,c,h],getCurrentTransform(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,a){const c=t.ctx,h=t.current;switch(e){case PaintType.COLORED:const{fillStyle:d,strokeStyle:f}=this.ctx;c.fillStyle=h.fillColor=d,c.strokeStyle=h.strokeColor=f;break;case PaintType.UNCOLORED:c.fillStyle=c.strokeStyle=a,h.fillColor=h.strokeColor=a;break;default:throw new FormatError(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,a,c){let h=a;c!==PathType.SHADING&&(h=Util.transform(h,e.baseTransform),this.matrix&&(h=Util.transform(h,this.matrix)));const d=this.createPatternCanvas(e);let f=new DOMMatrix(h);f=f.translate(d.offsetX,d.offsetY),f=f.scale(1/d.scaleX,1/d.scaleY);const m=t.createPattern(d.canvas,"repeat");return m.setTransform(f),m}}function convertBlackAndWhiteToRGBA({src:l,srcPos:t=0,dest:e,width:a,height:c,nonBlackColor:h=4294967295,inverseDecode:d=!1}){const f=util_FeatureTest.isLittleEndian?4278190080:255,[m,g]=d?[h,f]:[f,h],y=a>>3,w=a&7,E=l.length;e=new Uint32Array(e.buffer);let S=0;for(let C=0;C<c;C++){for(const k=t+y;t<k;t++){const D=t<E?l[t]:255;e[S++]=D&128?g:m,e[S++]=D&64?g:m,e[S++]=D&32?g:m,e[S++]=D&16?g:m,e[S++]=D&8?g:m,e[S++]=D&4?g:m,e[S++]=D&2?g:m,e[S++]=D&1?g:m}if(w===0)continue;const T=t<E?l[t++]:255;for(let k=0;k<w;k++)e[S++]=T&1<<7-k?g:m}return{srcPos:t,destPos:S}}const MIN_FONT_SIZE=16,MAX_FONT_SIZE=100,EXECUTION_TIME=15,EXECUTION_STEPS=10,FULL_CHUNK_HEIGHT=16,SCALE_MATRIX=new DOMMatrix,XY=new Float32Array(2),MIN_MAX_INIT=new Float32Array([1/0,1/0,-1/0,-1/0]);function mirrorContextOperations(l,t){if(l._removeMirroring)throw new Error("Context is already forwarding operations.");l.__originalSave=l.save,l.__originalRestore=l.restore,l.__originalRotate=l.rotate,l.__originalScale=l.scale,l.__originalTranslate=l.translate,l.__originalTransform=l.transform,l.__originalSetTransform=l.setTransform,l.__originalResetTransform=l.resetTransform,l.__originalClip=l.clip,l.__originalMoveTo=l.moveTo,l.__originalLineTo=l.lineTo,l.__originalBezierCurveTo=l.bezierCurveTo,l.__originalRect=l.rect,l.__originalClosePath=l.closePath,l.__originalBeginPath=l.beginPath,l._removeMirroring=()=>{l.save=l.__originalSave,l.restore=l.__originalRestore,l.rotate=l.__originalRotate,l.scale=l.__originalScale,l.translate=l.__originalTranslate,l.transform=l.__originalTransform,l.setTransform=l.__originalSetTransform,l.resetTransform=l.__originalResetTransform,l.clip=l.__originalClip,l.moveTo=l.__originalMoveTo,l.lineTo=l.__originalLineTo,l.bezierCurveTo=l.__originalBezierCurveTo,l.rect=l.__originalRect,l.closePath=l.__originalClosePath,l.beginPath=l.__originalBeginPath,delete l._removeMirroring},l.save=function(){t.save(),this.__originalSave()},l.restore=function(){t.restore(),this.__originalRestore()},l.translate=function(e,a){t.translate(e,a),this.__originalTranslate(e,a)},l.scale=function(e,a){t.scale(e,a),this.__originalScale(e,a)},l.transform=function(e,a,c,h,d,f){t.transform(e,a,c,h,d,f),this.__originalTransform(e,a,c,h,d,f)},l.setTransform=function(e,a,c,h,d,f){t.setTransform(e,a,c,h,d,f),this.__originalSetTransform(e,a,c,h,d,f)},l.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},l.rotate=function(e){t.rotate(e),this.__originalRotate(e)},l.clip=function(e){t.clip(e),this.__originalClip(e)},l.moveTo=function(e,a){t.moveTo(e,a),this.__originalMoveTo(e,a)},l.lineTo=function(e,a){t.lineTo(e,a),this.__originalLineTo(e,a)},l.bezierCurveTo=function(e,a,c,h,d,f){t.bezierCurveTo(e,a,c,h,d,f),this.__originalBezierCurveTo(e,a,c,h,d,f)},l.rect=function(e,a,c,h){t.rect(e,a,c,h),this.__originalRect(e,a,c,h)},l.closePath=function(){t.closePath(),this.__originalClosePath()},l.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class CachedCanvases{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,a){let c;return this.cache[t]!==void 0?(c=this.cache[t],this.canvasFactory.reset(c,e,a)):(c=this.canvasFactory.create(e,a),this.cache[t]=c),c}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function drawImageAtIntegerCoords(l,t,e,a,c,h,d,f,m,g){const[y,w,E,S,C,T]=getCurrentTransform(l);if(w===0&&E===0){const N=d*y+C,L=Math.round(N),j=f*S+T,F=Math.round(j),$=(d+m)*y+C,G=Math.abs(Math.round($)-L)||1,nt=(f+g)*S+T,ot=Math.abs(Math.round(nt)-F)||1;return l.setTransform(Math.sign(y),0,0,Math.sign(S),L,F),l.drawImage(t,e,a,c,h,0,0,G,ot),l.setTransform(y,w,E,S,C,T),[G,ot]}if(y===0&&S===0){const N=f*E+C,L=Math.round(N),j=d*w+T,F=Math.round(j),$=(f+g)*E+C,G=Math.abs(Math.round($)-L)||1,nt=(d+m)*w+T,ot=Math.abs(Math.round(nt)-F)||1;return l.setTransform(0,Math.sign(w),Math.sign(E),0,L,F),l.drawImage(t,e,a,c,h,0,0,ot,G),l.setTransform(y,w,E,S,C,T),[ot,G]}l.drawImage(t,e,a,c,h,d,f,m,g);const k=Math.hypot(y,w),D=Math.hypot(E,S);return[k*m,D*g]}class CanvasExtraState{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=FONT_IDENTITY_MATRIX;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=TextRenderingMode.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,e){this.clipBox=new Float32Array([0,0,t,e]),this.minMax=MIN_MAX_INIT.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=PathType.FILL,e=null){const a=this.minMax.slice();if(t===PathType.STROKE){e||unreachable("Stroke bounding box must include transform."),Util.singularValueDecompose2dScale(e,XY);const c=XY[0]*this.lineWidth/2,h=XY[1]*this.lineWidth/2;a[0]-=c,a[1]-=h,a[2]+=c,a[3]+=h}return a}updateClipFromPath(){const t=Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(MIN_MAX_INIT,0)}getClippedPathBoundingBox(t=PathType.FILL,e=null){return Util.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function putBinaryImageData(l,t){if(t instanceof ImageData){l.putImageData(t,0,0);return}const e=t.height,a=t.width,c=e%FULL_CHUNK_HEIGHT,h=(e-c)/FULL_CHUNK_HEIGHT,d=c===0?h:h+1,f=l.createImageData(a,FULL_CHUNK_HEIGHT);let m=0,g;const y=t.data,w=f.data;let E,S,C,T;if(t.kind===util_ImageKind.GRAYSCALE_1BPP){const k=y.byteLength,D=new Uint32Array(w.buffer,0,w.byteLength>>2),N=D.length,L=a+7>>3,j=4294967295,F=util_FeatureTest.isLittleEndian?4278190080:255;for(E=0;E<d;E++){for(C=E<h?FULL_CHUNK_HEIGHT:c,g=0,S=0;S<C;S++){const $=k-m;let G=0;const nt=$>L?a:$*8-7,ot=nt&-8;let ct=0,ft=0;for(;G<ot;G+=8)ft=y[m++],D[g++]=ft&128?j:F,D[g++]=ft&64?j:F,D[g++]=ft&32?j:F,D[g++]=ft&16?j:F,D[g++]=ft&8?j:F,D[g++]=ft&4?j:F,D[g++]=ft&2?j:F,D[g++]=ft&1?j:F;for(;G<nt;G++)ct===0&&(ft=y[m++],ct=128),D[g++]=ft&ct?j:F,ct>>=1}for(;g<N;)D[g++]=0;l.putImageData(f,0,E*FULL_CHUNK_HEIGHT)}}else if(t.kind===util_ImageKind.RGBA_32BPP){for(S=0,T=a*FULL_CHUNK_HEIGHT*4,E=0;E<h;E++)w.set(y.subarray(m,m+T)),m+=T,l.putImageData(f,0,S),S+=FULL_CHUNK_HEIGHT;E<d&&(T=a*c*4,w.set(y.subarray(m,m+T)),l.putImageData(f,0,S))}else if(t.kind===util_ImageKind.RGB_24BPP)for(C=FULL_CHUNK_HEIGHT,T=a*C,E=0;E<d;E++){for(E>=h&&(C=c,T=a*C),g=0,S=T;S--;)w[g++]=y[m++],w[g++]=y[m++],w[g++]=y[m++],w[g++]=255;l.putImageData(f,0,E*FULL_CHUNK_HEIGHT)}else throw new Error(`bad image kind: ${t.kind}`)}function putBinaryImageMask(l,t){if(t.bitmap){l.drawImage(t.bitmap,0,0);return}const e=t.height,a=t.width,c=e%FULL_CHUNK_HEIGHT,h=(e-c)/FULL_CHUNK_HEIGHT,d=c===0?h:h+1,f=l.createImageData(a,FULL_CHUNK_HEIGHT);let m=0;const g=t.data,y=f.data;for(let w=0;w<d;w++){const E=w<h?FULL_CHUNK_HEIGHT:c;({srcPos:m}=convertBlackAndWhiteToRGBA({src:g,srcPos:m,dest:y,width:a,height:E,nonBlackColor:0})),l.putImageData(f,0,w*FULL_CHUNK_HEIGHT)}}function copyCtxState(l,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const a of e)l[a]!==void 0&&(t[a]=l[a]);l.setLineDash!==void 0&&(t.setLineDash(l.getLineDash()),t.lineDashOffset=l.lineDashOffset)}function resetCtxToDefault(l){l.strokeStyle=l.fillStyle="#000000",l.fillRule="nonzero",l.globalAlpha=1,l.lineWidth=1,l.lineCap="butt",l.lineJoin="miter",l.miterLimit=10,l.globalCompositeOperation="source-over",l.font="10px sans-serif",l.setLineDash!==void 0&&(l.setLineDash([]),l.lineDashOffset=0);const{filter:t}=l;t!=="none"&&t!==""&&(l.filter="none")}function getImageSmoothingEnabled(l,t){if(t)return!0;Util.singularValueDecompose2dScale(l,XY);const e=Math.fround(OutputScale.pixelRatio*PixelsPerInch.PDF_TO_CSS_UNITS);return XY[0]<=e&&XY[1]<=e}const LINE_CAP_STYLES=["butt","round","square"],LINE_JOIN_STYLES=["miter","round","bevel"],NORMAL_CLIP={},EO_CLIP={};class CanvasGraphics{constructor(t,e,a,c,h,{optionalContentConfig:d,markedContentStack:f=null},m,g){this.ctx=t,this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=a,this.canvasFactory=c,this.filterFactory=h,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=f||[],this.optionalContentConfig=d,this.cachedCanvases=new CachedCanvases(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=m,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=g,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:a=!1,background:c=null}){const h=this.ctx.canvas.width,d=this.ctx.canvas.height,f=this.ctx.fillStyle;if(this.ctx.fillStyle=c||"#ffffff",this.ctx.fillRect(0,0,h,d),this.ctx.fillStyle=f,a){const m=this.cachedCanvases.getCanvas("transparent",h,d);this.compositeCtx=this.ctx,this.transparentCanvas=m.canvas,this.ctx=m.context,this.ctx.save(),this.ctx.transform(...getCurrentTransform(this.compositeCtx))}this.ctx.save(),resetCtxToDefault(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=getCurrentTransform(this.ctx)}executeOperatorList(t,e,a,c){const h=t.argsArray,d=t.fnArray;let f=e||0;const m=h.length;if(m===f)return f;const g=m-f>EXECUTION_STEPS&&typeof a=="function",y=g?Date.now()+EXECUTION_TIME:0;let w=0;const E=this.commonObjs,S=this.objs;let C;for(;;){if(c!==void 0&&f===c.nextBreakPoint)return c.breakIt(f,a),f;if(C=d[f],C!==OPS.dependency)this[C].apply(this,h[f]);else for(const T of h[f]){const k=T.startsWith("g_")?E:S;if(!k.has(T))return k.get(T,a),f}if(f++,f===m)return f;if(g&&++w>EXECUTION_STEPS){if(Date.now()>y)return a(),f;w=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const a=t.width??t.displayWidth,c=t.height??t.displayHeight;let h=Math.max(Math.hypot(e[0],e[1]),1),d=Math.max(Math.hypot(e[2],e[3]),1),f=a,m=c,g="prescale1",y,w;for(;h>2&&f>1||d>2&&m>1;){let E=f,S=m;h>2&&f>1&&(E=f>=16384?Math.floor(f/2)-1||1:Math.ceil(f/2),h/=f/E),d>2&&m>1&&(S=m>=16384?Math.floor(m/2)-1||1:Math.ceil(m)/2,d/=m/S),y=this.cachedCanvases.getCanvas(g,E,S),w=y.context,w.clearRect(0,0,E,S),w.drawImage(t,0,0,f,m,0,0,E,S),t=y.canvas,f=E,m=S,g=g==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:f,paintHeight:m}}_createMaskCanvas(t){const e=this.ctx,{width:a,height:c}=t,h=this.current.fillColor,d=this.current.patternFill,f=getCurrentTransform(e);let m,g,y,w;if((t.bitmap||t.data)&&t.count>1){const ot=t.bitmap||t.data.buffer;g=JSON.stringify(d?f:[f.slice(0,4),h]),m=this._cachedBitmapsMap.get(ot),m||(m=new Map,this._cachedBitmapsMap.set(ot,m));const ct=m.get(g);if(ct&&!d){const ft=Math.round(Math.min(f[0],f[2])+f[4]),Tt=Math.round(Math.min(f[1],f[3])+f[5]);return{canvas:ct,offsetX:ft,offsetY:Tt}}y=ct}y||(w=this.cachedCanvases.getCanvas("maskCanvas",a,c),putBinaryImageMask(w.context,t));let E=Util.transform(f,[1/a,0,0,-1/c,0,0]);E=Util.transform(E,[1,0,0,1,0,-c]);const S=MIN_MAX_INIT.slice();Util.axialAlignedBoundingBox([0,0,a,c],E,S);const[C,T,k,D]=S,N=Math.round(k-C)||1,L=Math.round(D-T)||1,j=this.cachedCanvases.getCanvas("fillCanvas",N,L),F=j.context,$=C,G=T;F.translate(-$,-G),F.transform(...E),y||(y=this._scaleImage(w.canvas,getCurrentTransformInverse(F)),y=y.img,m&&d&&m.set(g,y)),F.imageSmoothingEnabled=getImageSmoothingEnabled(getCurrentTransform(F),t.interpolate),drawImageAtIntegerCoords(F,y,0,0,y.width,y.height,0,0,a,c),F.globalCompositeOperation="source-in";const nt=Util.transform(getCurrentTransformInverse(F),[1,0,0,1,-$,-G]);return F.fillStyle=d?h.getPattern(e,this,nt,PathType.FILL):h,F.fillRect(0,0,a,c),m&&!d&&(this.cachedCanvases.delete("fillCanvas"),m.set(g,j.canvas)),{canvas:j.canvas,offsetX:Math.round($),offsetY:Math.round(G)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=LINE_CAP_STYLES[t]}setLineJoin(t){this.ctx.lineJoin=LINE_JOIN_STYLES[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const a=this.ctx;a.setLineDash!==void 0&&(a.setLineDash(t),a.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,a]of t)switch(e){case"LW":this.setLineWidth(a);break;case"LC":this.setLineCap(a);break;case"LJ":this.setLineJoin(a);break;case"ML":this.setMiterLimit(a);break;case"D":this.setDash(a[0],a[1]);break;case"RI":this.setRenderingIntent(a);break;case"FL":this.setFlatness(a);break;case"Font":this.setFont(a[0],a[1]);break;case"CA":this.current.strokeAlpha=a;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=a;break;case"BM":this.ctx.globalCompositeOperation=a;break;case"SMask":this.current.activeSMask=a?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(a);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,a="smaskGroupAt"+this.groupLevel,c=this.cachedCanvases.getCanvas(a,t,e);this.suspendedCtx=this.ctx;const h=this.ctx=c.context;h.setTransform(this.suspendedCtx.getTransform()),copyCtxState(this.suspendedCtx,h),mirrorContextOperations(h,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),copyCtxState(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,a=this.suspendedCtx;this.composeSMask(a,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,a,c){const h=c[0],d=c[1],f=c[2]-h,m=c[3]-d;f===0||m===0||(this.genericComposeSMask(e.context,a,f,m,e.subtype,e.backdrop,e.transferMap,h,d,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(a.canvas,0,0),t.restore())}genericComposeSMask(t,e,a,c,h,d,f,m,g,y,w){let E=t.canvas,S=m-y,C=g-w;if(d)if(S<0||C<0||S+a>E.width||C+c>E.height){const k=this.cachedCanvases.getCanvas("maskExtension",a,c),D=k.context;D.drawImage(E,-S,-C),D.globalCompositeOperation="destination-atop",D.fillStyle=d,D.fillRect(0,0,a,c),D.globalCompositeOperation="source-over",E=k.canvas,S=C=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const k=new Path2D;k.rect(S,C,a,c),t.clip(k),t.globalCompositeOperation="destination-atop",t.fillStyle=d,t.fillRect(S,C,a,c),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),h==="Alpha"&&f?e.filter=this.filterFactory.addAlphaFilter(f):h==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(f));const T=new Path2D;T.rect(m,g,a,c),e.clip(T),e.globalCompositeOperation="destination-in",e.drawImage(E,S,C,a,c,m,g,a,c),e.restore()}save(){this.inSMaskMode&&copyCtxState(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&copyCtxState(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,a,c,h,d){this.ctx.transform(t,e,a,c,h,d),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,a){let[c]=e;if(!a){c||=e[0]=new Path2D,this[t](c);return}if(!(c instanceof Path2D)){const h=e[0]=new Path2D;for(let d=0,f=c.length;d<f;)switch(c[d++]){case DrawOPS.moveTo:h.moveTo(c[d++],c[d++]);break;case DrawOPS.lineTo:h.lineTo(c[d++],c[d++]);break;case DrawOPS.curveTo:h.bezierCurveTo(c[d++],c[d++],c[d++],c[d++],c[d++],c[d++]);break;case DrawOPS.closePath:h.closePath();break;default:warn(`Unrecognized drawing path operator: ${c[d-1]}`);break}c=h}Util.axialAlignedBoundingBox(a,getCurrentTransform(this.ctx),this.current.minMax),this[t](c)}closePath(){this.ctx.closePath()}stroke(t,e=!0){const a=this.ctx,c=this.current.strokeColor;if(a.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof c=="object"&&c?.getPattern){const h=c.isModifyingCurrentTransform()?a.getTransform():null;if(a.save(),a.strokeStyle=c.getPattern(a,this,getCurrentTransformInverse(a),PathType.STROKE),h){const d=new Path2D;d.addPath(t,a.getTransform().invertSelf().multiplySelf(h)),t=d}this.rescaleAndStroke(t,!1),a.restore()}else this.rescaleAndStroke(t,!0);e&&this.consumePath(t,this.current.getClippedPathBoundingBox(PathType.STROKE,getCurrentTransform(this.ctx))),a.globalAlpha=this.current.fillAlpha}closeStroke(t){this.stroke(t)}fill(t,e=!0){const a=this.ctx,c=this.current.fillColor,h=this.current.patternFill;let d=!1;if(h){const m=c.isModifyingCurrentTransform()?a.getTransform():null;if(a.save(),a.fillStyle=c.getPattern(a,this,getCurrentTransformInverse(a),PathType.FILL),m){const g=new Path2D;g.addPath(t,a.getTransform().invertSelf().multiplySelf(m)),t=g}d=!0}const f=this.current.getClippedPathBoundingBox();this.contentVisible&&f!==null&&(this.pendingEOFill?(a.fill(t,"evenodd"),this.pendingEOFill=!1):a.fill(t)),d&&a.restore(),e&&this.consumePath(t,f)}eoFill(t){this.pendingEOFill=!0,this.fill(t)}fillStroke(t){this.fill(t,!1),this.stroke(t,!1),this.consumePath(t)}eoFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}closeFillStroke(t){this.fillStroke(t)}closeEOFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}endPath(t){this.consumePath(t)}rawFillPath(t){this.ctx.fill(t)}clip(){this.pendingClip=NORMAL_CLIP}eoClip(){this.pendingClip=EO_CLIP}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0)return;const a=new Path2D,c=e.getTransform().invertSelf();for(const{transform:h,x:d,y:f,fontSize:m,path:g}of t)g&&a.addPath(g,new DOMMatrix(h).preMultiplySelf(c).translate(d,f).scale(m,-m));e.clip(a),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){const a=this.commonObjs.get(t),c=this.current;if(!a)throw new Error(`Can't find font for ${t}`);if(c.fontMatrix=a.fontMatrix||FONT_IDENTITY_MATRIX,(c.fontMatrix[0]===0||c.fontMatrix[3]===0)&&warn("Invalid font matrix for font "+t),e<0?(e=-e,c.fontDirection=-1):c.fontDirection=1,this.current.font=a,this.current.fontSize=e,a.isType3Font)return;const h=a.loadedName||"sans-serif",d=a.systemFontInfo?.css||`"${h}", ${a.fallbackName}`;let f="normal";a.black?f="900":a.bold&&(f="bold");const m=a.italic?"italic":"normal";let g=e;e<MIN_FONT_SIZE?g=MIN_FONT_SIZE:e>MAX_FONT_SIZE&&(g=MAX_FONT_SIZE),this.current.fontSizeScale=e/g,this.ctx.font=`${m} ${f} ${g}px ${d}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t){const{current:e}=this;e.textMatrix=t,e.textMatrixScale=Math.hypot(t[0],t[1]),e.x=e.lineX=0,e.y=e.lineY=0}nextLine(){this.moveText(0,this.current.leading)}#n(t,e,a){const c=new Path2D;return c.addPath(t,new DOMMatrix(a).invertSelf().multiplySelf(e)),c}paintChar(t,e,a,c,h){const d=this.ctx,f=this.current,m=f.font,g=f.textRenderingMode,y=f.fontSize/f.fontSizeScale,w=g&TextRenderingMode.FILL_STROKE_MASK,E=!!(g&TextRenderingMode.ADD_TO_PATH_FLAG),S=f.patternFill&&!m.missingFile,C=f.patternStroke&&!m.missingFile;let T;if((m.disableFontFace||E||S||C)&&!m.missingFile&&(T=m.getPathGenerator(this.commonObjs,t)),T&&(m.disableFontFace||S||C)){d.save(),d.translate(e,a),d.scale(y,-y);let k;if((w===TextRenderingMode.FILL||w===TextRenderingMode.FILL_STROKE)&&(c?(k=d.getTransform(),d.setTransform(...c),d.fill(this.#n(T,k,c))):d.fill(T)),w===TextRenderingMode.STROKE||w===TextRenderingMode.FILL_STROKE)if(h){k||=d.getTransform(),d.setTransform(...h);const{a:D,b:N,c:L,d:j}=k,F=Util.inverseTransform(h),$=Util.transform([D,N,L,j,0,0],F);Util.singularValueDecompose2dScale($,XY),d.lineWidth*=Math.max(XY[0],XY[1])/y,d.stroke(this.#n(T,k,h))}else d.lineWidth/=y,d.stroke(T);d.restore()}else(w===TextRenderingMode.FILL||w===TextRenderingMode.FILL_STROKE)&&d.fillText(t,e,a),(w===TextRenderingMode.STROKE||w===TextRenderingMode.FILL_STROKE)&&d.strokeText(t,e,a);E&&(this.pendingTextPaths||=[]).push({transform:getCurrentTransform(d),x:e,y:a,fontSize:y,path:T})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let a=!1;for(let c=3;c<e.length;c+=4)if(e[c]>0&&e[c]<255){a=!0;break}return shadow(this,"isFontSubpixelAAEnabled",a)}showText(t){const e=this.current,a=e.font;if(a.isType3Font)return this.showType3Text(t);const c=e.fontSize;if(c===0)return;const h=this.ctx,d=e.fontSizeScale,f=e.charSpacing,m=e.wordSpacing,g=e.fontDirection,y=e.textHScale*g,w=t.length,E=a.vertical,S=E?1:-1,C=a.defaultVMetrics,T=c*e.fontMatrix[0],k=e.textRenderingMode===TextRenderingMode.FILL&&!a.disableFontFace&&!e.patternFill;h.save(),e.textMatrix&&h.transform(...e.textMatrix),h.translate(e.x,e.y+e.textRise),g>0?h.scale(y,-1):h.scale(y,1);let D,N;if(e.patternFill){h.save();const G=e.fillColor.getPattern(h,this,getCurrentTransformInverse(h),PathType.FILL);D=getCurrentTransform(h),h.restore(),h.fillStyle=G}if(e.patternStroke){h.save();const G=e.strokeColor.getPattern(h,this,getCurrentTransformInverse(h),PathType.STROKE);N=getCurrentTransform(h),h.restore(),h.strokeStyle=G}let L=e.lineWidth;const j=e.textMatrixScale;if(j===0||L===0){const G=e.textRenderingMode&TextRenderingMode.FILL_STROKE_MASK;(G===TextRenderingMode.STROKE||G===TextRenderingMode.FILL_STROKE)&&(L=this.getSinglePixelWidth())}else L/=j;if(d!==1&&(h.scale(d,d),L/=d),h.lineWidth=L,a.isInvalidPDFjsFont){const G=[];let nt=0;for(const ot of t)G.push(ot.unicode),nt+=ot.width;h.fillText(G.join(""),0,0),e.x+=nt*T*y,h.restore(),this.compose();return}let F=0,$;for($=0;$<w;++$){const G=t[$];if(typeof G=="number"){F+=S*G*c/1e3;continue}let nt=!1;const ot=(G.isSpace?m:0)+f,ct=G.fontChar,ft=G.accent;let Tt,At,gt=G.width;if(E){const q=G.vmetric||C,z=-(G.vmetric?q[1]:gt*.5)*T,J=q[2]*T;gt=q?-q[0]:gt,Tt=z/d,At=(F+J)/d}else Tt=F/d,At=0;if(a.remeasure&&gt>0){const q=h.measureText(ct).width*1e3/c*d;if(gt<q&&this.isFontSubpixelAAEnabled){const z=gt/q;nt=!0,h.save(),h.scale(z,1),Tt/=z}else gt!==q&&(Tt+=(gt-q)/2e3*c/d)}if(this.contentVisible&&(G.isInFont||a.missingFile)){if(k&&!ft)h.fillText(ct,Tt,At);else if(this.paintChar(ct,Tt,At,D,N),ft){const q=Tt+c*ft.offset.x/d,z=At-c*ft.offset.y/d;this.paintChar(ft.fontChar,q,z,D,N)}}const Mt=E?gt*T-ot*g:gt*T+ot*g;F+=Mt,nt&&h.restore()}E?e.y-=F:e.x+=F*y,h.restore(),this.compose()}showType3Text(t){const e=this.ctx,a=this.current,c=a.font,h=a.fontSize,d=a.fontDirection,f=c.vertical?1:-1,m=a.charSpacing,g=a.wordSpacing,y=a.textHScale*d,w=a.fontMatrix||FONT_IDENTITY_MATRIX,E=t.length,S=a.textRenderingMode===TextRenderingMode.INVISIBLE;let C,T,k,D;if(!(S||h===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),a.textMatrix&&e.transform(...a.textMatrix),e.translate(a.x,a.y+a.textRise),e.scale(y,d),C=0;C<E;++C){if(T=t[C],typeof T=="number"){D=f*T*h/1e3,this.ctx.translate(D,0),a.x+=D*y;continue}const N=(T.isSpace?g:0)+m,L=c.charProcOperatorList[T.operatorListId];L?this.contentVisible&&(this.save(),e.scale(h,h),e.transform(...w),this.executeOperatorList(L),this.restore()):warn(`Type3 character "${T.operatorListId}" is not available.`);const j=[T.width,0];Util.applyTransform(j,w),k=j[0]*h+N,e.translate(k,0),a.x+=k*y}e.restore()}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,a,c,h,d){const f=new Path2D;f.rect(a,c,h-a,d-c),this.ctx.clip(f),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const a=this.baseTransform||getCurrentTransform(this.ctx),c={createCanvasGraphics:h=>new CanvasGraphics(h,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new TilingPattern(t,this.ctx,c,a)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t){this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t){this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let a;return this.cachedPatterns.has(t)?a=this.cachedPatterns.get(t):(a=getShadingPattern(this.getObject(t)),this.cachedPatterns.set(t,a)),e&&(a.matrix=e),a}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const a=this._getPattern(t);e.fillStyle=a.getPattern(e,this,getCurrentTransformInverse(e),PathType.SHADING);const c=getCurrentTransformInverse(e);if(c){const{width:h,height:d}=e.canvas,f=MIN_MAX_INIT.slice();Util.axialAlignedBoundingBox([0,0,h,d],c,f);const[m,g,y,w]=f;this.ctx.fillRect(m,g,y-m,w-g)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){unreachable("Should not call beginInlineImage")}beginImageData(){unreachable("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=getCurrentTransform(this.ctx),e)){Util.axialAlignedBoundingBox(e,this.baseTransform,this.current.minMax);const[a,c,h,d]=e,f=new Path2D;f.rect(a,c,h-a,d-c),this.ctx.clip(f),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||info("TODO: Support non-isolated groups."),t.knockout&&warn("Knockout groups not supported.");const a=getCurrentTransform(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let c=MIN_MAX_INIT.slice();Util.axialAlignedBoundingBox(t.bbox,getCurrentTransform(e),c);const h=[0,0,e.canvas.width,e.canvas.height];c=Util.intersect(c,h)||[0,0,0,0];const d=Math.floor(c[0]),f=Math.floor(c[1]),m=Math.max(Math.ceil(c[2])-d,1),g=Math.max(Math.ceil(c[3])-f,1);this.current.startNewPathAndClipBox([0,0,m,g]);let y="groupAt"+this.groupLevel;t.smask&&(y+="_smask_"+this.smaskCounter++%2);const w=this.cachedCanvases.getCanvas(y,m,g),E=w.context;E.translate(-d,-f),E.transform(...a);let S=new Path2D;const[C,T,k,D]=t.bbox;if(S.rect(C,T,k-C,D-T),t.matrix){const N=new Path2D;N.addPath(S,new DOMMatrix(t.matrix)),S=N}E.clip(S),t.smask?this.smaskStack.push({canvas:w.canvas,context:E,offsetX:d,offsetY:f,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(d,f),e.save()),copyCtxState(e,E),this.ctx=E,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,a=this.groupStack.pop();if(this.ctx=a,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const c=getCurrentTransform(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...c);const h=MIN_MAX_INIT.slice();Util.axialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],c,h),this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(h)}}beginAnnotation(t,e,a,c,h){if(this.#t(),resetCtxToDefault(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const d=e[2]-e[0],f=e[3]-e[1];if(h&&this.annotationCanvasMap){a=a.slice(),a[4]-=e[0],a[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=d,e[3]=f,Util.singularValueDecompose2dScale(getCurrentTransform(this.ctx),XY);const{viewportScale:m}=this,g=Math.ceil(d*this.outputScaleX*m),y=Math.ceil(f*this.outputScaleY*m);this.annotationCanvas=this.canvasFactory.create(g,y);const{canvas:w,context:E}=this.annotationCanvas;this.annotationCanvasMap.set(t,w),this.annotationCanvas.savedCtx=this.ctx,this.ctx=E,this.ctx.save(),this.ctx.setTransform(XY[0],0,0,-XY[1],0,f*XY[1]),resetCtxToDefault(this.ctx)}else{resetCtxToDefault(this.ctx),this.endPath();const m=new Path2D;m.rect(e[0],e[1],d,f),this.ctx.clip(m)}}this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...a),this.transform(...c)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const a=this.ctx,c=this._createMaskCanvas(t),h=c.canvas;a.save(),a.setTransform(1,0,0,1,0,0),a.drawImage(h,c.offsetX,c.offsetY),a.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,a=0,c=0,h,d){if(!this.contentVisible)return;t=this.getObject(t.data,t);const f=this.ctx;f.save();const m=getCurrentTransform(f);f.transform(e,a,c,h,0,0);const g=this._createMaskCanvas(t);f.setTransform(1,0,0,1,g.offsetX-m[4],g.offsetY-m[5]);for(let y=0,w=d.length;y<w;y+=2){const E=Util.transform(m,[e,a,c,h,d[y],d[y+1]]);f.drawImage(g.canvas,E[4],E[5])}f.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,a=this.current.fillColor,c=this.current.patternFill;for(const h of t){const{data:d,width:f,height:m,transform:g}=h,y=this.cachedCanvases.getCanvas("maskCanvas",f,m),w=y.context;w.save();const E=this.getObject(d,h);putBinaryImageMask(w,E),w.globalCompositeOperation="source-in",w.fillStyle=c?a.getPattern(w,this,getCurrentTransformInverse(e),PathType.FILL):a,w.fillRect(0,0,f,m),w.restore(),e.save(),e.transform(...g),e.scale(1,-1),drawImageAtIntegerCoords(e,y.canvas,0,0,f,m,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){warn("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,a,c){if(!this.contentVisible)return;const h=this.getObject(t);if(!h){warn("Dependent image isn't ready yet");return}const d=h.width,f=h.height,m=[];for(let g=0,y=c.length;g<y;g+=2)m.push({transform:[e,0,0,a,c[g],c[g+1]],x:0,y:0,w:d,h:f});this.paintInlineImageXObjectGroup(h,m)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:a,height:c}=t,h=this.cachedCanvases.getCanvas("inlineImage",a,c),d=h.context;return d.filter=this.current.transferMaps,d.drawImage(e,0,0),d.filter="none",h.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,a=t.height,c=this.ctx;this.save();const{filter:h}=c;h!=="none"&&h!==""&&(c.filter="none"),c.scale(1/e,-1/a);let d;if(t.bitmap)d=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)d=t;else{const g=this.cachedCanvases.getCanvas("inlineImage",e,a).context;putBinaryImageData(g,t),d=this.applyTransferMapsToCanvas(g)}const f=this._scaleImage(d,getCurrentTransformInverse(c));c.imageSmoothingEnabled=getImageSmoothingEnabled(getCurrentTransform(c),t.interpolate),drawImageAtIntegerCoords(c,f.img,0,0,f.paintWidth,f.paintHeight,0,-a,e,a),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const a=this.ctx;let c;if(t.bitmap)c=t.bitmap;else{const h=t.width,d=t.height,m=this.cachedCanvases.getCanvas("inlineImage",h,d).context;putBinaryImageData(m,t),c=this.applyTransferMapsToCanvas(m)}for(const h of e)a.save(),a.transform(...h.transform),a.scale(1,-1),drawImageAtIntegerCoords(a,c,h.x,h.y,h.w,h.h,0,-1,1,1),a.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t,e){const a=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const c=this.ctx;this.pendingClip&&(a||(this.pendingClip===EO_CLIP?c.clip(t,"evenodd"):c.clip(t)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=getCurrentTransform(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),a=Math.hypot(t[0],t[2]),c=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(a,c)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:a,c,d:h}=this.ctx.getTransform();let d,f;if(a===0&&c===0){const m=Math.abs(e),g=Math.abs(h);if(m===g)if(t===0)d=f=1/m;else{const y=m*t;d=f=y<1?1/y:1}else if(t===0)d=1/m,f=1/g;else{const y=m*t,w=g*t;d=y<1?1/y:1,f=w<1?1/w:1}}else{const m=Math.abs(e*h-a*c),g=Math.hypot(e,a),y=Math.hypot(c,h);if(t===0)d=y/m,f=g/m;else{const w=t*m;d=y>w?y/w:1,f=g>w?g/w:1}}this._cachedScaleForStroking[0]=d,this._cachedScaleForStroking[1]=f}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:a,current:{lineWidth:c}}=this,[h,d]=this.getScaleForStroking();if(h===d){a.lineWidth=(c||1)*h,a.stroke(t);return}const f=a.getLineDash();e&&a.save(),a.scale(h,d),SCALE_MATRIX.a=1/h,SCALE_MATRIX.d=1/d;const m=new Path2D;if(m.addPath(t,SCALE_MATRIX),f.length>0){const g=Math.max(h,d);a.setLineDash(f.map(y=>y/g)),a.lineDashOffset/=g}a.lineWidth=c||1,a.stroke(m),e&&a.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const l in OPS)CanvasGraphics.prototype[l]!==void 0&&(CanvasGraphics.prototype[OPS[l]]=CanvasGraphics.prototype[l]);class GlobalWorkerOptions{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class Metadata{#t;#e;constructor({parsedData:t,rawData:e}){this.#t=t,this.#e=e}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const INTERNAL=Symbol("INTERNAL");class OptionalContentGroup{#t=!1;#e=!1;#n=!1;#i=!0;constructor(t,{name:e,intent:a,usage:c,rbGroups:h}){this.#t=!!(t&RenderingIntentFlag.DISPLAY),this.#e=!!(t&RenderingIntentFlag.PRINT),this.name=e,this.intent=a,this.usage=c,this.rbGroups=h}get visible(){if(this.#n)return this.#i;if(!this.#i)return!1;const{print:t,view:e}=this.usage;return this.#t?e?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,e,a=!1){t!==INTERNAL&&unreachable("Internal method `_setVisible` called."),this.#n=a,this.#i=e}}class OptionalContentConfig{#t=null;#e=new Map;#n=null;#i=null;constructor(t,e=RenderingIntentFlag.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#i=t.order;for(const a of t.groups)this.#e.set(a.id,new OptionalContentGroup(e,a));if(t.baseState==="OFF")for(const a of this.#e.values())a._setVisible(INTERNAL,!1);for(const a of t.on)this.#e.get(a)._setVisible(INTERNAL,!0);for(const a of t.off)this.#e.get(a)._setVisible(INTERNAL,!1);this.#n=this.getHash()}}#r(t){const e=t.length;if(e<2)return!0;const a=t[0];for(let c=1;c<e;c++){const h=t[c];let d;if(Array.isArray(h))d=this.#r(h);else if(this.#e.has(h))d=this.#e.get(h).visible;else return warn(`Optional content group not found: ${h}`),!0;switch(a){case"And":if(!d)return!1;break;case"Or":if(d)return!0;break;case"Not":return!d;default:return!0}}return a==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return info("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(warn(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#r(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!this.#e.has(e))return warn(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!this.#e.has(e))return warn(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!this.#e.has(e))return warn(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!this.#e.has(e))return warn(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!1}return!0}return warn(`Unknown optional content policy ${t.policy}.`),!0}return warn(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,a=!0){const c=this.#e.get(t);if(!c){warn(`Optional content group not found: ${t}`);return}if(a&&e&&c.rbGroups.length)for(const h of c.rbGroups)for(const d of h)d!==t&&this.#e.get(d)?._setVisible(INTERNAL,!1,!0);c._setVisible(INTERNAL,!!e,!0),this.#t=null}setOCGState({state:t,preserveRB:e}){let a;for(const c of t){switch(c){case"ON":case"OFF":case"Toggle":a=c;continue}const h=this.#e.get(c);if(h)switch(a){case"ON":this.setVisibility(c,!0,e);break;case"OFF":this.setVisibility(c,!1,e);break;case"Toggle":this.setVisibility(c,!h.visible,e);break}}this.#t=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#e.size?this.#i?this.#i.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new MurmurHash3_64;for(const[e,a]of this.#e)t.update(`${e}:${a.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class PDFDataTransportStream{constructor(t,{disableRange:e=!1,disableStream:a=!1}){assert(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:c,initialData:h,progressiveDone:d,contentDispositionFilename:f}=t;if(this._queuedChunks=[],this._progressiveDone=d,this._contentDispositionFilename=f,h?.length>0){const m=h instanceof Uint8Array&&h.byteLength===h.buffer.byteLength?h.buffer:new Uint8Array(h).buffer;this._queuedChunks.push(m)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!a,this._isRangeSupported=!e,this._contentLength=c,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((m,g)=>{this._onReceiveData({begin:m,chunk:g})}),t.addProgressListener((m,g)=>{this._onProgress({loaded:m,total:g})}),t.addProgressiveReadListener(m=>{this._onReceiveData({chunk:m})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const a=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(a):this._queuedChunks.push(a);else{const c=this._rangeReaders.some(function(h){return h._begin!==t?!1:(h._enqueue(a),!0)});assert(c,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){assert(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new PDFDataTransportStreamReader(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const a=new PDFDataTransportStreamRangeReader(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(a),a}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}}class PDFDataTransportStreamReader{constructor(t,e,a=!1,c=null){this._stream=t,this._done=a||!1,this._filename=isPdfFile(c)?c:null,this._queuedChunks=e||[],this._loaded=0;for(const h of this._queuedChunks)this._loaded+=h.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class PDFDataTransportStreamRangeReader{constructor(t,e,a){this._stream=t,this._begin=e,this._end=a,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function getFilenameFromContentDispositionHeader(l){let t=!0,e=a("filename\\*","i").exec(l);if(e){e=e[1];let y=f(e);return y=unescape(y),y=m(y),y=g(y),h(y)}if(e=d(l),e){const y=g(e);return h(y)}if(e=a("filename","i").exec(l),e){e=e[1];let y=f(e);return y=g(y),h(y)}function a(y,w){return new RegExp("(?:^|;)\\s*"+y+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',w)}function c(y,w){if(y){if(!/^[\x00-\xFF]+$/.test(w))return w;try{const E=new TextDecoder(y,{fatal:!0}),S=stringToBytes(w);w=E.decode(S),t=!1}catch{}}return w}function h(y){return t&&/[\x80-\xff]/.test(y)&&(y=c("utf-8",y),t&&(y=c("iso-8859-1",y))),y}function d(y){const w=[];let E;const S=a("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(E=S.exec(y))!==null;){let[,T,k,D]=E;if(T=parseInt(T,10),T in w){if(T===0)break;continue}w[T]=[k,D]}const C=[];for(let T=0;T<w.length&&T in w;++T){let[k,D]=w[T];D=f(D),k&&(D=unescape(D),T===0&&(D=m(D))),C.push(D)}return C.join("")}function f(y){if(y.startsWith('"')){const w=y.slice(1).split('\\"');for(let E=0;E<w.length;++E){const S=w[E].indexOf('"');S!==-1&&(w[E]=w[E].slice(0,S),w.length=E+1),w[E]=w[E].replaceAll(/\\(.)/g,"$1")}y=w.join('"')}return y}function m(y){const w=y.indexOf("'");if(w===-1)return y;const E=y.slice(0,w),C=y.slice(w+1).replace(/^[^']*'/,"");return c(E,C)}function g(y){return!y.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(y)?y:y.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(w,E,S,C){if(S==="q"||S==="Q")return C=C.replaceAll("_"," "),C=C.replaceAll(/=([0-9a-fA-F]{2})/g,function(T,k){return String.fromCharCode(parseInt(k,16))}),c(E,C);try{C=atob(C)}catch{}return c(E,C)})}return""}function createHeaders(l,t){const e=new Headers;if(!l||!t||typeof t!="object")return e;for(const a in t){const c=t[a];c!==void 0&&e.append(a,c)}return e}function getResponseOrigin(l){return URL.parse(l)?.origin??null}function validateRangeRequestCapabilities({responseHeaders:l,isHttp:t,rangeChunkSize:e,disableRange:a}){const c={allowRangeRequests:!1,suggestedLength:void 0},h=parseInt(l.get("Content-Length"),10);return!Number.isInteger(h)||(c.suggestedLength=h,h<=2*e)||a||!t||l.get("Accept-Ranges")!=="bytes"||(l.get("Content-Encoding")||"identity")!=="identity"||(c.allowRangeRequests=!0),c}function extractFilenameFromHeader(l){const t=l.get("Content-Disposition");if(t){let e=getFilenameFromContentDispositionHeader(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(isPdfFile(e))return e}return null}function createResponseError(l,t){return new ResponseException(`Unexpected server response (${l}) while retrieving PDF "${t}".`,l,l===404||l===0&&t.startsWith("file:"))}function validateResponseStatus(l){return l===200||l===206}function createFetchOptions(l,t,e){return{method:"GET",headers:l,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function getArrayBuffer(l){return l instanceof Uint8Array?l.buffer:l instanceof ArrayBuffer?l:(warn(`getArrayBuffer - unexpected data format: ${l}`),new Uint8Array(l).buffer)}class PDFFetchStream{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=createHeaders(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return assert(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new PDFFetchStreamReader(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const a=new PDFFetchStreamRangeReader(this,t,e);return this._rangeRequestReaders.push(a),a}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class PDFFetchStreamReader{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const a=new Headers(t.headers),c=e.url;fetch(c,createFetchOptions(a,this._withCredentials,this._abortController)).then(h=>{if(t._responseOrigin=getResponseOrigin(h.url),!validateResponseStatus(h.status))throw createResponseError(h.status,c);this._reader=h.body.getReader(),this._headersCapability.resolve();const d=h.headers,{allowRangeRequests:f,suggestedLength:m}=validateRangeRequestCapabilities({responseHeaders:d,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=f,this._contentLength=m||this._contentLength,this._filename=extractFilenameFromHeader(d),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:getArrayBuffer(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class PDFFetchStreamRangeReader{constructor(t,e,a){this._stream=t,this._reader=null,this._loaded=0;const c=t.source;this._withCredentials=c.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!c.disableStream,this._abortController=new AbortController;const h=new Headers(t.headers);h.append("Range",`bytes=${e}-${a-1}`);const d=c.url;fetch(d,createFetchOptions(h,this._withCredentials,this._abortController)).then(f=>{const m=getResponseOrigin(f.url);if(m!==t._responseOrigin)throw new Error(`Expected range response-origin "${m}" to match "${t._responseOrigin}".`);if(!validateResponseStatus(f.status))throw createResponseError(f.status,d);this._readCapability.resolve(),this._reader=f.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:getArrayBuffer(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const OK_RESPONSE=200,PARTIAL_CONTENT_RESPONSE=206;function network_getArrayBuffer(l){const t=l.response;return typeof t!="string"?t:stringToBytes(t).buffer}class NetworkManager{_responseOrigin=null;constructor({url:t,httpHeaders:e,withCredentials:a}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=createHeaders(this.isHttp,e),this.withCredentials=a||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,a=this.currXhrId++,c=this.pendingRequests[a]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[h,d]of this.headers)e.setRequestHeader(h,d);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),c.expectedStatus=PARTIAL_CONTENT_RESPONSE):c.expectedStatus=OK_RESPONSE,e.responseType="arraybuffer",assert(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,a),e.onprogress=this.onProgress.bind(this,a),c.onHeadersReceived=t.onHeadersReceived,c.onDone=t.onDone,c.onError=t.onError,c.onProgress=t.onProgress,e.send(null),a}onProgress(t,e){const a=this.pendingRequests[t];a&&a.onProgress?.(e)}onStateChange(t,e){const a=this.pendingRequests[t];if(!a)return;const c=a.xhr;if(c.readyState>=2&&a.onHeadersReceived&&(a.onHeadersReceived(),delete a.onHeadersReceived),c.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],c.status===0&&this.isHttp){a.onError(c.status);return}const h=c.status||OK_RESPONSE;if(!(h===OK_RESPONSE&&a.expectedStatus===PARTIAL_CONTENT_RESPONSE)&&h!==a.expectedStatus){a.onError(c.status);return}const f=network_getArrayBuffer(c);if(h===PARTIAL_CONTENT_RESPONSE){const m=c.getResponseHeader("Content-Range"),g=/bytes (\d+)-(\d+)\/(\d+)/.exec(m);g?a.onDone({begin:parseInt(g[1],10),chunk:f}):(warn('Missing or invalid "Content-Range" header.'),a.onError(0))}else f?a.onDone({begin:0,chunk:f}):a.onError(c.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class PDFNetworkStream{constructor(t){this._source=t,this._manager=new NetworkManager(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return assert(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new PDFNetworkStreamFullRequestReader(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const a=new PDFNetworkStreamRangeRequestReader(this._manager,t,e);return a.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(a),a}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class PDFNetworkStreamFullRequestReader{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=getResponseOrigin(e.responseURL);const a=e.getAllResponseHeaders(),c=new Headers(a?a.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(f=>{const[m,...g]=f.split(": ");return[m,g.join(": ")]}):[]),{allowRangeRequests:h,suggestedLength:d}=validateRangeRequestCapabilities({responseHeaders:c,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});h&&(this._isRangeSupported=!0),this._contentLength=d||this._contentLength,this._filename=extractFilenameFromHeader(c),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=createResponseError(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class PDFNetworkStreamRangeRequestReader{constructor(t,e,a){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:a,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=getResponseOrigin(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=createResponseError(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const urlRegex=/^[a-z][a-z0-9\-+.]+:/i;function parseUrlOrPath(l){if(urlRegex.test(l))return new URL(l);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(l))}class PDFNodeStream{constructor(t){this.source=t,this.url=parseUrlOrPath(t.url),assert(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return assert(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new PDFNodeStreamFsFullReader(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const a=new PDFNodeStreamFsRangeReader(this,t,e);return this._rangeRequestReaders.push(a),a}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class PDFNodeStreamFsFullReader{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const a=process.getBuiltinModule("fs");a.promises.lstat(this._url).then(c=>{this._contentLength=c.size,this._setReadableStream(a.createReadStream(this._url)),this._headersCapability.resolve()},c=>{c.code==="ENOENT"&&(c=createResponseError(0,this._url.href)),this._storedError=c,this._headersCapability.reject(c)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class PDFNodeStreamFsRangeReader{constructor(t,e,a){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const c=t.source;this._isStreamingSupported=!c.disableStream;const h=process.getBuiltinModule("fs");this._setReadableStream(h.createReadStream(this._url,{start:e,end:a-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const INITIAL_DATA=Symbol("INITIAL_DATA");class PDFObjects{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:INITIAL_DATA}}get(t,e=null){if(e){const c=this.#e(t);return c.promise.then(()=>e(c.data)),null}const a=this.#t[t];if(!a||a.data===INITIAL_DATA)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return a.data}has(t){const e=this.#t[t];return!!e&&e.data!==INITIAL_DATA}delete(t){const e=this.#t[t];return!e||e.data===INITIAL_DATA?!1:(delete this.#t[t],!0)}resolve(t,e=null){const a=this.#e(t);a.data=e,a.resolve()}clear(){for(const t in this.#t){const{data:e}=this.#t[t];e?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:e}=this.#t[t];e!==INITIAL_DATA&&(yield[t,e])}}}const MAX_TEXT_DIVS_TO_RENDER=1e5,DEFAULT_FONT_SIZE=30;let TextLayer$1=class Le{#t=Promise.withResolvers();#e=null;#n=!1;#i=!!globalThis.FontInspector?.enabled;#r=null;#s=null;#a=0;#o=0;#u=null;#c=null;#d=0;#l=0;#p=Object.create(null);#g=[];#f=null;#h=[];#m=new WeakMap;#x=null;static#y=new Map;static#b=new Map;static#E=new WeakMap;static#v=null;static#S=new Set;constructor({textContentSource:t,container:e,viewport:a}){if(t instanceof ReadableStream)this.#f=t;else if(typeof t=="object")this.#f=new ReadableStream({start(m){m.enqueue(t),m.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#c=e,this.#l=a.scale*OutputScale.pixelRatio,this.#d=a.rotation,this.#s={div:null,properties:null,ctx:null};const{pageWidth:c,pageHeight:h,pageX:d,pageY:f}=a.rawDims;this.#x=[1,0,0,-1,-d,f+h],this.#o=c,this.#a=h,Le.#C(),setLayerDimensions(e,a),this.#t.promise.finally(()=>{Le.#S.delete(this),this.#s=null,this.#p=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=util_FeatureTest.platform;return shadow(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#u.read().then(({value:e,done:a})=>{if(a){this.#t.resolve();return}this.#r??=e.lang,Object.assign(this.#p,e.styles),this.#R(e.items),t()},this.#t.reject)};return this.#u=this.#f.getReader(),Le.#S.add(this),t(),this.#t.promise}update({viewport:t,onBefore:e=null}){const a=t.scale*OutputScale.pixelRatio,c=t.rotation;if(c!==this.#d&&(e?.(),this.#d=c,setLayerDimensions(this.#c,{rotation:c})),a!==this.#l){e?.(),this.#l=a;const h={div:null,properties:null,ctx:Le.#P(this.#r)};for(const d of this.#h)h.properties=this.#m.get(d),h.div=d,this.#k(h)}}cancel(){const t=new AbortException("TextLayer task cancelled.");this.#u?.cancel(t).catch(()=>{}),this.#u=null,this.#t.reject(t)}get textDivs(){return this.#h}get textContentItemsStr(){return this.#g}#R(t){if(this.#n)return;this.#s.ctx??=Le.#P(this.#r);const e=this.#h,a=this.#g;for(const c of t){if(e.length>MAX_TEXT_DIVS_TO_RENDER){warn("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(c.str===void 0){if(c.type==="beginMarkedContentProps"||c.type==="beginMarkedContent"){const h=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),c.id&&this.#e.setAttribute("id",`${c.id}`),h.append(this.#e)}else c.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}a.push(c.str),this.#A(c)}}#A(t){const e=document.createElement("span"),a={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#h.push(e);const c=Util.transform(this.#x,t.transform);let h=Math.atan2(c[1],c[0]);const d=this.#p[t.fontName];d.vertical&&(h+=Math.PI/2);let f=this.#i&&d.fontSubstitution||d.fontFamily;f=Le.fontFamilyMap.get(f)||f;const m=Math.hypot(c[2],c[3]),g=m*Le.#D(f,d,this.#r);let y,w;h===0?(y=c[4],w=c[5]-g):(y=c[4]+g*Math.sin(h),w=c[5]-g*Math.cos(h));const E="calc(var(--total-scale-factor) *",S=e.style;this.#e===this.#c?(S.left=`${(100*y/this.#o).toFixed(2)}%`,S.top=`${(100*w/this.#a).toFixed(2)}%`):(S.left=`${E}${y.toFixed(2)}px)`,S.top=`${E}${w.toFixed(2)}px)`),S.fontSize=`${E}${(Le.#v*m).toFixed(2)}px)`,S.fontFamily=f,a.fontSize=m,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#i&&(e.dataset.fontName=d.fontSubstitutionLoadedName||t.fontName),h!==0&&(a.angle=h*(180/Math.PI));let C=!1;if(t.str.length>1)C=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const T=Math.abs(t.transform[0]),k=Math.abs(t.transform[3]);T!==k&&Math.max(T,k)/Math.min(T,k)>1.5&&(C=!0)}if(C&&(a.canvasWidth=d.vertical?t.height:t.width),this.#m.set(e,a),this.#s.div=e,this.#s.properties=a,this.#k(this.#s),a.hasText&&this.#e.append(e),a.hasEOL){const T=document.createElement("br");T.setAttribute("role","presentation"),this.#e.append(T)}}#k(t){const{div:e,properties:a,ctx:c}=t,{style:h}=e;let d="";if(Le.#v>1&&(d=`scale(${1/Le.#v})`),a.canvasWidth!==0&&a.hasText){const{fontFamily:f}=h,{canvasWidth:m,fontSize:g}=a;Le.#_(c,g*this.#l,f);const{width:y}=c.measureText(e.textContent);y>0&&(d=`scaleX(${m*this.#l/y}) ${d}`)}a.angle!==0&&(d=`rotate(${a.angle}deg) ${d}`),d.length>0&&(h.transform=d)}static cleanup(){if(!(this.#S.size>0)){this.#y.clear();for(const{canvas:t}of this.#b.values())t.remove();this.#b.clear()}}static#P(t=null){let e=this.#b.get(t||="");if(!e){const a=document.createElement("canvas");a.className="hiddenCanvasElement",a.lang=t,document.body.append(a),e=a.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#b.set(t,e),this.#E.set(e,{size:0,family:""})}return e}static#_(t,e,a){const c=this.#E.get(t);e===c.size&&a===c.family||(t.font=`${e}px ${a}`,c.size=e,c.family=a)}static#C(){if(this.#v!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#v=t.getBoundingClientRect().height,t.remove()}static#D(t,e,a){const c=this.#y.get(t);if(c)return c;const h=this.#P(a);h.canvas.width=h.canvas.height=DEFAULT_FONT_SIZE,this.#_(h,DEFAULT_FONT_SIZE,t);const d=h.measureText(""),f=d.fontBoundingBoxAscent,m=Math.abs(d.fontBoundingBoxDescent);h.canvas.width=h.canvas.height=0;let g=.8;return f?g=f/(f+m):(util_FeatureTest.platform.isFirefox&&warn("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?g=e.ascent:e.descent&&(g=1+e.descent)),this.#y.set(t,g),g}};class XfaText{static textContent(t){const e=[],a={items:e,styles:Object.create(null)};function c(h){if(!h)return;let d=null;const f=h.name;if(f==="#text")d=h.value;else if(XfaText.shouldBuildText(f))h?.attributes?.textContent?d=h.attributes.textContent:h.value&&(d=h.value);else return;if(d!==null&&e.push({str:d}),!!h.children)for(const m of h.children)c(m)}return c(t),a}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const RENDERING_CANCELLED_TIMEOUT=100;function getDocument(l={}){typeof l=="string"||l instanceof URL?l={url:l}:(l instanceof ArrayBuffer||ArrayBuffer.isView(l))&&(l={data:l});const t=new PDFDocumentLoadingTask,{docId:e}=t,a=l.url?getUrlProp(l.url):null,c=l.data?getDataProp(l.data):null,h=l.httpHeaders||null,d=l.withCredentials===!0,f=l.password??null,m=l.range instanceof PDFDataRangeTransport$1?l.range:null,g=Number.isInteger(l.rangeChunkSize)&&l.rangeChunkSize>0?l.rangeChunkSize:2**16;let y=l.worker instanceof PDFWorker?l.worker:null;const w=l.verbosity,E=typeof l.docBaseUrl=="string"&&!isDataScheme(l.docBaseUrl)?l.docBaseUrl:null,S=getFactoryUrlProp(l.cMapUrl),C=l.cMapPacked!==!1,T=l.CMapReaderFactory||(isNodeJS?NodeCMapReaderFactory:DOMCMapReaderFactory),k=getFactoryUrlProp(l.iccUrl),D=getFactoryUrlProp(l.standardFontDataUrl),N=l.StandardFontDataFactory||(isNodeJS?NodeStandardFontDataFactory:DOMStandardFontDataFactory),L=getFactoryUrlProp(l.wasmUrl),j=l.WasmFactory||(isNodeJS?NodeWasmFactory:DOMWasmFactory),F=l.stopAtErrors!==!0,$=Number.isInteger(l.maxImageSize)&&l.maxImageSize>-1?l.maxImageSize:-1,G=l.isEvalSupported!==!1,nt=typeof l.isOffscreenCanvasSupported=="boolean"?l.isOffscreenCanvasSupported:!isNodeJS,ot=typeof l.isImageDecoderSupported=="boolean"?l.isImageDecoderSupported:!isNodeJS&&(util_FeatureTest.platform.isFirefox||!globalThis.chrome),ct=Number.isInteger(l.canvasMaxAreaInBytes)?l.canvasMaxAreaInBytes:-1,ft=typeof l.disableFontFace=="boolean"?l.disableFontFace:isNodeJS,Tt=l.fontExtraProperties===!0,At=l.enableXfa===!0,gt=l.ownerDocument||globalThis.document,Mt=l.disableRange===!0,q=l.disableStream===!0,z=l.disableAutoFetch===!0,J=l.pdfBug===!0,lt=l.CanvasFactory||(isNodeJS?NodeCanvasFactory:DOMCanvasFactory),at=l.FilterFactory||(isNodeJS?NodeFilterFactory:DOMFilterFactory),B=l.enableHWA===!0,st=l.useWasm!==!1,mt=m?m.length:l.length??NaN,vt=typeof l.useSystemFonts=="boolean"?l.useSystemFonts:!isNodeJS&&!ft,Ct=typeof l.useWorkerFetch=="boolean"?l.useWorkerFetch:!!(T===DOMCMapReaderFactory&&N===DOMStandardFontDataFactory&&j===DOMWasmFactory&&S&&D&&L&&isValidFetchUrl(S,document.baseURI)&&isValidFetchUrl(D,document.baseURI)&&isValidFetchUrl(L,document.baseURI)),_t=null;setVerbosityLevel(w);const bt={canvasFactory:new lt({ownerDocument:gt,enableHWA:B}),filterFactory:new at({docId:e,ownerDocument:gt}),cMapReaderFactory:Ct?null:new T({baseUrl:S,isCompressed:C}),standardFontDataFactory:Ct?null:new N({baseUrl:D}),wasmFactory:Ct?null:new j({baseUrl:L})};y||(y=PDFWorker.create({verbosity:w,port:GlobalWorkerOptions.workerPort}),t._worker=y);const Dt={docId:e,apiVersion:"5.4.54",data:c,password:f,disableAutoFetch:z,rangeChunkSize:g,length:mt,docBaseUrl:E,enableXfa:At,evaluatorOptions:{maxImageSize:$,disableFontFace:ft,ignoreErrors:F,isEvalSupported:G,isOffscreenCanvasSupported:nt,isImageDecoderSupported:ot,canvasMaxAreaInBytes:ct,fontExtraProperties:Tt,useSystemFonts:vt,useWasm:st,useWorkerFetch:Ct,cMapUrl:S,iccUrl:k,standardFontDataUrl:D,wasmUrl:L}},It={ownerDocument:gt,pdfBug:J,styleElement:_t,loadingParams:{disableAutoFetch:z,enableXfa:At}};return y.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(y.destroyed)throw new Error("Worker was destroyed");const Lt=y.messageHandler.sendWithPromise("GetDocRequest",Dt,c?[c.buffer]:null);let pe;if(m)pe=new PDFDataTransportStream(m,{disableRange:Mt,disableStream:q});else if(!c){if(!a)throw new Error("getDocument - no `url` parameter provided.");const Te=isValidFetchUrl(a)?PDFFetchStream:isNodeJS?PDFNodeStream:PDFNetworkStream;pe=new Te({url:a,length:mt,httpHeaders:h,withCredentials:d,rangeChunkSize:g,disableRange:Mt,disableStream:q})}return Lt.then(Te=>{if(t.destroyed)throw new Error("Loading aborted");if(y.destroyed)throw new Error("Worker was destroyed");const Nt=new MessageHandler(e,Te,y.port),Vt=new WorkerTransport(Nt,t,pe,It,bt,B);t._transport=Vt,Nt.send("Ready",null)})}).catch(t._capability.reject),t}class PDFDocumentLoadingTask{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${PDFDocumentLoadingTask.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}let PDFDataRangeTransport$1=class{#t=Promise.withResolvers();#e=[];#n=[];#i=[];#r=[];constructor(t,e,a=!1,c=null){this.length=t,this.initialData=e,this.progressiveDone=a,this.contentDispositionFilename=c}addRangeListener(t){this.#r.push(t)}addProgressListener(t){this.#i.push(t)}addProgressiveReadListener(t){this.#n.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,e){for(const a of this.#r)a(t,e)}onDataProgress(t,e){this.#t.promise.then(()=>{for(const a of this.#i)a(t,e)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const e of this.#n)e(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,e){unreachable("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class PDFDocumentProxy{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return shadow(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class PDFPageProxy{#t=!1;constructor(t,e,a,c=!1){this._pageIndex=t,this._pageInfo=e,this._transport=a,this._stats=c?new StatTimer:null,this._pdfBug=c,this.commonObjs=a.commonObjs,this.objs=new PDFObjects,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:a=0,offsetY:c=0,dontFlip:h=!1}={}){return new PageViewport({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:a,offsetY:c,dontFlip:h})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return shadow(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:e=t.canvas,viewport:a,intent:c="display",annotationMode:h=AnnotationMode.ENABLE,transform:d=null,background:f=null,optionalContentConfigPromise:m=null,annotationCanvasMap:g=null,pageColors:y=null,printAnnotationStorage:w=null,isEditing:E=!1}){this._stats?.time("Overall");const S=this._transport.getRenderingIntent(c,h,w,E),{renderingIntent:C,cacheKey:T}=S;this.#t=!1,m||=this._transport.getOptionalContentConfig(C);let k=this._intentStates.get(T);k||(k=Object.create(null),this._intentStates.set(T,k)),k.streamReaderCancelTimeout&&(clearTimeout(k.streamReaderCancelTimeout),k.streamReaderCancelTimeout=null);const D=!!(C&RenderingIntentFlag.PRINT);k.displayReadyCapability||(k.displayReadyCapability=Promise.withResolvers(),k.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(S));const N=F=>{k.renderTasks.delete(L),D&&(this.#t=!0),this.#e(),F?(L.capability.reject(F),this._abortOperatorList({intentState:k,reason:F instanceof Error?F:new Error(F)})):L.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},L=new InternalRenderTask({callback:N,params:{canvas:e,canvasContext:t,viewport:a,transform:d,background:f},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:g,operatorList:k.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!D,pdfBug:this._pdfBug,pageColors:y,enableHWA:this._transport.enableHWA});(k.renderTasks||=new Set).add(L);const j=L.task;return Promise.all([k.displayReadyCapability.promise,m]).then(([F,$])=>{if(this.destroyed){N();return}if(this._stats?.time("Rendering"),!($.renderingIntent&C))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");L.initializeGraphics({transparency:F,optionalContentConfig:$}),L.operatorListChanged()}).catch(N),j}getOperatorList({intent:t="display",annotationMode:e=AnnotationMode.ENABLE,printAnnotationStorage:a=null,isEditing:c=!1}={}){function h(){f.operatorList.lastChunk&&(f.opListReadCapability.resolve(f.operatorList),f.renderTasks.delete(m))}const d=this._transport.getRenderingIntent(t,e,a,c,!0);let f=this._intentStates.get(d.cacheKey);f||(f=Object.create(null),this._intentStates.set(d.cacheKey,f));let m;return f.opListReadCapability||(m=Object.create(null),m.operatorListChanged=h,f.opListReadCapability=Promise.withResolvers(),(f.renderTasks||=new Set).add(m),f.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(d)),f.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(c){return c.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(a=>XfaText.textContent(a));const e=this.streamTextContent(t);return new Promise(function(a,c){function h(){d.read().then(function({value:m,done:g}){if(g){a(f);return}f.lang??=m.lang,Object.assign(f.styles,m.styles),f.items.push(...m.items),h()},c)}const d=e.getReader(),f={items:[],styles:Object.create(null),lang:null};h()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const a of e.renderTasks)t.push(a.completed),a.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const e=this.#e();return t&&e&&(this._stats&&=new StatTimer),e}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,e){const a=this._intentStates.get(e);a&&(this._stats?.timeEnd("Page Request"),a.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let a=0,c=t.length;a<c;a++)e.operatorList.fnArray.push(t.fnArray[a]),e.operatorList.argsArray.push(t.argsArray[a]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const a of e.renderTasks)a.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:a,modifiedIds:c}){const{map:h,transfer:d}=a,m=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:h,modifiedIds:c},d).getReader(),g=this._intentStates.get(e);g.streamReader=m;const y=()=>{m.read().then(({value:w,done:E})=>{if(E){g.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(w,g),y())},w=>{if(g.streamReader=null,!this._transport.destroyed){if(g.operatorList){g.operatorList.lastChunk=!0;for(const E of g.renderTasks)E.operatorListChanged();this.#e()}if(g.displayReadyCapability)g.displayReadyCapability.reject(w);else if(g.opListReadCapability)g.opListReadCapability.reject(w);else throw w}})};y()}_abortOperatorList({intentState:t,reason:e,force:a=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!a){if(t.renderTasks.size>0)return;if(e instanceof RenderingCancelledException){let c=RENDERING_CANCELLED_TIMEOUT;e.extraDelay>0&&e.extraDelay<1e3&&(c+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},c);return}}if(t.streamReader.cancel(new AbortException(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[c,h]of this._intentStates)if(h===t){this._intentStates.delete(c);break}this.cleanup()}}}get stats(){return this._stats}}var Mn,$e,un,Kn,wr,Xn,qn,fe,vr,Jc,tu,rs,wi,xr;const Gt=class Gt{constructor({name:t=null,port:e=null,verbosity:a=getVerbosityLevel()}={}){Qe(this,fe);Qe(this,Mn,Promise.withResolvers());Qe(this,$e,null);Qe(this,un,null);Qe(this,Kn,null);if(this.name=t,this.destroyed=!1,this.verbosity=a,e){if($t(Gt,qn).has(e))throw new Error("Cannot use more than one PDFWorker per port.");$t(Gt,qn).set(e,this),Ze(this,fe,Jc).call(this,e)}else Ze(this,fe,tu).call(this)}get promise(){return $t(this,Mn).promise}get port(){return $t(this,un)}get messageHandler(){return $t(this,$e)}destroy(){this.destroyed=!0,$t(this,Kn)?.terminate(),we(this,Kn,null),$t(Gt,qn).delete($t(this,un)),we(this,un,null),$t(this,$e)?.destroy(),we(this,$e,null)}static create(t){const e=$t(this,qn).get(t?.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Gt(t)}static get workerSrc(){if(GlobalWorkerOptions.workerSrc)return GlobalWorkerOptions.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return shadow(this,"_setupFakeWorkerGlobal",(async()=>$t(this,wi,xr)?$t(this,wi,xr):(await import(this.workerSrc)).WorkerMessageHandler)())}};Mn=new WeakMap,$e=new WeakMap,un=new WeakMap,Kn=new WeakMap,wr=new WeakMap,Xn=new WeakMap,qn=new WeakMap,fe=new WeakSet,vr=function(){$t(this,Mn).resolve(),$t(this,$e).send("configure",{verbosity:this.verbosity})},Jc=function(t){we(this,un,t),we(this,$e,new MessageHandler("main","worker",t)),$t(this,$e).on("ready",()=>{}),Ze(this,fe,vr).call(this)},tu=function(){if($t(Gt,Xn)||$t(Gt,wi,xr)){Ze(this,fe,rs).call(this);return}let{workerSrc:t}=Gt;try{Gt._isSameOrigin(window.location,t)||(t=Gt._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),a=new MessageHandler("main","worker",e),c=()=>{h.abort(),a.destroy(),e.terminate(),this.destroyed?$t(this,Mn).reject(new Error("Worker was destroyed")):Ze(this,fe,rs).call(this)},h=new AbortController;e.addEventListener("error",()=>{$t(this,Kn)||c()},{signal:h.signal}),a.on("test",f=>{if(h.abort(),this.destroyed||!f){c();return}we(this,$e,a),we(this,un,e),we(this,Kn,e),Ze(this,fe,vr).call(this)}),a.on("ready",f=>{if(h.abort(),this.destroyed){c();return}try{d()}catch{Ze(this,fe,rs).call(this)}});const d=()=>{const f=new Uint8Array;a.send("test",f,[f.buffer])};d();return}catch{info("The worker has been disabled.")}Ze(this,fe,rs).call(this)},rs=function(){$t(Gt,Xn)||(warn("Setting up fake worker."),we(Gt,Xn,!0)),Gt._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){$t(this,Mn).reject(new Error("Worker was destroyed"));return}const e=new LoopbackPort;we(this,un,e);const a=`fake${Zc(Gt,wr)._++}`,c=new MessageHandler(a+"_worker",a,e);t.setup(c,e),we(this,$e,new MessageHandler(a,a+"_worker",e)),Ze(this,fe,vr).call(this)}).catch(t=>{$t(this,Mn).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},wi=new WeakSet,xr=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Qe(Gt,wi),Qe(Gt,wr,0),Qe(Gt,Xn,!1),Qe(Gt,qn,new WeakMap),isNodeJS&&(we(Gt,Xn,!0),GlobalWorkerOptions.workerSrc||="./pdf.worker.mjs"),Gt._isSameOrigin=(t,e)=>{const a=URL.parse(t);if(!a?.origin||a.origin==="null")return!1;const c=new URL(e,a);return a.origin===c.origin},Gt._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},Gt.fromPort=t=>{if(deprecated("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Gt.create(t)};let PDFWorker=Gt;class WorkerTransport{#t=new Map;#e=new Map;#n=new Map;#i=new Map;#r=null;constructor(t,e,a,c,h,d){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new PDFObjects,this.fontLoader=new FontLoader({ownerDocument:c.ownerDocument,styleElement:c.styleElement}),this.loadingParams=c.loadingParams,this._params=c,this.canvasFactory=h.canvasFactory,this.filterFactory=h.filterFactory,this.cMapReaderFactory=h.cMapReaderFactory,this.standardFontDataFactory=h.standardFontDataFactory,this.wasmFactory=h.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=a,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=d,this.setupMessageHandler()}#s(t,e=null){const a=this.#t.get(t);if(a)return a;const c=this.messageHandler.sendWithPromise(t,e);return this.#t.set(t,c),c}get annotationStorage(){return shadow(this,"annotationStorage",new AnnotationStorage)}getRenderingIntent(t,e=AnnotationMode.ENABLE,a=null,c=!1,h=!1){let d=RenderingIntentFlag.DISPLAY,f=SerializableEmpty;switch(t){case"any":d=RenderingIntentFlag.ANY;break;case"display":break;case"print":d=RenderingIntentFlag.PRINT;break;default:warn(`getRenderingIntent - invalid intent: ${t}`)}const m=d&RenderingIntentFlag.PRINT&&a instanceof PrintAnnotationStorage?a:this.annotationStorage;switch(e){case AnnotationMode.DISABLE:d+=RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case AnnotationMode.ENABLE:break;case AnnotationMode.ENABLE_FORMS:d+=RenderingIntentFlag.ANNOTATIONS_FORMS;break;case AnnotationMode.ENABLE_STORAGE:d+=RenderingIntentFlag.ANNOTATIONS_STORAGE,f=m.serializable;break;default:warn(`getRenderingIntent - invalid annotationMode: ${e}`)}c&&(d+=RenderingIntentFlag.IS_EDITING),h&&(d+=RenderingIntentFlag.OPLIST);const{ids:g,hash:y}=m.modifiedIds,w=[d,f.hash,y];return{renderingIntent:d,cacheKey:w.join("_"),annotationStorageSerializable:f,modifiedIds:g}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const a of this.#e.values())t.push(a._destroy());this.#e.clear(),this.#n.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),TextLayer$1.cleanup(),this._networkStream?.cancelAllRequests(new AbortException("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(a,c)=>{assert(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=h=>{this._lastProgress={loaded:h.loaded,total:h.total}},c.onPull=()=>{this._fullReader.read().then(function({value:h,done:d}){if(d){c.close();return}assert(h instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),c.enqueue(new Uint8Array(h),1,[h])}).catch(h=>{c.error(h)})},c.onCancel=h=>{this._fullReader.cancel(h),c.ready.catch(d=>{if(!this.destroyed)throw d})}}),t.on("ReaderHeadersReady",async a=>{await this._fullReader.headersReady;const{isStreamingSupported:c,isRangeSupported:h,contentLength:d}=this._fullReader;return(!c||!h)&&(this._lastProgress&&e.onProgress?.(this._lastProgress),this._fullReader.onProgress=f=>{e.onProgress?.({loaded:f.loaded,total:f.total})}),{isStreamingSupported:c,isRangeSupported:h,contentLength:d}}),t.on("GetRangeReader",(a,c)=>{assert(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const h=this._networkStream.getRangeReader(a.begin,a.end);if(!h){c.close();return}c.onPull=()=>{h.read().then(function({value:d,done:f}){if(f){c.close();return}assert(d instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),c.enqueue(new Uint8Array(d),1,[d])}).catch(d=>{c.error(d)})},c.onCancel=d=>{h.cancel(d),c.ready.catch(f=>{if(!this.destroyed)throw f})}}),t.on("GetDoc",({pdfInfo:a})=>{this._numPages=a.numPages,this._htmlForXfa=a.htmlForXfa,delete a.htmlForXfa,e._capability.resolve(new PDFDocumentProxy(a,this))}),t.on("DocException",a=>{e._capability.reject(wrapReason(a))}),t.on("PasswordRequest",a=>{this.#r=Promise.withResolvers();try{if(!e.onPassword)throw wrapReason(a);const c=h=>{h instanceof Error?this.#r.reject(h):this.#r.resolve({password:h})};e.onPassword(c,a.code)}catch(c){this.#r.reject(c)}return this.#r.promise}),t.on("DataLoaded",a=>{e.onProgress?.({loaded:a.length,total:a.length}),this.downloadInfoCapability.resolve(a)}),t.on("StartRenderPage",a=>{if(this.destroyed)return;this.#e.get(a.pageIndex)._startRenderPage(a.transparency,a.cacheKey)}),t.on("commonobj",([a,c,h])=>{if(this.destroyed||this.commonObjs.has(a))return null;switch(c){case"Font":if("error"in h){const g=h.error;warn(`Error during font loading: ${g}`),this.commonObjs.resolve(a,g);break}const d=this._params.pdfBug&&globalThis.FontInspector?.enabled?(g,y)=>globalThis.FontInspector.fontAdded(g,y):null,f=new FontFaceObject(h,d);this.fontLoader.bind(f).catch(()=>t.sendWithPromise("FontFallback",{id:a})).finally(()=>{!f.fontExtraProperties&&f.data&&(f.data=null),this.commonObjs.resolve(a,f)});break;case"CopyLocalImage":const{imageRef:m}=h;assert(m,"The imageRef must be defined.");for(const g of this.#e.values())for(const[,y]of g.objs)if(y?.ref===m)return y.dataLen?(this.commonObjs.resolve(a,structuredClone(y)),y.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(a,h);break;default:throw new Error(`Got unknown common object type ${c}`)}return null}),t.on("obj",([a,c,h,d])=>{if(this.destroyed)return;const f=this.#e.get(c);if(!f.objs.has(a)){if(f._intentStates.size===0){d?.bitmap?.close();return}switch(h){case"Image":case"Pattern":f.objs.resolve(a,d);break;default:throw new Error(`Got unknown object type ${h}`)}}}),t.on("DocProgress",a=>{this.destroyed||e.onProgress?.({loaded:a.loaded,total:a.total})}),t.on("FetchBinaryData",async a=>{if(this.destroyed)throw new Error("Worker was destroyed.");const c=this[a.type];if(!c)throw new Error(`${a.type} not initialized, see the \`useWorkerFetch\` parameter.`);return c.fetch(a)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&warn("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,a=this.#n.get(e);if(a)return a;const c=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(h=>{if(this.destroyed)throw new Error("Transport destroyed");h.refStr&&this.#i.set(h.refStr,t);const d=new PDFPageProxy(e,h,this,this._params.pdfBug);return this.#e.set(e,d),d});return this.#n.set(e,c),c}getPageIndex(t){return isRefProxy(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#s("GetFieldObjects")}hasJSActions(){return this.#s("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#s("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#s("GetOptionalContentConfig").then(e=>new OptionalContentConfig(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#t.get(t);if(e)return e;const a=this.messageHandler.sendWithPromise(t,null).then(c=>({info:c[0],metadata:c[1]?new Metadata(c[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,a),a}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#e.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),TextLayer$1.cleanup()}}cachedPageNumber(t){if(!isRefProxy(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#i.get(e)??null}}class RenderTask{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this.#t;return t.form||t.canvas&&e?.size>0}}class InternalRenderTask{#t=null;static#e=new WeakSet;constructor({callback:t,params:e,objs:a,commonObjs:c,annotationCanvasMap:h,operatorList:d,pageIndex:f,canvasFactory:m,filterFactory:g,useRequestAnimationFrame:y=!1,pdfBug:w=!1,pageColors:E=null,enableHWA:S=!1}){this.callback=t,this.params=e,this.objs=a,this.commonObjs=c,this.annotationCanvasMap=h,this.operatorListIdx=null,this.operatorList=d,this._pageIndex=f,this.canvasFactory=m,this.filterFactory=g,this._pdfBug=w,this.pageColors=E,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=y===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=S}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:a,transform:c,background:h}=this.params,d=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new CanvasGraphics(d,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:c,viewport:a,transparency:t,background:h}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),InternalRenderTask.#e.delete(this._canvas),t||=new RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,e),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),InternalRenderTask.#e.delete(this._canvas),this.callback())))}}const version="5.4.54",build="295fb3ec4";class ColorPicker{#t=null;#e=null;#n;#i=null;#r=!1;#s=!1;#a=null;#o;#u=null;#c=null;static#d=null;static get _keyboardManager(){return shadow(this,"_keyboardManager",new KeyboardManager([[["Escape","mac+Escape"],ColorPicker.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],ColorPicker.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],ColorPicker.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],ColorPicker.prototype._moveToPrevious],[["Home","mac+Home"],ColorPicker.prototype._moveToBeginning],[["End","mac+End"],ColorPicker.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#s=!1,this.#a=t):this.#s=!0,this.#c=t?._uiManager||e,this.#o=this.#c._eventBus,this.#n=t?.color?.toUpperCase()||this.#c?.highlightColors.values().next().value||"#FFFF98",ColorPicker.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#a&&(t.ariaControls=`${this.#a.id}_colorpicker_dropdown`);const e=this.#c._signal;t.addEventListener("click",this.#f.bind(this),{signal:e}),t.addEventListener("keydown",this.#g.bind(this),{signal:e});const a=this.#e=document.createElement("span");return a.className="swatch",a.ariaHidden="true",a.style.backgroundColor=this.#n,t.append(a),t}renderMainDropdown(){const t=this.#i=this.#l();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#l(){const t=document.createElement("div"),e=this.#c._signal;t.addEventListener("contextmenu",noContextMenu,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#a&&(t.id=`${this.#a.id}_colorpicker_dropdown`);for(const[a,c]of this.#c.highlightColors){const h=document.createElement("button");h.tabIndex="0",h.role="option",h.setAttribute("data-color",c),h.title=a,h.setAttribute("data-l10n-id",ColorPicker.#d[a]);const d=document.createElement("span");h.append(d),d.className="swatch",d.style.backgroundColor=c,h.ariaSelected=c===this.#n,h.addEventListener("click",this.#p.bind(this,c),{signal:e}),t.append(h)}return t.addEventListener("keydown",this.#g.bind(this),{signal:e}),t}#p(t,e){e.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:AnnotationEditorParamsType.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#f(t);return}const e=t.target.getAttribute("data-color");e&&this.#p(e,t)}_moveToNext(t){if(!this.#m){this.#f(t);return}if(t.target===this.#t){this.#i.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#i?.firstChild||t.target===this.#t){this.#m&&this._hideDropdownFromKeyboard();return}this.#m||this.#f(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#m){this.#f(t);return}this.#i.firstChild?.focus()}_moveToEnd(t){if(!this.#m){this.#f(t);return}this.#i.lastChild?.focus()}#g(t){ColorPicker._keyboardManager.exec(this,t)}#f(t){if(this.#m){this.hideDropdown();return}if(this.#r=t.detail===0,this.#u||(this.#u=new AbortController,window.addEventListener("pointerdown",this.#h.bind(this),{signal:this.#c.combinedSignal(this.#u)})),this.#t.ariaExpanded="true",this.#i){this.#i.classList.remove("hidden");return}const e=this.#i=this.#l();this.#t.append(e)}#h(t){this.#i?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#i?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#u?.abort(),this.#u=null}get#m(){return this.#i&&!this.#i.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#s){if(!this.#m){this.#a?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#r})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#i)return;const e=this.#c.highlightColors.values();for(const a of this.#i.children)a.ariaSelected=e.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#i?.remove(),this.#i=null}}class BasicColorPicker{#t=null;#e=null;#n=null;static#i=null;constructor(t){this.#e=t,this.#n=t._uiManager,BasicColorPicker.#i||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:e,colorValue:a}=this.#e,c=this.#t=document.createElement("input");return c.type="color",c.value=a||"#000000",c.className="basicColorPicker",c.tabIndex=0,c.setAttribute("data-l10n-id",BasicColorPicker.#i[t]),c.addEventListener("input",()=>{this.#n.updateParams(e,c.value)},{signal:this.#n._signal}),c}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function makeColorComp(l){return Math.floor(Math.max(0,Math.min(1,l))*255).toString(16).padStart(2,"0")}function scaleAndClamp(l){return Math.max(0,Math.min(255,255*l))}class ColorConverters{static CMYK_G([t,e,a,c]){return["G",1-Math.min(1,.3*t+.59*a+.11*e+c)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=scaleAndClamp(t),[t,t,t]}static G_HTML([t]){const e=makeColorComp(t);return`#${e}${e}${e}`}static RGB_G([t,e,a]){return["G",.3*t+.59*e+.11*a]}static RGB_rgb(t){return t.map(scaleAndClamp)}static RGB_HTML(t){return`#${t.map(makeColorComp).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,a,c]){return["RGB",1-Math.min(1,t+c),1-Math.min(1,a+c),1-Math.min(1,e+c)]}static CMYK_rgb([t,e,a,c]){return[scaleAndClamp(1-Math.min(1,t+c)),scaleAndClamp(1-Math.min(1,a+c)),scaleAndClamp(1-Math.min(1,e+c))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,a]){const c=1-t,h=1-e,d=1-a,f=Math.min(c,h,d);return["CMYK",c,h,d,f]}}class BaseSVGFactory{create(t,e,a=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const c=this._createSVG("svg:svg");return c.setAttribute("version","1.1"),a||(c.setAttribute("width",`${t}px`),c.setAttribute("height",`${e}px`)),c.setAttribute("preserveAspectRatio","none"),c.setAttribute("viewBox",`0 0 ${t} ${e}`),c}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){unreachable("Abstract method `_createSVG` called.")}}class DOMSVGFactory extends BaseSVGFactory{_createSVG(t){return document.createElementNS(SVG_NS,t)}}class XfaLayer{static setupStorage(t,e,a,c,h){const d=c.getValue(e,{value:null});switch(a.name){case"textarea":if(d.value!==null&&(t.textContent=d.value),h==="print")break;t.addEventListener("input",f=>{c.setValue(e,{value:f.target.value})});break;case"input":if(a.attributes.type==="radio"||a.attributes.type==="checkbox"){if(d.value===a.attributes.xfaOn?t.setAttribute("checked",!0):d.value===a.attributes.xfaOff&&t.removeAttribute("checked"),h==="print")break;t.addEventListener("change",f=>{c.setValue(e,{value:f.target.checked?f.target.getAttribute("xfaOn"):f.target.getAttribute("xfaOff")})})}else{if(d.value!==null&&t.setAttribute("value",d.value),h==="print")break;t.addEventListener("input",f=>{c.setValue(e,{value:f.target.value})})}break;case"select":if(d.value!==null){t.setAttribute("value",d.value);for(const f of a.children)f.attributes.value===d.value?f.attributes.selected=!0:f.attributes.hasOwnProperty("selected")&&delete f.attributes.selected}t.addEventListener("input",f=>{const m=f.target.options,g=m.selectedIndex===-1?"":m[m.selectedIndex].value;c.setValue(e,{value:g})});break}}static setAttributes({html:t,element:e,storage:a=null,intent:c,linkService:h}){const{attributes:d}=e,f=t instanceof HTMLAnchorElement;d.type==="radio"&&(d.name=`${d.name}-${c}`);for(const[m,g]of Object.entries(d))if(g!=null)switch(m){case"class":g.length&&t.setAttribute(m,g.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",g);break;case"style":Object.assign(t.style,g);break;case"textContent":t.textContent=g;break;default:(!f||m!=="href"&&m!=="newWindow")&&t.setAttribute(m,g)}f&&h.addLinkAttributes(t,d.href,d.newWindow),a&&d.dataId&&this.setupStorage(t,d.dataId,e,a)}static render(t){const e=t.annotationStorage,a=t.linkService,c=t.xfaHtml,h=t.intent||"display",d=document.createElement(c.name);c.attributes&&this.setAttributes({html:d,element:c,intent:h,linkService:a});const f=h!=="richText",m=t.div;if(m.append(d),t.viewport){const w=`matrix(${t.viewport.transform.join(",")})`;m.style.transform=w}f&&m.setAttribute("class","xfaLayer xfaFont");const g=[];if(c.children.length===0){if(c.value){const w=document.createTextNode(c.value);d.append(w),f&&XfaText.shouldBuildText(c.name)&&g.push(w)}return{textDivs:g}}const y=[[c,-1,d]];for(;y.length>0;){const[w,E,S]=y.at(-1);if(E+1===w.children.length){y.pop();continue}const C=w.children[++y.at(-1)[1]];if(C===null)continue;const{name:T}=C;if(T==="#text"){const D=document.createTextNode(C.value);g.push(D),S.append(D);continue}const k=C?.attributes?.xmlns?document.createElementNS(C.attributes.xmlns,T):document.createElement(T);if(S.append(k),C.attributes&&this.setAttributes({html:k,element:C,storage:e,intent:h,linkService:a}),C.children?.length>0)y.push([C,-1,k]);else if(C.value){const D=document.createTextNode(C.value);f&&XfaText.shouldBuildText(T)&&g.push(D),k.append(D)}}for(const w of m.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))w.setAttribute("readOnly",!0);return{textDivs:g}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const annotation_layer_DEFAULT_FONT_SIZE=9,GetElementsByNameSet=new WeakSet,TIMEZONE_OFFSET=new Date().getTimezoneOffset()*60*1e3;class AnnotationElementFactory{static create(t){switch(t.data.annotationType){case AnnotationType.LINK:return new LinkAnnotationElement(t);case AnnotationType.TEXT:return new TextAnnotationElement(t);case AnnotationType.WIDGET:switch(t.data.fieldType){case"Tx":return new TextWidgetAnnotationElement(t);case"Btn":return t.data.radioButton?new RadioButtonWidgetAnnotationElement(t):t.data.checkBox?new CheckboxWidgetAnnotationElement(t):new PushButtonWidgetAnnotationElement(t);case"Ch":return new ChoiceWidgetAnnotationElement(t);case"Sig":return new SignatureWidgetAnnotationElement(t)}return new WidgetAnnotationElement(t);case AnnotationType.POPUP:return new PopupAnnotationElement(t);case AnnotationType.FREETEXT:return new FreeTextAnnotationElement(t);case AnnotationType.LINE:return new LineAnnotationElement(t);case AnnotationType.SQUARE:return new SquareAnnotationElement(t);case AnnotationType.CIRCLE:return new CircleAnnotationElement(t);case AnnotationType.POLYLINE:return new PolylineAnnotationElement(t);case AnnotationType.CARET:return new CaretAnnotationElement(t);case AnnotationType.INK:return new InkAnnotationElement(t);case AnnotationType.POLYGON:return new PolygonAnnotationElement(t);case AnnotationType.HIGHLIGHT:return new HighlightAnnotationElement(t);case AnnotationType.UNDERLINE:return new UnderlineAnnotationElement(t);case AnnotationType.SQUIGGLY:return new SquigglyAnnotationElement(t);case AnnotationType.STRIKEOUT:return new StrikeOutAnnotationElement(t);case AnnotationType.STAMP:return new StampAnnotationElement(t);case AnnotationType.FILEATTACHMENT:return new FileAttachmentAnnotationElement(t);default:return new AnnotationElement(t)}}}class AnnotationElement{#t=null;#e=!1;#n=null;constructor(t,{isRenderable:e=!1,ignoreBorder:a=!1,createQuadrilaterals:c=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(a)),c&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t?.str||e?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return AnnotationElement._hasPopupData(this.data)}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:e,popup:a}=t;e&&this.#i(e);let c=this.#n?.popup||this.popup;!c&&a?.text&&(this._createPopup(a),c=this.#n.popup),c&&(c.updateEdited(t),a?.deleted&&(c.remove(),this.#n=null,this.popup=null))}resetEdited(){this.#t&&(this.#i(this.#t.rect),this.#n?.popup.resetEdited(),this.#t=null)}#i(t){const{container:{style:e},data:{rect:a,rotation:c},parent:{viewport:{rawDims:{pageWidth:h,pageHeight:d,pageX:f,pageY:m}}}}=this;a?.splice(0,4,...t),e.left=`${100*(t[0]-f)/h}%`,e.top=`${100*(d-t[3]+m)/d}%`,c===0?(e.width=`${100*(t[2]-t[0])/h}%`,e.height=`${100*(t[3]-t[1])/d}%`):this.setRotation(c)}_createContainer(t){const{data:e,parent:{page:a,viewport:c}}=this,h=document.createElement("section");h.setAttribute("data-annotation-id",e.id),!(this instanceof WidgetAnnotationElement)&&!(this instanceof LinkAnnotationElement)&&(h.tabIndex=0);const{style:d}=h;if(d.zIndex=this.parent.zIndex++,e.alternativeText&&(h.title=e.alternativeText),e.noRotate&&h.classList.add("norotate"),!e.rect||this instanceof PopupAnnotationElement){const{rotation:T}=e;return!e.hasOwnCanvas&&T!==0&&this.setRotation(T,h),h}const{width:f,height:m}=this;if(!t&&e.borderStyle.width>0){d.borderWidth=`${e.borderStyle.width}px`;const T=e.borderStyle.horizontalCornerRadius,k=e.borderStyle.verticalCornerRadius;if(T>0||k>0){const N=`calc(${T}px * var(--total-scale-factor)) / calc(${k}px * var(--total-scale-factor))`;d.borderRadius=N}else if(this instanceof RadioButtonWidgetAnnotationElement){const N=`calc(${f}px * var(--total-scale-factor)) / calc(${m}px * var(--total-scale-factor))`;d.borderRadius=N}switch(e.borderStyle.style){case AnnotationBorderStyleType.SOLID:d.borderStyle="solid";break;case AnnotationBorderStyleType.DASHED:d.borderStyle="dashed";break;case AnnotationBorderStyleType.BEVELED:warn("Unimplemented border style: beveled");break;case AnnotationBorderStyleType.INSET:warn("Unimplemented border style: inset");break;case AnnotationBorderStyleType.UNDERLINE:d.borderBottomStyle="solid";break}const D=e.borderColor||null;D?(this.#e=!0,d.borderColor=Util.makeHexColor(D[0]|0,D[1]|0,D[2]|0)):d.borderWidth=0}const g=Util.normalizeRect([e.rect[0],a.view[3]-e.rect[1]+a.view[1],e.rect[2],a.view[3]-e.rect[3]+a.view[1]]),{pageWidth:y,pageHeight:w,pageX:E,pageY:S}=c.rawDims;d.left=`${100*(g[0]-E)/y}%`,d.top=`${100*(g[1]-S)/w}%`;const{rotation:C}=e;return e.hasOwnCanvas||C===0?(d.width=`${100*f/y}%`,d.height=`${100*m/w}%`):this.setRotation(C,h),h}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:a,pageHeight:c}=this.parent.viewport.rawDims;let{width:h,height:d}=this;t%180!==0&&([h,d]=[d,h]),e.style.width=`${100*h/a}%`,e.style.height=`${100*d/c}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,a,c)=>{const h=c.detail[e],d=h[0],f=h.slice(1);c.target.style[a]=ColorConverters[`${d}_HTML`](f),this.annotationStorage.setValue(this.data.id,{[a]:ColorConverters[`${d}_rgb`](f)})};return shadow(this,"_commonActions",{display:e=>{const{display:a}=e.detail,c=a%2===1;this.container.style.visibility=c?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:c,noPrint:a===1||a===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:a}=e.detail;this.container.style.visibility=a?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:a,noView:a})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const a=e.detail.rotation;this.setRotation(a),this.annotationStorage.setValue(this.data.id,{rotation:a})}})}_dispatchEventFromSandbox(t,e){const a=this._commonActions;for(const c of Object.keys(e.detail))(t[c]||a[c])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const a=this._commonActions;for(const[c,h]of Object.entries(e)){const d=a[c];if(d){const f={detail:{[c]:h},target:t};d(f),delete e[c]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,a,c,h]=this.data.rect.map(T=>Math.fround(T));if(t.length===8){const[T,k,D,N]=t.subarray(2,6);if(c===T&&h===k&&e===D&&a===N)return}const{style:d}=this.container;let f;if(this.#e){const{borderColor:T,borderWidth:k}=d;d.borderWidth=0,f=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${T}" stroke-width="${k}">`],this.container.classList.add("hasBorder")}const m=c-e,g=h-a,{svgFactory:y}=this,w=y.createElement("svg");w.classList.add("quadrilateralsContainer"),w.setAttribute("width",0),w.setAttribute("height",0),w.role="none";const E=y.createElement("defs");w.append(E);const S=y.createElement("clipPath"),C=`clippath_${this.data.id}`;S.setAttribute("id",C),S.setAttribute("clipPathUnits","objectBoundingBox"),E.append(S);for(let T=2,k=t.length;T<k;T+=8){const D=t[T],N=t[T+1],L=t[T+2],j=t[T+3],F=y.createElement("rect"),$=(L-e)/m,G=(h-N)/g,nt=(D-L)/m,ot=(N-j)/g;F.setAttribute("x",$),F.setAttribute("y",G),F.setAttribute("width",nt),F.setAttribute("height",ot),S.append(F),f?.push(`<rect vector-effect="non-scaling-stroke" x="${$}" y="${G}" width="${nt}" height="${ot}"/>`)}this.#e&&(f.push("</g></svg>')"),d.backgroundImage=f.join("")),this.container.append(w),this.container.style.clipPath=`url(#${C})`}_createPopup(t=null){const{data:e}=this;let a,c;t?(a={str:t.text},c=t.date):(a=e.contentsObj,c=e.modificationDate);const h=this.#n=new PopupAnnotationElement({data:{color:e.color,titleObj:e.titleObj,modificationDate:c,contentsObj:a,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]});this.parent.div.append(h.render())}get hasPopupElement(){return!!(this.#n||this.popup||this.data.popupRef)}render(){unreachable("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const a=[];if(this._fieldObjects){const c=this._fieldObjects[t];if(c)for(const{page:h,id:d,exportValues:f}of c){if(h===-1||d===e)continue;const m=typeof f=="string"?f:null,g=document.querySelector(`[data-element-id="${d}"]`);if(g&&!GetElementsByNameSet.has(g)){warn(`_getElementsByName - element not allowed: ${d}`);continue}a.push({id:d,exportValue:m,domElement:g})}return a}for(const c of document.getElementsByName(t)){const{exportValue:h}=c,d=c.getAttribute("data-element-id");d!==e&&GetElementsByNameSet.has(c)&&a.push({id:d,exportValue:h,domElement:c})}return a}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class LinkAnnotationElement extends AnnotationElement{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,a=document.createElement("a");a.setAttribute("data-element-id",t.id);let c=!1;return t.url?(e.addLinkAttributes(a,t.url,t.newWindow),c=!0):t.action?(this._bindNamedAction(a,t.action,t.overlaidText),c=!0):t.attachment?(this.#e(a,t.attachment,t.overlaidText,t.attachmentDest),c=!0):t.setOCGState?(this.#n(a,t.setOCGState,t.overlaidText),c=!0):t.dest?(this._bindLink(a,t.dest,t.overlaidText),c=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(a,t),c=!0),t.resetForm?(this._bindResetFormAction(a,t.resetForm),c=!0):this.isTooltipOnly&&!c&&(this._bindLink(a,""),c=!0)),this.container.classList.add("linkAnnotation"),c&&this.container.append(a),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e,a=""){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#t(),a&&(t.title=a)}_bindNamedAction(t,e,a=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),a&&(t.title=a),this.#t()}#e(t,e,a="",c=null){t.href=this.linkService.getAnchorUrl(""),e.description?t.title=e.description:a&&(t.title=a),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,c),!1),this.#t()}#n(t,e,a=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),a&&(t.title=a),this.#t()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const a=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const c of Object.keys(e.actions)){const h=a.get(c);h&&(t[h]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:c}}),!1))}e.overlaidText&&(t.title=e.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,e){const a=t.onclick;if(a||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){warn('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),a||(t.onclick=()=>!1);return}t.onclick=()=>{a?.();const{fields:c,refs:h,include:d}=e,f=[];if(c.length!==0||h.length!==0){const y=new Set(h);for(const w of c){const E=this._fieldObjects[w]||[];for(const{id:S}of E)y.add(S)}for(const w of Object.values(this._fieldObjects))for(const E of w)y.has(E.id)===d&&f.push(E)}else for(const y of Object.values(this._fieldObjects))f.push(...y);const m=this.annotationStorage,g=[];for(const y of f){const{id:w}=y;switch(g.push(w),y.type){case"text":{const S=y.defaultValue||"";m.setValue(w,{value:S});break}case"checkbox":case"radiobutton":{const S=y.defaultValue===y.exportValues;m.setValue(w,{value:S});break}case"combobox":case"listbox":{const S=y.defaultValue||"";m.setValue(w,{value:S});break}default:continue}const E=document.querySelector(`[data-element-id="${w}"]`);if(E){if(!GetElementsByNameSet.has(E)){warn(`_bindResetFormAction - element not allowed: ${w}`);continue}}else continue;E.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:g,name:"ResetForm"}}),!1}}}class TextAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class WidgetAnnotationElement extends AnnotationElement{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return util_FeatureTest.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,a,c,h){a.includes("mouse")?t.addEventListener(a,d=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:c,value:h(d),shift:d.shiftKey,modifier:this._getKeyModifier(d)}})}):t.addEventListener(a,d=>{if(a==="blur"){if(!e.focused||!d.relatedTarget)return;e.focused=!1}else if(a==="focus"){if(e.focused)return;e.focused=!0}h&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:c,value:h(d)}})})}_setEventListeners(t,e,a,c){for(const[h,d]of a)(d==="Action"||this.data.actions?.[d])&&((d==="Focus"||d==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,h,d,c),d==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):d==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":Util.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:a}=this.data.defaultAppearanceData,c=this.data.defaultAppearanceData.fontSize||annotation_layer_DEFAULT_FONT_SIZE,h=t.style;let d;const f=2,m=g=>Math.round(10*g)/10;if(this.data.multiLine){const g=Math.abs(this.data.rect[3]-this.data.rect[1]-f),y=Math.round(g/(LINE_FACTOR*c))||1,w=g/y;d=Math.min(c,m(w/LINE_FACTOR))}else{const g=Math.abs(this.data.rect[3]-this.data.rect[1]-f);d=Math.min(c,m(g/LINE_FACTOR))}h.fontSize=`calc(${d}px * var(--total-scale-factor))`,h.color=Util.makeHexColor(a[0],a[1],a[2]),this.data.textAlignment!==null&&(h.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class TextWidgetAnnotationElement extends WidgetAnnotationElement{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,a,c){const h=this.annotationStorage;for(const d of this._getElementsByName(t.name,t.id))d.domElement&&(d.domElement[e]=a),h.setValue(d.id,{[c]:a})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let a=null;if(this.renderForms){const c=t.getValue(e,{value:this.data.fieldValue});let h=c.value||"";const d=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;d&&h.length>d&&(h=h.slice(0,d));let f=c.formattedValue||this.data.textContent?.join(`
`)||null;f&&this.data.comb&&(f=f.replaceAll(/\s+/g,""));const m={userValue:h,formattedValue:f,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(a=document.createElement("textarea"),a.textContent=f??h,this.data.doNotScroll&&(a.style.overflowY="hidden")):(a=document.createElement("input"),a.type=this.data.password?"password":"text",a.setAttribute("value",f??h),this.data.doNotScroll&&(a.style.overflowX="hidden")),this.data.hasOwnCanvas&&(a.hidden=!0),GetElementsByNameSet.add(a),a.setAttribute("data-element-id",e),a.disabled=this.data.readOnly,a.name=this.data.fieldName,a.tabIndex=0;const{datetimeFormat:g,datetimeType:y,timeStep:w}=this.data,E=!!y&&this.enableScripting;g&&(a.title=g),this._setRequired(a,this.data.required),d&&(a.maxLength=d),a.addEventListener("input",C=>{t.setValue(e,{value:C.target.value}),this.setPropertyOnSiblings(a,"value",C.target.value,"value"),m.formattedValue=null}),a.addEventListener("resetform",C=>{const T=this.data.defaultFieldValue??"";a.value=m.userValue=T,m.formattedValue=null});let S=C=>{const{formattedValue:T}=m;T!=null&&(C.target.value=T),C.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){a.addEventListener("focus",T=>{if(m.focused)return;const{target:k}=T;if(E&&(k.type=y,w&&(k.step=w)),m.userValue){const D=m.userValue;if(E)if(y==="time"){const N=new Date(D),L=[N.getHours(),N.getMinutes(),N.getSeconds()];k.value=L.map(j=>j.toString().padStart(2,"0")).join(":")}else k.value=new Date(D-TIMEZONE_OFFSET).toISOString().split(y==="date"?"T":".",1)[0];else k.value=D}m.lastCommittedValue=k.value,m.commitKey=1,this.data.actions?.Focus||(m.focused=!0)}),a.addEventListener("updatefromsandbox",T=>{this.showElementAndHideCanvas(T.target);const k={value(D){m.userValue=D.detail.value??"",E||t.setValue(e,{value:m.userValue.toString()}),D.target.value=m.userValue},formattedValue(D){const{formattedValue:N}=D.detail;m.formattedValue=N,N!=null&&D.target!==document.activeElement&&(D.target.value=N);const L={formattedValue:N};E&&(L.value=N),t.setValue(e,L)},selRange(D){D.target.setSelectionRange(...D.detail.selRange)},charLimit:D=>{const{charLimit:N}=D.detail,{target:L}=D;if(N===0){L.removeAttribute("maxLength");return}L.setAttribute("maxLength",N);let j=m.userValue;!j||j.length<=N||(j=j.slice(0,N),L.value=m.userValue=j,t.setValue(e,{value:j}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:j,willCommit:!0,commitKey:1,selStart:L.selectionStart,selEnd:L.selectionEnd}}))}};this._dispatchEventFromSandbox(k,T)}),a.addEventListener("keydown",T=>{m.commitKey=1;let k=-1;if(T.key==="Escape"?k=0:T.key==="Enter"&&!this.data.multiLine?k=2:T.key==="Tab"&&(m.commitKey=3),k===-1)return;const{value:D}=T.target;m.lastCommittedValue!==D&&(m.lastCommittedValue=D,m.userValue=D,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:D,willCommit:!0,commitKey:k,selStart:T.target.selectionStart,selEnd:T.target.selectionEnd}}))});const C=S;S=null,a.addEventListener("blur",T=>{if(!m.focused||!T.relatedTarget)return;this.data.actions?.Blur||(m.focused=!1);const{target:k}=T;let{value:D}=k;if(E){if(D&&y==="time"){const N=D.split(":").map(L=>parseInt(L,10));D=new Date(2e3,0,1,N[0],N[1],N[2]||0).valueOf(),k.step=""}else D=new Date(D).valueOf();k.type="text"}m.userValue=D,m.lastCommittedValue!==D&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:D,willCommit:!0,commitKey:m.commitKey,selStart:T.target.selectionStart,selEnd:T.target.selectionEnd}}),C(T)}),this.data.actions?.Keystroke&&a.addEventListener("beforeinput",T=>{m.lastCommittedValue=null;const{data:k,target:D}=T,{value:N,selectionStart:L,selectionEnd:j}=D;let F=L,$=j;switch(T.inputType){case"deleteWordBackward":{const G=N.substring(0,L).match(/\w*[^\w]*$/);G&&(F-=G[0].length);break}case"deleteWordForward":{const G=N.substring(L).match(/^[^\w]*\w*/);G&&($+=G[0].length);break}case"deleteContentBackward":L===j&&(F-=1);break;case"deleteContentForward":L===j&&($+=1);break}T.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:N,change:k||"",willCommit:!1,selStart:F,selEnd:$}})}),this._setEventListeners(a,m,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],T=>T.target.value)}if(S&&a.addEventListener("blur",S),this.data.comb){const T=(this.data.rect[2]-this.data.rect[0])/d;a.classList.add("comb"),a.style.letterSpacing=`calc(${T}px * var(--total-scale-factor) - 1ch)`}}else a=document.createElement("div"),a.textContent=this.data.fieldValue,a.style.verticalAlign="middle",a.style.display="table-cell",this.data.hasOwnCanvas&&(a.hidden=!0);return this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class SignatureWidgetAnnotationElement extends WidgetAnnotationElement{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class CheckboxWidgetAnnotationElement extends WidgetAnnotationElement{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,a=e.id;let c=t.getValue(a,{value:e.exportValue===e.fieldValue}).value;typeof c=="string"&&(c=c!=="Off",t.setValue(a,{value:c})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const h=document.createElement("input");return GetElementsByNameSet.add(h),h.setAttribute("data-element-id",a),h.disabled=e.readOnly,this._setRequired(h,this.data.required),h.type="checkbox",h.name=e.fieldName,c&&h.setAttribute("checked",!0),h.setAttribute("exportValue",e.exportValue),h.tabIndex=0,h.addEventListener("change",d=>{const{name:f,checked:m}=d.target;for(const g of this._getElementsByName(f,a)){const y=m&&g.exportValue===e.exportValue;g.domElement&&(g.domElement.checked=y),t.setValue(g.id,{value:y})}t.setValue(a,{value:m})}),h.addEventListener("resetform",d=>{const f=e.defaultFieldValue||"Off";d.target.checked=f===e.exportValue}),this.enableScripting&&this.hasJSActions&&(h.addEventListener("updatefromsandbox",d=>{const f={value(m){m.target.checked=m.detail.value!=="Off",t.setValue(a,{value:m.target.checked})}};this._dispatchEventFromSandbox(f,d)}),this._setEventListeners(h,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],d=>d.target.checked)),this._setBackgroundColor(h),this._setDefaultPropertiesFromJS(h),this.container.append(h),this.container}}class RadioButtonWidgetAnnotationElement extends WidgetAnnotationElement{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,a=e.id;let c=t.getValue(a,{value:e.fieldValue===e.buttonValue}).value;if(typeof c=="string"&&(c=c!==e.buttonValue,t.setValue(a,{value:c})),c)for(const d of this._getElementsByName(e.fieldName,a))t.setValue(d.id,{value:!1});const h=document.createElement("input");if(GetElementsByNameSet.add(h),h.setAttribute("data-element-id",a),h.disabled=e.readOnly,this._setRequired(h,this.data.required),h.type="radio",h.name=e.fieldName,c&&h.setAttribute("checked",!0),h.tabIndex=0,h.addEventListener("change",d=>{const{name:f,checked:m}=d.target;for(const g of this._getElementsByName(f,a))t.setValue(g.id,{value:!1});t.setValue(a,{value:m})}),h.addEventListener("resetform",d=>{const f=e.defaultFieldValue;d.target.checked=f!=null&&f===e.buttonValue}),this.enableScripting&&this.hasJSActions){const d=e.buttonValue;h.addEventListener("updatefromsandbox",f=>{const m={value:g=>{const y=d===g.detail.value;for(const w of this._getElementsByName(g.target.name)){const E=y&&w.id===a;w.domElement&&(w.domElement.checked=E),t.setValue(w.id,{value:E})}}};this._dispatchEventFromSandbox(m,f)}),this._setEventListeners(h,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],f=>f.target.checked)}return this._setBackgroundColor(h),this._setDefaultPropertiesFromJS(h),this.container.append(h),this.container}}class PushButtonWidgetAnnotationElement extends LinkAnnotationElement{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",a=>{this._dispatchEventFromSandbox({},a)})),t}}class ChoiceWidgetAnnotationElement extends WidgetAnnotationElement{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,a=t.getValue(e,{value:this.data.fieldValue}),c=document.createElement("select");GetElementsByNameSet.add(c),c.setAttribute("data-element-id",e),c.disabled=this.data.readOnly,this._setRequired(c,this.data.required),c.name=this.data.fieldName,c.tabIndex=0;let h=this.data.combo&&this.data.options.length>0;this.data.combo||(c.size=this.data.options.length,this.data.multiSelect&&(c.multiple=!0)),c.addEventListener("resetform",y=>{const w=this.data.defaultFieldValue;for(const E of c.options)E.selected=E.value===w});for(const y of this.data.options){const w=document.createElement("option");w.textContent=y.displayValue,w.value=y.exportValue,a.value.includes(y.exportValue)&&(w.setAttribute("selected",!0),h=!1),c.append(w)}let d=null;if(h){const y=document.createElement("option");y.value=" ",y.setAttribute("hidden",!0),y.setAttribute("selected",!0),c.prepend(y),d=()=>{y.remove(),c.removeEventListener("input",d),d=null},c.addEventListener("input",d)}const f=y=>{const w=y?"value":"textContent",{options:E,multiple:S}=c;return S?Array.prototype.filter.call(E,C=>C.selected).map(C=>C[w]):E.selectedIndex===-1?null:E[E.selectedIndex][w]};let m=f(!1);const g=y=>{const w=y.target.options;return Array.prototype.map.call(w,E=>({displayValue:E.textContent,exportValue:E.value}))};return this.enableScripting&&this.hasJSActions?(c.addEventListener("updatefromsandbox",y=>{const w={value(E){d?.();const S=E.detail.value,C=new Set(Array.isArray(S)?S:[S]);for(const T of c.options)T.selected=C.has(T.value);t.setValue(e,{value:f(!0)}),m=f(!1)},multipleSelection(E){c.multiple=!0},remove(E){const S=c.options,C=E.detail.remove;S[C].selected=!1,c.remove(C),S.length>0&&Array.prototype.findIndex.call(S,k=>k.selected)===-1&&(S[0].selected=!0),t.setValue(e,{value:f(!0),items:g(E)}),m=f(!1)},clear(E){for(;c.length!==0;)c.remove(0);t.setValue(e,{value:null,items:[]}),m=f(!1)},insert(E){const{index:S,displayValue:C,exportValue:T}=E.detail.insert,k=c.children[S],D=document.createElement("option");D.textContent=C,D.value=T,k?k.before(D):c.append(D),t.setValue(e,{value:f(!0),items:g(E)}),m=f(!1)},items(E){const{items:S}=E.detail;for(;c.length!==0;)c.remove(0);for(const C of S){const{displayValue:T,exportValue:k}=C,D=document.createElement("option");D.textContent=T,D.value=k,c.append(D)}c.options.length>0&&(c.options[0].selected=!0),t.setValue(e,{value:f(!0),items:g(E)}),m=f(!1)},indices(E){const S=new Set(E.detail.indices);for(const C of E.target.options)C.selected=S.has(C.index);t.setValue(e,{value:f(!0)}),m=f(!1)},editable(E){E.target.disabled=!E.detail.editable}};this._dispatchEventFromSandbox(w,y)}),c.addEventListener("input",y=>{const w=f(!0),E=f(!1);t.setValue(e,{value:w}),y.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:m,change:E,changeEx:w,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(c,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],y=>y.target.value)):c.addEventListener("input",function(y){t.setValue(e,{value:f(!0)})}),this.data.combo&&this._setTextStyle(c),this._setBackgroundColor(c),this._setDefaultPropertiesFromJS(c),this.container.append(c),this.container}}class PopupAnnotationElement extends AnnotationElement{constructor(t){const{data:e,elements:a}=t;super(t,{isRenderable:AnnotationElement._hasPopupData(e)}),this.elements=a,this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=new PopupElement({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),a=[];for(const c of this.elements)c.popup=e,c.container.ariaHasPopup="dialog",a.push(c.data.id),c.addHighlightArea();return this.container.setAttribute("aria-controls",a.map(c=>`${AnnotationPrefix}${c}`).join(",")),this.container}}class PopupElement{#t=this.#k.bind(this);#e=this.#D.bind(this);#n=this.#C.bind(this);#i=this.#_.bind(this);#r=null;#s=null;#a=null;#o=null;#u=null;#c=null;#d=null;#l=!1;#p=null;#g=null;#f=null;#h=null;#m=null;#x=null;#y=null;#b=!1;constructor({container:t,color:e,elements:a,titleObj:c,modificationDate:h,contentsObj:d,richText:f,parent:m,rect:g,parentRect:y,open:w}){this.#s=t,this.#x=c,this.#a=d,this.#m=f,this.#c=m,this.#r=e,this.#h=g,this.#d=y,this.#u=a,this.#o=PDFDateString.toDateObject(h),this.trigger=a.flatMap(E=>E.getElementsToTriggerPopup()),this.#E(),this.#s.hidden=!0,w&&this.#_()}#E(){if(this.#g)return;this.#g=new AbortController;const{signal:t}=this.#g;for(const e of this.trigger)e.addEventListener("click",this.#i,{signal:t}),e.addEventListener("mouseenter",this.#n,{signal:t}),e.addEventListener("mouseleave",this.#e,{signal:t}),e.classList.add("popupTriggerArea");for(const e of this.#u)e.container?.addEventListener("keydown",this.#t,{signal:t})}render(){if(this.#p)return;const t=this.#p=document.createElement("div");if(t.className="popup",this.#r){const c=t.style.outlineColor=Util.makeHexColor(...this.#r);t.style.backgroundColor=`color-mix(in srgb, ${c} 30%, white)`}const e=document.createElement("span");if(e.className="header",this.#x?.str){const c=document.createElement("span");c.className="title",e.append(c),{dir:c.dir,str:c.textContent}=this.#x}if(t.append(e),this.#o){const c=document.createElement("time");c.className="popupDate",c.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),c.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#o.valueOf()})),c.dateTime=this.#o.toISOString(),e.append(c)}const a=this.#v;if(a)XfaLayer.render({xfaHtml:a,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const c=this._formatContents(this.#a);t.append(c)}this.#s.append(t)}get#v(){const t=this.#m,e=this.#a;return t?.str&&(!e?.str||e.str===t.str)&&this.#m.html||null}get#S(){return this.#v?.attributes?.style?.fontSize||0}get#R(){return this.#v?.attributes?.style?.color||null}#A(t){const e=[],a={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},c={style:{color:this.#R,fontSize:this.#S?`calc(${this.#S}px * var(--total-scale-factor))`:""}};for(const h of t.split(`
`))e.push({name:"span",value:h,attributes:c});return a}_formatContents({str:t,dir:e}){const a=document.createElement("p");a.classList.add("popupContent"),a.dir=e;const c=t.split(/(?:\r\n?|\n)/);for(let h=0,d=c.length;h<d;++h){const f=c[h];a.append(document.createTextNode(f)),h<d-1&&a.append(document.createElement("br"))}return a}#k(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#l)&&this.#_()}updateEdited({rect:t,popup:e,deleted:a}){if(a||e?.deleted){this.remove();return}this.#E(),this.#y||={contentsObj:this.#a,richText:this.#m},t&&(this.#f=null),e&&(this.#m=this.#A(e.text),this.#o=PDFDateString.toDateObject(e.date),this.#a=null),this.#p?.remove(),this.#p=null}resetEdited(){this.#y&&({contentsObj:this.#a,richText:this.#m}=this.#y,this.#y=null,this.#p?.remove(),this.#p=null,this.#f=null)}remove(){this.#g?.abort(),this.#g=null,this.#p?.remove(),this.#p=null,this.#b=!1,this.#l=!1;for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#P(){if(this.#f!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:a,pageX:c,pageY:h}}}=this.#c;let d=!!this.#d,f=d?this.#d:this.#h;for(const C of this.#u)if(!f||Util.intersect(C.data.rect,f)!==null){f=C.data.rect,d=!0;break}const m=Util.normalizeRect([f[0],t[3]-f[1]+t[1],f[2],t[3]-f[3]+t[1]]),y=d?f[2]-f[0]+5:0,w=m[0]+y,E=m[1];this.#f=[100*(w-c)/e,100*(E-h)/a];const{style:S}=this.#s;S.left=`${this.#f[0]}%`,S.top=`${this.#f[1]}%`}#_(){this.#l=!this.#l,this.#l?(this.#C(),this.#s.addEventListener("click",this.#i),this.#s.addEventListener("keydown",this.#t)):(this.#D(),this.#s.removeEventListener("click",this.#i),this.#s.removeEventListener("keydown",this.#t))}#C(){this.#p||this.render(),this.isVisible?this.#l&&this.#s.classList.add("focused"):(this.#P(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#D(){this.#s.classList.remove("focused"),!(this.#l||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#b=this.isVisible,this.#b&&(this.#s.hidden=!0)}maybeShow(){this.#E(),this.#b&&(this.#p||this.#C(),this.#b=!1,this.#s.hidden=!1)}get isVisible(){return this.#s.hidden===!1}}class FreeTextAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const a=document.createElement("span");a.textContent=e,t.append(a)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class LineAnnotationElement extends AnnotationElement{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:e,height:a}=this,c=this.svgFactory.create(e,a,!0),h=this.#t=this.svgFactory.createElement("svg:line");return h.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),h.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),h.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),h.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),h.setAttribute("stroke-width",t.borderStyle.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),c.append(h),this.container.append(c),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class SquareAnnotationElement extends AnnotationElement{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:e,height:a}=this,c=this.svgFactory.create(e,a,!0),h=t.borderStyle.width,d=this.#t=this.svgFactory.createElement("svg:rect");return d.setAttribute("x",h/2),d.setAttribute("y",h/2),d.setAttribute("width",e-h),d.setAttribute("height",a-h),d.setAttribute("stroke-width",h||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),c.append(d),this.container.append(c),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class CircleAnnotationElement extends AnnotationElement{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:e,height:a}=this,c=this.svgFactory.create(e,a,!0),h=t.borderStyle.width,d=this.#t=this.svgFactory.createElement("svg:ellipse");return d.setAttribute("cx",e/2),d.setAttribute("cy",a/2),d.setAttribute("rx",e/2-h/2),d.setAttribute("ry",a/2-h/2),d.setAttribute("stroke-width",h||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),c.append(d),this.container.append(c),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class PolylineAnnotationElement extends AnnotationElement{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:a,popupRef:c},width:h,height:d}=this;if(!e)return this.container;const f=this.svgFactory.create(h,d,!0);let m=[];for(let y=0,w=e.length;y<w;y+=2){const E=e[y]-t[0],S=t[3]-e[y+1];m.push(`${E},${S}`)}m=m.join(" ");const g=this.#t=this.svgFactory.createElement(this.svgElementName);return g.setAttribute("points",m),g.setAttribute("stroke-width",a.width||1),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),f.append(g),this.container.append(f),!c&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class PolygonAnnotationElement extends PolylineAnnotationElement{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class CaretAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class InkAnnotationElement extends AnnotationElement{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?AnnotationEditorType.HIGHLIGHT:AnnotationEditorType.INK}#n(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:a,borderStyle:c,popupRef:h}}=this,{transform:d,width:f,height:m}=this.#n(e,t),g=this.svgFactory.create(f,m,!0),y=this.#t=this.svgFactory.createElement("svg:g");g.append(y),y.setAttribute("stroke-width",c.width||1),y.setAttribute("stroke-linecap","round"),y.setAttribute("stroke-linejoin","round"),y.setAttribute("stroke-miterlimit",10),y.setAttribute("stroke","transparent"),y.setAttribute("fill","transparent"),y.setAttribute("transform",d);for(let w=0,E=a.length;w<E;w++){const S=this.svgFactory.createElement(this.svgElementName);this.#e.push(S),S.setAttribute("points",a[w].join(",")),y.append(S)}return!h&&this.hasPopupData&&this._createPopup(),this.container.append(g),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:a,rect:c}=t,h=this.#t;if(e>=0&&h.setAttribute("stroke-width",e||1),a)for(let d=0,f=this.#e.length;d<f;d++)this.#e[d].setAttribute("points",a[d].join(","));if(c){const{transform:d,width:f,height:m}=this.#n(this.data.rotation,c);h.parentElement.setAttribute("viewBox",`0 0 ${f} ${m}`),h.setAttribute("transform",d)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class HighlightAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=AnnotationEditorType.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const a=document.createElement("mark");a.classList.add("overlaidText"),a.textContent=t,this.container.append(a)}return this.container}}class UnderlineAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const a=document.createElement("u");a.classList.add("overlaidText"),a.textContent=t,this.container.append(a)}return this.container}}class SquigglyAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const a=document.createElement("u");a.classList.add("overlaidText"),a.textContent=t,this.container.append(a)}return this.container}}class StrikeOutAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const a=document.createElement("s");a.classList.add("overlaidText"),a.textContent=t,this.container.append(a)}return this.container}}class StampAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=AnnotationEditorType.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class FileAttachmentAnnotationElement extends AnnotationElement{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let a;e.hasAppearance||e.fillAlpha===0?a=document.createElement("div"):(a=document.createElement("img"),a.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(a.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),a.addEventListener("dblclick",this.#e.bind(this)),this.#t=a;const{isMac:c}=util_FeatureTest.platform;return t.addEventListener("keydown",h=>{h.key==="Enter"&&(c?h.metaKey:h.ctrlKey)&&this.#e()}),!e.popupRef&&this.hasPopupData?this._createPopup():a.classList.add("popupTriggerArea"),t.append(a),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}let AnnotationLayer$1=class eu{#t=null;#e=null;#n=new Map;#i=null;constructor({div:t,accessibilityManager:e,annotationCanvasMap:a,annotationEditorUIManager:c,page:h,viewport:d,structTreeLayer:f}){this.div=t,this.#t=e,this.#e=a,this.#i=f||null,this.page=h,this.viewport=d,this.zIndex=0,this._annotationEditorUIManager=c}hasEditableAnnotations(){return this.#n.size>0}async#r(t,e,a){const c=t.firstChild||t,h=c.id=`${AnnotationPrefix}${e}`,d=await this.#i?.getAriaAttributes(h);if(d)for(const[f,m]of d)c.setAttribute(f,m);a?a.at(-1).container.after(t):(this.div.append(t),this.#t?.moveElementInDOM(this.div,t,c,!1))}async render(t){const{annotations:e}=t,a=this.div;setLayerDimensions(a,this.viewport);const c=new Map,h={data:null,layer:a,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new DOMSVGFactory,annotationStorage:t.annotationStorage||new AnnotationStorage,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const d of e){if(d.noHTML)continue;const f=d.annotationType===AnnotationType.POPUP;if(f){const y=c.get(d.id);if(!y)continue;h.elements=y}else if(d.rect[2]===d.rect[0]||d.rect[3]===d.rect[1])continue;h.data=d;const m=AnnotationElementFactory.create(h);if(!m.isRenderable)continue;if(!f&&d.popupRef){const y=c.get(d.popupRef);y?y.push(m):c.set(d.popupRef,[m])}const g=m.render();d.hidden&&(g.style.visibility="hidden"),await this.#r(g,d.id,h.elements),m._isEditable&&(this.#n.set(m.data.id,m),this._annotationEditorUIManager?.renderAnnotationElement(m))}this.#s()}async addLinkAnnotations(t,e){const a={data:null,layer:this.div,linkService:e,svgFactory:new DOMSVGFactory,parent:this};for(const c of t){c.borderStyle||=eu._defaultBorderStyle,a.data=c;const h=AnnotationElementFactory.create(a);if(!h.isRenderable)continue;const d=h.render();await this.#r(d,c.id,null)}}update({viewport:t}){const e=this.div;this.viewport=t,setLayerDimensions(e,{rotation:t.rotation}),this.#s(),e.hidden=!1}#s(){if(!this.#e)return;const t=this.div;for(const[e,a]of this.#e){const c=t.querySelector(`[data-annotation-id="${e}"]`);if(!c)continue;a.className="annotationContent";const{firstChild:h}=c;h?h.nodeName==="CANVAS"?h.replaceWith(a):h.classList.contains("annotationContent")?h.after(a):h.before(a):c.append(a);const d=this.#n.get(e);d&&(d._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(e,c.id,a),d._hasNoCanvas=!1):d.canvas=a)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(t){return this.#n.get(t)}static get _defaultBorderStyle(){return shadow(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:AnnotationBorderStyleType.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};const EOL_PATTERN=/\r\n?|\n/g;class FreeTextEditor extends AnnotationEditor{#t;#e="";#n=`${this.id}-editor`;#i=null;#r;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=FreeTextEditor.prototype,e=h=>h.isEmpty(),a=AnnotationEditorUIManager.TRANSLATE_SMALL,c=AnnotationEditorUIManager.TRANSLATE_BIG;return shadow(this,"_keyboardManager",new KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-a,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-c,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[a,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[c,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-a],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-c],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,a],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,c],checker:e}]]))}static _type="freetext";static _editorType=AnnotationEditorType.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.#t=t.color||FreeTextEditor._defaultColor||AnnotationEditor._defaultLineColor,this.#r=t.fontSize||FreeTextEditor._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(t,e){AnnotationEditor.initialize(t,e);const a=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(a.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case AnnotationEditorParamsType.FREETEXT_SIZE:FreeTextEditor._defaultFontSize=e;break;case AnnotationEditorParamsType.FREETEXT_COLOR:FreeTextEditor._defaultColor=e;break}}updateParams(t,e){switch(t){case AnnotationEditorParamsType.FREETEXT_SIZE:this.#s(e);break;case AnnotationEditorParamsType.FREETEXT_COLOR:this.#a(e);break}}static get defaultPropertiesToUpdate(){return[[AnnotationEditorParamsType.FREETEXT_SIZE,FreeTextEditor._defaultFontSize],[AnnotationEditorParamsType.FREETEXT_COLOR,FreeTextEditor._defaultColor||AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[AnnotationEditorParamsType.FREETEXT_SIZE,this.#r],[AnnotationEditorParamsType.FREETEXT_COLOR,this.#t]]}get toolbarButtons(){return this._colorPicker||=new BasicColorPicker(this),[["colorPicker",this._colorPicker]]}get colorType(){return AnnotationEditorParamsType.FREETEXT_COLOR}get colorValue(){return this.#t}#s(t){const e=c=>{this.editorDiv.style.fontSize=`calc(${c}px * var(--total-scale-factor))`,this.translate(0,-(c-this.#r)*this.parentScale),this.#r=c,this.#u()},a=this.#r;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#a(t){const e=c=>{this.#t=this.editorDiv.style.color=c,this._colorPicker?.update(c)},a=this.#t;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-FreeTextEditor._internalPadding*t,-(FreeTextEditor._internalPadding+this.#r)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const t=this._uiManager.combinedSignal(this.#i);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#n),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#o(){const t=[];this.editorDiv.normalize();let e=null;for(const a of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&a.nodeName==="BR"||(t.push(FreeTextEditor.#c(a)),e=a);return t.join(`
`)}#u(){const[t,e]=this.parentDimensions;let a;if(this.isAttachedToDOM)a=this.div.getBoundingClientRect();else{const{currentLayer:c,div:h}=this,d=h.style.display,f=h.classList.contains("hidden");h.classList.remove("hidden"),h.style.display="hidden",c.div.append(this.div),a=h.getBoundingClientRect(),h.remove(),h.style.display=d,h.classList.toggle("hidden",f)}this.rotation%180===this.parentRotation%180?(this.width=a.width/t,this.height=a.height/e):(this.width=a.height/t,this.height=a.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#e,e=this.#e=this.#o().trimEnd();if(t===e)return;const a=c=>{if(this.#e=c,!c){this.remove();return}this.#d(),this._uiManager.rebuild(this),this.#u()};this.addCommands({cmd:()=>{a(e)},undo:()=>{a(t)},mustExec:!1}),this.#u()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){FreeTextEditor._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#n),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:a}=this.editorDiv;if(a.fontSize=`calc(${this.#r}px * var(--total-scale-factor))`,a.color=this.#t,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[c,h]=this.parentDimensions;if(this.annotationElementId){const{position:d}=this._initialData;let[f,m]=this.getInitialTranslation();[f,m]=this.pageTranslationToScreen(f,m);const[g,y]=this.pageDimensions,[w,E]=this.pageTranslation;let S,C;switch(this.rotation){case 0:S=t+(d[0]-w)/g,C=e+this.height-(d[1]-E)/y;break;case 90:S=t+(d[0]-w)/g,C=e-(d[1]-E)/y,[f,m]=[m,-f];break;case 180:S=t-this.width+(d[0]-w)/g,C=e-(d[1]-E)/y,[f,m]=[-f,-m];break;case 270:S=t+(d[0]-w-this.height*y)/g,C=e+(d[1]-E-this.width*g)/y,[f,m]=[-m,f];break}this.setAt(S*c,C*h,f,m)}else this._moveAfterPaste(t,e);this.#d(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(EOL_PATTERN,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:a}=e;if(a.length===1&&a[0]==="text/plain")return;t.preventDefault();const c=FreeTextEditor.#p(e.getData("text")||"").replaceAll(EOL_PATTERN,`
`);if(!c)return;const h=window.getSelection();if(!h.rangeCount)return;this.editorDiv.normalize(),h.deleteFromDocument();const d=h.getRangeAt(0);if(!c.includes(`
`)){d.insertNode(document.createTextNode(c)),this.editorDiv.normalize(),h.collapseToStart();return}const{startContainer:f,startOffset:m}=d,g=[],y=[];if(f.nodeType===Node.TEXT_NODE){const S=f.parentElement;if(y.push(f.nodeValue.slice(m).replaceAll(EOL_PATTERN,"")),S!==this.editorDiv){let C=g;for(const T of this.editorDiv.childNodes){if(T===S){C=y;continue}C.push(FreeTextEditor.#c(T))}}g.push(f.nodeValue.slice(0,m).replaceAll(EOL_PATTERN,""))}else if(f===this.editorDiv){let S=g,C=0;for(const T of this.editorDiv.childNodes)C++===m&&(S=y),S.push(FreeTextEditor.#c(T))}this.#e=`${g.join(`
`)}${c}${y.join(`
`)}`,this.#d();const w=new Range;let E=Math.sumPrecise(g.map(S=>S.length));for(const{firstChild:S}of this.editorDiv.childNodes)if(S.nodeType===Node.TEXT_NODE){const C=S.nodeValue.length;if(E<=C){w.setStart(S,E),w.setEnd(S,E);break}E-=C}h.removeAllRanges(),h.addRange(w)}#d(){if(this.editorDiv.replaceChildren(),!!this.#e)for(const t of this.#e.split(`
`)){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#l(){return this.#e.replaceAll(""," ")}static#p(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}static async deserialize(t,e,a){let c=null;if(t instanceof FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:d,fontColor:f},rect:m,rotation:g,id:y,popupRef:w,contentsObj:E},textContent:S,textPosition:C,parent:{page:{pageNumber:T}}}=t;if(!S||S.length===0)return null;c=t={annotationType:AnnotationEditorType.FREETEXT,color:Array.from(f),fontSize:d,value:S.join(`
`),position:C,pageIndex:T-1,rect:m.slice(0),rotation:g,annotationElementId:y,id:y,deleted:!1,popupRef:w,comment:E?.str||null}}const h=await super.deserialize(t,e,a);return h.#r=t.fontSize,h.#t=Util.makeHexColor(...t.color),h.#e=FreeTextEditor.#p(t.value),h._initialData=c,t.comment&&h.setCommentData(t.comment),h}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=FreeTextEditor._internalPadding*this.parentScale,a=this.getRect(e,e),c=AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#t),h={annotationType:AnnotationEditorType.FREETEXT,color:c,fontSize:this.#r,value:this.#l(),pageIndex:this.pageIndex,rect:a,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(h),t?(h.isCopy=!0,h):this.annotationElementId&&!this.#g(h)?null:(h.id=this.annotationElementId,h)}#g(t){const{value:e,fontSize:a,color:c,pageIndex:h}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==e||t.fontSize!==a||t.color.some((d,f)=>d!==c[f])||t.pageIndex!==h}renderAnnotationElement(t){const e=super.renderAnnotationElement(t),{style:a}=e;a.fontSize=`calc(${this.#r}px * var(--total-scale-factor))`,a.color=this.#t,e.replaceChildren();for(const d of this.#e.split(`
`)){const f=document.createElement("div");f.append(d?document.createTextNode(d):document.createElement("br")),e.append(f)}const c=FreeTextEditor._internalPadding*this.parentScale,h={rect:this.getRect(c,c)};return h.popup=this.hasEditedComment?this.comment:{text:this.#e},t.updateEdited(h),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class Outline{static PRECISION=1e-4;toSVGPath(){unreachable("Abstract method `toSVGPath` must be implemented.")}get box(){unreachable("Abstract getter `box` must be implemented.")}serialize(t,e){unreachable("Abstract method `serialize` must be implemented.")}static _rescale(t,e,a,c,h,d){d||=new Float32Array(t.length);for(let f=0,m=t.length;f<m;f+=2)d[f]=e+t[f]*c,d[f+1]=a+t[f+1]*h;return d}static _rescaleAndSwap(t,e,a,c,h,d){d||=new Float32Array(t.length);for(let f=0,m=t.length;f<m;f+=2)d[f]=e+t[f+1]*c,d[f+1]=a+t[f]*h;return d}static _translate(t,e,a,c){c||=new Float32Array(t.length);for(let h=0,d=t.length;h<d;h+=2)c[h]=e+t[h],c[h+1]=a+t[h+1];return c}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,a,c,h){switch(h){case 90:return[1-e/a,t/c];case 180:return[1-t/a,1-e/c];case 270:return[e/a,1-t/c];default:return[t/a,e/c]}}static _normalizePagePoint(t,e,a){switch(a){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,a,c,h,d){return[(t+5*a)/6,(e+5*c)/6,(5*a+h)/6,(5*c+d)/6,(a+h)/2,(c+d)/2]}}class FreeDrawOutliner{#t;#e=[];#n;#i;#r=[];#s=new Float32Array(18);#a;#o;#u;#c;#d;#l;#p=[];static#g=8;static#f=2;static#h=FreeDrawOutliner.#g+FreeDrawOutliner.#f;constructor({x:t,y:e},a,c,h,d,f=0){this.#t=a,this.#l=h*c,this.#i=d,this.#s.set([NaN,NaN,NaN,NaN,t,e],6),this.#n=f,this.#c=FreeDrawOutliner.#g*c,this.#u=FreeDrawOutliner.#h*c,this.#d=c,this.#p.push(t,e)}isEmpty(){return isNaN(this.#s[8])}#m(){const t=this.#s.subarray(4,6),e=this.#s.subarray(16,18),[a,c,h,d]=this.#t;return[(this.#a+(t[0]-e[0])/2-a)/h,(this.#o+(t[1]-e[1])/2-c)/d,(this.#a+(e[0]-t[0])/2-a)/h,(this.#o+(e[1]-t[1])/2-c)/d]}add({x:t,y:e}){this.#a=t,this.#o=e;const[a,c,h,d]=this.#t;let[f,m,g,y]=this.#s.subarray(8,12);const w=t-g,E=e-y,S=Math.hypot(w,E);if(S<this.#u)return!1;const C=S-this.#c,T=C/S,k=T*w,D=T*E;let N=f,L=m;f=g,m=y,g+=k,y+=D,this.#p?.push(t,e);const j=-D/C,F=k/C,$=j*this.#l,G=F*this.#l;return this.#s.set(this.#s.subarray(2,8),0),this.#s.set([g+$,y+G],4),this.#s.set(this.#s.subarray(14,18),12),this.#s.set([g-$,y-G],16),isNaN(this.#s[6])?(this.#r.length===0&&(this.#s.set([f+$,m+G],2),this.#r.push(NaN,NaN,NaN,NaN,(f+$-a)/h,(m+G-c)/d),this.#s.set([f-$,m-G],14),this.#e.push(NaN,NaN,NaN,NaN,(f-$-a)/h,(m-G-c)/d)),this.#s.set([N,L,f,m,g,y],6),!this.isEmpty()):(this.#s.set([N,L,f,m,g,y],6),Math.abs(Math.atan2(L-m,N-f)-Math.atan2(D,k))<Math.PI/2?([f,m,g,y]=this.#s.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((f+g)/2-a)/h,((m+y)/2-c)/d),[f,m,N,L]=this.#s.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((N+f)/2-a)/h,((L+m)/2-c)/d),!0):([N,L,f,m,g,y]=this.#s.subarray(0,6),this.#r.push(((N+5*f)/6-a)/h,((L+5*m)/6-c)/d,((5*f+g)/6-a)/h,((5*m+y)/6-c)/d,((f+g)/2-a)/h,((m+y)/2-c)/d),[g,y,f,m,N,L]=this.#s.subarray(12,18),this.#e.push(((N+5*f)/6-a)/h,((L+5*m)/6-c)/d,((5*f+g)/6-a)/h,((5*m+y)/6-c)/d,((f+g)/2-a)/h,((m+y)/2-c)/d),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#r,e=this.#e;if(isNaN(this.#s[6])&&!this.isEmpty())return this.#x();const a=[];a.push(`M${t[4]} ${t[5]}`);for(let c=6;c<t.length;c+=6)isNaN(t[c])?a.push(`L${t[c+4]} ${t[c+5]}`):a.push(`C${t[c]} ${t[c+1]} ${t[c+2]} ${t[c+3]} ${t[c+4]} ${t[c+5]}`);this.#b(a);for(let c=e.length-6;c>=6;c-=6)isNaN(e[c])?a.push(`L${e[c+4]} ${e[c+5]}`):a.push(`C${e[c]} ${e[c+1]} ${e[c+2]} ${e[c+3]} ${e[c+4]} ${e[c+5]}`);return this.#y(a),a.join(" ")}#x(){const[t,e,a,c]=this.#t,[h,d,f,m]=this.#m();return`M${(this.#s[2]-t)/a} ${(this.#s[3]-e)/c} L${(this.#s[4]-t)/a} ${(this.#s[5]-e)/c} L${h} ${d} L${f} ${m} L${(this.#s[16]-t)/a} ${(this.#s[17]-e)/c} L${(this.#s[14]-t)/a} ${(this.#s[15]-e)/c} Z`}#y(t){const e=this.#e;t.push(`L${e[4]} ${e[5]} Z`)}#b(t){const[e,a,c,h]=this.#t,d=this.#s.subarray(4,6),f=this.#s.subarray(16,18),[m,g,y,w]=this.#m();t.push(`L${(d[0]-e)/c} ${(d[1]-a)/h} L${m} ${g} L${y} ${w} L${(f[0]-e)/c} ${(f[1]-a)/h}`)}newFreeDrawOutline(t,e,a,c,h,d){return new FreeDrawOutline(t,e,a,c,h,d)}getOutlines(){const t=this.#r,e=this.#e,a=this.#s,[c,h,d,f]=this.#t,m=new Float32Array((this.#p?.length??0)+2);for(let w=0,E=m.length-2;w<E;w+=2)m[w]=(this.#p[w]-c)/d,m[w+1]=(this.#p[w+1]-h)/f;if(m[m.length-2]=(this.#a-c)/d,m[m.length-1]=(this.#o-h)/f,isNaN(a[6])&&!this.isEmpty())return this.#E(m);const g=new Float32Array(this.#r.length+24+this.#e.length);let y=t.length;for(let w=0;w<y;w+=2){if(isNaN(t[w])){g[w]=g[w+1]=NaN;continue}g[w]=t[w],g[w+1]=t[w+1]}y=this.#S(g,y);for(let w=e.length-6;w>=6;w-=6)for(let E=0;E<6;E+=2){if(isNaN(e[w+E])){g[y]=g[y+1]=NaN,y+=2;continue}g[y]=e[w+E],g[y+1]=e[w+E+1],y+=2}return this.#v(g,y),this.newFreeDrawOutline(g,m,this.#t,this.#d,this.#n,this.#i)}#E(t){const e=this.#s,[a,c,h,d]=this.#t,[f,m,g,y]=this.#m(),w=new Float32Array(36);return w.set([NaN,NaN,NaN,NaN,(e[2]-a)/h,(e[3]-c)/d,NaN,NaN,NaN,NaN,(e[4]-a)/h,(e[5]-c)/d,NaN,NaN,NaN,NaN,f,m,NaN,NaN,NaN,NaN,g,y,NaN,NaN,NaN,NaN,(e[16]-a)/h,(e[17]-c)/d,NaN,NaN,NaN,NaN,(e[14]-a)/h,(e[15]-c)/d],0),this.newFreeDrawOutline(w,t,this.#t,this.#d,this.#n,this.#i)}#v(t,e){const a=this.#e;return t.set([NaN,NaN,NaN,NaN,a[4],a[5]],e),e+=6}#S(t,e){const a=this.#s.subarray(4,6),c=this.#s.subarray(16,18),[h,d,f,m]=this.#t,[g,y,w,E]=this.#m();return t.set([NaN,NaN,NaN,NaN,(a[0]-h)/f,(a[1]-d)/m,NaN,NaN,NaN,NaN,g,y,NaN,NaN,NaN,NaN,w,E,NaN,NaN,NaN,NaN,(c[0]-h)/f,(c[1]-d)/m],e),e+=24}}class FreeDrawOutline extends Outline{#t;#e=new Float32Array(4);#n;#i;#r;#s;#a;constructor(t,e,a,c,h,d){super(),this.#a=t,this.#r=e,this.#t=a,this.#s=c,this.#n=h,this.#i=d,this.lastPoint=[NaN,NaN],this.#o(d);const[f,m,g,y]=this.#e;for(let w=0,E=t.length;w<E;w+=2)t[w]=(t[w]-f)/g,t[w+1]=(t[w+1]-m)/y;for(let w=0,E=e.length;w<E;w+=2)e[w]=(e[w]-f)/g,e[w+1]=(e[w+1]-m)/y}toSVGPath(){const t=[`M${this.#a[4]} ${this.#a[5]}`];for(let e=6,a=this.#a.length;e<a;e+=6){if(isNaN(this.#a[e])){t.push(`L${this.#a[e+4]} ${this.#a[e+5]}`);continue}t.push(`C${this.#a[e]} ${this.#a[e+1]} ${this.#a[e+2]} ${this.#a[e+3]} ${this.#a[e+4]} ${this.#a[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,a,c],h){const d=a-t,f=c-e;let m,g;switch(h){case 0:m=Outline._rescale(this.#a,t,c,d,-f),g=Outline._rescale(this.#r,t,c,d,-f);break;case 90:m=Outline._rescaleAndSwap(this.#a,t,e,d,f),g=Outline._rescaleAndSwap(this.#r,t,e,d,f);break;case 180:m=Outline._rescale(this.#a,a,e,-d,f),g=Outline._rescale(this.#r,a,e,-d,f);break;case 270:m=Outline._rescaleAndSwap(this.#a,a,c,-d,-f),g=Outline._rescaleAndSwap(this.#r,a,c,-d,-f);break}return{outline:Array.from(m),points:[Array.from(g)]}}#o(t){const e=this.#a;let a=e[4],c=e[5];const h=[a,c,a,c];let d=a,f=c;const m=t?Math.max:Math.min;for(let y=6,w=e.length;y<w;y+=6){const E=e[y+4],S=e[y+5];if(isNaN(e[y]))Util.pointBoundingBox(E,S,h),f<S?(d=E,f=S):f===S&&(d=m(d,E));else{const C=[1/0,1/0,-1/0,-1/0];Util.bezierBoundingBox(a,c,...e.slice(y,y+6),C),Util.rectBoundingBox(...C,h),f<C[3]?(d=C[2],f=C[3]):f===C[3]&&(d=m(d,C[2]))}a=E,c=S}const g=this.#e;g[0]=h[0]-this.#n,g[1]=h[1]-this.#n,g[2]=h[2]-h[0]+2*this.#n,g[3]=h[3]-h[1]+2*this.#n,this.lastPoint=[d,f]}get box(){return this.#e}newOutliner(t,e,a,c,h,d=0){return new FreeDrawOutliner(t,e,a,c,h,d)}getNewOutline(t,e){const[a,c,h,d]=this.#e,[f,m,g,y]=this.#t,w=h*g,E=d*y,S=a*g+f,C=c*y+m,T=this.newOutliner({x:this.#r[0]*w+S,y:this.#r[1]*E+C},this.#t,this.#s,t,this.#i,e??this.#n);for(let k=2;k<this.#r.length;k+=2)T.add({x:this.#r[k]*w+S,y:this.#r[k+1]*E+C});return T.getOutlines()}}class HighlightOutliner{#t;#e;#n=[];#i=[];constructor(t,e=0,a=0,c=!0){const h=[1/0,1/0,-1/0,-1/0],d=10**-4;for(const{x:S,y:C,width:T,height:k}of t){const D=Math.floor((S-e)/d)*d,N=Math.ceil((S+T+e)/d)*d,L=Math.floor((C-e)/d)*d,j=Math.ceil((C+k+e)/d)*d,F=[D,L,j,!0],$=[N,L,j,!1];this.#n.push(F,$),Util.rectBoundingBox(D,L,N,j,h)}const f=h[2]-h[0]+2*a,m=h[3]-h[1]+2*a,g=h[0]-a,y=h[1]-a,w=this.#n.at(c?-1:-2),E=[w[0],w[2]];for(const S of this.#n){const[C,T,k]=S;S[0]=(C-g)/f,S[1]=(T-y)/m,S[2]=(k-y)/m}this.#t=new Float32Array([g,y,f,m]),this.#e=E}getOutlines(){this.#n.sort((e,a)=>e[0]-a[0]||e[1]-a[1]||e[2]-a[2]);const t=[];for(const e of this.#n)e[3]?(t.push(...this.#u(e)),this.#a(e)):(this.#o(e),t.push(...this.#u(e)));return this.#r(t)}#r(t){const e=[],a=new Set;for(const d of t){const[f,m,g]=d;e.push([f,m,d],[f,g,d])}e.sort((d,f)=>d[1]-f[1]||d[0]-f[0]);for(let d=0,f=e.length;d<f;d+=2){const m=e[d][2],g=e[d+1][2];m.push(g),g.push(m),a.add(m),a.add(g)}const c=[];let h;for(;a.size>0;){const d=a.values().next().value;let[f,m,g,y,w]=d;a.delete(d);let E=f,S=m;for(h=[f,g],c.push(h);;){let C;if(a.has(y))C=y;else if(a.has(w))C=w;else break;a.delete(C),[f,m,g,y,w]=C,E!==f&&(h.push(E,S,f,S===m?m:g),E=f),S=S===m?g:m}h.push(E,S)}return new HighlightOutline(c,this.#t,this.#e)}#s(t){const e=this.#i;let a=0,c=e.length-1;for(;a<=c;){const h=a+c>>1,d=e[h][0];if(d===t)return h;d<t?a=h+1:c=h-1}return c+1}#a([,t,e]){const a=this.#s(t);this.#i.splice(a,0,[t,e])}#o([,t,e]){const a=this.#s(t);for(let c=a;c<this.#i.length;c++){const[h,d]=this.#i[c];if(h!==t)break;if(h===t&&d===e){this.#i.splice(c,1);return}}for(let c=a-1;c>=0;c--){const[h,d]=this.#i[c];if(h!==t)break;if(h===t&&d===e){this.#i.splice(c,1);return}}}#u(t){const[e,a,c]=t,h=[[e,a,c]],d=this.#s(c);for(let f=0;f<d;f++){const[m,g]=this.#i[f];for(let y=0,w=h.length;y<w;y++){const[,E,S]=h[y];if(!(g<=E||S<=m)){if(E>=m){if(S>g)h[y][1]=g;else{if(w===1)return[];h.splice(y,1),y--,w--}continue}h[y][2]=m,S>g&&h.push([e,g,S])}}}return h}}class HighlightOutline extends Outline{#t;#e;constructor(t,e,a){super(),this.#e=t,this.#t=e,this.lastPoint=a}toSVGPath(){const t=[];for(const e of this.#e){let[a,c]=e;t.push(`M${a} ${c}`);for(let h=2;h<e.length;h+=2){const d=e[h],f=e[h+1];d===a?(t.push(`V${f}`),c=f):f===c&&(t.push(`H${d}`),a=d)}t.push("Z")}return t.join(" ")}serialize([t,e,a,c],h){const d=[],f=a-t,m=c-e;for(const g of this.#e){const y=new Array(g.length);for(let w=0;w<g.length;w+=2)y[w]=t+g[w]*f,y[w+1]=c-g[w+1]*m;d.push(y)}return d}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class FreeHighlightOutliner extends FreeDrawOutliner{newFreeDrawOutline(t,e,a,c,h,d){return new FreeHighlightOutline(t,e,a,c,h,d)}}class FreeHighlightOutline extends FreeDrawOutline{newOutliner(t,e,a,c,h,d=0){return new FreeHighlightOutliner(t,e,a,c,h,d)}}class HighlightEditor extends AnnotationEditor{#t=null;#e=0;#n;#i=null;#r=null;#s=null;#a=null;#o=0;#u=null;#c=null;#d=null;#l=!1;#p=null;#g;#f=null;#h="";#m;#x="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=AnnotationEditorType.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=HighlightEditor.prototype;return shadow(this,"_keyboardManager",new KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||HighlightEditor._defaultColor,this.#m=t.thickness||HighlightEditor._defaultThickness,this.#g=t.opacity||HighlightEditor._defaultOpacity,this.#n=t.boxes||null,this.#x=t.methodOfCreation||"",this.#h=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#l=!0,this.#b(t),this.#A()):this.#n&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#a=t.focusNode,this.#o=t.focusOffset,this.#y(),this.#A(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#l?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#m,methodOfCreation:this.#x}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}get commentColor(){return this.color}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#y(){const t=new HighlightOutliner(this.#n,.001);this.#c=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#c.box;const e=new HighlightOutliner(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#s=e.getOutlines();const{lastPoint:a}=this.#s;this.#p=[(a[0]-this.x)/this.width,(a[1]-this.y)/this.height]}#b({highlightOutlines:t,highlightId:e,clipPathId:a}){this.#c=t;const c=1.5;if(this.#s=t.getNewOutline(this.#m/2+c,.0025),e>=0)this.#d=e,this.#i=a,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#f=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},!0);else if(this.parent){const y=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:HighlightEditor.#k(this.#c.box,(y-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#f,{bbox:HighlightEditor.#k(this.#s.box,y),path:{d:this.#s.toSVGPath()}})}const[h,d,f,m]=t.box;switch(this.rotation){case 0:this.x=h,this.y=d,this.width=f,this.height=m;break;case 90:{const[y,w]=this.parentDimensions;this.x=d,this.y=1-h,this.width=f*w/y,this.height=m*y/w;break}case 180:this.x=1-h,this.y=1-d,this.width=f,this.height=m;break;case 270:{const[y,w]=this.parentDimensions;this.x=1-d,this.y=h,this.width=f*w/y,this.height=m*y/w;break}}const{lastPoint:g}=this.#s;this.#p=[(g[0]-h)/f,(g[1]-d)/m]}static initialize(t,e){AnnotationEditor.initialize(t,e),HighlightEditor._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case AnnotationEditorParamsType.HIGHLIGHT_COLOR:HighlightEditor._defaultColor=e;break;case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:HighlightEditor._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#p}updateParams(t,e){switch(t){case AnnotationEditorParamsType.HIGHLIGHT_COLOR:this.#E(e);break;case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:this.#v(e);break}}static get defaultPropertiesToUpdate(){return[[AnnotationEditorParamsType.HIGHLIGHT_COLOR,HighlightEditor._defaultColor],[AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,HighlightEditor._defaultThickness]]}get propertiesToUpdate(){return[[AnnotationEditorParamsType.HIGHLIGHT_COLOR,this.color||HighlightEditor._defaultColor],[AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,this.#m||HighlightEditor._defaultThickness],[AnnotationEditorParamsType.HIGHLIGHT_FREE,this.#l]]}#E(t){const e=(h,d)=>{this.color=h,this.#g=d,this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:h,"fill-opacity":d}}),this.#r?.updateColor(h)},a=this.color,c=this.#g;this.addCommands({cmd:e.bind(this,t,HighlightEditor._defaultOpacity),undo:e.bind(this,a,c),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#v(t){const e=this.#m,a=c=>{this.#m=c,this.#S(c)};this.addCommands({cmd:a.bind(this,t),undo:a.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#r=new ColorPicker({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#C())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#C())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#R(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#A(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#R():t&&(this.#A(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#S(t){if(!this.#l)return;this.#b({highlightOutlines:this.#c.getNewOutline(t/2)}),this.fixAndSetPosition();const[e,a]=this.parentDimensions;this.setDims(this.width*e,this.height*a)}#R(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#f),this.#f=null)}#A(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#i}=t.drawLayer.draw({bbox:this.#c.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.#g},rootClass:{highlight:!0,free:this.#l},path:{d:this.#c.toSVGPath()}},!1,!0),this.#f=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#l},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},this.#l),this.#u&&(this.#u.style.clipPath=this.#i))}static#k([t,e,a,c],h){switch(h){case 90:return[1-e-c,t,c,a];case 180:return[1-t-a,1-e-c,a,c];case 270:return[e,1-t-a,c,a]}return[t,e,a,c]}rotate(t){const{drawLayer:e}=this.parent;let a;this.#l?(t=(t-this.rotation+360)%360,a=HighlightEditor.#k(this.#c.box,t)):a=HighlightEditor.#k([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#d,{bbox:a,root:{"data-main-rotation":t}}),e.updateProperties(this.#f,{bbox:HighlightEditor.#k(this.#s.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#h&&(t.setAttribute("aria-label",this.#h),t.setAttribute("role","mark")),this.#l?t.classList.add("free"):this.div.addEventListener("keydown",this.#P.bind(this),{signal:this._uiManager._signal});const e=this.#u=document.createElement("div");t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#i;const[a,c]=this.parentDimensions;return this.setDims(this.width*a,this.height*c),bindEvents(this,this.#u,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#f,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#f,{rootClass:{hovered:!1}})}#P(t){HighlightEditor._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#_(!0);break;case 1:case 3:this.#_(!1);break}}#_(t){if(!this.#t)return;const e=window.getSelection();t?e.setPosition(this.#t,this.#e):e.setPosition(this.#a,this.#o)}select(){super.select(),this.#f&&this.parent?.drawLayer.updateProperties(this.#f,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#f&&(this.parent?.drawLayer.updateProperties(this.#f,{rootClass:{selected:!1}}),this.#l||this.#_(!1))}get _mustFixPosition(){return!this.#l}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#f,{rootClass:{hidden:!t}}))}#C(){return this.#l?this.rotation:0}#D(){if(this.#l)return null;const[t,e]=this.pageDimensions,[a,c]=this.pageTranslation,h=this.#n,d=new Float32Array(h.length*8);let f=0;for(const{x:m,y:g,width:y,height:w}of h){const E=m*t+a,S=(1-g)*e+c;d[f]=d[f+4]=E,d[f+1]=d[f+3]=S,d[f+2]=d[f+6]=E+y*t,d[f+5]=d[f+7]=S-w*e,f+=8}return d}#F(t){return this.#c.serialize(t,this.#C())}static startHighlighting(t,e,{target:a,x:c,y:h}){const{x:d,y:f,width:m,height:g}=a.getBoundingClientRect(),y=new AbortController,w=t.combinedSignal(y),E=S=>{y.abort(),this.#z(t,S)};window.addEventListener("blur",E,{signal:w}),window.addEventListener("pointerup",E,{signal:w}),window.addEventListener("pointerdown",stopEvent,{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",noContextMenu,{signal:w}),a.addEventListener("pointermove",this.#L.bind(this,t),{signal:w}),this._freeHighlight=new FreeHighlightOutliner({x:c,y:h},[d,f,m,g],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#L(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#z(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,e,a){let c=null;if(t instanceof HighlightAnnotationElement){const{data:{quadPoints:C,rect:T,rotation:k,id:D,color:N,opacity:L,popupRef:j,contentsObj:F},parent:{page:{pageNumber:$}}}=t;c=t={annotationType:AnnotationEditorType.HIGHLIGHT,color:Array.from(N),opacity:L,quadPoints:C,boxes:null,pageIndex:$-1,rect:T.slice(0),rotation:k,annotationElementId:D,id:D,deleted:!1,popupRef:j,comment:F?.str||null}}else if(t instanceof InkAnnotationElement){const{data:{inkLists:C,rect:T,rotation:k,id:D,color:N,borderStyle:{rawWidth:L},popupRef:j,contentsObj:F},parent:{page:{pageNumber:$}}}=t;c=t={annotationType:AnnotationEditorType.HIGHLIGHT,color:Array.from(N),thickness:L,inkLists:C,boxes:null,pageIndex:$-1,rect:T.slice(0),rotation:k,annotationElementId:D,id:D,deleted:!1,popupRef:j,comment:F?.str||null}}const{color:h,quadPoints:d,inkLists:f,opacity:m}=t,g=await super.deserialize(t,e,a);g.color=Util.makeHexColor(...h),g.#g=m||1,f&&(g.#m=t.thickness),g._initialData=c,t.comment&&g.setCommentData(t.comment);const[y,w]=g.pageDimensions,[E,S]=g.pageTranslation;if(d){const C=g.#n=[];for(let T=0;T<d.length;T+=8)C.push({x:(d[T]-E)/y,y:1-(d[T+1]-S)/w,width:(d[T+2]-d[T])/y,height:(d[T+1]-d[T+5])/w});g.#y(),g.#A(),g.rotate(g.rotation)}else if(f){g.#l=!0;const C=f[0],T={x:C[0]-E,y:w-(C[1]-S)},k=new FreeHighlightOutliner(T,[0,0,y,w],1,g.#m/2,!0,.001);for(let L=0,j=C.length;L<j;L+=2)T.x=C[L]-E,T.y=w-(C[L+1]-S),k.add(T);const{id:D,clipPathId:N}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:g.color,"fill-opacity":g._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:k.toSVGPath()}},!0,!0);g.#b({highlightOutlines:k.getOutlines(),highlightId:D,clipPathId:N}),g.#A(),g.rotate(g.parentRotation)}return g}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=this.getRect(0,0),a=AnnotationEditor._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),c={annotationType:AnnotationEditorType.HIGHLIGHT,color:a,opacity:this.#g,thickness:this.#m,quadPoints:this.#D(),outlines:this.#F(e),pageIndex:this.pageIndex,rect:e,rotation:this.#C(),structTreeParentId:this._structTreeParentId};return this.addComment(c),this.annotationElementId&&!this.#T(c)?null:(c.id=this.annotationElementId,c)}#T(t){const{color:e}=this._initialData;return this.hasEditedComment||t.color.some((a,c)=>a!==e[c])}renderAnnotationElement(t){const e={rect:this.getRect(0,0)};return this.hasEditedComment&&(e.popup=this.comment),t.updateEdited(e),null}static canCreateNewEmptyEditor(){return!1}}class DrawingOptions{#t=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,a]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,a)}updateSVGProperty(t,e){this.#t[t]=e}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){unreachable("Not implemented")}}class DrawingEditor extends AnnotationEditor{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#n=null;static#i=null;static#r=null;static#s=NaN;static#a=null;static#o=null;static#u=NaN;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}_addOutlines(t){t.drawOutlines&&(this.#c(t),this.#p())}#c({drawOutlines:t,drawId:e,drawingOptions:a}){this.#t=t,this._drawingOptions||=a,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),e>=0?(this._drawId=e,this.parent.drawLayer.finalizeDraw(e,t.defaultProperties)):this._drawId=this.#d(t,this.parent),this.#h(t.box)}#d(t,e){const{id:a}=e.drawLayer.draw(DrawingEditor._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return a}static _mergeSVGProperties(t,e){const a=new Set(Object.keys(t));for(const[c,h]of Object.entries(e))a.has(c)?Object.assign(t[c],h):t[c]=h;return t}static getDefaultDrawingOptions(t){unreachable("Not implemented")}static get typesMap(){unreachable("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){const a=this.typesMap.get(t);a&&this._defaultDrawingOptions.updateProperty(a,e),this._currentParent&&(DrawingEditor.#n.updateProperty(a,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const a=this.constructor.typesMap.get(t);a&&this._updateProperty(t,a,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[a,c]of this.typesMap)t.push([a,e[c]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[a,c]of this.constructor.typesMap)t.push([a,e[c]]);return t}_updateProperty(t,e,a){const c=this._drawingOptions,h=c[e],d=f=>{c.updateProperty(e,f);const m=this.#t.updateProperty(e,f);m&&this.#h(m),this.parent?.drawLayer.updateProperties(this._drawId,c.toSVGProperties()),t===this.colorType&&this._colorPicker?.update(f)};this.addCommands({cmd:d.bind(this,a),undo:d.bind(this,h),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,DrawingEditor._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#f()),{bbox:this.#m()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,DrawingEditor._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#f()),{bbox:this.#m()}))}_onTranslating(t,e){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#m()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,DrawingEditor._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#f(),this.parentDimensions),{bbox:this.#m()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#l(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#p(),this.#h(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#l()):t&&(this._uiManager.addShouldRescale(this),this.#p(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}#l(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#p(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#d(this.#t,t)}}#g([t,e,a,c]){const{parentDimensions:[h,d],rotation:f}=this;switch(f){case 90:return[e,1-t,a*(d/h),c*(h/d)];case 180:return[1-t,1-e,a,c];case 270:return[1-e,t,a*(d/h),c*(h/d)];default:return[t,e,a,c]}}#f(){const{x:t,y:e,width:a,height:c,parentDimensions:[h,d],rotation:f}=this;switch(f){case 90:return[1-e,t,a*(h/d),c*(d/h)];case 180:return[1-t,1-e,a,c];case 270:return[e,1-t,a*(h/d),c*(d/h)];default:return[t,e,a,c]}}#h(t){if([this.x,this.y,this.width,this.height]=this.#g(t),this.div){this.fixAndSetPosition();const[e,a]=this.parentDimensions;this.setDims(this.width*e,this.height*a)}this._onResized()}#m(){const{x:t,y:e,width:a,height:c,rotation:h,parentRotation:d,parentDimensions:[f,m]}=this;switch((h*4+d)/90){case 1:return[1-e-c,t,c,a];case 2:return[1-t-a,1-e-c,a,c];case 3:return[e,1-t-a,c,a];case 4:return[t,e-a*(f/m),c*(m/f),a*(f/m)];case 5:return[1-e,t,a*(f/m),c*(m/f)];case 6:return[1-t-c*(m/f),1-e,c*(m/f),a*(f/m)];case 7:return[e-a*(f/m),1-t-c*(m/f),a*(f/m),c*(m/f)];case 8:return[t-a,e-c,a,c];case 9:return[1-e,t-a,c,a];case 10:return[1-t,1-e,a,c];case 11:return[e-c,1-t,c,a];case 12:return[t-c*(m/f),e,c*(m/f),a*(f/m)];case 13:return[1-e-a*(f/m),t-c*(m/f),a*(f/m),c*(m/f)];case 14:return[1-t,1-e-a*(f/m),c*(m/f),a*(f/m)];case 15:return[e,1-t,a*(f/m),c*(m/f)];default:return[t,e,a,c]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,DrawingEditor._mergeSVGProperties({bbox:this.#m()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#h(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,e;this._isCopy&&(t=this.x,e=this.y);const a=super.render();a.classList.add("draw");const c=document.createElement("div");a.append(c),c.setAttribute("aria-hidden","true"),c.className="internal";const[h,d]=this.parentDimensions;return this.setDims(this.width*h,this.height*d),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,e),a}static createDrawerInstance(t,e,a,c,h){unreachable("Not implemented")}static startDrawing(t,e,a,c){const{target:h,offsetX:d,offsetY:f,pointerId:m,pointerType:g}=c;if(DrawingEditor.#a&&DrawingEditor.#a!==g)return;const{viewport:{rotation:y}}=t,{width:w,height:E}=h.getBoundingClientRect(),S=DrawingEditor.#i=new AbortController,C=t.combinedSignal(S);if(DrawingEditor.#s||=m,DrawingEditor.#a??=g,window.addEventListener("pointerup",T=>{DrawingEditor.#s===T.pointerId?this._endDraw(T):DrawingEditor.#o?.delete(T.pointerId)},{signal:C}),window.addEventListener("pointercancel",T=>{DrawingEditor.#s===T.pointerId?this._currentParent.endDrawingSession():DrawingEditor.#o?.delete(T.pointerId)},{signal:C}),window.addEventListener("pointerdown",T=>{DrawingEditor.#a===T.pointerType&&((DrawingEditor.#o||=new Set).add(T.pointerId),DrawingEditor.#n.isCancellable()&&(DrawingEditor.#n.removeLastElement(),DrawingEditor.#n.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:C}),window.addEventListener("contextmenu",noContextMenu,{signal:C}),h.addEventListener("pointermove",this._drawMove.bind(this),{signal:C}),h.addEventListener("touchmove",T=>{T.timeStamp===DrawingEditor.#u&&stopEvent(T)},{signal:C}),t.toggleDrawing(),e._editorUndoBar?.hide(),DrawingEditor.#n){t.drawLayer.updateProperties(this._currentDrawId,DrawingEditor.#n.startNew(d,f,w,E,y));return}e.updateUIForDefaultProperties(this),DrawingEditor.#n=this.createDrawerInstance(d,f,w,E,y),DrawingEditor.#r=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(DrawingEditor.#r.toSVGProperties(),DrawingEditor.#n.defaultSVGProperties),!0,!1)}static _drawMove(t){if(DrawingEditor.#u=-1,!DrawingEditor.#n)return;const{offsetX:e,offsetY:a,pointerId:c}=t;if(DrawingEditor.#s===c){if(DrawingEditor.#o?.size>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,DrawingEditor.#n.add(e,a)),DrawingEditor.#u=t.timeStamp,stopEvent(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,DrawingEditor.#n=null,DrawingEditor.#r=null,DrawingEditor.#a=null,DrawingEditor.#u=NaN),DrawingEditor.#i&&(DrawingEditor.#i.abort(),DrawingEditor.#i=null,DrawingEditor.#s=NaN,DrawingEditor.#o=null)}static _endDraw(t){const e=this._currentParent;if(e){if(e.toggleDrawing(!0),this._cleanup(!1),t?.target===e.div&&e.drawLayer.updateProperties(this._currentDrawId,DrawingEditor.#n.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const a=DrawingEditor.#n,c=this._currentDrawId,h=a.getLastElement();e.addCommands({cmd:()=>{e.drawLayer.updateProperties(c,a.setLastElement(h))},undo:()=>{e.drawLayer.updateProperties(c,a.removeLastElement())},mustExec:!1,type:AnnotationEditorParamsType.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(AnnotationEditorParamsType.DRAW_STEP),!DrawingEditor.#n.isEmpty()){const{pageDimensions:[a,c],scale:h}=e,d=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:DrawingEditor.#n.getOutlines(a*h,c*h,h,this._INNER_MARGIN),drawingOptions:DrawingEditor.#r,mustBeCommitted:!t});return this._cleanup(!0),d}return e.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,a,c,h,d){unreachable("Not implemented")}static async deserialize(t,e,a){const{rawDims:{pageWidth:c,pageHeight:h,pageX:d,pageY:f}}=e.viewport,m=this.deserializeDraw(d,f,c,h,this._INNER_MARGIN,t),g=await super.deserialize(t,e,a);return g.createDrawingOptions(t),g.#c({drawOutlines:m}),g.#p(),g.onScaleChanging(),g.rotate(),g}serializeDraw(t){const[e,a]=this.pageTranslation,[c,h]=this.pageDimensions;return this.#t.serialize([e,a,c,h],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class InkDrawOutliner{#t=new Float64Array(6);#e;#n;#i;#r;#s;#a="";#o=0;#u=new InkDrawOutline;#c;#d;constructor(t,e,a,c,h,d){this.#c=a,this.#d=c,this.#i=h,this.#r=d,[t,e]=this.#l(t,e);const f=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#s=[t,e],this.#n=[{line:f,points:this.#s}],this.#t.set(f,0)}updateProperty(t,e){t==="stroke-width"&&(this.#r=e)}#l(t,e){return Outline._normalizePoint(t,e,this.#c,this.#d,this.#i)}isEmpty(){return!this.#n||this.#n.length===0}isCancellable(){return this.#s.length<=10}add(t,e){[t,e]=this.#l(t,e);const[a,c,h,d]=this.#t.subarray(2,6),f=t-h,m=e-d;return Math.hypot(this.#c*f,this.#d*m)<=2?null:(this.#s.push(t,e),isNaN(a)?(this.#t.set([h,d,t,e],2),this.#e.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([a,c,h,d,t,e],0),this.#e.push(...Outline.createBezierPoints(a,c,h,d,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const a=this.add(t,e);return a||(this.#s.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,a,c,h){this.#c=a,this.#d=c,this.#i=h,[t,e]=this.#l(t,e);const d=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#s=[t,e];const f=this.#n.at(-1);return f&&(f.line=new Float32Array(f.line),f.points=new Float32Array(f.points)),this.#n.push({line:d,points:this.#s}),this.#t.set(d,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#n.at(-1)}setLastElement(t){return this.#n?(this.#n.push(t),this.#e=t.line,this.#s=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#u.setLastElement(t)}removeLastElement(){if(!this.#n)return this.#u.removeLastElement();this.#n.pop(),this.#a="";for(let t=0,e=this.#n.length;t<e;t++){const{line:a,points:c}=this.#n[t];this.#e=a,this.#s=c,this.#o=0,this.toSVGPath()}return{path:{d:this.#a}}}toSVGPath(){const t=Outline.svgRound(this.#e[4]),e=Outline.svgRound(this.#e[5]);if(this.#s.length===2)return this.#a=`${this.#a} M ${t} ${e} Z`,this.#a;if(this.#s.length<=6){const c=this.#a.lastIndexOf("M");this.#a=`${this.#a.slice(0,c)} M ${t} ${e}`,this.#o=6}if(this.#s.length===4){const c=Outline.svgRound(this.#e[10]),h=Outline.svgRound(this.#e[11]);return this.#a=`${this.#a} L ${c} ${h}`,this.#o=12,this.#a}const a=[];this.#o===0&&(a.push(`M ${t} ${e}`),this.#o=6);for(let c=this.#o,h=this.#e.length;c<h;c+=6){const[d,f,m,g,y,w]=this.#e.slice(c,c+6).map(Outline.svgRound);a.push(`C${d} ${f} ${m} ${g} ${y} ${w}`)}return this.#a+=a.join(" "),this.#o=this.#e.length,this.#a}getOutlines(t,e,a,c){const h=this.#n.at(-1);return h.line=new Float32Array(h.line),h.points=new Float32Array(h.points),this.#u.build(this.#n,t,e,a,this.#i,this.#r,c),this.#t=null,this.#e=null,this.#n=null,this.#a=null,this.#u}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class InkDrawOutline extends Outline{#t;#e=0;#n;#i;#r;#s;#a;#o;#u;build(t,e,a,c,h,d,f){this.#r=e,this.#s=a,this.#a=c,this.#o=h,this.#u=d,this.#n=f??0,this.#i=t,this.#l()}get thickness(){return this.#u}setLastElement(t){return this.#i.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#i.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of this.#i){if(t.push(`M${Outline.svgRound(e[4])} ${Outline.svgRound(e[5])}`),e.length===6){t.push("Z");continue}if(e.length===12&&isNaN(e[6])){t.push(`L${Outline.svgRound(e[10])} ${Outline.svgRound(e[11])}`);continue}for(let a=6,c=e.length;a<c;a+=6){const[h,d,f,m,g,y]=e.subarray(a,a+6).map(Outline.svgRound);t.push(`C${h} ${d} ${f} ${m} ${g} ${y}`)}}return t.join("")}serialize([t,e,a,c],h){const d=[],f=[],[m,g,y,w]=this.#d();let E,S,C,T,k,D,N,L,j;switch(this.#o){case 0:j=Outline._rescale,E=t,S=e+c,C=a,T=-c,k=t+m*a,D=e+(1-g-w)*c,N=t+(m+y)*a,L=e+(1-g)*c;break;case 90:j=Outline._rescaleAndSwap,E=t,S=e,C=a,T=c,k=t+g*a,D=e+m*c,N=t+(g+w)*a,L=e+(m+y)*c;break;case 180:j=Outline._rescale,E=t+a,S=e,C=-a,T=c,k=t+(1-m-y)*a,D=e+g*c,N=t+(1-m)*a,L=e+(g+w)*c;break;case 270:j=Outline._rescaleAndSwap,E=t+a,S=e+c,C=-a,T=-c,k=t+(1-g-w)*a,D=e+(1-m-y)*c,N=t+(1-g)*a,L=e+(1-m)*c;break}for(const{line:F,points:$}of this.#i)d.push(j(F,E,S,C,T,h?new Array(F.length):null)),f.push(j($,E,S,C,T,h?new Array($.length):null));return{lines:d,points:f,rect:[k,D,N,L]}}static deserialize(t,e,a,c,h,{paths:{lines:d,points:f},rotation:m,thickness:g}){const y=[];let w,E,S,C,T;switch(m){case 0:T=Outline._rescale,w=-t/a,E=e/c+1,S=1/a,C=-1/c;break;case 90:T=Outline._rescaleAndSwap,w=-e/c,E=-t/a,S=1/c,C=1/a;break;case 180:T=Outline._rescale,w=t/a+1,E=-e/c,S=-1/a,C=1/c;break;case 270:T=Outline._rescaleAndSwap,w=e/c+1,E=t/a+1,S=-1/c,C=-1/a;break}if(!d){d=[];for(const D of f){const N=D.length;if(N===2){d.push(new Float32Array([NaN,NaN,NaN,NaN,D[0],D[1]]));continue}if(N===4){d.push(new Float32Array([NaN,NaN,NaN,NaN,D[0],D[1],NaN,NaN,NaN,NaN,D[2],D[3]]));continue}const L=new Float32Array(3*(N-2));d.push(L);let[j,F,$,G]=D.subarray(0,4);L.set([NaN,NaN,NaN,NaN,j,F],0);for(let nt=4;nt<N;nt+=2){const ot=D[nt],ct=D[nt+1];L.set(Outline.createBezierPoints(j,F,$,G,ot,ct),(nt-2)*3),[j,F,$,G]=[$,G,ot,ct]}}}for(let D=0,N=d.length;D<N;D++)y.push({line:T(d[D].map(L=>L??NaN),w,E,S,C),points:T(f[D].map(L=>L??NaN),w,E,S,C)});const k=new this.prototype.constructor;return k.build(y,a,c,1,m,g,h),k}#c(t=this.#u){const e=this.#n+t/2*this.#a;return this.#o%180===0?[e/this.#r,e/this.#s]:[e/this.#s,e/this.#r]}#d(){const[t,e,a,c]=this.#t,[h,d]=this.#c(0);return[t+h,e+d,a-2*h,c-2*d]}#l(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:c}of this.#i){if(c.length<=12){for(let f=4,m=c.length;f<m;f+=6)Util.pointBoundingBox(c[f],c[f+1],t);continue}let h=c[4],d=c[5];for(let f=6,m=c.length;f<m;f+=6){const[g,y,w,E,S,C]=c.subarray(f,f+6);Util.bezierBoundingBox(h,d,g,y,w,E,S,C,t),h=S,d=C}}const[e,a]=this.#c();t[0]=MathClamp(t[0]-e,0,1),t[1]=MathClamp(t[1]-a,0,1),t[2]=MathClamp(t[2]+e,0,1),t[3]=MathClamp(t[3]+a,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,e){return t==="stroke-width"?this.#p(e):null}#p(t){const[e,a]=this.#c();this.#u=t;const[c,h]=this.#c(),[d,f]=[c-e,h-a],m=this.#t;return m[0]-=d,m[1]-=f,m[2]+=2*d,m[3]+=2*f,m}updateParentDimensions([t,e],a){const[c,h]=this.#c();this.#r=t,this.#s=e,this.#a=a;const[d,f]=this.#c(),m=d-c,g=f-h,y=this.#t;return y[0]-=m,y[1]-=g,y[2]+=2*m,y[3]+=2*g,y}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(Outline.svgRound).join(" ")}get defaultProperties(){const[t,e]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Outline.svgRound(t)} ${Outline.svgRound(e)}`}}}get rotationTransform(){const[,,t,e]=this.#t;let a=0,c=0,h=0,d=0,f=0,m=0;switch(this.#e){case 90:c=e/t,h=-t/e,f=t;break;case 180:a=-1,d=-1,f=t,m=e;break;case 270:c=-e/t,h=t/e,m=e;break;default:return""}return`matrix(${a} ${c} ${h} ${d} ${Outline.svgRound(f)} ${Outline.svgRound(m)})`}getPathResizingSVGProperties([t,e,a,c]){const[h,d]=this.#c(),[f,m,g,y]=this.#t;if(Math.abs(g-h)<=Outline.PRECISION||Math.abs(y-d)<=Outline.PRECISION){const T=t+a/2-(f+g/2),k=e+c/2-(m+y/2);return{path:{"transform-origin":`${Outline.svgRound(t)} ${Outline.svgRound(e)}`,transform:`${this.rotationTransform} translate(${T} ${k})`}}}const w=(a-2*h)/(g-2*h),E=(c-2*d)/(y-2*d),S=g/a,C=y/c;return{path:{"transform-origin":`${Outline.svgRound(f)} ${Outline.svgRound(m)}`,transform:`${this.rotationTransform} scale(${S} ${C}) translate(${Outline.svgRound(h)} ${Outline.svgRound(d)}) scale(${w} ${E}) translate(${Outline.svgRound(-h)} ${Outline.svgRound(-d)})`}}}getPathResizedSVGProperties([t,e,a,c]){const[h,d]=this.#c(),f=this.#t,[m,g,y,w]=f;if(f[0]=t,f[1]=e,f[2]=a,f[3]=c,Math.abs(y-h)<=Outline.PRECISION||Math.abs(w-d)<=Outline.PRECISION){const k=t+a/2-(m+y/2),D=e+c/2-(g+w/2);for(const{line:N,points:L}of this.#i)Outline._translate(N,k,D,N),Outline._translate(L,k,D,L);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Outline.svgRound(t)} ${Outline.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const E=(a-2*h)/(y-2*h),S=(c-2*d)/(w-2*d),C=-E*(m+h)+t+h,T=-S*(g+d)+e+d;if(E!==1||S!==1||C!==0||T!==0)for(const{line:k,points:D}of this.#i)Outline._rescale(k,C,T,E,S,k),Outline._rescale(D,C,T,E,S,D);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Outline.svgRound(t)} ${Outline.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],a){const[c,h]=a,d=this.#t,f=t-d[0],m=e-d[1];if(this.#r===c&&this.#s===h)for(const{line:g,points:y}of this.#i)Outline._translate(g,f,m,g),Outline._translate(y,f,m,y);else{const g=this.#r/c,y=this.#s/h;this.#r=c,this.#s=h;for(const{line:w,points:E}of this.#i)Outline._rescale(w,f,m,g,y,w),Outline._rescale(E,f,m,g,y,E);d[2]*=g,d[3]*=y}return d[0]=t,d[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Outline.svgRound(t)} ${Outline.svgRound(e)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Outline.svgRound(t[0])} ${Outline.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class InkDrawingOptions extends DrawingOptions{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:AnnotationEditor._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??=this["stroke-width"],e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new InkDrawingOptions(this._viewParameters);return t.updateAll(this),t}}class InkEditor extends DrawingEditor{static _type="ink";static _editorType=AnnotationEditorType.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){AnnotationEditor.initialize(t,e),this._defaultDrawingOptions=new InkDrawingOptions(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return shadow(this,"typesMap",new Map([[AnnotationEditorParamsType.INK_THICKNESS,"stroke-width"],[AnnotationEditorParamsType.INK_COLOR,"stroke"],[AnnotationEditorParamsType.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,a,c,h){return new InkDrawOutliner(t,e,a,c,h,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,a,c,h,d){return InkDrawOutline.deserialize(t,e,a,c,h,d)}static async deserialize(t,e,a){let c=null;if(t instanceof InkAnnotationElement){const{data:{inkLists:d,rect:f,rotation:m,id:g,color:y,opacity:w,borderStyle:{rawWidth:E},popupRef:S,contentsObj:C},parent:{page:{pageNumber:T}}}=t;c=t={annotationType:AnnotationEditorType.INK,color:Array.from(y),thickness:E,opacity:w,paths:{points:d},boxes:null,pageIndex:T-1,rect:f.slice(0),rotation:m,annotationElementId:g,id:g,deleted:!1,popupRef:S,comment:C?.str||null}}const h=await super.deserialize(t,e,a);return h._initialData=c,t.comment&&h.setCommentData(t.comment),h}get toolbarButtons(){return this._colorPicker||=new BasicColorPicker(this),[["colorPicker",this._colorPicker]]}get colorType(){return AnnotationEditorParamsType.INK_COLOR}get colorValue(){return this._drawingOptions.stroke}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:a}=this;e.updateSVGProperty("stroke-width"),a.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:a}){this._drawingOptions=InkEditor.getDefaultDrawingOptions({stroke:Util.makeHexColor(...t),"stroke-width":e,"stroke-opacity":a})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:a,rect:c}=this.serializeDraw(t),{_drawingOptions:{stroke:h,"stroke-opacity":d,"stroke-width":f}}=this,m={annotationType:AnnotationEditorType.INK,color:AnnotationEditor._colorManager.convert(h),opacity:d,thickness:f,paths:{lines:e,points:a},pageIndex:this.pageIndex,rect:c,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(m),t?(m.isCopy=!0,m):this.annotationElementId&&!this.#t(m)?null:(m.id=this.annotationElementId,m)}#t(t){const{color:e,thickness:a,opacity:c,pageIndex:h}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((d,f)=>d!==e[f])||t.thickness!==a||t.opacity!==c||t.pageIndex!==h}renderAnnotationElement(t){const{points:e,rect:a}=this.serializeDraw(!1),c={rect:a,thickness:this._drawingOptions["stroke-width"],points:e};return this.hasEditedComment&&(c.popup=this.comment),t.updateEdited(c),null}}class ContourDrawOutline extends InkDrawOutline{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const BASE_HEADER_LENGTH=8,POINTS_PROPERTIES_NUMBER=3;class SignatureExtractor{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,e,a,c){return a-=t,c-=e,a===0?c>0?0:4:a===1?c+6:2-c}static#n=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#i(t,e,a,c,h,d,f){const m=this.#e(a,c,h,d);for(let g=0;g<8;g++){const y=(-g+m-f+16)%8,w=this.#n[2*y],E=this.#n[2*y+1];if(t[(a+w)*e+(c+E)]!==0)return y}return-1}static#r(t,e,a,c,h,d,f){const m=this.#e(a,c,h,d);for(let g=0;g<8;g++){const y=(g+m+f+16)%8,w=this.#n[2*y],E=this.#n[2*y+1];if(t[(a+w)*e+(c+E)]!==0)return y}return-1}static#s(t,e,a,c){const h=t.length,d=new Int32Array(h);for(let y=0;y<h;y++)d[y]=t[y]<=c?1:0;for(let y=1;y<a-1;y++)d[y*e]=d[y*e+e-1]=0;for(let y=0;y<e;y++)d[y]=d[e*a-1-y]=0;let f=1,m;const g=[];for(let y=1;y<a-1;y++){m=1;for(let w=1;w<e-1;w++){const E=y*e+w,S=d[E];if(S===0)continue;let C=y,T=w;if(S===1&&d[E-1]===0)f+=1,T-=1;else if(S>=1&&d[E+1]===0)f+=1,T+=1,S>1&&(m=S);else{S!==1&&(m=Math.abs(S));continue}const k=[w,y],D=T===w+1,N={isHole:D,points:k,id:f,parent:0};g.push(N);let L;for(const ft of g)if(ft.id===m){L=ft;break}L?L.isHole?N.parent=D?L.parent:m:N.parent=D?m:L.parent:N.parent=D?m:0;const j=this.#i(d,e,y,w,C,T,0);if(j===-1){d[E]=-f,d[E]!==1&&(m=Math.abs(d[E]));continue}let F=this.#n[2*j],$=this.#n[2*j+1];const G=y+F,nt=w+$;C=G,T=nt;let ot=y,ct=w;for(;;){const ft=this.#r(d,e,ot,ct,C,T,1);F=this.#n[2*ft],$=this.#n[2*ft+1];const Tt=ot+F,At=ct+$;k.push(At,Tt);const gt=ot*e+ct;if(d[gt+1]===0?d[gt]=-f:d[gt]===1&&(d[gt]=f),Tt===y&&At===w&&ot===G&&ct===nt){d[E]!==1&&(m=Math.abs(d[E]));break}else C=ot,T=ct,ot=Tt,ct=At}}}return g}static#a(t,e,a,c){if(a-e<=4){for(let G=e;G<a-2;G+=2)c.push(t[G],t[G+1]);return}const h=t[e],d=t[e+1],f=t[a-4]-h,m=t[a-3]-d,g=Math.hypot(f,m),y=f/g,w=m/g,E=y*d-w*h,S=m/f,C=1/g,T=Math.atan(S),k=Math.cos(T),D=Math.sin(T),N=C*(Math.abs(k)+Math.abs(D)),L=C*(1-N+N**2),j=Math.max(Math.atan(Math.abs(D+k)*L),Math.atan(Math.abs(D-k)*L));let F=0,$=e;for(let G=e+2;G<a-2;G+=2){const nt=Math.abs(E-y*t[G+1]+w*t[G]);nt>F&&($=G,F=nt)}F>(g*j)**2?(this.#a(t,e,$+2,c),this.#a(t,$,a,c)):c.push(h,d)}static#o(t){const e=[],a=t.length;return this.#a(t,0,a,e),e.push(t[a-2],t[a-1]),e.length<=4?null:e}static#u(t,e,a,c,h,d){const f=new Float32Array(d**2),m=-2*c**2,g=d>>1;for(let T=0;T<d;T++){const k=(T-g)**2;for(let D=0;D<d;D++)f[T*d+D]=Math.exp((k+(D-g)**2)/m)}const y=new Float32Array(256),w=-2*h**2;for(let T=0;T<256;T++)y[T]=Math.exp(T**2/w);const E=t.length,S=new Uint8Array(E),C=new Uint32Array(256);for(let T=0;T<a;T++)for(let k=0;k<e;k++){const D=T*e+k,N=t[D];let L=0,j=0;for(let $=0;$<d;$++){const G=T+$-g;if(!(G<0||G>=a))for(let nt=0;nt<d;nt++){const ot=k+nt-g;if(ot<0||ot>=e)continue;const ct=t[G*e+ot],ft=f[$*d+nt]*y[Math.abs(ct-N)];L+=ct*ft,j+=ft}}const F=S[D]=Math.round(L/j);C[F]++}return[S,C]}static#c(t){const e=new Uint32Array(256);for(const a of t)e[a]++;return e}static#d(t){const e=t.length,a=new Uint8ClampedArray(e>>2);let c=-1/0,h=1/0;for(let f=0,m=a.length;f<m;f++){const g=a[f]=t[f<<2];c=Math.max(c,g),h=Math.min(h,g)}const d=255/(c-h);for(let f=0,m=a.length;f<m;f++)a[f]=(a[f]-h)*d;return a}static#l(t){let e,a=-1/0,c=-1/0;const h=t.findIndex(m=>m!==0);let d=h,f=h;for(e=h;e<256;e++){const m=t[e];m>a&&(e-d>c&&(c=e-d,f=e-1),a=m,d=e)}for(e=f-1;e>=0&&!(t[e]>t[e+1]);e--);return e}static#p(t){const e=t,{width:a,height:c}=t,{maxDim:h}=this.#t;let d=a,f=c;if(a>h||c>h){let E=a,S=c,C=Math.log2(Math.max(a,c)/h);const T=Math.floor(C);C=C===T?T-1:T;for(let D=0;D<C;D++){d=Math.ceil(E/2),f=Math.ceil(S/2);const N=new OffscreenCanvas(d,f);N.getContext("2d").drawImage(t,0,0,E,S,0,0,d,f),E=d,S=f,t!==e&&t.close(),t=N.transferToImageBitmap()}const k=Math.min(h/d,h/f);d=Math.round(d*k),f=Math.round(f*k)}const g=new OffscreenCanvas(d,f).getContext("2d",{willReadFrequently:!0});g.fillStyle="white",g.fillRect(0,0,d,f),g.filter="grayscale(1)",g.drawImage(t,0,0,t.width,t.height,0,0,d,f);const y=g.getImageData(0,0,d,f).data;return[this.#d(y),d,f]}static extractContoursFromText(t,{fontFamily:e,fontStyle:a,fontWeight:c},h,d,f,m){let g=new OffscreenCanvas(1,1),y=g.getContext("2d",{alpha:!1});const w=200,E=y.font=`${a} ${c} ${w}px ${e}`,{actualBoundingBoxLeft:S,actualBoundingBoxRight:C,actualBoundingBoxAscent:T,actualBoundingBoxDescent:k,fontBoundingBoxAscent:D,fontBoundingBoxDescent:N,width:L}=y.measureText(t),j=1.5,F=Math.ceil(Math.max(Math.abs(S)+Math.abs(C)||0,L)*j),$=Math.ceil(Math.max(Math.abs(T)+Math.abs(k)||w,Math.abs(D)+Math.abs(N)||w)*j);g=new OffscreenCanvas(F,$),y=g.getContext("2d",{alpha:!0,willReadFrequently:!0}),y.font=E,y.filter="grayscale(1)",y.fillStyle="white",y.fillRect(0,0,F,$),y.fillStyle="black",y.fillText(t,F*(j-1)/2,$*(3-j)/2);const G=this.#d(y.getImageData(0,0,F,$).data),nt=this.#c(G),ot=this.#l(nt),ct=this.#s(G,F,$,ot);return this.processDrawnLines({lines:{curves:ct,width:F,height:$},pageWidth:h,pageHeight:d,rotation:f,innerMargin:m,mustSmooth:!0,areContours:!0})}static process(t,e,a,c,h){const[d,f,m]=this.#p(t),[g,y]=this.#u(d,f,m,Math.hypot(f,m)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),w=this.#l(y),E=this.#s(g,f,m,w);return this.processDrawnLines({lines:{curves:E,width:f,height:m},pageWidth:e,pageHeight:a,rotation:c,innerMargin:h,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:a,rotation:c,innerMargin:h,mustSmooth:d,areContours:f}){c%180!==0&&([e,a]=[a,e]);const{curves:m,width:g,height:y}=t,w=t.thickness??0,E=[],S=Math.min(e/g,a/y),C=S/e,T=S/a,k=[];for(const{points:N}of m){const L=d?this.#o(N):N;if(!L)continue;k.push(L);const j=L.length,F=new Float32Array(j),$=new Float32Array(3*(j===2?2:j-2));if(E.push({line:$,points:F}),j===2){F[0]=L[0]*C,F[1]=L[1]*T,$.set([NaN,NaN,NaN,NaN,F[0],F[1]],0);continue}let[G,nt,ot,ct]=L;G*=C,nt*=T,ot*=C,ct*=T,F.set([G,nt,ot,ct],0),$.set([NaN,NaN,NaN,NaN,G,nt],0);for(let ft=4;ft<j;ft+=2){const Tt=F[ft]=L[ft]*C,At=F[ft+1]=L[ft+1]*T;$.set(Outline.createBezierPoints(G,nt,ot,ct,Tt,At),(ft-2)*3),[G,nt,ot,ct]=[ot,ct,Tt,At]}}if(E.length===0)return null;const D=f?new ContourDrawOutline:new InkDrawOutline;return D.build(E,e,a,1,c,f?0:w,h),{outline:D,newCurves:k,areContours:f,thickness:w,width:g,height:y}}static async compressSignature({outlines:t,areContours:e,thickness:a,width:c,height:h}){let d=1/0,f=-1/0,m=0;for(const L of t){m+=L.length;for(let j=2,F=L.length;j<F;j++){const $=L[j]-L[j-2];d=Math.min(d,$),f=Math.max(f,$)}}let g;d>=-128&&f<=127?g=Int8Array:d>=-32768&&f<=32767?g=Int16Array:g=Int32Array;const y=t.length,w=BASE_HEADER_LENGTH+POINTS_PROPERTIES_NUMBER*y,E=new Uint32Array(w);let S=0;E[S++]=w*Uint32Array.BYTES_PER_ELEMENT+(m-2*y)*g.BYTES_PER_ELEMENT,E[S++]=0,E[S++]=c,E[S++]=h,E[S++]=e?0:1,E[S++]=Math.max(0,Math.floor(a??0)),E[S++]=y,E[S++]=g.BYTES_PER_ELEMENT;for(const L of t)E[S++]=L.length-2,E[S++]=L[0],E[S++]=L[1];const C=new CompressionStream("deflate-raw"),T=C.writable.getWriter();await T.ready,T.write(E);const k=g.prototype.constructor;for(const L of t){const j=new k(L.length-2);for(let F=2,$=L.length;F<$;F++)j[F-2]=L[F]-L[F-2];T.write(j)}T.close();const D=await new Response(C.readable).arrayBuffer(),N=new Uint8Array(D);return toBase64Util(N)}static async decompressSignature(t){try{const e=fromBase64Util(t),{readable:a,writable:c}=new DecompressionStream("deflate-raw"),h=c.getWriter();await h.ready,h.write(e).then(async()=>{await h.ready,await h.close()}).catch(()=>{});let d=null,f=0;for await(const L of a)d||=new Uint8Array(new Uint32Array(L.buffer,0,4)[0]),d.set(L,f),f+=L.length;const m=new Uint32Array(d.buffer,0,d.length>>2),g=m[1];if(g!==0)throw new Error(`Invalid version: ${g}`);const y=m[2],w=m[3],E=m[4]===0,S=m[5],C=m[6],T=m[7],k=[],D=(BASE_HEADER_LENGTH+POINTS_PROPERTIES_NUMBER*C)*Uint32Array.BYTES_PER_ELEMENT;let N;switch(T){case Int8Array.BYTES_PER_ELEMENT:N=new Int8Array(d.buffer,D);break;case Int16Array.BYTES_PER_ELEMENT:N=new Int16Array(d.buffer,D);break;case Int32Array.BYTES_PER_ELEMENT:N=new Int32Array(d.buffer,D);break}f=0;for(let L=0;L<C;L++){const j=m[POINTS_PROPERTIES_NUMBER*L+BASE_HEADER_LENGTH],F=new Float32Array(j+2);k.push(F);for(let $=0;$<POINTS_PROPERTIES_NUMBER-1;$++)F[$]=m[POINTS_PROPERTIES_NUMBER*L+BASE_HEADER_LENGTH+$+1];for(let $=0;$<j;$++)F[$+2]=F[$]+N[f++]}return{areContours:E,thickness:S,outlines:k,width:y,height:w}}catch(e){return warn(`decompressSignature: ${e}`),null}}}class SignatureOptions extends DrawingOptions{constructor(){super(),super.updateProperties({fill:AnnotationEditor._defaultLineColor,"stroke-width":0})}clone(){const t=new SignatureOptions;return t.updateAll(this),t}}class DrawnSignatureOptions extends InkDrawingOptions{constructor(t){super(t),super.updateProperties({stroke:AnnotationEditor._defaultLineColor,"stroke-width":1})}clone(){const t=new DrawnSignatureOptions(this._viewParameters);return t.updateAll(this),t}}class SignatureEditor extends DrawingEditor{#t=!1;#e=null;#n=null;#i=null;static _type="signature";static _editorType=AnnotationEditorType.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#n=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){AnnotationEditor.initialize(t,e),this._defaultDrawingOptions=new SignatureOptions,this._defaultDrawnSignatureOptions=new DrawnSignatureOptions(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return shadow(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const e=t.get("hasDescription");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,e;const{_isCopy:a}=this;if(a&&(this._isCopy=!1,t=this.x,e=this.y),super.render(),this._drawId===null)if(this.#n){const{lines:c,mustSmooth:h,areContours:d,description:f,uuid:m,heightInPage:g}=this.#n,{rawDims:{pageWidth:y,pageHeight:w},rotation:E}=this.parent.viewport,S=SignatureExtractor.processDrawnLines({lines:c,pageWidth:y,pageHeight:w,rotation:E,innerMargin:SignatureEditor._INNER_MARGIN,mustSmooth:h,areContours:d});this.addSignature(S,g,f,m)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return a&&(this._isCopy=!0,this._moveAfterPaste(t,e)),this.div}setUuid(t){this.#i=t,this.addEditToolbar()}getUuid(){return this.#i}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(e=>{e?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:e,thickness:a,width:c,height:h}=this.#n,d=Math.max(c,h),f=SignatureExtractor.processDrawnLines({lines:{curves:t.map(m=>({points:m})),thickness:a,width:c,height:h},pageWidth:d,pageHeight:d,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e});return{areContours:e,outline:f.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,e,a,c){const{x:h,y:d}=this,{outline:f}=this.#n=t;this.#t=f instanceof ContourDrawOutline,this.description=a;let m;this.#t?m=SignatureEditor.getDefaultDrawingOptions():(m=SignatureEditor._defaultDrawnSignatureOptions.clone(),m.updateProperties({"stroke-width":f.thickness})),this._addOutlines({drawOutlines:f,drawingOptions:m});const[g,y]=this.parentDimensions,[,w]=this.pageDimensions;let E=e/w;E=E>=1?.5:E,this.width*=E/this.height,this.width>=1&&(E*=.9/this.width,this.width=.9),this.height=E,this.setDims(g*this.width,y*this.height),this.x=h,this.y=d,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(c),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!c,hasDescription:!!a}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:e,pageHeight:a},rotation:c}=this.parent.viewport;return SignatureExtractor.process(t,e,a,c,SignatureEditor._INNER_MARGIN)}getFromText(t,e){const{rawDims:{pageWidth:a,pageHeight:c},rotation:h}=this.parent.viewport;return SignatureExtractor.extractContoursFromText(t,e,a,c,h,SignatureEditor._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:e,pageHeight:a},rotation:c}=this.parent.viewport;return SignatureExtractor.processDrawnLines({lines:t,pageWidth:e,pageHeight:a,rotation:c,innerMargin:SignatureEditor._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:e}){t?this._drawingOptions=SignatureEditor.getDefaultDrawingOptions():(this._drawingOptions=SignatureEditor._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":e}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:e,points:a,rect:c}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":h}}=this,d={annotationType:AnnotationEditorType.SIGNATURE,isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:h,pageIndex:this.pageIndex,rect:c,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(d),t?(d.paths={lines:e,points:a},d.uuid=this.#i,d.isCopy=!0):d.lines=e,this.#e&&(d.accessibilityData={type:"Figure",alt:this.#e}),d}static deserializeDraw(t,e,a,c,h,d){return d.areContours?ContourDrawOutline.deserialize(t,e,a,c,h,d):InkDrawOutline.deserialize(t,e,a,c,h,d)}static async deserialize(t,e,a){const c=await super.deserialize(t,e,a);return c.#t=t.areContours,c.description=t.accessibilityData?.alt||"",c.#i=t.uuid,c}}class StampEditor extends AnnotationEditor{#t=null;#e=null;#n=null;#i=null;#r=null;#s="";#a=null;#o=!1;#u=null;#c=!1;#d=!1;static _type="stamp";static _editorType=AnnotationEditorType.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#i=t.bitmapUrl,this.#r=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){AnnotationEditor.initialize(t,e)}static isHandlingMimeForPasting(t){return SupportedImageMimeTypes.includes(t)}static paste(t,e){e.pasteEditor({mode:AnnotationEditorType.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#l(t,e=!1){if(!t){this.remove();return}this.#t=t.bitmap,e||(this.#e=t.id,this.#c=t.isSvg),t.file&&(this.#s=t.file.name),this.#f()}#p(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#a){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;const{mlManager:a}=this._uiManager;if(!a)throw new Error("No ML.");if(!await a.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:c,width:h,height:d}=t||this.copyCanvas(null,null,!0).imageData,f=await a.guess({name:"altText",request:{data:c,width:h,height:d,channels:c.length/(h*d)}});if(!f)throw new Error("No response from the AI service.");if(f.error)throw new Error("Error from the AI service.");if(f.cancel)return null;if(!f.output)throw new Error("No valid response from the AI service.");const m=f.output;return await this.setGuessedAltText(m),e&&!this.hasAltTextData()&&(this.altTextData={alt:m,decorative:!1}),m}#g(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(a=>this.#l(a,!0)).finally(()=>this.#p());return}if(this.#i){const a=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(a).then(c=>this.#l(c)).finally(()=>this.#p());return}if(this.#r){const a=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(a).then(c=>this.#l(c)).finally(()=>this.#p());return}const t=document.createElement("input");t.type="file",t.accept=SupportedImageMimeTypes.join(",");const e=this._uiManager._signal;this.#n=new Promise(a=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const c=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#l(c)}a()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),a()},{signal:e})}).finally(()=>this.#p()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#a?.remove(),this.#a=null,this.#u&&(clearTimeout(this.#u),this.#u=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#g();return}super.rebuild(),this.div!==null&&(this.#e&&this.#a===null&&this.#g(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#n||this.#t||this.#i||this.#r||this.#e||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#t?this.#f():this.#g()),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){const{id:a,bitmap:c}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),a&&this._uiManager.imageManager.isValidId(a)&&(this.#e=a,c&&(this.#t=c),this.#o=!1,this.#f())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#u!==null&&clearTimeout(this.#u);const t=200;this.#u=setTimeout(()=>{this.#u=null,this.#m()},t)}#f(){const{div:t}=this;let{width:e,height:a}=this.#t;const[c,h]=this.pageDimensions,d=.75;if(this.width)e=this.width*c,a=this.height*h;else if(e>d*c||a>d*h){const y=Math.min(d*c/e,d*h/a);e*=y,a*=y}const[f,m]=this.parentDimensions;this.setDims(e*f/c,a*m/h),this._uiManager.enableWaiting(!1);const g=this.#a=document.createElement("canvas");g.setAttribute("role","img"),this.addContainer(g),this.width=e/c,this.height=a/h,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#m(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#s&&this.div.setAttribute("aria-description",this.#s),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,e,a=!1){t||(t=224);const{width:c,height:h}=this.#t,d=new OutputScale;let f=this.#t,m=c,g=h,y=null;if(e){if(c>e||h>e){const $=Math.min(e/c,e/h);m=Math.floor(c*$),g=Math.floor(h*$)}y=document.createElement("canvas");const E=y.width=Math.ceil(m*d.sx),S=y.height=Math.ceil(g*d.sy);this.#c||(f=this.#h(E,S));const C=y.getContext("2d");C.filter=this._uiManager.hcmFilter;let T="white",k="#cfcfd8";this._uiManager.hcmFilter!=="none"?k="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(T="#8f8f9d",k="#42414d");const D=15,N=D*d.sx,L=D*d.sy,j=new OffscreenCanvas(N*2,L*2),F=j.getContext("2d");F.fillStyle=T,F.fillRect(0,0,N*2,L*2),F.fillStyle=k,F.fillRect(0,0,N,L),F.fillRect(N,L,N,L),C.fillStyle=C.createPattern(j,"repeat"),C.fillRect(0,0,E,S),C.drawImage(f,0,0,f.width,f.height,0,0,E,S)}let w=null;if(a){let E,S;if(d.symmetric&&f.width<t&&f.height<t)E=f.width,S=f.height;else if(f=this.#t,c>t||h>t){const k=Math.min(t/c,t/h);E=Math.floor(c*k),S=Math.floor(h*k),this.#c||(f=this.#h(E,S))}const T=new OffscreenCanvas(E,S).getContext("2d",{willReadFrequently:!0});T.drawImage(f,0,0,f.width,f.height,0,0,E,S),w={width:E,height:S,data:T.getImageData(0,0,E,S).data}}return{canvas:y,width:m,height:g,imageData:w}}#h(t,e){const{width:a,height:c}=this.#t;let h=a,d=c,f=this.#t;for(;h>2*t||d>2*e;){const m=h,g=d;h>2*t&&(h=h>=16384?Math.floor(h/2)-1:Math.ceil(h/2)),d>2*e&&(d=d>=16384?Math.floor(d/2)-1:Math.ceil(d/2));const y=new OffscreenCanvas(h,d);y.getContext("2d").drawImage(f,0,0,m,g,0,0,h,d),f=y.transferToImageBitmap()}return f}#m(){const[t,e]=this.parentDimensions,{width:a,height:c}=this,h=new OutputScale,d=Math.ceil(a*t*h.sx),f=Math.ceil(c*e*h.sy),m=this.#a;if(!m||m.width===d&&m.height===f)return;m.width=d,m.height=f;const g=this.#c?this.#t:this.#h(d,f),y=m.getContext("2d");y.filter=this._uiManager.hcmFilter,y.drawImage(g,0,0,g.width,g.height,0,0,d,f)}#x(t){if(t){if(this.#c){const c=this._uiManager.imageManager.getSvgUrl(this.#e);if(c)return c}const e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#t,e.getContext("2d").drawImage(this.#t,0,0),e.toDataURL()}if(this.#c){const[e,a]=this.pageDimensions,c=Math.round(this.width*e*PixelsPerInch.PDF_TO_CSS_UNITS),h=Math.round(this.height*a*PixelsPerInch.PDF_TO_CSS_UNITS),d=new OffscreenCanvas(c,h);return d.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,c,h),d.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,e,a){let c=null,h=!1;if(t instanceof StampAnnotationElement){const{data:{rect:T,rotation:k,id:D,structParent:N,popupRef:L,contentsObj:j},container:F,parent:{page:{pageNumber:$}},canvas:G}=t;let nt,ot;G?(delete t.canvas,{id:nt,bitmap:ot}=a.imageManager.getFromCanvas(F.id,G),G.remove()):(h=!0,t._hasNoCanvas=!0);const ct=(await e._structTree.getAriaAttributes(`${AnnotationPrefix}${D}`))?.get("aria-label")||"";c=t={annotationType:AnnotationEditorType.STAMP,bitmapId:nt,bitmap:ot,pageIndex:$-1,rect:T.slice(0),rotation:k,annotationElementId:D,id:D,deleted:!1,accessibilityData:{decorative:!1,altText:ct},isSvg:!1,structParent:N,popupRef:L,comment:j?.str||null}}const d=await super.deserialize(t,e,a),{rect:f,bitmap:m,bitmapUrl:g,bitmapId:y,isSvg:w,accessibilityData:E}=t;h?(a.addMissingCanvas(t.id,d),d.#o=!0):y&&a.imageManager.isValidId(y)?(d.#e=y,m&&(d.#t=m)):d.#i=g,d.#c=w;const[S,C]=d.pageDimensions;return d.width=(f[2]-f[0])/S,d.height=(f[3]-f[1])/C,E&&(d.altTextData=E),d._initialData=c,t.comment&&d.setCommentData(t.comment),d.#d=!!c,d}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const a={annotationType:AnnotationEditorType.STAMP,bitmapId:this.#e,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#c,structTreeParentId:this._structTreeParentId};if(this.addComment(a),t)return a.bitmapUrl=this.#x(!0),a.accessibilityData=this.serializeAltText(!0),a.isCopy=!0,a;const{decorative:c,altText:h}=this.serializeAltText(!1);if(!c&&h&&(a.accessibilityData={type:"Figure",alt:h}),this.annotationElementId){const f=this.#y(a);if(f.isSame)return null;f.isSameAltText?delete a.accessibilityData:a.accessibilityData.structParent=this._initialData.structParent??-1}if(a.id=this.annotationElementId,e===null)return a;e.stamps||=new Map;const d=this.#c?(a.rect[2]-a.rect[0])*(a.rect[3]-a.rect[1]):null;if(!e.stamps.has(this.#e))e.stamps.set(this.#e,{area:d,serialized:a}),a.bitmap=this.#x(!1);else if(this.#c){const f=e.stamps.get(this.#e);d>f.area&&(f.area=d,f.serialized.bitmap.close(),f.serialized.bitmap=this.#x(!1))}return a}#y(t){const{pageIndex:e,accessibilityData:{altText:a}}=this._initialData,c=t.pageIndex===e,h=(t.accessibilityData?.alt||"")===a;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&c&&h,isSameAltText:h}}renderAnnotationElement(t){const e={rect:this.getRect(0,0)};return this.hasEditedComment&&(e.popup=this.comment),t.updateEdited(e),null}}class AnnotationEditorLayer{#t;#e=!1;#n=null;#i=null;#r=null;#s=new Map;#a=!1;#o=!1;#u=!1;#c=null;#d=null;#l=null;#p=null;#g=null;#f=-1;#h;static _initialized=!1;static#m=new Map([FreeTextEditor,InkEditor,StampEditor,HighlightEditor,SignatureEditor].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:e,div:a,structTreeLayer:c,accessibilityManager:h,annotationLayer:d,drawLayer:f,textLayer:m,viewport:g,l10n:y}){const w=[...AnnotationEditorLayer.#m.values()];if(!AnnotationEditorLayer._initialized){AnnotationEditorLayer._initialized=!0;for(const E of w)E.initialize(y,t)}t.registerEditorTypes(w),this.#h=t,this.pageIndex=e,this.div=a,this.#t=h,this.#n=d,this.viewport=g,this.#l=m,this.drawLayer=f,this._structTree=c,this.#h.addLayer(this)}get isEmpty(){return this.#s.size===0}get isInvisible(){return this.isEmpty&&this.#h.getMode()===AnnotationEditorType.NONE}updateToolbar(t){this.#h.updateToolbar(t)}updateMode(t=this.#h.getMode()){switch(this.#v(),t){case AnnotationEditorType.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case AnnotationEditorType.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case AnnotationEditorType.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const a of AnnotationEditorLayer.#m.values())e.toggle(`${a._type}Editing`,t===a._editorType);this.div.hidden=!1}hasTextLayer(t){return t===this.#l?.div}setEditingState(t){this.#h.setEditingState(t)}addCommands(t){this.#h.addCommands(t)}cleanUndoStack(t){this.#h.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#n?.div.classList.toggle("disabled",!t)}async enable(){this.#u=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.#g?.abort(),this.#g=null;const t=new Set;for(const a of this.#s.values())a.enableEditing(),a.show(!0),a.annotationElementId&&(this.#h.removeChangedExistingAnnotation(a),t.add(a.annotationElementId));if(!this.#n){this.#u=!1;return}const e=this.#n.getEditableAnnotations();for(const a of e){if(a.hide(),this.#h.isDeletedAnnotationElement(a.data.id)||t.has(a.data.id))continue;const c=await this.deserialize(a);c&&(this.addOrRebuild(c),c.enableEditing())}this.#u=!1}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.#l&&!this.#g){this.#g=new AbortController;const c=this.#h.combinedSignal(this.#g);this.#l.div.addEventListener("pointerdown",h=>{const{clientX:f,clientY:m,timeStamp:g}=h,y=this.#f;if(g-y>500){this.#f=g;return}this.#f=-1;const{classList:w}=this.div;w.toggle("getElements",!0);const E=document.elementsFromPoint(f,m);if(w.toggle("getElements",!1),!this.div.contains(E[0]))return;let S;const C=new RegExp(`^${AnnotationEditorPrefix}[0-9]+$`);for(const k of E)if(C.test(k.id)){S=k.id;break}if(!S)return;const T=this.#s.get(S);T?.annotationElementId===null&&(h.stopPropagation(),h.preventDefault(),T.dblclick())},{signal:c,capture:!0})}const t=new Map,e=new Map;for(const c of this.#s.values())if(c.disableEditing(),!!c.annotationElementId){if(c.serialize()!==null){t.set(c.annotationElementId,c);continue}else e.set(c.annotationElementId,c);this.getEditableAnnotation(c.annotationElementId)?.show(),c.remove()}if(this.#n){const c=this.#n.getEditableAnnotations();for(const h of c){const{id:d}=h.data;if(this.#h.isDeletedAnnotationElement(d)){h.updateEdited({deleted:!0});continue}let f=e.get(d);if(f){f.resetAnnotationElement(h),f.show(!1),h.show();continue}f=t.get(d),f&&(this.#h.addChangedExistingAnnotation(f),f.renderAnnotationElement(h)&&f.show(!1)),h.show()}}this.#v(),this.isEmpty&&(this.div.hidden=!0);const{classList:a}=this.div;for(const c of AnnotationEditorLayer.#m.values())a.remove(`${c._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(t){return this.#n?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#h.getActive()!==t&&this.#h.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#l?.div&&!this.#p){this.#p=new AbortController;const t=this.#h.combinedSignal(this.#p);this.#l.div.addEventListener("pointerdown",this.#x.bind(this),{signal:t}),this.#l.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#l?.div&&this.#p&&(this.#p.abort(),this.#p=null,this.#l.div.classList.remove("highlighting"))}#x(t){this.#h.unselectAll();const{target:e}=t;if(e===this.#l.div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&this.#l.div.contains(e)){const{isMac:a}=util_FeatureTest.platform;if(t.button!==0||t.ctrlKey&&a)return;this.#h.showAllEditors("highlight",!0,!0),this.#l.div.classList.add("free"),this.toggleDrawing(),HighlightEditor.startHighlighting(this,this.#h.direction==="ltr",{target:this.#l.div,x:t.x,y:t.y}),this.#l.div.addEventListener("pointerup",()=>{this.#l.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#h._signal}),t.preventDefault()}}enableClick(){if(this.#i)return;this.#i=new AbortController;const t=this.#h.combinedSignal(this.#i);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){this.#i?.abort(),this.#i=null}attach(t){this.#s.set(t.id,t);const{annotationElementId:e}=t;e&&this.#h.isDeletedAnnotationElement(e)&&this.#h.removeDeletedAnnotationElement(t)}detach(t){this.#s.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#h.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#h.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#h.addDeletedAnnotationElement(t.annotationElementId),AnnotationEditor.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#h.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#u),this.#h.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#r&&(t._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#h._signal}),e.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),a=()=>{t.remove()};this.addCommands({cmd:e,undo:a,mustExec:!1})}getNextId(){return this.#h.getId()}get#y(){return AnnotationEditorLayer.#m.get(this.#h.getMode())}combinedSignal(t){return this.#h.combinedSignal(t)}#b(t){const e=this.#y;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#y?.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await this.#h.updateMode(t.mode);const{offsetX:a,offsetY:c}=this.#E(),h=this.getNextId(),d=this.#b({parent:this,id:h,x:a,y:c,uiManager:this.#h,isCentered:!0,...e});d&&this.add(d)}async deserialize(t){return await AnnotationEditorLayer.#m.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#h)||null}createAndAddNewEditor(t,e,a={}){const c=this.getNextId(),h=this.#b({parent:this,id:c,x:t.offsetX,y:t.offsetY,uiManager:this.#h,isCentered:e,...a});return h&&this.add(h),h}#E(){const{x:t,y:e,width:a,height:c}=this.div.getBoundingClientRect(),h=Math.max(0,t),d=Math.max(0,e),f=Math.min(window.innerWidth,t+a),m=Math.min(window.innerHeight,e+c),g=(h+f)/2-t,y=(d+m)/2-e,[w,E]=this.viewport.rotation%180===0?[g,y]:[y,g];return{offsetX:w,offsetY:E}}addNewEditor(t={}){this.createAndAddNewEditor(this.#E(),!0,t)}setSelected(t){this.#h.setSelected(t)}toggleSelected(t){this.#h.toggleSelected(t)}unselect(t){this.#h.unselect(t)}pointerup(t){const{isMac:e}=util_FeatureTest.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!this.#a||(this.#a=!1,this.#y?.isDrawer&&this.#y.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const a=this.#h.getMode();if(a===AnnotationEditorType.STAMP||a===AnnotationEditorType.SIGNATURE){this.#h.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#h.getMode()===AnnotationEditorType.HIGHLIGHT&&this.enableTextSelection(),this.#a){this.#a=!1;return}const{isMac:e}=util_FeatureTest.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(this.#a=!0,this.#y?.isDrawer){this.startDrawingSession(t);return}const a=this.#h.getActive();this.#e=!a||a.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#c){this.#y.startDrawing(this,this.#h,!1,t);return}this.#h.setCurrentDrawingSession(this),this.#c=new AbortController;const e=this.#h.combinedSignal(this.#c);this.div.addEventListener("blur",({relatedTarget:a})=>{a&&!this.div.contains(a)&&(this.#d=null,this.commitOrRemove())},{signal:e}),this.#y.startDrawing(this,this.#h,!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&(this.#d=e);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#c?(this.#h.setCurrentDrawingSession(null),this.#c.abort(),this.#c=null,this.#d=null,this.#y.endDrawing(t)):null}findNewParent(t,e,a){const c=this.#h.findParent(e,a);return c===null||c===this?!1:(c.changeParent(t),!0)}commitOrRemove(){return this.#c?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#c&&this.#y.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#h.getActive()?.parent===this&&(this.#h.commitOrRemove(),this.#h.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const t of this.#s.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#s.clear(),this.#h.removeLayer(this)}#v(){for(const t of this.#s.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,setLayerDimensions(this.div,t);for(const e of this.#h.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){this.#h.commitOrRemove(),this.#v();const e=this.viewport.rotation,a=t.rotation;if(this.viewport=t,setLayerDimensions(this.div,{rotation:a}),e!==a)for(const c of this.#s.values())c.rotate(a)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#h.viewParameters.realScale}}class DrawLayer{#t=null;#e=new Map;#n=new Map;static#i=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const e of this.#e.values())e.remove(),t.append(e);this.#t=t}}static get _svgFactory(){return shadow(this,"_svgFactory",new DOMSVGFactory)}static#r(t,[e,a,c,h]){const{style:d}=t;d.top=`${100*a}%`,d.left=`${100*e}%`,d.width=`${100*c}%`,d.height=`${100*h}%`}#s(){const t=DrawLayer._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#a(t,e){const a=DrawLayer._svgFactory.createElement("clipPath");t.append(a);const c=`clip_${e}`;a.setAttribute("id",c),a.setAttribute("clipPathUnits","objectBoundingBox");const h=DrawLayer._svgFactory.createElement("use");return a.append(h),h.setAttribute("href",`#${e}`),h.classList.add("clip"),c}#o(t,e){for(const[a,c]of Object.entries(e))c===null?t.removeAttribute(a):t.setAttribute(a,c)}draw(t,e=!1,a=!1){const c=DrawLayer.#i++,h=this.#s(),d=DrawLayer._svgFactory.createElement("defs");h.append(d);const f=DrawLayer._svgFactory.createElement("path");d.append(f);const m=`path_p${this.pageIndex}_${c}`;f.setAttribute("id",m),f.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#n.set(c,f);const g=a?this.#a(d,m):null,y=DrawLayer._svgFactory.createElement("use");return h.append(y),y.setAttribute("href",`#${m}`),this.updateProperties(h,t),this.#e.set(c,h),{id:c,clipPathId:`url(#${g})`}}drawOutline(t,e){const a=DrawLayer.#i++,c=this.#s(),h=DrawLayer._svgFactory.createElement("defs");c.append(h);const d=DrawLayer._svgFactory.createElement("path");h.append(d);const f=`path_p${this.pageIndex}_${a}`;d.setAttribute("id",f),d.setAttribute("vector-effect","non-scaling-stroke");let m;if(e){const w=DrawLayer._svgFactory.createElement("mask");h.append(w),m=`mask_p${this.pageIndex}_${a}`,w.setAttribute("id",m),w.setAttribute("maskUnits","objectBoundingBox");const E=DrawLayer._svgFactory.createElement("rect");w.append(E),E.setAttribute("width","1"),E.setAttribute("height","1"),E.setAttribute("fill","white");const S=DrawLayer._svgFactory.createElement("use");w.append(S),S.setAttribute("href",`#${f}`),S.setAttribute("stroke","none"),S.setAttribute("fill","black"),S.setAttribute("fill-rule","nonzero"),S.classList.add("mask")}const g=DrawLayer._svgFactory.createElement("use");c.append(g),g.setAttribute("href",`#${f}`),m&&g.setAttribute("mask",`url(#${m})`);const y=g.cloneNode();return c.append(y),g.classList.add("mainOutline"),y.classList.add("secondaryOutline"),this.updateProperties(c,t),this.#e.set(a,c),a}finalizeDraw(t,e){this.#n.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;const{root:a,bbox:c,rootClass:h,path:d}=e,f=typeof t=="number"?this.#e.get(t):t;if(f){if(a&&this.#o(f,a),c&&DrawLayer.#r(f,c),h){const{classList:m}=f;for(const[g,y]of Object.entries(h))m.toggle(g,y)}if(d){const g=f.firstChild.firstChild;this.#o(g,d)}}}updateParent(t,e){if(e===this)return;const a=this.#e.get(t);a&&(e.#t.append(a),this.#e.delete(t),e.#e.set(t,a))}remove(t){this.#n.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#n.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner};globalThis.pdfjsLib={AbortException,AnnotationEditorLayer,AnnotationEditorParamsType,AnnotationEditorType,AnnotationEditorUIManager,AnnotationLayer:AnnotationLayer$1,AnnotationMode,AnnotationType,build,ColorPicker,createValidAbsoluteUrl,DOMSVGFactory,DrawLayer,FeatureTest:util_FeatureTest,fetchData,getDocument,getFilenameFromUrl,getPdfFilenameFromUrl,getRGB,getUuid,getXfaPageViewport,GlobalWorkerOptions,ImageKind:util_ImageKind,InvalidPDFException,isDataScheme,isPdfFile,isValidExplicitDest,MathClamp,noContextMenu,normalizeUnicode,OPS,OutputScale,PasswordResponses:PasswordResponses$1,PDFDataRangeTransport:PDFDataRangeTransport$1,PDFDateString,PDFWorker,PermissionFlag,PixelsPerInch,RenderingCancelledException,ResponseException,setLayerDimensions,shadow,SignatureExtractor,stopEvent,SupportedImageMimeTypes,TextLayer:TextLayer$1,TouchManager,updateUrlHash,Util,VerbosityLevel,version,XfaLayer};const pdfjs=Object.freeze(Object.defineProperty({__proto__:null,AbortException,AnnotationEditorLayer,AnnotationEditorParamsType,AnnotationEditorType,AnnotationEditorUIManager,AnnotationLayer:AnnotationLayer$1,AnnotationMode,AnnotationType,ColorPicker,DOMSVGFactory,DrawLayer,FeatureTest:util_FeatureTest,GlobalWorkerOptions,ImageKind:util_ImageKind,InvalidPDFException,MathClamp,OPS,OutputScale,PDFDataRangeTransport:PDFDataRangeTransport$1,PDFDateString,PDFWorker,PasswordResponses:PasswordResponses$1,PermissionFlag,PixelsPerInch,RenderingCancelledException,ResponseException,SignatureExtractor,SupportedImageMimeTypes,TextLayer:TextLayer$1,TouchManager,Util,VerbosityLevel,XfaLayer,build,createValidAbsoluteUrl,fetchData,getDocument,getFilenameFromUrl,getPdfFilenameFromUrl,getRGB,getUuid,getXfaPageViewport,isDataScheme,isPdfFile,isValidExplicitDest,noContextMenu,normalizeUnicode,setLayerDimensions,shadow,stopEvent,updateUrlHash,version},Symbol.toStringTag,{value:"Module"}));function r(l){var t,e,a="";if(typeof l=="string"||typeof l=="number")a+=l;else if(typeof l=="object")if(Array.isArray(l)){var c=l.length;for(t=0;t<c;t++)l[t]&&(e=r(l[t]))&&(a&&(a+=" "),a+=e)}else for(e in l)l[e]&&(a&&(a+=" "),a+=e);return a}function clsx(){for(var l,t,e=0,a="",c=arguments.length;e<c;e++)(l=arguments[e])&&(t=r(l))&&(a&&(a+=" "),a+=t);return a}var has=Object.prototype.hasOwnProperty;function find(l,t,e){for(e of l.keys())if(dequal(e,t))return e}function dequal(l,t){var e,a,c;if(l===t)return!0;if(l&&t&&(e=l.constructor)===t.constructor){if(e===Date)return l.getTime()===t.getTime();if(e===RegExp)return l.toString()===t.toString();if(e===Array){if((a=l.length)===t.length)for(;a--&&dequal(l[a],t[a]););return a===-1}if(e===Set){if(l.size!==t.size)return!1;for(a of l)if(c=a,c&&typeof c=="object"&&(c=find(t,c),!c)||!t.has(c))return!1;return!0}if(e===Map){if(l.size!==t.size)return!1;for(a of l)if(c=a[0],c&&typeof c=="object"&&(c=find(t,c),!c)||!dequal(a[1],t.get(c)))return!1;return!0}if(e===ArrayBuffer)l=new Uint8Array(l),t=new Uint8Array(t);else if(e===DataView){if((a=l.byteLength)===t.byteLength)for(;a--&&l.getInt8(a)===t.getInt8(a););return a===-1}if(ArrayBuffer.isView(l)){if((a=l.byteLength)===t.byteLength)for(;a--&&l[a]===t[a];);return a===-1}if(!e||typeof l=="object"){a=0;for(e in l)if(has.call(l,e)&&++a&&!has.call(t,e)||!(e in t)||!dequal(l[e],t[e]))return!1;return Object.keys(t).length===a}}return l!==l&&t!==t}function makeCancellablePromise(l){let t=!1;return{promise:new Promise((a,c)=>{l.then(h=>!t&&a(h)).catch(h=>!t&&c(h))}),cancel(){t=!0}}}const clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],focusEvents=["onFocus","onBlur"],formEvents=["onInput","onInvalid","onReset","onSubmit"],imageEvents=["onLoad","onError"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],uiEvents=["onScroll"],wheelEvents=["onWheel"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],changeEvents=["onChange"],allEvents=[...clipboardEvents,...compositionEvents,...focusEvents,...formEvents,...imageEvents,...keyboardEvents,...mediaEvents,...mouseEvents,...dragEvents,...selectionEvents,...touchEvents,...pointerEvents,...uiEvents,...wheelEvents,...animationEvents,...transitionEvents,...changeEvents,...otherEvents];function makeEventProps(l,t){const e={};for(const a of allEvents){const c=l[a];c&&(t?e[a]=(h=>c(h,t(a))):e[a]=c)}return e}var prefix="Invariant failed";function invariant(l,t){if(!l)throw new Error(prefix)}var warning_1,hasRequiredWarning;function requireWarning(){if(hasRequiredWarning)return warning_1;hasRequiredWarning=1;var l=function(){};return warning_1=l,warning_1}var warningExports=requireWarning();const warning=getDefaultExportFromCjs(warningExports),documentContext=reactExports.createContext(null),DEFAULT_LINK_REL="noopener noreferrer nofollow";class LinkService{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return invariant(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){invariant(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}goToDestination(t){return new Promise(e=>{invariant(this.pdfDocument),invariant(t),typeof t=="string"?this.pdfDocument.getDestination(t).then(e):Array.isArray(t)?e(t):t.then(e)}).then(e=>{invariant(Array.isArray(e));const a=e[0];new Promise(c=>{invariant(this.pdfDocument),a instanceof Object?this.pdfDocument.getPageIndex(a).then(h=>{c(h)}).catch(()=>{invariant(!1)}):typeof a=="number"?c(a):invariant(!1)}).then(c=>{const h=c+1;invariant(this.pdfViewer),invariant(h>=1&&h<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:e,pageIndex:c,pageNumber:h})})})}navigateTo(t){this.goToDestination(t)}goToPage(t){const e=t-1;invariant(this.pdfViewer),invariant(t>=1&&t<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:e,pageNumber:t})}addLinkAttributes(t,e,a){t.href=e,t.rel=this.externalLinkRel||DEFAULT_LINK_REL,t.target=a?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}function Message({children:l,type:t}){return jsxRuntimeExports.jsx("div",{className:`react-pdf__message react-pdf__message--${t}`,children:l})}const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function reducer(l,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return l}}function useResolver(){return reactExports.useReducer(reducer,{value:void 0,error:void 0})}const isBrowser=typeof window<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined(l){return typeof l<"u"}function isProvided(l){return isDefined(l)&&l!==null}function isString(l){return typeof l=="string"}function isArrayBuffer(l){return l instanceof ArrayBuffer}function isBlob(l){return invariant(isBrowser),l instanceof Blob}function isDataURI(l){return isString(l)&&/^data:/.test(l)}function dataURItoByteString(l){invariant(isDataURI(l));const[t="",e=""]=l.split(",");return t.split(";").indexOf("base64")!==-1?atob(e):unescape(e)}function getDevicePixelRatio(){return isBrowser&&window.devicePixelRatio||1}const allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayCORSWarning(){warning(!isLocalFileSystem,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function displayWorkerWarning(){warning(!isLocalFileSystem,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function cancelRunningTask(l){l?.cancel&&l.cancel()}function makePageCallback(l,t){return Object.defineProperty(l,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(l,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(l,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(l,"originalHeight",{get(){return this.view[3]},configurable:!0}),l}function isCancelException(l){return l.name==="RenderingCancelledException"}function loadFromFile(l){return new Promise((t,e)=>{const a=new FileReader;a.onload=()=>{if(!a.result)return e(new Error("Error while reading a file."));t(a.result)},a.onerror=c=>{if(!c.target)return e(new Error("Error while reading a file."));const{error:h}=c.target;if(!h)return e(new Error("Error while reading a file."));switch(h.code){case h.NOT_FOUND_ERR:return e(new Error("Error while reading a file: File not found."));case h.SECURITY_ERR:return e(new Error("Error while reading a file: Security error."));case h.ABORT_ERR:return e(new Error("Error while reading a file: Aborted."));default:return e(new Error("Error while reading a file."))}},a.readAsArrayBuffer(l)})}const{PDFDataRangeTransport}=pdfjs,defaultOnPassword=(l,t)=>{switch(t){case PasswordResponses.NEED_PASSWORD:{const e=prompt("Enter the password to open this PDF file.");l(e);break}case PasswordResponses.INCORRECT_PASSWORD:{const e=prompt("Invalid password. Please try again.");l(e);break}}};function isParameterObject(l){return typeof l=="object"&&l!==null&&("data"in l||"range"in l||"url"in l)}const Document=reactExports.forwardRef(function l({children:t,className:e,error:a="Failed to load PDF file.",externalLinkRel:c,externalLinkTarget:h,file:d,inputRef:f,imageResourcesPath:m,loading:g="Loading PDF",noData:y="No PDF file specified.",onItemClick:w,onLoadError:E,onLoadProgress:S,onLoadSuccess:C,onPassword:T=defaultOnPassword,onSourceError:k,onSourceSuccess:D,options:N,renderMode:L,rotate:j,scale:F,...$},G){const[nt,ot]=useResolver(),{value:ct,error:ft}=nt,[Tt,At]=useResolver(),{value:gt,error:Mt}=Tt,q=reactExports.useRef(new LinkService),z=reactExports.useRef([]),J=reactExports.useRef(void 0),lt=reactExports.useRef(void 0);d&&d!==J.current&&isParameterObject(d)&&(warning(!dequal(d,J.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),J.current=d),N&&N!==lt.current&&(warning(!dequal(N,lt.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),lt.current=N);const at=reactExports.useRef({scrollPageIntoView:Nt=>{const{dest:Vt,pageNumber:Xt,pageIndex:Yt=Xt-1}=Nt;if(w){w({dest:Vt,pageIndex:Yt,pageNumber:Xt});return}const Ge=z.current[Yt];if(Ge){Ge.scrollIntoView();return}warning(!1,`An internal link leading to page ${Xt} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});reactExports.useImperativeHandle(G,()=>({linkService:q,pages:z,viewer:at}),[]);function B(){D&&D()}function st(){ft&&(warning(!1,ft.toString()),k&&k(ft))}function mt(){ot({type:"RESET"})}reactExports.useEffect(mt,[d,ot]);const vt=reactExports.useCallback(async()=>{if(!d)return null;if(typeof d=="string")return isDataURI(d)?{data:dataURItoByteString(d)}:(displayCORSWarning(),{url:d});if(d instanceof PDFDataRangeTransport)return{range:d};if(isArrayBuffer(d))return{data:d};if(isBrowser&&isBlob(d))return{data:await loadFromFile(d)};if(invariant(typeof d=="object"),invariant(isParameterObject(d)),"url"in d&&typeof d.url=="string"){if(isDataURI(d.url)){const{url:Nt,...Vt}=d;return{data:dataURItoByteString(Nt),...Vt}}displayCORSWarning()}return d},[d]);reactExports.useEffect(()=>{const Nt=makeCancellablePromise(vt());return Nt.promise.then(Vt=>{ot({type:"RESOLVE",value:Vt})}).catch(Vt=>{ot({type:"REJECT",error:Vt})}),()=>{cancelRunningTask(Nt)}},[vt,ot]),reactExports.useEffect(()=>{if(!(typeof ct>"u")){if(ct===!1){st();return}B()}},[ct]);function Ct(){gt&&(C&&C(gt),z.current=new Array(gt.numPages),q.current.setDocument(gt))}function _t(){Mt&&(warning(!1,Mt.toString()),E&&E(Mt))}reactExports.useEffect(function(){At({type:"RESET"})},[At,ct]),reactExports.useEffect(function(){if(!ct)return;const Vt=N?{...ct,...N}:ct,Xt=getDocument(Vt);S&&(Xt.onProgress=S),T&&(Xt.onPassword=T);const Yt=Xt,Ge=Yt.promise.then(hn=>{At({type:"RESOLVE",value:hn})}).catch(hn=>{Yt.destroyed||At({type:"REJECT",error:hn})});return()=>{Ge.finally(()=>Yt.destroy())}},[N,At,ct]),reactExports.useEffect(()=>{if(!(typeof gt>"u")){if(gt===!1){_t();return}Ct()}},[gt]),reactExports.useEffect(function(){q.current.setViewer(at.current),q.current.setExternalLinkRel(c),q.current.setExternalLinkTarget(h)},[c,h]);const bt=reactExports.useCallback((Nt,Vt)=>{z.current[Nt]=Vt},[]),Dt=reactExports.useCallback(Nt=>{delete z.current[Nt]},[]),It=reactExports.useMemo(()=>({imageResourcesPath:m,linkService:q.current,onItemClick:w,pdf:gt,registerPage:bt,renderMode:L,rotate:j,scale:F,unregisterPage:Dt}),[m,w,gt,bt,L,j,F,Dt]),Lt=reactExports.useMemo(()=>makeEventProps($,()=>gt),[$,gt]);function pe(){function Nt(Xt){return!!Xt?.pdf}if(!Nt(It))throw new Error("pdf is undefined");const Vt=typeof t=="function"?t(It):t;return jsxRuntimeExports.jsx(documentContext.Provider,{value:It,children:Vt})}function Te(){return d?gt==null?jsxRuntimeExports.jsx(Message,{type:"loading",children:typeof g=="function"?g():g}):gt===!1?jsxRuntimeExports.jsx(Message,{type:"error",children:typeof a=="function"?a():a}):pe():jsxRuntimeExports.jsx(Message,{type:"no-data",children:typeof y=="function"?y():y})}return jsxRuntimeExports.jsx("div",{className:clsx("react-pdf__Document",e),ref:f,...Lt,children:Te()})});function useDocumentContext(){return reactExports.useContext(documentContext)}function mergeRefs(){for(var l=[],t=0;t<arguments.length;t++)l[t]=arguments[t];var e=l.filter(Boolean);if(e.length<=1){var a=e[0];return a||null}return function(h){for(var d=0,f=e;d<f.length;d++){var m=f[d];typeof m=="function"?m(h):m&&(m.current=h)}}}const pageContext=reactExports.createContext(null);function usePageContext(){return reactExports.useContext(pageContext)}function AnnotationLayer(){const l=useDocumentContext(),t=usePageContext();invariant(t);const e={...l,...t},{imageResourcesPath:a,linkService:c,onGetAnnotationsError:h,onGetAnnotationsSuccess:d,onRenderAnnotationLayerError:f,onRenderAnnotationLayerSuccess:m,page:g,pdf:y,renderForms:w,rotate:E,scale:S=1}=e;invariant(y),invariant(g),invariant(c);const[C,T]=useResolver(),{value:k,error:D}=C,N=reactExports.useRef(null);warning(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function L(){k&&d&&d(k)}function j(){D&&(warning(!1,D.toString()),h&&h(D))}reactExports.useEffect(function(){T({type:"RESET"})},[T,g]),reactExports.useEffect(function(){if(!g)return;const ot=makeCancellablePromise(g.getAnnotations()),ct=ot;return ot.promise.then(ft=>{T({type:"RESOLVE",value:ft})}).catch(ft=>{T({type:"REJECT",error:ft})}),()=>{cancelRunningTask(ct)}},[T,g]),reactExports.useEffect(()=>{if(k!==void 0){if(k===!1){j();return}L()}},[k]);function F(){m&&m()}function $(nt){warning(!1,`${nt}`),f&&f(nt)}const G=reactExports.useMemo(()=>g.getViewport({scale:S,rotation:E}),[g,E,S]);return reactExports.useEffect(function(){if(!y||!g||!c||!k)return;const{current:ot}=N;if(!ot)return;const ct=G.clone({dontFlip:!0}),ft={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:ot,l10n:null,page:g,structTreeLayer:null,viewport:ct},Tt={annotations:k,annotationStorage:y.annotationStorage,div:ot,imageResourcesPath:a,linkService:c,page:g,renderForms:w,viewport:ct};ot.innerHTML="";try{new AnnotationLayer$1(ft).render(Tt),F()}catch(At){$(At)}return()=>{}},[k,a,c,g,y,w,G]),jsxRuntimeExports.jsx("div",{className:clsx("react-pdf__Page__annotations","annotationLayer"),ref:N})}const PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},HEADING_PATTERN=/^H(\d+)$/;function isPdfRole(l){return l in PDF_ROLE_TO_HTML_ROLE}function isStructTreeNode(l){return"children"in l}function isStructTreeNodeWithOnlyContentChild(l){return isStructTreeNode(l)?l.children.length===1&&0 in l.children&&"id"in l.children[0]:!1}function getRoleAttributes(l){const t={};if(isStructTreeNode(l)){const{role:e}=l,a=e.match(HEADING_PATTERN);if(a)t.role="heading",t["aria-level"]=Number(a[1]);else if(isPdfRole(e)){const c=PDF_ROLE_TO_HTML_ROLE[e];c&&(t.role=c)}}return t}function getBaseAttributes(l){const t={};if(isStructTreeNode(l)){if(l.alt!==void 0&&(t["aria-label"]=l.alt),l.lang!==void 0&&(t.lang=l.lang),isStructTreeNodeWithOnlyContentChild(l)){const[e]=l.children;if(e){const a=getBaseAttributes(e);return{...t,...a}}}}else"id"in l&&(t["aria-owns"]=l.id);return t}function getAttributes(l){return l?{...getRoleAttributes(l),...getBaseAttributes(l)}:null}function StructTreeItem({className:l,node:t}){const e=reactExports.useMemo(()=>getAttributes(t),[t]),a=reactExports.useMemo(()=>!isStructTreeNode(t)||isStructTreeNodeWithOnlyContentChild(t)?null:t.children.map((c,h)=>jsxRuntimeExports.jsx(StructTreeItem,{node:c},h)),[t]);return jsxRuntimeExports.jsx("span",{className:l,...e,children:a})}function StructTree(){const l=usePageContext();invariant(l);const{onGetStructTreeError:t,onGetStructTreeSuccess:e}=l,[a,c]=useResolver(),{value:h,error:d}=a,{customTextRenderer:f,page:m}=l;function g(){h&&e&&e(h)}function y(){d&&(warning(!1,d.toString()),t&&t(d))}return reactExports.useEffect(function(){c({type:"RESET"})},[c,m]),reactExports.useEffect(function(){if(f||!m)return;const E=makeCancellablePromise(m.getStructTree()),S=E;return E.promise.then(C=>{c({type:"RESOLVE",value:C})}).catch(C=>{c({type:"REJECT",error:C})}),()=>cancelRunningTask(S)},[f,m,c]),reactExports.useEffect(()=>{if(h!==void 0){if(h===!1){y();return}g()}},[h]),h?jsxRuntimeExports.jsx(StructTreeItem,{className:"react-pdf__Page__structTree structTree",node:h}):null}const ANNOTATION_MODE=AnnotationMode;function Canvas(l){const t=usePageContext();invariant(t);const e={...t,...l},{_className:a,canvasBackground:c,devicePixelRatio:h=getDevicePixelRatio(),onRenderError:d,onRenderSuccess:f,page:m,renderForms:g,renderTextLayer:y,rotate:w,scale:E}=e,{canvasRef:S}=l;invariant(m);const C=reactExports.useRef(null);function T(){m&&f&&f(makePageCallback(m,E))}function k(j){isCancelException(j)||(warning(!1,j.toString()),d&&d(j))}const D=reactExports.useMemo(()=>m.getViewport({scale:E*h,rotation:w}),[h,m,w,E]),N=reactExports.useMemo(()=>m.getViewport({scale:E,rotation:w}),[m,w,E]);reactExports.useEffect(function(){if(!m)return;m.cleanup();const{current:F}=C;if(!F)return;F.width=D.width,F.height=D.height,F.style.width=`${Math.floor(N.width)}px`,F.style.height=`${Math.floor(N.height)}px`,F.style.visibility="hidden";const $={annotationMode:g?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,canvasContext:F.getContext("2d",{alpha:!1}),viewport:D};c&&($.background=c);const G=m.render($),nt=G;return G.promise.then(()=>{F.style.visibility="",T()}).catch(k),()=>cancelRunningTask(nt)},[c,m,g,D,N]);const L=reactExports.useCallback(()=>{const{current:j}=C;j&&(j.width=0,j.height=0)},[]);return reactExports.useEffect(()=>L,[L]),jsxRuntimeExports.jsx("canvas",{className:`${a}__canvas`,dir:"ltr",ref:mergeRefs(S,C),style:{display:"block",userSelect:"none"},children:y?jsxRuntimeExports.jsx(StructTree,{}):null})}function isTextItem(l){return"str"in l}function TextLayer(){const l=usePageContext();invariant(l);const{customTextRenderer:t,onGetTextError:e,onGetTextSuccess:a,onRenderTextLayerError:c,onRenderTextLayerSuccess:h,page:d,pageIndex:f,pageNumber:m,rotate:g,scale:y}=l;invariant(d);const[w,E]=useResolver(),{value:S,error:C}=w,T=reactExports.useRef(null);warning(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function k(){S&&a&&a(S)}function D(){C&&(warning(!1,C.toString()),e&&e(C))}reactExports.useEffect(function(){E({type:"RESET"})},[d,E]),reactExports.useEffect(function(){if(!d)return;const nt=makeCancellablePromise(d.getTextContent()),ot=nt;return nt.promise.then(ct=>{E({type:"RESOLVE",value:ct})}).catch(ct=>{E({type:"REJECT",error:ct})}),()=>cancelRunningTask(ot)},[d,E]),reactExports.useEffect(()=>{if(S!==void 0){if(S===!1){D();return}k()}},[S]);const N=reactExports.useCallback(()=>{h&&h()},[h]),L=reactExports.useCallback(G=>{warning(!1,G.toString()),c&&c(G)},[c]);function j(){const G=T.current;G&&G.classList.add("selecting")}function F(){const G=T.current;G&&G.classList.remove("selecting")}const $=reactExports.useMemo(()=>d.getViewport({scale:y,rotation:g}),[d,g,y]);return reactExports.useLayoutEffect(function(){if(!d||!S)return;const{current:nt}=T;if(!nt)return;nt.innerHTML="";const ot=d.streamTextContent({includeMarkedContent:!0}),ct={container:nt,textContentSource:ot,viewport:$},ft=new TextLayer$1(ct),Tt=ft;return ft.render().then(()=>{const At=document.createElement("div");At.className="endOfContent",nt.append(At);const gt=nt.querySelectorAll('[role="presentation"]');if(t){let Mt=0;S.items.forEach((q,z)=>{if(!isTextItem(q))return;const J=gt[Mt];if(!J)return;const lt=t({pageIndex:f,pageNumber:m,itemIndex:z,...q});J.innerHTML=lt,Mt+=q.str&&q.hasEOL?2:1})}N()}).catch(L),()=>cancelRunningTask(Tt)},[t,L,N,d,f,m,S,$]),jsxRuntimeExports.jsx("div",{className:clsx("react-pdf__Page__textContent","textLayer"),onMouseUp:F,onMouseDown:j,ref:T})}const defaultScale=1;function Page(l){const e={...useDocumentContext(),...l},{_className:a="react-pdf__Page",_enableRegisterUnregisterPage:c=!0,canvasBackground:h,canvasRef:d,children:f,className:m,customRenderer:g,customTextRenderer:y,devicePixelRatio:w,error:E="Failed to load the page.",height:S,inputRef:C,loading:T="Loading page",noData:k="No page specified.",onGetAnnotationsError:D,onGetAnnotationsSuccess:N,onGetStructTreeError:L,onGetStructTreeSuccess:j,onGetTextError:F,onGetTextSuccess:$,onLoadError:G,onLoadSuccess:nt,onRenderAnnotationLayerError:ot,onRenderAnnotationLayerSuccess:ct,onRenderError:ft,onRenderSuccess:Tt,onRenderTextLayerError:At,onRenderTextLayerSuccess:gt,pageIndex:Mt,pageNumber:q,pdf:z,registerPage:J,renderAnnotationLayer:lt=!0,renderForms:at=!1,renderMode:B="canvas",renderTextLayer:st=!0,rotate:mt,scale:vt=defaultScale,unregisterPage:Ct,width:_t,...bt}=e,[Dt,It]=useResolver(),{value:Lt,error:pe}=Dt,Te=reactExports.useRef(null);invariant(z);const Nt=isProvided(q)?q-1:Mt??null,Vt=q??(isProvided(Mt)?Mt+1:null),Xt=mt??(Lt?Lt.rotate:null),Yt=reactExports.useMemo(()=>{if(!Lt)return null;let Ce=1;const Ne=vt??defaultScale;if(_t||S){const Oe=Lt.getViewport({scale:1,rotation:Xt});_t?Ce=_t/Oe.width:S&&(Ce=S/Oe.height)}return Ne*Ce},[S,Lt,Xt,vt,_t]);reactExports.useEffect(function(){return()=>{isProvided(Nt)&&c&&Ct&&Ct(Nt)}},[c,z,Nt,Ct]);function Ge(){if(nt){if(!Lt||!Yt)return;nt(makePageCallback(Lt,Yt))}if(c&&J){if(!isProvided(Nt)||!Te.current)return;J(Nt,Te.current)}}function hn(){pe&&(warning(!1,pe.toString()),G&&G(pe))}reactExports.useEffect(function(){It({type:"RESET"})},[It,z,Nt]),reactExports.useEffect(function(){if(!z||!Vt)return;const Ne=makeCancellablePromise(z.getPage(Vt)),Oe=Ne;return Ne.promise.then(Je=>{It({type:"RESOLVE",value:Je})}).catch(Je=>{It({type:"REJECT",error:Je})}),()=>cancelRunningTask(Oe)},[It,z,Vt]),reactExports.useEffect(()=>{if(Lt!==void 0){if(Lt===!1){hn();return}Ge()}},[Lt,Yt]);const Dn=reactExports.useMemo(()=>isProvided(Nt)&&Vt&&isProvided(Xt)&&isProvided(Yt)?{_className:a,canvasBackground:h,customTextRenderer:y,devicePixelRatio:w,onGetAnnotationsError:D,onGetAnnotationsSuccess:N,onGetStructTreeError:L,onGetStructTreeSuccess:j,onGetTextError:F,onGetTextSuccess:$,onRenderAnnotationLayerError:ot,onRenderAnnotationLayerSuccess:ct,onRenderError:ft,onRenderSuccess:Tt,onRenderTextLayerError:At,onRenderTextLayerSuccess:gt,page:Lt,pageIndex:Nt,pageNumber:Vt,renderForms:at,renderTextLayer:st,rotate:Xt,scale:Yt}:null,[a,h,y,w,D,N,L,j,F,$,ot,ct,ft,Tt,At,gt,Lt,Nt,Vt,at,st,Xt,Yt]),Ln=reactExports.useMemo(()=>makeEventProps(bt,()=>Lt&&(Yt?makePageCallback(Lt,Yt):void 0)),[bt,Lt,Yt]),Ie=`${Nt}@${Yt}/${Xt}`;function bi(){switch(B){case"custom":return invariant(g),jsxRuntimeExports.jsx(g,{},`${Ie}_custom`);case"none":return null;case"canvas":default:return jsxRuntimeExports.jsx(Canvas,{canvasRef:d},`${Ie}_canvas`)}}function as(){return st?jsxRuntimeExports.jsx(TextLayer,{},`${Ie}_text`):null}function os(){return lt?jsxRuntimeExports.jsx(AnnotationLayer,{},`${Ie}_annotations`):null}function ls(){function Ce(Oe){return!!Oe?.page}if(!Ce(Dn))throw new Error("page is undefined");const Ne=typeof f=="function"?f(Dn):f;return jsxRuntimeExports.jsxs(pageContext.Provider,{value:Dn,children:[bi(),as(),os(),Ne]})}function cs(){return Vt?z===null||Lt===void 0||Lt===null?jsxRuntimeExports.jsx(Message,{type:"loading",children:typeof T=="function"?T():T}):z===!1||Lt===!1?jsxRuntimeExports.jsx(Message,{type:"error",children:typeof E=="function"?E():E}):ls():jsxRuntimeExports.jsx(Message,{type:"no-data",children:typeof k=="function"?k():k})}return jsxRuntimeExports.jsx("div",{className:clsx(a,m),"data-page-number":Vt,ref:mergeRefs(C,Te),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${Yt}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:h||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...Ln,children:cs()})}displayWorkerWarning();GlobalWorkerOptions.workerSrc="pdf.worker.mjs";const workerSrc="/assets/pdf.worker.min-DbR_HJhJ.mjs";var define_process_env_default={};GlobalWorkerOptions.workerSrc=workerSrc;function ResumeViewer({onClose:l}){const t=reactExports.useRef(null),[e,a]=reactExports.useState(800),[c,h]=reactExports.useState(null),[d,f]=reactExports.useState(0);reactExports.useEffect(()=>{const y=()=>{t.current&&a(Math.min(t.current.clientWidth-24,1100))};return y(),window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)},[]);const g=`${(typeof import.meta<"u"&&"/"||typeof process<"u"&&define_process_env_default?.PUBLIC_URL||"/").replace(/\/+$/,"")}/Kiran_Mulawad_CV.pdf`;return jsxRuntimeExports.jsx(motion.div,{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/75",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:jsxRuntimeExports.jsxs(motion.div,{className:"bg-white dark:bg-gray-900 p-6 rounded-xl shadow-2xl max-w-4xl w-full h-[80vh] flex flex-col overflow-hidden",initial:{scale:.96,y:8},animate:{scale:1,y:0},exit:{scale:.96,y:8},children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"Kiran's CV"}),jsxRuntimeExports.jsx("button",{onClick:l,className:"text-3xl leading-none text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-white",children:""})]}),jsxRuntimeExports.jsx("div",{ref:t,className:"flex-grow overflow-auto border rounded-md bg-gray-50 dark:bg-gray-800",children:c?jsxRuntimeExports.jsxs("div",{className:"p-6 text-center space-y-3",children:[jsxRuntimeExports.jsx("p",{className:"text-red-600",children:"Couldnt render the PDF."}),jsxRuntimeExports.jsx("a",{className:"underline",href:g,target:"_blank",rel:"noreferrer",children:"Open PDF in new tab"})]}):jsxRuntimeExports.jsxs(Document,{file:g,onLoadSuccess:({numPages:y})=>{y<2&&console.warn(`PDF has only ${y} page(s).`)},onLoadError:y=>{console.error("onLoadError:",y),h(y)},onSourceError:y=>{console.error("onSourceError:",y),h(y)},loading:jsxRuntimeExports.jsx("div",{className:"p-6 text-center",children:"Loading PDF"}),children:[jsxRuntimeExports.jsx(Page,{pageNumber:1,width:Math.max(320,Math.floor(e)),renderTextLayer:!0,renderAnnotationLayer:!0,className:"m-0"}),jsxRuntimeExports.jsx(Page,{pageNumber:2,width:Math.max(320,Math.floor(e)),renderTextLayer:!0,renderAnnotationLayer:!0,className:"mt-6"})]})}),jsxRuntimeExports.jsx("div",{className:"mt-4 text-center",children:jsxRuntimeExports.jsx("a",{href:g,download:"Kiran_Mulawad_CV.pdf",className:"inline-block bg-[#DAA520] text-white font-semibold py-2 px-6 rounded-lg hover:bg-opacity-90 transition-colors",children:"Download PDF"})})]})})}const Background=({theme:l})=>{const t=reactExports.useRef(null);return reactExports.useEffect(()=>{const e=t.current;if(!e)return;const a=e.getContext("2d");let c,h=0;const d=()=>{e.width=window.innerWidth,e.height=window.innerHeight};d(),window.addEventListener("resize",d);const f=()=>{const E=l==="dark"?"rgba(139, 92, 246, 0.15)":"rgba(139, 92, 246, 0.12)";for(let S=0;S<e.width;S+=30)for(let C=0;C<e.height;C+=30)a.beginPath(),a.arc(S,C,1,0,Math.PI*2),a.fillStyle=E,a.fill()},m=()=>{(l==="dark"?[{x:.15,y:.2,color:"rgba(139, 92, 246, 0.12)",size:.6},{x:.85,y:.15,color:"rgba(124, 58, 237, 0.08)",size:.5},{x:.5,y:.85,color:"rgba(167, 139, 250, 0.06)",size:.7},{x:.1,y:.75,color:"rgba(109, 40, 217, 0.1)",size:.4}]:[{x:.15,y:.2,color:"rgba(139, 92, 246, 0.08)",size:.6},{x:.85,y:.15,color:"rgba(124, 58, 237, 0.06)",size:.5},{x:.5,y:.85,color:"rgba(167, 139, 250, 0.05)",size:.7},{x:.1,y:.75,color:"rgba(109, 40, 217, 0.07)",size:.4}]).forEach((w,E)=>{const S=Math.sin(h+E*1.5)*80,C=Math.cos(h*.8+E*2)*60,T=e.width*w.x+S,k=e.height*w.y+C,D=a.createRadialGradient(T,k,0,T,k,e.width*w.size);D.addColorStop(0,w.color),D.addColorStop(.5,w.color.replace(/[\d.]+\)$/,"0.02)")),D.addColorStop(1,"rgba(0, 0, 0, 0)"),a.fillStyle=D,a.fillRect(0,0,e.width,e.height)})},g=()=>{h+=.002,a.clearRect(0,0,e.width,e.height),m(),f(),c=requestAnimationFrame(g)};return g(),()=>{window.removeEventListener("resize",d),cancelAnimationFrame(c)}},[l]),jsxRuntimeExports.jsx(motion.canvas,{ref:t,className:"fixed top-0 left-0 w-full h-full pointer-events-none",style:{zIndex:0},initial:{opacity:0},animate:{opacity:1},transition:{duration:1.2}})},ScrollProgress=()=>{const[l,t]=reactExports.useState(0);return reactExports.useEffect(()=>{const e=()=>{const a=document.documentElement.scrollHeight-document.documentElement.clientHeight,c=window.scrollY/a*100;t(c)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),jsxRuntimeExports.jsx(motion.div,{className:"fixed top-0 left-0 right-0 h-1 bg-gradient-to-r from-violet-500 via-violet-400 to-violet-600 origin-left z-[9999]",style:{scaleX:l/100},initial:{scaleX:0}})},BackToTop=()=>{const[l,t]=reactExports.useState(!1);reactExports.useEffect(()=>{const a=()=>{window.scrollY>300?t(!0):t(!1)};return window.addEventListener("scroll",a),()=>window.removeEventListener("scroll",a)},[]);const e=()=>{window.scrollTo({top:0,behavior:"smooth"})};return jsxRuntimeExports.jsx(AnimatePresence,{children:l&&jsxRuntimeExports.jsx(motion.button,{initial:{opacity:0,scale:.5,y:100},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.5,y:100},whileHover:{scale:1.1},whileTap:{scale:.9},onClick:e,className:"fixed bottom-8 right-8 z-50 bg-gradient-to-r from-violet-500 to-violet-600 text-white p-4 rounded-full shadow-glow hover:shadow-glow-lg transition-all duration-300 group","aria-label":"Back to top",children:jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 transform group-hover:-translate-y-1 transition-transform duration-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 10l7-7m0 0l7 7m-7-7v18"})})})})},AnimatedCounter=({end:l,duration:t=2,suffix:e="",prefix:a=""})=>{const[c,h]=reactExports.useState(0),[d,f]=reactExports.useState(!1),m=reactExports.useRef(null);return reactExports.useEffect(()=>{const g=new IntersectionObserver(([y])=>{if(y.isIntersecting&&!d){f(!0);const w=l/(t*60);let E=0;const S=setInterval(()=>{E+=w,E>=l?(h(l),clearInterval(S)):h(Math.floor(E))},1e3/60);return()=>clearInterval(S)}},{threshold:.5});return m.current&&g.observe(m.current),()=>g.disconnect()},[l,t,d]),jsxRuntimeExports.jsxs("span",{ref:m,children:[a,c,e]})},StatsSection=()=>{const l=[{icon:"",label:"Projects Completed",value:4,suffix:"+"},{icon:"",label:"Years Experience",value:2,suffix:"+"},{icon:"",label:"Certifications",value:5,suffix:"+"},{icon:"",label:"Client Satisfaction",value:100,suffix:"%"}];return jsxRuntimeExports.jsx("section",{className:"py-16 bg-transparent relative",children:jsxRuntimeExports.jsx("div",{className:"container mx-auto px-6",children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},className:"glass-card rounded-3xl p-8 md:p-12",children:jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8",children:l.map((t,e)=>jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.5},whileInView:{opacity:1,scale:1},transition:{duration:.5,delay:e*.1},viewport:{once:!0},className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-4xl md:text-5xl mb-3",children:t.icon}),jsxRuntimeExports.jsx("div",{className:"text-3xl md:text-4xl font-bold text-gray-800 dark:text-white mb-2",children:jsxRuntimeExports.jsx(AnimatedCounter,{end:t.value,duration:2,suffix:t.suffix})}),jsxRuntimeExports.jsx("div",{className:"text-sm md:text-base text-gray-600 dark:text-gray-300",children:t.label})]},e))})})})})},App=()=>{const[l,t]=reactExports.useState(()=>typeof window<"u"&&localStorage.getItem("theme")?localStorage.getItem("theme"):"dark"),[e,a]=reactExports.useState(!1);reactExports.useEffect(()=>{const h=document.documentElement;l==="dark"?(h.classList.add("dark"),localStorage.setItem("theme","dark")):(h.classList.remove("dark"),localStorage.setItem("theme","light"))},[l]);const c=()=>{t(h=>h==="light"?"dark":"light")};return reactExports.useEffect(()=>{const h=document.querySelectorAll("main section"),d=document.querySelectorAll(".nav-link"),f=()=>{let m="";h.forEach(g=>{const y=g.offsetTop,w=window.scrollY+80;w>=y&&w<y+g.clientHeight&&(m=g.getAttribute("id"))}),d.forEach(g=>{g.classList.remove("active"),g.getAttribute("href")&&g.getAttribute("href").includes(m)&&g.classList.add("active")})};return window.addEventListener("scroll",f),f(),()=>{window.removeEventListener("scroll",f)}},[]),jsxRuntimeExports.jsxs(AnimatePresence,{children:[jsxRuntimeExports.jsx(ScrollProgress,{}),jsxRuntimeExports.jsx(BackToTop,{}),jsxRuntimeExports.jsx(Background,{theme:l}),jsxRuntimeExports.jsxs("div",{className:"antialiased font-inter bg-[#FDFBF7] dark:bg-gray-900 transition-colors duration-500 relative",children:[jsxRuntimeExports.jsx(Header,{theme:l,toggleTheme:c}),jsxRuntimeExports.jsxs("main",{className:"relative z-10",children:[jsxRuntimeExports.jsx(Hero,{onShowResume:()=>a(!0)}),jsxRuntimeExports.jsx(About,{}),jsxRuntimeExports.jsx(StatsSection,{}),jsxRuntimeExports.jsx(Skills,{}),jsxRuntimeExports.jsx(Projects,{}),jsxRuntimeExports.jsx(Experience,{}),jsxRuntimeExports.jsx(Education,{}),jsxRuntimeExports.jsx(Contact,{})]}),jsxRuntimeExports.jsx(Footer,{})]}),e&&jsxRuntimeExports.jsx(AnimatePresence,{children:jsxRuntimeExports.jsx(ResumeViewer,{onClose:()=>a(!1)})})]})},rootElement=document.getElementById("root");rootElement?ReactDOM.createRoot(rootElement).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(App,{})})):console.error("Root element with ID 'root' not found in the DOM.");
